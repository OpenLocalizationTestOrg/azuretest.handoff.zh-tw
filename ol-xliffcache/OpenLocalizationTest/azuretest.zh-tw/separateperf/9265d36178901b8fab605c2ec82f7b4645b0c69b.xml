{
  "nodes": [
    {
      "content": "How to make a phone call from Twilio (PHP) | Microsoft Azure",
      "pos": [
        28,
        88
      ]
    },
    {
      "content": "Learn how to make a phone call and send a SMS message with the Twilio API service on Azure.",
      "pos": [
        108,
        199
      ]
    },
    {
      "content": "Samples are for PHP application.",
      "pos": [
        200,
        232
      ]
    },
    {
      "content": "How to Make a Phone Call Using Twilio in a PHP Application on Azure",
      "pos": [
        554,
        621
      ]
    },
    {
      "content": "The following example shows you how you can use Twilio to make a call from a PHP web page hosted in Azure.",
      "pos": [
        624,
        730
      ]
    },
    {
      "content": "The resulting application will prompt the user for phone call values, as shown in the following screen shot.",
      "pos": [
        731,
        839
      ]
    },
    {
      "content": "Azure Call Form Using Twilio and PHP",
      "pos": [
        843,
        879
      ]
    },
    {
      "content": "You'll need to do the following to use the code in this topic:",
      "pos": [
        894,
        956
      ]
    },
    {
      "content": "Acquire a Twilio account and authentication token.",
      "pos": [
        961,
        1011
      ]
    },
    {
      "content": "To get started with Twilio, evaluate pricing at <bpt id=\"p1\">[</bpt>http://www.twilio.com/pricing<ept id=\"p1\">][twilio_pricing]</ept>.",
      "pos": [
        1012,
        1108
      ]
    },
    {
      "content": "You can sign up for a trial account at <bpt id=\"p1\">[</bpt>https://www.twilio.com/try-twilio<ept id=\"p1\">][try_twilio]</ept>.",
      "pos": [
        1109,
        1196
      ]
    },
    {
      "content": "For information about the API provided by Twilio, see <bpt id=\"p1\">[</bpt>http://www.twilio.com/api<ept id=\"p1\">][twilio_api]</ept>.",
      "pos": [
        1197,
        1291
      ]
    },
    {
      "content": "Obtain the Twilio library for PHP.",
      "pos": [
        1295,
        1329
      ]
    },
    {
      "content": "You can download it from GitHub (<bpt id=\"p1\">[</bpt>https://github.com/twilio/twilio-php<ept id=\"p1\">][twilio_php_github]</ept>) or install it as a PEAR package.",
      "pos": [
        1330,
        1454
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>https://github.com/twilio/twilio-php/blob/master/README.md<ept id=\"p1\">][twilio_github_readme]</ept>.",
      "pos": [
        1455,
        1564
      ]
    },
    {
      "content": "Install the Azure SDK for PHP.",
      "pos": [
        1568,
        1598
      ]
    },
    {
      "content": "For an overview of the SDK and instructions on installing it, see <bpt id=\"p1\">[</bpt>Set up the Azure SDK for PHP<ept id=\"p1\">][setup_php_sdk]</ept>.",
      "pos": [
        1599,
        1711
      ]
    },
    {
      "content": "Create a web form for making a call",
      "pos": [
        1716,
        1751
      ]
    },
    {
      "pos": [
        1753,
        1870
      ],
      "content": "The following HTML code shows how to build a web page (<bpt id=\"p1\">**</bpt>callform.html<ept id=\"p1\">**</ept>) that retrieves user data for making a call:"
    },
    {
      "content": "Create the code to make the call",
      "pos": [
        2711,
        2743
      ]
    },
    {
      "content": "The following code shows how to build a web page (<bpt id=\"p1\">**</bpt>makecall.php<ept id=\"p1\">**</ept>) which is called when the user submits the form displayed by <bpt id=\"p2\">**</bpt>callform.html<ept id=\"p2\">**</ept>.",
      "pos": [
        2744,
        2890
      ]
    },
    {
      "content": "The code shown below creates the call message and generates the call.",
      "pos": [
        2891,
        2960
      ]
    },
    {
      "content": "(Use your Twilio account and authentication token instead of the placeholder values assigned to <bpt id=\"p1\">**</bpt>$sid<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>$token<ept id=\"p2\">**</ept> in the code below.)",
      "pos": [
        2961,
        3100
      ]
    },
    {
      "content": "In addition to making the call, <bpt id=\"p1\">**</bpt>makecall.php<ept id=\"p1\">**</ept> displays some call metadata (example shown in screenshot below).",
      "pos": [
        3853,
        3966
      ]
    },
    {
      "content": "For more information about call metadata, see <bpt id=\"p1\">[</bpt>https://www.twilio.com/docs/api/rest/call#instance-properties<ept id=\"p1\">][twilio_call_properties]</ept>.",
      "pos": [
        3967,
        4101
      ]
    },
    {
      "content": "Azure Call Response Using Twilio and PHP",
      "pos": [
        4105,
        4145
      ]
    },
    {
      "content": "Run the application",
      "pos": [
        4172,
        4191
      ]
    },
    {
      "content": "The next step is to deploy your application to Azure Websites.",
      "pos": [
        4192,
        4254
      ]
    },
    {
      "content": "The following articles contain the information for creating a website and deploying your code with Git, FTP, or WebMatrix (though not all information in each article is relevant):",
      "pos": [
        4255,
        4434
      ]
    },
    {
      "content": "Create a PHP-MySQL Azure Web Site and deploy using Git",
      "pos": [
        4439,
        4493
      ]
    },
    {
      "content": "Create a PHP-MySQL Azure Web Site and Deploy Using FTP",
      "pos": [
        4511,
        4565
      ]
    },
    {
      "content": "Create and deploy a PHP-MySQL Azure Web Site using WebMatrix",
      "pos": [
        4583,
        4643
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        4668,
        4678
      ]
    },
    {
      "content": "This code was provided to show you basic functionality using Twilio in PHP on Azure.",
      "pos": [
        4679,
        4763
      ]
    },
    {
      "content": "Before deploying to Azure in production, you may want to add more error handling or other features.",
      "pos": [
        4764,
        4863
      ]
    },
    {
      "content": "For example:",
      "pos": [
        4864,
        4876
      ]
    },
    {
      "content": "Instead of using a web form, you could use Azure storage blobs or SQL Database to store phone numbers and call text.",
      "pos": [
        4880,
        4996
      ]
    },
    {
      "content": "For information about using Azure storage blobs in PHP, see <bpt id=\"p1\">[</bpt>Using Azure Storage with PHP Applications<ept id=\"p1\">][howto_blob_storage_php]</ept>.",
      "pos": [
        4997,
        5125
      ]
    },
    {
      "content": "For information about using SQL Database in PHP, see <bpt id=\"p1\">[</bpt>Using SQL Database with PHP Applications<ept id=\"p1\">][howto_sql_azure_php]</ept>.",
      "pos": [
        5126,
        5243
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>makecall.php<ept id=\"p1\">**</ept> code uses Twilio-provided URL (<bpt id=\"p2\">[</bpt>http://twimlets.com/message<ept id=\"p2\">][twimlet_message_url]</ept>) to provide a Twilio Markup Language (TwiML) response that informs Twilio how to proceed with the call.",
      "pos": [
        5246,
        5452
      ]
    },
    {
      "content": "For example, the TwiML that is returned can contain a <ph id=\"ph1\">`&lt;Say&gt;`</ph> verb that results in text being spoken to the call recipient.",
      "pos": [
        5453,
        5576
      ]
    },
    {
      "content": "Instead of using the Twilio-provided URL, you could build your own service to respond to Twilio's request; for more information, see <bpt id=\"p1\">[</bpt>How to Use Twilio for Voice and SMS Capabilities in PHP<ept id=\"p1\">][howto_twilio_voice_sms_php]</ept>.",
      "pos": [
        5577,
        5796
      ]
    },
    {
      "content": "More information about TwiML can be found at <bpt id=\"p1\">[</bpt>http://www.twilio.com/docs/api/twiml<ept id=\"p1\">][twiml]</ept>, and more information about <ph id=\"ph1\">`&lt;Say&gt;`</ph> and other Twilio verbs can be found at <bpt id=\"p2\">[</bpt>http://www.twilio.com/docs/api/twiml/say<ept id=\"p2\">][twilio_say]</ept>.",
      "pos": [
        5797,
        6018
      ]
    },
    {
      "pos": [
        6021,
        6121
      ],
      "content": "Read the Twilio security guidelines at <bpt id=\"p1\">[</bpt>https://www.twilio.com/docs/security<ept id=\"p1\">][twilio_docs_security]</ept>."
    },
    {
      "pos": [
        6123,
        6211
      ],
      "content": "For additional information about Twilio, see <bpt id=\"p1\">[</bpt>https://www.twilio.com/docs<ept id=\"p1\">][twilio_docs]</ept>."
    },
    {
      "content": "See Also",
      "pos": [
        6216,
        6224
      ]
    },
    {
      "content": "How to Use Twilio for Voice and SMS Capabilities in PHP",
      "pos": [
        6228,
        6283
      ]
    },
    {
      "content": "test",
      "pos": [
        8173,
        8177
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"How to make a phone call from Twilio (PHP) | Microsoft Azure\" \n    description=\"Learn how to make a phone call and send a SMS message with the Twilio API service on Azure. Samples are for PHP application.\" \n    documentationCenter=\"php\" \n    services=\"\" \n    authors=\"devinrader\" \n    manager=\"twilio\" \n    editor=\"mollybos\"/>\n\n<tags \n    ms.service=\"multiple\" \n    ms.workload=\"na\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"PHP\" \n    ms.topic=\"article\" \n    ms.date=\"11/25/2014\" \n    ms.author=\"microsofthelp@twilio.com\"/>\n\n# How to Make a Phone Call Using Twilio in a PHP Application on Azure \n\nThe following example shows you how you can use Twilio to make a call from a PHP web page hosted in Azure. The resulting application will prompt the user for phone call values, as shown in the following screen shot.\n\n![Azure Call Form Using Twilio and PHP][twilio_php]\n\nYou'll need to do the following to use the code in this topic:\n\n1. Acquire a Twilio account and authentication token. To get started with Twilio, evaluate pricing at [http://www.twilio.com/pricing][twilio_pricing]. You can sign up for a trial account at [https://www.twilio.com/try-twilio][try_twilio]. For information about the API provided by Twilio, see [http://www.twilio.com/api][twilio_api].\n2. Obtain the Twilio library for PHP. You can download it from GitHub ([https://github.com/twilio/twilio-php][twilio_php_github]) or install it as a PEAR package. For more information, see [https://github.com/twilio/twilio-php/blob/master/README.md][twilio_github_readme].\n3. Install the Azure SDK for PHP. For an overview of the SDK and instructions on installing it, see [Set up the Azure SDK for PHP][setup_php_sdk].\n\n## Create a web form for making a call\n\nThe following HTML code shows how to build a web page (**callform.html**) that retrieves user data for making a call:\n\n    <html>\n    <head>\n        <title>Automated call form</title>\n    </head>\n    <body>\n    <h1>Automated Call Form</h1>\n    <p>Fill in all fields and click <b>Make this call</b>.</p>\n    <form action=\"makecall.php\" method=\"post\">\n    <table>\n        <tr>\n            <td>To:</td>\n            <td><input type=\"text\" size=50 name=\"callTo\" value=\"\"></td>\n        </tr>\n        <tr>\n            <td>From:</td>\n            <td><input type=\"text\" size=50 name=\"callFrom\" value=\"\"></td>\n        </tr>\n        <tr>\n            <td>Call message:</td>\n            <td><input type=\"text\" size=100 name=\"callText\" value=\"Hello. This is the call text. Good bye.\" /></td>\n        </tr>\n        <tr>\n            <td colspan=2><input type=\"submit\" value=\"Make this call\"></td>\n        </tr>\n    </table>\n    </form>\n    <br/>\n    </body>\n    </html>\n\n## Create the code to make the call\nThe following code shows how to build a web page (**makecall.php**) which is called when the user submits the form displayed by **callform.html**. The code shown below creates the call message and generates the call. (Use your Twilio account and authentication token instead of the placeholder values assigned to **$sid** and **$token** in the code below.)\n\n    <html>\n    <head><title>Making call...</title></head>\n    <body>\n    <p>Your call is being made.</p>\n\n    <?php\n    require_once 'Services/Twilio.php';\n\n    $sid = \"your_account_sid\";\n    $token = \"your_authentication_token\";\n\n    $from_number = $_POST['callFrom']; // Calls must be made from a registered Twilio number.\n    $to_number = $_POST['callTo'];\n    $message = $_POST['callText'];\n\n    $client = new Services_Twilio($sid, $token, \"2010-04-01\");\n\n    $call = $client->account->calls->create(\n        $from_number, \n        $to_number,\n        'http://twimlets.com/message?Message='.urlencode($message)\n    );\n\n    echo \"Call status: \".$call->status.\"<br />\";\n    echo \"URI resource: \".$call->uri.\"<br />\";\n    ?>\n    </body>\n    </html>\n\nIn addition to making the call, **makecall.php** displays some call metadata (example shown in screenshot below). For more information about call metadata, see [https://www.twilio.com/docs/api/rest/call#instance-properties][twilio_call_properties].\n\n![Azure Call Response Using Twilio and PHP][twilio_php_response]\n\n## Run the application\nThe next step is to deploy your application to Azure Websites. The following articles contain the information for creating a website and deploying your code with Git, FTP, or WebMatrix (though not all information in each article is relevant):\n\n* [Create a PHP-MySQL Azure Web Site and deploy using Git][website-git]\n* [Create a PHP-MySQL Azure Web Site and Deploy Using FTP][website-ftp]\n* [Create and deploy a PHP-MySQL Azure Web Site using WebMatrix][website-webmatrix]\n\n## Next steps\nThis code was provided to show you basic functionality using Twilio in PHP on Azure. Before deploying to Azure in production, you may want to add more error handling or other features. For example:\n\n* Instead of using a web form, you could use Azure storage blobs or SQL Database to store phone numbers and call text. For information about using Azure storage blobs in PHP, see [Using Azure Storage with PHP Applications][howto_blob_storage_php]. For information about using SQL Database in PHP, see [Using SQL Database with PHP Applications][howto_sql_azure_php].\n* The **makecall.php** code uses Twilio-provided URL ([http://twimlets.com/message][twimlet_message_url]) to provide a Twilio Markup Language (TwiML) response that informs Twilio how to proceed with the call. For example, the TwiML that is returned can contain a `<Say>` verb that results in text being spoken to the call recipient. Instead of using the Twilio-provided URL, you could build your own service to respond to Twilio's request; for more information, see [How to Use Twilio for Voice and SMS Capabilities in PHP][howto_twilio_voice_sms_php]. More information about TwiML can be found at [http://www.twilio.com/docs/api/twiml][twiml], and more information about `<Say>` and other Twilio verbs can be found at [http://www.twilio.com/docs/api/twiml/say][twilio_say].\n* Read the Twilio security guidelines at [https://www.twilio.com/docs/security][twilio_docs_security].\n\nFor additional information about Twilio, see [https://www.twilio.com/docs][twilio_docs].\n\n## See Also\n* [How to Use Twilio for Voice and SMS Capabilities in PHP](partner-twilio-php-how-to-use-voice-sms.md)\n\n[twilio_pricing]: http://www.twilio.com/pricing\n[try_twilio]: http://www.twilio.com/try-twilio\n[twilio_api]: http://www.twilio.com/api\n[verify_phone]: https://www.twilio.com/user/account/phone-numbers/verified#\n[twilio_php]: https://github.com/twilio/twilio-php\n[twilio_github_readme]: https://github.com/twilio/twilio-php/blob/master/README.md\n[setup_php_sdk]: http://azurephp.interoperabilitybridges.com/articles/setup-the-windows-azure-sdk-for-php\n[twimlet_message_url]: http://twimlets.com/message\n[twiml]: http://www.twilio.com/docs/api/twiml\n[twilio_api_service]: http://api.twilio.com\n[build_php_azure_app]: http://azurephp.interoperabilitybridges.com/articles/build-and-deploy-a-windows-azure-php-application\n[howto_twilio_voice_sms_php]: partner-twilio-php-how-to-use-voice-sms.md\n[howto_blob_storage_php]: http://azure.microsoft.com/documentation/articles/storage-php-how-to-use-blobs/\n[howto_sql_azure_php]: http://azure.microsoft.com/documentation/articles/sql-database-php-how-to-use/\n[twilio_call_properties]: https://www.twilio.com/docs/api/rest/call#instance-properties\n[twilio_docs_security]: http://www.twilio.com/docs/security\n[twilio_docs]: http://www.twilio.com/docs\n[twilio_say]: http://www.twilio.com/docs/api/twiml/say\n[ssl_validation]: http://readthedocs.org/docs/twilio-php/en/latest/usage/rest.html\n[twilio_php]: ./media/partner-twilio-php-make-phone-call/WA_TwilioPHPCallForm.jpg\n[twilio_php_response]: ./media/partner-twilio-php-make-phone-call/WA_TwilioPHPMakeCall.jpg\n[website-git]: https://www.windowsazure.com/develop/php/tutorials/website-w-mysql-and-git/\n[website-ftp]: https://www.windowsazure.com/develop/php/tutorials/website-w-mysql-and-ftp/\n[website-webmatrix]: https://www.windowsazure.com/develop/php/tutorials/website-w-mysql-and-webmatrix/\n[twilio_php_github]: https://github.com/twilio/twilio-php\n\ntest\n"
}