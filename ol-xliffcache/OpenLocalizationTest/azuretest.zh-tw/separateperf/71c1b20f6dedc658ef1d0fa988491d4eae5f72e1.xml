{
  "nodes": [
    {
      "content": "How to Use Twilio for Voice and SMS (Java) | Microsoft Azure",
      "pos": [
        28,
        88
      ]
    },
    {
      "content": "Learn how to make a phone call and send a SMS message with the Twilio API service on Azure.",
      "pos": [
        108,
        199
      ]
    },
    {
      "content": "Code samples written in Java.",
      "pos": [
        200,
        229
      ]
    },
    {
      "content": "How to Use Twilio for Voice and SMS Capabilities in Java",
      "pos": [
        553,
        609
      ]
    },
    {
      "content": "This guide demonstrates how to perform common programming tasks with the Twilio API service on Azure.",
      "pos": [
        611,
        712
      ]
    },
    {
      "content": "The scenarios covered include making a phone call and sending a Short Message Service (SMS) message.",
      "pos": [
        713,
        813
      ]
    },
    {
      "content": "For more information on Twilio and using voice and SMS in your applications, see the <bpt id=\"p1\">[</bpt>Next Steps<ept id=\"p1\">](#NextSteps)</ept> section.",
      "pos": [
        814,
        932
      ]
    },
    {
      "pos": [
        937,
        971
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"WhatIs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>What is Twilio?"
    },
    {
      "content": "Twilio is a telephony web-service API that lets you use your existing web languages and skills to build voice and SMS applications.",
      "pos": [
        972,
        1103
      ]
    },
    {
      "content": "Twilio is a third-party service (not an Azure feature and not a Microsoft product).",
      "pos": [
        1104,
        1187
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio Voice<ept id=\"p1\">**</ept> allows your applications to make and receive phone calls.",
      "pos": [
        1189,
        1263
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio SMS<ept id=\"p1\">**</ept> allows your applications to make and receive SMS messages.",
      "pos": [
        1264,
        1337
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio Client<ept id=\"p1\">**</ept> allows your applications to enable voice communication using existing Internet connections, including mobile connections.",
      "pos": [
        1338,
        1477
      ]
    },
    {
      "pos": [
        1482,
        1535
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Pricing\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Twilio Pricing and Special Offers"
    },
    {
      "content": "Information about Twilio pricing is available at <bpt id=\"p1\">[</bpt>Twilio Pricing<ept id=\"p1\">] [twilio_pricing]</ept>.",
      "pos": [
        1536,
        1619
      ]
    },
    {
      "content": "Azure customers receive a <bpt id=\"p1\">[</bpt>special offer<ept id=\"p1\">][special_offer]</ept>: a free credit of 1000 texts or 1000 inbound minutes.",
      "pos": [
        1620,
        1730
      ]
    },
    {
      "content": "To sign up for this offer or get more information, please visit <bpt id=\"p1\">[</bpt>http://ahoy.twilio.com/azure<ept id=\"p1\">][special_offer]</ept>.",
      "pos": [
        1731,
        1841
      ]
    },
    {
      "pos": [
        1848,
        1877
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Concepts\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Concepts"
    },
    {
      "content": "The Twilio API is a RESTful API that provides voice and SMS functionality for applications.",
      "pos": [
        1878,
        1969
      ]
    },
    {
      "content": "Client libraries are available in multiple languages; for a list, see <bpt id=\"p1\">[</bpt>Twilio API Libraries<ept id=\"p1\">] [twilio_libraries]</ept>.",
      "pos": [
        1970,
        2082
      ]
    },
    {
      "content": "Key aspects of the Twilio API are Twilio verbs and Twilio Markup Language (TwiML).",
      "pos": [
        2084,
        2166
      ]
    },
    {
      "pos": [
        2172,
        2202
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Verbs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Twilio Verbs"
    },
    {
      "pos": [
        2203,
        2332
      ],
      "content": "The API makes use of Twilio verbs; for example, the <bpt id=\"p1\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p1\">**</ept> verb instructs Twilio to audibly deliver a message on a call."
    },
    {
      "content": "The following is a list of Twilio verbs.",
      "pos": [
        2335,
        2375
      ]
    },
    {
      "pos": [
        2379,
        2434
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Dial&amp;gt;<ept id=\"p1\">**</ept>: Connects the caller to another phone."
    },
    {
      "pos": [
        2437,
        2513
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Gather&amp;gt;<ept id=\"p1\">**</ept>: Collects numeric digits entered on the telephone keypad."
    },
    {
      "pos": [
        2516,
        2548
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Hangup&amp;gt;<ept id=\"p1\">**</ept>: Ends a call."
    },
    {
      "pos": [
        2551,
        2589
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Play&amp;gt;<ept id=\"p1\">**</ept>: Plays an audio file."
    },
    {
      "pos": [
        2592,
        2660
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Pause&amp;gt;<ept id=\"p1\">**</ept>: Waits silently for a specified number of seconds."
    },
    {
      "pos": [
        2663,
        2766
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Record&amp;gt;<ept id=\"p1\">**</ept>: Records the caller's voice and returns a URL of a file that contains the recording."
    },
    {
      "pos": [
        2769,
        2858
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Redirect&amp;gt;<ept id=\"p1\">**</ept>: Transfers control of a call or SMS to the TwiML at a different URL."
    },
    {
      "pos": [
        2861,
        2947
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Reject&amp;gt;<ept id=\"p1\">**</ept>: Rejects an incoming call to your Twilio number without billing you"
    },
    {
      "pos": [
        2950,
        3014
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p1\">**</ept>: Converts text to speech that is made on a call."
    },
    {
      "pos": [
        3017,
        3055
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Sms&amp;gt;<ept id=\"p1\">**</ept>: Sends an SMS message."
    },
    {
      "pos": [
        3061,
        3084
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"TwiML\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>TwiML"
    },
    {
      "content": "TwiML is a set of XML-based instructions based on the Twilio verbs that inform Twilio of how to process a call or SMS.",
      "pos": [
        3085,
        3203
      ]
    },
    {
      "pos": [
        3205,
        3289
      ],
      "content": "As an example, the following TwiML would convert the text <bpt id=\"p1\">**</bpt>Hello World<ept id=\"p1\">**</ept> to speech."
    },
    {
      "content": "When your application calls the Twilio API, one of the API parameters is the URL that returns the TwiML response.",
      "pos": [
        3397,
        3510
      ]
    },
    {
      "content": "For development purposes, you can use Twilio-provided URLs to provide the TwiML responses used by your applications.",
      "pos": [
        3511,
        3627
      ]
    },
    {
      "content": "You could also host your own URLs to produce the TwiML responses, and another option is to use the <bpt id=\"p1\">**</bpt>TwiMLResponse<ept id=\"p1\">**</ept> object.",
      "pos": [
        3628,
        3752
      ]
    },
    {
      "content": "For more information about Twilio verbs, their attributes, and TwiML, see <bpt id=\"p1\">[</bpt>TwiML<ept id=\"p1\">] [twiml]</ept>.",
      "pos": [
        3754,
        3844
      ]
    },
    {
      "content": "For additional information about the Twilio API, see <bpt id=\"p1\">[</bpt>Twilio API<ept id=\"p1\">] [twilio_api]</ept>.",
      "pos": [
        3845,
        3924
      ]
    },
    {
      "pos": [
        3929,
        3978
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"CreateAccount\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Create a Twilio Account"
    },
    {
      "content": "When you're ready to get a Twilio account, sign up at <bpt id=\"p1\">[</bpt>Try Twilio<ept id=\"p1\">] [try_twilio]</ept>.",
      "pos": [
        3979,
        4059
      ]
    },
    {
      "content": "You can start with a free account, and upgrade your account later.",
      "pos": [
        4060,
        4126
      ]
    },
    {
      "content": "When you sign up for a Twilio account, you'll receive an account ID and an authentication token.",
      "pos": [
        4128,
        4224
      ]
    },
    {
      "content": "Both will be needed to make Twilio API calls.",
      "pos": [
        4225,
        4270
      ]
    },
    {
      "content": "To prevent unauthorized access to your account, keep your authentication token secure.",
      "pos": [
        4271,
        4357
      ]
    },
    {
      "content": "Your account ID and authentication token are viewable at the <bpt id=\"p1\">[</bpt>Twilio account page<ept id=\"p1\">] [twilio_account]</ept>, in the fields labeled <bpt id=\"p2\">**</bpt>ACCOUNT SID<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>AUTH TOKEN<ept id=\"p3\">**</ept>, respectively.",
      "pos": [
        4358,
        4530
      ]
    },
    {
      "pos": [
        4535,
        4583
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"create_app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Create a Java Application"
    },
    {
      "content": "Obtain the Twilio JAR and add it to your Java build path and your WAR deployment assembly.",
      "pos": [
        4587,
        4677
      ]
    },
    {
      "content": "At <bpt id=\"p1\">[</bpt>https://github.com/twilio/twilio-java<ept id=\"p1\">][twilio_java]</ept>, you can download the GitHub sources and create your own JAR, or download a pre-built JAR (with or without dependencies).",
      "pos": [
        4678,
        4855
      ]
    },
    {
      "content": "Ensure your JDK's <bpt id=\"p1\">**</bpt>cacerts<ept id=\"p1\">**</ept> keystore contains the Equifax Secure Certificate Authority certificate with MD5 fingerprint 67:CB:9D:C0:13:24:8A:82:9B:B2:17:1E:D1:1B:EC:D4 (the serial number is 35:DE:F4:CF and the SHA1 fingerprint is D2:32:09:AD:23:D3:14:23:21:74:E4:0D:7F:9D:62:13:97:86:63:3A).",
      "pos": [
        4859,
        5152
      ]
    },
    {
      "content": "This is the certificate authority (CA) certificate for the <bpt id=\"p1\">[</bpt>https://api.twilio.com<ept id=\"p1\">][twilio_api_service]</ept> service, which is called when you use Twilio APIs.",
      "pos": [
        5153,
        5307
      ]
    },
    {
      "content": "For information about ensuring your JDK's <bpt id=\"p1\">**</bpt>cacerts<ept id=\"p1\">**</ept> keystore contains the correct CA certificate, see <bpt id=\"p2\">[</bpt>Adding a Certificate to the Java CA Certificate Store<ept id=\"p2\">][add_ca_cert]</ept>.",
      "pos": [
        5308,
        5481
      ]
    },
    {
      "pos": [
        5483,
        5660
      ],
      "content": "Detailed instructions for using the Twilio client library for Java are available at <bpt id=\"p1\">[</bpt>How to Make a Phone Call Using Twilio in a Java Application on Azure<ept id=\"p1\">][howto_phonecall_java]</ept>."
    },
    {
      "pos": [
        5665,
        5741
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"configure_app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Configure Your Application to Use Twilio Libraries"
    },
    {
      "pos": [
        5742,
        5897
      ],
      "content": "Within your code, you can add <bpt id=\"p1\">**</bpt>import<ept id=\"p1\">**</ept> statements at the top of your source files for the Twilio packages or classes you want to use in your application."
    },
    {
      "content": "For Java source files:",
      "pos": [
        5900,
        5922
      ]
    },
    {
      "content": "For Java Server Page (JSP) source files:",
      "pos": [
        6072,
        6112
      ]
    },
    {
      "pos": [
        6265,
        6372
      ],
      "content": "Depending on which Twilio packages or classes you want to use, your <bpt id=\"p1\">**</bpt>import<ept id=\"p1\">**</ept> statements may be different."
    },
    {
      "pos": [
        6377,
        6434
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_make_call\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Make an outgoing call"
    },
    {
      "content": "The following shows how to make an outgoing call using the <bpt id=\"p1\">**</bpt>CallFactory<ept id=\"p1\">**</ept> class.",
      "pos": [
        6435,
        6516
      ]
    },
    {
      "content": "This code also uses a Twilio-provided site to return the Twilio Markup Language (TwiML) response.",
      "pos": [
        6517,
        6614
      ]
    },
    {
      "content": "Substitute your values for the <bpt id=\"p1\">**</bpt>From<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>To<ept id=\"p2\">**</ept> phone numbers, and ensure that you verify the <bpt id=\"p3\">**</bpt>From<ept id=\"p3\">**</ept> phone number for your Twilio account prior to running the code.",
      "pos": [
        6615,
        6784
      ]
    },
    {
      "pos": [
        7920,
        8091
      ],
      "content": "For more information about the parameters passed in to the <bpt id=\"p1\">**</bpt>CallFactory.create<ept id=\"p1\">**</ept> method, see <bpt id=\"p2\">[</bpt>http://www.twilio.com/docs/api/rest/making-calls<ept id=\"p2\">][twilio_rest_making_calls]</ept>."
    },
    {
      "content": "As mentioned, this code uses a Twilio-provided site to return the TwiML response.",
      "pos": [
        8093,
        8174
      ]
    },
    {
      "content": "You could instead use your own site to provide the TwiML response; for more information, see <bpt id=\"p1\">[</bpt>How to Provide TwiML Responses in a Java Application on Azure<ept id=\"p1\">](#howto_provide_twiml_responses)</ept>.",
      "pos": [
        8175,
        8364
      ]
    },
    {
      "pos": [
        8369,
        8423
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_send_sms\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Send an SMS message"
    },
    {
      "content": "The following shows how to send an SMS message using the <bpt id=\"p1\">**</bpt>SmsFactory<ept id=\"p1\">**</ept> class.",
      "pos": [
        8424,
        8502
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>From<ept id=\"p1\">**</ept> number, <bpt id=\"p2\">**</bpt>4155992671<ept id=\"p2\">**</ept>, is provided by Twilio for trial accounts to send SMS messages.",
      "pos": [
        8503,
        8602
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>To<ept id=\"p1\">**</ept> number must be verified for your Twilio account prior to running the code.",
      "pos": [
        8603,
        8688
      ]
    },
    {
      "pos": [
        9688,
        9856
      ],
      "content": "For more information about the parameters passed in to the <bpt id=\"p1\">**</bpt>SmsFactory.create<ept id=\"p1\">**</ept> method, see <bpt id=\"p2\">[</bpt>http://www.twilio.com/docs/api/rest/sending-sms<ept id=\"p2\">][twilio_rest_sending_sms]</ept>."
    },
    {
      "pos": [
        9861,
        9956
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_provide_twiml_responses\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Provide TwiML Responses from your own Website"
    },
    {
      "content": "When your application initiates a call to the Twilio API, for example via the <bpt id=\"p1\">**</bpt>CallFactory.create<ept id=\"p1\">**</ept> method, Twilio will send your request to a URL that is expected to return a TwiML response.",
      "pos": [
        9957,
        10149
      ]
    },
    {
      "content": "The example above uses the Twilio-provided URL <bpt id=\"p1\">[</bpt>http://twimlets.com/message<ept id=\"p1\">][twimlet_message_url]</ept>.",
      "pos": [
        10150,
        10248
      ]
    },
    {
      "content": "(While TwiML is designed for use by Web services, you can view the TwiML in your browser.",
      "pos": [
        10249,
        10338
      ]
    },
    {
      "content": "For example, click <bpt id=\"p1\">[</bpt>http://twimlets.com/message<ept id=\"p1\">][twimlet_message_url]</ept> to see an empty <bpt id=\"p2\">**</bpt>&amp;lt;Response&amp;gt;<ept id=\"p2\">**</ept> element; as another example, click <bpt id=\"p3\">[</bpt>http://twimlets.com/message?Message%5B0%5D=Hello%20World<ept id=\"p3\">][twimlet_message_url_hello_world]</ept> to see a <bpt id=\"p4\">**</bpt>&amp;lt;Response&amp;gt;<ept id=\"p4\">**</ept> element that contains a <bpt id=\"p5\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p5\">**</ept> element.)",
      "pos": [
        10339,
        10652
      ]
    },
    {
      "content": "Instead of relying on the Twilio-provided URL, you can create your own URL site that returns HTTP responses.",
      "pos": [
        10654,
        10762
      ]
    },
    {
      "content": "You can create the site in any language that returns HTTP responses; this topic assumes you'll be hosting the URL in a JSP page.",
      "pos": [
        10763,
        10891
      ]
    },
    {
      "pos": [
        10893,
        10982
      ],
      "content": "The following JSP page results in a TwiML response that says <bpt id=\"p1\">**</bpt>Hello World<ept id=\"p1\">**</ept> on the call."
    },
    {
      "content": "The following JSP page results in a TwiML response that says some text, has several pauses, and says information about the Twilio API version and the Azure role name.",
      "pos": [
        11087,
        11253
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>ApiVersion<ept id=\"p1\">**</ept> parameter is available in Twilio voice requests (not SMS requests).",
      "pos": [
        11605,
        11691
      ]
    },
    {
      "content": "To see the available request parameters for Twilio voice and SMS requests, see <bpt id=\"p1\">&lt;</bpt><ept id=\"p1\">https://www.twilio.com/docs/api/twiml/twilio_request&gt;</ept> and <bpt id=\"p2\">&lt;</bpt><ept id=\"p2\">https://www.twilio.com/docs/api/twiml/sms/twilio_request&gt;</ept>, respectively.",
      "pos": [
        11692,
        11903
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>RoleName<ept id=\"p1\">**</ept> environment variable is available as part of an Azure deployment.",
      "pos": [
        11904,
        11986
      ]
    },
    {
      "content": "(If you want to add custom environment variables so they could be picked up from <bpt id=\"p1\">**</bpt>System.getenv<ept id=\"p1\">**</ept>, see the environment variables section at <bpt id=\"p2\">[</bpt>Miscellaneous Role Configuration Settings<ept id=\"p2\">][misc_role_config_settings]</ept>.)",
      "pos": [
        11987,
        12200
      ]
    },
    {
      "content": "Once you have your JSP page set up to provide TwiML responses, use the URL of the JSP page as the URL passed into the <bpt id=\"p1\">**</bpt>CallFactory.create<ept id=\"p1\">**</ept> method.",
      "pos": [
        12202,
        12350
      ]
    },
    {
      "content": "For example, if you have a Web application named MyTwiML deployed to an Azure hosted service, and the name of the JSP page is mytwiml.jsp, the URL can be passed to <bpt id=\"p1\">**</bpt>CallFactory.create<ept id=\"p1\">**</ept> as shown in the following:",
      "pos": [
        12351,
        12564
      ]
    },
    {
      "pos": [
        12962,
        13098
      ],
      "content": "Another option for responding with TwiML is via the <bpt id=\"p1\">**</bpt>TwiMLResponse<ept id=\"p1\">**</ept> class, which is available in the <bpt id=\"p2\">**</bpt>com.twilio.sdk.verbs<ept id=\"p2\">**</ept> package."
    },
    {
      "pos": [
        13100,
        13263
      ],
      "content": "For additional information about using Twilio in Azure with Java, see <bpt id=\"p1\">[</bpt>How to Make a Phone Call Using Twilio in a Java Application on Azure<ept id=\"p1\">][howto_phonecall_java]</ept>."
    },
    {
      "pos": [
        13268,
        13337
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"AdditionalServices\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Use Additional Twilio Services"
    },
    {
      "content": "In addition to the examples shown here, Twilio offers web-based APIs that you can use to leverage additional Twilio functionality from your Azure application.",
      "pos": [
        13338,
        13496
      ]
    },
    {
      "content": "For full details, see the <bpt id=\"p1\">[</bpt>Twilio API documentation<ept id=\"p1\">] [twilio_api_documentation]</ept>.",
      "pos": [
        13497,
        13577
      ]
    },
    {
      "pos": [
        13582,
        13614
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"NextSteps\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Next Steps"
    },
    {
      "content": "Now that you've learned the basics of the Twilio service, follow these links to learn more:",
      "pos": [
        13615,
        13706
      ]
    },
    {
      "content": "Twilio Security Guidelines",
      "pos": [
        13711,
        13737
      ]
    },
    {
      "content": "Twilio HowTo's and Example Code",
      "pos": [
        13771,
        13802
      ]
    },
    {
      "content": "Twilio Quickstart Tutorials",
      "pos": [
        13823,
        13850
      ]
    },
    {
      "content": "Twilio on GitHub",
      "pos": [
        13876,
        13892
      ]
    },
    {
      "content": "Talk to Twilio Support",
      "pos": [
        13916,
        13938
      ]
    },
    {
      "content": "test",
      "pos": [
        15302,
        15306
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"How to Use Twilio for Voice and SMS (Java) | Microsoft Azure\" \n    description=\"Learn how to make a phone call and send a SMS message with the Twilio API service on Azure. Code samples written in Java.\" \n    services=\"\" \n    documentationCenter=\"java\" \n    authors=\"devinrader\" \n    manager=\"twilio\" \n    editor=\"mollybos\"/>\n\n<tags \n    ms.service=\"multiple\" \n    ms.workload=\"na\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"Java\" \n    ms.topic=\"article\" \n    ms.date=\"11/25/2014\" \n    ms.author=\"microsofthelp@twilio.com\"/>\n\n# How to Use Twilio for Voice and SMS Capabilities in Java\n\nThis guide demonstrates how to perform common programming tasks with the Twilio API service on Azure. The scenarios covered include making a phone call and sending a Short Message Service (SMS) message. For more information on Twilio and using voice and SMS in your applications, see the [Next Steps](#NextSteps) section.\n\n## <a id=\"WhatIs\"></a>What is Twilio?\nTwilio is a telephony web-service API that lets you use your existing web languages and skills to build voice and SMS applications. Twilio is a third-party service (not an Azure feature and not a Microsoft product).\n\n**Twilio Voice** allows your applications to make and receive phone calls. **Twilio SMS** allows your applications to make and receive SMS messages. **Twilio Client** allows your applications to enable voice communication using existing Internet connections, including mobile connections.\n\n## <a id=\"Pricing\"></a>Twilio Pricing and Special Offers\nInformation about Twilio pricing is available at [Twilio Pricing] [twilio_pricing]. Azure customers receive a [special offer][special_offer]: a free credit of 1000 texts or 1000 inbound minutes. To sign up for this offer or get more information, please visit [http://ahoy.twilio.com/azure][special_offer].  \n\n## <a id=\"Concepts\"></a>Concepts\nThe Twilio API is a RESTful API that provides voice and SMS functionality for applications. Client libraries are available in multiple languages; for a list, see [Twilio API Libraries] [twilio_libraries].\n\nKey aspects of the Twilio API are Twilio verbs and Twilio Markup Language (TwiML).\n\n### <a id=\"Verbs\"></a>Twilio Verbs\nThe API makes use of Twilio verbs; for example, the **&lt;Say&gt;** verb instructs Twilio to audibly deliver a message on a call. \n\nThe following is a list of Twilio verbs.\n\n* **&lt;Dial&gt;**: Connects the caller to another phone.\n* **&lt;Gather&gt;**: Collects numeric digits entered on the telephone keypad.\n* **&lt;Hangup&gt;**: Ends a call.\n* **&lt;Play&gt;**: Plays an audio file.\n* **&lt;Pause&gt;**: Waits silently for a specified number of seconds.\n* **&lt;Record&gt;**: Records the caller's voice and returns a URL of a file that contains the recording.\n* **&lt;Redirect&gt;**: Transfers control of a call or SMS to the TwiML at a different URL.\n* **&lt;Reject&gt;**: Rejects an incoming call to your Twilio number without billing you\n* **&lt;Say&gt;**: Converts text to speech that is made on a call.\n* **&lt;Sms&gt;**: Sends an SMS message.\n\n### <a id=\"TwiML\"></a>TwiML\nTwiML is a set of XML-based instructions based on the Twilio verbs that inform Twilio of how to process a call or SMS.\n\nAs an example, the following TwiML would convert the text **Hello World** to speech.\n\n    <?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n    <Response>\n       <Say>Hello World</Say>\n    </Response>\n\nWhen your application calls the Twilio API, one of the API parameters is the URL that returns the TwiML response. For development purposes, you can use Twilio-provided URLs to provide the TwiML responses used by your applications. You could also host your own URLs to produce the TwiML responses, and another option is to use the **TwiMLResponse** object.\n\nFor more information about Twilio verbs, their attributes, and TwiML, see [TwiML] [twiml]. For additional information about the Twilio API, see [Twilio API] [twilio_api].\n\n## <a id=\"CreateAccount\"></a>Create a Twilio Account\nWhen you're ready to get a Twilio account, sign up at [Try Twilio] [try_twilio]. You can start with a free account, and upgrade your account later.\n\nWhen you sign up for a Twilio account, you'll receive an account ID and an authentication token. Both will be needed to make Twilio API calls. To prevent unauthorized access to your account, keep your authentication token secure. Your account ID and authentication token are viewable at the [Twilio account page] [twilio_account], in the fields labeled **ACCOUNT SID** and **AUTH TOKEN**, respectively.\n\n## <a id=\"create_app\"></a>Create a Java Application\n1. Obtain the Twilio JAR and add it to your Java build path and your WAR deployment assembly. At [https://github.com/twilio/twilio-java][twilio_java], you can download the GitHub sources and create your own JAR, or download a pre-built JAR (with or without dependencies).\n2. Ensure your JDK's **cacerts** keystore contains the Equifax Secure Certificate Authority certificate with MD5 fingerprint 67:CB:9D:C0:13:24:8A:82:9B:B2:17:1E:D1:1B:EC:D4 (the serial number is 35:DE:F4:CF and the SHA1 fingerprint is D2:32:09:AD:23:D3:14:23:21:74:E4:0D:7F:9D:62:13:97:86:63:3A). This is the certificate authority (CA) certificate for the [https://api.twilio.com][twilio_api_service] service, which is called when you use Twilio APIs. For information about ensuring your JDK's **cacerts** keystore contains the correct CA certificate, see [Adding a Certificate to the Java CA Certificate Store][add_ca_cert].\n\nDetailed instructions for using the Twilio client library for Java are available at [How to Make a Phone Call Using Twilio in a Java Application on Azure][howto_phonecall_java].\n\n## <a id=\"configure_app\"></a>Configure Your Application to Use Twilio Libraries\nWithin your code, you can add **import** statements at the top of your source files for the Twilio packages or classes you want to use in your application. \n\nFor Java source files:\n\n    import com.twilio.*;\n    import com.twilio.sdk.*;\n    import com.twilio.sdk.resource.factory.*;\n    import com.twilio.sdk.resource.instance.*;\n\nFor Java Server Page (JSP) source files:\n\n    import=\"com.twilio.*\"\n    import=\"com.twilio.sdk.*\"\n    import=\"com.twilio.sdk.resource.factory.*\"\n    import=\"com.twilio.sdk.resource.instance.*\"\nDepending on which Twilio packages or classes you want to use, your **import** statements may be different.\n\n## <a id=\"howto_make_call\"></a>How to: Make an outgoing call\nThe following shows how to make an outgoing call using the **CallFactory** class. This code also uses a Twilio-provided site to return the Twilio Markup Language (TwiML) response. Substitute your values for the **From** and **To** phone numbers, and ensure that you verify the **From** phone number for your Twilio account prior to running the code.\n\n    // Use your account SID and authentication token instead\n    // of the placeholders shown here.\n    String accountSID = \"your_twilio_account\";\n    String authToken = \"your_twilio_authentication_token\";\n\n    // Create an instance of the Twilio client.\n    TwilioRestClient client;\n    client = new TwilioRestClient(accountSID, authToken);\n\n    // Retrieve the account, used later to create an instance of the CallFactory.\n    Account account = client.getAccount();\n\n    // Use the Twilio-provided site for the TwiML response.\n    String Url=\"http://twimlets.com/message\";\n    Url = Url + \"?Message%5B0%5D=Hello%20World\";\n\n    // Place the call From, To and URL values into a hash map. \n    HashMap<String, String> params = new HashMap<String, String>();\n    params.put(\"From\", \"NNNNNNNNNN\"); // Use your own value for the second parameter.\n    params.put(\"To\", \"NNNNNNNNNN\");   // Use your own value for the second parameter.\n    params.put(\"Url\", Url);\n\n    // Create an instance of the CallFactory class.\n    CallFactory callFactory = account.getCallFactory();\n\n    // Make the call.\n    Call call = callFactory.create(params);\n\nFor more information about the parameters passed in to the **CallFactory.create** method, see [http://www.twilio.com/docs/api/rest/making-calls][twilio_rest_making_calls].\n\nAs mentioned, this code uses a Twilio-provided site to return the TwiML response. You could instead use your own site to provide the TwiML response; for more information, see [How to Provide TwiML Responses in a Java Application on Azure](#howto_provide_twiml_responses).\n\n## <a id=\"howto_send_sms\"></a>How to: Send an SMS message\nThe following shows how to send an SMS message using the **SmsFactory** class. The **From** number, **4155992671**, is provided by Twilio for trial accounts to send SMS messages. The **To** number must be verified for your Twilio account prior to running the code.\n\n    // Use your account SID and authentication token instead\n    // of the placeholders shown here.\n    String accountSID = \"your_twilio_account\";\n    String authToken = \"your_twilio_authentication_token\";\n\n    // Create an instance of the Twilio client.\n    TwilioRestClient client;\n    client = new TwilioRestClient(accountSID, authToken);\n\n    // Retrieve the account, used later to create an instance of the SmsFactory.\n    Account account = client.getAccount();\n\n    // Send an SMS message.\n    MessageFactory messageFactory = account.getMessageFactory();\n    \n    List<NameValuePair> params = new ArrayList<NameValuePair>();\n    params.add(new BasicNameValuePair(\"To\", \"+14159352345\")); // Replace with a valid phone number for your account.\n    params.add(new BasicNameValuePair(\"From\", \"+14158141829\")); // Replace with a valid phone number for your account.\n    params.add(new BasicNameValuePair(\"Body\", \"Where's Wallace?\"));\n    \n    Message sms = messageFactory.create(params);\n        \nFor more information about the parameters passed in to the **SmsFactory.create** method, see [http://www.twilio.com/docs/api/rest/sending-sms][twilio_rest_sending_sms].\n\n## <a id=\"howto_provide_twiml_responses\"></a>How to: Provide TwiML Responses from your own Website\nWhen your application initiates a call to the Twilio API, for example via the **CallFactory.create** method, Twilio will send your request to a URL that is expected to return a TwiML response. The example above uses the Twilio-provided URL [http://twimlets.com/message][twimlet_message_url]. (While TwiML is designed for use by Web services, you can view the TwiML in your browser. For example, click [http://twimlets.com/message][twimlet_message_url] to see an empty **&lt;Response&gt;** element; as another example, click [http://twimlets.com/message?Message%5B0%5D=Hello%20World][twimlet_message_url_hello_world] to see a **&lt;Response&gt;** element that contains a **&lt;Say&gt;** element.)\n\nInstead of relying on the Twilio-provided URL, you can create your own URL site that returns HTTP responses. You can create the site in any language that returns HTTP responses; this topic assumes you'll be hosting the URL in a JSP page.\n\nThe following JSP page results in a TwiML response that says **Hello World** on the call.\n\n    <%@ page contentType=\"text/xml\" %>\n    <Response> \n        <Say>Hello World</Say>\n    </Response>\n\nThe following JSP page results in a TwiML response that says some text, has several pauses, and says information about the Twilio API version and the Azure role name.\n\n\n    <%@ page contentType=\"text/xml\" %>\n    <Response> \n        <Say>Hello from Azure</Say>\n        <Pause></Pause>\n        <Say>The Twilio API version is <%= request.getParameter(\"ApiVersion\") %>.</Say>\n        <Say>The Azure role name is <%= System.getenv(\"RoleName\") %>.</Say>\n        <Pause></Pause>\n        <Say>Good bye.</Say>\n    </Response>\n\nThe **ApiVersion** parameter is available in Twilio voice requests (not SMS requests). To see the available request parameters for Twilio voice and SMS requests, see <https://www.twilio.com/docs/api/twiml/twilio_request> and <https://www.twilio.com/docs/api/twiml/sms/twilio_request>, respectively. The **RoleName** environment variable is available as part of an Azure deployment. (If you want to add custom environment variables so they could be picked up from **System.getenv**, see the environment variables section at [Miscellaneous Role Configuration Settings][misc_role_config_settings].)\n\nOnce you have your JSP page set up to provide TwiML responses, use the URL of the JSP page as the URL passed into the **CallFactory.create** method. For example, if you have a Web application named MyTwiML deployed to an Azure hosted service, and the name of the JSP page is mytwiml.jsp, the URL can be passed to **CallFactory.create** as shown in the following:\n\n    // Place the call From, To and URL values into a hash map. \n    HashMap<String, String> params = new HashMap<String, String>();\n    params.put(\"From\", \"NNNNNNNNNN\");\n    params.put(\"To\", \"NNNNNNNNNN\");\n    params.put(\"Url\", \"http://<your_hosted_service>.cloudapp.net/MyTwiML/mytwiml.jsp\");\n\n    CallFactory callFactory = account.getCallFactory();\n    Call call = callFactory.create(params);\n\nAnother option for responding with TwiML is via the **TwiMLResponse** class, which is available in the **com.twilio.sdk.verbs** package.\n\nFor additional information about using Twilio in Azure with Java, see [How to Make a Phone Call Using Twilio in a Java Application on Azure][howto_phonecall_java].\n\n## <a id=\"AdditionalServices\"></a>How to: Use Additional Twilio Services\nIn addition to the examples shown here, Twilio offers web-based APIs that you can use to leverage additional Twilio functionality from your Azure application. For full details, see the [Twilio API documentation] [twilio_api_documentation].\n\n## <a id=\"NextSteps\"></a>Next Steps\nNow that you've learned the basics of the Twilio service, follow these links to learn more:\n\n* [Twilio Security Guidelines] [twilio_security_guidelines]\n* [Twilio HowTo's and Example Code] [twilio_howtos]\n* [Twilio Quickstart Tutorials][twilio_quickstarts] \n* [Twilio on GitHub] [twilio_on_github]\n* [Talk to Twilio Support] [twilio_support]\n\n[twilio_java]: https://github.com/twilio/twilio-java\n[twilio_api_service]: https://api.twilio.com\n[add_ca_cert]: java-add-certificate-ca-store.md\n[howto_phonecall_java]: partner-twilio-java-phone-call-example.md\n[misc_role_config_settings]: http://msdn.microsoft.com/library/windowsazure/hh690945.aspx\n[twimlet_message_url]: http://twimlets.com/message\n[twimlet_message_url_hello_world]: http://twimlets.com/message?Message%5B0%5D=Hello%20World\n[twilio_rest_making_calls]: http://www.twilio.com/docs/api/rest/making-calls\n[twilio_rest_sending_sms]: http://www.twilio.com/docs/api/rest/sending-sms\n[twilio_pricing]: http://www.twilio.com/pricing\n[special_offer]: http://ahoy.twilio.com/azure\n[twilio_libraries]: https://www.twilio.com/docs/libraries\n[twiml]: http://www.twilio.com/docs/api/twiml\n[twilio_api]: http://www.twilio.com/api\n[try_twilio]: https://www.twilio.com/try-twilio\n[twilio_account]:  https://www.twilio.com/user/account\n[verify_phone]: https://www.twilio.com/user/account/phone-numbers/verified#\n[twilio_api_documentation]: http://www.twilio.com/api\n[twilio_security_guidelines]: http://www.twilio.com/docs/security\n[twilio_howtos]: http://www.twilio.com/docs/howto\n[twilio_on_github]: https://github.com/twilio\n[twilio_support]: http://www.twilio.com/help/contact\n[twilio_quickstarts]: http://www.twilio.com/docs/quickstart\n\ntest\n"
}