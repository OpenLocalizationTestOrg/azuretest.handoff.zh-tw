{
  "nodes": [
    {
      "content": "Equivalent Azure CLI commands for VM tasks | Microsoft Azure",
      "pos": [
        27,
        87
      ]
    },
    {
      "content": "Equivalent Azure CLI commands to create and manage Azure VMs in Azure Resource Manager and Azure Service Management modes",
      "pos": [
        106,
        227
      ]
    },
    {
      "content": "Equivalent Resource Manager and Service Management commands for VM tasks with the Azure CLI for Mac, Linux, and Windows",
      "pos": [
        627,
        746
      ]
    },
    {
      "content": "This article shows equivalent Microsoft Azure command-line interface (Azure CLI) commands to create and manage Azure VMs in Azure Service Management and Azure Resource Manager.",
      "pos": [
        747,
        923
      ]
    },
    {
      "content": "Use this as a handy guide to migrate scripts from one command mode to the other.",
      "pos": [
        924,
        1004
      ]
    },
    {
      "content": "If you haven't already installed the Azure CLI and connected to your subscription, see <bpt id=\"p1\">[</bpt>Install the Azure CLI<ept id=\"p1\">](../xplat-cli-install.md)</ept> and <bpt id=\"p2\">[</bpt>Connect to an Azure subscription from the Azure CLI<ept id=\"p2\">](../xplat-cli-connect.md)</ept>.",
      "pos": [
        1008,
        1227
      ]
    },
    {
      "content": "When you want to use the Resource Manager mode commands, be sure to connect with the login method.",
      "pos": [
        1228,
        1326
      ]
    },
    {
      "content": "To get started with the Resource Manager mode in the Azure CLI and switch command modes, see <bpt id=\"p1\">[</bpt>Using the Azure Command-Line Interface with the Resource Manager<ept id=\"p1\">](xplat-cli-azure-resource-manager.md)</ept>.",
      "pos": [
        1330,
        1527
      ]
    },
    {
      "content": "By default the CLI starts in Service Management mode.",
      "pos": [
        1528,
        1581
      ]
    },
    {
      "content": "To change to Resource Manager mode, run <ph id=\"ph1\">`azure config mode arm`</ph>.",
      "pos": [
        1582,
        1646
      ]
    },
    {
      "content": "To go back to Service Management mode, run <ph id=\"ph1\">`azure config mode asm`</ph>.",
      "pos": [
        1647,
        1714
      ]
    },
    {
      "pos": [
        1718,
        1837
      ],
      "content": "For online command help and options, type <ph id=\"ph1\">`azure &lt;command&gt; &lt;subcommand&gt; --help`</ph> or <ph id=\"ph2\">`azure help &lt;command&gt; &lt;subcommand&gt;`</ph>."
    },
    {
      "content": "VM tasks",
      "pos": [
        1842,
        1850
      ]
    },
    {
      "content": "The next table compares common VM tasks you can perform with Azure CLI commands in Service Management and Resource Manager.",
      "pos": [
        1851,
        1974
      ]
    },
    {
      "content": "With many Resource Manager commands you need to pass the name of an existing resource group.",
      "pos": [
        1975,
        2067
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> These examples don't include template-based operations in Resource Manager.",
      "pos": [
        2071,
        2159
      ]
    },
    {
      "content": "For information, see <bpt id=\"p1\">[</bpt>Using the Azure Command-Line Interface with the Resource Manager<ept id=\"p1\">](xplat-cli-azure-resource-manager.md)</ept>.",
      "pos": [
        2160,
        2285
      ]
    },
    {
      "content": "Task",
      "pos": [
        2287,
        2291
      ]
    },
    {
      "content": "Service Management",
      "pos": [
        2294,
        2312
      ]
    },
    {
      "content": "Resource Manager",
      "pos": [
        2315,
        2331
      ]
    },
    {
      "content": "Create the most basic VM",
      "pos": [
        2389,
        2413
      ]
    },
    {
      "content": "(Obtain the <ph id=\"ph1\">`image-urn`</ph> from the <ph id=\"ph2\">`azure vm image list`</ph> command.)",
      "pos": [
        2621,
        2685
      ]
    },
    {
      "content": "Create a Linux VM",
      "pos": [
        2686,
        2703
      ]
    },
    {
      "content": "Create a Windows VM",
      "pos": [
        2852,
        2871
      ]
    },
    {
      "content": "List VMs",
      "pos": [
        3022,
        3030
      ]
    },
    {
      "content": "Get information about a VM",
      "pos": [
        3106,
        3132
      ]
    },
    {
      "content": "Start a VM",
      "pos": [
        3225,
        3235
      ]
    },
    {
      "content": "Stop a VM",
      "pos": [
        3325,
        3334
      ]
    },
    {
      "content": "Deallocate a VM",
      "pos": [
        3426,
        3441
      ]
    },
    {
      "content": "Not available",
      "pos": [
        3444,
        3457
      ]
    },
    {
      "content": "Restart a VM",
      "pos": [
        3516,
        3528
      ]
    },
    {
      "content": "Delete a VM",
      "pos": [
        3623,
        3634
      ]
    },
    {
      "content": "Capture a VM",
      "pos": [
        3726,
        3738
      ]
    },
    {
      "content": "Create a VM from a user image",
      "pos": [
        3832,
        3861
      ]
    },
    {
      "content": "Create a VM from a specialized disk",
      "pos": [
        4026,
        4061
      ]
    },
    {
      "content": "Add a data disk to a VM",
      "pos": [
        4239,
        4262
      ]
    },
    {
      "content": "<ph id=\"ph1\">`azure  vm disk attach [options] &lt;vm-name&gt; &lt;disk-image-name&gt;`</ph> -OR-",
      "pos": [
        4265,
        4331
      ]
    },
    {
      "content": "<ph id=\"ph1\">`vm disk attach-new [options] &lt;vm-name&gt; &lt;size-in-gb&gt; [blob-url]`</ph>",
      "pos": [
        4339,
        4403
      ]
    },
    {
      "content": "Remove a data disk from a VM",
      "pos": [
        4495,
        4523
      ]
    },
    {
      "content": "Add a generic extension to a VM",
      "pos": [
        4645,
        4676
      ]
    },
    {
      "content": "Add VM Access extension to a VM",
      "pos": [
        4868,
        4899
      ]
    },
    {
      "content": "Not available",
      "pos": [
        4902,
        4915
      ]
    },
    {
      "content": "Add Docker extension to a VM",
      "pos": [
        4976,
        5004
      ]
    },
    {
      "content": "Add Chef extension to a VM",
      "pos": [
        5168,
        5194
      ]
    },
    {
      "content": "Not available",
      "pos": [
        5250,
        5263
      ]
    },
    {
      "content": "Disable a VM extension",
      "pos": [
        5264,
        5286
      ]
    },
    {
      "content": "Not available",
      "pos": [
        5384,
        5397
      ]
    },
    {
      "content": "Remove a VM extension",
      "pos": [
        5398,
        5419
      ]
    },
    {
      "content": "List VM extensions",
      "pos": [
        5617,
        5635
      ]
    },
    {
      "content": "List VM images",
      "pos": [
        5739,
        5753
      ]
    },
    {
      "content": "<ph id=\"ph1\">`azure vm image list [options] &lt;location&gt; &lt;publisher&gt; [offer] [sku]`</ph> -OR-",
      "pos": [
        5790,
        5863
      ]
    },
    {
      "content": "<ph id=\"ph1\">`azure vm image list-publishers [options] &lt;location&gt;`</ph> -OR-",
      "pos": [
        5870,
        5928
      ]
    },
    {
      "content": "<ph id=\"ph1\">`azure vm image list-offers [options] &lt;location&gt;`</ph> -OR-",
      "pos": [
        5935,
        5989
      ]
    },
    {
      "content": "<ph id=\"ph1\">`azure vm image list-skus [options] &lt;location&gt;`</ph>",
      "pos": [
        5996,
        6043
      ]
    },
    {
      "content": "Show a VM image",
      "pos": [
        6044,
        6059
      ]
    },
    {
      "content": "Not available",
      "pos": [
        6096,
        6109
      ]
    },
    {
      "content": "Get usage of VM resources",
      "pos": [
        6110,
        6135
      ]
    },
    {
      "content": "Not available",
      "pos": [
        6138,
        6151
      ]
    },
    {
      "content": "Get all available VM sizes",
      "pos": [
        6197,
        6223
      ]
    },
    {
      "content": "Not available",
      "pos": [
        6226,
        6239
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        6274,
        6284
      ]
    },
    {
      "pos": [
        6288,
        6594
      ],
      "content": "For more about using the Azure CLI to work with Resource Manager resources, see <bpt id=\"p1\">[</bpt>Using the Azure Command-Line Interface with the Resource Manager<ept id=\"p1\">](xplat-cli-azure-resource-manager.md)</ept> and <bpt id=\"p2\">[</bpt>Managing Role-Based Access Control with the Azure Command-Line Interface<ept id=\"p2\">](../role-based-access-control-xplat-cli.md)</ept>."
    },
    {
      "content": "For additional examples of the CLI commands, see <bpt id=\"p1\">[</bpt>Using the Azure Command-Line Interface with Azure Service Management<ept id=\"p1\">](../virtual-machines-command-line-tools.md)</ept> and",
      "pos": [
        6597,
        6763
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Using the Azure CLI with Azure Resource Manager<ept id=\"p1\">](azure-cli-arm-commands.md)</ept>.",
      "pos": [
        6764,
        6841
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Equivalent Azure CLI commands for VM tasks | Microsoft Azure\"\n    description=\"Equivalent Azure CLI commands to create and manage Azure VMs in Azure Resource Manager and Azure Service Management modes\"\n    services=\"virtual-machines\"\n    documentationCenter=\"\"\n    authors=\"dlepow\"\n    manager=\"timlt\"\n    editor=\"\"\n    tags=\"azure-resource-manager,azure-service-management\"/>\n\n<tags\n    ms.service=\"virtual-machines\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.tgt_pltfrm=\"command-line-interface\"\n    ms.workload=\"infrastructure-services\"\n    ms.date=\"08/28/2015\"\n    ms.author=\"danlep\"/>\n\n\n# Equivalent Resource Manager and Service Management commands for VM tasks with the Azure CLI for Mac, Linux, and Windows\nThis article shows equivalent Microsoft Azure command-line interface (Azure CLI) commands to create and manage Azure VMs in Azure Service Management and Azure Resource Manager. Use this as a handy guide to migrate scripts from one command mode to the other.\n\n* If you haven't already installed the Azure CLI and connected to your subscription, see [Install the Azure CLI](../xplat-cli-install.md) and [Connect to an Azure subscription from the Azure CLI](../xplat-cli-connect.md). When you want to use the Resource Manager mode commands, be sure to connect with the login method.\n\n* To get started with the Resource Manager mode in the Azure CLI and switch command modes, see [Using the Azure Command-Line Interface with the Resource Manager](xplat-cli-azure-resource-manager.md). By default the CLI starts in Service Management mode. To change to Resource Manager mode, run `azure config mode arm`. To go back to Service Management mode, run `azure config mode asm`.\n\n* For online command help and options, type `azure <command> <subcommand> --help` or `azure help <command> <subcommand>`.\n\n## VM tasks\nThe next table compares common VM tasks you can perform with Azure CLI commands in Service Management and Resource Manager. With many Resource Manager commands you need to pass the name of an existing resource group.\n\n> [AZURE.NOTE] These examples don't include template-based operations in Resource Manager. For information, see [Using the Azure Command-Line Interface with the Resource Manager](xplat-cli-azure-resource-manager.md).\n\nTask | Service Management | Resource Manager\n-------------- | ----------- | -------------------------\nCreate the most basic VM | `azure vm create [options] <dns-name> <image> [userName] [password]` | `azure vm quick-create [options] <resource-group> <name> <location> <os-type> <image-urn> <admin-username> <admin-password>`<br/><br/>(Obtain the `image-urn` from the `azure vm image list` command.)\nCreate a Linux VM | `azure vm create [options] <dns-name> <image> [userName] [password]` | `azure  vm create [options] <resource-group> <name> <location> -y \"Linux\"`\nCreate a Windows VM | `azure vm create [options] <dns-name> <image> [userName] [password]` | `azure  vm create [options] <resource-group> <name> <location> -y \"Windows\"`\nList VMs | `azure  vm list [options]` | `azure  vm list [options] <resource_group>`\nGet information about a VM | `azure  vm show [options] <vm_name>` | `azure  vm show [options] <resource_group> <name>`\nStart a VM | `azure vm start [options] <name>` | `azure vm start [options] <resource_group> <name>`\nStop a VM | `azure vm shutdown [options] <name>` | `azure vm stop [options] <resource_group> <name>`\nDeallocate a VM | Not available | `azure vm deallocate [options] <resource-group> <name>`\nRestart a VM | `azure vm restart [options] <vname>` | `azure vm restart [options] <resource_group> <name>`\nDelete a VM | `azure vm delete [options] <name>` | `azure vm delete [options] <resource_group> <name>`\nCapture a VM | `azure vm capture [options] <name>` | `azure vm capture [options] <resource_group> <name>`\nCreate a VM from a user image | `azure  vm create [options] <dns-name> <image> [userName] [password]` | `azure  vm create [options] –q <image-name> <resource-group> <name> <location> <os-type>`\nCreate a VM from a specialized disk | `azure  vm create [options]-d <custom-data-file> <dns-name> [userName] [password]` | `azue  vm create [options] –d <os-disk-vhd> <resource-group> <name> <location> <os-type>`\nAdd a data disk to a VM | `azure  vm disk attach [options] <vm-name> <disk-image-name>` -OR- <br/>  `vm disk attach-new [options] <vm-name> <size-in-gb> [blob-url]` | `azure  vm disk attach-new [options] <resource-group> <vm-name> <size-in-gb> [vhd-name]`\nRemove a data disk from a VM | `azure  vm disk detach [options] <vm-name> <lun>` | `azure  vm disk detach [options] <resource-group> <vm-name> <lun>`\nAdd a generic extension to a VM | `azure  vm extension set [options] <vm-name> <extension-name> <publisher-name> <version>` | `azure  vm extension set [options] <resource-group> <vm-name> <name> <publisher-name> <version>`\nAdd VM Access extension to a VM | Not available | `azure vm reset-access [options] <resource-group> <name>`\nAdd Docker extension to a VM | `azure  vm docker create [options] <dns-name> <image> <user-name> [password]` | `azure  vm docker create [options] <resource-group> <name> <location> <os-type>`\nAdd Chef extension to a VM | `azure  vm extension get-chef [options] <vm-name>` | Not available\nDisable a VM extension | `azure  vm extension set [options] –b <vm-name> <extension-name> <publisher-name> <version>` | Not available\nRemove a VM extension | `azure  vm extension set [options] –u <vm-name> <extension-name> <publisher-name> <version>` | `azure  vm extension set [options] –u <resource-group> <vm-name> <name> <publisher-name> <version>`\nList VM extensions | `azure vm extension list [options]` | `azure  vm extension get [options] <resource-group> <vm-name>`\nList VM images | `azure vm image list [options]` | `azure vm image list [options] <location> <publisher> [offer] [sku]` -OR- <br/> `azure vm image list-publishers [options] <location>` -OR- <br/> `azure vm image list-offers [options] <location>` -OR- <br/> `azure vm image list-skus [options] <location>`\nShow a VM image | `azure vm image show [options]` | Not available\nGet usage of VM resources | Not available | `azure vm list-usage [options] <location>`\nGet all available VM sizes | Not available | `azure vm sizes [options]`\n\n\n## Next steps\n\n* For more about using the Azure CLI to work with Resource Manager resources, see [Using the Azure Command-Line Interface with the Resource Manager](xplat-cli-azure-resource-manager.md) and [Managing Role-Based Access Control with the Azure Command-Line Interface](../role-based-access-control-xplat-cli.md).\n* For additional examples of the CLI commands, see [Using the Azure Command-Line Interface with Azure Service Management](../virtual-machines-command-line-tools.md) and\n[Using the Azure CLI with Azure Resource Manager](azure-cli-arm-commands.md).\n"
}