{
  "nodes": [
    {
      "content": "Manage your virtual machines by using Azure PowerShell | Microsoft Azure",
      "pos": [
        26,
        98
      ]
    },
    {
      "content": "Learn commands that you can use to automate tasks in managing your virtual machines.",
      "pos": [
        116,
        200
      ]
    },
    {
      "content": "Manage your virtual machines by using Azure PowerShell",
      "pos": [
        563,
        617
      ]
    },
    {
      "content": "Many tasks you do each day to manage your VMs can be automated by using Azure PowerShell cmdlets.",
      "pos": [
        619,
        716
      ]
    },
    {
      "content": "This article gives you example commands for simpler tasks, and links to articles that show the commands for more complex tasks.",
      "pos": [
        717,
        844
      ]
    },
    {
      "pos": [
        847,
        1046
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you haven't installed and configured Azure PowerShell yet, you can get instructions in the article <bpt id=\"p1\">[</bpt>How to install and configure Azure PowerShell<ept id=\"p1\">](../install-configure-powershell.md)</ept>."
    },
    {
      "content": "How to use the example commands",
      "pos": [
        1051,
        1082
      ]
    },
    {
      "content": "You'll need to replace some of the text in the commands with text that's appropriate for your environment.",
      "pos": [
        1083,
        1189
      ]
    },
    {
      "content": "The &lt; and &gt; symbols indicate text you need to replace.",
      "pos": [
        1190,
        1244
      ]
    },
    {
      "content": "When you replace the text, remove the symbols but leave the quote marks in place.",
      "pos": [
        1245,
        1326
      ]
    },
    {
      "content": "Get a VM",
      "pos": [
        1331,
        1339
      ]
    },
    {
      "content": "This is a basic task you'll use often.",
      "pos": [
        1340,
        1378
      ]
    },
    {
      "content": "Use it to get information about a VM, perform tasks on a VM, or get output to store in a variable.",
      "pos": [
        1379,
        1477
      ]
    },
    {
      "content": "To get information about the VM, run this command, replacing everything in the quotes, including the &lt; and &gt; characters:",
      "pos": [
        1479,
        1599
      ]
    },
    {
      "content": "To store the output in a $vm variable, run:",
      "pos": [
        1686,
        1729
      ]
    },
    {
      "content": "Log on to a Windows-based VM",
      "pos": [
        1824,
        1852
      ]
    },
    {
      "content": "Run these commands:",
      "pos": [
        1854,
        1873
      ]
    },
    {
      "pos": [
        1876,
        1992
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> You can get the virtual machine and cloud service name from the display of the <bpt id=\"p1\">**</bpt>Get-AzureVM<ept id=\"p1\">**</ept> command."
    },
    {
      "content": "Stop a VM",
      "pos": [
        2317,
        2326
      ]
    },
    {
      "content": "Run this command:",
      "pos": [
        2328,
        2345
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> Use this parameter to keep the virtual IP (VIP) of the cloud service in case it's the last VM in that cloud service.",
      "pos": [
        2433,
        2567
      ]
    },
    {
      "content": "If you use the StayProvisioned parameter, you'll still be billed for the VM.",
      "pos": [
        2577,
        2653
      ]
    },
    {
      "content": "Start a VM",
      "pos": [
        2658,
        2668
      ]
    },
    {
      "content": "Run this command:",
      "pos": [
        2670,
        2687
      ]
    },
    {
      "content": "Attach a data disk",
      "pos": [
        2778,
        2796
      ]
    },
    {
      "content": "This task requires a few steps.",
      "pos": [
        2797,
        2828
      ]
    },
    {
      "content": "First, you use the ****Add-AzureDataDisk**** cmdlet to add the disk to the $vm object.",
      "pos": [
        2829,
        2915
      ]
    },
    {
      "content": "Then, you use <bpt id=\"p1\">**</bpt>Update-AzureVM<ept id=\"p1\">**</ept> cmdlet to update the configuration of the VM.",
      "pos": [
        2916,
        2994
      ]
    },
    {
      "content": "You'll also need to decide whether to attach a new disk or one that contains data.",
      "pos": [
        2996,
        3078
      ]
    },
    {
      "content": "For a new disk, the command creates the .vhd file and attaches it.",
      "pos": [
        3079,
        3145
      ]
    },
    {
      "content": "To attach a new disk, run this command:",
      "pos": [
        3147,
        3186
      ]
    },
    {
      "content": "To attach an existing data disk, run this command:",
      "pos": [
        3312,
        3362
      ]
    },
    {
      "content": "To attach data disks from an existing .vhd file in blob storage, run this command:",
      "pos": [
        3466,
        3548
      ]
    },
    {
      "content": "Create a Windows-based VM",
      "pos": [
        3772,
        3797
      ]
    },
    {
      "content": "To create a new Windows-based virtual machine in Azure, use the instructions in",
      "pos": [
        3799,
        3878
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Use Azure PowerShell to create and preconfigure Windows-based virtual machines<ept id=\"p1\">](virtual-machines-ps-create-preconfigure-windows-vms.md)</ept>.",
      "pos": [
        3879,
        4016
      ]
    },
    {
      "content": "This topic steps you through the creation of an Azure PowerShell command set that creates a Windows-based VM that can be preconfigured:",
      "pos": [
        4017,
        4152
      ]
    },
    {
      "content": "With Active Directory domain membership.",
      "pos": [
        4156,
        4196
      ]
    },
    {
      "content": "With additional disks.",
      "pos": [
        4199,
        4221
      ]
    },
    {
      "content": "As a member of an existing load-balanced set.",
      "pos": [
        4224,
        4269
      ]
    },
    {
      "content": "With a static IP address.",
      "pos": [
        4272,
        4297
      ]
    }
  ],
  "content": "<properties\n   pageTitle=\"Manage your virtual machines by using Azure PowerShell | Microsoft Azure\"\n   description=\"Learn commands that you can use to automate tasks in managing your virtual machines.\"\n   services=\"virtual-machines\"\n   documentationCenter=\"windows\"\n   authors=\"singhkay\"\n   manager=\"timlt\"\n   editor=\"\"\n   tags=\"azure-service-management\"/>\n\n   <tags\n   ms.service=\"virtual-machines\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"vm-windows\"\n   ms.workload=\"infrastructure-services\"\n   ms.date=\"06/24/2015\"\n   ms.author=\"kasing\"/>\n\n# Manage your virtual machines by using Azure PowerShell\n\nMany tasks you do each day to manage your VMs can be automated by using Azure PowerShell cmdlets. This article gives you example commands for simpler tasks, and links to articles that show the commands for more complex tasks.\n\n>[AZURE.NOTE] If you haven't installed and configured Azure PowerShell yet, you can get instructions in the article [How to install and configure Azure PowerShell](../install-configure-powershell.md).\n\n## How to use the example commands\nYou'll need to replace some of the text in the commands with text that's appropriate for your environment. The < and > symbols indicate text you need to replace. When you replace the text, remove the symbols but leave the quote marks in place.\n\n## Get a VM\nThis is a basic task you'll use often. Use it to get information about a VM, perform tasks on a VM, or get output to store in a variable.\n\nTo get information about the VM, run this command, replacing everything in the quotes, including the < and > characters:\n\n     Get-AzureVM -ServiceName \"<cloud service name>\" -Name \"<virtual machine name>\"\n\nTo store the output in a $vm variable, run:\n\n    $vm = Get-AzureVM -ServiceName \"<cloud service name>\" -Name \"<virtual machine name>\"\n\n## Log on to a Windows-based VM\n\nRun these commands:\n\n>[AZURE.NOTE] You can get the virtual machine and cloud service name from the display of the **Get-AzureVM** command.\n>\n    $svcName=\"<cloud service name>\"\n    $vmName=\"<virtual machine name>\"\n    $localPath=\"<drive and folder location to store the downloaded RDP file, example: c:\\temp >\"\n    $localFile=$localPath + \"\\\" + $vmname + \".rdp\"\n    Get-AzureRemoteDesktopFile -ServiceName $svcName -Name $vmName -LocalPath $localFile -Launch\n\n## Stop a VM\n\nRun this command:\n\n    Stop-AzureVM -ServiceName \"<cloud service name>\" -Name \"<virtual machine name>\"\n\n>[AZURE.IMPORTANT] Use this parameter to keep the virtual IP (VIP) of the cloud service in case it's the last VM in that cloud service. <br><br> If you use the StayProvisioned parameter, you'll still be billed for the VM.\n\n## Start a VM\n\nRun this command:\n\n    Start-AzureVM -ServiceName \"<cloud service name>\" -Name \"<virtual machine name>\"\n\n## Attach a data disk\nThis task requires a few steps. First, you use the ****Add-AzureDataDisk**** cmdlet to add the disk to the $vm object. Then, you use **Update-AzureVM** cmdlet to update the configuration of the VM.\n\nYou'll also need to decide whether to attach a new disk or one that contains data. For a new disk, the command creates the .vhd file and attaches it.\n\nTo attach a new disk, run this command:\n\n    Add-AzureDataDisk -CreateNew -DiskSizeInGB 128 -DiskLabel \"<main>\" -LUN <0> -VM <$vm> `\n              | Update-AzureVM\n\nTo attach an existing data disk, run this command:\n\n    Add-AzureDataDisk -Import -DiskName \"<MyExistingDisk>\" -LUN <0> `\n              | Update-AzureVM\n\nTo attach data disks from an existing .vhd file in blob storage, run this command:\n\n    Add-AzureDataDisk -ImportFrom -MediaLocation `\n              \"<https://mystorage.blob.core.windows.net/mycontainer/MyExistingDisk.vhd>\" `\n              -DiskLabel \"<main>\" -LUN <0> `\n              | Update-AzureVM\n\n## Create a Windows-based VM\n\nTo create a new Windows-based virtual machine in Azure, use the instructions in\n[Use Azure PowerShell to create and preconfigure Windows-based virtual machines](virtual-machines-ps-create-preconfigure-windows-vms.md). This topic steps you through the creation of an Azure PowerShell command set that creates a Windows-based VM that can be preconfigured:\n\n- With Active Directory domain membership.\n- With additional disks.\n- As a member of an existing load-balanced set.\n- With a static IP address.\n"
}