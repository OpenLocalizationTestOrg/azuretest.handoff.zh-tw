{
  "nodes": [
    {
      "content": "Monitor your app's health and usage with Application Insights",
      "pos": [
        28,
        89
      ]
    },
    {
      "content": "Get started with Application Insights.",
      "pos": [
        109,
        147
      ]
    },
    {
      "content": "Analyze usage, availability and performance of your on-premises or Microsoft Azure applications.",
      "pos": [
        148,
        244
      ]
    },
    {
      "content": "Monitor performance in web applications",
      "pos": [
        563,
        602
      ]
    },
    {
      "content": "Application Insights is in preview.",
      "pos": [
        605,
        640
      ]
    },
    {
      "content": "Make sure your application is performing well, and find out quickly about any failures.",
      "pos": [
        644,
        731
      ]
    },
    {
      "content": "[Application Insights][start] will tell you about any performance issues and exceptions, and help you find and diagnose the root causes.",
      "pos": [
        732,
        868
      ]
    },
    {
      "content": "Application Insights can monitor ASP.NET web applications and WCF services, hosted on-premise or on virtual machines, as well as Microsoft Azure websites.",
      "pos": [
        870,
        1024
      ]
    },
    {
      "pos": [
        1031,
        1080
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"setup\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Set up performance monitoring"
    },
    {
      "content": "If you haven't yet added Application Insights to your project (that is, if it doesn't have ApplicationInsights.config), choose one of these ways to get started:",
      "pos": [
        1082,
        1242
      ]
    },
    {
      "content": "[Add Application Insights to your project in Visual Studio][greenbrown] - Recommended.",
      "pos": [
        1246,
        1332
      ]
    },
    {
      "content": "As well as passive performance monitoring, you can insert diagnostic logging and track usage.",
      "pos": [
        1333,
        1426
      ]
    },
    {
      "content": "[Monitor performance of a live website now][redfield] - This way, you don't need to update the application project or redeploy the website.",
      "pos": [
        1429,
        1568
      ]
    },
    {
      "pos": [
        1571,
        1709
      ],
      "content": "<bpt id=\"p1\">[</bpt>For a Microsoft Azure website<ept id=\"p1\">](../insights-how-to-customize-monitoring.md)</ept>  you can already see metrics on the website's Monitoring lens."
    },
    {
      "content": "Using either of these methods, you'll quickly see data on the overview blade in Application Insights.",
      "pos": [
        1712,
        1813
      ]
    },
    {
      "pos": [
        1819,
        1855
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"view\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Exploring metrics"
    },
    {
      "content": "Click any  to see more detail, and to see results for a longer period.",
      "pos": [
        1857,
        1927
      ]
    },
    {
      "content": "For example, click the Requests tile and then select a time range:",
      "pos": [
        1928,
        1994
      ]
    },
    {
      "content": "Click through to more data and select a time range",
      "pos": [
        1999,
        2049
      ]
    },
    {
      "content": "Click a chart to choose which metrics it displays, or add a new chart and select its metrics:",
      "pos": [
        2124,
        2217
      ]
    },
    {
      "content": "Click a graph to choose metrics",
      "pos": [
        2221,
        2252
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> <bpt id=\"p1\">**</bpt>Uncheck all the metrics<ept id=\"p1\">**</ept> to see the full selection that is available.",
      "pos": [
        2333,
        2418
      ]
    },
    {
      "content": "The metrics fall into groups; when any member of a group is selected, only the other members of that group appear.",
      "pos": [
        2419,
        2533
      ]
    },
    {
      "content": "<ph id=\"ph1\">&lt;a name=\"metrics\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>What does it all mean?",
      "pos": [
        2539,
        2583
      ]
    },
    {
      "content": "Performance tiles and reports",
      "pos": [
        2584,
        2613
      ]
    },
    {
      "content": "There's a variety of performance metrics you can get.",
      "pos": [
        2615,
        2668
      ]
    },
    {
      "content": "Let's start with those that appear by default on the application blade.",
      "pos": [
        2669,
        2740
      ]
    },
    {
      "content": "Requests",
      "pos": [
        2747,
        2755
      ]
    },
    {
      "content": "The number of HTTP requests received in a specified period.",
      "pos": [
        2757,
        2816
      ]
    },
    {
      "content": "Compare this with the results on other reports to see how your app behaves as the load varies.",
      "pos": [
        2817,
        2911
      ]
    },
    {
      "content": "HTTP requests include all GET or POST requests for pages, data and images.",
      "pos": [
        2913,
        2987
      ]
    },
    {
      "content": "Click on the tile to get counts for specific URLs.",
      "pos": [
        2989,
        3039
      ]
    },
    {
      "content": "Average response time",
      "pos": [
        3045,
        3066
      ]
    },
    {
      "content": "Measures the time between a web request entering your application and the response being returned.",
      "pos": [
        3068,
        3166
      ]
    },
    {
      "content": "The points show a moving average.",
      "pos": [
        3168,
        3201
      ]
    },
    {
      "content": "If there are a lot of requests, there might be some that deviate from the average without an obvious peak or dip in the graph.",
      "pos": [
        3202,
        3328
      ]
    },
    {
      "content": "Look for unusual peaks.",
      "pos": [
        3330,
        3353
      ]
    },
    {
      "content": "In general, expect response time to rise with a rise in requests.",
      "pos": [
        3354,
        3419
      ]
    },
    {
      "content": "If the rise is disproportionate, your app might be hitting a resource limit such as CPU or the capacity of a service it uses.",
      "pos": [
        3420,
        3545
      ]
    },
    {
      "content": "Click on the tile to get times for specific URLs.",
      "pos": [
        3547,
        3596
      ]
    },
    {
      "content": "Slowest requests",
      "pos": [
        3677,
        3693
      ]
    },
    {
      "content": "Shows which requests might need performance tuning.",
      "pos": [
        3772,
        3823
      ]
    },
    {
      "content": "Failed requests",
      "pos": [
        3830,
        3845
      ]
    },
    {
      "content": "A count of requests that threw uncaught exceptions.",
      "pos": [
        3923,
        3974
      ]
    },
    {
      "content": "Click the tile to see the details of specific failures, and select an individual request to see its detail.",
      "pos": [
        3976,
        4083
      ]
    },
    {
      "content": "Only a representative sample of failures is retained for individual inspection.",
      "pos": [
        4086,
        4165
      ]
    },
    {
      "content": "Other metrics",
      "pos": [
        4171,
        4184
      ]
    },
    {
      "content": "To see what other metrics you can display, click a graph, and then deselect all the metrics to see the full available set.",
      "pos": [
        4186,
        4308
      ]
    },
    {
      "content": "Click (i) to see each metric's definition.",
      "pos": [
        4309,
        4351
      ]
    },
    {
      "content": "Deselect all metrics to see the whole set",
      "pos": [
        4355,
        4396
      ]
    },
    {
      "content": "Selecting any metric will disable the others that can't appear on the same chart.",
      "pos": [
        4475,
        4556
      ]
    },
    {
      "content": "System performance counters",
      "pos": [
        4561,
        4588
      ]
    },
    {
      "content": "Some of the metrics you can choose from are <bpt id=\"p1\">[</bpt>performance counters<ept id=\"p1\">](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters)</ept>.",
      "pos": [
        4590,
        4739
      ]
    },
    {
      "content": "Windows provides a wide variety of them, and you can also define your own.",
      "pos": [
        4740,
        4814
      ]
    },
    {
      "content": "This example shows performance counters that are available by default.",
      "pos": [
        4816,
        4886
      ]
    },
    {
      "content": "We have <bpt id=\"p1\">[</bpt>added a separate chart<ept id=\"p1\">](app-insights-metrics-explorer.md#editing-charts-and-grids)</ept> for each counter, and named the chart by <bpt id=\"p2\">[</bpt>saving it as a favorite<ept id=\"p2\">](app-insights-metrics-explorer.md#editing-charts-and-grids)</ept>:",
      "pos": [
        4887,
        5105
      ]
    },
    {
      "content": "If the counters you want aren't in the properties list, you can add them to the set that the SDK collects.",
      "pos": [
        5172,
        5278
      ]
    },
    {
      "content": "Open ApplicationInsights.config and edit the performance collector directive:",
      "pos": [
        5279,
        5356
      ]
    },
    {
      "content": "The format is <ph id=\"ph1\">`\\Category(instance)\\Counter\"`</ph> or for categories that don't have instances, just <ph id=\"ph2\">`\\Category\\Counter`</ph>.",
      "pos": [
        5712,
        5827
      ]
    },
    {
      "content": "To discover what counters are available in your system, read <bpt id=\"p1\">[</bpt>this introduction<ept id=\"p1\">](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters)</ept>.",
      "pos": [
        5828,
        5991
      ]
    },
    {
      "pos": [
        5993,
        6155
      ],
      "content": "<ph id=\"ph1\">`ReportAs`</ph> is required for counter names that contain characters other than these: letters, round brackets, forward slahes, hyphens, underscores, spaces and dots."
    },
    {
      "content": "If you specify an instance, it will be collected as a property \"CounterInstanceName\" of the reported metric.",
      "pos": [
        6157,
        6265
      ]
    },
    {
      "content": "If you prefer, you can write code to have the same effect:",
      "pos": [
        6267,
        6325
      ]
    },
    {
      "content": "Set alerts",
      "pos": [
        6742,
        6752
      ]
    },
    {
      "content": "To be notified by email of unusual values of any metric, add an alert.",
      "pos": [
        6754,
        6824
      ]
    },
    {
      "content": "You can choose either to send the email to the account administrators, or to specific email addresses.",
      "pos": [
        6825,
        6927
      ]
    },
    {
      "content": "Set the resource before the other properties.",
      "pos": [
        7014,
        7059
      ]
    },
    {
      "content": "Don't choose the webtest resources if you want to set alerts on performance or usage metrics.",
      "pos": [
        7060,
        7153
      ]
    },
    {
      "content": "Be careful to note the units in which you're asked to enter the threshold value.",
      "pos": [
        7155,
        7235
      ]
    },
    {
      "content": "I don't see the Add Alert button.",
      "pos": [
        7238,
        7271
      ]
    },
    {
      "content": "- Is this a group account to which you have read-only access?",
      "pos": [
        7273,
        7334
      ]
    },
    {
      "content": "Check with the account administrator.",
      "pos": [
        7335,
        7372
      ]
    },
    {
      "pos": [
        7377,
        7418
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"diagnosis\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Diagnosing issues"
    },
    {
      "content": "Here are a few tips for finding and diagnosing performance issues:",
      "pos": [
        7420,
        7486
      ]
    },
    {
      "content": "Set up [web tests][availability] to be alerted if your web site goes down or responds incorrectly or slowly.",
      "pos": [
        7490,
        7598
      ]
    },
    {
      "content": "Compare the Request count with other metrics to see if failures or slow response are related to load.",
      "pos": [
        7602,
        7703
      ]
    },
    {
      "content": "[Insert and search trace statements][diagnostic] in your code to help pinpoint problems.",
      "pos": [
        7706,
        7794
      ]
    },
    {
      "pos": [
        7799,
        7828
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"next\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Next steps"
    },
    {
      "content": "[Web tests][availability] - Have web requests sent to your application at regular intervals from around the world.",
      "pos": [
        7830,
        7944
      ]
    },
    {
      "content": "[Capture and search diagnostic traces][diagnostic] - Insert trace calls and sift through the results to pinpoint issues.",
      "pos": [
        7946,
        8066
      ]
    },
    {
      "content": "[Usage tracking][usage] - Find out how people use your application.",
      "pos": [
        8068,
        8135
      ]
    },
    {
      "content": "[Troubleshooting][qna] - and Q &amp; A",
      "pos": [
        8137,
        8171
      ]
    },
    {
      "content": "Video",
      "pos": [
        8176,
        8181
      ]
    },
    {
      "content": "test",
      "pos": [
        8625,
        8629
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Monitor your app's health and usage with Application Insights\" \n    description=\"Get started with Application Insights. Analyze usage, availability and performance of your on-premises or Microsoft Azure applications.\" \n    services=\"application-insights\" \n    documentationCenter=\"\"\n    authors=\"alancameronwills\" \n    manager=\"keboyd\"/>\n\n<tags \n    ms.service=\"application-insights\" \n    ms.workload=\"tbd\" \n    ms.tgt_pltfrm=\"ibiza\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"04/02/2015\" \n    ms.author=\"awills\"/>\n \n# Monitor performance in web applications\n\n*Application Insights is in preview.*\n\n\nMake sure your application is performing well, and find out quickly about any failures. [Application Insights][start] will tell you about any performance issues and exceptions, and help you find and diagnose the root causes.\n\nApplication Insights can monitor ASP.NET web applications and WCF services, hosted on-premise or on virtual machines, as well as Microsoft Azure websites. \n\n\n## <a name=\"setup\"></a>Set up performance monitoring\n\nIf you haven't yet added Application Insights to your project (that is, if it doesn't have ApplicationInsights.config), choose one of these ways to get started:\n\n* [Add Application Insights to your project in Visual Studio][greenbrown] - Recommended. As well as passive performance monitoring, you can insert diagnostic logging and track usage.\n* [Monitor performance of a live website now][redfield] - This way, you don't need to update the application project or redeploy the website.\n* [For a Microsoft Azure website](../insights-how-to-customize-monitoring.md)  you can already see metrics on the website's Monitoring lens. \n\nUsing either of these methods, you'll quickly see data on the overview blade in Application Insights.\n\n\n## <a name=\"view\"></a>Exploring metrics\n\nClick any  to see more detail, and to see results for a longer period. For example, click the Requests tile and then select a time range:\n\n\n![Click through to more data and select a time range](./media/app-insights-web-monitor-performance/appinsights-48metrics.png)\n\nClick a chart to choose which metrics it displays, or add a new chart and select its metrics:\n\n![Click a graph to choose metrics](./media/app-insights-web-monitor-performance/appinsights-61perfchoices.png)\n\n> [AZURE.NOTE] **Uncheck all the metrics** to see the full selection that is available. The metrics fall into groups; when any member of a group is selected, only the other members of that group appear.\n\n\n## <a name=\"metrics\"></a>What does it all mean? Performance tiles and reports\n\nThere's a variety of performance metrics you can get. Let's start with those that appear by default on the application blade.\n\n\n### Requests\n\nThe number of HTTP requests received in a specified period. Compare this with the results on other reports to see how your app behaves as the load varies.\n\nHTTP requests include all GET or POST requests for pages, data and images.\n\nClick on the tile to get counts for specific URLs.\n\n### Average response time\n\nMeasures the time between a web request entering your application and the response being returned.\n\nThe points show a moving average. If there are a lot of requests, there might be some that deviate from the average without an obvious peak or dip in the graph.\n\nLook for unusual peaks. In general, expect response time to rise with a rise in requests. If the rise is disproportionate, your app might be hitting a resource limit such as CPU or the capacity of a service it uses.\n\nClick on the tile to get times for specific URLs.\n\n![](./media/app-insights-web-monitor-performance/appinsights-42reqs.png)\n\n\n### Slowest requests\n\n![](./media/app-insights-web-monitor-performance/appinsights-44slowest.png)\n\nShows which requests might need performance tuning.\n\n\n### Failed requests\n\n![](./media/app-insights-web-monitor-performance/appinsights-46failed.png)\n\nA count of requests that threw uncaught exceptions.\n\nClick the tile to see the details of specific failures, and select an individual request to see its detail. \n\nOnly a representative sample of failures is retained for individual inspection.\n\n### Other metrics\n\nTo see what other metrics you can display, click a graph, and then deselect all the metrics to see the full available set. Click (i) to see each metric's definition.\n\n![Deselect all metrics to see the whole set](./media/app-insights-web-monitor-performance/appinsights-62allchoices.png)\n\n\nSelecting any metric will disable the others that can't appear on the same chart.\n\n## System performance counters\n\nSome of the metrics you can choose from are [performance counters](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters). Windows provides a wide variety of them, and you can also define your own.\n\nThis example shows performance counters that are available by default. We have [added a separate chart](app-insights-metrics-explorer.md#editing-charts-and-grids) for each counter, and named the chart by [saving it as a favorite](app-insights-metrics-explorer.md#editing-charts-and-grids):\n\n![](./media/app-insights-web-monitor-performance/sys-perf.png)\n\n\nIf the counters you want aren't in the properties list, you can add them to the set that the SDK collects. Open ApplicationInsights.config and edit the performance collector directive:\n\n    <Add Type=\"Microsoft.ApplicationInsights.Extensibility.PerfCollector.PerformanceCollectorModule, Microsoft.ApplicationInsights.Extensibility.PerfCollector\">\n      <Counters>\n        <Add PerformanceCounter=\"\\Objects\\Processes\"/>\n        <Add PerformanceCounter=\"\\Sales(electronics)\\# Items Sold\" ReportAs=\"Item sales\"/>\n      </Counters>\n    </Add>\n\nThe format is `\\Category(instance)\\Counter\"` or for categories that don't have instances, just `\\Category\\Counter`. To discover what counters are available in your system, read [this introduction](http://www.codeproject.com/Articles/8590/An-Introduction-To-Performance-Counters).\n\n`ReportAs` is required for counter names that contain characters other than these: letters, round brackets, forward slahes, hyphens, underscores, spaces and dots.\n\nIf you specify an instance, it will be collected as a property \"CounterInstanceName\" of the reported metric.\n\nIf you prefer, you can write code to have the same effect:\n\n    var perfCollector = new PerformanceCollectorModule();\n    perfCollector.Counters = new List<CustomPerformanceCounterCollectionRquest>();\n    perfCollector.Counters.Add(new CustomPerformanceCounterCollectionRquest(\n      @\"\\Sales(electronics)\\# Items Sold\", \"Items sold\"));\n    perfCollector.Initialize(TelemetryConfiguration.Active);\n    TelemetryConfiguration.Active.TelemetryModules.Add(perfCollector);\n\n\n\n## Set alerts\n\nTo be notified by email of unusual values of any metric, add an alert. You can choose either to send the email to the account administrators, or to specific email addresses.\n\n![](./media/app-insights-web-monitor-performance/appinsights-413setMetricAlert.png)\n\nSet the resource before the other properties. Don't choose the webtest resources if you want to set alerts on performance or usage metrics.\n\nBe careful to note the units in which you're asked to enter the threshold value.\n\n*I don't see the Add Alert button.* - Is this a group account to which you have read-only access? Check with the account administrator.\n\n## <a name=\"diagnosis\"></a>Diagnosing issues\n\nHere are a few tips for finding and diagnosing performance issues:\n\n* Set up [web tests][availability] to be alerted if your web site goes down or responds incorrectly or slowly. \n* Compare the Request count with other metrics to see if failures or slow response are related to load.\n* [Insert and search trace statements][diagnostic] in your code to help pinpoint problems.\n\n## <a name=\"next\"></a>Next steps\n\n[Web tests][availability] - Have web requests sent to your application at regular intervals from around the world.\n\n[Capture and search diagnostic traces][diagnostic] - Insert trace calls and sift through the results to pinpoint issues.\n\n[Usage tracking][usage] - Find out how people use your application.\n\n[Troubleshooting][qna] - and Q & A\n\n## Video\n\n[AZURE.VIDEO performance-monitoring-application-insights]\n\n<!--Link references-->\n\n[availability]: app-insights-monitor-web-app-availability.md\n[diagnostic]: app-insights-diagnostic-search.md\n[greenbrown]: app-insights-start-monitoring-app-health-usage.md\n[qna]: app-insights-troubleshoot-faq.md\n[redfield]: app-insights-monitor-performance-live-website-now.md\n[start]: app-insights-get-started.md\n[usage]: app-insights-web-track-usage.md\n\n \ntest\n"
}