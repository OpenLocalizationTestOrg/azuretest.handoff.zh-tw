{
  "nodes": [
    {
      "content": "Get started with Azure Search in Java | Microsoft Azure",
      "pos": [
        27,
        82
      ]
    },
    {
      "content": "How to build a custom Azure Search application using Java as your programming language.",
      "pos": [
        101,
        188
      ]
    },
    {
      "content": "Get started with Azure Search in Java",
      "pos": [
        491,
        528
      ]
    },
    {
      "content": "Learn how to build a custom Java search application that uses Azure Search for its search experience.",
      "pos": [
        530,
        631
      ]
    },
    {
      "content": "This tutorial uses the <bpt id=\"p1\">[</bpt>Azure Search Service REST API<ept id=\"p1\">](https://msdn.microsoft.com/library/dn798935.aspx)</ept> to construct the objects and operations used in this exercise.",
      "pos": [
        632,
        799
      ]
    },
    {
      "content": "We used the following software to build and test this sample:",
      "pos": [
        801,
        862
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Eclipse IDE for Java EE Developers<ept id=\"p1\">](https://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/lunar)</ept>.",
      "pos": [
        866,
        980
      ]
    },
    {
      "content": "Be sure to download the EE version.",
      "pos": [
        981,
        1016
      ]
    },
    {
      "content": "One of the verification steps requires a feature that is found only in this edition.",
      "pos": [
        1017,
        1101
      ]
    },
    {
      "content": "JDK 8u40",
      "pos": [
        1106,
        1114
      ]
    },
    {
      "content": "Apache Tomcat 8.0",
      "pos": [
        1205,
        1222
      ]
    },
    {
      "pos": [
        1267,
        1406
      ],
      "content": "To run this sample, you need an Azure Search service, which you can sign up for in the <bpt id=\"p1\">[</bpt>Azure management portal<ept id=\"p1\">](https://portal.azure.com)</ept>."
    },
    {
      "pos": [
        1410,
        1552
      ],
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> Download the source code for this tutorial at <bpt id=\"p1\">[</bpt>Azure Search Java demo<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=530197)</ept> on Github."
    },
    {
      "content": "About the data",
      "pos": [
        1557,
        1571
      ]
    },
    {
      "content": "This sample application uses data from the <bpt id=\"p1\">[</bpt>United States Geological Services (USGS)<ept id=\"p1\">](http://geonames.usgs.gov/domestic/download_data.htm)</ept>, filtered on the state of Rhode Island to reduce the dataset size.",
      "pos": [
        1573,
        1778
      ]
    },
    {
      "content": "We'll use this data to build a search application that returns landmark buildings such as hospitals and schools, as well as geological features like streams, lakes, and summits.",
      "pos": [
        1779,
        1956
      ]
    },
    {
      "content": "In this application, the <bpt id=\"p1\">**</bpt>SearchServlet.java<ept id=\"p1\">**</ept> program builds and loads the index using an <bpt id=\"p2\">[</bpt>Indexer<ept id=\"p2\">](https://msdn.microsoft.com/library/azure/dn798918.aspx)</ept> construct, retrieving the filtered USGS dataset from a public Azure SQL Database.",
      "pos": [
        1958,
        2197
      ]
    },
    {
      "content": "Predefined credentials and connection  information to the online data source are provided in the program code.",
      "pos": [
        2198,
        2308
      ]
    },
    {
      "content": "In terms of data access, no further configuration is necessary.",
      "pos": [
        2309,
        2372
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> We applied a filter on this dataset to stay under the 10,000 document limit of the free pricing tier.",
      "pos": [
        2376,
        2490
      ]
    },
    {
      "content": "If you use the standard tier, this limit does not apply, and you can modify this code to use a bigger dataset.",
      "pos": [
        2491,
        2601
      ]
    },
    {
      "content": "For details about capacity for each pricing tier, see <bpt id=\"p1\">[</bpt>Limits and constraints<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/dn798934.aspx)</ept>.",
      "pos": [
        2602,
        2737
      ]
    },
    {
      "content": "About the program files",
      "pos": [
        2742,
        2765
      ]
    },
    {
      "content": "The following list describes the files that are relevant to this sample.",
      "pos": [
        2767,
        2839
      ]
    },
    {
      "content": "Search.jsp: Provides the user interface",
      "pos": [
        2843,
        2882
      ]
    },
    {
      "content": "SearchServlet.java: Provides methods (similar to a controller in MVC)",
      "pos": [
        2885,
        2954
      ]
    },
    {
      "content": "SearchServiceClient.java: Handles HTTP requests",
      "pos": [
        2957,
        3004
      ]
    },
    {
      "content": "SearchServiceHelper.java: A helper class that provides static methods",
      "pos": [
        3007,
        3076
      ]
    },
    {
      "content": "Document.java: Provides the data model",
      "pos": [
        3079,
        3117
      ]
    },
    {
      "content": "config.properties: Sets the Search service URL and api-key",
      "pos": [
        3120,
        3178
      ]
    },
    {
      "content": "Pom.xml: A Maven dependency",
      "pos": [
        3181,
        3208
      ]
    },
    {
      "content": "Create the service",
      "pos": [
        3214,
        3232
      ]
    },
    {
      "pos": [
        3237,
        3293
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>Azure portal<ept id=\"p1\">](https://portal.azure.com)</ept>."
    },
    {
      "pos": [
        3298,
        3362
      ],
      "content": "In the Jumpbar, click <bpt id=\"p1\">**</bpt>New<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Data + storage<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Search<ept id=\"p3\">**</ept>."
    },
    {
      "content": "![][1]",
      "pos": [
        3369,
        3375
      ]
    },
    {
      "content": "Configure the service name, pricing tier, resource group, subscription and location.",
      "pos": [
        3380,
        3464
      ]
    },
    {
      "content": "These settings are required and cannot be changed once the service is provisioned.",
      "pos": [
        3465,
        3547
      ]
    },
    {
      "content": "![][2]",
      "pos": [
        3554,
        3560
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Service name<ept id=\"p1\">**</ept> must be unique, lower-case, under 15 characters, with no spaces.",
      "pos": [
        3568,
        3649
      ]
    },
    {
      "content": "This name becomes part of the endpoint of your Azure Search service.",
      "pos": [
        3650,
        3718
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Naming Rules<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/dn857353.aspx)</ept> for more information about naming conventions.",
      "pos": [
        3719,
        3840
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Pricing Tier<ept id=\"p1\">**</ept> determines capacity and billing.",
      "pos": [
        3848,
        3897
      ]
    },
    {
      "content": "Both tiers provide the same features, but at different resource levels.",
      "pos": [
        3898,
        3969
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Free<ept id=\"p1\">**</ept>  runs on clusters that are shared with other subscribers.",
      "pos": [
        3981,
        4047
      ]
    },
    {
      "content": "It offers enough capacity to try out tutorials and write proof-of-concept code, but is not intended for production applications.",
      "pos": [
        4048,
        4176
      ]
    },
    {
      "content": "Deploying a free service typically only takes a few minutes.",
      "pos": [
        4177,
        4237
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> runs on dedicated resources and is highly scalable.",
      "pos": [
        4248,
        4312
      ]
    },
    {
      "content": "Initially, a standard service is provisioned with one replica and one partition, but you can adjust capacity once the service is created.",
      "pos": [
        4313,
        4450
      ]
    },
    {
      "content": "Deploying a standard service takes longer, usually about fifteen minutes.",
      "pos": [
        4451,
        4524
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Resource Groups<ept id=\"p1\">**</ept> are containers for services and resources used for a common purpose.",
      "pos": [
        4532,
        4620
      ]
    },
    {
      "content": "For example, if you're building a custom search application based on Azure Search, Azure Websites, Azure BLOB storage, you can create a resource group that keeps these services together in the portal management pages.",
      "pos": [
        4621,
        4838
      ]
    },
    {
      "pos": [
        4846,
        4953
      ],
      "content": "<bpt id=\"p1\">**</bpt>Subscription<ept id=\"p1\">**</ept> allows you to choose among multiple subscriptions, if you have more than one subscription."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Location<ept id=\"p1\">**</ept> is the data center region.",
      "pos": [
        4961,
        5000
      ]
    },
    {
      "content": "Currently, all resources must run in the same data center.",
      "pos": [
        5001,
        5059
      ]
    },
    {
      "content": "Distributing resources across multiple data centers is not supported.",
      "pos": [
        5060,
        5129
      ]
    },
    {
      "pos": [
        5134,
        5176
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept> to provision the service."
    },
    {
      "content": "Watch for notifications in the Jumpbar.",
      "pos": [
        5178,
        5217
      ]
    },
    {
      "content": "A notice appears when the service is ready to use.",
      "pos": [
        5218,
        5268
      ]
    },
    {
      "content": "Find the service name and api-key of your Azure Search service",
      "pos": [
        5292,
        5354
      ]
    },
    {
      "content": "After the service is created, you can return to the portal to get the URL and <ph id=\"ph1\">`api-key`</ph>.",
      "pos": [
        5356,
        5444
      ]
    },
    {
      "content": "Connections to your Search service require that you have both the URL and an <ph id=\"ph1\">`api-key`</ph> to authenticate the call.",
      "pos": [
        5445,
        5557
      ]
    },
    {
      "pos": [
        5562,
        5657
      ],
      "content": "In the Jumpbar, click <bpt id=\"p1\">**</bpt>Home<ept id=\"p1\">**</ept> and then click the Search service to open the service dashboard."
    },
    {
      "content": "On the service dashboard, you'll see tiles for essential information as well as the key icon for accessing the admin keys.",
      "pos": [
        5662,
        5784
      ]
    },
    {
      "content": "![][3]",
      "pos": [
        5790,
        5796
      ]
    },
    {
      "content": "Copy the service URL and an admin key.",
      "pos": [
        5801,
        5839
      ]
    },
    {
      "content": "You will need them later, when you add them to the <bpt id=\"p1\">**</bpt>config.properties<ept id=\"p1\">**</ept> file.",
      "pos": [
        5840,
        5918
      ]
    },
    {
      "content": "Download the sample files",
      "pos": [
        5923,
        5948
      ]
    },
    {
      "pos": [
        5953,
        6040
      ],
      "content": "Go to <bpt id=\"p1\">[</bpt>AzureSearchJavaDemo<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=530197)</ept> on Github."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Download ZIP<ept id=\"p1\">**</ept>, save the .zip file to disk, and then extract all the files it contains.",
      "pos": [
        6045,
        6140
      ]
    },
    {
      "content": "Consider extracting the files into your Java workspace to make it easier to find the project later.",
      "pos": [
        6141,
        6240
      ]
    },
    {
      "content": "The sample files are read-only.",
      "pos": [
        6245,
        6276
      ]
    },
    {
      "content": "Right-click folder properties and clear the read-only attribute.",
      "pos": [
        6277,
        6341
      ]
    },
    {
      "content": "All subsequent file modifications and run statements will be made against files in this folder.",
      "pos": [
        6343,
        6438
      ]
    },
    {
      "content": "Import project",
      "pos": [
        6445,
        6459
      ]
    },
    {
      "pos": [
        6464,
        6558
      ],
      "content": "In Eclipse, choose <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Import<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>General<ept id=\"p3\">**</ept> &gt; <bpt id=\"p4\">**</bpt>Existing Projects into Workspace<ept id=\"p4\">**</ept>."
    },
    {
      "content": "![][4]",
      "pos": [
        6564,
        6570
      ]
    },
    {
      "content": "In <bpt id=\"p1\">**</bpt>Select root directory<ept id=\"p1\">**</ept>, browse to the folder containing sample files.",
      "pos": [
        6575,
        6650
      ]
    },
    {
      "content": "Select the folder that contains the .project folder.",
      "pos": [
        6651,
        6703
      ]
    },
    {
      "content": "The project should appear in the <bpt id=\"p1\">**</bpt>Projects<ept id=\"p1\">**</ept> list as a selected item.",
      "pos": [
        6704,
        6774
      ]
    },
    {
      "content": "![][12]",
      "pos": [
        6780,
        6787
      ]
    },
    {
      "pos": [
        6792,
        6809
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Use <bpt id=\"p1\">**</bpt>Project Explorer<ept id=\"p1\">**</ept> to view and edit the files.",
      "pos": [
        6814,
        6866
      ]
    },
    {
      "content": "If it's not already open, click <bpt id=\"p1\">**</bpt>Window<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Show View<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Project Explorer<ept id=\"p3\">**</ept> or use the shortcut to open it.",
      "pos": [
        6867,
        6980
      ]
    },
    {
      "content": "Configure the service URL and api-key",
      "pos": [
        6985,
        7022
      ]
    },
    {
      "pos": [
        7027,
        7161
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Project Explorer<ept id=\"p1\">**</ept>, double-click <bpt id=\"p2\">**</bpt>config.properties<ept id=\"p2\">**</ept> to edit the configuration settings containing the server name and api-key."
    },
    {
      "pos": [
        7166,
        7367
      ],
      "content": "Refer to the steps earlier in this article, where you found the service URL and api-key in the <bpt id=\"p1\">[</bpt>Azure portal<ept id=\"p1\">](https://portal.azure.com)</ept>, to get the values you will now enter into <bpt id=\"p2\">**</bpt>config.properties<ept id=\"p2\">**</ept>."
    },
    {
      "content": "In <bpt id=\"p1\">**</bpt>config.properties<ept id=\"p1\">**</ept>, replace \"Api Key\" with the api-key for your service.",
      "pos": [
        7372,
        7450
      ]
    },
    {
      "content": "Next, service name (the first component of the URL http://servicename.search.windows.net) replaces \"service name\" in the same file.",
      "pos": [
        7451,
        7582
      ]
    },
    {
      "content": "![][5]",
      "pos": [
        7588,
        7594
      ]
    },
    {
      "content": "Configure the project, build and runtime environments",
      "pos": [
        7599,
        7652
      ]
    },
    {
      "pos": [
        7657,
        7752
      ],
      "content": "In Eclipse, in Project Explorer, right-click the project &gt; <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Project Facets<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        7757,
        7817
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>Dynamic Web Module<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Java<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>JavaScript<ept id=\"p3\">**</ept>."
    },
    {
      "content": "![][6]",
      "pos": [
        7823,
        7829
      ]
    },
    {
      "pos": [
        7834,
        7850
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Apply<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        7855,
        7943
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>Window<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Preferences<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Server<ept id=\"p3\">**</ept> &gt; <bpt id=\"p4\">**</bpt>Runtime Environments<ept id=\"p4\">**</ept> &gt; <bpt id=\"p5\">**</bpt>Add..<ept id=\"p5\">**</ept>."
    },
    {
      "content": "Expand Apache and select the version of the Apache Tomcat server you previously installed.",
      "pos": [
        7948,
        8038
      ]
    },
    {
      "content": "On our system, we installed version 8.",
      "pos": [
        8039,
        8077
      ]
    },
    {
      "content": "![][7]",
      "pos": [
        8083,
        8089
      ]
    },
    {
      "content": "On the next page, specify the Tomcat installation directory.",
      "pos": [
        8094,
        8154
      ]
    },
    {
      "content": "On a Windows computer, this will most likely be C:\\Program Files\\Apache Software Foundation\\Tomcat <bpt id=\"p1\">*</bpt>version<ept id=\"p1\">*</ept>.",
      "pos": [
        8155,
        8264
      ]
    },
    {
      "pos": [
        8269,
        8286
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        8291,
        8369
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>Window<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Preferences<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Java<ept id=\"p3\">**</ept> &gt; <bpt id=\"p4\">**</bpt>Installed JREs<ept id=\"p4\">**</ept> &gt; <bpt id=\"p5\">**</bpt>Add<ept id=\"p5\">**</ept>."
    },
    {
      "pos": [
        8374,
        8413
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Add JRE<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Standard VM<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        8419,
        8434
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        8440,
        8492
      ],
      "content": "In JRE Definition, in JRE home, click <bpt id=\"p1\">**</bpt>Directory<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Navigate to <bpt id=\"p1\">**</bpt>Program Files<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Java<ept id=\"p2\">**</ept> and select the JDK you previously installed.",
      "pos": [
        8498,
        8583
      ]
    },
    {
      "content": "It's important to select the JDK as the JRE.",
      "pos": [
        8584,
        8628
      ]
    },
    {
      "content": "In Installed JREs, choose the <bpt id=\"p1\">**</bpt>JDK<ept id=\"p1\">**</ept>.",
      "pos": [
        8634,
        8672
      ]
    },
    {
      "content": "Your settings should look similar to the following screenshot.",
      "pos": [
        8673,
        8735
      ]
    },
    {
      "content": "![][9]",
      "pos": [
        8741,
        8747
      ]
    },
    {
      "content": "Optionally, select <bpt id=\"p1\">**</bpt>Window<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Web Browser<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Internet Explorer<ept id=\"p3\">**</ept> to open the application in an external browser window.",
      "pos": [
        8753,
        8879
      ]
    },
    {
      "content": "Using an external browser gives you a better Web application experience.",
      "pos": [
        8880,
        8952
      ]
    },
    {
      "content": "![][8]",
      "pos": [
        8958,
        8964
      ]
    },
    {
      "content": "You have now completed the configuration tasks.",
      "pos": [
        8966,
        9013
      ]
    },
    {
      "content": "Next, you'll build and run the project.",
      "pos": [
        9014,
        9053
      ]
    },
    {
      "content": "Build the project",
      "pos": [
        9058,
        9075
      ]
    },
    {
      "pos": [
        9080,
        9198
      ],
      "content": "In Project Explorer, right-click the project name and choose <bpt id=\"p1\">**</bpt>Run As<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Maven build...<ept id=\"p2\">**</ept> to configure the project."
    },
    {
      "content": "![][10]",
      "pos": [
        9204,
        9211
      ]
    },
    {
      "pos": [
        9216,
        9294
      ],
      "content": "In Edit Configuration, in Goals, type \"clean install\", and then click <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Status messages are output to the console window.",
      "pos": [
        9296,
        9345
      ]
    },
    {
      "content": "You should see BUILD SUCCESS indicating the project built without errors.",
      "pos": [
        9346,
        9419
      ]
    },
    {
      "content": "Run the app",
      "pos": [
        9424,
        9435
      ]
    },
    {
      "content": "In this last step, you will run the application in a local server runtime environment.",
      "pos": [
        9437,
        9523
      ]
    },
    {
      "content": "If you haven't yet specified a server runtime environment in Eclipse, you'll need to do that first.",
      "pos": [
        9525,
        9624
      ]
    },
    {
      "pos": [
        9629,
        9672
      ],
      "content": "In Project Explorer, expand <bpt id=\"p1\">**</bpt>WebContent<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Right-click <bpt id=\"p1\">**</bpt>Search.jsp<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Run As<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Run on Server<ept id=\"p3\">**</ept>.",
      "pos": [
        9677,
        9737
      ]
    },
    {
      "content": "Select the Apache Tomcat server, and then click <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept>.",
      "pos": [
        9738,
        9794
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> If you used a non-default workspace to store your project, you'll need to modify <bpt id=\"p1\">**</bpt>Run Configuration<ept id=\"p1\">**</ept> to point to the project location to avoid a server start-up error.",
      "pos": [
        9798,
        9979
      ]
    },
    {
      "content": "In Project Explorer, right-click <bpt id=\"p1\">**</bpt>Search.jsp<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Run As<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Run Configurations<ept id=\"p3\">**</ept>.",
      "pos": [
        9980,
        10066
      ]
    },
    {
      "content": "Select the Apache Tomcat server.",
      "pos": [
        10067,
        10099
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Arguments<ept id=\"p1\">**</ept>.",
      "pos": [
        10100,
        10120
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Workspace<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>File System<ept id=\"p2\">**</ept> to set the folder containing the project.",
      "pos": [
        10121,
        10201
      ]
    },
    {
      "content": "When you run the application, you should see a browser window, providing a search box for entering terms.",
      "pos": [
        10203,
        10308
      ]
    },
    {
      "content": "Wait about one minute before clicking <bpt id=\"p1\">**</bpt>Search<ept id=\"p1\">**</ept> to give the service time to create and load the index.",
      "pos": [
        10310,
        10413
      ]
    },
    {
      "content": "If you get an HTTP 404 error, you just need to wait a little bit longer before trying again.",
      "pos": [
        10414,
        10506
      ]
    },
    {
      "content": "Search on USGS data",
      "pos": [
        10511,
        10530
      ]
    },
    {
      "content": "The USGS data set includes records that are relevant to the state of Rhode Island.",
      "pos": [
        10532,
        10614
      ]
    },
    {
      "content": "If you click <bpt id=\"p1\">**</bpt>Search<ept id=\"p1\">**</ept> on an empty search box, you will get the top 50 entries, which is the default.",
      "pos": [
        10615,
        10717
      ]
    },
    {
      "content": "Entering a search term will give the search engine something to go on.",
      "pos": [
        10719,
        10789
      ]
    },
    {
      "content": "Try entering a regional name.",
      "pos": [
        10790,
        10819
      ]
    },
    {
      "content": "\"Roger Williams\" was the first governor of Rhode Island.",
      "pos": [
        10820,
        10876
      ]
    },
    {
      "content": "Numerous parks, buildings, and schools are named after him.",
      "pos": [
        10877,
        10936
      ]
    },
    {
      "content": "![][11]",
      "pos": [
        10938,
        10945
      ]
    },
    {
      "content": "You could also try any of these terms:",
      "pos": [
        10947,
        10985
      ]
    },
    {
      "content": "Pawtucket",
      "pos": [
        10989,
        10998
      ]
    },
    {
      "content": "Pembroke",
      "pos": [
        11001,
        11009
      ]
    },
    {
      "content": "goose +cape",
      "pos": [
        11012,
        11023
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        11028,
        11038
      ]
    },
    {
      "content": "This is the first Azure Search tutorial based on Java and the USGS dataset.",
      "pos": [
        11040,
        11115
      ]
    },
    {
      "content": "Over time, we'll extend this tutorial to demonstrate additional search features you might want to use in your custom solutions.",
      "pos": [
        11116,
        11243
      ]
    },
    {
      "content": "If you already have some background in Azure Search, you can use this sample as a springboard for further experimentation, perhaps augmenting the <bpt id=\"p1\">[</bpt>search page<ept id=\"p1\">](search-pagination.md)</ept>, or implementing <bpt id=\"p2\">[</bpt>faceted navigation<ept id=\"p2\">](../search-faceted-navigation/)</ept>.",
      "pos": [
        11245,
        11496
      ]
    },
    {
      "content": "You can also improve upon the search results page by adding counts and batching documents so that users can page through the results.",
      "pos": [
        11497,
        11630
      ]
    },
    {
      "content": "New to Azure Search?",
      "pos": [
        11632,
        11652
      ]
    },
    {
      "content": "We recommend trying other tutorials to develop an understanding of what you can create.",
      "pos": [
        11653,
        11740
      ]
    },
    {
      "content": "Visit our <bpt id=\"p1\">[</bpt>documentation page<ept id=\"p1\">](http://azure.microsoft.com/documentation/services/search/)</ept> to find more resources.",
      "pos": [
        11741,
        11854
      ]
    },
    {
      "content": "You can also view the links in our <bpt id=\"p1\">[</bpt>Video and Tutorial list<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/dn798933.aspx)</ept> to access more information.",
      "pos": [
        11855,
        11999
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Get started with Azure Search in Java | Microsoft Azure\"\n    description=\"How to build a custom Azure Search application using Java as your programming language.\"\n    services=\"search\"\n    documentationCenter=\"\"\n    authors=\"HeidiSteen\"\n    manager=\"mblythe\"\n    editor=\"v-lincan\"/>\n\n<tags\n    ms.service=\"search\"\n    ms.devlang=\"na\"\n    ms.workload=\"search\"\n    ms.topic=\"hero-article\"\n    ms.tgt_pltfrm=\"na\"\n    ms.date=\"06/24/2015\"\n    ms.author=\"heidist\"/>\n\n# Get started with Azure Search in Java\n\nLearn how to build a custom Java search application that uses Azure Search for its search experience. This tutorial uses the [Azure Search Service REST API](https://msdn.microsoft.com/library/dn798935.aspx) to construct the objects and operations used in this exercise.\n\nWe used the following software to build and test this sample:\n\n- [Eclipse IDE for Java EE Developers](https://eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/lunar). Be sure to download the EE version. One of the verification steps requires a feature that is found only in this edition.\n\n- [JDK 8u40](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)\n\n- [Apache Tomcat 8.0](http://tomcat.apache.org/download-80.cgi)\n\nTo run this sample, you need an Azure Search service, which you can sign up for in the [Azure management portal](https://portal.azure.com).\n\n> [AZURE.TIP] Download the source code for this tutorial at [Azure Search Java demo](http://go.microsoft.com/fwlink/p/?LinkId=530197) on Github.\n\n## About the data\n\nThis sample application uses data from the [United States Geological Services (USGS)](http://geonames.usgs.gov/domestic/download_data.htm), filtered on the state of Rhode Island to reduce the dataset size. We'll use this data to build a search application that returns landmark buildings such as hospitals and schools, as well as geological features like streams, lakes, and summits.\n\nIn this application, the **SearchServlet.java** program builds and loads the index using an [Indexer](https://msdn.microsoft.com/library/azure/dn798918.aspx) construct, retrieving the filtered USGS dataset from a public Azure SQL Database. Predefined credentials and connection  information to the online data source are provided in the program code. In terms of data access, no further configuration is necessary.\n\n> [AZURE.NOTE] We applied a filter on this dataset to stay under the 10,000 document limit of the free pricing tier. If you use the standard tier, this limit does not apply, and you can modify this code to use a bigger dataset. For details about capacity for each pricing tier, see [Limits and constraints](https://msdn.microsoft.com/library/azure/dn798934.aspx).\n\n## About the program files\n\nThe following list describes the files that are relevant to this sample.\n\n- Search.jsp: Provides the user interface\n- SearchServlet.java: Provides methods (similar to a controller in MVC)\n- SearchServiceClient.java: Handles HTTP requests\n- SearchServiceHelper.java: A helper class that provides static methods\n- Document.java: Provides the data model\n- config.properties: Sets the Search service URL and api-key\n- Pom.xml: A Maven dependency\n\n\n## Create the service\n\n1. Sign in to the [Azure portal](https://portal.azure.com).\n\n2. In the Jumpbar, click **New** > **Data + storage** > **Search**.\n\n     ![][1]\n\n3. Configure the service name, pricing tier, resource group, subscription and location. These settings are required and cannot be changed once the service is provisioned.\n\n     ![][2]\n\n    - **Service name** must be unique, lower-case, under 15 characters, with no spaces. This name becomes part of the endpoint of your Azure Search service. See [Naming Rules](https://msdn.microsoft.com/library/azure/dn857353.aspx) for more information about naming conventions.\n\n    - **Pricing Tier** determines capacity and billing. Both tiers provide the same features, but at different resource levels.\n\n        - **Free**  runs on clusters that are shared with other subscribers. It offers enough capacity to try out tutorials and write proof-of-concept code, but is not intended for production applications. Deploying a free service typically only takes a few minutes.\n        - **Standard** runs on dedicated resources and is highly scalable. Initially, a standard service is provisioned with one replica and one partition, but you can adjust capacity once the service is created. Deploying a standard service takes longer, usually about fifteen minutes.\n\n    - **Resource Groups** are containers for services and resources used for a common purpose. For example, if you're building a custom search application based on Azure Search, Azure Websites, Azure BLOB storage, you can create a resource group that keeps these services together in the portal management pages.\n\n    - **Subscription** allows you to choose among multiple subscriptions, if you have more than one subscription.\n\n    - **Location** is the data center region. Currently, all resources must run in the same data center. Distributing resources across multiple data centers is not supported.\n\n4. Click **Create** to provision the service.\n\nWatch for notifications in the Jumpbar. A notice appears when the service is ready to use.\n\n<a id=\"sub-2\"></a>\n## Find the service name and api-key of your Azure Search service\n\nAfter the service is created, you can return to the portal to get the URL and `api-key`. Connections to your Search service require that you have both the URL and an `api-key` to authenticate the call.\n\n1. In the Jumpbar, click **Home** and then click the Search service to open the service dashboard.\n\n2. On the service dashboard, you'll see tiles for essential information as well as the key icon for accessing the admin keys.\n\n    ![][3]\n\n3. Copy the service URL and an admin key. You will need them later, when you add them to the **config.properties** file.\n\n## Download the sample files\n\n1. Go to [AzureSearchJavaDemo](http://go.microsoft.com/fwlink/p/?LinkId=530197) on Github.\n\n2. Click **Download ZIP**, save the .zip file to disk, and then extract all the files it contains. Consider extracting the files into your Java workspace to make it easier to find the project later.\n\n3. The sample files are read-only. Right-click folder properties and clear the read-only attribute.\n\nAll subsequent file modifications and run statements will be made against files in this folder.  \n\n## Import project\n\n1. In Eclipse, choose **File** > **Import** > **General** > **Existing Projects into Workspace**.\n\n    ![][4]\n\n2. In **Select root directory**, browse to the folder containing sample files. Select the folder that contains the .project folder. The project should appear in the **Projects** list as a selected item.\n\n    ![][12]\n\n3. Click **Finish**.\n\n4. Use **Project Explorer** to view and edit the files. If it's not already open, click **Window** > **Show View** > **Project Explorer** or use the shortcut to open it.\n\n## Configure the service URL and api-key\n\n1. In **Project Explorer**, double-click **config.properties** to edit the configuration settings containing the server name and api-key.\n\n2. Refer to the steps earlier in this article, where you found the service URL and api-key in the [Azure portal](https://portal.azure.com), to get the values you will now enter into **config.properties**.\n\n3. In **config.properties**, replace \"Api Key\" with the api-key for your service. Next, service name (the first component of the URL http://servicename.search.windows.net) replaces \"service name\" in the same file.\n\n    ![][5]\n\n## Configure the project, build and runtime environments\n\n1. In Eclipse, in Project Explorer, right-click the project > **Properties** > **Project Facets**.\n\n2. Select **Dynamic Web Module**, **Java**, and **JavaScript**.\n\n    ![][6]\n\n3. Click **Apply**.\n\n4. Select **Window** > **Preferences** > **Server** > **Runtime Environments** > **Add..**.\n\n5. Expand Apache and select the version of the Apache Tomcat server you previously installed. On our system, we installed version 8.\n\n    ![][7]\n\n6. On the next page, specify the Tomcat installation directory. On a Windows computer, this will most likely be C:\\Program Files\\Apache Software Foundation\\Tomcat *version*.\n\n6. Click **Finish**.\n\n7. Select **Window** > **Preferences** > **Java** > **Installed JREs** > **Add**.\n\n8. In **Add JRE**, select **Standard VM**.\n\n10. Click **Next**.\n\n11. In JRE Definition, in JRE home, click **Directory**.\n\n12. Navigate to **Program Files** > **Java** and select the JDK you previously installed. It's important to select the JDK as the JRE.\n\n13. In Installed JREs, choose the **JDK**. Your settings should look similar to the following screenshot.\n\n    ![][9]\n\n14. Optionally, select **Window** > **Web Browser** > **Internet Explorer** to open the application in an external browser window. Using an external browser gives you a better Web application experience.\n\n    ![][8]\n\nYou have now completed the configuration tasks. Next, you'll build and run the project.\n\n## Build the project\n\n1. In Project Explorer, right-click the project name and choose **Run As** > **Maven build...** to configure the project.\n\n    ![][10]\n\n8. In Edit Configuration, in Goals, type \"clean install\", and then click **Run**.\n\nStatus messages are output to the console window. You should see BUILD SUCCESS indicating the project built without errors.\n\n## Run the app\n\nIn this last step, you will run the application in a local server runtime environment.\n\nIf you haven't yet specified a server runtime environment in Eclipse, you'll need to do that first.\n\n1. In Project Explorer, expand **WebContent**.\n\n5. Right-click **Search.jsp** > **Run As** > **Run on Server**. Select the Apache Tomcat server, and then click **Run**.\n\n> [AZURE.TIP] If you used a non-default workspace to store your project, you'll need to modify **Run Configuration** to point to the project location to avoid a server start-up error. In Project Explorer, right-click **Search.jsp** > **Run As** > **Run Configurations**. Select the Apache Tomcat server. Click **Arguments**. Click **Workspace** or **File System** to set the folder containing the project.\n\nWhen you run the application, you should see a browser window, providing a search box for entering terms.\n\nWait about one minute before clicking **Search** to give the service time to create and load the index. If you get an HTTP 404 error, you just need to wait a little bit longer before trying again.\n\n## Search on USGS data\n\nThe USGS data set includes records that are relevant to the state of Rhode Island. If you click **Search** on an empty search box, you will get the top 50 entries, which is the default.\n\nEntering a search term will give the search engine something to go on. Try entering a regional name. \"Roger Williams\" was the first governor of Rhode Island. Numerous parks, buildings, and schools are named after him.\n\n![][11]\n\nYou could also try any of these terms:\n\n- Pawtucket\n- Pembroke\n- goose +cape\n\n## Next steps\n\nThis is the first Azure Search tutorial based on Java and the USGS dataset. Over time, we'll extend this tutorial to demonstrate additional search features you might want to use in your custom solutions.\n\nIf you already have some background in Azure Search, you can use this sample as a springboard for further experimentation, perhaps augmenting the [search page](search-pagination.md), or implementing [faceted navigation](../search-faceted-navigation/). You can also improve upon the search results page by adding counts and batching documents so that users can page through the results.\n\nNew to Azure Search? We recommend trying other tutorials to develop an understanding of what you can create. Visit our [documentation page](http://azure.microsoft.com/documentation/services/search/) to find more resources. You can also view the links in our [Video and Tutorial list](https://msdn.microsoft.com/library/azure/dn798933.aspx) to access more information.\n\n<!--Image references-->\n[1]: ./media/search-get-started-java/create-search-portal-1.PNG\n[2]: ./media/search-get-started-java/create-search-portal-21.PNG\n[3]: ./media/search-get-started-java/create-search-portal-31.PNG\n[4]: ./media/search-get-started-java/AzSearch-Java-Import1.PNG\n[5]: ./media/search-get-started-java/AzSearch-Java-config1.PNG\n[6]: ./media/search-get-started-java/AzSearch-Java-ProjectFacets1.PNG\n[7]: ./media/search-get-started-java/AzSearch-Java-runtime1.PNG\n[8]: ./media/search-get-started-java/AzSearch-Java-Browser1.PNG\n[9]: ./media/search-get-started-java/AzSearch-Java-JREPref1.PNG\n[10]: ./media/search-get-started-java/AzSearch-Java-BuildProject1.PNG\n[11]: ./media/search-get-started-java/rogerwilliamsschool1.PNG\n[12]: ./media/search-get-started-java/AzSearch-Java-SelectProject.png\n"
}