{
  "nodes": [
    {
      "content": "Authoring Azure Resource Manager Templates",
      "pos": [
        26,
        68
      ]
    },
    {
      "content": "Create Azure Resource Manager templates using declarative JSON syntax to deploy applications to Azure.",
      "pos": [
        86,
        188
      ]
    },
    {
      "content": "Authoring Azure Resource Manager templates",
      "pos": [
        495,
        537
      ]
    },
    {
      "content": "Azure applications typically require a combination of resources (such as a database server, database, or website) to meet the desired goals.",
      "pos": [
        539,
        679
      ]
    },
    {
      "content": "Rather than deploying and managing each resource separately, you can create an Azure Resource Manager template that deploys and provisions all of the resources for your application in a single, coordinated operation.",
      "pos": [
        680,
        896
      ]
    },
    {
      "content": "In the template, you define the resources that are needed for the application and specify deployment parameters to input values for different environments.",
      "pos": [
        897,
        1052
      ]
    },
    {
      "content": "The template consists of JSON and expressions which you can use to construct values for your deployment.",
      "pos": [
        1053,
        1157
      ]
    },
    {
      "content": "This topic describes the sections of the template.",
      "pos": [
        1159,
        1209
      ]
    },
    {
      "content": "For the actual schemas, see <bpt id=\"p1\">[</bpt>Azure Resource Manager Schemas<ept id=\"p1\">](https://github.com/Azure/azure-resource-manager-schemas)</ept>.",
      "pos": [
        1210,
        1328
      ]
    },
    {
      "content": "You must limit the size your template to 1 MB, and each parameter file to 64 KB.",
      "pos": [
        1330,
        1410
      ]
    },
    {
      "content": "The 1 MB limit applies to the final state of the template after it has been expanded with iterative resource definitions, and values for variables and parameters.",
      "pos": [
        1411,
        1573
      ]
    },
    {
      "content": "Template format",
      "pos": [
        1579,
        1594
      ]
    },
    {
      "content": "The following example shows the sections that make up the basic structure of a template.",
      "pos": [
        1596,
        1684
      ]
    },
    {
      "content": "Element name",
      "pos": [
        1932,
        1944
      ]
    },
    {
      "content": "Required",
      "pos": [
        1949,
        1957
      ]
    },
    {
      "content": "Description",
      "pos": [
        1960,
        1971
      ]
    },
    {
      "content": "$schema",
      "pos": [
        2016,
        2023
      ]
    },
    {
      "content": "Yes",
      "pos": [
        2035,
        2038
      ]
    },
    {
      "content": "Location of the JSON schema file that describes the version of the template language.",
      "pos": [
        2044,
        2129
      ]
    },
    {
      "content": "contentVersion",
      "pos": [
        2132,
        2146
      ]
    },
    {
      "content": "Yes",
      "pos": [
        2151,
        2154
      ]
    },
    {
      "content": "Version of the template (such as 1.0.0.0).",
      "pos": [
        2160,
        2202
      ]
    },
    {
      "content": "When deploying resources using the template, this value can be used to make sure that the right template is being used.",
      "pos": [
        2203,
        2322
      ]
    },
    {
      "content": "parameters",
      "pos": [
        2325,
        2335
      ]
    },
    {
      "content": "No",
      "pos": [
        2344,
        2346
      ]
    },
    {
      "content": "Values that are provided when deployment is executed to customize resource deployment.",
      "pos": [
        2353,
        2439
      ]
    },
    {
      "content": "variables",
      "pos": [
        2442,
        2451
      ]
    },
    {
      "content": "No",
      "pos": [
        2461,
        2463
      ]
    },
    {
      "content": "Values that are used as JSON fragments in the template to simplify template language expressions.",
      "pos": [
        2470,
        2567
      ]
    },
    {
      "content": "resources",
      "pos": [
        2570,
        2579
      ]
    },
    {
      "content": "Yes",
      "pos": [
        2589,
        2592
      ]
    },
    {
      "content": "Types of services that are deployed or updated in a resource group.",
      "pos": [
        2598,
        2665
      ]
    },
    {
      "content": "outputs",
      "pos": [
        2668,
        2675
      ]
    },
    {
      "content": "No",
      "pos": [
        2687,
        2689
      ]
    },
    {
      "content": "Values that are returned after deployment.",
      "pos": [
        2696,
        2738
      ]
    },
    {
      "content": "We will examine the sections of the template in greater detail later in this topic.",
      "pos": [
        2740,
        2823
      ]
    },
    {
      "content": "For now, we will review some of the syntax that makes up the template.",
      "pos": [
        2824,
        2894
      ]
    },
    {
      "content": "Expressions and functions",
      "pos": [
        2899,
        2924
      ]
    },
    {
      "content": "The basic syntax of the template is JSON; however, expressions and functions extend the JSON that is available in the template and enable you to create values that are not strict literal values.",
      "pos": [
        2926,
        3120
      ]
    },
    {
      "content": "Expressions are enclosed with brackets ([ and ]), and are evaluated when the template is deployed.",
      "pos": [
        3121,
        3219
      ]
    },
    {
      "content": "Expressions can appear anywhere in a JSON string value and always return another JSON value.",
      "pos": [
        3220,
        3312
      ]
    },
    {
      "content": "If you need to use a literal string that starts with a bracket [, you must use two brackets [[.",
      "pos": [
        3313,
        3408
      ]
    },
    {
      "content": "Typically, you use expressions with functions to perform operations for configuring the deployment.",
      "pos": [
        3410,
        3509
      ]
    },
    {
      "content": "Just like in JavaScript, function calls are formatted as <bpt id=\"p1\">**</bpt>functionName(arg1,arg2,arg3)<ept id=\"p1\">**</ept>.",
      "pos": [
        3510,
        3600
      ]
    },
    {
      "content": "You reference properties by using the dot and [index] operators.",
      "pos": [
        3601,
        3665
      ]
    },
    {
      "content": "The following list shows common functions.",
      "pos": [
        3667,
        3709
      ]
    },
    {
      "content": "parameters(parameterName)",
      "pos": [
        3715,
        3740
      ]
    },
    {
      "content": "Returns a parameter value that is provided when the deployment is executed.",
      "pos": [
        3748,
        3823
      ]
    },
    {
      "content": "variables(variableName)",
      "pos": [
        3829,
        3852
      ]
    },
    {
      "content": "Returns a variable that is defined in the template.",
      "pos": [
        3860,
        3911
      ]
    },
    {
      "content": "concat(arg1,arg2,arg3,...)",
      "pos": [
        3917,
        3943
      ]
    },
    {
      "content": "Combines multiple string values.",
      "pos": [
        3951,
        3983
      ]
    },
    {
      "content": "This function can take any number of arguments.",
      "pos": [
        3984,
        4031
      ]
    },
    {
      "content": "base64(inputString)",
      "pos": [
        4037,
        4056
      ]
    },
    {
      "content": "Returns the base64 representation of the input string.",
      "pos": [
        4064,
        4118
      ]
    },
    {
      "content": "resourceGroup()",
      "pos": [
        4124,
        4139
      ]
    },
    {
      "content": "Returns a structured object (with id, name, and location properties) that represents the current resource group.",
      "pos": [
        4147,
        4259
      ]
    },
    {
      "content": "resourceId([resourceGroupName], resourceType, resourceName1, [resourceName2]...)",
      "pos": [
        4265,
        4345
      ]
    },
    {
      "content": "Returns the unique identifier of a resource.",
      "pos": [
        4353,
        4397
      ]
    },
    {
      "content": "Can be used to retrieve resource from another resource group.",
      "pos": [
        4398,
        4459
      ]
    },
    {
      "content": "The following example shows how to use several of the functions when constructing values:",
      "pos": [
        4461,
        4550
      ]
    },
    {
      "content": "For now, you know enough about expressions and functions to understand the sections of the template.",
      "pos": [
        4817,
        4917
      ]
    },
    {
      "content": "For more detailed information about all of the template functions, including parameters and the format of returned values,",
      "pos": [
        4918,
        5040
      ]
    },
    {
      "content": "see <bpt id=\"p1\">[</bpt>Azure Resource Manager template functions<ept id=\"p1\">](./resource-group-template-functions.md)</ept>.",
      "pos": [
        5042,
        5130
      ]
    },
    {
      "content": "Parameters",
      "pos": [
        5137,
        5147
      ]
    },
    {
      "content": "In the parameters section of the template, you specify which values a user can input when deploying the resources.",
      "pos": [
        5149,
        5263
      ]
    },
    {
      "content": "You can use these parameter values throughout the template to set values for the deployed resources.",
      "pos": [
        5264,
        5364
      ]
    },
    {
      "content": "Only parameters that are declared in the parameters section can be used in other sections of the template.",
      "pos": [
        5365,
        5471
      ]
    },
    {
      "content": "Within parameters section, you cannot use a parameter value to construct another parameter value.",
      "pos": [
        5473,
        5570
      ]
    },
    {
      "content": "That type of operation typically happens in the variables section.",
      "pos": [
        5571,
        5637
      ]
    },
    {
      "content": "You define parameters with the following structure:",
      "pos": [
        5639,
        5690
      ]
    },
    {
      "content": "Element name",
      "pos": [
        5939,
        5951
      ]
    },
    {
      "content": "Required",
      "pos": [
        5956,
        5964
      ]
    },
    {
      "content": "Description",
      "pos": [
        5967,
        5978
      ]
    },
    {
      "content": "parameterName",
      "pos": [
        6023,
        6036
      ]
    },
    {
      "content": "Yes",
      "pos": [
        6042,
        6045
      ]
    },
    {
      "content": "Name of the parameter.",
      "pos": [
        6051,
        6073
      ]
    },
    {
      "content": "Must be a valid JavaScript identifier.",
      "pos": [
        6074,
        6112
      ]
    },
    {
      "content": "type",
      "pos": [
        6115,
        6119
      ]
    },
    {
      "content": "Yes",
      "pos": [
        6134,
        6137
      ]
    },
    {
      "content": "Type of the parameter value.",
      "pos": [
        6143,
        6171
      ]
    },
    {
      "content": "See the list below of allowed types.",
      "pos": [
        6172,
        6208
      ]
    },
    {
      "content": "defaultValue",
      "pos": [
        6211,
        6223
      ]
    },
    {
      "content": "No",
      "pos": [
        6230,
        6232
      ]
    },
    {
      "content": "Default value for the parameter, if no value is provided for the parameter.",
      "pos": [
        6239,
        6314
      ]
    },
    {
      "content": "allowedValues",
      "pos": [
        6317,
        6330
      ]
    },
    {
      "content": "No",
      "pos": [
        6336,
        6338
      ]
    },
    {
      "content": "Array of allowed values for the parameter to make sure that the right value is provided.",
      "pos": [
        6345,
        6433
      ]
    },
    {
      "content": "The allowed types and values are:",
      "pos": [
        6435,
        6468
      ]
    },
    {
      "content": "string or secureString - any valid JSON string",
      "pos": [
        6472,
        6518
      ]
    },
    {
      "content": "int - any valid JSON integer",
      "pos": [
        6521,
        6549
      ]
    },
    {
      "content": "bool - any valid JSON boolean",
      "pos": [
        6552,
        6581
      ]
    },
    {
      "content": "object or secureObject - any valid JSON object",
      "pos": [
        6584,
        6630
      ]
    },
    {
      "content": "array - any valid JSON array",
      "pos": [
        6633,
        6661
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> All passwords, keys, and other secrets should use the <bpt id=\"p1\">**</bpt>secureString<ept id=\"p1\">**</ept> type.",
      "pos": [
        6665,
        6754
      ]
    },
    {
      "content": "Template parameters with the secureString type cannot be read after resource deployment.",
      "pos": [
        6755,
        6843
      ]
    },
    {
      "content": "The following example shows how to define parameters:",
      "pos": [
        6846,
        6899
      ]
    },
    {
      "content": "Variables",
      "pos": [
        7366,
        7375
      ]
    },
    {
      "content": "In the variables section, you construct values that can be used to simplify template language expressions.",
      "pos": [
        7377,
        7483
      ]
    },
    {
      "content": "Typically, these variables will be based on values provided from the parameters.",
      "pos": [
        7484,
        7564
      ]
    },
    {
      "content": "The following example shows how to define a variable that is constructed from two parameter values:",
      "pos": [
        7566,
        7665
      ]
    },
    {
      "content": "The next example shows a variable that is a complex JSON type, and variables that are constructed from other variables:",
      "pos": [
        7950,
        8069
      ]
    },
    {
      "content": "Resources",
      "pos": [
        8777,
        8786
      ]
    },
    {
      "content": "In the resources section, you define the resources are deployed or updated.",
      "pos": [
        8788,
        8863
      ]
    },
    {
      "content": "You define resources with the following structure:",
      "pos": [
        8865,
        8915
      ]
    },
    {
      "content": "Element name",
      "pos": [
        9450,
        9462
      ]
    },
    {
      "content": "Required",
      "pos": [
        9477,
        9485
      ]
    },
    {
      "content": "Description",
      "pos": [
        9488,
        9499
      ]
    },
    {
      "content": "apiVersion",
      "pos": [
        9554,
        9564
      ]
    },
    {
      "content": "Yes",
      "pos": [
        9583,
        9586
      ]
    },
    {
      "content": "Version of the API that supports the resource.",
      "pos": [
        9592,
        9638
      ]
    },
    {
      "content": "For the available versions and schemas for resources, see <bpt id=\"p1\">[</bpt>Azure Resource Manager Schemas<ept id=\"p1\">](https://github.com/Azure/azure-resource-manager-schemas)</ept>.",
      "pos": [
        9639,
        9787
      ]
    },
    {
      "content": "type",
      "pos": [
        9790,
        9794
      ]
    },
    {
      "content": "Yes",
      "pos": [
        9819,
        9822
      ]
    },
    {
      "content": "Type of the resource.",
      "pos": [
        9828,
        9849
      ]
    },
    {
      "content": "This value is a combination of the namespace of the resource provider and the resource type that the resource provider supports.",
      "pos": [
        9850,
        9978
      ]
    },
    {
      "content": "name",
      "pos": [
        9981,
        9985
      ]
    },
    {
      "content": "Yes",
      "pos": [
        10010,
        10013
      ]
    },
    {
      "content": "Name of the resource.",
      "pos": [
        10019,
        10040
      ]
    },
    {
      "content": "The name must follow URI component restrictions defined in RFC3986.",
      "pos": [
        10041,
        10108
      ]
    },
    {
      "content": "location",
      "pos": [
        10111,
        10119
      ]
    },
    {
      "content": "No",
      "pos": [
        10140,
        10142
      ]
    },
    {
      "content": "Supported geo-locations of the provided resource.",
      "pos": [
        10149,
        10198
      ]
    },
    {
      "content": "tags",
      "pos": [
        10201,
        10205
      ]
    },
    {
      "content": "No",
      "pos": [
        10230,
        10232
      ]
    },
    {
      "content": "Tags that are associated with the resource.",
      "pos": [
        10239,
        10282
      ]
    },
    {
      "content": "dependsOn",
      "pos": [
        10285,
        10294
      ]
    },
    {
      "content": "No",
      "pos": [
        10314,
        10316
      ]
    },
    {
      "content": "Resources that the resource being defined depends on.",
      "pos": [
        10323,
        10376
      ]
    },
    {
      "content": "The dependencies between resources are evaluated and resources are deployed in their dependent order.",
      "pos": [
        10377,
        10478
      ]
    },
    {
      "content": "When resources are not dependent on each other, they are attempted to be deployed in parallel.",
      "pos": [
        10479,
        10573
      ]
    },
    {
      "content": "The value can be a comma separated list of a resource names or resource unique identifiers.",
      "pos": [
        10574,
        10665
      ]
    },
    {
      "content": "properties",
      "pos": [
        10668,
        10678
      ]
    },
    {
      "content": "No",
      "pos": [
        10697,
        10699
      ]
    },
    {
      "content": "Resource specific configuration settings.",
      "pos": [
        10706,
        10747
      ]
    },
    {
      "content": "resources",
      "pos": [
        10750,
        10759
      ]
    },
    {
      "content": "No",
      "pos": [
        10779,
        10781
      ]
    },
    {
      "content": "Child resources that depend on the resource being defined.",
      "pos": [
        10788,
        10846
      ]
    },
    {
      "pos": [
        10848,
        10995
      ],
      "content": "If the resource name is not unique, you can use the <bpt id=\"p1\">**</bpt>resourceId<ept id=\"p1\">**</ept> helper function (described below) to get the unique identifier for any resource."
    },
    {
      "pos": [
        10997,
        11143
      ],
      "content": "The following example shows a <bpt id=\"p1\">**</bpt>Microsoft.Web/serverfarms<ept id=\"p1\">**</ept> resource and a <bpt id=\"p2\">**</bpt>Microsoft.Web/sites<ept id=\"p2\">**</ept> resource with a nested <bpt id=\"p3\">**</bpt>Extensions<ept id=\"p3\">**</ept> resource:"
    },
    {
      "content": "Outputs",
      "pos": [
        12752,
        12759
      ]
    },
    {
      "content": "In the Outputs section, you specify values that are returned from deployment.",
      "pos": [
        12761,
        12838
      ]
    },
    {
      "content": "For example, you could return the URI to access a deployed resource.",
      "pos": [
        12839,
        12907
      ]
    },
    {
      "content": "The following example shows the structure of an output definition:",
      "pos": [
        12909,
        12975
      ]
    },
    {
      "content": "Element name",
      "pos": [
        13129,
        13141
      ]
    },
    {
      "content": "Required",
      "pos": [
        13146,
        13154
      ]
    },
    {
      "content": "Description",
      "pos": [
        13157,
        13168
      ]
    },
    {
      "content": "outputName",
      "pos": [
        13213,
        13223
      ]
    },
    {
      "content": "Yes",
      "pos": [
        13232,
        13235
      ]
    },
    {
      "content": "Name of the output value.",
      "pos": [
        13241,
        13266
      ]
    },
    {
      "content": "Must be a valid JavaScript identifier.",
      "pos": [
        13267,
        13305
      ]
    },
    {
      "content": "type",
      "pos": [
        13308,
        13312
      ]
    },
    {
      "content": "Yes",
      "pos": [
        13327,
        13330
      ]
    },
    {
      "content": "Type of the output value.",
      "pos": [
        13336,
        13361
      ]
    },
    {
      "content": "Output values support the same types as template input parameters.",
      "pos": [
        13362,
        13428
      ]
    },
    {
      "content": "value",
      "pos": [
        13431,
        13436
      ]
    },
    {
      "content": "Yes",
      "pos": [
        13450,
        13453
      ]
    },
    {
      "content": "Template language expression which will be evaluated and returned as output value.",
      "pos": [
        13459,
        13541
      ]
    },
    {
      "content": "The following example shows a value that is returned in the Outputs section.",
      "pos": [
        13544,
        13620
      ]
    },
    {
      "content": "More advanced scenarios.",
      "pos": [
        13829,
        13853
      ]
    },
    {
      "content": "This topic provides an introductory look at the template.",
      "pos": [
        13854,
        13911
      ]
    },
    {
      "content": "However, your scenario may require more advanced tasks.",
      "pos": [
        13912,
        13967
      ]
    },
    {
      "content": "You may need to merge two templates together or use a child template within a parent template.",
      "pos": [
        13969,
        14063
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Using linked templates with Azure Resource Manager<ept id=\"p1\">](resource-group-linked-templates.md)</ept>.",
      "pos": [
        14064,
        14179
      ]
    },
    {
      "pos": [
        14181,
        14360
      ],
      "content": "To iterate a specified number of times when creating a type of resource, see <bpt id=\"p1\">[</bpt>Create multiple instances of resources in Azure Resource Manager<ept id=\"p1\">](resource-group-create-multiple.md)</ept>."
    },
    {
      "content": "You may need to use resources that exist within a different resource group.",
      "pos": [
        14362,
        14437
      ]
    },
    {
      "content": "This is common when working with storage accounts or virtual networks that are shared across multiple resource groups.",
      "pos": [
        14438,
        14556
      ]
    },
    {
      "content": "For more information, see the <bpt id=\"p1\">[</bpt>resourceId function<ept id=\"p1\">](../resource-group-template-functions#resourceid)</ept>.",
      "pos": [
        14557,
        14658
      ]
    },
    {
      "content": "Complete template",
      "pos": [
        14663,
        14680
      ]
    },
    {
      "content": "The following template deploys a web app and provisions it with code from a .zip file.",
      "pos": [
        14681,
        14767
      ]
    },
    {
      "content": "Next Steps",
      "pos": [
        17278,
        17288
      ]
    },
    {
      "pos": [
        17291,
        17444
      ],
      "content": "For details about the functions you can use from within a template, see <bpt id=\"p1\">[</bpt>Azure Resource Manager Template Functions<ept id=\"p1\">](resource-group-template-functions.md)</ept>"
    },
    {
      "pos": [
        17447,
        17611
      ],
      "content": "To see how to deploy the template you have created, see <bpt id=\"p1\">[</bpt>Deploy an application with Azure Resource Manager Template<ept id=\"p1\">](azure-portal/resource-group-template-deploy.md)</ept>"
    },
    {
      "pos": [
        17614,
        17799
      ],
      "content": "For an in-depth example of deploying an application, see <bpt id=\"p1\">[</bpt>Provision and deploy microservices predictably in Azure<ept id=\"p1\">](app-service-web/app-service-deploy-complex-application-predictably.md)</ept>"
    },
    {
      "pos": [
        17802,
        17925
      ],
      "content": "To see the available schemas, see <bpt id=\"p1\">[</bpt>Azure Resource Manager Schemas<ept id=\"p1\">](https://github.com/Azure/azure-resource-manager-schemas)</ept>"
    },
    {
      "content": "test",
      "pos": [
        17927,
        17931
      ]
    }
  ],
  "content": "<properties\n   pageTitle=\"Authoring Azure Resource Manager Templates\"\n   description=\"Create Azure Resource Manager templates using declarative JSON syntax to deploy applications to Azure.\"\n   services=\"azure-resource-manager\"\n   documentationCenter=\"na\"\n   authors=\"tfitzmac\"\n   manager=\"wpickett\"\n   editor=\"\"/>\n\n<tags\n   ms.service=\"azure-resource-manager\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"na\"\n   ms.date=\"08/20/2015\"\n   ms.author=\"tomfitz\"/>\n\n# Authoring Azure Resource Manager templates\n\nAzure applications typically require a combination of resources (such as a database server, database, or website) to meet the desired goals. Rather than deploying and managing each resource separately, you can create an Azure Resource Manager template that deploys and provisions all of the resources for your application in a single, coordinated operation. In the template, you define the resources that are needed for the application and specify deployment parameters to input values for different environments. The template consists of JSON and expressions which you can use to construct values for your deployment.\n\nThis topic describes the sections of the template. For the actual schemas, see [Azure Resource Manager Schemas](https://github.com/Azure/azure-resource-manager-schemas).\n\nYou must limit the size your template to 1 MB, and each parameter file to 64 KB. The 1 MB limit applies to the final state of the template after it has been expanded with iterative resource definitions, and values for variables and parameters. \n\n## Template format\n\nThe following example shows the sections that make up the basic structure of a template.\n\n    {\n       \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n       \"contentVersion\": \"\",\n       \"parameters\": {  },\n       \"variables\": {  },\n       \"resources\": [  ],\n       \"outputs\": {  }\n    }\n\n| Element name   | Required | Description\n| :------------: | :------: | :----------\n| $schema        |   Yes    | Location of the JSON schema file that describes the version of the template language.\n| contentVersion |   Yes    | Version of the template (such as 1.0.0.0). When deploying resources using the template, this value can be used to make sure that the right template is being used.\n| parameters     |   No     | Values that are provided when deployment is executed to customize resource deployment.\n| variables      |   No     | Values that are used as JSON fragments in the template to simplify template language expressions.\n| resources      |   Yes    | Types of services that are deployed or updated in a resource group.\n| outputs        |   No     | Values that are returned after deployment.\n\nWe will examine the sections of the template in greater detail later in this topic. For now, we will review some of the syntax that makes up the template.\n\n## Expressions and functions\n\nThe basic syntax of the template is JSON; however, expressions and functions extend the JSON that is available in the template and enable you to create values that are not strict literal values. Expressions are enclosed with brackets ([ and ]), and are evaluated when the template is deployed. Expressions can appear anywhere in a JSON string value and always return another JSON value. If you need to use a literal string that starts with a bracket [, you must use two brackets [[.\n\nTypically, you use expressions with functions to perform operations for configuring the deployment. Just like in JavaScript, function calls are formatted as **functionName(arg1,arg2,arg3)**. You reference properties by using the dot and [index] operators.\n\nThe following list shows common functions.\n\n- **parameters(parameterName)**\n\n    Returns a parameter value that is provided when the deployment is executed.\n\n- **variables(variableName)**\n\n    Returns a variable that is defined in the template.\n\n- **concat(arg1,arg2,arg3,...)**\n\n    Combines multiple string values. This function can take any number of arguments.\n\n- **base64(inputString)**\n\n    Returns the base64 representation of the input string.\n\n- **resourceGroup()**\n\n    Returns a structured object (with id, name, and location properties) that represents the current resource group.\n\n- **resourceId([resourceGroupName], resourceType, resourceName1, [resourceName2]...)**\n\n    Returns the unique identifier of a resource. Can be used to retrieve resource from another resource group.\n\nThe following example shows how to use several of the functions when constructing values:\n \n    \"variables\": {\n       \"location\": \"[resourceGroup().location]\",\n       \"usernameAndPassword\": \"[concat('parameters('username'), ':', parameters('password'))]\",\n       \"authorizationHeader\": \"[concat('Basic ', base64(variables('usernameAndPassword')))]\"\n    }\n\nFor now, you know enough about expressions and functions to understand the sections of the template. For more detailed information about all of the template functions, including parameters and the format of returned values, \nsee [Azure Resource Manager template functions](./resource-group-template-functions.md). \n\n\n## Parameters\n\nIn the parameters section of the template, you specify which values a user can input when deploying the resources. You can use these parameter values throughout the template to set values for the deployed resources. Only parameters that are declared in the parameters section can be used in other sections of the template.\n\nWithin parameters section, you cannot use a parameter value to construct another parameter value. That type of operation typically happens in the variables section.\n\nYou define parameters with the following structure:\n\n    \"parameters\": {\n       \"<parameterName>\" : {\n         \"type\" : \"<type-of-parameter-value>\",\n         \"defaultValue\": \"<optional-default-value-of-parameter>\",\n         \"allowedValues\": [ \"<optional-array-of-allowed-values>\" ]\n       }\n    }\n\n| Element name   | Required | Description\n| :------------: | :------: | :----------\n| parameterName  |   Yes    | Name of the parameter. Must be a valid JavaScript identifier.\n| type           |   Yes    | Type of the parameter value. See the list below of allowed types.\n| defaultValue   |   No     | Default value for the parameter, if no value is provided for the parameter.\n| allowedValues  |   No     | Array of allowed values for the parameter to make sure that the right value is provided.\n\nThe allowed types and values are:\n\n- string or secureString - any valid JSON string\n- int - any valid JSON integer\n- bool - any valid JSON boolean\n- object or secureObject - any valid JSON object\n- array - any valid JSON array\n\n\n>[AZURE.NOTE] All passwords, keys, and other secrets should use the **secureString** type. Template parameters with the secureString type cannot be read after resource deployment. \n\nThe following example shows how to define parameters:\n\n    \"parameters\": {\n       \"siteName\": {\n          \"type\": \"string\"\n       },\n       \"siteLocation\": {\n          \"type\": \"string\"\n       },\n       \"hostingPlanName\": {\n          \"type\": \"string\"\n       },  \n       \"hostingPlanSku\": {\n          \"type\": \"string\",\n          \"allowedValues\": [\n            \"Free\",\n            \"Shared\",\n            \"Basic\",\n            \"Standard\",\n            \"Premium\"\n          ],\n          \"defaultValue\": \"Free\"\n       }\n    }\n\n## Variables\n\nIn the variables section, you construct values that can be used to simplify template language expressions. Typically, these variables will be based on values provided from the parameters.\n\nThe following example shows how to define a variable that is constructed from two parameter values:\n\n    \"parameters\": {\n       \"username\": {\n         \"type\": \"string\"\n       },\n       \"password\": {\n         \"type\": \"secureString\"\n       }\n     },\n     \"variables\": {\n       \"connectionString\": \"[concat('Name=', parameters('username'), ';Password=', parameters('password'))]\"\n    }\n\nThe next example shows a variable that is a complex JSON type, and variables that are constructed from other variables:\n\n    \"parameters\": {\n       \"environmentName\": {\n         \"type\": \"string\",\n         \"allowedValues\": [\n           \"test\",\n           \"prod\"\n         ]\n       }\n    },\n    \"variables\": {\n       \"environmentSettings\": {\n         \"test\": {\n           \"instancesSize\": \"Small\",\n           \"instancesCount\": 1\n         },\n         \"prod\": {\n           \"instancesSize\": \"Large\",\n           \"instancesCount\": 4\n         }\n       },\n       \"currentEnvironmentSettings\": \"[variables('environmentSettings')[parameters('environmentName')]]\",\n       \"instancesSize\": \"[variables('currentEnvironmentSettings').instancesSize\",\n       \"instancesCount\": \"[variables('currentEnvironmentSettings').instancesCount\"\n    }\n\n## Resources\n\nIn the resources section, you define the resources are deployed or updated.\n\nYou define resources with the following structure:\n\n    \"resources\": [\n       {\n         \"apiVersion\": \"<api-version-of-resource>\",\n         \"type\": \"<resource-provider-namespace/resource-type-name>\",\n         \"name\": \"<name-of-the-resource>\",\n         \"location\": \"<location-of-resource>\",\n         \"tags\": \"<name-value-pairs-for-resource-tagging>\",\n         \"dependsOn\": [\n           \"<array-of-related-resource-names>\"\n         ],\n         \"properties\": \"<settings-for-the-resource>\",\n         \"resources\": [\n           \"<array-of-dependent-resources>\"\n         ]\n       }\n    ]\n\n| Element name             | Required | Description\n| :----------------------: | :------: | :----------\n| apiVersion               |   Yes    | Version of the API that supports the resource. For the available versions and schemas for resources, see [Azure Resource Manager Schemas](https://github.com/Azure/azure-resource-manager-schemas).\n| type                     |   Yes    | Type of the resource. This value is a combination of the namespace of the resource provider and the resource type that the resource provider supports.\n| name                     |   Yes    | Name of the resource. The name must follow URI component restrictions defined in RFC3986.\n| location                 |   No     | Supported geo-locations of the provided resource.\n| tags                     |   No     | Tags that are associated with the resource.\n| dependsOn                |   No     | Resources that the resource being defined depends on. The dependencies between resources are evaluated and resources are deployed in their dependent order. When resources are not dependent on each other, they are attempted to be deployed in parallel. The value can be a comma separated list of a resource names or resource unique identifiers.\n| properties               |   No     | Resource specific configuration settings.\n| resources                |   No     | Child resources that depend on the resource being defined.\n\nIf the resource name is not unique, you can use the **resourceId** helper function (described below) to get the unique identifier for any resource.\n\nThe following example shows a **Microsoft.Web/serverfarms** resource and a **Microsoft.Web/sites** resource with a nested **Extensions** resource:\n\n    \"resources\": [\n        {\n          \"apiVersion\": \"2014-06-01\",\n          \"type\": \"Microsoft.Web/serverfarms\",\n          \"name\": \"[parameters('hostingPlanName')]\",\n          \"location\": \"[resourceGroup().location]\",\n          \"properties\": {\n              \"name\": \"[parameters('hostingPlanName')]\",\n              \"sku\": \"[parameters('hostingPlanSku')]\",\n              \"workerSize\": \"0\",\n              \"numberOfWorkers\": 1\n          }\n        },\n        {\n          \"apiVersion\": \"2014-06-01\",\n          \"type\": \"Microsoft.Web/sites\",\n          \"name\": \"[parameters('siteName')]\",\n          \"location\": \"[resourceGroup().location]\",\n          \"tags\": {\n              \"environment\": \"test\",\n              \"team\": \"ARM\"\n          },\n          \"dependsOn\": [\n              \"[resourceId('Microsoft.Web/serverfarms', parameters('hostingPlanName'))]\"\n          ],\n          \"properties\": {\n              \"name\": \"[parameters('siteName')]\",\n              \"serverFarm\": \"[parameters('hostingPlanName')]\"\n          },\n          \"resources\": [\n              {\n                  \"apiVersion\": \"2014-06-01\",\n                  \"type\": \"Extensions\",\n                  \"name\": \"MSDeploy\",\n                  \"properties\": {\n                    \"packageUri\": \"https://auxmktplceprod.blob.core.windows.net/packages/StarterSite-modified.zip\",\n                    \"dbType\": \"None\",\n                    \"connectionString\": \"\",\n                    \"setParameters\": {\n                      \"Application Path\": \"[parameters('siteName')]\"\n                    }\n                  }\n              }\n          ]\n        }\n    ]\n\n\n## Outputs\n\nIn the Outputs section, you specify values that are returned from deployment. For example, you could return the URI to access a deployed resource.\n\nThe following example shows the structure of an output definition:\n\n    \"outputs\": {\n       \"<outputName>\" : {\n         \"type\" : \"<type-of-output-value>\",\n         \"value\": \"<output-value-expression>\",\n       }\n    }\n\n| Element name   | Required | Description\n| :------------: | :------: | :----------\n| outputName     |   Yes    | Name of the output value. Must be a valid JavaScript identifier.\n| type           |   Yes    | Type of the output value. Output values support the same types as template input parameters.\n| value          |   Yes    | Template language expression which will be evaluated and returned as output value.\n\n\nThe following example shows a value that is returned in the Outputs section.\n\n    \"outputs\": {\n       \"siteUri\" : {\n         \"type\" : \"string\",\n         \"value\": \"[concat('http://',reference(resourceId('Microsoft.Web/sites', parameters('siteName'))).hostNames[0])]\"\n       }\n    }\n\n## More advanced scenarios.\nThis topic provides an introductory look at the template. However, your scenario may require more advanced tasks.\n\nYou may need to merge two templates together or use a child template within a parent template. For more information, see [Using linked templates with Azure Resource Manager](resource-group-linked-templates.md).\n\nTo iterate a specified number of times when creating a type of resource, see [Create multiple instances of resources in Azure Resource Manager](resource-group-create-multiple.md).\n\nYou may need to use resources that exist within a different resource group. This is common when working with storage accounts or virtual networks that are shared across multiple resource groups. For more information, see the [resourceId function](../resource-group-template-functions#resourceid).\n\n## Complete template\nThe following template deploys a web app and provisions it with code from a .zip file. \n\n    {\n       \"$schema\": \"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\n       \"contentVersion\": \"1.0.0.0\",\n       \"parameters\": {\n         \"siteName\": {\n           \"type\": \"string\"\n         },\n         \"hostingPlanName\": {\n           \"type\": \"string\"\n         },\n         \"hostingPlanSku\": {\n           \"type\": \"string\",\n           \"allowedValues\": [\n             \"Free\",\n             \"Shared\",\n             \"Basic\",\n             \"Standard\",\n             \"Premium\"\n           ],\n           \"defaultValue\": \"Free\"\n         }\n       },\n       \"resources\": [\n         {\n           \"apiVersion\": \"2014-06-01\",\n           \"type\": \"Microsoft.Web/serverfarms\",\n           \"name\": \"[parameters('hostingPlanName')]\",\n           \"location\": \"[resourceGroup().location]\",\n           \"properties\": {\n             \"name\": \"[parameters('hostingPlanName')]\",\n             \"sku\": \"[parameters('hostingPlanSku')]\",\n             \"workerSize\": \"0\",\n             \"numberOfWorkers\": 1\n           }\n         },\n         {\n           \"apiVersion\": \"2014-06-01\",\n           \"type\": \"Microsoft.Web/sites\",\n           \"name\": \"[parameters('siteName')]\",\n           \"location\": \"[resourceGroup().location]\",\n           \"tags\": {\n             \"environment\": \"test\",\n             \"team\": \"ARM\"\n           },\n           \"dependsOn\": [\n             \"[resourceId('Microsoft.Web/serverfarms', parameters('hostingPlanName'))]\"\n           ],\n           \"properties\": {\n             \"name\": \"[parameters('siteName')]\",\n             \"serverFarm\": \"[parameters('hostingPlanName')]\"\n           },\n           \"resources\": [\n             {\n               \"apiVersion\": \"2014-06-01\",\n               \"type\": \"Extensions\",\n               \"name\": \"MSDeploy\",\n               \"dependsOn\": [\n                 \"[resourceId('Microsoft.Web/sites', parameters('siteName'))]\"\n               ],\n               \"properties\": {\n                 \"packageUri\": \"https://auxmktplceprod.blob.core.windows.net/packages/StarterSite-modified.zip\",\n                 \"dbType\": \"None\",\n                 \"connectionString\": \"\",\n                 \"setParameters\": {\n                   \"Application Path\": \"[parameters('siteName')]\"\n                 }\n               }\n             }\n           ]\n         }\n       ],\n       \"outputs\": {\n         \"siteUri\": {\n           \"type\": \"string\",\n           \"value\": \"[concat('http://',reference(resourceId('Microsoft.Web/sites', parameters('siteName'))).hostNames[0])]\"\n         }\n       }\n    }\n\n## Next Steps\n- For details about the functions you can use from within a template, see [Azure Resource Manager Template Functions](resource-group-template-functions.md)\n- To see how to deploy the template you have created, see [Deploy an application with Azure Resource Manager Template](azure-portal/resource-group-template-deploy.md)\n- For an in-depth example of deploying an application, see [Provision and deploy microservices predictably in Azure](app-service-web/app-service-deploy-complex-application-predictably.md)\n- To see the available schemas, see [Azure Resource Manager Schemas](https://github.com/Azure/azure-resource-manager-schemas)\n\ntest\n"
}