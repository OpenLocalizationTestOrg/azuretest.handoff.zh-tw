{
  "nodes": [
    {
      "content": "Add push notifications to your Mobile Services app (Windows Store) | Microsoft Azure",
      "pos": [
        27,
        111
      ]
    },
    {
      "content": "Learn how to use Azure Mobile Services and Notification Hubs to send push notifications to your Windows Store app.",
      "pos": [
        130,
        244
      ]
    },
    {
      "content": "Add push notifications to your Mobile Services app",
      "pos": [
        589,
        639
      ]
    },
    {
      "content": "This topic shows you how to use Azure Mobile Services to send push notifications to a Windows Store app.",
      "pos": [
        777,
        881
      ]
    },
    {
      "content": "In this tutorial you enable push notifications using Azure Notification Hubs to the quickstart project.",
      "pos": [
        883,
        986
      ]
    },
    {
      "content": "When complete, your mobile service will send a push notification using Notification Hubs each time a record is inserted.",
      "pos": [
        987,
        1107
      ]
    },
    {
      "content": "The notification hub that you create is free with your mobile service, can be managed independent of the mobile service, and can be used by other applications and services.",
      "pos": [
        1108,
        1280
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>This topic shows you how to manually configure push notifications using Windows Notification Service (WNS) for a Windows Store app.",
      "pos": [
        1283,
        1426
      ]
    },
    {
      "content": "You can use Visual Studio 2013 tools to automatically configure the same push notifications in a Windows app project.",
      "pos": [
        1427,
        1544
      ]
    },
    {
      "content": "For more information, see the <bpt id=\"p1\">[</bpt>universal Windows app version<ept id=\"p1\">](mobile-services-javascript-backend-windows-store-javascript-get-started-push.md)</ept> of this tutorial.",
      "pos": [
        1545,
        1705
      ]
    },
    {
      "content": "This tutorial walks you through these basic steps to enable push notifications:",
      "pos": [
        1707,
        1786
      ]
    },
    {
      "content": "Register your app with WNS and configure Mobile Services",
      "pos": [
        1792,
        1848
      ]
    },
    {
      "content": "Update the app to register for notifications",
      "pos": [
        1865,
        1909
      ]
    },
    {
      "content": "Update server scripts to send push notifications",
      "pos": [
        1928,
        1976
      ]
    },
    {
      "content": "Insert data to receive push notifications",
      "pos": [
        1999,
        2040
      ]
    },
    {
      "content": "This tutorial is based on the Mobile Services quickstart.",
      "pos": [
        2050,
        2107
      ]
    },
    {
      "content": "Before you start this tutorial, you must first complete either [Get started with Mobile Services] or [Get started with data] to connect your project to the mobile service.",
      "pos": [
        2108,
        2279
      ]
    },
    {
      "content": "When a mobile service has not been connected, the Add Push Notification wizard creates this connection for you.",
      "pos": [
        2280,
        2391
      ]
    },
    {
      "pos": [
        2395,
        2473
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"register\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> Register your app with WNS and configure Mobile Services"
    },
    {
      "content": "Both your mobile service and your app are now configured to work with WNS and Notification Hubs.",
      "pos": [
        2635,
        2731
      ]
    },
    {
      "content": "Next, you will update your Windows Store app to register for notifications.",
      "pos": [
        2732,
        2807
      ]
    },
    {
      "pos": [
        2811,
        2879
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"update-app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> Update the app to register for notifications"
    },
    {
      "content": "Before your app can receive push notifications, you must register a notification channel.",
      "pos": [
        2881,
        2970
      ]
    },
    {
      "pos": [
        2975,
        3095
      ],
      "content": "Open the file default.js and insert the following code after the code that creates the <bpt id=\"p1\">**</bpt>MobileServiceClient<ept id=\"p1\">**</ept> instance:"
    },
    {
      "content": "This code retrieves the ChannelURI for the app from WNS, and then registers that ChannelURI for push notifications.",
      "pos": [
        3483,
        3598
      ]
    },
    {
      "content": "Press the <bpt id=\"p1\">**</bpt>F5<ept id=\"p1\">**</ept> key to run the app.",
      "pos": [
        3603,
        3639
      ]
    },
    {
      "content": "A popup dialog with the registration key is displayed.",
      "pos": [
        3640,
        3694
      ]
    },
    {
      "pos": [
        3699,
        3820
      ],
      "content": "Open the Package.appxmanifest file and make sure that in the <bpt id=\"p1\">**</bpt>Application UI<ept id=\"p1\">**</ept> tab, <bpt id=\"p2\">**</bpt>Toast capable<ept id=\"p2\">**</ept> is set to <bpt id=\"p3\">**</bpt>Yes<ept id=\"p3\">**</ept>."
    },
    {
      "content": "This makes sure that your app can raise toast notifications.",
      "pos": [
        3838,
        3898
      ]
    },
    {
      "pos": [
        3902,
        3978
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"update-scripts\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> Update server scripts to send push notifications"
    },
    {
      "pos": [
        4138,
        4191
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"test\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> Test push notifications in your app"
    },
    {
      "pos": [
        4314,
        4350
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"next-steps\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Next steps"
    },
    {
      "content": "This tutorial demonstrated the basics of enabling a Windows Store app to use Mobile Services and Notification Hubs to send push notifications.",
      "pos": [
        4352,
        4494
      ]
    },
    {
      "content": "Next, consider completing the next tutorial, [Send push notifications to authenticated users], which shows how to use tags to send push notifications from a Mobile Service to only an authenticated user.",
      "pos": [
        4495,
        4697
      ]
    },
    {
      "content": "Learn more about Mobile Services and Notification Hubs in the following topics:",
      "pos": [
        5236,
        5315
      ]
    },
    {
      "pos": [
        5319,
        5415
      ],
      "content": "[Get started with data]\n<br/>Learn more about storing and querying data using mobile services.",
      "leadings": [
        "",
        "  "
      ],
      "nodes": [
        {
          "content": "[Get started with data]",
          "pos": [
            0,
            23
          ]
        },
        {
          "content": "Learn more about storing and querying data using mobile services.",
          "pos": [
            29,
            94
          ]
        }
      ]
    },
    {
      "pos": [
        5419,
        5555
      ],
      "content": "[Get started with authentication]\n<br/>Learn how to authenticate users of your app with different account types using mobile services.",
      "leadings": [
        "",
        "  "
      ],
      "nodes": [
        {
          "content": "[Get started with authentication]",
          "pos": [
            0,
            33
          ]
        },
        {
          "content": "Learn how to authenticate users of your app with different account types using mobile services.",
          "pos": [
            39,
            134
          ]
        }
      ]
    },
    {
      "pos": [
        5559,
        5713
      ],
      "content": "[What are Notification Hubs?]\n<br/>Learn more about how Notification Hubs works to deliver notifications to your apps across all major client platforms.",
      "leadings": [
        "",
        "  "
      ],
      "nodes": [
        {
          "content": "[What are Notification Hubs?]",
          "pos": [
            0,
            29
          ]
        },
        {
          "content": "Learn more about how Notification Hubs works to deliver notifications to your apps across all major client platforms.",
          "pos": [
            35,
            152
          ]
        }
      ]
    },
    {
      "pos": [
        5717,
        5883
      ],
      "content": "[Debug Notification Hubs applications](http://go.microsoft.com/fwlink/p/?linkid=386630)\n</br>Get guidance troubleshooting and debugging Notification Hubs solutions.",
      "leadings": [
        "",
        "  "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">[</bpt>Debug Notification Hubs applications<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=386630)</ept>",
          "pos": [
            0,
            87
          ]
        },
        {
          "content": "Get guidance troubleshooting and debugging Notification Hubs solutions.",
          "pos": [
            93,
            164
          ]
        }
      ]
    },
    {
      "pos": [
        5887,
        5999
      ],
      "content": "[Mobile Services .NET How-to Conceptual Reference]\n<br/>Learn more about how to use Mobile Services with .NET.",
      "leadings": [
        "",
        "  "
      ],
      "nodes": [
        {
          "content": "[Mobile Services .NET How-to Conceptual Reference]",
          "pos": [
            0,
            50
          ]
        },
        {
          "content": "Learn more about how to use Mobile Services with .NET.",
          "pos": [
            56,
            110
          ]
        }
      ]
    },
    {
      "pos": [
        6003,
        6124
      ],
      "content": "[Mobile Services server script reference]\n<br/>Learn more about how to implement business logic in your mobile service.",
      "leadings": [
        "",
        "  "
      ],
      "nodes": [
        {
          "content": "[Mobile Services server script reference]",
          "pos": [
            0,
            41
          ]
        },
        {
          "content": "Learn more about how to implement business logic in your mobile service.",
          "pos": [
            47,
            119
          ]
        }
      ]
    },
    {
      "content": "test",
      "pos": [
        7437,
        7441
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Add push notifications to your Mobile Services app (Windows Store) | Microsoft Azure\"\n    description=\"Learn how to use Azure Mobile Services and Notification Hubs to send push notifications to your Windows Store app.\"\n    services=\"mobile-services,notification-hubs\"\n    documentationCenter=\"windows\"\n    authors=\"ggailey777\"\n    manager=\"dwrede\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"mobile-services\"\n    ms.workload=\"mobile\"\n    ms.tgt_pltfrm=\"windows\"\n    ms.devlang=\"javascript\"\n    ms.topic=\"article\"\n    ms.date=\"06/16/2015\"\n    ms.author=\"glenga\"/>\n\n\n# Add push notifications to your Mobile Services app\n\n[AZURE.INCLUDE [mobile-services-selector-get-started-push-legacy](../../includes/mobile-services-selector-get-started-push-legacy.md)]\n\nThis topic shows you how to use Azure Mobile Services to send push notifications to a Windows Store app. \nIn this tutorial you enable push notifications using Azure Notification Hubs to the quickstart project. When complete, your mobile service will send a push notification using Notification Hubs each time a record is inserted. The notification hub that you create is free with your mobile service, can be managed independent of the mobile service, and can be used by other applications and services.\n\n>[AZURE.NOTE]This topic shows you how to manually configure push notifications using Windows Notification Service (WNS) for a Windows Store app. You can use Visual Studio 2013 tools to automatically configure the same push notifications in a Windows app project. For more information, see the [universal Windows app version](mobile-services-javascript-backend-windows-store-javascript-get-started-push.md) of this tutorial.\n\nThis tutorial walks you through these basic steps to enable push notifications:\n\n1. [Register your app with WNS and configure Mobile Services](#register)\n2. [Update the app to register for notifications](#update-app)\n3. [Update server scripts to send push notifications](#update-scripts)\n3. [Insert data to receive push notifications](#test)\n\nThis tutorial is based on the Mobile Services quickstart. Before you start this tutorial, you must first complete either [Get started with Mobile Services] or [Get started with data] to connect your project to the mobile service. When a mobile service has not been connected, the Add Push Notification wizard creates this connection for you.\n\n##<a id=\"register\"></a> Register your app with WNS and configure Mobile Services\n\n[AZURE.INCLUDE [mobile-services-notification-hubs-register-windows-store-app](../../includes/mobile-services-notification-hubs-register-windows-store-app.md)]\n\nBoth your mobile service and your app are now configured to work with WNS and Notification Hubs. Next, you will update your Windows Store app to register for notifications.\n\n##<a id=\"update-app\"></a> Update the app to register for notifications\n\nBefore your app can receive push notifications, you must register a notification channel.\n\n1. Open the file default.js and insert the following code after the code that creates the **MobileServiceClient** instance:\n\n        // Request a push notification channel.\n        Windows.Networking.PushNotifications\n            .PushNotificationChannelManager\n            .createPushNotificationChannelForApplicationAsync()\n            .then(function (channel) {\n                // Register for notifications using the new channel\n                client.push.registerNative(channel.uri);\n            });\n\n    This code retrieves the ChannelURI for the app from WNS, and then registers that ChannelURI for push notifications.\n\n2. Press the **F5** key to run the app. A popup dialog with the registration key is displayed.\n\n6. Open the Package.appxmanifest file and make sure that in the **Application UI** tab, **Toast capable** is set to **Yes**.\n\n    ![][2]\n\n    This makes sure that your app can raise toast notifications.\n\n##<a id=\"update-scripts\"></a> Update server scripts to send push notifications\n\n[AZURE.INCLUDE [mobile-services-javascript-update-script-notification-hubs](../../includes/mobile-services-javascript-update-script-notification-hubs.md)]\n\n##<a id=\"test\"></a> Test push notifications in your app\n\n[AZURE.INCLUDE [mobile-services-windows-store-test-push](../../includes/mobile-services-windows-store-test-push.md)]\n\n## <a name=\"next-steps\"> </a>Next steps\n\nThis tutorial demonstrated the basics of enabling a Windows Store app to use Mobile Services and Notification Hubs to send push notifications. Next, consider completing the next tutorial, [Send push notifications to authenticated users], which shows how to use tags to send push notifications from a Mobile Service to only an authenticated user.\n\n<!---+ [Send push notifications to authenticated users]\n    <br/>Learn how to use tags to send push notifications from a Mobile Service to only an authenticated user.\n\n+ [Send broadcast notifications to subscribers]\n    <br/>Learn how users can register and receive push notifications for categories they're interested in.\n\n+ [Send template-based notifications to subscribers]\n    <br/>Learn how to use templates to send push notifications from a Mobile Service, without having to craft platform-specific payloads in your back-end.\n-->\n\nLearn more about Mobile Services and Notification Hubs in the following topics:\n\n* [Get started with data]\n  <br/>Learn more about storing and querying data using mobile services.\n\n* [Get started with authentication]\n  <br/>Learn how to authenticate users of your app with different account types using mobile services.\n\n* [What are Notification Hubs?]\n  <br/>Learn more about how Notification Hubs works to deliver notifications to your apps across all major client platforms.\n\n* [Debug Notification Hubs applications](http://go.microsoft.com/fwlink/p/?linkid=386630)\n  </br>Get guidance troubleshooting and debugging Notification Hubs solutions.\n\n* [Mobile Services .NET How-to Conceptual Reference]\n  <br/>Learn more about how to use Mobile Services with .NET.\n\n* [Mobile Services server script reference]\n  <br/>Learn more about how to implement business logic in your mobile service.\n\n<!-- Anchors. -->\n\n<!-- Images. -->\n\n\n[2]: ./media/mobile-services-javascript-backend-windows-store-javascript-get-started-push/mobile-app-enable-toast-win8.png\n\n\n<!-- URLs. -->\n[Submit an app page]: http://go.microsoft.com/fwlink/p/?LinkID=266582\n[My Applications]: http://go.microsoft.com/fwlink/p/?LinkId=262039\n[Live SDK for Windows]: http://go.microsoft.com/fwlink/p/?LinkId=262253\n[Get started with Mobile Services]: ../mobile-services-windows-store-get-started.md\n[Get started with data]: mobile-services-windows-store-javascript-get-started-data.md\n[Get started with authentication]: mobile-services-windows-store-javascript-get-started-users.md\n\n[Mobile Services server script reference]: http://go.microsoft.com/fwlink/?LinkId=262293\n[Mobile Services .NET How-to Conceptual Reference]: mobile-services-windows-dotnet-how-to-use-client-library.md\n\n\n[Send push notifications to authenticated users]: mobile-services-javascript-backend-windows-store-javascript-push-notifications-app-users.md\n\n[What are Notification Hubs?]: ../notification-hubs-overview.md\n[Send broadcast notifications to subscribers]: ../notification-hubs-windows-store-javascript-send-breaking-news.md\n[Send template-based notifications to subscribers]: ../notification-hubs-windows-store-javascript-send-localized-breaking-news.md\n\ntest\n"
}