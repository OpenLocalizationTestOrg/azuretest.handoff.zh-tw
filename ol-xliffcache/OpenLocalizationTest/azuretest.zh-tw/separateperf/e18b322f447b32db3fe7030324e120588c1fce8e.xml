{
  "nodes": [
    {
      "content": "Create a PHP-MySQL web app in Azure App Service and deploy using FTP",
      "pos": [
        28,
        96
      ]
    },
    {
      "content": "A tutorial that demonstrates how to create a PHP web app that stores data in MySQL and use FTP deployment to Azure.",
      "pos": [
        116,
        231
      ]
    },
    {
      "content": "Create a PHP-MySQL web app in Azure App Service and deploy using FTP",
      "pos": [
        551,
        619
      ]
    },
    {
      "content": "This tutorial shows you how to create a PHP-MySQL web app and how to deploy it using FTP.",
      "pos": [
        621,
        710
      ]
    },
    {
      "content": "This tutorial assumes you have <bpt id=\"p1\">[</bpt>PHP<ept id=\"p1\">][install-php]</ept>, <bpt id=\"p2\">[</bpt>MySQL<ept id=\"p2\">][install-mysql]</ept>, a web server, and an FTP client installed on your computer.",
      "pos": [
        711,
        845
      ]
    },
    {
      "content": "The instructions in this tutorial can be followed on any operating system, including Windows, Mac, and  Linux.",
      "pos": [
        846,
        956
      ]
    },
    {
      "content": "Upon completing this guide, you will have a PHP/MySQL web app running in Azure.",
      "pos": [
        957,
        1036
      ]
    },
    {
      "content": "You will learn:",
      "pos": [
        1039,
        1054
      ]
    },
    {
      "content": "How to create a web app and a MySQL database using the Azure Portal.",
      "pos": [
        1058,
        1126
      ]
    },
    {
      "content": "Because PHP is enabled in Web Apps by default, nothing special is required to run your PHP code.",
      "pos": [
        1127,
        1223
      ]
    },
    {
      "content": "How to publish your application to Azure using FTP.",
      "pos": [
        1226,
        1277
      ]
    },
    {
      "content": "By following this tutorial, you will build a simple registration web app in PHP.",
      "pos": [
        1280,
        1360
      ]
    },
    {
      "content": "The application will be hosted in a Web App.",
      "pos": [
        1361,
        1405
      ]
    },
    {
      "content": "A screenshot of the completed application is below:",
      "pos": [
        1406,
        1457
      ]
    },
    {
      "content": "Azure PHP Web Site",
      "pos": [
        1461,
        1479
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you want to get started with Azure App Service before signing up for an account, go to <bpt id=\"p1\">[</bpt>Try App Service<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=523751)</ept>, where you can immediately create a short-lived starter web app in App Service.",
      "pos": [
        1496,
        1743
      ]
    },
    {
      "content": "No credit cards required, no commitments.",
      "pos": [
        1744,
        1785
      ]
    },
    {
      "content": "Create a web app and set up FTP publishing",
      "pos": [
        1791,
        1833
      ]
    },
    {
      "content": "Follow these steps to create a web app and a MySQL database:",
      "pos": [
        1835,
        1895
      ]
    },
    {
      "pos": [
        1900,
        1947
      ],
      "content": "Login to the <bpt id=\"p1\">[</bpt>Azure Portal<ept id=\"p1\">][management-portal]</ept>."
    },
    {
      "pos": [
        1951,
        2009
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>+ New<ept id=\"p1\">**</ept> icon on the bottom left of the portal."
    },
    {
      "content": "Create New Azure Web Site",
      "pos": [
        2017,
        2042
      ]
    },
    {
      "pos": [
        2061,
        2110
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Web + Mobile<ept id=\"p1\">**</ept>, then <bpt id=\"p2\">**</bpt>Web app + MySQL<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Custom Create a new Web Site",
      "pos": [
        2118,
        2146
      ]
    },
    {
      "content": "Enter a valid name for your resource group.",
      "pos": [
        2167,
        2210
      ]
    },
    {
      "content": "Set resource group name",
      "pos": [
        2218,
        2241
      ]
    },
    {
      "content": "Enter values for your new web app.",
      "pos": [
        2263,
        2297
      ]
    },
    {
      "content": "Create web app",
      "pos": [
        2306,
        2320
      ]
    },
    {
      "content": "Enter values for your new database, including agreeing to the legal terms.",
      "pos": [
        2339,
        2413
      ]
    },
    {
      "content": "Create new MySQL database",
      "pos": [
        2421,
        2446
      ]
    },
    {
      "content": "When the web app has been created, you will see the new resource group.",
      "pos": [
        2470,
        2541
      ]
    },
    {
      "content": "Click the name of the web app to configure its settings.",
      "pos": [
        2542,
        2598
      ]
    },
    {
      "content": "Open web app",
      "pos": [
        2606,
        2618
      ]
    },
    {
      "pos": [
        2638,
        2696
      ],
      "content": "Scroll down until you find <bpt id=\"p1\">**</bpt>Set deployment credentials<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Set deployment credentials",
      "pos": [
        2705,
        2731
      ]
    },
    {
      "content": "To enable FTP publishing, you must provide a user name and password.",
      "pos": [
        2765,
        2833
      ]
    },
    {
      "content": "Save the credentials and make a note of the user name and password you create.",
      "pos": [
        2834,
        2912
      ]
    },
    {
      "content": "Create publishing credentials",
      "pos": [
        2920,
        2949
      ]
    },
    {
      "content": "Build and test your app locally",
      "pos": [
        2984,
        3015
      ]
    },
    {
      "content": "The Registration application is a simple PHP application that allows you to register for an event by providing your name and email address.",
      "pos": [
        3017,
        3156
      ]
    },
    {
      "content": "Information about previous registrants is displayed in a table.",
      "pos": [
        3157,
        3220
      ]
    },
    {
      "content": "Registration information is stored in a MySQL database.",
      "pos": [
        3221,
        3276
      ]
    },
    {
      "content": "The app consists of two files:",
      "pos": [
        3277,
        3307
      ]
    },
    {
      "pos": [
        3311,
        3405
      ],
      "content": "<bpt id=\"p1\">**</bpt>index.php<ept id=\"p1\">**</ept>: Displays a form for registration and a table containing registrant information."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>createtable.php<ept id=\"p1\">**</ept>: Creates the MySQL table for the application.",
      "pos": [
        3408,
        3473
      ]
    },
    {
      "content": "This file will only be used once.",
      "pos": [
        3474,
        3507
      ]
    },
    {
      "content": "To build and run the app locally, follow the steps below.",
      "pos": [
        3509,
        3566
      ]
    },
    {
      "content": "Note that these steps assume you have PHP, MySQL, and a web server set up on your local machine, and that you have enabled the <bpt id=\"p1\">[</bpt>PDO extension for MySQL<ept id=\"p1\">][pdo-mysql]</ept>.",
      "pos": [
        3567,
        3731
      ]
    },
    {
      "content": "Create a MySQL database called <ph id=\"ph1\">`registration`</ph>.",
      "pos": [
        3736,
        3782
      ]
    },
    {
      "content": "You can do this from the MySQL command prompt with this command:",
      "pos": [
        3783,
        3847
      ]
    },
    {
      "pos": [
        3898,
        4058
      ],
      "content": "In your web server's root directory, create a folder called <ph id=\"ph1\">`registration`</ph> and create two files in it - one called <ph id=\"ph2\">`createtable.php`</ph> and one called <ph id=\"ph3\">`index.php`</ph>."
    },
    {
      "content": "Open the <ph id=\"ph1\">`createtable.php`</ph> file in a text editor or IDE and add the code below.",
      "pos": [
        4063,
        4142
      ]
    },
    {
      "content": "This code will be used to create the <ph id=\"ph1\">`registration_tbl`</ph> table in the <ph id=\"ph2\">`registration`</ph> database.",
      "pos": [
        4143,
        4236
      ]
    },
    {
      "pos": [
        5002,
        5147
      ],
      "content": "[AZURE.NOTE] \nYou will need to update the values for <code>$user</code> and <code>$pwd</code> with your local MySQL user name and password.",
      "leadings": [
        "",
        "    > "
      ],
      "nodes": [
        {
          "content": "You will need to update the values for <ph id=\"ph1\">&lt;code&gt;</ph><ph id=\"ph2\">$user</ph><ph id=\"ph3\">&lt;/code&gt;</ph> and <ph id=\"ph4\">&lt;code&gt;</ph><ph id=\"ph5\">$pwd</ph><ph id=\"ph6\">&lt;/code&gt;</ph> with your local MySQL user name and password.",
          "pos": [
            14,
            139
          ]
        }
      ]
    },
    {
      "content": "Open a web browser and browse to <bpt id=\"p1\">[</bpt>http://localhost/registration/createtable.php<ept id=\"p1\">][localhost-createtable]</ept>.",
      "pos": [
        5152,
        5256
      ]
    },
    {
      "content": "This will create the <ph id=\"ph1\">`registration_tbl`</ph> table in the database.",
      "pos": [
        5257,
        5319
      ]
    },
    {
      "pos": [
        5324,
        5469
      ],
      "content": "Open the <bpt id=\"p1\">**</bpt>index.php<ept id=\"p1\">**</ept> file in a text editor or IDE and add the basic HTML and CSS code for the page (the PHP code will be added in later steps)."
    },
    {
      "content": "Within the PHP tags, add PHP code for connecting to the database.",
      "pos": [
        6729,
        6794
      ]
    },
    {
      "pos": [
        7226,
        7377
      ],
      "content": "[AZURE.NOTE]\nAgain, you will need to update the values for <code>$user</code> and <code>$pwd</code> with your local MySQL user name and password.",
      "leadings": [
        "",
        "    > "
      ],
      "nodes": [
        {
          "content": "Again, you will need to update the values for <ph id=\"ph1\">&lt;code&gt;</ph><ph id=\"ph2\">$user</ph><ph id=\"ph3\">&lt;/code&gt;</ph> and <ph id=\"ph4\">&lt;code&gt;</ph><ph id=\"ph5\">$pwd</ph><ph id=\"ph6\">&lt;/code&gt;</ph> with your local MySQL user name and password.",
          "pos": [
            13,
            145
          ]
        }
      ]
    },
    {
      "content": "Following the database connection code, add code for inserting registration information into the database.",
      "pos": [
        7382,
        7488
      ]
    },
    {
      "content": "Finally, following the code above, add code for retrieving data from the database.",
      "pos": [
        8130,
        8212
      ]
    },
    {
      "pos": [
        8954,
        9051
      ],
      "content": "You can now browse to <bpt id=\"p1\">[</bpt>http://localhost/registration/index.php<ept id=\"p1\">][localhost-index]</ept> to test the app."
    },
    {
      "content": "Get MySQL and FTP connection information",
      "pos": [
        9055,
        9095
      ]
    },
    {
      "content": "To connect to the MySQL database that is running in Web Apps, your will need the connection information.",
      "pos": [
        9097,
        9201
      ]
    },
    {
      "content": "To get MySQL connection information, follow these steps:",
      "pos": [
        9202,
        9258
      ]
    },
    {
      "content": "From your resource group, click the database:",
      "pos": [
        9263,
        9308
      ]
    },
    {
      "content": "Select database",
      "pos": [
        9316,
        9331
      ]
    },
    {
      "pos": [
        9354,
        9403
      ],
      "content": "From the database sumamry, select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Select properties",
      "pos": [
        9411,
        9428
      ]
    },
    {
      "pos": [
        9457,
        9531
      ],
      "content": "Make note of the values for <ph id=\"ph1\">`Database`</ph>, <ph id=\"ph2\">`Host`</ph>, <ph id=\"ph3\">`User Id`</ph>, and <ph id=\"ph4\">`Password`</ph>."
    },
    {
      "content": "Note properties",
      "pos": [
        9539,
        9554
      ]
    },
    {
      "pos": [
        9577,
        9679
      ],
      "content": "From your web app, click the <bpt id=\"p1\">**</bpt>Download publish profile<ept id=\"p1\">**</ept> link at the bottom right corner of the page:"
    },
    {
      "content": "Download publish profile",
      "pos": [
        9687,
        9711
      ]
    },
    {
      "pos": [
        9743,
        9793
      ],
      "content": "Open the <ph id=\"ph1\">`.publishsettings`</ph> file in an XML editor."
    },
    {
      "pos": [
        9799,
        9890
      ],
      "content": "Find the <ph id=\"ph1\">`&lt;publishProfile &gt;`</ph> element with <ph id=\"ph2\">`publishMethod=\"FTP\"`</ph> that looks similar to this:"
    },
    {
      "pos": [
        10178,
        10246
      ],
      "content": "Make note of the <ph id=\"ph1\">`publishUrl`</ph>, <ph id=\"ph2\">`userName`</ph>, and <ph id=\"ph3\">`userPWD`</ph> attributes."
    },
    {
      "content": "Publish your app",
      "pos": [
        10250,
        10266
      ]
    },
    {
      "content": "After you have tested your app locally, you can publish it to your web app using FTP.",
      "pos": [
        10268,
        10353
      ]
    },
    {
      "content": "However, you first need to update the database connection information in the application.",
      "pos": [
        10354,
        10443
      ]
    },
    {
      "content": "Using the database connection information you obtained earlier (in the <bpt id=\"p1\">**</bpt>Get MySQL and FTP connection information<ept id=\"p1\">**</ept> section), update the following information in <bpt id=\"p2\">**</bpt>both<ept id=\"p2\">**</ept> the <ph id=\"ph1\">`createdatabase.php`</ph> and <ph id=\"ph2\">`index.php`</ph> files with the appropriate values:",
      "pos": [
        10444,
        10690
      ]
    },
    {
      "content": "Now you are ready to publish your app using FTP.",
      "pos": [
        10850,
        10898
      ]
    },
    {
      "content": "Open your FTP client of choice.",
      "pos": [
        10903,
        10934
      ]
    },
    {
      "pos": [
        10939,
        11038
      ],
      "content": "Enter the <bpt id=\"p1\">*</bpt>host name portion<ept id=\"p1\">*</ept> from the <ph id=\"ph1\">`publishUrl`</ph> attribute you noted above into your FTP client."
    },
    {
      "pos": [
        11043,
        11136
      ],
      "content": "Enter the <ph id=\"ph1\">`userName`</ph> and <ph id=\"ph2\">`userPWD`</ph> attributes you noted above unchanged into your FTP client."
    },
    {
      "content": "Establish a connection.",
      "pos": [
        11141,
        11164
      ]
    },
    {
      "content": "After you have connected you will be able to upload and download files as needed.",
      "pos": [
        11166,
        11247
      ]
    },
    {
      "content": "Be sure that you are uploading files to the root directory, which is <ph id=\"ph1\">`/site/wwwroot`</ph>.",
      "pos": [
        11248,
        11333
      ]
    },
    {
      "pos": [
        11335,
        11602
      ],
      "content": "After uploading both <ph id=\"ph1\">`index.php`</ph> and <ph id=\"ph2\">`createtable.php`</ph>, browse to <bpt id=\"p1\">**</bpt>http://[site name].azurewebsites.net/createtable.php<ept id=\"p1\">**</ept> to create the MySQL table for the application, then browse to <bpt id=\"p2\">**</bpt>http://[site name].azurewebsites.net/index.php<ept id=\"p2\">**</ept> to begin using the application."
    },
    {
      "content": "test",
      "pos": [
        13232,
        13236
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Create a PHP-MySQL web app in Azure App Service and deploy using FTP\" \n    description=\"A tutorial that demonstrates how to create a PHP web app that stores data in MySQL and use FTP deployment to Azure.\" \n    services=\"app-service\\web\" \n    documentationCenter=\"php\" \n    authors=\"tfitzmac\" \n    manager=\"wpickett\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"app-service-web\" \n    ms.workload=\"web\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"PHP\" \n    ms.topic=\"article\" \n    ms.date=\"06/24/2015\" \n    ms.author=\"tomfitz\"/>\n\n\n#Create a PHP-MySQL web app in Azure App Service and deploy using FTP\n\nThis tutorial shows you how to create a PHP-MySQL web app and how to deploy it using FTP. This tutorial assumes you have [PHP][install-php], [MySQL][install-mysql], a web server, and an FTP client installed on your computer. The instructions in this tutorial can be followed on any operating system, including Windows, Mac, and  Linux. Upon completing this guide, you will have a PHP/MySQL web app running in Azure.\n \nYou will learn:\n\n* How to create a web app and a MySQL database using the Azure Portal. Because PHP is enabled in Web Apps by default, nothing special is required to run your PHP code.\n* How to publish your application to Azure using FTP.\n \nBy following this tutorial, you will build a simple registration web app in PHP. The application will be hosted in a Web App. A screenshot of the completed application is below:\n\n![Azure PHP Web Site][running-app]\n\n>[AZURE.NOTE] If you want to get started with Azure App Service before signing up for an account, go to [Try App Service](http://go.microsoft.com/fwlink/?LinkId=523751), where you can immediately create a short-lived starter web app in App Service. No credit cards required, no commitments. \n\n\n##Create a web app and set up FTP publishing\n\nFollow these steps to create a web app and a MySQL database:\n\n1. Login to the [Azure Portal][management-portal].\n2. Click the **+ New** icon on the bottom left of the portal.\n\n    ![Create New Azure Web Site][new-website]\n\n3. Click **Web + Mobile**, then **Web app + MySQL**.\n\n    ![Custom Create a new Web Site][custom-create]\n\n4. Enter a valid name for your resource group.\n\n    ![Set resource group name][resource-group]\n\n5. Enter values for your new web app.\n\n     ![Create web app][new-web-app]\n\n6. Enter values for your new database, including agreeing to the legal terms.\n\n    ![Create new MySQL database][new-mysql-db]\n    \n7. When the web app has been created, you will see the new resource group. Click the name of the web app to configure its settings.\n\n    ![Open web app][go-to-webapp]\n\n6. Scroll down until you find **Set deployment credentials**. \n\n    ![Set deployment credentials][set-deployment-credentials]\n\n7. To enable FTP publishing, you must provide a user name and password. Save the credentials and make a note of the user name and password you create.\n\n    ![Create publishing credentials][portal-ftp-username-password]\n\n##Build and test your app locally\n\nThe Registration application is a simple PHP application that allows you to register for an event by providing your name and email address. Information about previous registrants is displayed in a table. Registration information is stored in a MySQL database. The app consists of two files:\n\n* **index.php**: Displays a form for registration and a table containing registrant information.\n* **createtable.php**: Creates the MySQL table for the application. This file will only be used once.\n\nTo build and run the app locally, follow the steps below. Note that these steps assume you have PHP, MySQL, and a web server set up on your local machine, and that you have enabled the [PDO extension for MySQL][pdo-mysql].\n\n1. Create a MySQL database called `registration`. You can do this from the MySQL command prompt with this command:\n\n        mysql> create database registration;\n\n2. In your web server's root directory, create a folder called `registration` and create two files in it - one called `createtable.php` and one called `index.php`.\n\n3. Open the `createtable.php` file in a text editor or IDE and add the code below. This code will be used to create the `registration_tbl` table in the `registration` database.\n\n        <?php\n        // DB connection info\n        $host = \"localhost\";\n        $user = \"user name\";\n        $pwd = \"password\";\n        $db = \"registration\";\n        try{\n            $conn = new PDO( \"mysql:host=$host;dbname=$db\", $user, $pwd);\n            $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );\n            $sql = \"CREATE TABLE registration_tbl(\n                        id INT NOT NULL AUTO_INCREMENT, \n                        PRIMARY KEY(id),\n                        name VARCHAR(30),\n                        email VARCHAR(30),\n                        date DATE)\";\n            $conn->query($sql);\n        }\n        catch(Exception $e){\n            die(print_r($e));\n        }\n        echo \"<h3>Table created.</h3>\";\n        ?>\n\n    > [AZURE.NOTE] \n    > You will need to update the values for <code>$user</code> and <code>$pwd</code> with your local MySQL user name and password.\n\n4. Open a web browser and browse to [http://localhost/registration/createtable.php][localhost-createtable]. This will create the `registration_tbl` table in the database.\n\n5. Open the **index.php** file in a text editor or IDE and add the basic HTML and CSS code for the page (the PHP code will be added in later steps).\n\n        <html>\n        <head>\n        <Title>Registration Form</Title>\n        <style type=\"text/css\">\n            body { background-color: #fff; border-top: solid 10px #000;\n                color: #333; font-size: .85em; margin: 20; padding: 20;\n                font-family: \"Segoe UI\", Verdana, Helvetica, Sans-Serif;\n            }\n            h1, h2, h3,{ color: #000; margin-bottom: 0; padding-bottom: 0; }\n            h1 { font-size: 2em; }\n            h2 { font-size: 1.75em; }\n            h3 { font-size: 1.2em; }\n            table { margin-top: 0.75em; }\n            th { font-size: 1.2em; text-align: left; border: none; padding-left: 0; }\n            td { padding: 0.25em 2em 0.25em 0em; border: 0 none; }\n        </style>\n        </head>\n        <body>\n        <h1>Register here!</h1>\n        <p>Fill in your name and email address, then click <strong>Submit</strong> to register.</p>\n        <form method=\"post\" action=\"index.php\" enctype=\"multipart/form-data\" >\n              Name  <input type=\"text\" name=\"name\" id=\"name\"/></br>\n              Email <input type=\"text\" name=\"email\" id=\"email\"/></br>\n              <input type=\"submit\" name=\"submit\" value=\"Submit\" />\n        </form>\n        <?php\n\n        ?>\n        </body>\n        </html>\n\n6. Within the PHP tags, add PHP code for connecting to the database.\n\n        // DB connection info\n        $host = \"localhost\";\n        $user = \"user name\";\n        $pwd = \"password\";\n        $db = \"registration\";\n        // Connect to database.\n        try {\n            $conn = new PDO( \"mysql:host=$host;dbname=$db\", $user, $pwd);\n            $conn->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );\n        }\n        catch(Exception $e){\n            die(var_dump($e));\n        }\n\n    > [AZURE.NOTE]\n    > Again, you will need to update the values for <code>$user</code> and <code>$pwd</code> with your local MySQL user name and password.\n\n7. Following the database connection code, add code for inserting registration information into the database.\n\n        if(!empty($_POST)) {\n        try {\n            $name = $_POST['name'];\n            $email = $_POST['email'];\n            $date = date(\"Y-m-d\");\n            // Insert data\n            $sql_insert = \"INSERT INTO registration_tbl (name, email, date) \n                           VALUES (?,?,?)\";\n            $stmt = $conn->prepare($sql_insert);\n            $stmt->bindValue(1, $name);\n            $stmt->bindValue(2, $email);\n            $stmt->bindValue(3, $date);\n            $stmt->execute();\n        }\n        catch(Exception $e) {\n            die(var_dump($e));\n        }\n        echo \"<h3>Your're registered!</h3>\";\n        }\n\n8. Finally, following the code above, add code for retrieving data from the database.\n\n        $sql_select = \"SELECT * FROM registration_tbl\";\n        $stmt = $conn->query($sql_select);\n        $registrants = $stmt->fetchAll(); \n        if(count($registrants) > 0) {\n            echo \"<h2>People who are registered:</h2>\";\n            echo \"<table>\";\n            echo \"<tr><th>Name</th>\";\n            echo \"<th>Email</th>\";\n            echo \"<th>Date</th></tr>\";\n            foreach($registrants as $registrant) {\n                echo \"<tr><td>\".$registrant['name'].\"</td>\";\n                echo \"<td>\".$registrant['email'].\"</td>\";\n                echo \"<td>\".$registrant['date'].\"</td></tr>\";\n            }\n            echo \"</table>\";\n        } else {\n            echo \"<h3>No one is currently registered.</h3>\";\n        }\n\nYou can now browse to [http://localhost/registration/index.php][localhost-index] to test the app.\n\n##Get MySQL and FTP connection information\n\nTo connect to the MySQL database that is running in Web Apps, your will need the connection information. To get MySQL connection information, follow these steps:\n\n1. From your resource group, click the database:\n\n    ![Select database][select-database]\n\n2. From the database sumamry, select **Properties**.\n\n    ![Select properties][select-properties]\n    \n2. Make note of the values for `Database`, `Host`, `User Id`, and `Password`.\n\n    ![Note properties][note-properties]\n\n3. From your web app, click the **Download publish profile** link at the bottom right corner of the page:\n\n    ![Download publish profile][download-publish-profile]\n\n4. Open the `.publishsettings` file in an XML editor. \n\n3. Find the `<publishProfile >` element with `publishMethod=\"FTP\"` that looks similar to this:\n\n        <publishProfile publishMethod=\"FTP\" publishUrl=\"ftp://[mysite].azurewebsites.net/site/wwwroot\" ftpPassiveMode=\"True\" userName=\"[username]\" userPWD=\"[password]\" destinationAppUrl=\"http://[name].antdf0.antares-test.windows-int.net\" \n            ...\n        </publishProfile>\n    \nMake note of the `publishUrl`, `userName`, and `userPWD` attributes.\n\n##Publish your app\n\nAfter you have tested your app locally, you can publish it to your web app using FTP. However, you first need to update the database connection information in the application. Using the database connection information you obtained earlier (in the **Get MySQL and FTP connection information** section), update the following information in **both** the `createdatabase.php` and `index.php` files with the appropriate values:\n\n    // DB connection info\n    $host = \"value of Data Source\";\n    $user = \"value of User Id\";\n    $pwd = \"value of Password\";\n    $db = \"value of Database\";\n\nNow you are ready to publish your app using FTP.\n\n1. Open your FTP client of choice.\n\n2. Enter the *host name portion* from the `publishUrl` attribute you noted above into your FTP client.\n\n3. Enter the `userName` and `userPWD` attributes you noted above unchanged into your FTP client.\n\n4. Establish a connection.\n\nAfter you have connected you will be able to upload and download files as needed. Be sure that you are uploading files to the root directory, which is `/site/wwwroot`.\n\nAfter uploading both `index.php` and `createtable.php`, browse to **http://[site name].azurewebsites.net/createtable.php** to create the MySQL table for the application, then browse to **http://[site name].azurewebsites.net/index.php** to begin using the application.\n \n\n[install-php]: http://www.php.net/manual/en/install.php\n[install-mysql]: http://dev.mysql.com/doc/refman/5.6/en/installing.html\n[pdo-mysql]: http://www.php.net/manual/en/ref.pdo-mysql.php\n[localhost-createtable]: http://localhost/tasklist/createtable.php\n[localhost-index]: http://localhost/tasklist/index.php\n[running-app]: ./media/web-sites-php-mysql-deploy-use-ftp/running_app_2.png\n[new-website]: ./media/web-sites-php-mysql-deploy-use-ftp/new_website2.png\n[custom-create]: ./media/web-sites-php-mysql-deploy-use-ftp/create_web_mysql.png\n[website-details]: ./media/web-sites-php-web-site-mysql-deploy-use-ftp/website_details.jpg\n[new-mysql-db]: ./media/web-sites-php-mysql-deploy-use-ftp/create_db.png\n[go-to-webapp]: ./media/web-sites-php-mysql-deploy-use-ftp/select_webapp.png\n[set-deployment-credentials]: ./media/web-sites-php-mysql-deploy-use-ftp/set_credentials.png\n[portal-ftp-username-password]: ./media/web-sites-php-mysql-deploy-use-ftp/save_credentials.png\n[resource-group]: ./media/web-sites-php-mysql-deploy-use-ftp/set_group.png\n[new-web-app]: ./media/web-sites-php-mysql-deploy-use-ftp/create_wa.png\n[select-database]: ./media/web-sites-php-mysql-deploy-use-ftp/select_database.png\n[select-properties]: ./media/web-sites-php-mysql-deploy-use-ftp/select_properties.png\n[note-properties]: ./media/web-sites-php-mysql-deploy-use-ftp/note-properties.png\n\n[connection-string-info]: ./media/web-sites-php-web-site-mysql-deploy-use-ftp/connection_string_info.png\n[management-portal]: https://portal.azure.com\n[download-publish-profile]: ./media/web-sites-php-mysql-deploy-use-ftp/download_publish_profile_3.png\n \n\ntest\n"
}