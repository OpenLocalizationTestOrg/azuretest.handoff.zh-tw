{
  "nodes": [
    {
      "content": "Application Insights for ASP.NET 5",
      "pos": [
        28,
        62
      ]
    },
    {
      "content": "Monitor web applications for availability, performance and usage.",
      "pos": [
        82,
        147
      ]
    },
    {
      "content": "Application Insights for ASP.NET 5",
      "pos": [
        470,
        504
      ]
    },
    {
      "content": "Visual Studio Application Insights lets you monitor your web application for availability, performance and usage.",
      "pos": [
        506,
        619
      ]
    },
    {
      "content": "With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.",
      "pos": [
        620,
        805
      ]
    },
    {
      "content": "Example",
      "pos": [
        809,
        816
      ]
    },
    {
      "content": "You'll need a subscription with <bpt id=\"p1\">[</bpt>Microsoft Azure<ept id=\"p1\">](http://azure.com)</ept>.",
      "pos": [
        865,
        933
      ]
    },
    {
      "content": "Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.",
      "pos": [
        934,
        1047
      ]
    },
    {
      "content": "Create an ASP.NET 5 project",
      "pos": [
        1053,
        1080
      ]
    },
    {
      "content": "... if you haven't already done that.",
      "pos": [
        1082,
        1119
      ]
    },
    {
      "content": "Use the standard ASP.NET 5 project template in Visual Studio 2015.",
      "pos": [
        1122,
        1188
      ]
    },
    {
      "content": "Create an Application Insights resource",
      "pos": [
        1194,
        1233
      ]
    },
    {
      "content": "In the [Azure portal][portal], create a new Application Insights resource.",
      "pos": [
        1235,
        1309
      ]
    },
    {
      "content": "Pick the ASP.NET option.",
      "pos": [
        1310,
        1334
      ]
    },
    {
      "content": "Click New, Developer services, Application Insights",
      "pos": [
        1338,
        1389
      ]
    },
    {
      "content": "The [resource][roles] blade that opens is the place where you'll see performance and usage data about your app.",
      "pos": [
        1442,
        1553
      ]
    },
    {
      "content": "To get back to it next time you login to Azure, you should find a tile for it on the start screen.",
      "pos": [
        1554,
        1652
      ]
    },
    {
      "content": "Alternatively click Browse to find it.",
      "pos": [
        1653,
        1691
      ]
    },
    {
      "content": "The choice of application type sets the default content of the resource blades and the properties visible in [Metrics Explorer][metrics].",
      "pos": [
        1693,
        1830
      ]
    },
    {
      "content": "Configure your project with the Instrumentation Key.",
      "pos": [
        1836,
        1888
      ]
    },
    {
      "content": "Copy the key from your Application Insights resource:",
      "pos": [
        1890,
        1943
      ]
    },
    {
      "content": "Click Properties, select the key, and press ctrl+C",
      "pos": [
        1947,
        1997
      ]
    },
    {
      "pos": [
        2052,
        2107
      ],
      "content": "In your ASP.NET 5 project, paste it into <ph id=\"ph1\">`config.json`</ph>:"
    },
    {
      "content": "Or if you’d prefer the configuration to be dynamic, you can add this code to the application’s Startup class:",
      "pos": [
        2230,
        2339
      ]
    },
    {
      "content": "Add Application Insights to your project",
      "pos": [
        2463,
        2503
      ]
    },
    {
      "content": "Reference the NuGet package",
      "pos": [
        2511,
        2538
      ]
    },
    {
      "pos": [
        2540,
        2661
      ],
      "content": "Find the <bpt id=\"p1\">[</bpt>latest release number<ept id=\"p1\">](https://github.com/Microsoft/ApplicationInsights-aspnet5/releases)</ept> of the NuGet package."
    },
    {
      "pos": [
        2663,
        2719
      ],
      "content": "Open <ph id=\"ph1\">`project.json`</ph> and edit the <ph id=\"ph2\">`dependencies`</ph> section:"
    },
    {
      "content": "Parse the configuration file",
      "pos": [
        3069,
        3097
      ]
    },
    {
      "pos": [
        3099,
        3115
      ],
      "content": "In <ph id=\"ph1\">`startup.cs`</ph>:"
    },
    {
      "pos": [
        3221,
        3245
      ],
      "content": "In the <ph id=\"ph1\">`Startup`</ph> method:"
    },
    {
      "pos": [
        3800,
        3838
      ],
      "content": "In the <ph id=\"ph1\">`ConfigurationServices`</ph> method:"
    },
    {
      "pos": [
        3902,
        3928
      ],
      "content": "In the <ph id=\"ph1\">`Configure`</ph> method:"
    },
    {
      "content": "Add JavaScript client instrumentation",
      "pos": [
        4264,
        4301
      ]
    },
    {
      "content": "If you have a _Layout.cshtml file, insert the following code there.",
      "pos": [
        4303,
        4370
      ]
    },
    {
      "content": "Otherwise, put the code in any page that you want to track.",
      "pos": [
        4371,
        4430
      ]
    },
    {
      "content": "Define injection in the very top of the file:",
      "pos": [
        4432,
        4477
      ]
    },
    {
      "content": "Insert the Html helper before the <ph id=\"ph1\">`&lt;/head&gt;`</ph> tag, and before any other script.",
      "pos": [
        4582,
        4659
      ]
    },
    {
      "content": "Any custom JavaScript telemetry you want to report from the page should be injected after this snippet:",
      "pos": [
        4660,
        4763
      ]
    },
    {
      "content": "Run your app",
      "pos": [
        4891,
        4903
      ]
    },
    {
      "content": "Debug your application in Visual Studio, or publish it to your web server.",
      "pos": [
        4905,
        4979
      ]
    },
    {
      "content": "View data about your app",
      "pos": [
        4984,
        5008
      ]
    },
    {
      "content": "Return to the [Azure portal][portal] and browse to your Application Insights resource.",
      "pos": [
        5010,
        5096
      ]
    },
    {
      "content": "If there is no data in the Overview blade, wait a minute or two and click Refresh.",
      "pos": [
        5097,
        5179
      ]
    },
    {
      "content": "[Track usage of your app][usage]",
      "pos": [
        5184,
        5216
      ]
    },
    {
      "content": "[Diagnose performance issues][detect]",
      "pos": [
        5219,
        5256
      ]
    },
    {
      "content": "[Set up web tests to monitor availability][availability]",
      "pos": [
        5259,
        5315
      ]
    },
    {
      "content": "Open source",
      "pos": [
        5322,
        5333
      ]
    },
    {
      "content": "Read and contribute to the code",
      "pos": [
        5336,
        5367
      ]
    },
    {
      "content": "test",
      "pos": [
        6186,
        6190
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Application Insights for ASP.NET 5\" \n    description=\"Monitor web applications for availability, performance and usage.\" \n    services=\"application-insights\" \n    documentationCenter=\".net\"\n    authors=\"alancameronwills\" \n    manager=\"ronmart\"/>\n\n<tags \n    ms.service=\"application-insights\" \n    ms.workload=\"tbd\" \n    ms.tgt_pltfrm=\"ibiza\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"05/27/2015\" \n    ms.author=\"awills\"/>\n\n# Application Insights for ASP.NET 5\n\nVisual Studio Application Insights lets you monitor your web application for availability, performance and usage. With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.\n\n![Example](./media/app-insights-asp-net-five/sample.png)\n\nYou'll need a subscription with [Microsoft Azure](http://azure.com). Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services. \n\n## Create an ASP.NET 5 project\n\n... if you haven't already done that. \n\nUse the standard ASP.NET 5 project template in Visual Studio 2015.\n\n\n## Create an Application Insights resource\n\nIn the [Azure portal][portal], create a new Application Insights resource. Pick the ASP.NET option.\n\n![Click New, Developer services, Application Insights](./media/app-insights-asp-net-five/01-new-asp.png)\n\nThe [resource][roles] blade that opens is the place where you'll see performance and usage data about your app. To get back to it next time you login to Azure, you should find a tile for it on the start screen. Alternatively click Browse to find it.\n\nThe choice of application type sets the default content of the resource blades and the properties visible in [Metrics Explorer][metrics].\n\n##  Configure your project with the Instrumentation Key.\n\nCopy the key from your Application Insights resource:\n\n![Click Properties, select the key, and press ctrl+C](./media/app-insights-asp-net-five/02-props-asp.png)\n\nIn your ASP.NET 5 project, paste it into `config.json`:\n\n    {\n      \"ApplicationInsights\": {\n        \"InstrumentationKey\": \"11111111-2222-3333-4444-555555555555\"\n      }\n    }\n\nOr if you’d prefer the configuration to be dynamic, you can add this code to the application’s Startup class:\n\n    configuration.AddApplicationInsightsSettings(\n      instrumentationKey: \"11111111-2222-3333-4444-555555555555\");\n\n\n## Add Application Insights to your project\n\n\n#### Reference the NuGet package\n\nFind the [latest release number](https://github.com/Microsoft/ApplicationInsights-aspnet5/releases) of the NuGet package.\n\nOpen `project.json` and edit the `dependencies` section:\n\n    {\n      \"dependencies\": {\n        // Replace 0.* with a specific version:\n        \"Microsoft.ApplicationInsights.AspNet\": \"0.*\",\n\n       // Add these if they aren't already there:\n       \"Microsoft.Framework.ConfigurationModel.Interfaces\": \"1.0.0-beta4\",\n       \"Microsoft.Framework.ConfigurationModel.Json\":  \"1.0.0-beta4\"\n      }\n    }\n\n#### Parse the configuration file\n\nIn `startup.cs`:\n\n    using Microsoft.ApplicationInsights.AspNet;\n\n    public IConfiguration Configuration { get; set; }\n\nIn the `Startup` method:\n\n    public Startup(IHostingEnvironment env, IApplicationEnvironment appEnv)\n    {\n        // Setup configuration sources.\n        var builder = new ConfigurationBuilder(appEnv.ApplicationBasePath)\n            .AddJsonFile(\"config.json\")\n            .AddJsonFile($\"config.{env.EnvironmentName}.json\", optional: true);\n        builder.AddEnvironmentVariables();\n\n        if (env.IsEnvironment(\"Development\"))\n        {\n            builder.AddApplicationInsightsSettings(developerMode: true);\n        }\n    \n        Configuration = builder.build();\n    }\n\nIn the `ConfigurationServices` method:\n\n    services.AddApplicationInsightsTelemetry(Configuration);\n\nIn the `Configure` method:\n\n    // Add Application Insights monitoring to the request pipeline as a very first middleware.\n    app.UseApplicationInsightsRequestTelemetry();\n\n    // Any other error handling middleware goes here.\n\n    // Add Application Insights exceptions handling to the request pipeline.\n    app.UseApplicationInsightsExceptionTelemetry();\n\n## Add JavaScript client instrumentation\n\nIf you have a _Layout.cshtml file, insert the following code there. Otherwise, put the code in any page that you want to track.\n\nDefine injection in the very top of the file:\n\n    @inject Microsoft.ApplicationInsights.Extensibility.TelemetryConfiguration TelemetryConfiguration\n\nInsert the Html helper before the `</head>` tag, and before any other script. Any custom JavaScript telemetry you want to report from the page should be injected after this snippet:\n\n    <head> \n\n      @Html.ApplicationInsightsJavaScript(TelemetryConfiguration) \n\n      <!-- other scripts -->\n    </head>\n\n## Run your app\n\nDebug your application in Visual Studio, or publish it to your web server.\n\n## View data about your app\n\nReturn to the [Azure portal][portal] and browse to your Application Insights resource. If there is no data in the Overview blade, wait a minute or two and click Refresh. \n\n* [Track usage of your app][usage]\n* [Diagnose performance issues][detect]\n* [Set up web tests to monitor availability][availability]\n\n\n\n## Open source\n\n[Read and contribute to the code](https://github.com/Microsoft/ApplicationInsights-aspnet5)\n\n\n<!--Link references-->\n\n[api]: app-insights-api-custom-events-metrics.md\n[apikey]: app-insights-api-custom-events-metrics.md#ikey\n[availability]: app-insights-monitor-web-app-availability.md\n[azure]: ../insights-perf-analytics.md\n[client]: app-insights-javascript.md\n[detect]: app-insights-detect-triage-diagnose.md\n[diagnostic]: app-insights-diagnostic-search.md\n[knowUsers]: app-insights-overview-usage.md\n[metrics]: app-insights-metrics-explorer.md\n[netlogs]: app-insights-asp-net-trace-logs.md\n[perf]: app-insights-web-monitor-performance.md\n[portal]: http://portal.azure.com/\n[qna]: app-insights-troubleshoot-faq.md\n[roles]: app-insights-resources-roles-access-control.md\n[start]: app-insights-get-started.md\n[usage]: app-insights-web-track-usage.md \n\ntest\n"
}