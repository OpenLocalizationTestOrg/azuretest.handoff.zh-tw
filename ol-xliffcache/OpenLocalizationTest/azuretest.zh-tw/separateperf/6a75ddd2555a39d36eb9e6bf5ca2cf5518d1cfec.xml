{
  "nodes": [
    {
      "content": "Configuring Oracle GoldenGate for Azure",
      "pos": [
        71,
        110
      ]
    },
    {
      "content": "Step through a tutorial for setting up and implementing Oracle GoldenGate on Azure Virtual Machines for high availability and disaster recovery.",
      "pos": [
        125,
        269
      ]
    },
    {
      "content": "Configuring Oracle GoldenGate for Azure",
      "pos": [
        511,
        550
      ]
    },
    {
      "content": "This tutorial demonstrates how to setup Oracle GoldenGate for Azure Virtual Machines environment for high availability and disaster recovery.",
      "pos": [
        551,
        692
      ]
    },
    {
      "content": "The tutorial focuses on <bpt id=\"p1\">[</bpt>bi-directional replication<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/GWUAD/wu_about_gg.htm)</ept> for non-RAC Oracle databases and requires that both sites are active.",
      "pos": [
        693,
        886
      ]
    },
    {
      "content": "Oracle GoldenGate supports data distribution and data integration.",
      "pos": [
        888,
        954
      ]
    },
    {
      "content": "It enables you to set up a data distribution and data synchronization solution through the Oracle-Oracle replication configuration, and provides a flexible high availability solution.",
      "pos": [
        955,
        1138
      ]
    },
    {
      "content": "Oracle GoldenGate supplements Oracle Data Guard with its replication capabilities to enable enterprise-wide information distribution and zero-downtime upgrades and migrations.",
      "pos": [
        1139,
        1314
      ]
    },
    {
      "content": "For detailed information, see <bpt id=\"p1\">[</bpt>Using Oracle GoldenGate with Oracle Data Guard<ept id=\"p1\">](http://docs.oracle.com/cd/E11882_01/server.112/e17157/unplanned.htm)</ept>.",
      "pos": [
        1315,
        1463
      ]
    },
    {
      "content": "Oracle GoldenGate contains the following main components: Extract, Data pump, Replicat, Trails or extract files, Checkpoints, Manager and Collector.",
      "pos": [
        1465,
        1613
      ]
    },
    {
      "content": "To have bi-directional replication between two sites, you need to create and start all components on both sites.",
      "pos": [
        1614,
        1726
      ]
    },
    {
      "content": "For detailed information on Oracle GoldenGate architecture, see <bpt id=\"p1\">[</bpt>Oracle GoldenGate Guide<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/index.html)</ept>.",
      "pos": [
        1727,
        1877
      ]
    },
    {
      "content": "This tutorial assumes that you already have theoretical and practical knowledge on Oracle Database High Availability and Disaster Recovery concepts as well as <bpt id=\"p1\">[</bpt>Oracle GoldenGate<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/index.html)</ept>.",
      "pos": [
        1879,
        2118
      ]
    },
    {
      "content": "For more information, see the <bpt id=\"p1\">[</bpt>Oracle web site<ept id=\"p1\">](http://www.oracle.com/technetwork/database/features/availability/index.html)</ept>.",
      "pos": [
        2119,
        2244
      ]
    },
    {
      "content": "In addition, the tutorial assumes that you have already implemented the following prerequisites:",
      "pos": [
        2246,
        2342
      ]
    },
    {
      "content": "You’ve already reviewed the High Availability and Disaster Recovery Considerations section in the <bpt id=\"p1\">[</bpt>Oracle Virtual Machine images - Miscellaneous Considerations<ept id=\"p1\">](virtual-machines-miscellaneous-considerations-oracle-virtual-machine-images.md)</ept> topic.",
      "pos": [
        2346,
        2593
      ]
    },
    {
      "content": "Note that Azure supports standalone Oracle Database instances but not Oracle Real Application Clusters (Oracle RAC) currently.",
      "pos": [
        2594,
        2720
      ]
    },
    {
      "content": "You’ve downloaded the Oracle GoldenGate software from the <bpt id=\"p1\">[</bpt>Oracle Downloads<ept id=\"p1\">](http://www.oracle.com/us/downloads/index.html)</ept> web site.",
      "pos": [
        2724,
        2857
      ]
    },
    {
      "content": "You’ve selected the Product Pack Oracle Fusion Middleware – Data Integration.",
      "pos": [
        2858,
        2935
      ]
    },
    {
      "content": "Then, you’ve selected Oracle GoldenGate on Oracle v11.2.1 Media Pack for Microsoft Windows x64 (64-bit) for an Oracle 11g database.",
      "pos": [
        2936,
        3067
      ]
    },
    {
      "content": "Next, download Oracle GoldenGate V11.2.1.0.3 for Oracle 11g 64bit on Windows 2008 (64bit).",
      "pos": [
        3068,
        3158
      ]
    },
    {
      "content": "You have created two Virtual Machines (VMs) in Azure using the platform provided Oracle Enterprise Edition image on Windows Server.",
      "pos": [
        3162,
        3293
      ]
    },
    {
      "content": "For information, see <bpt id=\"p1\">[</bpt>Creating an Oracle Database 12c Virtual Machine in Azure<ept id=\"p1\">](#z3dc8d3c097cf414e9048f7a89c026f80)</ept> and <bpt id=\"p2\">[</bpt>Azure Virtual Machines<ept id=\"p2\">](http://azure.microsoft.com/documentation/services/virtual-machines/)</ept>.",
      "pos": [
        3294,
        3508
      ]
    },
    {
      "content": "Make sure that the Virtual Machines are in the <bpt id=\"p1\">[</bpt>same cloud service<ept id=\"p1\">](virtual-machines-load-balance.md)</ept> and in the same <bpt id=\"p2\">[</bpt>Virtual Network<ept id=\"p2\">](http://azure.microsoft.com/documentation/services/virtual-network/)</ept> to ensure they can access each other over the persistent private IP address.",
      "pos": [
        3509,
        3789
      ]
    },
    {
      "content": "You’ve set the Virtual Machine names as “MachineGG1” for Site A and “MachineGG2” for Site B at the Azure Portal.",
      "pos": [
        3793,
        3905
      ]
    },
    {
      "content": "You’ve created test databases “TestGG1” on Site A and “TestGG2” on Site B.",
      "pos": [
        3909,
        3983
      ]
    },
    {
      "pos": [
        3987,
        4098
      ],
      "content": "You log on to your Windows server as a member of the Administrators group or a member of the <bpt id=\"p1\">**</bpt>ORA_DBA<ept id=\"p1\">**</ept> group."
    },
    {
      "content": "In this tutorial, you will:",
      "pos": [
        4100,
        4127
      ]
    },
    {
      "content": "Setup database on Site A and Site B",
      "pos": [
        4132,
        4167
      ]
    },
    {
      "content": "Perform initial data load",
      "pos": [
        4178,
        4203
      ]
    },
    {
      "content": "Prepare Site A and Site B for database replication",
      "pos": [
        4212,
        4262
      ]
    },
    {
      "content": "Create all necessary objects to support DDL Replication",
      "pos": [
        4267,
        4322
      ]
    },
    {
      "content": "Configure GoldenGate Manager on Site A and Site B",
      "pos": [
        4327,
        4376
      ]
    },
    {
      "content": "Create Extract Group and Data Pump processes on Site A and Site B",
      "pos": [
        4381,
        4446
      ]
    },
    {
      "content": "Create Extract and Data Pump processes on Site A",
      "pos": [
        4455,
        4503
      ]
    },
    {
      "content": "Create a GoldenGate checkpoint table on Site B",
      "pos": [
        4512,
        4558
      ]
    },
    {
      "content": "Add REPLICAT on Site B",
      "pos": [
        4567,
        4589
      ]
    },
    {
      "content": "Create Extract and Data Pump processes on Site B",
      "pos": [
        4598,
        4646
      ]
    },
    {
      "content": "Create a GoldenGate checkpoint table on Site A",
      "pos": [
        4655,
        4701
      ]
    },
    {
      "content": "Add REPLICAT on Site A",
      "pos": [
        4710,
        4732
      ]
    },
    {
      "content": "Add trandata on Site A and Site B",
      "pos": [
        4741,
        4774
      ]
    },
    {
      "content": "Start Extract and Data Pump processes on Site A",
      "pos": [
        4783,
        4830
      ]
    },
    {
      "content": "Start Extract and Data Pump processes on Site B",
      "pos": [
        4839,
        4886
      ]
    },
    {
      "content": "Start REPLICAT process on Site A",
      "pos": [
        4896,
        4928
      ]
    },
    {
      "content": "Start REPLICAT process on Site B",
      "pos": [
        4938,
        4970
      ]
    },
    {
      "content": "Verify the bi-directional replication process",
      "pos": [
        4975,
        5020
      ]
    },
    {
      "pos": [
        5023,
        5126
      ],
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> This tutorial has been setup and tested against the following software configuration:"
    },
    {
      "content": "Site A Database",
      "pos": [
        5159,
        5174
      ]
    },
    {
      "content": "Site B Database",
      "pos": [
        5194,
        5209
      ]
    },
    {
      "content": "Oracle Release",
      "pos": [
        5330,
        5344
      ]
    },
    {
      "content": "Oracle11g Release 2 – (11.2.0.1)",
      "pos": [
        5353,
        5385
      ]
    },
    {
      "content": "Oracle11g Release 2 – (11.2.0.1)",
      "pos": [
        5388,
        5420
      ]
    },
    {
      "content": "Machine Name",
      "pos": [
        5428,
        5440
      ]
    },
    {
      "content": "MachineGG1",
      "pos": [
        5451,
        5461
      ]
    },
    {
      "content": "MachineGG2",
      "pos": [
        5486,
        5496
      ]
    },
    {
      "content": "Operating System",
      "pos": [
        5526,
        5542
      ]
    },
    {
      "content": "Windows 2008 R2",
      "pos": [
        5549,
        5564
      ]
    },
    {
      "content": "Windows 2008 R2",
      "pos": [
        5584,
        5599
      ]
    },
    {
      "content": "Oracle SID",
      "pos": [
        5624,
        5634
      ]
    },
    {
      "content": "TESTGG1",
      "pos": [
        5647,
        5654
      ]
    },
    {
      "content": "TESTGG2",
      "pos": [
        5682,
        5689
      ]
    },
    {
      "content": "Replication Schema",
      "pos": [
        5722,
        5740
      ]
    },
    {
      "content": "SCOTT",
      "pos": [
        5745,
        5750
      ]
    },
    {
      "content": "SCOTT",
      "pos": [
        5780,
        5785
      ]
    },
    {
      "content": "For subsequent releases of Oracle Database and Oracle GoldenGate, there might be some additional changes that you need to implement.",
      "pos": [
        5816,
        5948
      ]
    },
    {
      "content": "For the most up-to-date version specific information, see <bpt id=\"p1\">[</bpt>Oracle GoldenGate<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/index.html)</ept> and <bpt id=\"p2\">[</bpt>Oracle Database<ept id=\"p2\">](http://www.oracle.com/us/corporate/features/database-12c/index.html)</ept> documentation at Oracle web site.",
      "pos": [
        5949,
        6211
      ]
    },
    {
      "content": "For example, for a release 11.2.0.4 source database and later, the capture of DDL is performed by the logmining server asynchronously and requires no special triggers, tables, or other database objects to be installed.",
      "pos": [
        6212,
        6430
      ]
    },
    {
      "content": "Oracle GoldenGate upgrades can be performed without stopping user applications.",
      "pos": [
        6431,
        6510
      ]
    },
    {
      "content": "The use of a DDL trigger and supporting objects is required when Extract is in integrated mode with an Oracle 11g source database that is earlier than version 11.2.0.4.",
      "pos": [
        6511,
        6679
      ]
    },
    {
      "content": "For detailed guidance, see <bpt id=\"p1\">[</bpt>Installing and Configuring Oracle GoldenGate for Oracle Database<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/GIORA.pdf)</ept>.",
      "pos": [
        6680,
        6833
      ]
    },
    {
      "content": "1.",
      "pos": [
        6837,
        6839
      ]
    },
    {
      "content": "Setup database on Site A and Site B",
      "pos": [
        6840,
        6875
      ]
    },
    {
      "content": "This section explains how to perform the database prerequisites on both Site A and Site B. You must perform all the steps of this section on both sites: Site A and Site B.",
      "pos": [
        6876,
        7047
      ]
    },
    {
      "content": "First, remote desktop to Site A and Site B via the Management Portal.",
      "pos": [
        7049,
        7118
      ]
    },
    {
      "content": "Open up a Windows command prompt and create a home directory for Oracle GoldenGate setup files:",
      "pos": [
        7119,
        7214
      ]
    },
    {
      "content": "Then, unzip and install the Oracle GoldenGate software in this folder.",
      "pos": [
        7239,
        7309
      ]
    },
    {
      "content": "After this step, you can initiate the GoldenGate Software Command Interpreter (GGSCI) by executing the following command:",
      "pos": [
        7310,
        7431
      ]
    },
    {
      "pos": [
        7458,
        7634
      ],
      "content": "You can use <bpt id=\"p1\">[</bpt>GGSCI<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/GWUAD/wu_gettingstarted.htm)</ept> to run several commands that configure, control, and monitor Oracle GoldenGate."
    },
    {
      "content": "Next, run the following command to create all sub-folders from the installation package:",
      "pos": [
        7636,
        7724
      ]
    },
    {
      "content": "Run the following command to exit the GGSCI command prompt:",
      "pos": [
        7766,
        7825
      ]
    },
    {
      "content": "Then, you need to create a database user, which will be used by the Oracle GoldenGate Manager, Extract and Replication processes.",
      "pos": [
        7857,
        7986
      ]
    },
    {
      "content": "Note that you can create individual users for each process or configure only one common user.",
      "pos": [
        7987,
        8080
      ]
    },
    {
      "content": "In this tutorial, we create one user, which is called as ggate.",
      "pos": [
        8081,
        8144
      ]
    },
    {
      "content": "Then, we grant that user the necessary privileges.",
      "pos": [
        8145,
        8195
      ]
    },
    {
      "content": "Note that you must perform the following operations on Site A and Site B.",
      "pos": [
        8196,
        8269
      ]
    },
    {
      "pos": [
        8271,
        8390
      ],
      "content": "Open up SQL\\*Plus command window on Site A and Site B with database administrator privileges using <bpt id=\"p1\">**</bpt>SYSDBA<ept id=\"p1\">**</ept>, such as:"
    },
    {
      "content": "And run:",
      "pos": [
        8425,
        8433
      ]
    },
    {
      "content": "Next, locate the INIT\\&lt;DatabaseSID\\&gt;.ORA file in the %ORACLE\\_HOME%\\\\database folder on Site A and Site B and append the following database parameters to INITTEST.ora:",
      "pos": [
        9164,
        9331
      ]
    },
    {
      "pos": [
        9386,
        9567
      ],
      "content": "For a full list of all Oracle GoldenGate GGSCI commands, see <bpt id=\"p1\">[</bpt>Reference for Oracle GoldenGate for Windows<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/GWURF/ggsci_commands.htm)</ept>."
    },
    {
      "content": "Perform initial data load",
      "pos": [
        9573,
        9598
      ]
    },
    {
      "content": "You can perform the initial data load in the database by following several methods.",
      "pos": [
        9600,
        9683
      ]
    },
    {
      "content": "For example, you can use the <bpt id=\"p1\">[</bpt>Oracle GoldenGate Direct Load<ept id=\"p1\">](http://docs.oracle.com/goldengate/1212/gg-winux/GWUAD/wu_initsync.htm)</ept> or regular Export and Import utilities to export table data from Site A to Site B.",
      "pos": [
        9684,
        9898
      ]
    },
    {
      "content": "To demonstrate the Oracle GoldenGate replication process, this tutorial demonstrates creating a table on both Site A and site B by using the following commands.",
      "pos": [
        9900,
        10060
      ]
    },
    {
      "content": "First, open up SQL\\*Plus command window and run the following command to create an inventory table on Site A and Site B databases:",
      "pos": [
        10062,
        10192
      ]
    },
    {
      "content": "Next, add a constraint to the newly created table on Site A and Site B databases:",
      "pos": [
        10356,
        10437
      ]
    },
    {
      "content": "Then, grant all privileges on the new inventory table to the user ggate on Site A and Site B:",
      "pos": [
        10524,
        10617
      ]
    },
    {
      "content": "Next, create and enable a database trigger, INVENTORY_CDR_TRG, on the newly created table to make sure that all transactions to the new table are recorded if the user is not ggate.",
      "pos": [
        10663,
        10843
      ]
    },
    {
      "content": "Perform this operation on Site A and Site B.",
      "pos": [
        10844,
        10888
      ]
    },
    {
      "content": "2.",
      "pos": [
        11178,
        11180
      ]
    },
    {
      "content": "Prepare Site A and Site B for database replication",
      "pos": [
        11181,
        11231
      ]
    },
    {
      "content": "This section explains how to prepare Site A and Site B for database replication.",
      "pos": [
        11232,
        11312
      ]
    },
    {
      "content": "You must perform all the steps of this section on both sites: Site A and Site B.",
      "pos": [
        11313,
        11393
      ]
    },
    {
      "content": "First, remote desktop to Site A and Site B via the Azure Portal.",
      "pos": [
        11395,
        11459
      ]
    },
    {
      "content": "Switch the database to archivelog mode using the SQL*Plus command window:",
      "pos": [
        11460,
        11533
      ]
    },
    {
      "pos": [
        11658,
        11781
      ],
      "content": "Then, enable minimal <bpt id=\"p1\">[</bpt>supplemental logging<ept id=\"p1\">](http://docs.oracle.com/cd/E11882_01/server.112/e22490/logminer.htm)</ept> as follows:"
    },
    {
      "content": "Next, prepare the database to support DDL (data definition language) replication:",
      "pos": [
        11849,
        11930
      ]
    },
    {
      "content": "Then, shutdown and restart the database:",
      "pos": [
        11988,
        12028
      ]
    },
    {
      "content": "3.",
      "pos": [
        12078,
        12080
      ]
    },
    {
      "content": "Create all necessary objects to support DDL Replication",
      "pos": [
        12081,
        12136
      ]
    },
    {
      "content": "This section lists the scripts that you need to use to create all necessary objects to support DDL Replication.",
      "pos": [
        12137,
        12248
      ]
    },
    {
      "content": "You need to run the scripts specified in this section on both Site A and Site B.",
      "pos": [
        12249,
        12329
      ]
    },
    {
      "content": "Open up a Windows command prompt and navigate to the Oracle GoldenGate folder, such as C:\\\\OracleGG.",
      "pos": [
        12331,
        12431
      ]
    },
    {
      "content": "Start SQL\\*Plus command prompt with database administrator privileges, such as using <bpt id=\"p1\">**</bpt>SYSDBA<ept id=\"p1\">**</ept> on Site A and Site B.",
      "pos": [
        12432,
        12549
      ]
    },
    {
      "content": "Then, run the following scripts:",
      "pos": [
        12551,
        12583
      ]
    },
    {
      "content": "Oracle GoldenGate tool requires a table level login for DDL (data definition language) support.",
      "pos": [
        12925,
        13020
      ]
    },
    {
      "content": "That’s why, enable supplemental logging at the table level by using the ADD TRANDATA command.",
      "pos": [
        13021,
        13114
      ]
    },
    {
      "content": "Open up Oracle GoldenGate Command interpreter window, login to database, and then run the ADD TRANDATA command:",
      "pos": [
        13115,
        13226
      ]
    },
    {
      "content": "4.",
      "pos": [
        13334,
        13336
      ]
    },
    {
      "content": "Configure GoldenGate Manager on Site A and Site B",
      "pos": [
        13337,
        13386
      ]
    },
    {
      "content": "The Oracle GoldenGate Manager performs a number of functions like starting the other GoldenGate processes, trail log file management and reporting.",
      "pos": [
        13387,
        13534
      ]
    },
    {
      "content": "You need to configure the Oracle GoldenGate Manager process on both Site A and Site B. To do this, perform the following steps on Site A and Site B.",
      "pos": [
        13536,
        13684
      ]
    },
    {
      "content": "Open Windows command window and initiate the Oracle GoldenGate command interpreter:",
      "pos": [
        13686,
        13769
      ]
    },
    {
      "content": "Logs the GGSCI session into a database so that you can execute commands that affect the database:",
      "pos": [
        14086,
        14183
      ]
    },
    {
      "content": "Display the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:",
      "pos": [
        14286,
        14391
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        14522,
        14618
      ]
    },
    {
      "content": "Display the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:",
      "pos": [
        14768,
        14873
      ]
    },
    {
      "content": "Logs the GGSCI session into a database so that you can execute commands that affect the database:",
      "pos": [
        15005,
        15102
      ]
    },
    {
      "content": "Start the manager process:",
      "pos": [
        15207,
        15233
      ]
    },
    {
      "content": "5.",
      "pos": [
        15298,
        15300
      ]
    },
    {
      "content": "Create Extract Group and Data Pump processes on Site A and Site B",
      "pos": [
        15301,
        15366
      ]
    },
    {
      "content": "Create Extract and Data Pump processes on Site A",
      "pos": [
        15371,
        15419
      ]
    },
    {
      "content": "You need to create the Extract and Data Pump processes on Site A and Site B.",
      "pos": [
        15421,
        15497
      ]
    },
    {
      "content": "Remote desktop to Site A and Site B via the Management Portal.",
      "pos": [
        15499,
        15561
      ]
    },
    {
      "content": "Open up GGSCI command interpreter window.",
      "pos": [
        15562,
        15603
      ]
    },
    {
      "content": "Run the following commands on Site A:",
      "pos": [
        15604,
        15641
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        16019,
        16115
      ]
    },
    {
      "content": "GGSCI (MachineGG1) 18&gt; edit params ext1",
      "pos": [
        16120,
        16159
      ]
    },
    {
      "content": "EXTRACT ext1",
      "pos": [
        16164,
        16176
      ]
    },
    {
      "content": "USERID ggate, PASSWORD ggate",
      "pos": [
        16182,
        16210
      ]
    },
    {
      "content": "EXTTRAIL C:\\OracleGG\\dirdat\\aa",
      "pos": [
        16216,
        16246
      ]
    },
    {
      "content": "TRANLOGOPTIONS EXCLUDEUSER ggate",
      "pos": [
        16252,
        16284
      ]
    },
    {
      "content": "TABLE scott.inventory,",
      "pos": [
        16290,
        16312
      ]
    },
    {
      "content": "GETBEFORECOLS (",
      "pos": [
        16318,
        16333
      ]
    },
    {
      "content": "ON UPDATE KEYINCLUDING (prod_category,qty_in_stock, last_dml),",
      "pos": [
        16339,
        16401
      ]
    },
    {
      "content": "ON DELETE KEYINCLUDING (prod_category,qty_in_stock, last_dml));",
      "pos": [
        16407,
        16470
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        16472,
        16568
      ]
    },
    {
      "content": "Create a GoldenGate checkpoint table on Site B",
      "pos": [
        16813,
        16859
      ]
    },
    {
      "content": "Next, you need to add a checkpoint table on Site B. To do this, you need to open up a GoldenGate command interpreter window and run:",
      "pos": [
        16861,
        16993
      ]
    },
    {
      "content": "And then, add the checkpoint table to the database, where ggate is the owner:",
      "pos": [
        17120,
        17197
      ]
    },
    {
      "content": "Add the name of the check point table to the GLOBALS file on the target server, which is Site B in this step.",
      "pos": [
        17337,
        17446
      ]
    },
    {
      "content": "Edit the GLOBALS file on Site B:",
      "pos": [
        17447,
        17479
      ]
    },
    {
      "content": "Then, append the CHECKPOINTTABLE parameter to the existing GLOBALS file:",
      "pos": [
        17530,
        17602
      ]
    },
    {
      "content": "As a final step, save and close the GLOBALS parameter file.",
      "pos": [
        17666,
        17725
      ]
    },
    {
      "content": "Add REPLICAT on Site B",
      "pos": [
        17731,
        17753
      ]
    },
    {
      "content": "This section describes how to add a REPLICAT process “REP2” on Site B.",
      "pos": [
        17754,
        17824
      ]
    },
    {
      "content": "Use ADD REPLICAT command to create a Replicat group on Site B:",
      "pos": [
        17827,
        17889
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        18006,
        18102
      ]
    },
    {
      "content": "Create Extract and Data Pump processes on Site B",
      "pos": [
        18341,
        18389
      ]
    },
    {
      "content": "This section describes how to create a new extract process “EXT2” and a new data pump process “DPUMP2” on Site B:",
      "pos": [
        18391,
        18504
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        18882,
        18978
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        19329,
        19425
      ]
    },
    {
      "content": "Create a GoldenGate checkpoint table on Site A",
      "pos": [
        19660,
        19706
      ]
    },
    {
      "content": "Open up Oracle GoldenGate command interpreter window and create a checkpoint table:",
      "pos": [
        19708,
        19791
      ]
    },
    {
      "content": "You also need to add the name of the check point table to the GLOBALS file on Site A.",
      "pos": [
        20031,
        20116
      ]
    },
    {
      "content": "Open up Oracle GoldenGate command interpreter window and edit the GLOBALS file on Site A:",
      "pos": [
        20119,
        20208
      ]
    },
    {
      "content": "Save and close the GLOBALS parameter file.",
      "pos": [
        20399,
        20441
      ]
    },
    {
      "content": "Add REPLICAT on Site A",
      "pos": [
        20446,
        20468
      ]
    },
    {
      "content": "This section describes how to add a REPLICAT process “REP1” on Site A.",
      "pos": [
        20470,
        20540
      ]
    },
    {
      "content": "The following command creates a Replicat group rep1 with the name of a trail, and the associated checkpointtable.",
      "pos": [
        20543,
        20656
      ]
    },
    {
      "content": "Open the parameter file using the EDIT PARAMS command and then append the following information:",
      "pos": [
        20794,
        20890
      ]
    },
    {
      "content": "Add trandata on Site A and Site B",
      "pos": [
        21131,
        21164
      ]
    },
    {
      "content": "Enable supplemental logging at the table level by using the ADD TRANDATA command.",
      "pos": [
        21166,
        21247
      ]
    },
    {
      "content": "Open up Oracle GoldenGate Command interpreter window, login to database, and then run the ADD TRANDATA command.",
      "pos": [
        21248,
        21359
      ]
    },
    {
      "content": "Remote desktop to MachineGG1, open up Oracle GoldenGate command interpreter, and run:",
      "pos": [
        21361,
        21446
      ]
    },
    {
      "content": "Remote desktop to MachineGG2, open up Oracle GoldenGate command interpreter, and run:",
      "pos": [
        21906,
        21991
      ]
    },
    {
      "content": "Display information about the state of table-level supplemental logging:",
      "pos": [
        22270,
        22342
      ]
    },
    {
      "content": "Add trandata on Site A and Site B",
      "pos": [
        22594,
        22627
      ]
    },
    {
      "content": "Enable supplemental logging at the table level by using the ADD TRANDATA command.",
      "pos": [
        22629,
        22710
      ]
    },
    {
      "content": "Open up Oracle GoldenGate Command interpreter window, login to database, and then run the ADD TRANDATA command.",
      "pos": [
        22711,
        22822
      ]
    },
    {
      "content": "Remote desktop to MachineGG1, open up Oracle GoldenGate command interpreter, and run:",
      "pos": [
        22825,
        22910
      ]
    },
    {
      "content": "Remote desktop to MachineGG2, open up Oracle GoldenGate command interpreter, and run:",
      "pos": [
        23362,
        23447
      ]
    },
    {
      "content": "Start Extract and Data Pump processes on Site A",
      "pos": [
        24052,
        24099
      ]
    },
    {
      "content": "Start the Extract process ext1 on Site A:",
      "pos": [
        24101,
        24142
      ]
    },
    {
      "content": "Start the data pump process dpump1 on Site A:",
      "pos": [
        24256,
        24301
      ]
    },
    {
      "content": "Display information about the Extract group ext1:",
      "pos": [
        24418,
        24467
      ]
    },
    {
      "content": "GGSCI (MachineGG1) 32&gt; info extract ext1",
      "pos": [
        24472,
        24512
      ]
    },
    {
      "content": "EXTRACT    EXT1      Last Started 2013-11-25 08:03   Status RUNNING",
      "pos": [
        24517,
        24584
      ]
    },
    {
      "content": "Checkpoint Lag       00:00:00 (updated 00:00:02 ago)",
      "pos": [
        24589,
        24641
      ]
    },
    {
      "content": "Log Read Checkpoint  Oracle Redo Logs",
      "pos": [
        24646,
        24683
      ]
    },
    {
      "content": "2013-11-25 08:03:18  Seqno 6, RBA 3230720",
      "pos": [
        24689,
        24730
      ]
    },
    {
      "content": "SCN 0.1074371 (1074371)",
      "pos": [
        24736,
        24759
      ]
    },
    {
      "content": "Display the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:",
      "pos": [
        24761,
        24866
      ]
    },
    {
      "content": "Start Extract and Data Pump processes on Site B",
      "pos": [
        25134,
        25181
      ]
    },
    {
      "content": "Start the Extract process ext2 on Site B:",
      "pos": [
        25183,
        25224
      ]
    },
    {
      "content": "Start the data pump process dpump2 on Site B:",
      "pos": [
        25338,
        25383
      ]
    },
    {
      "content": "Display the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:",
      "pos": [
        25501,
        25606
      ]
    },
    {
      "content": "Start REPLICAT process on Site A",
      "pos": [
        25880,
        25912
      ]
    },
    {
      "content": "This section describes how to start the REPLICAT process “REP1” on Site A.",
      "pos": [
        25914,
        25988
      ]
    },
    {
      "content": "Start the Replicat process on Site A:",
      "pos": [
        25991,
        26028
      ]
    },
    {
      "content": "Display the status of a Replicat group:",
      "pos": [
        26144,
        26183
      ]
    },
    {
      "content": "Start REPLICAT process on Site B",
      "pos": [
        26265,
        26297
      ]
    },
    {
      "content": "This section describes how to start the REPLICAT process “REP2” on Site B.",
      "pos": [
        26299,
        26373
      ]
    },
    {
      "content": "Start the Replicat process on Site B:",
      "pos": [
        26376,
        26413
      ]
    },
    {
      "content": "Display the status of a Replicat group:",
      "pos": [
        26529,
        26568
      ]
    },
    {
      "content": "6.",
      "pos": [
        26648,
        26650
      ]
    },
    {
      "content": "Verify the bi-directional replication process",
      "pos": [
        26651,
        26696
      ]
    },
    {
      "content": "To verify the Oracle GoldenGate configuration, insert a row into the database at Site A.",
      "pos": [
        26698,
        26786
      ]
    },
    {
      "content": "Remote Desktop to Site A. Open up SQL*Plus command window and run:",
      "pos": [
        26788,
        26854
      ]
    },
    {
      "content": "SQL&gt; select name from v$database;",
      "pos": [
        26859,
        26892
      ]
    },
    {
      "content": "Then, check if that row is replicated on Site B. To do this, remote desktop to Site B. Open up SQL Plus window and run:",
      "pos": [
        27067,
        27186
      ]
    },
    {
      "content": "Insert a new record at Site B:",
      "pos": [
        27403,
        27433
      ]
    },
    {
      "content": "Remote desktop to Site A and check if the replication has taken place:",
      "pos": [
        27567,
        27637
      ]
    },
    {
      "content": "Additional Resources",
      "pos": [
        27805,
        27825
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Oracle Virtual Machine images for Azure<ept id=\"p1\">](virtual-machines-oracle-list-oracle-virtual-machine-images.md)</ept>",
      "pos": [
        27826,
        27930
      ]
    }
  ],
  "content": "<properties title=\"Configuring Oracle GoldenGate for Azure\" pageTitle=\"Configuring Oracle GoldenGate for Azure\" description=\"Step through a tutorial for setting up and implementing Oracle GoldenGate on Azure Virtual Machines for high availability and disaster recovery.\" services=\"virtual-machines\" authors=\"bbenz\" documentationCenter=\"\"/>\n<tags ms.service=\"virtual-machines\" ms.devlang=\"na\" ms.topic=\"article\" ms.tgt_pltfrm=\"na\" ms.workload=\"infrastructure-services\" ms.date=\"06/22/2015\" ms.author=\"bbenz\" />\n#Configuring Oracle GoldenGate for Azure\nThis tutorial demonstrates how to setup Oracle GoldenGate for Azure Virtual Machines environment for high availability and disaster recovery. The tutorial focuses on [bi-directional replication](http://docs.oracle.com/goldengate/1212/gg-winux/GWUAD/wu_about_gg.htm) for non-RAC Oracle databases and requires that both sites are active.\n\nOracle GoldenGate supports data distribution and data integration. It enables you to set up a data distribution and data synchronization solution through the Oracle-Oracle replication configuration, and provides a flexible high availability solution. Oracle GoldenGate supplements Oracle Data Guard with its replication capabilities to enable enterprise-wide information distribution and zero-downtime upgrades and migrations. For detailed information, see [Using Oracle GoldenGate with Oracle Data Guard](http://docs.oracle.com/cd/E11882_01/server.112/e17157/unplanned.htm).\n\nOracle GoldenGate contains the following main components: Extract, Data pump, Replicat, Trails or extract files, Checkpoints, Manager and Collector. To have bi-directional replication between two sites, you need to create and start all components on both sites. For detailed information on Oracle GoldenGate architecture, see [Oracle GoldenGate Guide](http://docs.oracle.com/goldengate/1212/gg-winux/index.html).\n\nThis tutorial assumes that you already have theoretical and practical knowledge on Oracle Database High Availability and Disaster Recovery concepts as well as [Oracle GoldenGate](http://docs.oracle.com/goldengate/1212/gg-winux/index.html). For more information, see the [Oracle web site](http://www.oracle.com/technetwork/database/features/availability/index.html).\n\nIn addition, the tutorial assumes that you have already implemented the following prerequisites:\n\n- You’ve already reviewed the High Availability and Disaster Recovery Considerations section in the [Oracle Virtual Machine images - Miscellaneous Considerations](virtual-machines-miscellaneous-considerations-oracle-virtual-machine-images.md) topic. Note that Azure supports standalone Oracle Database instances but not Oracle Real Application Clusters (Oracle RAC) currently.\n\n- You’ve downloaded the Oracle GoldenGate software from the [Oracle Downloads](http://www.oracle.com/us/downloads/index.html) web site. You’ve selected the Product Pack Oracle Fusion Middleware – Data Integration. Then, you’ve selected Oracle GoldenGate on Oracle v11.2.1 Media Pack for Microsoft Windows x64 (64-bit) for an Oracle 11g database. Next, download Oracle GoldenGate V11.2.1.0.3 for Oracle 11g 64bit on Windows 2008 (64bit).\n\n- You have created two Virtual Machines (VMs) in Azure using the platform provided Oracle Enterprise Edition image on Windows Server. For information, see [Creating an Oracle Database 12c Virtual Machine in Azure](#z3dc8d3c097cf414e9048f7a89c026f80) and [Azure Virtual Machines](http://azure.microsoft.com/documentation/services/virtual-machines/). Make sure that the Virtual Machines are in the [same cloud service](virtual-machines-load-balance.md) and in the same [Virtual Network](http://azure.microsoft.com/documentation/services/virtual-network/) to ensure they can access each other over the persistent private IP address.\n\n- You’ve set the Virtual Machine names as “MachineGG1” for Site A and “MachineGG2” for Site B at the Azure Portal.\n\n- You’ve created test databases “TestGG1” on Site A and “TestGG2” on Site B.\n\n- You log on to your Windows server as a member of the Administrators group or a member of the **ORA_DBA** group.\n\nIn this tutorial, you will:\n\n1. Setup database on Site A and Site B  \n\n    1. Perform initial data load\n    \n2. Prepare Site A and Site B for database replication\n\n3. Create all necessary objects to support DDL Replication\n\n4. Configure GoldenGate Manager on Site A and Site B\n\n5. Create Extract Group and Data Pump processes on Site A and Site B\n\n    1. Create Extract and Data Pump processes on Site A\n\n    2. Create a GoldenGate checkpoint table on Site B\n\n    3. Add REPLICAT on Site B\n\n    4. Create Extract and Data Pump processes on Site B\n\n    5. Create a GoldenGate checkpoint table on Site A\n\n    6. Add REPLICAT on Site A\n\n    7. Add trandata on Site A and Site B\n\n    8. Start Extract and Data Pump processes on Site A\n\n    9. Start Extract and Data Pump processes on Site B\n\n    10. Start REPLICAT process on Site A\n\n    11. Start REPLICAT process on Site B\n\n6. Verify the bi-directional replication process\n\n>[AZURE.IMPORTANT] This tutorial has been setup and tested against the following software configuration:\n>\n>|                        | **Site A Database**              | **Site B Database**              |\n>|------------------------|----------------------------------|----------------------------------|\n>| **Oracle Release**     | Oracle11g Release 2 – (11.2.0.1) | Oracle11g Release 2 – (11.2.0.1) |\n>| **Machine Name**       | MachineGG1                       | MachineGG2                       |\n>| **Operating System**   | Windows 2008 R2                  | Windows 2008 R2                  |\n>| **Oracle SID**         | TESTGG1                          | TESTGG2                          |\n>| **Replication Schema** | SCOTT                            | SCOTT                            |\n\nFor subsequent releases of Oracle Database and Oracle GoldenGate, there might be some additional changes that you need to implement. For the most up-to-date version specific information, see [Oracle GoldenGate](http://docs.oracle.com/goldengate/1212/gg-winux/index.html) and [Oracle Database](http://www.oracle.com/us/corporate/features/database-12c/index.html) documentation at Oracle web site. For example, for a release 11.2.0.4 source database and later, the capture of DDL is performed by the logmining server asynchronously and requires no special triggers, tables, or other database objects to be installed. Oracle GoldenGate upgrades can be performed without stopping user applications. The use of a DDL trigger and supporting objects is required when Extract is in integrated mode with an Oracle 11g source database that is earlier than version 11.2.0.4. For detailed guidance, see [Installing and Configuring Oracle GoldenGate for Oracle Database](http://docs.oracle.com/goldengate/1212/gg-winux/GIORA.pdf).\n\n##1. Setup database on Site A and Site B\nThis section explains how to perform the database prerequisites on both Site A and Site B. You must perform all the steps of this section on both sites: Site A and Site B.\n\nFirst, remote desktop to Site A and Site B via the Management Portal. Open up a Windows command prompt and create a home directory for Oracle GoldenGate setup files:\n\n    mkdir C:\\OracleGG\n\nThen, unzip and install the Oracle GoldenGate software in this folder. After this step, you can initiate the GoldenGate Software Command Interpreter (GGSCI) by executing the following command:\n\n    C:\\OracleGG\\.\\ggsci\n\nYou can use [GGSCI](http://docs.oracle.com/goldengate/1212/gg-winux/GWUAD/wu_gettingstarted.htm) to run several commands that configure, control, and monitor Oracle GoldenGate.\n\nNext, run the following command to create all sub-folders from the installation package:\n\n    GGSCI (Hostname) 1> CREATE SUBDIRS\n\nRun the following command to exit the GGSCI command prompt:\n\n    GGSCI (Hostname) 1> EXIT\n\nThen, you need to create a database user, which will be used by the Oracle GoldenGate Manager, Extract and Replication processes. Note that you can create individual users for each process or configure only one common user. In this tutorial, we create one user, which is called as ggate. Then, we grant that user the necessary privileges. Note that you must perform the following operations on Site A and Site B.\n\nOpen up SQL\\*Plus command window on Site A and Site B with database administrator privileges using **SYSDBA**, such as:\n\n    Enter username: / as sysdba\n\nAnd run:\n\n    SQL> create tablespace ggs_data   datafile 'c:\\OracleDatabase\\oradata\\<DBNAME>\\<DBNAME>ggs_data01.dbf' size 200m; \n    SQL> create user ggate identified by ggate default tablespace ggs_data  temporary tablespace temp;\n          grant connect, resource to ggate;\n          grant select any dictionary, select any table to ggate;\n          grant create table to ggate;\n          grant flashback any table to ggate;\n          grant execute on dbms_flashback to ggate;\n          grant execute on utl_file to ggate;\n          grant create any table to ggate;\n          grant insert any table to ggate;\n          grant update any table to ggate;\n          grant delete any table to ggate;\n          grant drop any table to ggate;\n\nNext, locate the INIT\\<DatabaseSID\\>.ORA file in the %ORACLE\\_HOME%\\\\database folder on Site A and Site B and append the following database parameters to INITTEST.ora:\n\n    UNDO\\_MANAGEMENT=AUTO\n    UNDO\\_RETENTION=86400\n\nFor a full list of all Oracle GoldenGate GGSCI commands, see [Reference for Oracle GoldenGate for Windows](http://docs.oracle.com/goldengate/1212/gg-winux/GWURF/ggsci_commands.htm).\n\n### Perform initial data load\n\nYou can perform the initial data load in the database by following several methods. For example, you can use the [Oracle GoldenGate Direct Load](http://docs.oracle.com/goldengate/1212/gg-winux/GWUAD/wu_initsync.htm) or regular Export and Import utilities to export table data from Site A to Site B.\n\nTo demonstrate the Oracle GoldenGate replication process, this tutorial demonstrates creating a table on both Site A and site B by using the following commands.\n\nFirst, open up SQL\\*Plus command window and run the following command to create an inventory table on Site A and Site B databases:\n    \n    create table scott.inventory\n    (prod_id number,\n    prod_category varchar2(20),\n    qty_in_stock number,\n    last_dml timestamp default systimestamp);\n\nNext, add a constraint to the newly created table on Site A and Site B databases:\n\n    alter table scott.inventory add constraint pk_inventory primary key (prod_id) ;\n\nThen, grant all privileges on the new inventory table to the user ggate on Site A and Site B:\n\n    grant all on scott.inventory to ggate;\n\nNext, create and enable a database trigger, INVENTORY_CDR_TRG, on the newly created table to make sure that all transactions to the new table are recorded if the user is not ggate. Perform this operation on Site A and Site B.\n\n    CREATE OR REPLACE TRIGGER INVENTORY_CDR_TRG\n    BEFORE UPDATE\n    ON SCOTT.INVENTORY\n    REFERENCING NEW AS New OLD AS Old\n    FOR EACH ROW\n    BEGIN\n    IF SYS_CONTEXT ('USERENV', 'SESSION_USER') != 'GGATE'\n    THEN\n    :NEW.LAST_DML := SYSTIMESTAMP;\n    END IF;\n    END;\n    / \n\n\n##2. Prepare Site A and Site B for database replication\nThis section explains how to prepare Site A and Site B for database replication. You must perform all the steps of this section on both sites: Site A and Site B.\n\nFirst, remote desktop to Site A and Site B via the Azure Portal. Switch the database to archivelog mode using the SQL*Plus command window: \n    \n    sql>shutdown immediate \n    sql>startup mount \n    sql>alter database archivelog; \n    sql>alter database open;\n\n\nThen, enable minimal [supplemental logging](http://docs.oracle.com/cd/E11882_01/server.112/e22490/logminer.htm) as follows:\n\n    SQL> ALTER DATABASE ADD SUPPLEMENTAL LOG DATA (ALL) COLUMNS;\n\nNext, prepare the database to support DDL (data definition language) replication:\n\n    SQL> alter system set recyclebin=off scope=spfile;\n\nThen, shutdown and restart the database:\n\n    sql>shutdown immediate \n    sql>startup\n\n\n##3. Create all necessary objects to support DDL Replication\nThis section lists the scripts that you need to use to create all necessary objects to support DDL Replication. You need to run the scripts specified in this section on both Site A and Site B.\n\nOpen up a Windows command prompt and navigate to the Oracle GoldenGate folder, such as C:\\\\OracleGG. Start SQL\\*Plus command prompt with database administrator privileges, such as using **SYSDBA** on Site A and Site B.\n\nThen, run the following scripts:\n    \n    SQL> @marker_setup.sql  \n    Enter GoldenGate schema name: ggate\n    SQL> @ddl_setup.sql  \n    Enter GoldenGate schema name: ggate\n    SQL> @role_setup.sql \n    Enter GoldenGate schema name: ggate\n    SQL> grant ggs_ggsuser_role to ggate;\n     Grant succeeded.\n     SQL> @ddl_enable\n     Trigger altered.\n     SQL> @ddl_pin ggate\n\n\nOracle GoldenGate tool requires a table level login for DDL (data definition language) support. That’s why, enable supplemental logging at the table level by using the ADD TRANDATA command. Open up Oracle GoldenGate Command interpreter window, login to database, and then run the ADD TRANDATA command:\n\n    GGSCI 5> DBLOGIN USERID ggate, PASSWORD ggate\n\n    GGSCI(Hostname) 6> add trandata scott.inventory\n\n##4. Configure GoldenGate Manager on Site A and Site B\nThe Oracle GoldenGate Manager performs a number of functions like starting the other GoldenGate processes, trail log file management and reporting.\n\nYou need to configure the Oracle GoldenGate Manager process on both Site A and Site B. To do this, perform the following steps on Site A and Site B.\n\nOpen Windows command window and initiate the Oracle GoldenGate command interpreter:\n\n    cd C:\\OracleGG\\\n    c:\\OracleGG>ggsci\n    Oracle GoldenGate Command Interpreter for Oracle\n    Version 11.2.1.0.3 14400833 OGGCORE_11.2.1.0.3_PLATFORMS_120823.1258\n    Windows x64 (optimized), Oracle 11g on Aug 23 2012 16:50:36\n    Copyright (C) 1995, 2012, Oracle and/or its affiliates. All rights reserved.\n\n\nLogs the GGSCI session into a database so that you can execute commands that affect the database:\n\n    GGSCI (HostName) 1> DBLOGIN USERID ggate, PASSWORD ggate\n    Successfully logged into database.\n\nDisplay the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:\n\n    GGSCI (HostName) 2> info all\n    Program     Status      Group       Lag           Time Since Chkpt\n    MANAGER     STOPPED\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n\n    GGSCI (HostName) 3> edit params mgr\n    PORT 7809\n    USERID ggate, PASSWORD ggate\n    PURGEOLDEXTRACTS  C:\\OracleGG\\dirdat\\ex, USECHECKPOINTS\n\nDisplay the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:\n\n    GGSCI (HostName) 46> info all\n    Program     Status      Group       Lag           Time Since Chkpt\n    MANAGER     STOPPED\n\nLogs the GGSCI session into a database so that you can execute commands that affect the database:\n\n    GGSCI (HostName) 47> dblogin USERID ggate, PASSWORD ggate\n\n    Successfully logged into database.\n\nStart the manager process:\n\n    GGSCI (HostName) 48> start manager\n    Manager started.\n\n##5. Create Extract Group and Data Pump processes on Site A and Site B\n\n###Create Extract and Data Pump processes on Site A\n\nYou need to create the Extract and Data Pump processes on Site A and Site B. \nRemote desktop to Site A and Site B via the Management Portal. Open up GGSCI command interpreter window. Run the following commands on Site A:\n\n    GGSCI (MachineGG1) 14> add extract ext1 tranlog begin now\n    EXTRACT added.\n    GGSCI (MachineGG1) 4> add exttrail C:\\OracleGG\\dirdat\\lt, extract ext1\n    EXTTRAIL added.\n    GGSCI (MachineGG1) 16> add extract dpump1 exttrailsource C:\\OracleGG\\dirdat\\aa\n    EXTRACT added.\n    GGSCI (MachineGG1) 17> add rmttrail C:\\OracleGG\\dirdat\\ab extract dpump1\n    RMTTRAIL added.\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n    GGSCI (MachineGG1) 18> edit params ext1\n    EXTRACT ext1\n     USERID ggate, PASSWORD ggate\n     EXTTRAIL C:\\OracleGG\\dirdat\\aa\n     TRANLOGOPTIONS EXCLUDEUSER ggate\n     TABLE scott.inventory,\n     GETBEFORECOLS (\n     ON UPDATE KEYINCLUDING (prod_category,qty_in_stock, last_dml),\n     ON DELETE KEYINCLUDING (prod_category,qty_in_stock, last_dml));\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n\n    GGSCI (MachineGG1) 15> edit params dpump1\n    EXTRACT dpump1\n     USERID ggate, PASSWORD ggate\n     RMTHOST ActiveGG2orcldb, MGRPORT 7809, TCPBUFSIZE 100000\n     RMTTRAIL C:\\OracleGG\\dirdat\\ab\n     PASSTHRU\n     TABLE scott.inventory;\n\n###Create a GoldenGate checkpoint table on Site B\n\nNext, you need to add a checkpoint table on Site B. To do this, you need to open up a GoldenGate command interpreter window and run:\n\n    C:\\OracleGG\\ggsci\n    GGSCI (MachineGG2) 1> DBLOGIN USERID ggate, PASSWORD ggate\n    Successfully logged into database.\n\nAnd then, add the checkpoint table to the database, where ggate is the owner:\n    \n    GGSCI (MachineGG2) 2> ADD CHECKPOINTTABLE ggate.checkpointtable\n    Successfully created checkpoint table ggate.checkpointtable.\n\nAdd the name of the check point table to the GLOBALS file on the target server, which is Site B in this step. Edit the GLOBALS file on Site B:\n\n    GGSCI (MachineGG2) 1> EDIT PARAMS ./GLOBALS\n\nThen, append the CHECKPOINTTABLE parameter to the existing GLOBALS file:\n\n    GGSCHEMA ggate\n    CHECKPOINTTABLE ggate.checkpointtable\n\nAs a final step, save and close the GLOBALS parameter file.\n\n\n###Add REPLICAT on Site B\nThis section describes how to add a REPLICAT process “REP2” on Site B.\n \nUse ADD REPLICAT command to create a Replicat group on Site B:\n\n    GGSCI (MachineGG2) 37> add replicat rep2 exttrail C:\\OracleGG\\dirdatab, checkpointtable ggate.checkpointtable\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n\n    GGSCI (MachineGG2) 10> edit params rep2\n    REPLICAT rep2\n    ASSUMETARGETDEFS\n    USERID ggate, PASSWORD ggate\n    DISCARDFILE C:\\OracleGG\\dirdat\\discard.txt, append,megabytes 10\n    MAP scott.inventory, TARGET scott.inventory;\n\n###Create Extract and Data Pump processes on Site B\n\nThis section describes how to create a new extract process “EXT2” and a new data pump process “DPUMP2” on Site B:\n\n    GGSCI (MachineGG2) 3> add extract ext2 tranlog begin now\n     EXTRACT added.\n    GGSCI (MachineGG2) 4> add exttrail C:\\OracleGG\\dirdat\\ac extract ext2\n     EXTTRAIL added.\n    GGSCI (MachineGG2) 5> add extract dpump2 exttrailsource C:\\OracleGG\\dirdat\\ac\n     EXTRACT added.\n    GGSCI (MachineGG2) 6> add rmttrail C:\\OracleGG\\dirdat\\ad extract dpump2\n     RMTTRAIL added.\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n\n    GGSCI (MachineGG2) 31> edit params ext2\n    EXTRACT ext2\n    USERID ggate, PASSWORD ggate\n    EXTTRAIL C:\\OracleGG\\dirdat\\ac\n    TRANLOGOPTIONS EXCLUDEUSER ggate\n    TABLE scott.inventory,\n    GETBEFORECOLS (\n    ON UPDATE KEYINCLUDING (prod_category,qty_in_stock, last_dml),\n    ON DELETE KEYINCLUDING (prod_category,qty_in_stock, last_dml));\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n\n    GGSCI (MachineGG2) 32> edit params dpump2\n    EXTRACT dpump2\n    USERID ggate, PASSWORD ggate\n    RMTHOST MachineGG1, MGRPORT 7809, TCPBUFSIZE 100000\n    RMTTRAIL C:\\OracleGG\\dirdat\\ad\n    PASSTHRU\n    TABLE scott.inventory;\n\n###Create a GoldenGate checkpoint table on Site A\n\nOpen up Oracle GoldenGate command interpreter window and create a checkpoint table:\n\n    GGSCI (MachineGG1) 1> DBLOGIN USERID ggate, PASSWORD ggate\n    Successfully logged into database.\n\n    GGSCI (MachineGG1) 2> ADD CHECKPOINTTABLE ggate.checkpointtable\n\n    Successfully created checkpoint table ggate.checkpointtable.\n\nYou also need to add the name of the check point table to the GLOBALS file on Site A. \n\nOpen up Oracle GoldenGate command interpreter window and edit the GLOBALS file on Site A:\n\n    GGSCI (MachineGG1) 1> EDIT PARAMS ./GLOBALS\n    Add the CHECKPOINTTABLE parameter to the existing GLOBALS file as follows:\n    GGSCHEMA ggate\n    CHECKPOINTTABLE ggate.checkpointtable\n\nSave and close the GLOBALS parameter file.\n\n###Add REPLICAT on Site A\n\nThis section describes how to add a REPLICAT process “REP1” on Site A. \n\nThe following command creates a Replicat group rep1 with the name of a trail, and the associated checkpointtable.\n\n    GGSCI (MachineGG1) 21> add replicat rep1 exttrail C:\\OracleGG\\dirdat\\ad,checkpointtable ggate.checkpointtable\n     REPLICAT added.\n\nOpen the parameter file using the EDIT PARAMS command and then append the following information:\n\n    GGSCI (MachineGG1) 10> edit params rep1\n    REPLICAT rep1\n    ASSUMETARGETDEFS\n    USERID ggate, PASSWORD ggate\n    DISCARDFILE C:\\OracleGG\\dirdat\\discard.txt, append, megabytes 10\n    MAP scott.inventory, TARGET scott.inventory;\n\n### Add trandata on Site A and Site B\n\nEnable supplemental logging at the table level by using the ADD TRANDATA command. Open up Oracle GoldenGate Command interpreter window, login to database, and then run the ADD TRANDATA command.\n\nRemote desktop to MachineGG1, open up Oracle GoldenGate command interpreter, and run:\n\n    GGSCI (MachineGG1) 11> dblogin userid ggate password ggate\n     Successfully logged into database.\n    GGSCI (MachineGG1) 12> add trandata scott.inventory cols (prod_category,qty_in_stock, last_dml)\n    GGSCI (MachineGG1) 13> info trandata scott.inventory\n    Logging of supplemental redo log data is enabled for table SCOTT.INVENTORY.\n    Columns supplementally logged for table SCOTT.INVENTORY: PROD_ID, PROD_CATEGORY, QTY_IN_STOCK, LAST_DML.\n        \nRemote desktop to MachineGG2, open up Oracle GoldenGate command interpreter, and run:\n\n    GGSCI (MachineGG2) 18> dblogin userid ggate password ggate\n     Successfully logged into database.\n    GGSCI (MachineGG2) 14> add trandata scott.inventory cols (prod_category,qty_in_stock, last_dml)\n    Logging of supplemental redo data enabled for table SCOTT.INVENTORY.\n\nDisplay information about the state of table-level supplemental logging:\n\n    GGSCI (MachineGG2) 15> info trandata scott.inventory\n    Logging of supplemental redo log data is enabled for table SCOTT.INVENTORY.\n    Columns supplementally logged for table SCOTT.INVENTORY: PROD_ID, PROD_CATEGORY, QTY_IN_STOCK, LAST_DML.\n\n###Add trandata on Site A and Site B\n\nEnable supplemental logging at the table level by using the ADD TRANDATA command. Open up Oracle GoldenGate Command interpreter window, login to database, and then run the ADD TRANDATA command. \n\nRemote desktop to MachineGG1, open up Oracle GoldenGate command interpreter, and run:\n\n    GGSCI (MachineGG1) 11> dblogin userid ggate password ggate\n     Successfully logged into database.\n    GGSCI (MachineGG1) 12> add trandata scott.inventory cols (prod_category,qty_in_stock, last_dml)\n    GGSCI (MachineGG1) 13> info trandata scott.inventory\n    Logging of supplemental redo log data is enabled for table SCOTT.INVENTORY.\n    Columns supplementally logged for table SCOTT.INVENTORY: PROD_ID, PROD_CATEGORY, QTY_IN_STOCK, LAST_DML.\n\nRemote desktop to MachineGG2, open up Oracle GoldenGate command interpreter, and run:\n\n    GGSCI (MachineGG2) 18> dblogin userid ggate password ggate\n     Successfully logged into database.\n    GGSCI (MachineGG2) 14> add trandata scott.inventory cols (prod_category,qty_in_stock, last_dml)\n    Logging of supplemental redo data enabled for table SCOTT.INVENTORY.\n    Display information about the state of table-level supplemental logging:\n    GGSCI (MachineGG2) 15> info trandata scott.inventory\n    Logging of supplemental redo log data is enabled for table SCOTT.INVENTORY.\n    Columns supplementally logged for table SCOTT.INVENTORY: PROD_ID, PROD_CATEGORY, QTY_IN_STOCK, LAST_DML.\n\n###Start Extract and Data Pump processes on Site A\n\nStart the Extract process ext1 on Site A:\n\n    GGSCI (MachineGG1) 31> start extract ext1\n    Sending START request to MANAGER …\n    EXTRACT EXT1 starting\n\nStart the data pump process dpump1 on Site A:\n\n    GGSCI (MachineGG1) 23> start extract dpump1\n    Sending START request to MANAGER …\n    EXTRACT DPUMP1 starting\nDisplay information about the Extract group ext1:\n    GGSCI (MachineGG1) 32> info extract ext1\n    EXTRACT    EXT1      Last Started 2013-11-25 08:03   Status RUNNING\n    Checkpoint Lag       00:00:00 (updated 00:00:02 ago)\n    Log Read Checkpoint  Oracle Redo Logs\n     2013-11-25 08:03:18  Seqno 6, RBA 3230720\n     SCN 0.1074371 (1074371)\n\nDisplay the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:\n\n    GGSCI (MachineGG1) 16> info all\n    Program     Status      Group       Lag at Chkpt  Time Since Chkpt\n    \n    MANAGER     RUNNING\n    EXTRACT     RUNNING     DPUMP1      00:00:00      00:46:33\n    EXTRACT     RUNNING     EXT1        00:00:00      00:00:04\n\n###Start Extract and Data Pump processes on Site B\n\nStart the Extract process ext2 on Site B:\n\n    GGSCI (MachineGG2) 22> start extract ext2\n    Sending START request to MANAGER …\n    EXTRACT EXT2 starting\n\nStart the data pump process dpump2 on Site B:\n\n    GGSCI (MachineGG2) 23> start extract dpump2\n    Sending START request to MANAGER …\n    EXTRACT DPUMP2 starting\n\nDisplay the status and lag (where relevant) for all Manager, Extract, and Replicat processes on a system:\n\n    GGSCI (ActiveGG2orcldb) 6> info all\n    Program     Status      Group       Lag at Chkpt  Time Since Chkpt\n    \n    MANAGER     RUNNING\n    EXTRACT     RUNNING     DPUMP2      00:00:00      136:13:33\n    EXTRACT     RUNNING     EXT2        00:00:00      00:00:04\n\n### Start REPLICAT process on Site A\n\nThis section describes how to start the REPLICAT process “REP1” on Site A. \n\nStart the Replicat process on Site A:\n\n    GGSCI (MachineGG1) 38> start replicat rep1\n    Sending START request to MANAGER …\n    REPLICAT REP1 starting\n\nDisplay the status of a Replicat group:\n\n    GGSCI (MachineGG1) 39> status replicat rep1\n     REPLICAT REP1: RUNNING\n\n###Start REPLICAT process on Site B\n\nThis section describes how to start the REPLICAT process “REP2” on Site B. \n\nStart the Replicat process on Site B:\n\n    GGSCI (MachineGG2) 26> start replicat rep2\n    Sending START request to MANAGER …\n    REPLICAT REP2 starting\n\nDisplay the status of a Replicat group:\n\n    GGSCI (MachineGG2) 27> status replicat rep2\n    REPLICAT REP2: RUNNING\n\n##6. Verify the bi-directional replication process\n\nTo verify the Oracle GoldenGate configuration, insert a row into the database at Site A. \nRemote Desktop to Site A. Open up SQL*Plus command window and run:\n    SQL> select name from v$database;\n    \n    NAME\n    ———\n    TESTGG\n    \n    SQL> insert into inventory values  (100,’TV’,100,sysdate);\n    \n    1 row created.\n    \n    SQL> commit;\n    \n    Commit complete.\n\nThen, check if that row is replicated on Site B. To do this, remote desktop to Site B. Open up SQL Plus window and run:\n\n    SQL> select name from v$database;\n    \n    NAME\n    ———\n    TESTGG\n    \n    SQL> select * from inventory;\n    \n    PROD_ID PROD_CATEGORY QTY_IN_STOCK LAST_DML\n    ———- ——————– ———— ———\n    100 TV 100 22-MAR-13\n\nInsert a new record at Site B:\n\n    SQL> insert into inventory  values  (101,’DVD’,10,sysdate);\n    1 row created.\n    \n    SQL> commit;\n    \n    Commit complete.\n\nRemote desktop to Site A and check if the replication has taken place:\n\n    SQL> select * from inventory;\n    \n    PROD_ID PROD_CATEGORY QTY_IN_STOCK LAST_DML\n    ———- ——————– ———— ———\n    100 TV 100 22-MAR-13\n    101 DVD 10 22-MAR-13\n\n##Additional Resources\n[Oracle Virtual Machine images for Azure](virtual-machines-oracle-list-oracle-virtual-machine-images.md)\n"
}