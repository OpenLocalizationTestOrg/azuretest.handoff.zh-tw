{
  "nodes": [
    {
      "content": "How to manage a cloud service | Microsoft Azure",
      "pos": [
        28,
        75
      ]
    },
    {
      "content": "Learn how to manage cloud services in the Azure Preview Portal.",
      "pos": [
        95,
        158
      ]
    },
    {
      "content": "How to Manage Cloud Services",
      "pos": [
        466,
        494
      ]
    },
    {
      "content": "[AZURE.SELECTOR]",
      "pos": [
        498,
        514
      ]
    },
    {
      "content": "Azure Portal",
      "pos": [
        518,
        530
      ]
    },
    {
      "content": "Azure Preview Portal",
      "pos": [
        568,
        588
      ]
    },
    {
      "pos": [
        631,
        941
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Cloud Services<ept id=\"p1\">**</ept> area of the Azure Preview Portal, you can update a service role or a deployment, promote a staged deployment to production, link resources to your cloud service so that you can see the resource dependencies and scale the resources together, and delete a cloud service or a deployment."
    },
    {
      "content": "How to: Update a cloud service role or deployment",
      "pos": [
        947,
        996
      ]
    },
    {
      "content": "If you need to update the application code for your cloud service, use <bpt id=\"p1\">**</bpt>Update<ept id=\"p1\">**</ept> on the cloud service blade.",
      "pos": [
        998,
        1107
      ]
    },
    {
      "content": "You can update a single role or all roles.",
      "pos": [
        1108,
        1150
      ]
    },
    {
      "content": "You'll need to upload a new service package and service configuration file.",
      "pos": [
        1151,
        1226
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">[</bpt>Azure Preview Portal<ept id=\"p1\">][]</ept>, select the cloud service you want to update.",
      "pos": [
        1231,
        1308
      ]
    },
    {
      "content": "This opens the cloud service instance blade.",
      "pos": [
        1309,
        1353
      ]
    },
    {
      "pos": [
        1358,
        1400
      ],
      "content": "In the blade, click the <bpt id=\"p1\">**</bpt>Update<ept id=\"p1\">**</ept> button."
    },
    {
      "content": "Update Button",
      "pos": [
        1408,
        1421
      ]
    },
    {
      "content": "Update the deployment with a new service package file (.cspkg) and service configuration file (.cscfg).",
      "pos": [
        1490,
        1593
      ]
    },
    {
      "content": "UpdateDeployment",
      "pos": [
        1601,
        1617
      ]
    },
    {
      "pos": [
        1685,
        1752
      ],
      "content": "<bpt id=\"p1\">**</bpt>Optionally<ept id=\"p1\">**</ept> update the deployment label and the storage account."
    },
    {
      "pos": [
        1758,
        1936
      ],
      "content": "If the update changes the number of roles or the size of any role, select the <bpt id=\"p1\">**</bpt>Allow update if role sizes or number of roles changes<ept id=\"p1\">**</ept> check box to enable the update to proceed."
    },
    {
      "pos": [
        1944,
        2187
      ],
      "content": "<ph id=\"ph1\">[AZURE.WARNING]</ph> Be aware that if you change the size of a role (that is, the size of a virtual machine that hosts a role instance) or the number of roles, each role instance (virtual machine) must be re-imaged, and any local data will be lost."
    },
    {
      "pos": [
        2192,
        2358
      ],
      "content": "If any service roles have only one role instance, select the <bpt id=\"p1\">**</bpt>Update even if one or more role contain a single instance check box<ept id=\"p1\">**</ept> to enable the upgrade to proceed."
    },
    {
      "content": "Azure can only guarantee 99.95 percent service availability during a cloud service update if each role has at least two role instances (virtual machines).",
      "pos": [
        2365,
        2519
      ]
    },
    {
      "content": "That enables one virtual machine to process client requests while the other is being updated.",
      "pos": [
        2520,
        2613
      ]
    },
    {
      "pos": [
        2618,
        2661
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to begin updating the service."
    },
    {
      "content": "How to: Swap deployments to promote a staged deployment to production",
      "pos": [
        2668,
        2737
      ]
    },
    {
      "content": "Use <bpt id=\"p1\">**</bpt>Swap<ept id=\"p1\">**</ept> to promote a staging deployment of a cloud service to production.",
      "pos": [
        2739,
        2817
      ]
    },
    {
      "content": "When you decide to deploy a new release of a cloud service, you can stage and test your new release in your cloud service staging environment while your customers are using the current release in production.",
      "pos": [
        2818,
        3025
      ]
    },
    {
      "content": "When you're ready to promote the new release to production, you can use <bpt id=\"p1\">**</bpt>Swap<ept id=\"p1\">**</ept> to switch the URLs by which the two deployments are addressed.",
      "pos": [
        3026,
        3169
      ]
    },
    {
      "pos": [
        3172,
        3247
      ],
      "content": "You can swap deployments from the <bpt id=\"p1\">**</bpt>Cloud Services<ept id=\"p1\">**</ept> page or the dashboard."
    },
    {
      "content": "In the <bpt id=\"p1\">[</bpt>Azure Preview Portal<ept id=\"p1\">][]</ept>, select the cloud service you want to update.",
      "pos": [
        3252,
        3329
      ]
    },
    {
      "content": "This opens the cloud service instance blade.",
      "pos": [
        3330,
        3374
      ]
    },
    {
      "pos": [
        3379,
        3419
      ],
      "content": "In the blade, click the <bpt id=\"p1\">**</bpt>Swap<ept id=\"p1\">**</ept> button."
    },
    {
      "content": "Cloud Services Swap",
      "pos": [
        3427,
        3446
      ]
    },
    {
      "content": "The following confirmation prompt opens.",
      "pos": [
        3513,
        3553
      ]
    },
    {
      "content": "Cloud Services Swap",
      "pos": [
        3561,
        3580
      ]
    },
    {
      "pos": [
        3647,
        3729
      ],
      "content": "After you verify the deployment information, click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to swap the deployments."
    },
    {
      "content": "The deployment swap happens quickly because the only thing that changes is the virtual IP addresses (VIPs) for the deployments.",
      "pos": [
        3735,
        3862
      ]
    },
    {
      "content": "To save compute costs, you can delete the deployment in the staging environment when you're sure the new production deployment is performing as expected.",
      "pos": [
        3868,
        4021
      ]
    },
    {
      "content": "How to: Link a resource to a cloud service",
      "pos": [
        4026,
        4068
      ]
    },
    {
      "content": "The Azure Preview Portal does not link resources together like the current Azure Portal does.",
      "pos": [
        4070,
        4163
      ]
    },
    {
      "content": "Instead, you must deploy additional resources to the same resource group being used by the Cloud Service.",
      "pos": [
        4164,
        4269
      ]
    },
    {
      "content": "How to: Delete deployments and a cloud service",
      "pos": [
        4274,
        4320
      ]
    },
    {
      "content": "Before you can delete a cloud service, you must delete each existing deployment.",
      "pos": [
        4322,
        4402
      ]
    },
    {
      "content": "To save compute costs, you can delete your staging deployment after you verify that your production deployment is working as expected.",
      "pos": [
        4404,
        4538
      ]
    },
    {
      "content": "You are billed compute costs for role instances even if a cloud service is not running.",
      "pos": [
        4539,
        4626
      ]
    },
    {
      "content": "Use the following procedure to delete a deployment or your cloud service.",
      "pos": [
        4628,
        4701
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">[</bpt>Azure Preview Portal<ept id=\"p1\">][]</ept>, select the cloud service you want to delete.",
      "pos": [
        4707,
        4784
      ]
    },
    {
      "content": "This opens the cloud service instance blade.",
      "pos": [
        4785,
        4829
      ]
    },
    {
      "pos": [
        4834,
        4876
      ],
      "content": "In the blade, click the <bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept> button."
    },
    {
      "content": "Cloud Services Swap",
      "pos": [
        4884,
        4903
      ]
    },
    {
      "pos": [
        4972,
        5139
      ],
      "content": "You can delete the entire cloud service by checking <bpt id=\"p1\">**</bpt>Cloud service and its deployments<ept id=\"p1\">**</ept> or choose either the <bpt id=\"p2\">**</bpt>Production deployment<ept id=\"p2\">**</ept> or the <bpt id=\"p3\">**</bpt>Staging deployment<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Cloud Services Swap",
      "pos": [
        5147,
        5166
      ]
    },
    {
      "pos": [
        5235,
        5277
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept> button at the bottom."
    },
    {
      "content": "To delete the cloud service, click <bpt id=\"p1\">**</bpt>Delete cloud service<ept id=\"p1\">**</ept>.",
      "pos": [
        5282,
        5342
      ]
    },
    {
      "content": "Then, at the confirmation prompt, click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>.",
      "pos": [
        5343,
        5391
      ]
    },
    {
      "pos": [
        5395,
        5725
      ],
      "content": "[AZURE.NOTE]\nIf verbose monitoring is configured for your cloud service, Azure does not delete the monitoring data from your storage account when you delete the cloud service. You will need to delete the data manually. For information about where to find the metrics tables, see [this](cloud-services-how-to-monitor.md) article.",
      "leadings": [
        "",
        "> "
      ],
      "nodes": [
        {
          "content": "If verbose monitoring is configured for your cloud service, Azure does not delete the monitoring data from your storage account when you delete the cloud service. You will need to delete the data manually. For information about where to find the metrics tables, see [this](cloud-services-how-to-monitor.md) article.",
          "pos": [
            13,
            328
          ],
          "nodes": [
            {
              "content": "If verbose monitoring is configured for your cloud service, Azure does not delete the monitoring data from your storage account when you delete the cloud service.",
              "pos": [
                0,
                162
              ]
            },
            {
              "content": "You will need to delete the data manually.",
              "pos": [
                163,
                205
              ]
            },
            {
              "content": "For information about where to find the metrics tables, see <bpt id=\"p1\">[</bpt>this<ept id=\"p1\">](cloud-services-how-to-monitor.md)</ept> article.",
              "pos": [
                206,
                315
              ]
            }
          ]
        }
      ]
    },
    {
      "content": "test",
      "pos": [
        5777,
        5781
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"How to manage a cloud service | Microsoft Azure\" \n    description=\"Learn how to manage cloud services in the Azure Preview Portal.\" \n    services=\"cloud-services\" \n    documentationCenter=\"\" \n    authors=\"Thraka\" \n    manager=\"timlt\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"cloud-services\" \n    ms.workload=\"tbd\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"07/01/2015\"\n    ms.author=\"adegeo\"/>\n\n\n# How to Manage Cloud Services\n\n> [AZURE.SELECTOR]\n- [Azure Portal](cloud-services-how-to-manage.md)\n- [Azure Preview Portal](cloud-services-how-to-manage-portal.md)\n\nIn the **Cloud Services** area of the Azure Preview Portal, you can update a service role or a deployment, promote a staged deployment to production, link resources to your cloud service so that you can see the resource dependencies and scale the resources together, and delete a cloud service or a deployment.\n\n\n## How to: Update a cloud service role or deployment\n\nIf you need to update the application code for your cloud service, use **Update** on the cloud service blade. You can update a single role or all roles. You'll need to upload a new service package and service configuration file.\n\n1. In the [Azure Preview Portal][], select the cloud service you want to update. This opens the cloud service instance blade.\n\n2. In the blade, click the **Update** button.\n\n    ![Update Button](./media/cloud-services-how-to-manage-portal/update-button.png)\n\n3. Update the deployment with a new service package file (.cspkg) and service configuration file (.cscfg).\n\n    ![UpdateDeployment](./media/cloud-services-how-to-manage-portal/update-blade.png)\n\n4. **Optionally** update the deployment label and the storage account. \n\n5. If the update changes the number of roles or the size of any role, select the **Allow update if role sizes or number of roles changes** check box to enable the update to proceed. \n\n    >[AZURE.WARNING] Be aware that if you change the size of a role (that is, the size of a virtual machine that hosts a role instance) or the number of roles, each role instance (virtual machine) must be re-imaged, and any local data will be lost.\n\n6. If any service roles have only one role instance, select the **Update even if one or more role contain a single instance check box** to enable the upgrade to proceed. \n\n    Azure can only guarantee 99.95 percent service availability during a cloud service update if each role has at least two role instances (virtual machines). That enables one virtual machine to process client requests while the other is being updated.\n\n8. Click **OK** to begin updating the service.\n\n\n\n## How to: Swap deployments to promote a staged deployment to production\n\nUse **Swap** to promote a staging deployment of a cloud service to production. When you decide to deploy a new release of a cloud service, you can stage and test your new release in your cloud service staging environment while your customers are using the current release in production. When you're ready to promote the new release to production, you can use **Swap** to switch the URLs by which the two deployments are addressed. \n\nYou can swap deployments from the **Cloud Services** page or the dashboard.\n\n1. In the [Azure Preview Portal][], select the cloud service you want to update. This opens the cloud service instance blade.\n\n2. In the blade, click the **Swap** button.\n\n    ![Cloud Services Swap](./media/cloud-services-how-to-manage-portal/swap-button.png)\n\n3. The following confirmation prompt opens.\n\n    ![Cloud Services Swap](./media/cloud-services-how-to-manage-portal/swap-prompt.png)\n\n4. After you verify the deployment information, click **OK** to swap the deployments.\n\n    The deployment swap happens quickly because the only thing that changes is the virtual IP addresses (VIPs) for the deployments.\n\n    To save compute costs, you can delete the deployment in the staging environment when you're sure the new production deployment is performing as expected.\n\n## How to: Link a resource to a cloud service\n\nThe Azure Preview Portal does not link resources together like the current Azure Portal does. Instead, you must deploy additional resources to the same resource group being used by the Cloud Service.\n\n## How to: Delete deployments and a cloud service\n\nBefore you can delete a cloud service, you must delete each existing deployment.\n\nTo save compute costs, you can delete your staging deployment after you verify that your production deployment is working as expected. You are billed compute costs for role instances even if a cloud service is not running.\n\nUse the following procedure to delete a deployment or your cloud service. \n\n1. In the [Azure Preview Portal][], select the cloud service you want to delete. This opens the cloud service instance blade.\n\n2. In the blade, click the **Delete** button.\n\n    ![Cloud Services Swap](./media/cloud-services-how-to-manage-portal/delete-button.png)\n\n3. You can delete the entire cloud service by checking **Cloud service and its deployments** or choose either the **Production deployment** or the **Staging deployment**.\n\n    ![Cloud Services Swap](./media/cloud-services-how-to-manage-portal/delete-blade.png) \n\n4. Click the **Delete** button at the bottom.\n\n5. To delete the cloud service, click **Delete cloud service**. Then, at the confirmation prompt, click **Yes**.\n\n> [AZURE.NOTE]\n> If verbose monitoring is configured for your cloud service, Azure does not delete the monitoring data from your storage account when you delete the cloud service. You will need to delete the data manually. For information about where to find the metrics tables, see [this](cloud-services-how-to-monitor.md) article.\n\n[Azure Preview Portal]: https://portal.azure.com\n\ntest\n"
}