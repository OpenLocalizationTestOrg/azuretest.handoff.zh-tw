{
  "nodes": [
    {
      "content": "Use the autoscaling application block (.NET) | Microsoft Azure",
      "pos": [
        28,
        90
      ]
    },
    {
      "content": "Learn how to use the Autoscaling Application for Azure.",
      "pos": [
        110,
        165
      ]
    },
    {
      "content": "Code samples are written in C# and use the .NET API.",
      "pos": [
        166,
        218
      ]
    },
    {
      "content": "How to Use the Autoscaling Application Block",
      "pos": [
        538,
        582
      ]
    },
    {
      "content": "This guide will demonstrate how to perform common scenarios using the",
      "pos": [
        584,
        653
      ]
    },
    {
      "content": "Autoscaling Application Block from the <bpt id=\"p1\">[</bpt>Microsoft Enterprise Library 5.0\nIntegration Pack for Azure<ept id=\"p1\">][]</ept>.",
      "pos": [
        654,
        757
      ]
    },
    {
      "content": "The samples are written in C\\",
      "pos": [
        758,
        787
      ]
    },
    {
      "content": "and use the .NET API.",
      "pos": [
        789,
        810
      ]
    },
    {
      "content": "The scenarios covered include <bpt id=\"p1\">**</bpt>hosting the\nblock<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>using constraint rules<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>using reactive rules<ept id=\"p3\">**</ept>.",
      "pos": [
        811,
        921
      ]
    },
    {
      "content": "For",
      "pos": [
        922,
        925
      ]
    },
    {
      "content": "more information on the Autoscaling Application Block, see the <bpt id=\"p1\">[</bpt>Next Steps<ept id=\"p1\">](#next-steps)</ept> section.",
      "pos": [
        926,
        1023
      ]
    },
    {
      "content": "What is the Autoscaling Application Block?",
      "pos": [
        1028,
        1070
      ]
    },
    {
      "content": "The Autoscaling Application Block can automatically scale your",
      "pos": [
        1072,
        1134
      ]
    },
    {
      "content": "Azure application based on rules that you define specifically for your",
      "pos": [
        1136,
        1206
      ]
    },
    {
      "content": "application.",
      "pos": [
        1207,
        1219
      ]
    },
    {
      "content": "You can use these rules to help your Azure",
      "pos": [
        1220,
        1262
      ]
    },
    {
      "content": "application maintain its throughput in response to changes in its",
      "pos": [
        1263,
        1328
      ]
    },
    {
      "content": "workload, while at the same time control the costs associated with",
      "pos": [
        1329,
        1395
      ]
    },
    {
      "content": "hosting your application in Azure.",
      "pos": [
        1396,
        1430
      ]
    },
    {
      "content": "Along with scaling by",
      "pos": [
        1431,
        1452
      ]
    },
    {
      "content": "increasing or decreasing the number of role instances in your",
      "pos": [
        1453,
        1514
      ]
    },
    {
      "content": "application, the block also enables you to use other scaling actions",
      "pos": [
        1515,
        1583
      ]
    },
    {
      "content": "such as throttling certain functionality within your application or",
      "pos": [
        1584,
        1651
      ]
    },
    {
      "content": "using custom-defined actions.",
      "pos": [
        1652,
        1681
      ]
    },
    {
      "content": "You can choose to host the block in an Azure role or in an",
      "pos": [
        1683,
        1741
      ]
    },
    {
      "content": "on-premises application.",
      "pos": [
        1742,
        1766
      ]
    },
    {
      "pos": [
        1768,
        1881
      ],
      "content": "The Autoscaling Application Block is part of the <bpt id=\"p1\">[</bpt>Microsoft Enterprise Library 5.0 Integration Pack for Azure<ept id=\"p1\">][]</ept>."
    },
    {
      "content": "Concepts",
      "pos": [
        1886,
        1894
      ]
    },
    {
      "content": "In the following diagram, the green line shows a plot of the number of",
      "pos": [
        1896,
        1966
      ]
    },
    {
      "content": "running instances of an Azure role over two days.",
      "pos": [
        1967,
        2016
      ]
    },
    {
      "content": "The number of",
      "pos": [
        2017,
        2030
      ]
    },
    {
      "content": "instances changes automatically over time in response to a set of",
      "pos": [
        2031,
        2096
      ]
    },
    {
      "content": "autoscaling rules.",
      "pos": [
        2097,
        2115
      ]
    },
    {
      "content": "diagram of sample autoscaling",
      "pos": [
        2119,
        2148
      ]
    },
    {
      "content": "The block uses two types of rules to define the autoscaling behavior for",
      "pos": [
        2230,
        2302
      ]
    },
    {
      "content": "your application:",
      "pos": [
        2303,
        2320
      ]
    },
    {
      "pos": [
        2326,
        3022
      ],
      "content": "**Constraint Rules:** To set upper and lower bounds on the number of\ninstances, for example, let's say that between 8:00 and 10:00 every\nmorning you want a minimum of four and a maximum of six instances,\nthen you use a **constraint rule**. In the diagram, the red and blue\nlines represent constraint rules. For example, at point **A** in\nthe diagram, the minimum number of role instances rises from two to\nfour, in order to accommodate the anticipated increase in the\napplication's workload at this time. At point **B** in the diagram,\nthe number of role instances is prevented from climbing above five\nin order to control the running costs of the application.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    ",
        "    ",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>Constraint Rules:<ept id=\"p1\">**</ept> To set upper and lower bounds on the number of",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "instances, for example, let's say that between 8:00 and 10:00 every",
          "pos": [
            69,
            136
          ]
        },
        {
          "content": "morning you want a minimum of four and a maximum of six instances,",
          "pos": [
            137,
            203
          ]
        },
        {
          "content": "then you use a **constraint rule**. In the diagram, the red and blue",
          "pos": [
            204,
            272
          ],
          "nodes": [
            {
              "content": "then you use a <bpt id=\"p1\">**</bpt>constraint rule<ept id=\"p1\">**</ept>.",
              "pos": [
                0,
                35
              ]
            },
            {
              "content": "In the diagram, the red and blue",
              "pos": [
                36,
                68
              ]
            }
          ]
        },
        {
          "content": "lines represent constraint rules. For example, at point **A** in",
          "pos": [
            273,
            337
          ],
          "nodes": [
            {
              "content": "lines represent constraint rules.",
              "pos": [
                0,
                33
              ]
            },
            {
              "content": "For example, at point <bpt id=\"p1\">**</bpt>A<ept id=\"p1\">**</ept> in",
              "pos": [
                34,
                64
              ]
            }
          ]
        },
        {
          "content": "the diagram, the minimum number of role instances rises from two to",
          "pos": [
            338,
            405
          ]
        },
        {
          "content": "four, in order to accommodate the anticipated increase in the",
          "pos": [
            406,
            467
          ]
        },
        {
          "content": "application's workload at this time. At point **B** in the diagram,",
          "pos": [
            468,
            535
          ],
          "nodes": [
            {
              "content": "application's workload at this time.",
              "pos": [
                0,
                36
              ]
            },
            {
              "content": "At point <bpt id=\"p1\">**</bpt>B<ept id=\"p1\">**</ept> in the diagram,",
              "pos": [
                37,
                67
              ]
            }
          ]
        },
        {
          "content": "the number of role instances is prevented from climbing above five",
          "pos": [
            536,
            602
          ]
        },
        {
          "content": "in order to control the running costs of the application.",
          "pos": [
            603,
            660
          ]
        }
      ]
    },
    {
      "pos": [
        3028,
        3492
      ],
      "content": "**Reactive Rules:** To enable the number of role instances to change\nin response to unpredictable changes in demand, you use **reactive\nrules**. At point **C** in the diagram, the block automatically\nreduces the number of role instances, from four to three, in\nresponse to a reduction in workload. At point **D**, the block\ndetects an increase in workload and automatically increases the\nnumber of running role instances from three to four.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>Reactive Rules:<ept id=\"p1\">**</ept> To enable the number of role instances to change",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "in response to unpredictable changes in demand, you use **reactive\nrules**. At point **C** in the diagram, the block automatically",
          "pos": [
            69,
            199
          ],
          "nodes": [
            {
              "content": "in response to unpredictable changes in demand, you use <bpt id=\"p1\">**</bpt>reactive\nrules<ept id=\"p1\">**</ept>.",
              "pos": [
                0,
                75
              ]
            },
            {
              "content": "At point <bpt id=\"p1\">**</bpt>C<ept id=\"p1\">**</ept> in the diagram, the block automatically",
              "pos": [
                76,
                130
              ]
            }
          ]
        },
        {
          "content": "reduces the number of role instances, from four to three, in",
          "pos": [
            200,
            260
          ]
        },
        {
          "content": "response to a reduction in workload. At point **D**, the block",
          "pos": [
            261,
            323
          ],
          "nodes": [
            {
              "content": "response to a reduction in workload.",
              "pos": [
                0,
                36
              ]
            },
            {
              "content": "At point <bpt id=\"p1\">**</bpt>D<ept id=\"p1\">**</ept>, the block",
              "pos": [
                37,
                62
              ]
            }
          ]
        },
        {
          "content": "detects an increase in workload and automatically increases the",
          "pos": [
            324,
            387
          ]
        },
        {
          "content": "number of running role instances from three to four.",
          "pos": [
            388,
            440
          ]
        }
      ]
    },
    {
      "content": "The block stores its configuration settings in two stores:",
      "pos": [
        3494,
        3552
      ]
    },
    {
      "pos": [
        3558,
        3886
      ],
      "content": "**Rules Store:** The Rules Store holds your business configuration;\na list of all the autoscaling rules that you have defined for your\nAzure application. This store is typically an XML file that\nis located where the Autoscaling Application Block can read it, for\nexample in Azure blob storage or in a local file.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>Rules Store:<ept id=\"p1\">**</ept> The Rules Store holds your business configuration;",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "a list of all the autoscaling rules that you have defined for your",
          "pos": [
            68,
            134
          ]
        },
        {
          "content": "Azure application. This store is typically an XML file that",
          "pos": [
            135,
            194
          ],
          "nodes": [
            {
              "content": "Azure application.",
              "pos": [
                0,
                18
              ]
            },
            {
              "content": "This store is typically an XML file that",
              "pos": [
                19,
                59
              ]
            }
          ]
        },
        {
          "content": "is located where the Autoscaling Application Block can read it, for",
          "pos": [
            195,
            262
          ]
        },
        {
          "content": "example in Azure blob storage or in a local file.",
          "pos": [
            263,
            312
          ]
        }
      ]
    },
    {
      "pos": [
        3892,
        4322
      ],
      "content": "**Service Information Store:** The Service Information Store stores\nyour operational configuration, which is the service model of your\nAzure application. This service model includes all of the\ninformation about your Azure application (such as role names\nand storage account details) that the block needs to be able to\ncollect data points from the target Azure application and to\nperform scaling operations.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>Service Information Store:<ept id=\"p1\">**</ept> The Service Information Store stores",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "your operational configuration, which is the service model of your",
          "pos": [
            68,
            134
          ]
        },
        {
          "content": "Azure application. This service model includes all of the",
          "pos": [
            135,
            192
          ],
          "nodes": [
            {
              "content": "Azure application.",
              "pos": [
                0,
                18
              ]
            },
            {
              "content": "This service model includes all of the",
              "pos": [
                19,
                57
              ]
            }
          ]
        },
        {
          "content": "information about your Azure application (such as role names",
          "pos": [
            193,
            253
          ]
        },
        {
          "content": "and storage account details) that the block needs to be able to",
          "pos": [
            254,
            317
          ]
        },
        {
          "content": "collect data points from the target Azure application and to",
          "pos": [
            318,
            378
          ]
        },
        {
          "content": "perform scaling operations.",
          "pos": [
            379,
            406
          ]
        }
      ]
    },
    {
      "content": "Collect Performance Counter Data from your Target Azure Application",
      "pos": [
        4327,
        4394
      ]
    },
    {
      "content": "Reactive rules can use performance counter data from roles as part of",
      "pos": [
        4396,
        4465
      ]
    },
    {
      "content": "the rule definition.",
      "pos": [
        4466,
        4486
      ]
    },
    {
      "content": "For example, a reactive rule may monitor the CPU",
      "pos": [
        4487,
        4535
      ]
    },
    {
      "content": "utilization of an Azure role to determine whether the block",
      "pos": [
        4536,
        4595
      ]
    },
    {
      "content": "should initiate a scaling operation.",
      "pos": [
        4596,
        4632
      ]
    },
    {
      "content": "The block reads performance counter",
      "pos": [
        4633,
        4668
      ]
    },
    {
      "content": "data from the Azure Diagnostics table named",
      "pos": [
        4669,
        4712
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>WADPerformanceCountersTable<ept id=\"p1\">**</ept> in Azure storage.",
      "pos": [
        4713,
        4762
      ]
    },
    {
      "content": "By default, Azure does not write performance counter data to the",
      "pos": [
        4764,
        4828
      ]
    },
    {
      "content": "Azure Diagnostics table in Azure storage.",
      "pos": [
        4829,
        4870
      ]
    },
    {
      "content": "Therefore, you",
      "pos": [
        4871,
        4885
      ]
    },
    {
      "content": "should modify the roles from which you need to collect performance",
      "pos": [
        4886,
        4952
      ]
    },
    {
      "content": "counter data to save this data.",
      "pos": [
        4953,
        4984
      ]
    },
    {
      "content": "For details about how to enable",
      "pos": [
        4985,
        5016
      ]
    },
    {
      "content": "performance counters in your application, see <bpt id=\"p1\">[</bpt>Using performance counters in Azure<ept id=\"p1\">][]</ept>.",
      "pos": [
        5017,
        5103
      ]
    },
    {
      "content": "Set up a Host Application for the Autoscaling Application Block",
      "pos": [
        5108,
        5171
      ]
    },
    {
      "content": "You can host the Autoscaling Application Block either in an Azure",
      "pos": [
        5173,
        5238
      ]
    },
    {
      "content": "role or in an on-premises application.",
      "pos": [
        5239,
        5277
      ]
    },
    {
      "content": "The Autoscaling Application Block",
      "pos": [
        5278,
        5311
      ]
    },
    {
      "content": "is typically hosted in a separate application from the target",
      "pos": [
        5312,
        5373
      ]
    },
    {
      "content": "application that you want to scale automatically.",
      "pos": [
        5374,
        5423
      ]
    },
    {
      "content": "This section provides",
      "pos": [
        5424,
        5445
      ]
    },
    {
      "content": "guidelines about how to configure your host application.",
      "pos": [
        5446,
        5502
      ]
    },
    {
      "content": "Get the Autoscaling Application Block NuGet Package",
      "pos": [
        5508,
        5559
      ]
    },
    {
      "content": "Before you can use the Autoscaling Application Block in your Visual",
      "pos": [
        5561,
        5628
      ]
    },
    {
      "content": "Studio project, you will need to obtain the Autoscaling Application",
      "pos": [
        5629,
        5696
      ]
    },
    {
      "content": "Block binaries and add references to them in your project.",
      "pos": [
        5697,
        5755
      ]
    },
    {
      "content": "The NuGet",
      "pos": [
        5756,
        5765
      ]
    },
    {
      "content": "Visual Studio extension makes it easy to install and update libraries",
      "pos": [
        5766,
        5835
      ]
    },
    {
      "content": "and tools in Visual Studio and Visual Web Developer.",
      "pos": [
        5836,
        5888
      ]
    },
    {
      "content": "The Autoscaling",
      "pos": [
        5889,
        5904
      ]
    },
    {
      "content": "Application Block NuGet package is the easiest way to get the Autscaling",
      "pos": [
        5905,
        5977
      ]
    },
    {
      "content": "Application Block APIs.",
      "pos": [
        5978,
        6001
      ]
    },
    {
      "content": "For more information about <bpt id=\"p1\">**</bpt>NuGet<ept id=\"p1\">**</ept>, and how to",
      "pos": [
        6002,
        6050
      ]
    },
    {
      "content": "install and use the <bpt id=\"p1\">**</bpt>NuGet<ept id=\"p1\">**</ept> Visual Studio extension, see the <bpt id=\"p2\">[</bpt>NuGet<ept id=\"p2\">][]</ept>",
      "pos": [
        6051,
        6123
      ]
    },
    {
      "content": "website.",
      "pos": [
        6124,
        6132
      ]
    },
    {
      "content": "Once you have the NuGet Package Manager installed, to install the Autoscaling NuGet",
      "pos": [
        6134,
        6217
      ]
    },
    {
      "content": "package in your application, do the following:",
      "pos": [
        6218,
        6264
      ]
    },
    {
      "pos": [
        6270,
        6427
      ],
      "content": "Open the **NuGet Package Manager Console** window. In the **Tools**\nmenu, select **Library Package Manager**, the select **Package\nManager Console**.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Open the **NuGet Package Manager Console** window. In the **Tools**",
          "pos": [
            0,
            67
          ],
          "nodes": [
            {
              "content": "Open the <bpt id=\"p1\">**</bpt>NuGet Package Manager Console<ept id=\"p1\">**</ept> window.",
              "pos": [
                0,
                50
              ]
            },
            {
              "content": "In the <bpt id=\"p1\">**</bpt>Tools<ept id=\"p1\">**</ept>",
              "pos": [
                51,
                67
              ]
            }
          ]
        },
        {
          "content": "menu, select <bpt id=\"p1\">**</bpt>Library Package Manager<ept id=\"p1\">**</ept>, the select <bpt id=\"p2\">**</bpt>Package\nManager Console<ept id=\"p2\">**</ept>.",
          "pos": [
            68,
            149
          ]
        }
      ]
    },
    {
      "pos": [
        6433,
        6509
      ],
      "content": "Enter the following command in the NuGet Package Manager Console\nwindow:",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Enter the following command in the NuGet Package Manager Console",
          "pos": [
            0,
            64
          ]
        },
        {
          "content": "window:",
          "pos": [
            65,
            72
          ]
        }
      ]
    },
    {
      "content": "Installing the NuGet package updates your project with all the necessary",
      "pos": [
        6583,
        6655
      ]
    },
    {
      "content": "assemblies and references that you need to use the Autoscaling",
      "pos": [
        6656,
        6718
      ]
    },
    {
      "content": "Application Block.",
      "pos": [
        6719,
        6737
      ]
    },
    {
      "content": "Your project now includes the XML schema files for",
      "pos": [
        6738,
        6788
      ]
    },
    {
      "content": "the autoscaling rule definitions and autoscaling service information.",
      "pos": [
        6789,
        6858
      ]
    },
    {
      "content": "The project now also includes a readme file that contains important",
      "pos": [
        6859,
        6926
      ]
    },
    {
      "content": "information about the Autoscaling Application Block:",
      "pos": [
        6927,
        6979
      ]
    },
    {
      "content": "files configured by autoscaling NuGet package",
      "pos": [
        6983,
        7028
      ]
    },
    {
      "content": "Set the Target Framework to .NET Framework 4",
      "pos": [
        7115,
        7159
      ]
    },
    {
      "content": "Your project must target the .NET Framework 4.",
      "pos": [
        7161,
        7207
      ]
    },
    {
      "content": "To change or verify the",
      "pos": [
        7208,
        7231
      ]
    },
    {
      "content": "target framework:",
      "pos": [
        7232,
        7249
      ]
    },
    {
      "pos": [
        7255,
        7339
      ],
      "content": "In Solution Explorer, right-click on the project name and select\n**Properties**.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "In Solution Explorer, right-click on the project name and select",
          "pos": [
            0,
            64
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.",
          "pos": [
            65,
            80
          ]
        }
      ]
    },
    {
      "pos": [
        7345,
        7456
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Application<ept id=\"p1\">**</ept> tab of the Properties window, make sure Target framework is set to <bpt id=\"p2\">**</bpt>.NET Framework 4<ept id=\"p2\">**</ept>."
    },
    {
      "content": "image",
      "pos": [
        7464,
        7469
      ]
    },
    {
      "content": "Add Namespace References",
      "pos": [
        7556,
        7580
      ]
    },
    {
      "content": "Add the following code namespace declarations to the top of any C\\# file",
      "pos": [
        7582,
        7654
      ]
    },
    {
      "content": "in which you wish to programmatically access the Autoscaling Application",
      "pos": [
        7655,
        7727
      ]
    },
    {
      "content": "Block:",
      "pos": [
        7728,
        7734
      ]
    },
    {
      "content": "How to: Instantiate and Run the Autoscaler",
      "pos": [
        7884,
        7926
      ]
    },
    {
      "content": "Use the <bpt id=\"p1\">**</bpt>IServiceLocator.GetInstance<ept id=\"p1\">**</ept> method to instantiate the",
      "pos": [
        7928,
        7993
      ]
    },
    {
      "content": "Autoscaler, and then call the <bpt id=\"p1\">**</bpt>Autoscaler.Start<ept id=\"p1\">**</ept> method to run the",
      "pos": [
        7994,
        8062
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Autoscaler<ept id=\"p1\">**</ept>.",
      "pos": [
        8063,
        8078
      ]
    },
    {
      "content": "How To: Define your Service Model",
      "pos": [
        8198,
        8231
      ]
    },
    {
      "content": "Typically, you store your service model (a description of your",
      "pos": [
        8233,
        8295
      ]
    },
    {
      "content": "Azure environment that includes information about subscriptions, hosted",
      "pos": [
        8297,
        8368
      ]
    },
    {
      "content": "services, roles, and storages accounts) in an XML file.",
      "pos": [
        8369,
        8424
      ]
    },
    {
      "content": "You can find a",
      "pos": [
        8425,
        8439
      ]
    },
    {
      "content": "copy of the schema for this XML file in the",
      "pos": [
        8440,
        8483
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>AutoscalingServiceModel.xsd<ept id=\"p1\">**</ept> file in your project.",
      "pos": [
        8484,
        8537
      ]
    },
    {
      "content": "In Visual Studio,",
      "pos": [
        8538,
        8555
      ]
    },
    {
      "content": "this schema provides Intellisense and validation when you edit the",
      "pos": [
        8556,
        8622
      ]
    },
    {
      "content": "service model XML file.",
      "pos": [
        8623,
        8646
      ]
    },
    {
      "pos": [
        8648,
        8710
      ],
      "content": "Create a new XML file called <bpt id=\"p1\">**</bpt>services.xml<ept id=\"p1\">**</ept> in your project."
    },
    {
      "content": "In Visual Studio, you must ensure that the service model file is copied",
      "pos": [
        8712,
        8783
      ]
    },
    {
      "content": "to the output folder.",
      "pos": [
        8784,
        8805
      ]
    },
    {
      "content": "To do this:",
      "pos": [
        8806,
        8817
      ]
    },
    {
      "pos": [
        8823,
        8873
      ],
      "content": "Right-click on the file and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        8879,
        8973
      ],
      "content": "Within the Properties pane, set the **Copy to Output Directory**\nvalue to **Copy always**.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Within the Properties pane, set the <bpt id=\"p1\">**</bpt>Copy to Output Directory<ept id=\"p1\">**</ept>",
          "pos": [
            0,
            64
          ]
        },
        {
          "content": "value to <bpt id=\"p1\">**</bpt>Copy always<ept id=\"p1\">**</ept>.",
          "pos": [
            65,
            90
          ]
        }
      ]
    },
    {
      "content": "Set Copy to Output Directory value",
      "pos": [
        8981,
        9015
      ]
    },
    {
      "content": "You must replace the values in square brackets with values specific to",
      "pos": [
        10339,
        10409
      ]
    },
    {
      "content": "your environment and target application.",
      "pos": [
        10410,
        10450
      ]
    },
    {
      "content": "To find many of these values,",
      "pos": [
        10451,
        10480
      ]
    },
    {
      "content": "you will need to log in to the <bpt id=\"p1\">[</bpt>Azure Management Portal<ept id=\"p1\">][]</ept>.",
      "pos": [
        10481,
        10540
      ]
    },
    {
      "content": "Sign in to the management portal.",
      "pos": [
        10542,
        10575
      ]
    },
    {
      "pos": [
        10581,
        10739
      ],
      "content": "**[subscriptionname]:** Choose a friendly name to refer to the\nAzure subscription that contains the application in which\nyou want to use auto-scaling.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>[subscriptionname]:<ept id=\"p1\">**</ept> Choose a friendly name to refer to the",
          "pos": [
            0,
            62
          ]
        },
        {
          "content": "Azure subscription that contains the application in which",
          "pos": [
            63,
            120
          ]
        },
        {
          "content": "you want to use auto-scaling.",
          "pos": [
            121,
            150
          ]
        }
      ]
    },
    {
      "pos": [
        10745,
        10883
      ],
      "content": "**[subscriptionid]:** The unique ID of the\nAzure subscription that contains the application in which\nyou want to use auto-scaling.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>[subscriptionid]:<ept id=\"p1\">**</ept> The unique ID of the",
          "pos": [
            0,
            42
          ]
        },
        {
          "content": "Azure subscription that contains the application in which",
          "pos": [
            43,
            100
          ]
        },
        {
          "content": "you want to use auto-scaling.",
          "pos": [
            101,
            130
          ]
        }
      ]
    },
    {
      "pos": [
        10893,
        10958
      ],
      "content": "In the Azure Management Portal, click\n**Cloud Services**.",
      "leadings": [
        "",
        "        "
      ],
      "nodes": [
        {
          "content": "In the Azure Management Portal, click",
          "pos": [
            0,
            37
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>Cloud Services<ept id=\"p1\">**</ept>.",
          "pos": [
            38,
            57
          ]
        }
      ]
    },
    {
      "pos": [
        10968,
        11181
      ],
      "content": "In the list of Cloud Services, click on the service that hosts the\napplication in which you want to use autoscaling. The\nQuick Glance pane on the right will display the\n**Subscription ID**.",
      "leadings": [
        "",
        "        ",
        "        ",
        "        "
      ],
      "nodes": [
        {
          "content": "In the list of Cloud Services, click on the service that hosts the",
          "pos": [
            0,
            66
          ]
        },
        {
          "content": "application in which you want to use autoscaling. The",
          "pos": [
            67,
            120
          ],
          "nodes": [
            {
              "content": "application in which you want to use autoscaling.",
              "pos": [
                0,
                49
              ]
            },
            {
              "content": "The",
              "pos": [
                50,
                53
              ]
            }
          ]
        },
        {
          "content": "Quick Glance pane on the right will display the",
          "pos": [
            121,
            168
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>Subscription ID<ept id=\"p1\">**</ept>.",
          "pos": [
            169,
            189
          ]
        }
      ]
    },
    {
      "content": "image",
      "pos": [
        11193,
        11198
      ]
    },
    {
      "content": "To find out more about the content of the service model file, see",
      "pos": [
        13259,
        13324
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Storing Your Service Information Data<ept id=\"p1\">][]</ept>.",
      "pos": [
        13325,
        13367
      ]
    },
    {
      "content": "How To: Define your Autoscaling Rules",
      "pos": [
        13372,
        13409
      ]
    },
    {
      "content": "Typically, you store the autoscaling rules that control the number of",
      "pos": [
        13411,
        13480
      ]
    },
    {
      "content": "role instances in your target application in an XML file.",
      "pos": [
        13481,
        13538
      ]
    },
    {
      "content": "You can find a",
      "pos": [
        13539,
        13553
      ]
    },
    {
      "content": "copy of the schema for this XML file in the <bpt id=\"p1\">**</bpt>AutoscalingRules.xsd<ept id=\"p1\">**</ept>",
      "pos": [
        13554,
        13622
      ]
    },
    {
      "content": "file in your project.",
      "pos": [
        13623,
        13644
      ]
    },
    {
      "content": "In Visual Studio, this schema provides",
      "pos": [
        13645,
        13683
      ]
    },
    {
      "content": "Intellisense and validation when you edit the XML file.",
      "pos": [
        13684,
        13739
      ]
    },
    {
      "pos": [
        13741,
        13799
      ],
      "content": "Create a new XML file named <bpt id=\"p1\">**</bpt>rules.xml<ept id=\"p1\">**</ept> in your project."
    },
    {
      "content": "In Visual Studio, you must ensure that the rules file is copied to the",
      "pos": [
        13801,
        13871
      ]
    },
    {
      "content": "output folder.",
      "pos": [
        13872,
        13886
      ]
    },
    {
      "content": "To do this:",
      "pos": [
        13887,
        13898
      ]
    },
    {
      "pos": [
        13904,
        13954
      ],
      "content": "Right-click on the file and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        13960,
        14054
      ],
      "content": "Within the Properties pane, set the **Copy to Output Directory**\nvalue to **Copy always**.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Within the Properties pane, set the <bpt id=\"p1\">**</bpt>Copy to Output Directory<ept id=\"p1\">**</ept>",
          "pos": [
            0,
            64
          ]
        },
        {
          "content": "value to <bpt id=\"p1\">**</bpt>Copy always<ept id=\"p1\">**</ept>.",
          "pos": [
            65,
            90
          ]
        }
      ]
    },
    {
      "content": "The following code sample shows an example rule set in a <bpt id=\"p1\">**</bpt>rules.xml<ept id=\"p1\">**</ept>",
      "pos": [
        14056,
        14126
      ]
    },
    {
      "content": "file:",
      "pos": [
        14127,
        14132
      ]
    },
    {
      "content": "In this example there are three autoscaling rules (one <bpt id=\"p1\">**</bpt>constraint\nrule<ept id=\"p1\">**</ept> and two <bpt id=\"p2\">**</bpt>reactive rules<ept id=\"p2\">**</ept>) that operate on a target named",
      "pos": [
        15603,
        15736
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>AutoscalingApplicationRole<ept id=\"p1\">**</ept> that is the alias of a role defined in",
      "pos": [
        15737,
        15806
      ]
    },
    {
      "content": "the <bpt id=\"p1\">**</bpt>service model<ept id=\"p1\">**</ept>:",
      "pos": [
        15807,
        15829
      ]
    },
    {
      "pos": [
        15835,
        15981
      ],
      "content": "The constraint rule is always active and sets the minimum number of\nrole instances to two and the maximum number of role instances to\nsix.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "The constraint rule is always active and sets the minimum number of",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "role instances to two and the maximum number of role instances to",
          "pos": [
            68,
            133
          ]
        },
        {
          "content": "six.",
          "pos": [
            134,
            138
          ]
        }
      ]
    },
    {
      "pos": [
        15987,
        16242
      ],
      "content": "Both reactive rules use an **operand** named\n**WebRoleA\\_CPU\\_Avg\\_5m** that calculates the average CPU usage\nover the last five minutes for an Azure role named\n**AutoscalingApplicationRole.** This role is defined in the\n**service model**.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Both reactive rules use an <bpt id=\"p1\">**</bpt>operand<ept id=\"p1\">**</ept> named",
          "pos": [
            0,
            44
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>WebRoleA\\_CPU\\_Avg\\_5m<ept id=\"p1\">**</ept> that calculates the average CPU usage",
          "pos": [
            45,
            109
          ]
        },
        {
          "content": "over the last five minutes for an Azure role named",
          "pos": [
            110,
            160
          ]
        },
        {
          "content": "**AutoscalingApplicationRole.** This role is defined in the",
          "pos": [
            161,
            220
          ],
          "nodes": [
            {
              "content": "AutoscalingApplicationRole.",
              "pos": [
                2,
                29
              ]
            },
            {
              "content": "This role is defined in the",
              "pos": [
                32,
                59
              ]
            }
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>service model<ept id=\"p1\">**</ept>.",
          "pos": [
            221,
            239
          ]
        }
      ]
    },
    {
      "pos": [
        16248,
        16465
      ],
      "content": "The reactive rule named **ScaleUpOnHighUtilization** increments the\ninstance count of the target role by one if the average CPU\nutilization over the last five minutes has been greater than or\nequal to 60%.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "The reactive rule named <bpt id=\"p1\">**</bpt>ScaleUpOnHighUtilization<ept id=\"p1\">**</ept> increments the",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "instance count of the target role by one if the average CPU",
          "pos": [
            68,
            127
          ]
        },
        {
          "content": "utilization over the last five minutes has been greater than or",
          "pos": [
            128,
            191
          ]
        },
        {
          "content": "equal to 60%.",
          "pos": [
            192,
            205
          ]
        }
      ]
    },
    {
      "pos": [
        16471,
        16670
      ],
      "content": "The reactive rule named **ScaleDownOnLowUtilization** decrements the\ninstance count of the target role by one if the average CPU\nutilization over the last five minutes has been less than 60%.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "The reactive rule named <bpt id=\"p1\">**</bpt>ScaleDownOnLowUtilization<ept id=\"p1\">**</ept> decrements the",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "instance count of the target role by one if the average CPU",
          "pos": [
            69,
            128
          ]
        },
        {
          "content": "utilization over the last five minutes has been less than 60%.",
          "pos": [
            129,
            191
          ]
        }
      ]
    },
    {
      "content": "How To: Configure the Autoscaling Application Block",
      "pos": [
        16675,
        16726
      ]
    },
    {
      "content": "After you have defined your service model and autoscaling rules, you",
      "pos": [
        16728,
        16796
      ]
    },
    {
      "content": "must configure the Autoscaling Application Block to use them.",
      "pos": [
        16797,
        16858
      ]
    },
    {
      "content": "This",
      "pos": [
        16859,
        16863
      ]
    },
    {
      "content": "operational configuration information is stored in the application",
      "pos": [
        16864,
        16930
      ]
    },
    {
      "content": "configuration file.",
      "pos": [
        16931,
        16950
      ]
    },
    {
      "content": "By default, the Autoscaling Application Block expects the autoscaling",
      "pos": [
        16952,
        17021
      ]
    },
    {
      "content": "rules and service model to be stored in Azure blobs.",
      "pos": [
        17022,
        17074
      ]
    },
    {
      "content": "In this",
      "pos": [
        17075,
        17082
      ]
    },
    {
      "content": "example, you will configure the block to load them from the local file",
      "pos": [
        17083,
        17153
      ]
    },
    {
      "content": "system.",
      "pos": [
        17154,
        17161
      ]
    },
    {
      "content": "Configure the Autoscaling Application Block in the host application",
      "pos": [
        17167,
        17234
      ]
    },
    {
      "pos": [
        17240,
        17347
      ],
      "content": "Right-click on the **App.config** file in Solution Explorer and then\nclick **Edit Configuration File**.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Right-click on the <bpt id=\"p1\">**</bpt>App.config<ept id=\"p1\">**</ept> file in Solution Explorer and then",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "click <bpt id=\"p1\">**</bpt>Edit Configuration File<ept id=\"p1\">**</ept>.",
          "pos": [
            69,
            103
          ]
        }
      ]
    },
    {
      "pos": [
        17353,
        17506
      ],
      "content": "In the **Blocks** menu, click **Add Autoscaling Settings**:  \n![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling10.png)",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Blocks<ept id=\"p1\">**</ept> menu, click <bpt id=\"p2\">**</bpt>Add Autoscaling Settings<ept id=\"p2\">**</ept>:",
          "pos": [
            0,
            59
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>image<ph id=\"ph2\">](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling10.png)</ph>",
          "pos": [
            62,
            149
          ]
        }
      ]
    },
    {
      "pos": [
        17514,
        17907
      ],
      "content": "Expand the **Autoscaling Settings** and then click the ellipsis (...)\nnext to the **Data Points Store Storage Account**, add the **Account\nname** and **Account key** of the Azure storage account\nwhere the block will store the data points that it collects (see\n[How To: Define your Service Model][] if you are unsure about where\nto find these values), and then click **OK**:",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Expand the <bpt id=\"p1\">**</bpt>Autoscaling Settings<ept id=\"p1\">**</ept> and then click the ellipsis (...)",
          "pos": [
            0,
            69
          ]
        },
        {
          "content": "next to the <bpt id=\"p1\">**</bpt>Data Points Store Storage Account<ept id=\"p1\">**</ept>, add the <bpt id=\"p2\">**</bpt>Account\nname<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Account key<ept id=\"p3\">**</ept> of the Azure storage account",
          "pos": [
            70,
            194
          ]
        },
        {
          "content": "where the block will store the data points that it collects (see",
          "pos": [
            195,
            259
          ]
        },
        {
          "content": "[How To: Define your Service Model][] if you are unsure about where",
          "pos": [
            260,
            327
          ]
        },
        {
          "content": "to find these values), and then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>:",
          "pos": [
            328,
            373
          ]
        }
      ]
    },
    {
      "content": "image",
      "pos": [
        17917,
        17922
      ]
    },
    {
      "pos": [
        18008,
        18286
      ],
      "content": "Expand the **Autoscaling Settings** section to reveal the **Rules\nStore** and **Service Information Store** sections. By default, they\nare configured to use Azure blob storage:  \n![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling12.png)",
      "leadings": [
        "",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Expand the **Autoscaling Settings** section to reveal the **Rules\nStore** and **Service Information Store** sections. By default, they",
          "pos": [
            0,
            134
          ],
          "nodes": [
            {
              "content": "Expand the <bpt id=\"p1\">**</bpt>Autoscaling Settings<ept id=\"p1\">**</ept> section to reveal the <bpt id=\"p2\">**</bpt>Rules\nStore<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Service Information Store<ept id=\"p3\">**</ept> sections.",
              "pos": [
                0,
                117
              ]
            },
            {
              "content": "By default, they",
              "pos": [
                118,
                134
              ]
            }
          ]
        },
        {
          "content": "are configured to use Azure blob storage:",
          "pos": [
            135,
            176
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>image<ph id=\"ph2\">](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling12.png)</ph>",
          "pos": [
            179,
            266
          ]
        }
      ]
    },
    {
      "pos": [
        18293,
        18446
      ],
      "content": "Click the plus sign (+) next to **Rules Store**, point to **Set\nRules Store**, then click **Use Local File Rules Store**, and then\nclick **Yes**.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Click the plus sign (+) next to <bpt id=\"p1\">**</bpt>Rules Store<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>Set\nRules Store<ept id=\"p2\">**</ept>, then click <bpt id=\"p3\">**</bpt>Use Local File Rules Store<ept id=\"p3\">**</ept>, and then",
          "pos": [
            0,
            130
          ]
        },
        {
          "content": "click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>.",
          "pos": [
            131,
            145
          ]
        }
      ]
    },
    {
      "pos": [
        18452,
        18662
      ],
      "content": "In the **File Name** box, type **rules.xml**. This is the name of\nthe file that contains your autoscaling rules:  \n![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling13.png)",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "In the **File Name** box, type **rules.xml**. This is the name of",
          "pos": [
            0,
            65
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>File Name<ept id=\"p1\">**</ept> box, type <bpt id=\"p2\">**</bpt>rules.xml<ept id=\"p2\">**</ept>.",
              "pos": [
                0,
                45
              ]
            },
            {
              "content": "This is the name of",
              "pos": [
                46,
                65
              ]
            }
          ]
        },
        {
          "content": "the file that contains your autoscaling rules:",
          "pos": [
            66,
            112
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>image<ph id=\"ph2\">](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling13.png)</ph>",
          "pos": [
            115,
            202
          ]
        }
      ]
    },
    {
      "pos": [
        18669,
        18864
      ],
      "content": "Click the plus sign (+) next to **Service Information Store**, point\nto **Set Service Information Store**, then click **Use Local File\nService Information Store**, and then click **Yes**.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Click the plus sign (+) next to <bpt id=\"p1\">**</bpt>Service Information Store<ept id=\"p1\">**</ept>, point",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "to <bpt id=\"p1\">**</bpt>Set Service Information Store<ept id=\"p1\">**</ept>, then click <bpt id=\"p2\">**</bpt>Use Local File\nService Information Store<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Yes<ept id=\"p3\">**</ept>.",
          "pos": [
            69,
            187
          ]
        }
      ]
    },
    {
      "pos": [
        18870,
        19083
      ],
      "content": "In the **File Name** box, type **services.xml**. This is the name of\nthe file that contains your autoscaling rules:  \n![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling14.png)",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "In the **File Name** box, type **services.xml**. This is the name of",
          "pos": [
            0,
            68
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>File Name<ept id=\"p1\">**</ept> box, type <bpt id=\"p2\">**</bpt>services.xml<ept id=\"p2\">**</ept>.",
              "pos": [
                0,
                48
              ]
            },
            {
              "content": "This is the name of",
              "pos": [
                49,
                68
              ]
            }
          ]
        },
        {
          "content": "the file that contains your autoscaling rules:",
          "pos": [
            69,
            115
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>image<ph id=\"ph2\">](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling14.png)</ph>",
          "pos": [
            118,
            205
          ]
        }
      ]
    },
    {
      "pos": [
        19090,
        19313
      ],
      "content": "In the Enterprise Library Configuration window, on the **File**\nmenu, click **Save** to save your configuration changes. Then in the\nEnterprise Library Configuration window, on the **File** menu, click\n**Exit**.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "In the Enterprise Library Configuration window, on the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept>",
          "pos": [
            0,
            63
          ]
        },
        {
          "content": "menu, click **Save** to save your configuration changes. Then in the",
          "pos": [
            64,
            132
          ],
          "nodes": [
            {
              "content": "menu, click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept> to save your configuration changes.",
              "pos": [
                0,
                56
              ]
            },
            {
              "content": "Then in the",
              "pos": [
                57,
                68
              ]
            }
          ]
        },
        {
          "content": "Enterprise Library Configuration window, on the <bpt id=\"p1\">**</bpt>File<ept id=\"p1\">**</ept> menu, click",
          "pos": [
            133,
            201
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>Exit<ept id=\"p1\">**</ept>.",
          "pos": [
            202,
            211
          ]
        }
      ]
    },
    {
      "content": "To get detailed information about the actions that the Autoscaling",
      "pos": [
        19315,
        19381
      ]
    },
    {
      "content": "Application Block is performing you need to capture the log messages",
      "pos": [
        19382,
        19450
      ]
    },
    {
      "content": "that it writes.",
      "pos": [
        19451,
        19466
      ]
    },
    {
      "content": "For example, if you are hosting the block in a console",
      "pos": [
        19467,
        19521
      ]
    },
    {
      "content": "application, you can view the log messages in the Output window in",
      "pos": [
        19522,
        19588
      ]
    },
    {
      "content": "Visual Studio.",
      "pos": [
        19589,
        19603
      ]
    },
    {
      "content": "The following section shows you how to configure this",
      "pos": [
        19604,
        19657
      ]
    },
    {
      "content": "behavior.",
      "pos": [
        19658,
        19667
      ]
    },
    {
      "content": "Configure logging in the Autoscaling Application Block host application",
      "pos": [
        19673,
        19744
      ]
    },
    {
      "pos": [
        19750,
        19940
      ],
      "content": "In Visual Studio, double-click on the **App.config** file in\nSolution Explorer to open it in the editor. Then add the\n**system.diagnostics** section as shown in the following sample:",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "In Visual Studio, double-click on the <bpt id=\"p1\">**</bpt>App.config<ept id=\"p1\">**</ept> file in",
          "pos": [
            0,
            60
          ]
        },
        {
          "content": "Solution Explorer to open it in the editor. Then add the",
          "pos": [
            61,
            117
          ],
          "nodes": [
            {
              "content": "Solution Explorer to open it in the editor.",
              "pos": [
                0,
                43
              ]
            },
            {
              "content": "Then add the",
              "pos": [
                44,
                56
              ]
            }
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>system.diagnostics<ept id=\"p1\">**</ept> section as shown in the following sample:",
          "pos": [
            118,
            182
          ]
        }
      ]
    },
    {
      "content": "Save your changes.",
      "pos": [
        20553,
        20571
      ]
    },
    {
      "content": "You can now run your Autoscaling Application Block host console",
      "pos": [
        20573,
        20636
      ]
    },
    {
      "content": "application and observe how the autoscaling rules work with your target",
      "pos": [
        20637,
        20708
      ]
    },
    {
      "content": "Azure application.",
      "pos": [
        20709,
        20727
      ]
    },
    {
      "content": "When you run the host console application,",
      "pos": [
        20728,
        20770
      ]
    },
    {
      "content": "you should see messages similar to the following in the Output window in",
      "pos": [
        20771,
        20843
      ]
    },
    {
      "content": "Visual Studio.",
      "pos": [
        20844,
        20858
      ]
    },
    {
      "content": "These log messages help you to understand the behavior of",
      "pos": [
        20859,
        20916
      ]
    },
    {
      "content": "the block.",
      "pos": [
        20917,
        20927
      ]
    },
    {
      "content": "For example, they indicate which rules are being matched by",
      "pos": [
        20928,
        20987
      ]
    },
    {
      "content": "the block and what actions the block is taking.",
      "pos": [
        20988,
        21035
      ]
    },
    {
      "content": "Next Steps",
      "pos": [
        23253,
        23263
      ]
    },
    {
      "content": "Now that you've learned the basics of using the Autoscaling Application",
      "pos": [
        23265,
        23336
      ]
    },
    {
      "content": "Block, follow these links to learn how to implement more complex",
      "pos": [
        23337,
        23401
      ]
    },
    {
      "content": "autoscaling scenarios:",
      "pos": [
        23402,
        23424
      ]
    },
    {
      "content": "Hosting the Autoscaling Application Block in a Worker Role",
      "pos": [
        23431,
        23489
      ]
    },
    {
      "content": "Implementing Throttling Behavior",
      "pos": [
        23498,
        23530
      ]
    },
    {
      "content": "Understanding Rule Ranks and Reconciliation",
      "pos": [
        23539,
        23582
      ]
    },
    {
      "content": "Extending and Modifying the Autoscaling Application Block",
      "pos": [
        23591,
        23648
      ]
    },
    {
      "content": "Using the Optimizing Stabilizer to prevent high frequency oscillation and to optimize costs",
      "pos": [
        23657,
        23748
      ]
    },
    {
      "content": "Using Notifications and Manual Scaling",
      "pos": [
        23757,
        23795
      ]
    },
    {
      "content": "Defining Scale Groups",
      "pos": [
        23804,
        23825
      ]
    },
    {
      "content": "Using the WASABiCmdlets for manipulating the block via Windows PowerShell",
      "pos": [
        23834,
        23907
      ]
    },
    {
      "content": "Developer's Guide to the Enterprise Library 5.0 Integration Pack for Azure",
      "pos": [
        23916,
        23990
      ]
    },
    {
      "content": "How Sage Reduces Azure Hosting Costs Using Autoscaling",
      "pos": [
        23999,
        24053
      ]
    },
    {
      "content": "Reducing TechNet and MSDN hosting costs and environmental impact with autoscaling on Azure",
      "pos": [
        24062,
        24152
      ]
    },
    {
      "content": "test",
      "pos": [
        25925,
        25929
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Use the autoscaling application block (.NET) | Microsoft Azure\" \n    description=\"Learn how to use the Autoscaling Application for Azure. Code samples are written in C# and use the .NET API.\" \n    services=\"cloud-services\" \n    documentationCenter=\".net\" \n    authors=\"squillace\" \n    manager=\"timlt\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"cloud-services\" \n    ms.workload=\"tbd\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"dotnet\" \n    ms.topic=\"article\" \n    ms.date=\"05/18/2015\" \n    ms.author=\"rasquill\"/>\n# How to Use the Autoscaling Application Block\n\nThis guide will demonstrate how to perform common scenarios using the\nAutoscaling Application Block from the [Microsoft Enterprise Library 5.0\nIntegration Pack for Azure][]. The samples are written in C\\#\nand use the .NET API. The scenarios covered include **hosting the\nblock**, **using constraint rules**, and **using reactive rules**. For\nmore information on the Autoscaling Application Block, see the [Next Steps](#next-steps) section.\n\n## What is the Autoscaling Application Block?\n\nThe Autoscaling Application Block can automatically scale your \nAzure application based on rules that you define specifically for your\napplication. You can use these rules to help your Azure\napplication maintain its throughput in response to changes in its\nworkload, while at the same time control the costs associated with\nhosting your application in Azure. Along with scaling by\nincreasing or decreasing the number of role instances in your\napplication, the block also enables you to use other scaling actions\nsuch as throttling certain functionality within your application or\nusing custom-defined actions.\n\nYou can choose to host the block in an Azure role or in an\non-premises application.\n\nThe Autoscaling Application Block is part of the [Microsoft Enterprise Library 5.0 Integration Pack for Azure][].\n\n## Concepts\n\nIn the following diagram, the green line shows a plot of the number of\nrunning instances of an Azure role over two days. The number of\ninstances changes automatically over time in response to a set of\nautoscaling rules.\n\n![diagram of sample autoscaling](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling01.png)\n\nThe block uses two types of rules to define the autoscaling behavior for\nyour application:\n\n-   **Constraint Rules:** To set upper and lower bounds on the number of\n    instances, for example, let's say that between 8:00 and 10:00 every\n    morning you want a minimum of four and a maximum of six instances,\n    then you use a **constraint rule**. In the diagram, the red and blue\n    lines represent constraint rules. For example, at point **A** in\n    the diagram, the minimum number of role instances rises from two to\n    four, in order to accommodate the anticipated increase in the\n    application's workload at this time. At point **B** in the diagram,\n    the number of role instances is prevented from climbing above five\n    in order to control the running costs of the application.\n\n-   **Reactive Rules:** To enable the number of role instances to change\n    in response to unpredictable changes in demand, you use **reactive\n    rules**. At point **C** in the diagram, the block automatically\n    reduces the number of role instances, from four to three, in\n    response to a reduction in workload. At point **D**, the block\n    detects an increase in workload and automatically increases the\n    number of running role instances from three to four.\n\nThe block stores its configuration settings in two stores:\n\n-   **Rules Store:** The Rules Store holds your business configuration;\n    a list of all the autoscaling rules that you have defined for your\n    Azure application. This store is typically an XML file that\n    is located where the Autoscaling Application Block can read it, for\n    example in Azure blob storage or in a local file.\n\n-   **Service Information Store:** The Service Information Store stores\n    your operational configuration, which is the service model of your\n    Azure application. This service model includes all of the\n    information about your Azure application (such as role names\n    and storage account details) that the block needs to be able to\n    collect data points from the target Azure application and to\n    perform scaling operations.\n\n## Collect Performance Counter Data from your Target Azure Application\n\nReactive rules can use performance counter data from roles as part of\nthe rule definition. For example, a reactive rule may monitor the CPU\nutilization of an Azure role to determine whether the block\nshould initiate a scaling operation. The block reads performance counter\ndata from the Azure Diagnostics table named\n**WADPerformanceCountersTable** in Azure storage.\n\nBy default, Azure does not write performance counter data to the\nAzure Diagnostics table in Azure storage. Therefore, you\nshould modify the roles from which you need to collect performance\ncounter data to save this data. For details about how to enable\nperformance counters in your application, see [Using performance counters in Azure][].\n\n## Set up a Host Application for the Autoscaling Application Block\n\nYou can host the Autoscaling Application Block either in an Azure\nrole or in an on-premises application. The Autoscaling Application Block\nis typically hosted in a separate application from the target\napplication that you want to scale automatically. This section provides\nguidelines about how to configure your host application.\n\n### Get the Autoscaling Application Block NuGet Package\n\nBefore you can use the Autoscaling Application Block in your Visual\nStudio project, you will need to obtain the Autoscaling Application\nBlock binaries and add references to them in your project. The NuGet\nVisual Studio extension makes it easy to install and update libraries\nand tools in Visual Studio and Visual Web Developer. The Autoscaling\nApplication Block NuGet package is the easiest way to get the Autscaling\nApplication Block APIs. For more information about **NuGet**, and how to\ninstall and use the **NuGet** Visual Studio extension, see the [NuGet][]\nwebsite.\n\nOnce you have the NuGet Package Manager installed, to install the Autoscaling NuGet\npackage in your application, do the following:\n\n1.  Open the **NuGet Package Manager Console** window. In the **Tools**\n    menu, select **Library Package Manager**, the select **Package\n    Manager Console**.\n\n2.  Enter the following command in the NuGet Package Manager Console\n    window:\n\n        PM> Install-Package EnterpriseLibrary.WindowsAzure.Autoscaling\n\nInstalling the NuGet package updates your project with all the necessary\nassemblies and references that you need to use the Autoscaling\nApplication Block. Your project now includes the XML schema files for\nthe autoscaling rule definitions and autoscaling service information.\nThe project now also includes a readme file that contains important\ninformation about the Autoscaling Application Block:\n\n![files configured by autoscaling NuGet package](./media/cloud-services-dotnet-autoscaling-application-block/auotscaling02.png)\n\n\n### Set the Target Framework to .NET Framework 4\n\nYour project must target the .NET Framework 4. To change or verify the\ntarget framework:\n\n1.  In Solution Explorer, right-click on the project name and select\n    **Properties**.\n\n2.  In the **Application** tab of the Properties window, make sure Target framework is set to **.NET Framework 4**.\n\n    ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling03.png)\n\n\n### Add Namespace References\n\nAdd the following code namespace declarations to the top of any C\\# file\nin which you wish to programmatically access the Autoscaling Application\nBlock:\n\n    using Microsoft.Practices.EnterpriseLibrary.Common.Configuration;\n    using Microsoft.Practices.EnterpriseLibrary.WindowsAzure.Autoscaling;\n\n## How to: Instantiate and Run the Autoscaler\n\nUse the **IServiceLocator.GetInstance** method to instantiate the\nAutoscaler, and then call the **Autoscaler.Start** method to run the\n**Autoscaler**.\n\n    Autoscaler scaler =\n        EnterpriseLibraryContainer.Current.GetInstance<Autoscaler>();\n    scaler.Start();\n\n## How To: Define your Service Model\n\nTypically, you store your service model (a description of your \nAzure environment that includes information about subscriptions, hosted\nservices, roles, and storages accounts) in an XML file. You can find a\ncopy of the schema for this XML file in the\n**AutoscalingServiceModel.xsd** file in your project. In Visual Studio,\nthis schema provides Intellisense and validation when you edit the\nservice model XML file.\n\nCreate a new XML file called **services.xml** in your project.\n\nIn Visual Studio, you must ensure that the service model file is copied\nto the output folder. To do this:\n\n1.  Right-click on the file and select **Properties**.\n\n2.  Within the Properties pane, set the **Copy to Output Directory**\n    value to **Copy always**.\n\n    ![Set Copy to Output Directory value](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling04.png)\n\n\n    The following code sample shows an example service model in a **services.xml** file:\n\n    <?xml version=\"1.0\" encoding=\"utf-8\" ?>\n    <serviceModel xmlns=\"http://schemas.microsoft.com/practices/2011/entlib/autoscaling/serviceModel\">\n      <subscriptions>\n        <subscription name=\"[subscriptionname]\"\n                      certificateThumbprint=\"[managementcertificatethumbprint]\"\n                      subscriptionId=\"[subscriptionid]\"\n                      certificateStoreLocation=\"CurrentUser\"\n                      certificateStoreName=\"My\">\n          <services>\n            <service dnsPrefix=\"[hostedservicednsprefix]\" slot=\"Staging\">\n              <roles>\n                <role alias=\"AutoscalingApplicationRole\"\n                      roleName=\"[targetrolename]\"\n                      wadStorageAccountName=\"targetstorage\"/>\n              </roles>\n            </service>\n          </services>\n          <storageAccounts>\n            <storageAccount alias=\"targetstorage\"\n              connectionString=\"DefaultEndpointsProtocol=https;AccountName=[storageaccountname];AccountKey=[storageaccountkey]\">\n            </storageAccount>\n          </storageAccounts>\n        </subscription>\n      </subscriptions>\n    </serviceModel>\n\nYou must replace the values in square brackets with values specific to\nyour environment and target application. To find many of these values,\nyou will need to log in to the [Azure Management Portal][].\n\nSign in to the management portal.\n\n-   **[subscriptionname]:** Choose a friendly name to refer to the\n    Azure subscription that contains the application in which\n    you want to use auto-scaling.\n\n-   **[subscriptionid]:** The unique ID of the\n    Azure subscription that contains the application in which\n    you want to use auto-scaling.\n\n    1.  In the Azure Management Portal, click\n        **Cloud Services**.\n\n    2.  In the list of Cloud Services, click on the service that hosts the\n        application in which you want to use autoscaling. The\n        Quick Glance pane on the right will display the\n        **Subscription ID**.\n\n        ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling05.png)\n\n  \n    -   **[hostedservicednsprefix]:** The DNS Prefix of the hosted service in which you want to use auto-scaling.\n\n    1.  In the Azure Management Portal, click\n        **Cloud Services**.\n\n    2.  In the list of Cloud Services, locate the service that hosts the\n        application in which you want to use autoscaling. The name of\n        the cloud serviceClick is the **DNS Prefix**.\n\n        ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling06.png)\n \n    -   **[targetrolename]:** The name of the role that is the target of your auto-scaling rules.\n\n    1.  In the Azure Management Portal, click\n        **Cloud Services**.\n\n    2.  In the list of Cloud Services, click on the service that hosts the\n        application in which you want to use autoscaling, then click\n        **Instances**. The **Role* column displays the name of your target\n        role.\n\n        ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling07.png)\n\n\n    -   **[storageaccountname]** and **[storageaccountkey]:** The name of the Azure storage account that you are using for your target Azure application.\n\n    1.  In the Azure Management Portal, click\n        **Storage**.\n\n    2.  In the list of Storage Accounts, select  the storage account you are using. The\n        **Name** column will display the **Name**.\n\n    3.  Click the **Manage Keys** button at the bottom of the screen\n        to get the primary access key.\n\n        ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling08.png)\n  \n \n    -   **[managementcertificatethumbprint]:** The **Thumbprint** of the Management Certificate that the block will use to secure scaling requests to the target application.\n\n    1.  In the Azure Management Portal, click\n        **Settings**.\n\n    2.  The **Thumbprint** column will display the **Thumbprint**.\n\n        ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling09.png)\n \n\nTo find out more about the content of the service model file, see\n[Storing Your Service Information Data][].\n\n## How To: Define your Autoscaling Rules\n\nTypically, you store the autoscaling rules that control the number of\nrole instances in your target application in an XML file. You can find a\ncopy of the schema for this XML file in the **AutoscalingRules.xsd**\nfile in your project. In Visual Studio, this schema provides\nIntellisense and validation when you edit the XML file.\n\nCreate a new XML file named **rules.xml** in your project.\n\nIn Visual Studio, you must ensure that the rules file is copied to the\noutput folder. To do this:\n\n1.  Right-click on the file and select **Properties**.\n\n2.  Within the Properties pane, set the **Copy to Output Directory**\n    value to **Copy always**.\n\nThe following code sample shows an example rule set in a **rules.xml**\nfile:\n\n    <?xml version=\"1.0\" encoding=\"utf-8\" ?>\n    <rules xmlns=\"http://schemas.microsoft.com/practices/2011/entlib/autoscaling/rules\">\n      <constraintRules>\n        <rule name=\"default\" enabled=\"true\" rank=\"1\" description=\"The default constraint rule\">\n          <actions>\n            <range min=\"2\" max=\"6\" target=\"AutoscalingApplicationRole\"/>\n          </actions>\n        </rule>\n      </constraintRules>\n      <reactiveRules>\n        <rule name=\"ScaleUpOnHighUtilization\" rank=\"10\" description=\"Scale up the web role\" enabled=\"true\" >\n          <when>\n            <any>\n               <greaterOrEqual operand=\"WebRoleA_CPU_Avg_5m\" than=\"60\"/>\n            </any>\n          </when>\n          <actions>\n            <scale target=\"AutoscalingApplicationRole\" by=\"1\"/>\n          </actions>\n        </rule>\n        <rule name=\"ScaleDownOnLowUtilization\" rank=\"10\" description=\"Scale up the web role\" enabled=\"true\" >\n          <when>\n            <all>\n              <less operand=\"WebRoleA_CPU_Avg_5m\" than=\"60\"/>\n            </all>\n          </when>\n          <actions>\n            <scale target=\"AutoscalingApplicationRole\" by=\"-1\"/>\n          </actions>\n        </rule>\n      </reactiveRules>\n      <operands>\n        <performanceCounter alias=\"WebRoleA_CPU_Avg_5m\"\n          performanceCounterName=\"\\Processor(_Total)\\% Processor Time\"\n          source =\"AutoscalingApplicationRole\"\n          timespan=\"00:05:00\" aggregate=\"Average\"/>\n      </operands>\n    </rules>\n\nIn this example there are three autoscaling rules (one **constraint\nrule** and two **reactive rules**) that operate on a target named\n**AutoscalingApplicationRole** that is the alias of a role defined in\nthe **service model**:\n\n-   The constraint rule is always active and sets the minimum number of\n    role instances to two and the maximum number of role instances to\n    six.\n\n-   Both reactive rules use an **operand** named\n    **WebRoleA\\_CPU\\_Avg\\_5m** that calculates the average CPU usage\n    over the last five minutes for an Azure role named\n    **AutoscalingApplicationRole.** This role is defined in the\n    **service model**.\n\n-   The reactive rule named **ScaleUpOnHighUtilization** increments the\n    instance count of the target role by one if the average CPU\n    utilization over the last five minutes has been greater than or\n    equal to 60%.\n\n-   The reactive rule named **ScaleDownOnLowUtilization** decrements the\n    instance count of the target role by one if the average CPU\n    utilization over the last five minutes has been less than 60%.\n\n## How To: Configure the Autoscaling Application Block\n\nAfter you have defined your service model and autoscaling rules, you\nmust configure the Autoscaling Application Block to use them. This\noperational configuration information is stored in the application\nconfiguration file.\n\nBy default, the Autoscaling Application Block expects the autoscaling\nrules and service model to be stored in Azure blobs. In this\nexample, you will configure the block to load them from the local file\nsystem.\n\n### Configure the Autoscaling Application Block in the host application\n\n1.  Right-click on the **App.config** file in Solution Explorer and then\n    click **Edit Configuration File**.\n\n2.  In the **Blocks** menu, click **Add Autoscaling Settings**:  \n    ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling10.png)\n  \n3.  Expand the **Autoscaling Settings** and then click the ellipsis (...)\n    next to the **Data Points Store Storage Account**, add the **Account\n    name** and **Account key** of the Azure storage account\n    where the block will store the data points that it collects (see\n    [How To: Define your Service Model][] if you are unsure about where\n    to find these values), and then click **OK**:  \n\n    ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling11.png)\n\n4.  Expand the **Autoscaling Settings** section to reveal the **Rules\n    Store** and **Service Information Store** sections. By default, they\n    are configured to use Azure blob storage:  \n    ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling12.png)\n\n\n5.  Click the plus sign (+) next to **Rules Store**, point to **Set\n    Rules Store**, then click **Use Local File Rules Store**, and then\n    click **Yes**.\n\n6.  In the **File Name** box, type **rules.xml**. This is the name of\n    the file that contains your autoscaling rules:  \n    ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling13.png)\n\n\n7.  Click the plus sign (+) next to **Service Information Store**, point\n    to **Set Service Information Store**, then click **Use Local File\n    Service Information Store**, and then click **Yes**.\n\n8.  In the **File Name** box, type **services.xml**. This is the name of\n    the file that contains your autoscaling rules:  \n    ![image](./media/cloud-services-dotnet-autoscaling-application-block/autoscaling14.png)\n\n\n9.  In the Enterprise Library Configuration window, on the **File**\n    menu, click **Save** to save your configuration changes. Then in the\n    Enterprise Library Configuration window, on the **File** menu, click\n    **Exit**.\n\nTo get detailed information about the actions that the Autoscaling\nApplication Block is performing you need to capture the log messages\nthat it writes. For example, if you are hosting the block in a console\napplication, you can view the log messages in the Output window in\nVisual Studio. The following section shows you how to configure this\nbehavior.\n\n### Configure logging in the Autoscaling Application Block host application\n\n1.  In Visual Studio, double-click on the **App.config** file in\n    Solution Explorer to open it in the editor. Then add the\n    **system.diagnostics** section as shown in the following sample:\n\n        <?xml version=\"1.0\" encoding=\"utf-8\" ?>\n        <configuration>\n          ...\n          <system.diagnostics>\n            <sources>\n              <sourcename=\"Autoscaling General\" switchName=\"SourceSwitch\" switchType=\"System.Diagnostics.SourceSwitch\" />\n              <sourcename=\"Autoscaling Updates\" switchName=\"SourceSwitch\" switchType=\"System.Diagnostics.SourceSwitch\" />\n            </sources>\n            <switches>\n              <addname=\"SourceSwitch\" value=\"Verbose, Information, Warning, Error, Critical\" />\n            </switches>\n          </system.diagnostics>\n        </configuration>\n\n2.  Save your changes.\n\nYou can now run your Autoscaling Application Block host console\napplication and observe how the autoscaling rules work with your target\nAzure application. When you run the host console application,\nyou should see messages similar to the following in the Output window in\nVisual Studio. These log messages help you to understand the behavior of\nthe block. For example, they indicate which rules are being matched by\nthe block and what actions the block is taking.\n\n    Autoscaling General Verbose: 1002 : Rule match.\n    [BEGIN DATA]{\"EvaluationId\":\"6b27dfa0-b671-44a3-adf1-bb1e0b7c3726\",\n    \"MatchingRules\":[{\"RuleName\":\"default\",\"RuleDescription\":\"The default constraint rule\",\n    \"Targets\":[\"AutoscalingApplicationRole\"]},{\"RuleName\":\"ScaleUp\",\"RuleDescription\":\"Scale up the web role\",\n    \"Targets\":[]},{\"RuleName\":\"ScaleDown\",\"RuleDescription\":\"Scale up the web role\",\"Targets\":[]}]}\n\n    Autoscaling Updates Verbose: 3001 : The current deployment configuration for a hosted service is about to be checked\n    to determine if a change is required (for role scaling or changes to settings).\n    [BEGIN DATA]{\"EvaluationId\":\"6b27dfa0-b671-44a3-adf1-bb1e0b7c3726\",\n    \"HostedServiceDetails\":{\"Subscription\":\"AutoscalingHowTo\",\"HostedService\":\"autoscalingtarget\",\n    \"DeploymentSlot\":\"Staging\"},\"ScaleRequests\":{\"AutoscalingApplicationRole\":{\"Min\":2,\"Max\":6,\"AbsoluteDelta\":0,\n    \"RelativeDelta\":0,\"MatchingRules\":\"default\"}},\"SettingChangeRequests\":{}}\n\n    Autoscaling Updates Verbose: 3003 : Role scaling requests for hosted service about to be submitted.\n    [BEGIN DATA]{\"EvaluationId\":\"6b27dfa0-b671-44a3-adf1-bb1e0b7c3726\",\n    \"HostedServiceDetails\":{\"Subscription\":\"AutoscalingHowTo\",\"HostedService\":\"autoscalingtarget\",\n    \"DeploymentSlot\":\"Staging\"},\n    \"ScaleRequests\":{\"AutoscalingApplicationRole\":\n    {\"Min\":2,\"Max\":6,\"AbsoluteDelta\":0,\"RelativeDelta\":0,\"MatchingRules\":\"default\"}},\n    \"SettingChangeRequests\":{},\"InstanceChanges\":{\"AutoscalingApplicationRole\":{\"CurrentValue\":1,\"DesiredValue\":2}},\n    \"SettingChanges\":{}}\n\n    Autoscaling Updates Information: 3002 : Role configuration changes for deployment were submitted.\n    [BEGIN DATA]{\"EvaluationId\":\"6b27dfa0-b671-44a3-adf1-bb1e0b7c3726\",\n    \"HostedServiceDetails\":{\"Subscription\":\"AutoscalingHowTo\",\"HostedService\":\"autoscalingtarget\",\n    \"DeploymentSlot\":\"Staging\"},\"ScaleRequests\":{\"AutoscalingApplicationRole\":{\"Min\":2,\"Max\":6,\"AbsoluteDelta\":0,\n    \"RelativeDelta\":0,\"MatchingRules\":\"default\"}},\"SettingChangeRequests\":{},\n    \"InstanceChanges\":{\"AutoscalingApplicationRole\":{\"CurrentValue\":1,\"DesiredValue\":2}},\n    \"SettingChanges\":{},\"RequestID\":\"f8ca3ada07c24559b1cb075534f02d44\"}\n\n## Next Steps\n\nNow that you've learned the basics of using the Autoscaling Application\nBlock, follow these links to learn how to implement more complex\nautoscaling scenarios:\n\n-   [Hosting the Autoscaling Application Block in a Worker Role][]\n-   [Implementing Throttling Behavior][]\n-   [Understanding Rule Ranks and Reconciliation][]\n-   [Extending and Modifying the Autoscaling Application Block][]\n-   [Using the Optimizing Stabilizer to prevent high frequency oscillation and to optimize costs][]\n-   [Using Notifications and Manual Scaling][]\n-   [Defining Scale Groups][]\n-   [Using the WASABiCmdlets for manipulating the block via Windows PowerShell][]\n-   [Developer's Guide to the Enterprise Library 5.0 Integration Pack for Azure][]\n-   [How Sage Reduces Azure Hosting Costs Using Autoscaling][]\n-   [Reducing TechNet and MSDN hosting costs and environmental impact with autoscaling on Azure][]\n\n  [Microsoft Enterprise Library 5.0 Integration Pack for Azure]:\n    http://go.microsoft.com/fwlink/?LinkID=235134\n  [Using performance counters in Azure]: http://www.windowsazure.com/develop/net/common-tasks/performance-profiling/\n  [NuGet]: http://nuget.org/\n  [Azure Management Portal]: http://manage.windowsazure.com\n  [Storing Your Service Information Data]: http://msdn.microsoft.com/library/hh680878(PandP.50).aspx        \n  [Hosting the Autoscaling Application Block in a Worker Role]: http://msdn.microsoft.com/library/hh680914(PandP.50).aspx\n  [Implementing Throttling Behavior]: http://msdn.microsoft.com/library/hh680896(PandP.50).aspx\n  [Understanding Rule Ranks and Reconciliation]: http://msdn.microsoft.com/library/hh680923(PandP.50).aspx\n  [Extending and Modifying the Autoscaling Application Block]: http://msdn.microsoft.com/library/hh680889(PandP.50).aspx\n  [Using the Optimizing Stabilizer to prevent high frequency oscillation and to optimize costs]: http://msdn.microsoft.com/library/hh680951(PandP.50).aspx\n  [Using Notifications and Manual Scaling]: http://msdn.microsoft.com/library/hh680885(PandP.50).aspx\n  [Defining Scale Groups]: http://msdn.microsoft.com/library/hh680902(PandP.50).aspx\n  [Using the WASABiCmdlets for manipulating the block via Windows PowerShell]: http://msdn.microsoft.com/library/hh680938(PandP.50).aspx\n  [Developer's Guide to the Enterprise Library 5.0 Integration Pack for Azure]: http://msdn.microsoft.com/library/hh680949(PandP.50).aspx\n  [How Sage Reduces Azure Hosting Costs Using Autoscaling]: http://msdn.microsoft.com/library/jj838716(PandP.50).aspx\n  [Reducing TechNet and MSDN hosting costs and environmental impact with autoscaling on Azure]: http://msdn.microsoft.com/library/jj838718(PandP.50).aspx\n \n\ntest\n"
}