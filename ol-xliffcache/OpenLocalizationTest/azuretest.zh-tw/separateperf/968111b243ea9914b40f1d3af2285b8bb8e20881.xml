{
  "nodes": [
    {
      "content": "Use Twilio for Voice and SMS Capabilities | Microsoft Azure",
      "pos": [
        27,
        86
      ]
    },
    {
      "content": "Learn how to perform common tasks using the Twilio API with Azure Mobile Services.",
      "pos": [
        105,
        187
      ]
    },
    {
      "content": "How to use Twilio for voice and SMS capabilities from Mobile Services",
      "pos": [
        504,
        573
      ]
    },
    {
      "content": "This topic shows you how to perform common tasks using the Twilio API with Azure Mobile Services.",
      "pos": [
        575,
        672
      ]
    },
    {
      "content": "In this tutorial you will learn how to create Custom API scripts that use the Twilio API to initiate a phone call and to send a Short Message Service (SMS) message.",
      "pos": [
        673,
        837
      ]
    },
    {
      "pos": [
        843,
        877
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"WhatIs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>What is Twilio?"
    },
    {
      "content": "Twilio is powering the future of business communications, enabling developers to embed voice, VoIP, and messaging into applications.",
      "pos": [
        878,
        1010
      ]
    },
    {
      "content": "They virtualize all infrastructure needed in a cloud-based, global environment, exposing it through the Twilio communications API platform.",
      "pos": [
        1011,
        1150
      ]
    },
    {
      "content": "Applications are simple to build and scalable.",
      "pos": [
        1151,
        1197
      ]
    },
    {
      "content": "Enjoy flexibility with pay-as-you go pricing, and benefit from cloud reliability.",
      "pos": [
        1198,
        1279
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio Voice<ept id=\"p1\">**</ept> allows your applications to make and receive phone calls.",
      "pos": [
        1281,
        1355
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio SMS<ept id=\"p1\">**</ept> enables your applications to send and receive SMS messages.",
      "pos": [
        1356,
        1430
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio Client<ept id=\"p1\">**</ept> allows you to make VoIP calls from any phone, tablet, or browser and supports WebRTC.",
      "pos": [
        1431,
        1534
      ]
    },
    {
      "pos": [
        1539,
        1592
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Pricing\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Twilio Pricing and Special Offers"
    },
    {
      "content": "Azure customers receive a <bpt id=\"p1\">[</bpt>special offer<ept id=\"p1\">][special_offer]</ept>: complimentary $10 of Twilio Credit when you upgrade your Twilio Account.",
      "pos": [
        1593,
        1723
      ]
    },
    {
      "content": "This Twilio Credit can be applied to any Twilio usage ($10 credit equivalent to sending as many as 1,000 SMS messages or receiving up to 1000 inbound Voice minutes, depending on the location of your phone number and message or call destination).",
      "pos": [
        1724,
        1969
      ]
    },
    {
      "content": "Redeem this Twilio credit and get started at <bpt id=\"p1\">[</bpt>ahoy.twilio.com/azure<ept id=\"p1\">][special_offer]</ept>.",
      "pos": [
        1970,
        2054
      ]
    },
    {
      "content": "Twilio is a pay-as-you-go service.",
      "pos": [
        2056,
        2090
      ]
    },
    {
      "content": "There are no set-up fees and you can close your account at any time.",
      "pos": [
        2091,
        2159
      ]
    },
    {
      "content": "You can find more details at <bpt id=\"p1\">[</bpt>Twilio Pricing<ept id=\"p1\">][twilio_pricing]</ept>.",
      "pos": [
        2160,
        2222
      ]
    },
    {
      "pos": [
        2229,
        2258
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Concepts\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Concepts"
    },
    {
      "content": "The Twilio API is a RESTful API that provides voice and SMS functionality for applications.",
      "pos": [
        2259,
        2350
      ]
    },
    {
      "content": "Client libraries are available in multiple languages; for a list, see <bpt id=\"p1\">[</bpt>Twilio API Libraries<ept id=\"p1\">] [twilio_libraries]</ept>.",
      "pos": [
        2351,
        2463
      ]
    },
    {
      "content": "Additional tutorials are available for using the Twilio any Azure application written in <bpt id=\"p1\">[</bpt>.NET<ept id=\"p1\">][azure_twilio_howto_dotnet]</ept>, <bpt id=\"p2\">[</bpt>node.js<ept id=\"p2\">][azure_twilio_howto_node]</ept>, <bpt id=\"p3\">[</bpt>Java<ept id=\"p3\">][azure_twilio_howto_java]</ept>, <bpt id=\"p4\">[</bpt>PHP<ept id=\"p4\">][azure_twilio_howto_php]</ept>, <bpt id=\"p5\">[</bpt>Python<ept id=\"p5\">][azure_twilio_howto_python]</ept> or <bpt id=\"p6\">[</bpt>Ruby<ept id=\"p6\">][azure_twilio_howto_ruby]</ept>.",
      "pos": [
        2465,
        2760
      ]
    },
    {
      "content": "Key aspects of the Twilio API are Twilio verbs and Twilio Markup Language (TwiML).",
      "pos": [
        2762,
        2844
      ]
    },
    {
      "pos": [
        2850,
        2880
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Verbs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Twilio verbs"
    },
    {
      "pos": [
        2881,
        3010
      ],
      "content": "The API makes use of Twilio verbs; for example, the <bpt id=\"p1\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p1\">**</ept> verb instructs Twilio to audibly deliver a message on a call."
    },
    {
      "content": "The following is a list of Twilio verbs.",
      "pos": [
        3012,
        3052
      ]
    },
    {
      "content": "Learn about the other verbs and capabilities via <bpt id=\"p1\">[</bpt>Twilio Markup Language documentation<ept id=\"p1\">](http://www.twilio.com/docs/api/twiml)</ept>.",
      "pos": [
        3054,
        3180
      ]
    },
    {
      "pos": [
        3184,
        3239
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Dial&amp;gt;<ept id=\"p1\">**</ept>: Connects the caller to another phone."
    },
    {
      "pos": [
        3242,
        3318
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Gather&amp;gt;<ept id=\"p1\">**</ept>: Collects numeric digits entered on the telephone keypad."
    },
    {
      "pos": [
        3321,
        3353
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Hangup&amp;gt;<ept id=\"p1\">**</ept>: Ends a call."
    },
    {
      "pos": [
        3356,
        3394
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Play&amp;gt;<ept id=\"p1\">**</ept>: Plays an audio file."
    },
    {
      "pos": [
        3397,
        3465
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Pause&amp;gt;<ept id=\"p1\">**</ept>: Waits silently for a specified number of seconds."
    },
    {
      "pos": [
        3468,
        3571
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Record&amp;gt;<ept id=\"p1\">**</ept>: Records the caller's voice and returns a URL of a file that contains the recording."
    },
    {
      "pos": [
        3574,
        3663
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Redirect&amp;gt;<ept id=\"p1\">**</ept>: Transfers control of a call or SMS to the TwiML at a different URL."
    },
    {
      "pos": [
        3666,
        3752
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Reject&amp;gt;<ept id=\"p1\">**</ept>: Rejects an incoming call to your Twilio number without billing you"
    },
    {
      "pos": [
        3755,
        3819
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p1\">**</ept>: Converts text to speech that is made on a call."
    },
    {
      "pos": [
        3822,
        3860
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Sms&amp;gt;<ept id=\"p1\">**</ept>: Sends an SMS message."
    },
    {
      "pos": [
        3866,
        3889
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"TwiML\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>TwiML"
    },
    {
      "content": "TwiML is a set of XML-based instructions based on the Twilio verbs that inform Twilio of how to process a call or SMS.",
      "pos": [
        3890,
        4008
      ]
    },
    {
      "pos": [
        4010,
        4094
      ],
      "content": "As an example, the following TwiML would convert the text <bpt id=\"p1\">**</bpt>Hello World<ept id=\"p1\">**</ept> to speech."
    },
    {
      "content": "When your application calls the Twilio API, one of the API parameters is the URL that returns the TwiML response.",
      "pos": [
        4202,
        4315
      ]
    },
    {
      "content": "For development purposes, you can use Twilio-provided URLs to provide the TwiML responses used by your applications.",
      "pos": [
        4316,
        4432
      ]
    },
    {
      "content": "You could also host your own URLs to produce the TwiML responses, and another option is to use the <bpt id=\"p1\">**</bpt>TwiMLResponse<ept id=\"p1\">**</ept> object.",
      "pos": [
        4433,
        4557
      ]
    },
    {
      "content": "For more information about Twilio verbs, their attributes, and TwiML, see <bpt id=\"p1\">[</bpt>TwiML<ept id=\"p1\">][twiml]</ept>.",
      "pos": [
        4559,
        4648
      ]
    },
    {
      "content": "For additional information about the Twilio API, see <bpt id=\"p1\">[</bpt>Twilio API<ept id=\"p1\">][twilio_api]</ept>.",
      "pos": [
        4649,
        4727
      ]
    },
    {
      "pos": [
        4732,
        4781
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"CreateAccount\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Create a Twilio Account"
    },
    {
      "content": "When you're ready to get a Twilio account, sign up at <bpt id=\"p1\">[</bpt>Try Twilio<ept id=\"p1\">][try_twilio]</ept>.",
      "pos": [
        4782,
        4861
      ]
    },
    {
      "content": "You can start with a free account, and upgrade your account later.",
      "pos": [
        4862,
        4928
      ]
    },
    {
      "content": "When you sign up for a Twilio account, you'll receive an account ID and an authentication token.",
      "pos": [
        4930,
        5026
      ]
    },
    {
      "content": "Both will be needed to make Twilio API calls.",
      "pos": [
        5027,
        5072
      ]
    },
    {
      "content": "To prevent unauthorized access to your account, keep your authentication token secure.",
      "pos": [
        5073,
        5159
      ]
    },
    {
      "content": "Your account ID and authentication token are viewable at the <bpt id=\"p1\">[</bpt>Twilio account page<ept id=\"p1\">][twilio_account]</ept>, in the fields labeled <bpt id=\"p2\">**</bpt>ACCOUNT SID<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>AUTH TOKEN<ept id=\"p3\">**</ept>, respectively.",
      "pos": [
        5160,
        5331
      ]
    },
    {
      "pos": [
        5336,
        5382
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"create_app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Create a Mobile Service"
    },
    {
      "content": "A Mobile Service that hosts a Twilio enabled application is no different from any other Mobile Service.",
      "pos": [
        5383,
        5486
      ]
    },
    {
      "content": "You simply add the Twilio node.js library in order to reference it from your Mobile Service Custom API scripts.",
      "pos": [
        5487,
        5598
      ]
    },
    {
      "content": "For information on creating an initial mobile service, see <bpt id=\"p1\">[</bpt>Getting Started with Mobile Services<ept id=\"p1\">](mobile-services-ios-get-started.md)</ept>.",
      "pos": [
        5599,
        5733
      ]
    },
    {
      "pos": [
        5738,
        5836
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"ConfigureMobileService\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Configure Your Mobile Service to use the Twilio Node.js Library"
    },
    {
      "content": "Twilio provides a Node.js library that wraps various aspects of Twilio to provide simple and easy ways to interact with the Twilio REST API and Twilio Client to generate TwiML responses.",
      "pos": [
        5837,
        6023
      ]
    },
    {
      "content": "To use the Twilio node.js library in your Mobile Service, you need leverage Mobile Services npm module support, which you can do by storing your scripts in source control.",
      "pos": [
        6025,
        6196
      ]
    },
    {
      "content": "Complete the tutorial <bpt id=\"p1\">[</bpt>Store Scripts in Source Control<ept id=\"p1\">](mobile-services-store-scripts-source-control.md)</ept>.",
      "pos": [
        6201,
        6306
      ]
    },
    {
      "content": "This walks you through setting-up source control for your Mobile Services and storing your server scripts in a Git repository.",
      "pos": [
        6307,
        6433
      ]
    },
    {
      "pos": [
        6438,
        6685
      ],
      "content": "After you have set up source control for your Mobile Service, open the repository on your local computer, browse to the <ph id=\"ph1\">`\\services`</ph> subfolder, open the package.json file in a text editor, and add the following field to the <bpt id=\"p1\">**</bpt>dependencies<ept id=\"p1\">**</ept> object:"
    },
    {
      "pos": [
        6718,
        6853
      ],
      "content": "After you have added the Twilio package reference to the <bpt id=\"p1\">**</bpt>dependencies<ept id=\"p1\">**</ept> object, the package.json file should look like the following:"
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>The dependency for Twilio should be added as <ph id=\"ph2\">`\"twilio\": \"~1.7.0\"`</ph>, with a (~).",
      "pos": [
        7322,
        7412
      ]
    },
    {
      "content": "A reference with a caret (^) is not supported.",
      "pos": [
        7413,
        7459
      ]
    },
    {
      "content": "Commit this file update and push the update back to the mobile service.",
      "pos": [
        7464,
        7535
      ]
    },
    {
      "content": "This update to the package.json file will restart your mobile service.",
      "pos": [
        7541,
        7611
      ]
    },
    {
      "content": "The mobile service now installs and loads the Twilio package so you can reference and use the Twilio library in your custom API and table scripts.",
      "pos": [
        7613,
        7759
      ]
    },
    {
      "pos": [
        7764,
        7821
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_make_call\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Make an outgoing call"
    },
    {
      "content": "The following script shows how to initiate an outgoing call from your Mobile Service using the <bpt id=\"p1\">**</bpt>makeCall<ept id=\"p1\">**</ept> function.",
      "pos": [
        7822,
        7939
      ]
    },
    {
      "content": "This code also uses a Twilio-provided site to return the Twilio Markup Language (TwiML) response.",
      "pos": [
        7940,
        8037
      ]
    },
    {
      "content": "Substitute your values for the <bpt id=\"p1\">**</bpt>From<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>To<ept id=\"p2\">**</ept> phone numbers, and ensure that you verify the <bpt id=\"p3\">**</bpt>From<ept id=\"p3\">**</ept> phone number for your Twilio account prior to running the code.",
      "pos": [
        8038,
        8207
      ]
    },
    {
      "pos": [
        8657,
        8827
      ],
      "content": "For more information about the parameters passed in to the <bpt id=\"p1\">**</bpt>client.makeCall<ept id=\"p1\">**</ept> function, see <bpt id=\"p2\">[</bpt>http://www.twilio.com/docs/api/rest/making-calls<ept id=\"p2\">][twilio_rest_making_calls]</ept>."
    },
    {
      "content": "As mentioned, this code uses a Twilio-provided site to return the TwiML response.",
      "pos": [
        8829,
        8910
      ]
    },
    {
      "content": "You could instead use your own site to provide the TwiML response.",
      "pos": [
        8911,
        8977
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>How to: Provide TwiML responses from your own web site<ept id=\"p1\">](#howto_provide_twiml_responses)</ept>.",
      "pos": [
        8978,
        9093
      ]
    },
    {
      "pos": [
        9098,
        9152
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_send_sms\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Send an SMS message"
    },
    {
      "content": "The following code shows how to send an SMS message using the <bpt id=\"p1\">**</bpt>sendSms<ept id=\"p1\">**</ept>  function.",
      "pos": [
        9153,
        9237
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>From<ept id=\"p1\">**</ept> number is provided by Twilio for trial accounts to send SMS messages.",
      "pos": [
        9238,
        9320
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>To<ept id=\"p1\">**</ept> number must be verified for your Twilio account before you run the code.",
      "pos": [
        9321,
        9404
      ]
    },
    {
      "pos": [
        10250,
        10345
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_provide_twiml_responses\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Provide TwiML responses from your own website"
    },
    {
      "content": "When your application initiates a call to the Twilio API - for example, via the client.InitiateOutboundCall method - Twilio sends your request to a URL that is expected to return a TwiML response.",
      "pos": [
        10347,
        10543
      ]
    },
    {
      "content": "The example in How to: Make an outgoing call uses the Twilio-provided URL http://twimlets.com/message to return the response.",
      "pos": [
        10544,
        10669
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> While TwiML is designed for use by web services, you can view the TwiML in your browser.",
      "pos": [
        10673,
        10774
      ]
    },
    {
      "content": "For example, click <bpt id=\"p1\">[</bpt>twimlet_message_url<ept id=\"p1\">](http://twimlets.com/message)</ept> to see an empty &amp;lt;Response&amp;gt; element; as another example, click <bpt id=\"p2\">[</bpt>twimlet_message_url_hello_world<ept id=\"p2\">](http://twimlets.com/message?Message%5B0%5D=Hello%20World)</ept> to see a &amp;lt;Response&amp;gt; element that contains a &amp;lt;Say&amp;gt; element.",
      "pos": [
        10775,
        11075
      ]
    },
    {
      "content": "Instead of relying on the Twilio-provided URL, you can create your own URL site that returns HTTP responses.",
      "pos": [
        11077,
        11185
      ]
    },
    {
      "content": "You can create the site in any language that returns HTTP responses.",
      "pos": [
        11186,
        11254
      ]
    },
    {
      "content": "This topic assumes you'll be hosting the URL from an ASP.NET generic handler.",
      "pos": [
        11255,
        11332
      ]
    },
    {
      "content": "The following script results in a TwiML response that says Hello World on the call.",
      "pos": [
        11334,
        11417
      ]
    },
    {
      "pos": [
        11730,
        11847
      ],
      "content": "For more information about TwiML, see <bpt id=\"p1\">[</bpt>https://www.twilio.com/docs/api/twiml<ept id=\"p1\">](https://www.twilio.com/docs/api/twiml)</ept>."
    },
    {
      "pos": [
        11849,
        12000
      ],
      "content": "Once you have set up a way to provide TwiML responses, you can pass that URL into the <bpt id=\"p1\">**</bpt>client.makeCall<ept id=\"p1\">**</ept> method as shown in the following code sample:"
    }
  ],
  "content": "<properties\n    pageTitle=\"Use Twilio for Voice and SMS Capabilities | Microsoft Azure\"\n    description=\"Learn how to perform common tasks using the Twilio API with Azure Mobile Services.\"\n    services=\"mobile-services\"\n    documentationCenter=\"\"\n    authors=\"devinrader\"\n    manager=\"twilio\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"mobile-services\"\n    ms.workload=\"mobile\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"multiple\"\n    ms.topic=\"article\"\n    ms.date=\"06/16/2015\"\n    ms.author=\"devinrader\"/>\n\n\n# How to use Twilio for voice and SMS capabilities from Mobile Services\n\nThis topic shows you how to perform common tasks using the Twilio API with Azure Mobile Services. In this tutorial you will learn how to create Custom API scripts that use the Twilio API to initiate a phone call and to send a Short Message Service (SMS) message. \n\n## <a id=\"WhatIs\"></a>What is Twilio?\nTwilio is powering the future of business communications, enabling developers to embed voice, VoIP, and messaging into applications. They virtualize all infrastructure needed in a cloud-based, global environment, exposing it through the Twilio communications API platform. Applications are simple to build and scalable. Enjoy flexibility with pay-as-you go pricing, and benefit from cloud reliability.\n\n**Twilio Voice** allows your applications to make and receive phone calls. **Twilio SMS** enables your applications to send and receive SMS messages. **Twilio Client** allows you to make VoIP calls from any phone, tablet, or browser and supports WebRTC.\n\n## <a id=\"Pricing\"></a>Twilio Pricing and Special Offers\nAzure customers receive a [special offer][special_offer]: complimentary $10 of Twilio Credit when you upgrade your Twilio Account. This Twilio Credit can be applied to any Twilio usage ($10 credit equivalent to sending as many as 1,000 SMS messages or receiving up to 1000 inbound Voice minutes, depending on the location of your phone number and message or call destination). Redeem this Twilio credit and get started at [ahoy.twilio.com/azure][special_offer].\n\nTwilio is a pay-as-you-go service. There are no set-up fees and you can close your account at any time. You can find more details at [Twilio Pricing][twilio_pricing].  \n\n## <a id=\"Concepts\"></a>Concepts\nThe Twilio API is a RESTful API that provides voice and SMS functionality for applications. Client libraries are available in multiple languages; for a list, see [Twilio API Libraries] [twilio_libraries].  Additional tutorials are available for using the Twilio any Azure application written in [.NET][azure_twilio_howto_dotnet], [node.js][azure_twilio_howto_node], [Java][azure_twilio_howto_java], [PHP][azure_twilio_howto_php], [Python][azure_twilio_howto_python] or [Ruby][azure_twilio_howto_ruby].\n\nKey aspects of the Twilio API are Twilio verbs and Twilio Markup Language (TwiML).\n\n### <a id=\"Verbs\"></a>Twilio verbs\nThe API makes use of Twilio verbs; for example, the **&lt;Say&gt;** verb instructs Twilio to audibly deliver a message on a call.\n\nThe following is a list of Twilio verbs.  Learn about the other verbs and capabilities via [Twilio Markup Language documentation](http://www.twilio.com/docs/api/twiml).\n\n* **&lt;Dial&gt;**: Connects the caller to another phone.\n* **&lt;Gather&gt;**: Collects numeric digits entered on the telephone keypad.\n* **&lt;Hangup&gt;**: Ends a call.\n* **&lt;Play&gt;**: Plays an audio file.\n* **&lt;Pause&gt;**: Waits silently for a specified number of seconds.\n* **&lt;Record&gt;**: Records the caller's voice and returns a URL of a file that contains the recording.\n* **&lt;Redirect&gt;**: Transfers control of a call or SMS to the TwiML at a different URL.\n* **&lt;Reject&gt;**: Rejects an incoming call to your Twilio number without billing you\n* **&lt;Say&gt;**: Converts text to speech that is made on a call.\n* **&lt;Sms&gt;**: Sends an SMS message.\n\n### <a id=\"TwiML\"></a>TwiML\nTwiML is a set of XML-based instructions based on the Twilio verbs that inform Twilio of how to process a call or SMS.\n\nAs an example, the following TwiML would convert the text **Hello World** to speech.\n\n    <?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n    <Response>\n       <Say>Hello World</Say>\n    </Response>\n\nWhen your application calls the Twilio API, one of the API parameters is the URL that returns the TwiML response. For development purposes, you can use Twilio-provided URLs to provide the TwiML responses used by your applications. You could also host your own URLs to produce the TwiML responses, and another option is to use the **TwiMLResponse** object.\n\nFor more information about Twilio verbs, their attributes, and TwiML, see [TwiML][twiml]. For additional information about the Twilio API, see [Twilio API][twilio_api].\n\n## <a id=\"CreateAccount\"></a>Create a Twilio Account\nWhen you're ready to get a Twilio account, sign up at [Try Twilio][try_twilio]. You can start with a free account, and upgrade your account later.\n\nWhen you sign up for a Twilio account, you'll receive an account ID and an authentication token. Both will be needed to make Twilio API calls. To prevent unauthorized access to your account, keep your authentication token secure. Your account ID and authentication token are viewable at the [Twilio account page][twilio_account], in the fields labeled **ACCOUNT SID** and **AUTH TOKEN**, respectively.\n\n## <a id=\"create_app\"></a>Create a Mobile Service\nA Mobile Service that hosts a Twilio enabled application is no different from any other Mobile Service. You simply add the Twilio node.js library in order to reference it from your Mobile Service Custom API scripts. For information on creating an initial mobile service, see [Getting Started with Mobile Services](mobile-services-ios-get-started.md).\n\n## <a id=\"ConfigureMobileService\"></a>Configure Your Mobile Service to use the Twilio Node.js Library\nTwilio provides a Node.js library that wraps various aspects of Twilio to provide simple and easy ways to interact with the Twilio REST API and Twilio Client to generate TwiML responses.\n\nTo use the Twilio node.js library in your Mobile Service, you need leverage Mobile Services npm module support, which you can do by storing your scripts in source control.\n\n1. Complete the tutorial [Store Scripts in Source Control](mobile-services-store-scripts-source-control.md). This walks you through setting-up source control for your Mobile Services and storing your server scripts in a Git repository.\n\n2. After you have set up source control for your Mobile Service, open the repository on your local computer, browse to the `\\services` subfolder, open the package.json file in a text editor, and add the following field to the **dependencies** object:\n\n        \"twilio\": \"~1.7.0\"\n\n3. After you have added the Twilio package reference to the **dependencies** object, the package.json file should look like the following:\n\n        {\n          \"name\": \"todolist\",\n          \"version\": \"1.0.0\",\n          \"description\": \"todolist - hosted on Azure Mobile Services\",\n          \"main\": \"server.js\",\n          \"engines\": {\n            \"node\": \">= 0.8.19\"\n          },\n          \"dependencies\": {\n            \"twilio\": \"~1.7.0\"\n          },\n          \"devDependencies\": {},\n          \"scripts\": {},\n          \"author\": \"unknown\",\n          \"licenses\": [],\n          \"keywords\":[]\n        }\n\n    >[AZURE.NOTE]The dependency for Twilio should be added as `\"twilio\": \"~1.7.0\"`, with a (~). A reference with a caret (^) is not supported.\n\n4. Commit this file update and push the update back to the mobile service.\n\n    This update to the package.json file will restart your mobile service.\n\nThe mobile service now installs and loads the Twilio package so you can reference and use the Twilio library in your custom API and table scripts.\n\n## <a id=\"howto_make_call\"></a>How to: Make an outgoing call\nThe following script shows how to initiate an outgoing call from your Mobile Service using the **makeCall** function. This code also uses a Twilio-provided site to return the Twilio Markup Language (TwiML) response. Substitute your values for the **From** and **To** phone numbers, and ensure that you verify the **From** phone number for your Twilio account prior to running the code.\n\n    var twilio = require('twilio');\n\n    exports.post = function(request, response) {\n\n        var client = new twilio.RestClient('[ACCOUNT_SID]', 'AUTH_TOKEN');\n\n        client.makeCall({\n            to:'+16515556677',\n            from: '+14506667788',\n            url: 'http://www.example.com/twiml.php'\n\n        }, function(err, responseData) {\n            console.log(responseData.from);\n            response.send(200, '');\n        });\n    };\n\nFor more information about the parameters passed in to the **client.makeCall** function, see [http://www.twilio.com/docs/api/rest/making-calls][twilio_rest_making_calls].\n\nAs mentioned, this code uses a Twilio-provided site to return the TwiML response. You could instead use your own site to provide the TwiML response. For more information, see [How to: Provide TwiML responses from your own web site](#howto_provide_twiml_responses).\n\n## <a id=\"howto_send_sms\"></a>How to: Send an SMS message\nThe following code shows how to send an SMS message using the **sendSms**  function. The **From** number is provided by Twilio for trial accounts to send SMS messages. The **To** number must be verified for your Twilio account before you run the code.\n\n    var twilio = require('twilio');\n\n    exports.post = function(request, response) {\n\n        var client = new twilio.RestClient('[ACCOUNT_SID]', 'AUTH_TOKEN');\n\n        client.sendSms({\n            to:'[]',\n            from:'[]',\n            body:'ahoy hoy! Testing Twilio and node.js'\n        }, function(error, message) {\n\n            // The \"error\" variable will contain error information, if any.\n            // If the request was successful, this value will be \"false\"\n            if (!error) {\n                console.log('Success! The SID for this SMS message is: ' + message.sid);\n                console.log('Message sent on: ' + message.dateCreated);\n            }\n            else {\n                console.log('Oops! There was an error.');\n            }\n            response.send(200, { error : error } );\n        });\n    };\n\n\n## <a id=\"howto_provide_twiml_responses\"></a>How to: Provide TwiML responses from your own website\n\nWhen your application initiates a call to the Twilio API - for example, via the client.InitiateOutboundCall method - Twilio sends your request to a URL that is expected to return a TwiML response. The example in How to: Make an outgoing call uses the Twilio-provided URL http://twimlets.com/message to return the response.\n\n> [AZURE.NOTE] While TwiML is designed for use by web services, you can view the TwiML in your browser. For example, click [twimlet_message_url](http://twimlets.com/message) to see an empty &lt;Response&gt; element; as another example, click [twimlet_message_url_hello_world](http://twimlets.com/message?Message%5B0%5D=Hello%20World) to see a &lt;Response&gt; element that contains a &lt;Say&gt; element.\n\nInstead of relying on the Twilio-provided URL, you can create your own URL site that returns HTTP responses. You can create the site in any language that returns HTTP responses. This topic assumes you'll be hosting the URL from an ASP.NET generic handler.\n\nThe following script results in a TwiML response that says Hello World on the call.\n\n    var twilio = require('twilio');\n\n    exports.post = function(request, response) {\n        var resp = new twilio.TwimlResponse();\n        resp.say({voice:'woman'}, 'ahoy hoy! Testing Twilio and node.js');\n        response.set('Content-Type', 'text/xml');\n        response.send(200, resp.toString());\n    };\n\nFor more information about TwiML, see [https://www.twilio.com/docs/api/twiml](https://www.twilio.com/docs/api/twiml).\n\nOnce you have set up a way to provide TwiML responses, you can pass that URL into the **client.makeCall** method as shown in the following code sample:\n\n    var twilio = require('twilio');\n\n    exports.post = function(request, response) {\n\n        var client = new twilio.RestClient('[ACCOUNT_SID]', 'AUTH_TOKEN');\n\n        client.makeCall({\n            to:'+16515556677',\n            from: '+14506667788',\n            url: 'http://<your_mobile_service>.azure-mobile.net/api/makeCall'\n\n        }, function(err, responseData) {\n\n            console.log(responseData.from);\n            response.send(200, '');\n        });\n    };\n\n[AZURE.INCLUDE [twilio_additional_services_and_next_steps](../../includes/twilio_additional_services_and_next_steps.md)]\n\n\n[twilio_rest_making_calls]: http://www.twilio.com/docs/api/rest/making-calls\n\n[twilio_pricing]: http://www.twilio.com/pricing\n[special_offer]: http://ahoy.twilio.com/azure\n[twilio_libraries]: https://www.twilio.com/docs/libraries\n[twiml]: http://www.twilio.com/docs/api/twiml\n[twilio_api]: http://www.twilio.com/api\n[try_twilio]: https://www.twilio.com/try-twilio\n[twilio_account]:  https://www.twilio.com/user/account\n[verify_phone]: https://www.twilio.com/user/account/phone-numbers/verified#\n\n\n[azure_twilio_howto_dotnet]: /develop/net/how-to-guides/twilio-voice-and-sms-service/\n[azure_twilio_howto_java]: /develop/java/how-to-guides/twilio-voice-and-sms-service/\n[azure_twilio_howto_node]: /develop/nodejs/how-to-guides/twilio-voice-and-sms-service/\n[azure_twilio_howto_ruby]: /develop/ruby/how-to-guides/twilio-voice-and-sms-service/\n[azure_twilio_howto_python]: /develop/python/how-to-guides/twilio-voice-and-sms-service/\n[azure_twilio_howto_php]: /develop/php/how-to-guides/twilio-voice-and-sms-service/\n"
}