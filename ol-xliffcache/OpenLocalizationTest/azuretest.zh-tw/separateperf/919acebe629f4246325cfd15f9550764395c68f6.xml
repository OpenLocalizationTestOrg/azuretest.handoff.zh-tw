{
  "nodes": [
    {
      "content": "Deploy SQL Server AlwaysOn with an Azure Resource Manager template | Microsoft Azure",
      "pos": [
        27,
        111
      ]
    },
    {
      "content": "Easily deploy five servers that support SQL Server AlwaysOn with a Resource Manager template and the Azure preview portal, Azure PowerShell, or the Azure CLI.",
      "pos": [
        130,
        288
      ]
    },
    {
      "content": "Deploy SQL Server AlwaysOn with an Azure Resource Manager template",
      "pos": [
        669,
        735
      ]
    },
    {
      "content": "Use the instructions in this article to deploy SQL Server AlwaysOn using an Azure Resource Manager template.",
      "pos": [
        737,
        845
      ]
    },
    {
      "content": "This template creates five virtual machines in a new virtual network on two different subnets.",
      "pos": [
        846,
        940
      ]
    },
    {
      "content": "You can run the template with the Azure preview portal, Azure PowerShell, or the Azure CLI.",
      "pos": [
        1026,
        1117
      ]
    },
    {
      "content": "Azure preview portal",
      "pos": [
        1122,
        1142
      ]
    },
    {
      "pos": [
        1144,
        1445
      ],
      "content": "To deploy this workload using an Azure Resource Manager template and the Azure preview portal, click <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsql-server-2014-alwayson-dsc%2Fazuredeploy.json)</ept>."
    },
    {
      "pos": [
        1539,
        1581
      ],
      "content": "For the <bpt id=\"p1\">**</bpt>Template<ept id=\"p1\">**</ept> pane, click <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Parameters<ept id=\"p1\">**</ept>.",
      "pos": [
        1586,
        1607
      ]
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Parameters<ept id=\"p1\">**</ept> pane, enter new values, select from allowed values, or accept default values, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.",
      "pos": [
        1608,
        1730
      ]
    },
    {
      "pos": [
        1735,
        1811
      ],
      "content": "If needed, click <bpt id=\"p1\">**</bpt>Subscription<ept id=\"p1\">**</ept> and select the correct Azure subscription."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Resource group<ept id=\"p1\">**</ept> and select an existing resource group.",
      "pos": [
        1816,
        1879
      ]
    },
    {
      "content": "Alternately, click <bpt id=\"p1\">**</bpt>Or create new<ept id=\"p1\">**</ept> to create a new one for this workload.",
      "pos": [
        1880,
        1955
      ]
    },
    {
      "pos": [
        1960,
        2043
      ],
      "content": "If needed, click <bpt id=\"p1\">**</bpt>Resource group location<ept id=\"p1\">**</ept> and select the correct Azure location."
    },
    {
      "pos": [
        2048,
        2138
      ],
      "content": "If needed, click <bpt id=\"p1\">**</bpt>Legal terms<ept id=\"p1\">**</ept> to review the terms and agreement for using the template."
    },
    {
      "pos": [
        2143,
        2160
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Depending on the template, it can take some time for Azure to build the workload.",
      "pos": [
        2162,
        2243
      ]
    },
    {
      "content": "When the template execution is complete, you have a new five-server SQL Server AlwaysOn configuration in your existing or new resource group.",
      "pos": [
        2244,
        2385
      ]
    },
    {
      "content": "Azure PowerShell",
      "pos": [
        2390,
        2406
      ]
    },
    {
      "content": "Before you begin, make sure you have the right version of Azure PowerShell installed, you have logged in, and you have switched to the new Resource Manager mode.",
      "pos": [
        2408,
        2569
      ]
    },
    {
      "content": "For the details, click <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](virtual-machines-deploy-rmtemplates-powershell.md#setting-up-powershell-for-resource-manager-templates)</ept>.",
      "pos": [
        2570,
        2704
      ]
    },
    {
      "content": "Fill in an Azure deployment name, a new Resource Group name, and an Azure datacenter location in the following set of commands.",
      "pos": [
        2706,
        2833
      ]
    },
    {
      "content": "Remove everything within the quotes, including the &lt; and &gt; characters.",
      "pos": [
        2834,
        2904
      ]
    },
    {
      "content": "Here is an example.",
      "pos": [
        3335,
        3354
      ]
    },
    {
      "content": "Next, run your command block in the Azure PowerShell prompt.",
      "pos": [
        3741,
        3801
      ]
    },
    {
      "content": "When you run the <bpt id=\"p1\">**</bpt>New-AzureResourceGroupDeployment<ept id=\"p1\">**</ept> command, you will be prompted to supply the values for a series of parameters.",
      "pos": [
        3803,
        3935
      ]
    },
    {
      "content": "When you have specified all the parameter values, <bpt id=\"p1\">**</bpt>New-AzureResourceGroupDeployment<ept id=\"p1\">**</ept> creates and configures the virtual machines.",
      "pos": [
        3936,
        4067
      ]
    },
    {
      "content": "When the template execution is complete, you have a new five-server SQL Server AlwaysOn configuration in your new resource group.",
      "pos": [
        4069,
        4198
      ]
    },
    {
      "content": "Azure CLI",
      "pos": [
        4203,
        4212
      ]
    },
    {
      "content": "Before you begin, make sure you have the right version of Azure CLI installed, you have logged in, and you have switched to the new Resource Manager mode.",
      "pos": [
        4214,
        4368
      ]
    },
    {
      "content": "For the details, click <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](virtual-machines-deploy-rmtemplates-azure-cli.md#getting-ready)</ept>.",
      "pos": [
        4369,
        4463
      ]
    },
    {
      "content": "First, you create a new resource group.",
      "pos": [
        4465,
        4504
      ]
    },
    {
      "content": "Use the following command and specify the name of the group and the Azure data center location into which you want to deploy.",
      "pos": [
        4505,
        4630
      ]
    },
    {
      "content": "Next, use the following command and specify the name of your new resource group and the name of an Azure deployment.",
      "pos": [
        4680,
        4796
      ]
    },
    {
      "content": "Here is an example.",
      "pos": [
        4999,
        5018
      ]
    },
    {
      "content": "When you run the <bpt id=\"p1\">**</bpt>azure group deployment create<ept id=\"p1\">**</ept> command, you will be prompted to supply the values for a series of parameters.",
      "pos": [
        5244,
        5373
      ]
    },
    {
      "content": "When you have specified all the parameter values, Azure creates and configures the virtual machines.",
      "pos": [
        5374,
        5474
      ]
    },
    {
      "content": "When the template execution is complete, you have a new five-server SQL Server AlwaysOn configuration in your new resource group.",
      "pos": [
        5476,
        5605
      ]
    },
    {
      "content": "Additional resources",
      "pos": [
        5611,
        5631
      ]
    },
    {
      "content": "Deploy and manage virtual machines using Azure Resource Manager templates and Azure PowerShell",
      "pos": [
        5634,
        5728
      ]
    },
    {
      "content": "Azure Compute, Network and Storage providers under Azure Resource Manager",
      "pos": [
        5783,
        5856
      ]
    },
    {
      "content": "Azure Resource Manager overview",
      "pos": [
        5904,
        5935
      ]
    },
    {
      "content": "Deploy and manage Virtual Machines using Azure Resource Manager templates and the Azure CLI",
      "pos": [
        5970,
        6061
      ]
    },
    {
      "content": "Virtual machines documentation",
      "pos": [
        6115,
        6145
      ]
    },
    {
      "content": "How to install and configure Azure PowerShell",
      "pos": [
        6218,
        6263
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Deploy SQL Server AlwaysOn with an Azure Resource Manager template | Microsoft Azure\"\n    description=\"Easily deploy five servers that support SQL Server AlwaysOn with a Resource Manager template and the Azure preview portal, Azure PowerShell, or the Azure CLI.\"\n    services=\"virtual-machines\"\n    documentationCenter=\"\"\n    authors=\"davidmu1\"\n    manager=\"timlt\"\n    editor=\"\"\n    tags=\"azure-resource-manager\"/>\n\n<tags\n    ms.service=\"virtual-machines\"\n    ms.workload=\"infrastructure-services\"\n    ms.tgt_pltfrm=\"vm-windows-sql-server\"\n    ms.devlang=\"na\"\n    ms.topic=\"hero-article\"\n    ms.date=\"06/29/2015\"\n    ms.author=\"davidmu\"/>\n\n# Deploy SQL Server AlwaysOn with an Azure Resource Manager template\n\nUse the instructions in this article to deploy SQL Server AlwaysOn using an Azure Resource Manager template. This template creates five virtual machines in a new virtual network on two different subnets.\n\n![](./media/virtual-machines-workload-template-sql-alwayson/five-server-sqlao.png)\n\nYou can run the template with the Azure preview portal, Azure PowerShell, or the Azure CLI.\n\n## Azure preview portal\n\nTo deploy this workload using an Azure Resource Manager template and the Azure preview portal, click [here](https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsql-server-2014-alwayson-dsc%2Fazuredeploy.json).\n\n![](./media/virtual-machines-workload-template-sql-alwayson/azure-portal-template.png)\n\n1.  For the **Template** pane, click **Save**.\n2.  Click **Parameters**. On the **Parameters** pane, enter new values, select from allowed values, or accept default values, and then click **OK**.\n3.  If needed, click **Subscription** and select the correct Azure subscription.\n4.  Click **Resource group** and select an existing resource group. Alternately, click **Or create new** to create a new one for this workload.\n5.  If needed, click **Resource group location** and select the correct Azure location.\n6.  If needed, click **Legal terms** to review the terms and agreement for using the template.\n7.  Click **Create**.\n\nDepending on the template, it can take some time for Azure to build the workload. When the template execution is complete, you have a new five-server SQL Server AlwaysOn configuration in your existing or new resource group.\n\n## Azure PowerShell\n\nBefore you begin, make sure you have the right version of Azure PowerShell installed, you have logged in, and you have switched to the new Resource Manager mode. For the details, click [here](virtual-machines-deploy-rmtemplates-powershell.md#setting-up-powershell-for-resource-manager-templates).\n\nFill in an Azure deployment name, a new Resource Group name, and an Azure datacenter location in the following set of commands. Remove everything within the quotes, including the < and > characters.\n\n    $deployName=\"<deployment name>\"\n    $RGName=\"<resource group name>\"\n    $locName=\"<Azure location, such as West US>\"\n    $templateURI=\"https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sql-server-2014-alwayson-dsc/azuredeploy.json\"\n    New-AzureResourceGroup -Name $RGName -Location $locName\n    New-AzureResourceGroupDeployment -Name $deployName -ResourceGroupName $RGName -TemplateUri $templateURI\n\nHere is an example.\n\n    $deployName=\"TestDeployment\"\n    $RGName=\"TestRG\"\n    $locname=\"West US\"\n    $templateURI=\"https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sql-server-2014-alwayson-dsc/azuredeploy.json\"\n    New-AzureResourceGroup -Name $RGName -Location $locName\n    New-AzureResourceGroupDeployment -Name $deployName -ResourceGroupName $RGName -TemplateUri $templateURI\n\nNext, run your command block in the Azure PowerShell prompt.\n\nWhen you run the **New-AzureResourceGroupDeployment** command, you will be prompted to supply the values for a series of parameters. When you have specified all the parameter values, **New-AzureResourceGroupDeployment** creates and configures the virtual machines.\n\nWhen the template execution is complete, you have a new five-server SQL Server AlwaysOn configuration in your new resource group.\n\n## Azure CLI\n\nBefore you begin, make sure you have the right version of Azure CLI installed, you have logged in, and you have switched to the new Resource Manager mode. For the details, click [here](virtual-machines-deploy-rmtemplates-azure-cli.md#getting-ready).\n\nFirst, you create a new resource group. Use the following command and specify the name of the group and the Azure data center location into which you want to deploy.\n\n    azure group create <group name> <location>\n\nNext, use the following command and specify the name of your new resource group and the name of an Azure deployment.\n\n    azure group deployment create --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sql-server-2014-alwayson-dsc/azuredeploy.json <group name> <deployment name>\n\nHere is an example.\n\n    azure group create sqlao eastus2\n    azure group deployment create --template-uri https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sql-server-2014-alwayson-dsc/azuredeploy.json sqlao sqldevtest\n\nWhen you run the **azure group deployment create** command, you will be prompted to supply the values for a series of parameters. When you have specified all the parameter values, Azure creates and configures the virtual machines.\n\nWhen the template execution is complete, you have a new five-server SQL Server AlwaysOn configuration in your new resource group.\n\n\n## Additional resources\n\n[Deploy and manage virtual machines using Azure Resource Manager templates and Azure PowerShell](virtual-machines-deploy-rmtemplates-powershell.md)\n\n[Azure Compute, Network and Storage providers under Azure Resource Manager](virtual-machines-azurerm-versus-azuresm.md)\n\n[Azure Resource Manager overview](../resource-group-overview.md)\n\n[Deploy and manage Virtual Machines using Azure Resource Manager templates and the Azure CLI](virtual-machines-deploy-rmtemplates-azure-cli.md)\n\n[Virtual machines documentation](http://azure.microsoft.com/documentation/services/virtual-machines/)\n\n[How to install and configure Azure PowerShell](../install-configure-powershell.md)\n"
}