{
  "nodes": [
    {
      "content": "Configure MPIO for your StorSimple device | Microsoft Azure",
      "pos": [
        27,
        86
      ]
    },
    {
      "content": "Describes how to configure Multipath I/O (MPIO) for your StorSimple device connected to a host running Windows Server 2012 R2.",
      "pos": [
        104,
        230
      ]
    },
    {
      "content": "Configure Multipath I/O for your StorSimple device",
      "pos": [
        510,
        560
      ]
    },
    {
      "content": "Microsoft built support for the Multipath I/O (MPIO) feature in Windows Server to help build highly available, fault-tolerant SAN configurations.",
      "pos": [
        562,
        707
      ]
    },
    {
      "content": "MPIO uses redundant physical path components — adapters, cables, and switches — to create logical paths between the server and the storage device.",
      "pos": [
        708,
        854
      ]
    },
    {
      "content": "If there is a component failure, causing a logical path to fail, multipathing logic uses an alternate path for I/O so that applications can still access their data.",
      "pos": [
        855,
        1019
      ]
    },
    {
      "content": "Additionally depending on your configuration, MPIO can also improve performance by re-balancing the load across all these paths.",
      "pos": [
        1020,
        1148
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>MPIO overview<ept id=\"p1\">]</ept><bpt id=\"p2\">(https://technet.microsoft.com/library/cc725907.aspx \"</bpt>MPIO overview and features<ept id=\"p2\">\")</ept>.",
      "pos": [
        1149,
        1273
      ]
    },
    {
      "content": "For the high-availability of your StorSimple solution, MPIO should be configured on your StorSimple device.",
      "pos": [
        1277,
        1384
      ]
    },
    {
      "content": "When MPIO is installed on your host servers running Windows Server 2012 R2, the servers can then tolerate a link, network, or interface failure.",
      "pos": [
        1385,
        1529
      ]
    },
    {
      "content": "MPIO is an optional feature on Windows Server and is not installed by default.",
      "pos": [
        1532,
        1610
      ]
    },
    {
      "content": "It should be installed as a feature through Server Manager.",
      "pos": [
        1611,
        1670
      ]
    },
    {
      "content": "This topic describes the steps you should follow to install and use the MPIO feature on a host running Windows Server 2012 R2 and connected to a StorSimple physical device.",
      "pos": [
        1671,
        1843
      ]
    },
    {
      "content": "MPIO is not supported on a StorSimple virtual device.",
      "pos": [
        1861,
        1914
      ]
    },
    {
      "content": "**",
      "pos": [
        1914,
        1916
      ]
    },
    {
      "content": "You will need to follow these steps to configure MPIO on your StorSimple device:",
      "pos": [
        1918,
        1998
      ]
    },
    {
      "content": "Step 1: Install MPIO on the Windows Server host",
      "pos": [
        2002,
        2049
      ]
    },
    {
      "content": "Step 2: Configure MPIO for StorSimple volumes",
      "pos": [
        2053,
        2098
      ]
    },
    {
      "content": "Step 3: Mount StorSimple volumes on the host",
      "pos": [
        2102,
        2146
      ]
    },
    {
      "content": "Step 4: Configure MPIO for high availability and load balancing",
      "pos": [
        2150,
        2213
      ]
    },
    {
      "content": "Each of the above steps is discussed in the following sections.",
      "pos": [
        2215,
        2278
      ]
    },
    {
      "content": "Step 1: Install MPIO on the Windows Server host",
      "pos": [
        2283,
        2330
      ]
    },
    {
      "content": "To install this feature on your Windows Server host, complete the following procedure.",
      "pos": [
        2332,
        2418
      ]
    },
    {
      "content": "To install MPIO on the host",
      "pos": [
        2425,
        2452
      ]
    },
    {
      "content": "Open Server Manager on your Windows Server host.",
      "pos": [
        2457,
        2505
      ]
    },
    {
      "content": "By default, Server Manager starts when a member of the Administrators group logs on to a computer that is running Windows Server 2012 R2 or Windows Server 2012.",
      "pos": [
        2506,
        2666
      ]
    },
    {
      "content": "If Server Manager is not already open, click <bpt id=\"p1\">**</bpt>Start &gt; Server Manager<ept id=\"p1\">**</ept>.",
      "pos": [
        2667,
        2739
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>Server Manager<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC740997.png)</ph>",
      "pos": [
        2740,
        2820
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Server Manager &gt; Dashboard &gt; Add roles and features<ept id=\"p1\">**</ept>.",
      "pos": [
        2824,
        2886
      ]
    },
    {
      "content": "This starts the <bpt id=\"p1\">**</bpt>Add Roles and Features<ept id=\"p1\">**</ept> wizard.",
      "pos": [
        2887,
        2937
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>Add Roles And Features Wizard 1<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC740998.png)</ph>",
      "pos": [
        2938,
        3035
      ]
    },
    {
      "pos": [
        3039,
        3098
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Add Roles and Features<ept id=\"p1\">**</ept> wizard, do the following:"
    },
    {
      "pos": [
        3106,
        3155
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Before you begin<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Select installation type<ept id=\"p1\">**</ept> page, accept the default setting of <bpt id=\"p2\">**</bpt>Role-based or feature-based<ept id=\"p2\">**</ept> installation.",
      "pos": [
        3162,
        3279
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.<ph id=\"ph1\">![</ph>Add Roles And Features Wizard 2<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC740999.png)</ph>",
      "pos": [
        3280,
        3392
      ]
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Select destination server<ept id=\"p1\">**</ept> page, choose <bpt id=\"p2\">**</bpt>Select a server from the server pool<ept id=\"p2\">**</ept>.",
      "pos": [
        3399,
        3490
      ]
    },
    {
      "content": "Your host server should be discovered automatically.",
      "pos": [
        3491,
        3543
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.",
      "pos": [
        3544,
        3559
      ]
    },
    {
      "pos": [
        3566,
        3618
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Select server roles<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        3625,
        3800
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Select features<ept id=\"p1\">**</ept> page, select <bpt id=\"p2\">**</bpt>Multipath I/O<ept id=\"p2\">**</ept>, and click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>.<ph id=\"ph1\">![</ph>Add Roles And Features Wizard 5<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741000.png)</ph>"
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Confirm installation selections<ept id=\"p1\">**</ept> page, confirm the selection and then select <bpt id=\"p2\">**</bpt>Restart the destination server automatically if required<ept id=\"p2\">**</ept>, as shown below.",
      "pos": [
        3807,
        3971
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Install<ept id=\"p1\">**</ept>.<ph id=\"ph1\">![</ph>Add Roles And Features Wizard 8<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741001.png)</ph>",
      "pos": [
        3972,
        4087
      ]
    },
    {
      "content": "You will be notified when the installation is complete.",
      "pos": [
        4094,
        4149
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Close<ept id=\"p1\">**</ept> to close the wizard.<ph id=\"ph1\">![</ph>Add Roles And Features Wizard 9<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741002.png)</ph>",
      "pos": [
        4150,
        4283
      ]
    },
    {
      "content": "Step 2: Configure MPIO for StorSimple volumes",
      "pos": [
        4288,
        4333
      ]
    },
    {
      "content": "MPIO needs to be configured to identify StorSimple volumes.",
      "pos": [
        4335,
        4394
      ]
    },
    {
      "content": "To configure MPIO to recognize StorSimple volumes, perform the following steps.",
      "pos": [
        4395,
        4474
      ]
    },
    {
      "content": "To configure MPIO for StorSimple volumes",
      "pos": [
        4481,
        4521
      ]
    },
    {
      "content": "Open the <bpt id=\"p1\">**</bpt>MPIO configuration<ept id=\"p1\">**</ept>.",
      "pos": [
        4526,
        4558
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Server Manager &gt; Dashboard &gt; Tools &gt; MPIO<ept id=\"p1\">**</ept>.",
      "pos": [
        4559,
        4611
      ]
    },
    {
      "pos": [
        4616,
        4695
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>MPIO Properties<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Discover Multi-Paths<ept id=\"p2\">**</ept> tab."
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Add support for iSCSI devices<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>.",
      "pos": [
        4700,
        4765
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>MPIO Properties Discover Multi Paths<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741003.png)</ph>",
      "pos": [
        4768,
        4870
      ]
    },
    {
      "content": "Reboot the server when prompted.",
      "pos": [
        4875,
        4907
      ]
    },
    {
      "pos": [
        4911,
        5100
      ],
      "content": "In the **MPIO Properties** dialog box, click the **MPIO Devices** tab. Click **Add**.\n </br>![MPIO Properties MPIO Devices](./media/storsimple-configure-mpio-windows-server/IC741004.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the **MPIO Properties** dialog box, click the **MPIO Devices** tab. Click **Add**.",
          "pos": [
            0,
            85
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>MPIO Properties<ept id=\"p1\">**</ept> dialog box, click the <bpt id=\"p2\">**</bpt>MPIO Devices<ept id=\"p2\">**</ept> tab.",
              "pos": [
                0,
                70
              ]
            },
            {
              "content": "Click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.",
              "pos": [
                71,
                85
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>MPIO Properties MPIO Devices<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741004.png)</ph>",
          "pos": [
            92,
            186
          ]
        }
      ]
    },
    {
      "pos": [
        5104,
        5520
      ],
      "content": "In the **Add MPIO Support** dialog box, under **Device Hardware ID**, enter your device serial number.You can get the device serial number by accessing your StorSimple Manager service and navigating to **Devices > Dashboard**. The device serial number is displayed in the right **Quick Glance** pane of the device dashboard.\n </br>![Add MPIO Support](./media/storsimple-configure-mpio-windows-server/IC741005.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the **Add MPIO Support** dialog box, under **Device Hardware ID**, enter your device serial number.You can get the device serial number by accessing your StorSimple Manager service and navigating to **Devices > Dashboard**. The device serial number is displayed in the right **Quick Glance** pane of the device dashboard.",
          "pos": [
            0,
            324
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>Add MPIO Support<ept id=\"p1\">**</ept> dialog box, under <bpt id=\"p2\">**</bpt>Device Hardware ID<ept id=\"p2\">**</ept>, enter your device serial number.You can get the device serial number by accessing your StorSimple Manager service and navigating to <bpt id=\"p3\">**</bpt>Devices &gt; Dashboard<ept id=\"p3\">**</ept>.",
              "pos": [
                0,
                226
              ]
            },
            {
              "content": "The device serial number is displayed in the right <bpt id=\"p1\">**</bpt>Quick Glance<ept id=\"p1\">**</ept> pane of the device dashboard.",
              "pos": [
                227,
                324
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>Add MPIO Support<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741005.png)</ph>",
          "pos": [
            331,
            413
          ]
        }
      ]
    },
    {
      "content": "Reboot the server when prompted.",
      "pos": [
        5524,
        5556
      ]
    },
    {
      "content": "Step 3: Mount StorSimple volumes on the host",
      "pos": [
        5561,
        5605
      ]
    },
    {
      "content": "After MPIO is configured on Windows Server, volume(s) created on the StorSimple device can be mounted and can then take advantage of MPIO for redundancy.",
      "pos": [
        5607,
        5760
      ]
    },
    {
      "content": "To mount a volume, perform the following steps.",
      "pos": [
        5761,
        5808
      ]
    },
    {
      "content": "To mount volumes on the host",
      "pos": [
        5815,
        5843
      ]
    },
    {
      "content": "Open the <bpt id=\"p1\">**</bpt>iSCSI Initiator Properties<ept id=\"p1\">**</ept> window on the Windows Server host.",
      "pos": [
        5848,
        5922
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Server Manager &gt; Dashboard &gt; Tools &gt; iSCSI Initiator<ept id=\"p1\">**</ept>.",
      "pos": [
        5923,
        5986
      ]
    },
    {
      "pos": [
        5990,
        6107
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>iSCSI Initiator Properties<ept id=\"p1\">**</ept> dialog box, click the Discovery tab, and then click <bpt id=\"p2\">**</bpt>Discover Target Portal<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        6111,
        6174
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Discover Target Portal<ept id=\"p1\">**</ept> dialog box, do the following:"
    },
    {
      "content": "Enter the IP address of the DATA port of your StorSimple device (for example, enter DATA 0).",
      "pos": [
        6186,
        6278
      ]
    },
    {
      "pos": [
        6285,
        6357
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to return to the <bpt id=\"p2\">**</bpt>iSCSI Initiator Properties<ept id=\"p2\">**</ept> dialog box."
    },
    {
      "content": "If you are using a private network for iSCSI connections, enter the IP address of the DATA port that is connected to the private network.",
      "pos": [
        6384,
        6521
      ]
    },
    {
      "content": "**",
      "pos": [
        6521,
        6523
      ]
    },
    {
      "content": "Repeat steps 2-3 for a second network interface (for example, DATA 1) on your device.",
      "pos": [
        6528,
        6613
      ]
    },
    {
      "content": "Keep in mind that these interfaces should be enabled for iSCSI.",
      "pos": [
        6614,
        6677
      ]
    },
    {
      "content": "To learn more about this, see <bpt id=\"p1\">[</bpt>Modify network interfaces<ept id=\"p1\">](storsimple-modify-device-config.md#modify-network-interfaces)</ept>.",
      "pos": [
        6678,
        6798
      ]
    },
    {
      "pos": [
        6802,
        7062
      ],
      "content": "Select the **Targets** tab in the **iSCSI Initiator Properties** dialog box. You should see the StorSimple device target IQN under **Discovered Targets**.\n![iSCSI Initiator Properties Targets Tab](./media/storsimple-configure-mpio-windows-server/IC741007.png)",
      "leadings": [
        "",
        " "
      ],
      "nodes": [
        {
          "content": "Select the **Targets** tab in the **iSCSI Initiator Properties** dialog box. You should see the StorSimple device target IQN under **Discovered Targets**.",
          "pos": [
            0,
            154
          ],
          "nodes": [
            {
              "content": "Select the <bpt id=\"p1\">**</bpt>Targets<ept id=\"p1\">**</ept> tab in the <bpt id=\"p2\">**</bpt>iSCSI Initiator Properties<ept id=\"p2\">**</ept> dialog box.",
              "pos": [
                0,
                76
              ]
            },
            {
              "content": "You should see the StorSimple device target IQN under <bpt id=\"p1\">**</bpt>Discovered Targets<ept id=\"p1\">**</ept>.",
              "pos": [
                77,
                154
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>iSCSI Initiator Properties Targets Tab<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741007.png)</ph>",
          "pos": [
            155,
            259
          ]
        }
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept> to establish an iSCSI session with your StorSimple device.",
      "pos": [
        7066,
        7142
      ]
    },
    {
      "content": "A <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box will appear.",
      "pos": [
        7143,
        7190
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Enable multi-path<ept id=\"p2\">**</ept> check box.",
      "pos": [
        7195,
        7279
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Advanced<ept id=\"p1\">**</ept>.",
      "pos": [
        7280,
        7299
      ]
    },
    {
      "pos": [
        7304,
        7362
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Advanced Settings<ept id=\"p1\">**</ept> dialog box, do the following:"
    },
    {
      "pos": [
        7411,
        7489
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Local Adapter<ept id=\"p1\">**</ept> drop-down list, select <bpt id=\"p2\">**</bpt>Microsoft iSCSI Initiator<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        7499,
        7573
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Initiator IP<ept id=\"p1\">**</ept> drop-down list, select the IP address of the host."
    },
    {
      "pos": [
        7583,
        7661
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Target Portal<ept id=\"p1\">**</ept> IP drop-down list, select the IP of device interface."
    },
    {
      "pos": [
        7671,
        7743
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to return to the <bpt id=\"p2\">**</bpt>iSCSI Initiator Properties<ept id=\"p2\">**</ept> dialog box."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>.",
      "pos": [
        7748,
        7769
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>Add Session<ept id=\"p2\">**</ept>.",
      "pos": [
        7770,
        7826
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Enable multi-path<ept id=\"p2\">**</ept> check box.",
      "pos": [
        7831,
        7915
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Advanced<ept id=\"p1\">**</ept>.",
      "pos": [
        7916,
        7935
      ]
    },
    {
      "pos": [
        7940,
        7980
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Advanced Settings<ept id=\"p1\">**</ept> dialog box:"
    },
    {
      "pos": [
        8028,
        8102
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Local adapter<ept id=\"p1\">**</ept> drop-down list, select Microsoft iSCSI Initiator."
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Initiator IP<ept id=\"p1\">**</ept> drop-down list, select the IP address corresponding to the host.",
      "pos": [
        8110,
        8198
      ]
    },
    {
      "content": "In this case, you are connecting two network interfaces on the device to a single network interface on the host.",
      "pos": [
        8199,
        8311
      ]
    },
    {
      "content": "Therefore, this interface is the same as that provided for the first session.",
      "pos": [
        8312,
        8389
      ]
    },
    {
      "pos": [
        8397,
        8515
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Target Portal IP<ept id=\"p1\">**</ept> drop-down list, select the IP address for the second data interface enabled on the device."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to return to the iSCSI Initiator Properties dialog box.",
      "pos": [
        8523,
        8591
      ]
    },
    {
      "content": "You have added a second session to the target.",
      "pos": [
        8592,
        8638
      ]
    },
    {
      "content": "Open <bpt id=\"p1\">**</bpt>Computer Management<ept id=\"p1\">**</ept> by navigating to <bpt id=\"p2\">**</bpt>Server Manager &gt; Dashboard &gt; Computer Management<ept id=\"p2\">**</ept>.",
      "pos": [
        8644,
        8743
      ]
    },
    {
      "content": "In the left pane, click <bpt id=\"p1\">**</bpt>Storage &gt; Disk Management<ept id=\"p1\">**</ept>.",
      "pos": [
        8744,
        8798
      ]
    },
    {
      "content": "The volume(s) created on the StorSimple device that are visible to this host will appear under <bpt id=\"p1\">**</bpt>Disk Management<ept id=\"p1\">**</ept> as new disk(s).",
      "pos": [
        8799,
        8929
      ]
    },
    {
      "content": "Initialize the disk and create a new volume.",
      "pos": [
        8935,
        8979
      ]
    },
    {
      "content": "During the format process, select a block size of 64 KB.",
      "pos": [
        8980,
        9036
      ]
    },
    {
      "content": "Disk Management",
      "pos": [
        9039,
        9054
      ]
    },
    {
      "pos": [
        9123,
        9201
      ],
      "content": "Under <bpt id=\"p1\">**</bpt>Disk Management<ept id=\"p1\">**</ept>, right-click the <bpt id=\"p2\">**</bpt>Disk<ept id=\"p2\">**</ept> and select <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept>."
    },
    {
      "content": "In the StorSimple Model #### <bpt id=\"p1\">**</bpt>Multi-Path Disk Device Properties<ept id=\"p1\">**</ept> dialog box, click the <bpt id=\"p2\">**</bpt>MPIO tab<ept id=\"p2\">**</ept>.",
      "pos": [
        9206,
        9308
      ]
    },
    {
      "content": "<ph id=\"ph1\">![</ph>StorSimple 8100 Multi-Path Disk DeviceProp.<ph id=\"ph2\">](./media/storsimple-configure-mpio-windows-server/IC741009.png)</ph>",
      "pos": [
        9309,
        9418
      ]
    },
    {
      "pos": [
        9424,
        9563
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>DSM Name<ept id=\"p1\">**</ept> section, click <bpt id=\"p2\">**</bpt>Details<ept id=\"p2\">**</ept> and verify that the parameters are set to the default parameters.The default parameters are:"
    },
    {
      "content": "Path Verify Period = 30",
      "pos": [
        9571,
        9594
      ]
    },
    {
      "content": "Retry Count = 3",
      "pos": [
        9601,
        9616
      ]
    },
    {
      "content": "PDO Remove Period = 20",
      "pos": [
        9623,
        9645
      ]
    },
    {
      "content": "Retry Interval = 1",
      "pos": [
        9652,
        9670
      ]
    },
    {
      "content": "Path Verify Enabled = Unchecked.",
      "pos": [
        9677,
        9709
      ]
    },
    {
      "content": "Please do not modify the default parameters.",
      "pos": [
        9728,
        9772
      ]
    },
    {
      "content": "**",
      "pos": [
        9772,
        9774
      ]
    },
    {
      "content": "Step 4: Configure MPIO for high availability and load balancing",
      "pos": [
        9779,
        9842
      ]
    },
    {
      "content": "For multi-path based high availability and load balancing, multiple sessions must be manually added to declare the different paths available.",
      "pos": [
        9844,
        9985
      ]
    },
    {
      "content": "For example, if the host has two interfaces connected to SAN and the device has two interfaces connected to SAN, then you need four sessions configured with proper path permutations (only two sessions will be required if each DATA interface and host interface is on a different IP subnet and is not routable).",
      "pos": [
        9986,
        10295
      ]
    },
    {
      "content": "We recommend that you do not mix 1 GbE and 10 GbE network interfaces.",
      "pos": [
        10318,
        10387
      ]
    },
    {
      "content": "If you use two network interfaces, both interfaces should be the identical type.",
      "pos": [
        10388,
        10468
      ]
    },
    {
      "content": "**",
      "pos": [
        10468,
        10470
      ]
    },
    {
      "content": "The following procedure describes how to add sessions when a StorSimple device with two network interfaces is connected to a host with two network interfaces.",
      "pos": [
        10472,
        10630
      ]
    },
    {
      "content": "To configure MPIO for high availability and load balancing",
      "pos": [
        10636,
        10694
      ]
    },
    {
      "pos": [
        10699,
        10836
      ],
      "content": "Perform a discovery of the target: in the <bpt id=\"p1\">**</bpt>iSCSI Initiator Properties<ept id=\"p1\">**</ept> dialog box, on the <bpt id=\"p2\">**</bpt>Discovery<ept id=\"p2\">**</ept> tab, click <bpt id=\"p3\">**</bpt>Discover Portal<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        10840,
        10942
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box, enter the IP address of one of the device network interfaces."
    },
    {
      "pos": [
        10946,
        11018
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to return to the <bpt id=\"p2\">**</bpt>iSCSI Initiator Properties<ept id=\"p2\">**</ept> dialog box."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>iSCSI Initiator Properties<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Targets<ept id=\"p2\">**</ept> tab, highlight the discovered target, and then click <bpt id=\"p3\">**</bpt>Connect<ept id=\"p3\">**</ept>.",
      "pos": [
        11023,
        11161
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box appears.",
      "pos": [
        11162,
        11207
      ]
    },
    {
      "pos": [
        11212,
        11252
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box:"
    },
    {
      "content": "Leave the default selected target setting for <bpt id=\"p1\">**</bpt>Add this connection<ept id=\"p1\">**</ept> to the list of favorite targets.",
      "pos": [
        11264,
        11366
      ]
    },
    {
      "content": "This will make the device automatically attempt to restart the connection every time this computer restarts.",
      "pos": [
        11367,
        11475
      ]
    },
    {
      "pos": [
        11482,
        11525
      ],
      "content": "Select the <bpt id=\"p1\">**</bpt>Enable multi-path<ept id=\"p1\">**</ept> check box."
    },
    {
      "pos": [
        11532,
        11551
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Advanced<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        11556,
        11596
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Advanced Settings<ept id=\"p1\">**</ept> dialog box:"
    },
    {
      "pos": [
        11603,
        11681
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Local Adapter<ept id=\"p1\">**</ept> drop-down list, select <bpt id=\"p2\">**</bpt>Microsoft iSCSI Initiator<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        11688,
        11762
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Initiator IP<ept id=\"p1\">**</ept> drop-down list, select the IP address of the host."
    },
    {
      "pos": [
        11769,
        11879
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Target Portal IP<ept id=\"p1\">**</ept> drop-down list, select the IP address of the data interface enabled on the device."
    },
    {
      "pos": [
        11886,
        11954
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to return to the iSCSI Initiator Properties dialog box."
    },
    {
      "pos": [
        11959,
        12041
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>, and in the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> dialog box, click <bpt id=\"p3\">**</bpt>Add Session<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        12046,
        12159
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Connect to Target<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Enable multi-path<ept id=\"p2\">**</ept> check box, and then click <bpt id=\"p3\">**</bpt>Advanced<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        12164,
        12204
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Advanced Settings<ept id=\"p1\">**</ept> dialog box:"
    },
    {
      "pos": [
        12212,
        12290
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Local adapter<ept id=\"p1\">**</ept> drop-down list, select <bpt id=\"p2\">**</bpt>Microsoft iSCSI Initiator<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        12298,
        12410
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Initiator IP<ept id=\"p1\">**</ept> drop-down list, select the IP address corresponding to the second interface on the host."
    },
    {
      "pos": [
        12418,
        12536
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Target Portal IP<ept id=\"p1\">**</ept> drop-down list, select the IP address for the second data interface enabled on the device."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to return to the <bpt id=\"p2\">**</bpt>iSCSI Initiator Properties<ept id=\"p2\">**</ept> dialog box.",
      "pos": [
        12544,
        12616
      ]
    },
    {
      "content": "You have now added a second session to the target.",
      "pos": [
        12617,
        12667
      ]
    },
    {
      "content": "Repeat Steps 8-10 to add additional sessions (paths) to the target.",
      "pos": [
        12673,
        12740
      ]
    },
    {
      "content": "With two interfaces on the host and two on the device, you can add a total of four sessions.",
      "pos": [
        12741,
        12833
      ]
    },
    {
      "content": "After adding the desired sessions (paths), in the <bpt id=\"p1\">**</bpt>iSCSI Initiator Properties<ept id=\"p1\">**</ept> dialog box, select the target and click <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.",
      "pos": [
        12839,
        12975
      ]
    },
    {
      "content": "On the Sessions tab of the <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> dialog box, note the four session identifiers that correspond to the possible path permutations.",
      "pos": [
        12976,
        13114
      ]
    },
    {
      "content": "To cancel a session, select the check box next to a session identifier, and then click <bpt id=\"p1\">**</bpt>Disconnect<ept id=\"p1\">**</ept>.",
      "pos": [
        13115,
        13217
      ]
    },
    {
      "content": "To view devices presented within sessions, select the <bpt id=\"p1\">**</bpt>Devices<ept id=\"p1\">**</ept> tab.",
      "pos": [
        13223,
        13293
      ]
    },
    {
      "content": "To configure the MPIO policy for a selected device, click <bpt id=\"p1\">**</bpt>MPIO<ept id=\"p1\">**</ept>.",
      "pos": [
        13294,
        13361
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Device Details<ept id=\"p1\">**</ept> dialog box will appear.",
      "pos": [
        13362,
        13408
      ]
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>MPIO<ept id=\"p1\">**</ept> tab, you can select the appropriate <bpt id=\"p2\">**</bpt>Load Balance Policy<ept id=\"p2\">**</ept> settings.",
      "pos": [
        13409,
        13494
      ]
    },
    {
      "content": "You can also view the <bpt id=\"p1\">**</bpt>Active<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Standby<ept id=\"p2\">**</ept> path type.",
      "pos": [
        13495,
        13553
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        13558,
        13568
      ]
    },
    {
      "pos": [
        13570,
        13709
      ],
      "content": "Learn more about <bpt id=\"p1\">[</bpt>using the StorSimple Manager service to modify your StorSimple device configuration<ept id=\"p1\">](storsimple-modify-device-config.md)</ept>."
    }
  ],
  "content": "<properties \n   pageTitle=\"Configure MPIO for your StorSimple device | Microsoft Azure\"\n   description=\"Describes how to configure Multipath I/O (MPIO) for your StorSimple device connected to a host running Windows Server 2012 R2.\"\n   services=\"storsimple\"\n   documentationCenter=\"\"\n   authors=\"alkohli\"\n   manager=\"carolz\"\n   editor=\"\" />\n<tags \n   ms.service=\"storsimple\"\n   ms.devlang=\"NA\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"NA\"\n   ms.workload=\"NA\"\n   ms.date=\"08/31/2015\"\n   ms.author=\"alkohli\" />\n\n# Configure Multipath I/O for your StorSimple device\n\nMicrosoft built support for the Multipath I/O (MPIO) feature in Windows Server to help build highly available, fault-tolerant SAN configurations. MPIO uses redundant physical path components — adapters, cables, and switches — to create logical paths between the server and the storage device. If there is a component failure, causing a logical path to fail, multipathing logic uses an alternate path for I/O so that applications can still access their data. Additionally depending on your configuration, MPIO can also improve performance by re-balancing the load across all these paths. For more information, see [MPIO overview](https://technet.microsoft.com/library/cc725907.aspx \"MPIO overview and features\").  \n\nFor the high-availability of your StorSimple solution, MPIO should be configured on your StorSimple device. When MPIO is installed on your host servers running Windows Server 2012 R2, the servers can then tolerate a link, network, or interface failure. \n\nMPIO is an optional feature on Windows Server and is not installed by default. It should be installed as a feature through Server Manager. This topic describes the steps you should follow to install and use the MPIO feature on a host running Windows Server 2012 R2 and connected to a StorSimple physical device.\n\n>[AZURE.NOTE] **MPIO is not supported on a StorSimple virtual device.**\n\nYou will need to follow these steps to configure MPIO on your StorSimple device:\n\n- Step 1: Install MPIO on the Windows Server host\n\n- Step 2: Configure MPIO for StorSimple volumes\n\n- Step 3: Mount StorSimple volumes on the host\n\n- Step 4: Configure MPIO for high availability and load balancing\n\nEach of the above steps is discussed in the following sections.\n\n## Step 1: Install MPIO on the Windows Server host\n\nTo install this feature on your Windows Server host, complete the following procedure.\n\n#### To install MPIO on the host\n\n1. Open Server Manager on your Windows Server host. By default, Server Manager starts when a member of the Administrators group logs on to a computer that is running Windows Server 2012 R2 or Windows Server 2012. If Server Manager is not already open, click **Start > Server Manager**.\n![Server Manager](./media/storsimple-configure-mpio-windows-server/IC740997.png)\n2. Click **Server Manager > Dashboard > Add roles and features**. This starts the **Add Roles and Features** wizard.\n![Add Roles And Features Wizard 1](./media/storsimple-configure-mpio-windows-server/IC740998.png)\n3. In the **Add Roles and Features** wizard, do the following:\n\n    - On the **Before you begin** page, click **Next**.\n    - On the **Select installation type** page, accept the default setting of **Role-based or feature-based** installation. Click **Next**.![Add Roles And Features Wizard 2](./media/storsimple-configure-mpio-windows-server/IC740999.png)\n    - On the **Select destination server** page, choose **Select a server from the server pool**. Your host server should be discovered automatically. Click **Next**.\n    - On the **Select server roles** page, click **Next**.\n    - On the **Select features** page, select **Multipath I/O**, and click **Next**.![Add Roles And Features Wizard 5](./media/storsimple-configure-mpio-windows-server/IC741000.png)\n    - On the **Confirm installation selections** page, confirm the selection and then select **Restart the destination server automatically if required**, as shown below. Click **Install**.![Add Roles And Features Wizard 8](./media/storsimple-configure-mpio-windows-server/IC741001.png)\n    - You will be notified when the installation is complete. Click **Close** to close the wizard.![Add Roles And Features Wizard 9](./media/storsimple-configure-mpio-windows-server/IC741002.png)\n\n## Step 2: Configure MPIO for StorSimple volumes\n\nMPIO needs to be configured to identify StorSimple volumes. To configure MPIO to recognize StorSimple volumes, perform the following steps.\n\n#### To configure MPIO for StorSimple volumes\n\n1. Open the **MPIO configuration**. Click **Server Manager > Dashboard > Tools > MPIO**.\n\n2. In the **MPIO Properties** dialog box, select the **Discover Multi-Paths** tab.\n\n3. Select **Add support for iSCSI devices**, and then click **Add**.  \n![MPIO Properties Discover Multi Paths](./media/storsimple-configure-mpio-windows-server/IC741003.png)\n\n4. Reboot the server when prompted.\n5. In the **MPIO Properties** dialog box, click the **MPIO Devices** tab. Click **Add**.\n    </br>![MPIO Properties MPIO Devices](./media/storsimple-configure-mpio-windows-server/IC741004.png)\n6. In the **Add MPIO Support** dialog box, under **Device Hardware ID**, enter your device serial number.You can get the device serial number by accessing your StorSimple Manager service and navigating to **Devices > Dashboard**. The device serial number is displayed in the right **Quick Glance** pane of the device dashboard.\n    </br>![Add MPIO Support](./media/storsimple-configure-mpio-windows-server/IC741005.png)\n7. Reboot the server when prompted.\n\n## Step 3: Mount StorSimple volumes on the host\n\nAfter MPIO is configured on Windows Server, volume(s) created on the StorSimple device can be mounted and can then take advantage of MPIO for redundancy. To mount a volume, perform the following steps.\n\n#### To mount volumes on the host\n\n1. Open the **iSCSI Initiator Properties** window on the Windows Server host. Click **Server Manager > Dashboard > Tools > iSCSI Initiator**.\n2. In the **iSCSI Initiator Properties** dialog box, click the Discovery tab, and then click **Discover Target Portal**.\n3. In the **Discover Target Portal** dialog box, do the following:\n    \n    - Enter the IP address of the DATA port of your StorSimple device (for example, enter DATA 0).\n    - Click **OK** to return to the **iSCSI Initiator Properties** dialog box.\n\n    >[AZURE.IMPORTANT] **If you are using a private network for iSCSI connections, enter the IP address of the DATA port that is connected to the private network.**\n\n4. Repeat steps 2-3 for a second network interface (for example, DATA 1) on your device. Keep in mind that these interfaces should be enabled for iSCSI. To learn more about this, see [Modify network interfaces](storsimple-modify-device-config.md#modify-network-interfaces).\n5. Select the **Targets** tab in the **iSCSI Initiator Properties** dialog box. You should see the StorSimple device target IQN under **Discovered Targets**.\n ![iSCSI Initiator Properties Targets Tab](./media/storsimple-configure-mpio-windows-server/IC741007.png)\n6. Click **Connect** to establish an iSCSI session with your StorSimple device. A **Connect to Target** dialog box will appear.\n\n7. In the **Connect to Target** dialog box, select the **Enable multi-path** check box. Click **Advanced**.\n\n8. In the **Advanced Settings** dialog box, do the following:                                       \n    -    On the **Local Adapter** drop-down list, select **Microsoft iSCSI Initiator**.\n    -    On the **Initiator IP** drop-down list, select the IP address of the host.\n    -    On the **Target Portal** IP drop-down list, select the IP of device interface.\n    -    Click **OK** to return to the **iSCSI Initiator Properties** dialog box.\n\n9. Click **Properties**. In the **Properties** dialog box, click **Add Session**.\n10. In the **Connect to Target** dialog box, select the **Enable multi-path** check box. Click **Advanced**.\n11. In the **Advanced Settings** dialog box:                                        \n    -  On the **Local adapter** drop-down list, select Microsoft iSCSI Initiator.\n    -  On the **Initiator IP** drop-down list, select the IP address corresponding to the host. In this case, you are connecting two network interfaces on the device to a single network interface on the host. Therefore, this interface is the same as that provided for the first session.\n    -  On the **Target Portal IP** drop-down list, select the IP address for the second data interface enabled on the device.\n    -  Click **OK** to return to the iSCSI Initiator Properties dialog box. You have added a second session to the target.\n\n12. Open **Computer Management** by navigating to **Server Manager > Dashboard > Computer Management**. In the left pane, click **Storage > Disk Management**. The volume(s) created on the StorSimple device that are visible to this host will appear under **Disk Management** as new disk(s).\n\n13. Initialize the disk and create a new volume. During the format process, select a block size of 64 KB.\n![Disk Management](./media/storsimple-configure-mpio-windows-server/IC741008.png)\n14. Under **Disk Management**, right-click the **Disk** and select **Properties**.\n15. In the StorSimple Model #### **Multi-Path Disk Device Properties** dialog box, click the **MPIO tab**.\n![StorSimple 8100 Multi-Path Disk DeviceProp.](./media/storsimple-configure-mpio-windows-server/IC741009.png)\n\n16. In the **DSM Name** section, click **Details** and verify that the parameters are set to the default parameters.The default parameters are:\n\n    - Path Verify Period = 30\n    - Retry Count = 3\n    - PDO Remove Period = 20\n    - Retry Interval = 1\n    - Path Verify Enabled = Unchecked.\n\n\n>[AZURE.NOTE] **Please do not modify the default parameters.**\n\n## Step 4: Configure MPIO for high availability and load balancing\n\nFor multi-path based high availability and load balancing, multiple sessions must be manually added to declare the different paths available. For example, if the host has two interfaces connected to SAN and the device has two interfaces connected to SAN, then you need four sessions configured with proper path permutations (only two sessions will be required if each DATA interface and host interface is on a different IP subnet and is not routable).\n\n>[AZURE.IMPORTANT] **We recommend that you do not mix 1 GbE and 10 GbE network interfaces. If you use two network interfaces, both interfaces should be the identical type.**\n\nThe following procedure describes how to add sessions when a StorSimple device with two network interfaces is connected to a host with two network interfaces.\n\n### To configure MPIO for high availability and load balancing\n\n1. Perform a discovery of the target: in the **iSCSI Initiator Properties** dialog box, on the **Discovery** tab, click **Discover Portal**.\n2. In the **Connect to Target** dialog box, enter the IP address of one of the device network interfaces.\n3. Click **OK** to return to the **iSCSI Initiator Properties** dialog box.\n\n4. In the **iSCSI Initiator Properties** dialog box, select the **Targets** tab, highlight the discovered target, and then click **Connect**. The **Connect to Target** dialog box appears.\n\n5. In the **Connect to Target** dialog box:\n    \n    - Leave the default selected target setting for **Add this connection** to the list of favorite targets. This will make the device automatically attempt to restart the connection every time this computer restarts.\n    - Select the **Enable multi-path** check box.\n    - Click **Advanced**.\n\n6. In the **Advanced Settings** dialog box:\n    - On the **Local Adapter** drop-down list, select **Microsoft iSCSI Initiator**.\n    - On the **Initiator IP** drop-down list, select the IP address of the host.\n    - On the **Target Portal IP** drop-down list, select the IP address of the data interface enabled on the device.\n    - Click **OK** to return to the iSCSI Initiator Properties dialog box.\n\n7. Click **Properties**, and in the **Properties** dialog box, click **Add Session**.\n\n8. In the **Connect to Target** dialog box, select the **Enable multi-path** check box, and then click **Advanced**.\n\n9. In the **Advanced Settings** dialog box:\n    1. On the **Local adapter** drop-down list, select **Microsoft iSCSI Initiator**.\n    2. On the **Initiator IP** drop-down list, select the IP address corresponding to the second interface on the host.\n    3. On the **Target Portal IP** drop-down list, select the IP address for the second data interface enabled on the device.\n    4. Click **OK** to return to the **iSCSI Initiator Properties** dialog box. You have now added a second session to the target.\n\n10. Repeat Steps 8-10 to add additional sessions (paths) to the target. With two interfaces on the host and two on the device, you can add a total of four sessions.\n\n11. After adding the desired sessions (paths), in the **iSCSI Initiator Properties** dialog box, select the target and click **Properties**. On the Sessions tab of the **Properties** dialog box, note the four session identifiers that correspond to the possible path permutations. To cancel a session, select the check box next to a session identifier, and then click **Disconnect**.\n\n12. To view devices presented within sessions, select the **Devices** tab. To configure the MPIO policy for a selected device, click **MPIO**. The **Device Details** dialog box will appear. On the **MPIO** tab, you can select the appropriate **Load Balance Policy** settings. You can also view the **Active** or **Standby** path type.\n\n## Next steps\n\nLearn more about [using the StorSimple Manager service to modify your StorSimple device configuration](storsimple-modify-device-config.md).\n "
}