{
  "nodes": [
    {
      "content": "Manage HDInsight clusters using Ambari | Microsoft Azure",
      "pos": [
        26,
        82
      ]
    },
    {
      "content": "Learn how to use Ambari to monitor and manage Linux-based HDInsight clusters.",
      "pos": [
        100,
        177
      ]
    },
    {
      "content": "Manage HDInsight clusters by using Ambari (preview)",
      "pos": [
        494,
        545
      ]
    },
    {
      "content": "Learn how to use Ambari to manage and monitor Linux-based Azure HDInsight clusters.",
      "pos": [
        547,
        630
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Much of the information in this article applies only to Linux-based HDInsight clusters.",
      "pos": [
        634,
        734
      ]
    },
    {
      "content": "For Windows-based HDInsight clusters, only monitoring through the Ambari REST API is available.",
      "pos": [
        735,
        830
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Monitor Windows-based Hadoop on HDInsight using the Ambari API<ept id=\"p1\">](hdinsight-monitor-use-ambari-api.md)</ept>.",
      "pos": [
        831,
        937
      ]
    },
    {
      "pos": [
        941,
        975
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"whatis\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>What is Ambari?"
    },
    {
      "content": "<ph id=\"ph1\">&lt;a href=\"http://ambari.apache.org\" target=\"_blank\"&gt;</ph>Apache Ambari<ph id=\"ph2\">&lt;/a&gt;</ph> makes Hadoop management simpler by providing an easy-to-use web UI that can be used to provision, manage, and monitor Hadoop clusters.",
      "pos": [
        977,
        1180
      ]
    },
    {
      "content": "Developers can integrate these capabilities into their applications by using the <ph id=\"ph1\">&lt;a href=\"https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md\" target=\"_blank\"&gt;</ph>Ambari REST APIs<ph id=\"ph2\">&lt;/a&gt;</ph>.",
      "pos": [
        1181,
        1388
      ]
    },
    {
      "content": "Ambari is provided by default with Linux-based HDInsight clusters.",
      "pos": [
        1390,
        1456
      ]
    },
    {
      "content": "Windows-based HDInsight clusters provide monitoring functionality through the Ambari REST APIs.",
      "pos": [
        1457,
        1552
      ]
    },
    {
      "content": "SSH proxy",
      "pos": [
        1556,
        1565
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> While Ambari for your cluster is accessible directly over the Internet, some links from the Ambari Web UI (such as to the JobTracker,) are not exposed on the internet.",
      "pos": [
        1569,
        1749
      ]
    },
    {
      "content": "So you will receive \"server not found\" errors when trying to access these features unless you use a Secure Shell (SSH) tunnel to proxy web traffic to the cluster head node.",
      "pos": [
        1750,
        1922
      ]
    },
    {
      "content": "Use the following articles to create an SSH tunnel from a port on your local machine to the cluster:",
      "pos": [
        1924,
        2024
      ]
    },
    {
      "pos": [
        2028,
        2237
      ],
      "content": "<ph id=\"ph1\">&lt;a href=\"../hdinsight-hadoop-linux-use-ssh-unix/#tunnel\" target=\"_blank\"&gt;</ph>Use SSH with Linux-based Hadoop on HDInsight from Linux, Unix, or OS X<ph id=\"ph2\">&lt;/a&gt;</ph> - Steps on creating an SSH tunnel by using the <ph id=\"ph3\">`ssh`</ph> command."
    },
    {
      "pos": [
        2241,
        2426
      ],
      "content": "<ph id=\"ph1\">&lt;a href=\"../hdinsight-hadoop-linux-use-ssh-windows/#tunnel\" target=\"_blank\"&gt;</ph>Use SSH with Linux-based Hadoop on HDInsight from Windows<ph id=\"ph2\">&lt;/a&gt;</ph> - Steps on using PuTTY to create an SSH tunnel."
    },
    {
      "content": "Ambari web UI",
      "pos": [
        2430,
        2443
      ]
    },
    {
      "pos": [
        2445,
        2576
      ],
      "content": "The Ambari web UI is available on each Linux-based HDInsight cluster you create at <bpt id=\"p1\">**</bpt>https://&amp;lt;clustername&gt;.azurehdinsight.net<ept id=\"p1\">**</ept>."
    },
    {
      "content": "You will be prompted to authenticate to the page twice.",
      "pos": [
        2578,
        2633
      ]
    },
    {
      "content": "The first prompt is to authenticate to the HDInsight cluster, while the second is to authenticate to Ambari.",
      "pos": [
        2634,
        2742
      ]
    },
    {
      "pos": [
        2746,
        2847
      ],
      "content": "<bpt id=\"p1\">**</bpt>Cluster authentication<ept id=\"p1\">**</ept> - Use the cluster admin user name (the default is <bpt id=\"p2\">**</bpt>admin<ept id=\"p2\">**</ept>) and password."
    },
    {
      "pos": [
        2851,
        2936
      ],
      "content": "<bpt id=\"p1\">**</bpt>Ambari authentication<ept id=\"p1\">**</ept> - The default for both user name and password is <bpt id=\"p2\">**</bpt>admin<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        2944,
        3046
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you have changed the password for the <bpt id=\"p1\">**</bpt>admin<ept id=\"p1\">**</ept> user, you must enter the new password."
    },
    {
      "content": "When the page opens, note the bar at the top.",
      "pos": [
        3048,
        3093
      ]
    },
    {
      "content": "This contains the following information and controls:",
      "pos": [
        3094,
        3147
      ]
    },
    {
      "content": "ambari-nav",
      "pos": [
        3151,
        3161
      ]
    },
    {
      "pos": [
        3221,
        3301
      ],
      "content": "<bpt id=\"p1\">**</bpt>Ambari logo<ept id=\"p1\">**</ept> - Opens the dashboard, which can be used to monitor the cluster."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Cluster name # ops<ept id=\"p1\">**</ept> - Displays the number of ongoing Ambari operations.",
      "pos": [
        3305,
        3379
      ]
    },
    {
      "content": "Selecting the cluster name or <bpt id=\"p1\">**</bpt># ops<ept id=\"p1\">**</ept> will display a list of background operations.",
      "pos": [
        3380,
        3465
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt># alerts<ept id=\"p1\">**</ept> - Warnings or critical alerts, if any, for the cluster.",
      "pos": [
        3469,
        3537
      ]
    },
    {
      "content": "Selecting this will display a list of alerts.",
      "pos": [
        3538,
        3583
      ]
    },
    {
      "pos": [
        3587,
        3626
      ],
      "content": "<bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> - Displays the dashboard."
    },
    {
      "pos": [
        3630,
        3716
      ],
      "content": "<bpt id=\"p1\">**</bpt>Services<ept id=\"p1\">**</ept> - Information and configuration settings for the services in the cluster."
    },
    {
      "pos": [
        3720,
        3800
      ],
      "content": "<bpt id=\"p1\">**</bpt>Hosts<ept id=\"p1\">**</ept> - Information and configuration settings for the nodes in the cluster."
    },
    {
      "pos": [
        3804,
        3869
      ],
      "content": "<bpt id=\"p1\">**</bpt>Alerts<ept id=\"p1\">**</ept> - A log of information, warnings, and critical alerts."
    },
    {
      "pos": [
        3873,
        4011
      ],
      "content": "<bpt id=\"p1\">**</bpt>Admin<ept id=\"p1\">**</ept> - Software stack/services that are installed or can be added to the cluster, service account information, and Kerberos security."
    },
    {
      "pos": [
        4015,
        4079
      ],
      "content": "<bpt id=\"p1\">**</bpt>Admin button<ept id=\"p1\">**</ept> - Ambari management, user settings, and logout."
    },
    {
      "content": "Monitoring",
      "pos": [
        4083,
        4093
      ]
    },
    {
      "content": "Alerts",
      "pos": [
        4098,
        4104
      ]
    },
    {
      "content": "Ambari provides many alerts, which will have one of the following as the status:",
      "pos": [
        4106,
        4186
      ]
    },
    {
      "content": "OK",
      "pos": [
        4192,
        4194
      ]
    },
    {
      "content": "Warning",
      "pos": [
        4202,
        4209
      ]
    },
    {
      "content": "CRITICAL",
      "pos": [
        4217,
        4225
      ]
    },
    {
      "content": "UNKNOWN",
      "pos": [
        4233,
        4240
      ]
    },
    {
      "content": "Alerts other than <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> will cause the <bpt id=\"p2\">**</bpt># alerts<ept id=\"p2\">**</ept> entry at the top of the page to display the number of alerts.",
      "pos": [
        4244,
        4358
      ]
    },
    {
      "content": "Selecting this entry will display the alerts and their status.",
      "pos": [
        4359,
        4421
      ]
    },
    {
      "pos": [
        4423,
        4518
      ],
      "content": "Alerts are organized into several default groups, which can be viewed from the <bpt id=\"p1\">**</bpt>Alerts<ept id=\"p1\">**</ept> page."
    },
    {
      "content": "alerts page",
      "pos": [
        4522,
        4533
      ]
    },
    {
      "content": "You can manage the groups by using the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> menu and selecting <bpt id=\"p2\">**</bpt>Manage Alert Groups<ept id=\"p2\">**</ept>.",
      "pos": [
        4587,
        4681
      ]
    },
    {
      "content": "This allows you to modify existing groups, or create new groups.",
      "pos": [
        4682,
        4746
      ]
    },
    {
      "content": "manage alert groups dialog",
      "pos": [
        4750,
        4776
      ]
    },
    {
      "content": "You can also create alert notifications from the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> menu.",
      "pos": [
        4837,
        4903
      ]
    },
    {
      "content": "This allows you to create triggers that send notifications via <bpt id=\"p1\">**</bpt>EMAIL<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>SNMP<ept id=\"p2\">**</ept> when specific alert/severity combinations occur.",
      "pos": [
        4904,
        5037
      ]
    },
    {
      "content": "For example, you can send an alert when any of the alerts in the <bpt id=\"p1\">**</bpt>YARN Default<ept id=\"p1\">**</ept> group is set to <bpt id=\"p2\">**</bpt>Critical<ept id=\"p2\">**</ept>.",
      "pos": [
        5038,
        5149
      ]
    },
    {
      "content": "Create alert dialog",
      "pos": [
        5153,
        5172
      ]
    },
    {
      "content": "Cluster",
      "pos": [
        5248,
        5255
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Metrics<ept id=\"p1\">**</ept> tab of the dashboard contains a series of widgets that make it easy to monitor the status of your cluster at a glance.",
      "pos": [
        5257,
        5391
      ]
    },
    {
      "content": "Several widgets, such as <bpt id=\"p1\">**</bpt>CPU Usage<ept id=\"p1\">**</ept>, provide additional information when clicked.",
      "pos": [
        5392,
        5476
      ]
    },
    {
      "content": "dashboard with metrics",
      "pos": [
        5480,
        5502
      ]
    },
    {
      "pos": [
        5557,
        5640
      ],
      "content": "The <bpt id=\"p1\">**</bpt>Heatmaps<ept id=\"p1\">**</ept> tab displays metrics as colored heatmaps, going from green to red."
    },
    {
      "content": "dashboard with heatmaps",
      "pos": [
        5644,
        5667
      ]
    },
    {
      "pos": [
        5722,
        5859
      ],
      "content": "For more detailed information on the nodes within the cluster, select <bpt id=\"p1\">**</bpt>Hosts<ept id=\"p1\">**</ept>, and then select the specific node you are interested in."
    },
    {
      "content": "host details",
      "pos": [
        5863,
        5875
      ]
    },
    {
      "content": "Services",
      "pos": [
        5938,
        5946
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Services<ept id=\"p1\">**</ept> sidebar on the dashboard provides quick insight into the status of the services running on the cluster.",
      "pos": [
        5948,
        6068
      ]
    },
    {
      "content": "Various icons are used to indicate status or actions that should be taken, such as a yellow recycle symbol if a service needs to be recycled.",
      "pos": [
        6069,
        6210
      ]
    },
    {
      "content": "services side-bar",
      "pos": [
        6214,
        6231
      ]
    },
    {
      "content": "Selecting a service will display more detailed information on the service.",
      "pos": [
        6290,
        6364
      ]
    },
    {
      "content": "service summary information",
      "pos": [
        6368,
        6395
      ]
    },
    {
      "content": "Quick links",
      "pos": [
        6462,
        6473
      ]
    },
    {
      "content": "Some services display a <bpt id=\"p1\">**</bpt>Quick Links<ept id=\"p1\">**</ept> link at the top of the page.",
      "pos": [
        6475,
        6543
      ]
    },
    {
      "content": "This can be used to access service-specific web UIs, such as:",
      "pos": [
        6544,
        6605
      ]
    },
    {
      "pos": [
        6609,
        6649
      ],
      "content": "<bpt id=\"p1\">**</bpt>Job History<ept id=\"p1\">**</ept> - MapReduce job history."
    },
    {
      "pos": [
        6653,
        6700
      ],
      "content": "<bpt id=\"p1\">**</bpt>Resource Manager<ept id=\"p1\">**</ept> - YARN ResourceManager UI."
    },
    {
      "pos": [
        6704,
        6769
      ],
      "content": "<bpt id=\"p1\">**</bpt>NameNode<ept id=\"p1\">**</ept> - Hadoop Distributed File System (HDFS) NameNode UI."
    },
    {
      "pos": [
        6773,
        6801
      ],
      "content": "<bpt id=\"p1\">**</bpt>Oozie Web UI<ept id=\"p1\">**</ept> - Oozie UI."
    },
    {
      "content": "Selecting any of these links will open a new tab in your browser, which will display the selected page.",
      "pos": [
        6803,
        6906
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Selecting a <bpt id=\"p1\">**</bpt>Quick Links<ept id=\"p1\">**</ept> link for any service will result in a \"server not found\" error unless you are using a Secure Sockets Layer (SSL) tunnel to proxy web traffic to the cluster.",
      "pos": [
        6910,
        7107
      ]
    },
    {
      "content": "This is because the web applications used to display this information are not exposed on the internet.",
      "pos": [
        7108,
        7210
      ]
    },
    {
      "content": "For information on using an SSL tunnel with HDInsight, see one of the following:",
      "pos": [
        7215,
        7295
      ]
    },
    {
      "pos": [
        7302,
        7511
      ],
      "content": "<ph id=\"ph1\">&lt;a href=\"../hdinsight-hadoop-linux-use-ssh-unix/#tunnel\" target=\"_blank\"&gt;</ph>Use SSH with Linux-based Hadoop on HDInsight from Linux, Unix, or OS X<ph id=\"ph2\">&lt;/a&gt;</ph> - Steps on creating an SSH tunnel by using the <ph id=\"ph3\">`ssh`</ph> command."
    },
    {
      "pos": [
        7517,
        7702
      ],
      "content": "<ph id=\"ph1\">&lt;a href=\"../hdinsight-hadoop-linux-use-ssh-windows/#tunnel\" target=\"_blank\"&gt;</ph>Use SSH with Linux-based Hadoop on HDInsight from Windows<ph id=\"ph2\">&lt;/a&gt;</ph> - Steps on using PuTTY to create an SSH tunnel."
    },
    {
      "content": "Management",
      "pos": [
        7706,
        7716
      ]
    },
    {
      "content": "Ambari users, groups, and permissions",
      "pos": [
        7721,
        7758
      ]
    },
    {
      "content": "Managing users, groups, and permissions should not be used during the Linux-based HDInsight preview.",
      "pos": [
        7760,
        7860
      ]
    },
    {
      "content": "Hosts",
      "pos": [
        7865,
        7870
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Hosts<ept id=\"p1\">**</ept> page lists all hosts in the cluster.",
      "pos": [
        7872,
        7922
      ]
    },
    {
      "content": "To manage hosts, follow these steps.",
      "pos": [
        7923,
        7959
      ]
    },
    {
      "content": "hosts page",
      "pos": [
        7963,
        7973
      ]
    },
    {
      "pos": [
        8028,
        8134
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Adding, decommissioning or recommissioning a host should not be used with HDInsight clusters."
    },
    {
      "content": "Select the host(s) that you wish to manage.",
      "pos": [
        8139,
        8182
      ]
    },
    {
      "pos": [
        8187,
        8258
      ],
      "content": "Use the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> menu to select the action that you wish to perform:"
    },
    {
      "pos": [
        8266,
        8326
      ],
      "content": "<bpt id=\"p1\">**</bpt>Start all components<ept id=\"p1\">**</ept> - Start all components on the host."
    },
    {
      "pos": [
        8334,
        8392
      ],
      "content": "<bpt id=\"p1\">**</bpt>Stop all components<ept id=\"p1\">**</ept> - Stop all components on the host."
    },
    {
      "pos": [
        8400,
        8471
      ],
      "content": "<bpt id=\"p1\">**</bpt>Restart all components<ept id=\"p1\">**</ept> - Stop and start all components on the host."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Turn on maintenance mode<ept id=\"p1\">**</ept> - Suppresses alerts for the host.",
      "pos": [
        8479,
        8541
      ]
    },
    {
      "content": "This should be enabled if you are performing actions that will generate alerts, such as restarting a service that running services rely on.",
      "pos": [
        8542,
        8681
      ]
    },
    {
      "pos": [
        8689,
        8757
      ],
      "content": "<bpt id=\"p1\">**</bpt>Turn off maintenance mode<ept id=\"p1\">**</ept> - Returns the host to normal alerting."
    },
    {
      "pos": [
        8765,
        8819
      ],
      "content": "<bpt id=\"p1\">**</bpt>Stop<ept id=\"p1\">**</ept> - Stops DataNode or NodeManagers on the host."
    },
    {
      "pos": [
        8827,
        8883
      ],
      "content": "<bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept> - Starts DataNode or NodeManagers on the host."
    },
    {
      "pos": [
        8891,
        8959
      ],
      "content": "<bpt id=\"p1\">**</bpt>Restart<ept id=\"p1\">**</ept> - Stops and starts DataNode or NodeManagers on the host."
    },
    {
      "pos": [
        8967,
        9018
      ],
      "content": "<bpt id=\"p1\">**</bpt>Decommission<ept id=\"p1\">**</ept> - Removes a host from the cluster."
    },
    {
      "pos": [
        9030,
        9088
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Do not use this action on HDInsight clusters."
    },
    {
      "pos": [
        9096,
        9168
      ],
      "content": "<bpt id=\"p1\">**</bpt>Recommission<ept id=\"p1\">**</ept> - Adds a previously decommissioned host to the cluster."
    },
    {
      "pos": [
        9180,
        9238
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Do not use this action on HDInsight clusters."
    },
    {
      "pos": [
        9243,
        9271
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"service\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Services"
    },
    {
      "pos": [
        9273,
        9438
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Services<ept id=\"p2\">**</ept> page, use the <bpt id=\"p3\">**</bpt>Actions<ept id=\"p3\">**</ept> button at the bottom of the list of services to add new services, or to stop and start all services."
    },
    {
      "content": "service actions",
      "pos": [
        9442,
        9457
      ]
    },
    {
      "content": "The following are the general steps to add a service:",
      "pos": [
        9520,
        9573
      ]
    },
    {
      "pos": [
        9578,
        9677
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Services<ept id=\"p2\">**</ept> page, use the <bpt id=\"p3\">**</bpt>Actions<ept id=\"p3\">**</ept> button and select <bpt id=\"p4\">**</bpt>Add Service<ept id=\"p4\">**</ept>."
    },
    {
      "pos": [
        9682,
        9766
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Add Service Wizard<ept id=\"p1\">**</ept>, select the service to add, and then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."
    },
    {
      "content": "add service",
      "pos": [
        9774,
        9785
      ]
    },
    {
      "content": "Continue through the wizard, providing configuration information for the service.",
      "pos": [
        9847,
        9928
      ]
    },
    {
      "content": "Consult the documentation on the specific service you are adding for more information on configuration requirements.",
      "pos": [
        9929,
        10045
      ]
    },
    {
      "pos": [
        10050,
        10166
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Review<ept id=\"p1\">**</ept> page, you can <bpt id=\"p2\">**</bpt>Print<ept id=\"p2\">**</ept> the configuration information, or <bpt id=\"p3\">**</bpt>Deploy<ept id=\"p3\">**</ept> the service to the cluster."
    },
    {
      "content": "Once the service has been deployed, the <bpt id=\"p1\">**</bpt>Install, Start and Test<ept id=\"p1\">**</ept> page will display progress information as the service is installed and tested.",
      "pos": [
        10171,
        10317
      ]
    },
    {
      "content": "Once the <bpt id=\"p1\">**</bpt>Status<ept id=\"p1\">**</ept> is green, select <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>.",
      "pos": [
        10318,
        10364
      ]
    },
    {
      "content": "image of install, start, and test page",
      "pos": [
        10372,
        10410
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Summary<ept id=\"p1\">**</ept> page displays a summary of the install process, as well as any possible actions you need to take; for example, restarting other services.",
      "pos": [
        10479,
        10632
      ]
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Complete<ept id=\"p1\">**</ept> to exit the wizard.",
      "pos": [
        10633,
        10672
      ]
    },
    {
      "content": "While the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> button can restart all services, often you want to start, stop, or restart a specific service.",
      "pos": [
        10674,
        10790
      ]
    },
    {
      "content": "Use the following steps to perform actions on an individual service:",
      "pos": [
        10791,
        10859
      ]
    },
    {
      "pos": [
        10864,
        10926
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Services<ept id=\"p2\">**</ept> page, select a service."
    },
    {
      "content": "From the top of the <bpt id=\"p1\">**</bpt>Summary<ept id=\"p1\">**</ept> tab, use the <bpt id=\"p2\">**</bpt>Service Actions<ept id=\"p2\">**</ept> button and select the action to take.",
      "pos": [
        10931,
        11033
      ]
    },
    {
      "content": "This will restart the service on all nodes.",
      "pos": [
        11034,
        11077
      ]
    },
    {
      "content": "service action",
      "pos": [
        11085,
        11099
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Restarting some services while the cluster is running may generate alerts.",
      "pos": [
        11179,
        11266
      ]
    },
    {
      "content": "To avoid this, you can use the <bpt id=\"p1\">**</bpt>Service Actions<ept id=\"p1\">**</ept> button to enable <bpt id=\"p2\">**</bpt>Maintenance mode<ept id=\"p2\">**</ept> for the service before performing the restart.",
      "pos": [
        11267,
        11402
      ]
    },
    {
      "content": "Once an action has been selected, the <bpt id=\"p1\">**</bpt># op<ept id=\"p1\">**</ept> entry at the top of the page will increment to show that a background operation is occurring.",
      "pos": [
        11407,
        11547
      ]
    },
    {
      "content": "If configured to display, the list of background operations is displayed.",
      "pos": [
        11548,
        11621
      ]
    },
    {
      "pos": [
        11629,
        11790
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you enabled <bpt id=\"p1\">**</bpt>Maintenance mode<ept id=\"p1\">**</ept> for the service, remember to disable it by using the <bpt id=\"p2\">**</bpt>Service Actions<ept id=\"p2\">**</ept> button once the operation has finished."
    },
    {
      "content": "To configure a service, use the following steps:",
      "pos": [
        11792,
        11840
      ]
    },
    {
      "pos": [
        11845,
        11907
      ],
      "content": "From the <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Services<ept id=\"p2\">**</ept> page, select a service."
    },
    {
      "content": "Select the <bpt id=\"p1\">**</bpt>Configs<ept id=\"p1\">**</ept> tab.",
      "pos": [
        11912,
        11939
      ]
    },
    {
      "content": "The current configuration will be displayed.",
      "pos": [
        11940,
        11984
      ]
    },
    {
      "content": "A list of previous configurations is also displayed.",
      "pos": [
        11985,
        12037
      ]
    },
    {
      "content": "configurations",
      "pos": [
        12045,
        12059
      ]
    },
    {
      "content": "Use the fields displayed to modify the configuration, and then select <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.",
      "pos": [
        12125,
        12204
      ]
    },
    {
      "content": "Or select a previous configuration and then select <bpt id=\"p1\">**</bpt>Make current<ept id=\"p1\">**</ept> to roll back to the previous settings.",
      "pos": [
        12205,
        12311
      ]
    },
    {
      "content": "REST API",
      "pos": [
        12315,
        12323
      ]
    },
    {
      "content": "Ambari Web relies on an underlying REST API, which you can leverage to create your own management and monitoring tools.",
      "pos": [
        12325,
        12444
      ]
    },
    {
      "content": "While the API is relatively straightforward to use, there are some Azure specifics to be aware of:",
      "pos": [
        12445,
        12543
      ]
    },
    {
      "pos": [
        12547,
        12683
      ],
      "content": "<bpt id=\"p1\">**</bpt>Authentication<ept id=\"p1\">**</ept> - The cluster administrator user name (default <bpt id=\"p2\">**</bpt>admin<ept id=\"p2\">**</ept>) and password should be used to authenticate to the service."
    },
    {
      "pos": [
        12687,
        12813
      ],
      "content": "<bpt id=\"p1\">**</bpt>Security<ept id=\"p1\">**</ept> - Ambari uses basic authentication, so you should always use Secure HTTP (HTTPS) when communicating with the API."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>IP Addresses<ept id=\"p1\">**</ept> - The address returned for hosts within a cluster are not accessible from outside the cluster, unless the cluster is a member of an Azure virtual network.",
      "pos": [
        12817,
        12988
      ]
    },
    {
      "content": "Then the IP address will be accessible by other members of the virtual network, but not from outside the network.",
      "pos": [
        12989,
        13102
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Some functionality is not enabled<ept id=\"p1\">**</ept> - Some Ambari functionality is disabled, as it is managed by the HDInsight cloud service; for example, adding or removing hosts from the cluster.",
      "pos": [
        13106,
        13289
      ]
    },
    {
      "content": "Other functionality may not be fully implemented during the preview of Linux-based HDInsight.",
      "pos": [
        13290,
        13383
      ]
    },
    {
      "pos": [
        13385,
        13537
      ],
      "content": "For a complete reference of the REST API, see <bpt id=\"p1\">[</bpt>Ambari API Reference V1<ept id=\"p1\">](https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md)</ept>."
    },
    {
      "content": "test",
      "pos": [
        13539,
        13543
      ]
    }
  ],
  "content": "<properties\n   pageTitle=\"Manage HDInsight clusters using Ambari | Microsoft Azure\"\n   description=\"Learn how to use Ambari to monitor and manage Linux-based HDInsight clusters.\"\n   services=\"hdinsight\"\n   documentationCenter=\"\"\n   authors=\"Blackmist\"\n   manager=\"paulettm\"\n   editor=\"cgronlun\"\n    tags=\"azure-portal\"/>\n\n<tags\n   ms.service=\"hdinsight\"\n   ms.devlang=\"na\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"big-data\"\n   ms.date=\"07/24/2015\"\n   ms.author=\"larryfr\"/>\n\n#Manage HDInsight clusters by using Ambari (preview)\n\nLearn how to use Ambari to manage and monitor Linux-based Azure HDInsight clusters.\n\n> [AZURE.NOTE] Much of the information in this article applies only to Linux-based HDInsight clusters. For Windows-based HDInsight clusters, only monitoring through the Ambari REST API is available. See [Monitor Windows-based Hadoop on HDInsight using the Ambari API](hdinsight-monitor-use-ambari-api.md).\n\n##<a id=\"whatis\"></a>What is Ambari?\n\n<a href=\"http://ambari.apache.org\" target=\"_blank\">Apache Ambari</a> makes Hadoop management simpler by providing an easy-to-use web UI that can be used to provision, manage, and monitor Hadoop clusters. Developers can integrate these capabilities into their applications by using the <a href=\"https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md\" target=\"_blank\">Ambari REST APIs</a>.\n\nAmbari is provided by default with Linux-based HDInsight clusters. Windows-based HDInsight clusters provide monitoring functionality through the Ambari REST APIs.\n\n##SSH proxy\n\n> [AZURE.NOTE] While Ambari for your cluster is accessible directly over the Internet, some links from the Ambari Web UI (such as to the JobTracker,) are not exposed on the internet. So you will receive \"server not found\" errors when trying to access these features unless you use a Secure Shell (SSH) tunnel to proxy web traffic to the cluster head node.\n\nUse the following articles to create an SSH tunnel from a port on your local machine to the cluster:\n\n* <a href=\"../hdinsight-hadoop-linux-use-ssh-unix/#tunnel\" target=\"_blank\">Use SSH with Linux-based Hadoop on HDInsight from Linux, Unix, or OS X</a> - Steps on creating an SSH tunnel by using the `ssh` command.\n\n* <a href=\"../hdinsight-hadoop-linux-use-ssh-windows/#tunnel\" target=\"_blank\">Use SSH with Linux-based Hadoop on HDInsight from Windows</a> - Steps on using PuTTY to create an SSH tunnel.\n\n##Ambari web UI\n\nThe Ambari web UI is available on each Linux-based HDInsight cluster you create at **https://&lt;clustername>.azurehdinsight.net**.\n\nYou will be prompted to authenticate to the page twice. The first prompt is to authenticate to the HDInsight cluster, while the second is to authenticate to Ambari.\n\n* **Cluster authentication** - Use the cluster admin user name (the default is **admin**) and password.\n\n* **Ambari authentication** - The default for both user name and password is **admin**.\n\n    > [AZURE.NOTE] If you have changed the password for the **admin** user, you must enter the new password.\n\nWhen the page opens, note the bar at the top. This contains the following information and controls:\n\n![ambari-nav](./media/hdinsight-hadoop-manage-ambari/ambari-nav.png)\n\n* **Ambari logo** - Opens the dashboard, which can be used to monitor the cluster.\n\n* **Cluster name # ops** - Displays the number of ongoing Ambari operations. Selecting the cluster name or **# ops** will display a list of background operations.\n\n* **# alerts** - Warnings or critical alerts, if any, for the cluster. Selecting this will display a list of alerts.\n\n* **Dashboard** - Displays the dashboard.\n\n* **Services** - Information and configuration settings for the services in the cluster.\n\n* **Hosts** - Information and configuration settings for the nodes in the cluster.\n\n* **Alerts** - A log of information, warnings, and critical alerts.\n\n* **Admin** - Software stack/services that are installed or can be added to the cluster, service account information, and Kerberos security.\n\n* **Admin button** - Ambari management, user settings, and logout.\n\n##Monitoring\n\n###Alerts\n\nAmbari provides many alerts, which will have one of the following as the status:\n\n* **OK**\n\n* **Warning**\n\n* **CRITICAL**\n\n* **UNKNOWN**\n\nAlerts other than **OK** will cause the **# alerts** entry at the top of the page to display the number of alerts. Selecting this entry will display the alerts and their status.\n\nAlerts are organized into several default groups, which can be viewed from the **Alerts** page.\n\n![alerts page](./media/hdinsight-hadoop-manage-ambari/alerts.png)\n\nYou can manage the groups by using the **Actions** menu and selecting **Manage Alert Groups**. This allows you to modify existing groups, or create new groups.\n\n![manage alert groups dialog](./media/hdinsight-hadoop-manage-ambari/manage-alerts.png)\n\nYou can also create alert notifications from the **Actions** menu. This allows you to create triggers that send notifications via **EMAIL** or **SNMP** when specific alert/severity combinations occur. For example, you can send an alert when any of the alerts in the **YARN Default** group is set to **Critical**.\n\n![Create alert dialog](./media/hdinsight-hadoop-manage-ambari/create-alert-notification.png)\n\n###Cluster\n\nThe **Metrics** tab of the dashboard contains a series of widgets that make it easy to monitor the status of your cluster at a glance. Several widgets, such as **CPU Usage**, provide additional information when clicked.\n\n![dashboard with metrics](./media/hdinsight-hadoop-manage-ambari/metrics.png)\n\nThe **Heatmaps** tab displays metrics as colored heatmaps, going from green to red.\n\n![dashboard with heatmaps](./media/hdinsight-hadoop-manage-ambari/heatmap.png)\n\nFor more detailed information on the nodes within the cluster, select **Hosts**, and then select the specific node you are interested in.\n\n![host details](./media/hdinsight-hadoop-manage-ambari/host-details.png)\n\n###Services\n\nThe **Services** sidebar on the dashboard provides quick insight into the status of the services running on the cluster. Various icons are used to indicate status or actions that should be taken, such as a yellow recycle symbol if a service needs to be recycled.\n\n![services side-bar](./media/hdinsight-hadoop-manage-ambari/service-bar.png)\n\nSelecting a service will display more detailed information on the service.\n\n![service summary information](./media/hdinsight-hadoop-manage-ambari/service-details.png)\n\n####Quick links\n\nSome services display a **Quick Links** link at the top of the page. This can be used to access service-specific web UIs, such as:\n\n* **Job History** - MapReduce job history.\n\n* **Resource Manager** - YARN ResourceManager UI.\n\n* **NameNode** - Hadoop Distributed File System (HDFS) NameNode UI.\n\n* **Oozie Web UI** - Oozie UI.\n\nSelecting any of these links will open a new tab in your browser, which will display the selected page.\n\n> [AZURE.NOTE] Selecting a **Quick Links** link for any service will result in a \"server not found\" error unless you are using a Secure Sockets Layer (SSL) tunnel to proxy web traffic to the cluster. This is because the web applications used to display this information are not exposed on the internet.\n>\n> For information on using an SSL tunnel with HDInsight, see one of the following:\n>\n> * <a href=\"../hdinsight-hadoop-linux-use-ssh-unix/#tunnel\" target=\"_blank\">Use SSH with Linux-based Hadoop on HDInsight from Linux, Unix, or OS X</a> - Steps on creating an SSH tunnel by using the `ssh` command.\n>\n>* <a href=\"../hdinsight-hadoop-linux-use-ssh-windows/#tunnel\" target=\"_blank\">Use SSH with Linux-based Hadoop on HDInsight from Windows</a> - Steps on using PuTTY to create an SSH tunnel.\n\n##Management\n\n###Ambari users, groups, and permissions\n\nManaging users, groups, and permissions should not be used during the Linux-based HDInsight preview.\n\n###Hosts\n\nThe **Hosts** page lists all hosts in the cluster. To manage hosts, follow these steps.\n\n![hosts page](./media/hdinsight-hadoop-manage-ambari/hosts.png)\n\n> [AZURE.NOTE] Adding, decommissioning or recommissioning a host should not be used with HDInsight clusters.\n\n1. Select the host(s) that you wish to manage.\n\n2. Use the **Actions** menu to select the action that you wish to perform:\n\n    * **Start all components** - Start all components on the host.\n\n    * **Stop all components** - Stop all components on the host.\n\n    * **Restart all components** - Stop and start all components on the host.\n\n    * **Turn on maintenance mode** - Suppresses alerts for the host. This should be enabled if you are performing actions that will generate alerts, such as restarting a service that running services rely on.\n\n    * **Turn off maintenance mode** - Returns the host to normal alerting.\n\n    * **Stop** - Stops DataNode or NodeManagers on the host.\n\n    * **Start** - Starts DataNode or NodeManagers on the host.\n\n    * **Restart** - Stops and starts DataNode or NodeManagers on the host.\n\n    * **Decommission** - Removes a host from the cluster.\n\n        > [AZURE.NOTE] Do not use this action on HDInsight clusters.\n\n    * **Recommission** - Adds a previously decommissioned host to the cluster.\n\n        > [AZURE.NOTE] Do not use this action on HDInsight clusters.\n\n###<a id=\"service\"></a>Services\n\nFrom the **Dashboard** or **Services** page, use the **Actions** button at the bottom of the list of services to add new services, or to stop and start all services.\n\n![service actions](./media/hdinsight-hadoop-manage-ambari/service-actions.png)\n\nThe following are the general steps to add a service:\n\n1. From the **Dashboard** or **Services** page, use the **Actions** button and select **Add Service**.\n\n2. From the **Add Service Wizard**, select the service to add, and then click **Next**.\n\n    ![add service](./media/hdinsight-hadoop-manage-ambari/add-service.png)\n\n3. Continue through the wizard, providing configuration information for the service. Consult the documentation on the specific service you are adding for more information on configuration requirements.\n\n4. From the **Review** page, you can **Print** the configuration information, or **Deploy** the service to the cluster.\n\n5. Once the service has been deployed, the **Install, Start and Test** page will display progress information as the service is installed and tested. Once the **Status** is green, select **Next**.\n\n    ![image of install, start, and test page](./media/hdinsight-hadoop-manage-ambari/install-start-test.png)\n\n6. The **Summary** page displays a summary of the install process, as well as any possible actions you need to take; for example, restarting other services. Select **Complete** to exit the wizard.\n\nWhile the **Actions** button can restart all services, often you want to start, stop, or restart a specific service. Use the following steps to perform actions on an individual service:\n\n1. From the **Dashboard** or **Services** page, select a service.\n\n2. From the top of the **Summary** tab, use the **Service Actions** button and select the action to take. This will restart the service on all nodes.\n\n    ![service action](./media/hdinsight-hadoop-manage-ambari/individual-service-actions.png)\n\n    > [AZURE.NOTE] Restarting some services while the cluster is running may generate alerts. To avoid this, you can use the **Service Actions** button to enable **Maintenance mode** for the service before performing the restart.\n\n3. Once an action has been selected, the **# op** entry at the top of the page will increment to show that a background operation is occurring. If configured to display, the list of background operations is displayed.\n\n    > [AZURE.NOTE] If you enabled **Maintenance mode** for the service, remember to disable it by using the **Service Actions** button once the operation has finished.\n\nTo configure a service, use the following steps:\n\n1. From the **Dashboard** or **Services** page, select a service.\n\n2. Select the **Configs** tab. The current configuration will be displayed. A list of previous configurations is also displayed.\n\n    ![configurations](./media/hdinsight-hadoop-manage-ambari/service-configs.png)\n\n3. Use the fields displayed to modify the configuration, and then select **Save**. Or select a previous configuration and then select **Make current** to roll back to the previous settings.\n\n##REST API\n\nAmbari Web relies on an underlying REST API, which you can leverage to create your own management and monitoring tools. While the API is relatively straightforward to use, there are some Azure specifics to be aware of:\n\n* **Authentication** - The cluster administrator user name (default **admin**) and password should be used to authenticate to the service.\n\n* **Security** - Ambari uses basic authentication, so you should always use Secure HTTP (HTTPS) when communicating with the API.\n\n* **IP Addresses** - The address returned for hosts within a cluster are not accessible from outside the cluster, unless the cluster is a member of an Azure virtual network. Then the IP address will be accessible by other members of the virtual network, but not from outside the network.\n\n* **Some functionality is not enabled** - Some Ambari functionality is disabled, as it is managed by the HDInsight cloud service; for example, adding or removing hosts from the cluster. Other functionality may not be fully implemented during the preview of Linux-based HDInsight.\n\nFor a complete reference of the REST API, see [Ambari API Reference V1](https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md).\n\ntest\n"
}