{
  "nodes": [
    {
      "content": "How to Use Azure Redis Cache",
      "pos": [
        28,
        56
      ]
    },
    {
      "content": "Learn how to improve the performance of your Azure applications with Azure Redis Cache",
      "pos": [
        76,
        162
      ]
    },
    {
      "content": "How to Use Azure Redis Cache",
      "pos": [
        479,
        507
      ]
    },
    {
      "content": "This guide shows you how to get started using",
      "pos": [
        509,
        554
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Azure Redis Cache<ept id=\"p1\">**</ept>.",
      "pos": [
        556,
        578
      ]
    },
    {
      "content": "The samples are written in C\\# code and",
      "pos": [
        579,
        618
      ]
    },
    {
      "content": "use the [StackExchange.Redis][] client.",
      "pos": [
        619,
        658
      ]
    },
    {
      "content": "The scenarios covered include <bpt id=\"p1\">**</bpt>creating and configuring a cache<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>configuring cache clients<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>adding and removing objects from the cache<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>storing ASP.NET session state in the cache<ept id=\"p4\">**</ept>.",
      "pos": [
        659,
        857
      ]
    },
    {
      "content": "For more",
      "pos": [
        858,
        866
      ]
    },
    {
      "content": "information on using Azure Redis Cache, refer to the [Next Steps][] section.",
      "pos": [
        867,
        943
      ]
    },
    {
      "content": "What is Azure Redis Cache?",
      "pos": [
        971,
        997
      ]
    },
    {
      "content": "Microsoft Azure Redis Cache is based on the popular open source Redis Cache.",
      "pos": [
        999,
        1075
      ]
    },
    {
      "content": "It gives you access to a secure, dedicated Redis cache, managed by Microsoft.",
      "pos": [
        1076,
        1153
      ]
    },
    {
      "content": "A cache created using Azure Redis Cache is accessible from any application within Microsoft Azure.",
      "pos": [
        1154,
        1252
      ]
    },
    {
      "content": "Microsoft Azure Redis Cache is available in two tiers:",
      "pos": [
        1254,
        1308
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Basic<ept id=\"p1\">**</ept> – Single node.",
      "pos": [
        1314,
        1338
      ]
    },
    {
      "content": "Multiple sizes up to 53 GB.",
      "pos": [
        1339,
        1366
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> – Two-node Primary/Replica.",
      "pos": [
        1371,
        1411
      ]
    },
    {
      "content": "Multiple sizes up to 53 GB.",
      "pos": [
        1412,
        1439
      ]
    },
    {
      "content": "99.9% SLA.",
      "pos": [
        1440,
        1450
      ]
    },
    {
      "content": "Each tier differs in terms of features and pricing.",
      "pos": [
        1452,
        1503
      ]
    },
    {
      "content": "The features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details][].",
      "pos": [
        1504,
        1617
      ]
    },
    {
      "content": "This guide provides an overview of getting started with Azure Redis Cache.",
      "pos": [
        1619,
        1693
      ]
    },
    {
      "content": "For more detailed information on these features that are beyond the scope of this getting started guide, see [Overview of Azure Redis Cache][].",
      "pos": [
        1694,
        1837
      ]
    },
    {
      "content": "Get Started with Azure Redis Cache",
      "pos": [
        1887,
        1921
      ]
    },
    {
      "content": "Getting started with Azure Redis Cache is easy.",
      "pos": [
        1923,
        1970
      ]
    },
    {
      "content": "To get started, you provision and configure a cache.",
      "pos": [
        1971,
        2023
      ]
    },
    {
      "content": "Next, you configure the cache clients so they can access the cache.",
      "pos": [
        2024,
        2091
      ]
    },
    {
      "content": "Once the cache clients are configured, you can begin working with them.",
      "pos": [
        2092,
        2163
      ]
    },
    {
      "content": "[Create the cache][]",
      "pos": [
        2169,
        2189
      ]
    },
    {
      "content": "[Configure the cache clients][]",
      "pos": [
        2194,
        2225
      ]
    },
    {
      "content": "Create a cache",
      "pos": [
        2258,
        2272
      ]
    },
    {
      "pos": [
        2274,
        2395
      ],
      "content": "To create a cache, first sign in to the [Azure preview portal][], and click <bpt id=\"p1\">**</bpt>New<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Data + Storage<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Redis Cache<ept id=\"p3\">**</ept>."
    },
    {
      "content": "New cache",
      "pos": [
        2399,
        2408
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you don't have an Azure account, you can create a free trial account in just a couple of minutes.",
      "pos": [
        2426,
        2539
      ]
    },
    {
      "content": "For details, see [Azure Free Trial][].",
      "pos": [
        2540,
        2578
      ]
    },
    {
      "pos": [
        2580,
        2662
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>New Redis Cache<ept id=\"p1\">**</ept> blade, specify the desired configuration for the cache."
    },
    {
      "content": "Create cache",
      "pos": [
        2666,
        2678
      ]
    },
    {
      "content": "In <bpt id=\"p1\">**</bpt>Dns name<ept id=\"p1\">**</ept>, enter a subdomain name to use for the cache endpoint.",
      "pos": [
        2694,
        2764
      ]
    },
    {
      "content": "The endpoint must be a string between six and twenty characters, contain only lowercase numbers and letters, and must start with a letter.",
      "pos": [
        2765,
        2903
      ]
    },
    {
      "content": "Use <bpt id=\"p1\">**</bpt>Pricing Tier<ept id=\"p1\">**</ept> to select the desired cache size and features.",
      "pos": [
        2905,
        2972
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Basic<ept id=\"p1\">**</ept> caches have a single node with multiple sizes up to 53 GB.",
      "pos": [
        2973,
        3041
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> caches have a two node primary/replica configuration with a 99.9% SLA, and multiple sizes up to 53 GB.",
      "pos": [
        3042,
        3157
      ]
    },
    {
      "pos": [
        3159,
        3231
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Resource group<ept id=\"p1\">**</ept>, select or create a resource group for your cache."
    },
    {
      "pos": [
        3234,
        3330
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> For more information, see [Using Resource groups to manage your Azure resources][]."
    },
    {
      "content": "For <bpt id=\"p1\">**</bpt>Subscription<ept id=\"p1\">**</ept>, select the Azure subscription that you want to use for the cache.",
      "pos": [
        3333,
        3420
      ]
    },
    {
      "content": "If your account has only one subscription, it will be automatically selected and the <bpt id=\"p1\">**</bpt>Subscription<ept id=\"p1\">**</ept> drop-down will not be displayed.",
      "pos": [
        3421,
        3555
      ]
    },
    {
      "content": "Use <bpt id=\"p1\">**</bpt>Location<ept id=\"p1\">**</ept> to specify the geographic location in which your cache is hosted.",
      "pos": [
        3557,
        3639
      ]
    },
    {
      "content": "For the best performance, Microsoft strongly recommends that you create the cache in the same region as the cache client application.",
      "pos": [
        3640,
        3773
      ]
    },
    {
      "content": "Once the new cache options are configured, click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>.",
      "pos": [
        3775,
        3835
      ]
    },
    {
      "content": "It can take a few minutes for the cache to be created.",
      "pos": [
        3836,
        3890
      ]
    },
    {
      "content": "To check the status, you can monitor the progress on the startboard.",
      "pos": [
        3891,
        3959
      ]
    },
    {
      "content": "After the cache has been created, your new cache has a <bpt id=\"p1\">**</bpt>Running<ept id=\"p1\">**</ept> status and is ready for use with default settings.",
      "pos": [
        3960,
        4077
      ]
    },
    {
      "content": "Cache created",
      "pos": [
        4081,
        4094
      ]
    },
    {
      "pos": [
        4111,
        4183
      ],
      "content": "Once your cache is created, you can access it from the <bpt id=\"p1\">**</bpt>Browse<ept id=\"p1\">**</ept> blade."
    },
    {
      "content": "Browse blade",
      "pos": [
        4188,
        4200
      ]
    },
    {
      "pos": [
        4217,
        4260
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Redis Caches<ept id=\"p1\">**</ept> to view your caches."
    },
    {
      "content": "Caches",
      "pos": [
        4264,
        4270
      ]
    },
    {
      "content": "Configure the cache clients",
      "pos": [
        4305,
        4332
      ]
    },
    {
      "content": "A cache created using Azure Redis Cache is accessible from any Azure application.",
      "pos": [
        4334,
        4415
      ]
    },
    {
      "content": ".NET applications developed in Visual Studio can use the <bpt id=\"p1\">**</bpt>StackExchange.Redis<ept id=\"p1\">**</ept> cache client, which can be configured using a NuGet package that simplifies the configuration of cache client applications.",
      "pos": [
        4416,
        4620
      ]
    },
    {
      "pos": [
        4624,
        4763
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> For more information, see the [StackExchange.Redis][] github page and  the [StackExchange.Redis cache client documentation][]."
    },
    {
      "pos": [
        4765,
        4947
      ],
      "content": "To configure a client application in Visual Studio using the StackExchange.Redis NuGet package, right-click the project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and choose <bpt id=\"p2\">**</bpt>Manage NuGet Packages<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Manage NuGet packages",
      "pos": [
        4952,
        4973
      ]
    },
    {
      "pos": [
        4987,
        5158
      ],
      "content": "Type <bpt id=\"p1\">**</bpt>StackExchange.Redis<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>StackExchange.Redis.StrongName<ept id=\"p2\">**</ept> into the <bpt id=\"p3\">**</bpt>Search Online<ept id=\"p3\">**</ept> text box, select the desired version from the results, and click <bpt id=\"p4\">**</bpt>Install<ept id=\"p4\">**</ept>."
    },
    {
      "pos": [
        5161,
        5349
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you prefer to use a strong-named version of the <bpt id=\"p1\">**</bpt>StackExchange.Redis<ept id=\"p1\">**</ept> client library, choose <bpt id=\"p2\">**</bpt>StackExchange.Redis.StrongName<ept id=\"p2\">**</ept>; otherwise choose <bpt id=\"p3\">**</bpt>StackExchange.Redis<ept id=\"p3\">**</ept>."
    },
    {
      "content": "StackExchange.Redis NuGet package",
      "pos": [
        5353,
        5386
      ]
    },
    {
      "content": "The NuGet package downloads and adds the required assembly references for your client application to access Azure Redis Cache with the StackExchange.Redis cache client.",
      "pos": [
        5409,
        5577
      ]
    },
    {
      "content": "Once your client project is configured for caching, you can use the techniques described in the following sections for working with your cache.",
      "pos": [
        5579,
        5722
      ]
    },
    {
      "content": "Working with Caches",
      "pos": [
        5762,
        5781
      ]
    },
    {
      "content": "The steps in this section describe how to perform common tasks with Cache.",
      "pos": [
        5783,
        5857
      ]
    },
    {
      "content": "[Connect to the cache][]",
      "pos": [
        5863,
        5887
      ]
    },
    {
      "content": "[Add and retrieve objects from the cache][]",
      "pos": [
        5892,
        5935
      ]
    },
    {
      "content": "[Store ASP.NET session state in the cache][]",
      "pos": [
        5940,
        5984
      ]
    },
    {
      "content": "Connect to the cache",
      "pos": [
        6021,
        6041
      ]
    },
    {
      "content": "In order to programmatically work with a cache, you need a reference to the cache.",
      "pos": [
        6043,
        6125
      ]
    },
    {
      "content": "Add the following to the top of any file from which you want to use the StackExchange.Redis client to access an Azure Redis Cache:",
      "pos": [
        6126,
        6256
      ]
    },
    {
      "pos": [
        6291,
        6371
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The StackExchange.Redis client requires .NET Framework 4 or higher."
    },
    {
      "content": "The connection to the Azure Redis Cache is managed by the <ph id=\"ph1\">`ConnectionMultiplexer`</ph> class.",
      "pos": [
        6373,
        6461
      ]
    },
    {
      "content": "This class is designed to be shared and reused throughout your client application, and does not need to be created on a per operation basis.",
      "pos": [
        6462,
        6602
      ]
    },
    {
      "content": "To connect to an Azure Redis Cache and be returned an instance of a connected <ph id=\"ph1\">`ConnectionMultiplexer`</ph>, call the static <ph id=\"ph2\">`Connect`</ph> method and pass in the cache endpoint and key like the following example.",
      "pos": [
        6605,
        6807
      ]
    },
    {
      "content": "Use the Azure key generated from the preview portal as the password parameter.",
      "pos": [
        6808,
        6886
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> Warning: Never store credentials in source code.",
      "pos": [
        7037,
        7103
      ]
    },
    {
      "content": "To keep this sample simple, I’m showing them in the source code.",
      "pos": [
        7104,
        7168
      ]
    },
    {
      "content": "See [How Application Strings and Connection Strings Work][] for information on how to store credentials.",
      "pos": [
        7169,
        7273
      ]
    },
    {
      "pos": [
        7275,
        7356
      ],
      "content": "If you don't want to use SSL, either set <ph id=\"ph1\">`ssl=false`</ph> or omit the <ph id=\"ph2\">`ssl`</ph> parameter."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The non-SSL port is disabled by default for new caches.",
      "pos": [
        7359,
        7427
      ]
    },
    {
      "content": "For instructions on enabling the non-SSL port, see the Access Ports section in the [Configure a cache in Azure Redis Cache][] topic.",
      "pos": [
        7428,
        7560
      ]
    },
    {
      "content": "For more information on advanced connection configuration options, see [StackExchange.Redis configuration model][].",
      "pos": [
        7562,
        7677
      ]
    },
    {
      "pos": [
        7679,
        7778
      ],
      "content": "The cache endpoint and keys can be obtained from the <bpt id=\"p1\">**</bpt>Redis Cache<ept id=\"p1\">**</ept> blade for your cache instance."
    },
    {
      "content": "Cache properties",
      "pos": [
        7782,
        7798
      ]
    },
    {
      "content": "Manage keys",
      "pos": [
        7820,
        7831
      ]
    },
    {
      "pos": [
        7846,
        7987
      ],
      "content": "Once the connection is established, return a reference to the redis cache database by calling the <ph id=\"ph1\">`ConnectionMultiplexer.GetDatabase`</ph> method."
    },
    {
      "pos": [
        8113,
        8244
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The object returned from the <ph id=\"ph2\">`GetDatabase`</ph> method is a lightweight pass-through object and does not need to be stored."
    },
    {
      "content": "Now that you know how to connect to an Azure Redis Cache instance and return a reference to the cache database, let's take a look at working with the cache.",
      "pos": [
        8765,
        8921
      ]
    },
    {
      "content": "Add and retrieve objects from the cache",
      "pos": [
        8952,
        8991
      ]
    },
    {
      "pos": [
        8993,
        9092
      ],
      "content": "Items can be stored in and retrieved from a cache by using the <ph id=\"ph1\">`StringSet`</ph> and <ph id=\"ph2\">`StringGet`</ph> methods."
    },
    {
      "pos": [
        9222,
        9417
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Redis stores most data as Redis strings, but these strings can contain many types of data, including serialized binary data, which can be used when storing .NET objects in the cache."
    },
    {
      "content": "When calling <ph id=\"ph1\">`StringGet`</ph>, if the object exists, it is returned, and if it does not, null is returned.",
      "pos": [
        9419,
        9520
      ]
    },
    {
      "content": "In this case you can retrieve the value from the desired data source and store it in the cache for subsequent use.",
      "pos": [
        9521,
        9635
      ]
    },
    {
      "content": "This is known as the cache-aside pattern.",
      "pos": [
        9636,
        9677
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Azure Redis Cache can cache .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.",
      "pos": [
        9975,
        10123
      ]
    },
    {
      "content": "This is the responsibility of the application developer, and gives the developer flexibility in the choice of the serializer.",
      "pos": [
        10124,
        10249
      ]
    },
    {
      "content": "For more information, see [Work with .NET objects in the cache][].",
      "pos": [
        10250,
        10316
      ]
    },
    {
      "content": "Specify the expiration of an item in the cache",
      "pos": [
        10355,
        10401
      ]
    },
    {
      "pos": [
        10403,
        10498
      ],
      "content": "To specify the expiration of an item in the cache, use the <ph id=\"ph1\">`TimeSpan`</ph> parameter of <ph id=\"ph2\">`StringSet`</ph>."
    },
    {
      "content": "Store ASP.NET session state in the cache",
      "pos": [
        10599,
        10639
      ]
    },
    {
      "content": "Azure Redis Cache provides a session state provider that you can use to store your session state in a cache rather than in-memory or in a SQL Server database.",
      "pos": [
        10641,
        10799
      ]
    },
    {
      "content": "To use the caching session",
      "pos": [
        10800,
        10826
      ]
    },
    {
      "content": "state provider, first configure your cache, and then configure your ASP.NET application for cache using the Redis Cache Session State NuGet package.",
      "pos": [
        10827,
        10975
      ]
    },
    {
      "pos": [
        10977,
        11165
      ],
      "content": "To configure a client application in Visual Studio using the Redis Cache Session State NuGet package, right-click the project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and choose <bpt id=\"p2\">**</bpt>Manage NuGet Packages<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Manage NuGet packages",
      "pos": [
        11170,
        11191
      ]
    },
    {
      "pos": [
        11205,
        11327
      ],
      "content": "Type <bpt id=\"p1\">**</bpt>RedisSessionStateProvider<ept id=\"p1\">**</ept> into the <bpt id=\"p2\">**</bpt>Search Online<ept id=\"p2\">**</ept> text box, select it from the results, and click <bpt id=\"p3\">**</bpt>Install<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Redis Cache Session State NuGet Package",
      "pos": [
        11331,
        11370
      ]
    },
    {
      "content": "The NuGet package downloads and adds the required assembly references and adds the following adds the following section into your web.config file that contains the required configuration for your ASP.NET application to use the Redis Cache Session State Provider.",
      "pos": [
        11392,
        11654
      ]
    },
    {
      "content": "The commented section provides an example of the attributes and sample settings for them.",
      "pos": [
        12453,
        12542
      ]
    },
    {
      "content": "Configure the attributes with the values from your cache blade on the preview portal, and configure the other values as desired.",
      "pos": [
        12544,
        12672
      ]
    },
    {
      "pos": [
        13505,
        13575
      ],
      "content": "Be sure to comment out the standard <bpt id=\"p1\">**</bpt>InProc<ept id=\"p1\">**</ept> session state provider."
    },
    {
      "content": "For more information about configuring these settings and using the Azure Redis Session State Provider, see [Azure Redis Session State Provider][].",
      "pos": [
        13949,
        14096
      ]
    },
    {
      "content": "Next Steps",
      "pos": [
        14127,
        14137
      ]
    },
    {
      "content": "Now that you've learned the basics of Azure Redis Cache,",
      "pos": [
        14139,
        14195
      ]
    },
    {
      "content": "follow these links to learn how to do more complex caching tasks.",
      "pos": [
        14196,
        14261
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Enable cache diagnostics<ept id=\"p1\">](cache-how-to-monitor.md#enable-cache-diagnostics)</ept> so you can [cache-how-to-monitor.md) the health of your cache.",
      "pos": [
        14267,
        14406
      ]
    },
    {
      "content": "You can view the metrics in the preview portal and you can also <bpt id=\"p1\">[</bpt>download and review<ept id=\"p1\">](https://github.com/rustd/RedisSamples/tree/master/CustomMonitoring)</ept> them using the tools of your choice.",
      "pos": [
        14407,
        14597
      ]
    },
    {
      "content": "Check out the [StackExchange.Redis cache client documentation][].",
      "pos": [
        14602,
        14667
      ]
    },
    {
      "content": "Azure Redis Cache can be accessed from many Redis clients and development languages.",
      "pos": [
        14676,
        14760
      ]
    },
    {
      "content": "For more information, see [http://redis.io/clients][] and [Develop in other languages for Azure Redis Cache][].",
      "pos": [
        14761,
        14872
      ]
    },
    {
      "content": "Azure Redis Cache can also be used with services such as Redsmin.",
      "pos": [
        14881,
        14946
      ]
    },
    {
      "content": "For more information, see  [How to retrieve an Azure Redis connection string and use it with Redsmin][].",
      "pos": [
        14947,
        15051
      ]
    },
    {
      "content": "See the [redis][] documentation and read about [redis data types][] and [a fifteen minute introduction to Redis data types][].",
      "pos": [
        15056,
        15182
      ]
    },
    {
      "content": "See the MSDN Reference for [Azure Redis Cache][].",
      "pos": [
        15187,
        15236
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"How to Use Azure Redis Cache\" \n    description=\"Learn how to improve the performance of your Azure applications with Azure Redis Cache\" \n    services=\"redis-cache\" \n    documentationCenter=\"\" \n    authors=\"steved0x\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"cache\" \n    ms.workload=\"tbd\" \n    ms.tgt_pltfrm=\"cache-redis\" \n    ms.devlang=\"dotnet\" \n    ms.topic=\"hero-article\" \n    ms.date=\"08/25/2015\" \n    ms.author=\"sdanie\"/>\n\n# How to Use Azure Redis Cache\n\nThis guide shows you how to get started using \n**Azure Redis Cache**. The samples are written in C\\# code and\nuse the [StackExchange.Redis][] client. The scenarios covered include **creating and configuring a cache**, **configuring cache clients**, **adding and removing objects from the cache**, and **storing ASP.NET session state in the cache**. For more\ninformation on using Azure Redis Cache, refer to the [Next Steps][] section.\n\n<a name=\"what-is\"></a>\n## What is Azure Redis Cache?\n\nMicrosoft Azure Redis Cache is based on the popular open source Redis Cache. It gives you access to a secure, dedicated Redis cache, managed by Microsoft. A cache created using Azure Redis Cache is accessible from any application within Microsoft Azure.\n\nMicrosoft Azure Redis Cache is available in two tiers:\n\n-   **Basic** – Single node. Multiple sizes up to 53 GB.\n-   **Standard** – Two-node Primary/Replica. Multiple sizes up to 53 GB. 99.9% SLA.\n\nEach tier differs in terms of features and pricing. The features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details][].\n\nThis guide provides an overview of getting started with Azure Redis Cache. For more detailed information on these features that are beyond the scope of this getting started guide, see [Overview of Azure Redis Cache][].\n\n<a name=\"getting-started-cache-service\"></a>\n## Get Started with Azure Redis Cache\n\nGetting started with Azure Redis Cache is easy. To get started, you provision and configure a cache. Next, you configure the cache clients so they can access the cache. Once the cache clients are configured, you can begin working with them.\n\n-   [Create the cache][]\n-   [Configure the cache clients][]\n\n<a name=\"create-cache\"></a>\n## Create a cache\n\nTo create a cache, first sign in to the [Azure preview portal][], and click **New**, **Data + Storage**, **Redis Cache**.\n\n![New cache][NewCacheMenu]\n\n>[AZURE.NOTE] If you don't have an Azure account, you can create a free trial account in just a couple of minutes. For details, see [Azure Free Trial][].\n\nIn the **New Redis Cache** blade, specify the desired configuration for the cache.\n\n![Create cache][CacheCreate]\n\nIn **Dns name**, enter a subdomain name to use for the cache endpoint. The endpoint must be a string between six and twenty characters, contain only lowercase numbers and letters, and must start with a letter.\n\nUse **Pricing Tier** to select the desired cache size and features. **Basic** caches have a single node with multiple sizes up to 53 GB. **Standard** caches have a two node primary/replica configuration with a 99.9% SLA, and multiple sizes up to 53 GB.\n\nIn **Resource group**, select or create a resource group for your cache.\n\n>[AZURE.NOTE] For more information, see [Using Resource groups to manage your Azure resources][]. \n\nFor **Subscription**, select the Azure subscription that you want to use for the cache. If your account has only one subscription, it will be automatically selected and the **Subscription** drop-down will not be displayed.\n\nUse **Location** to specify the geographic location in which your cache is hosted. For the best performance, Microsoft strongly recommends that you create the cache in the same region as the cache client application.\n\nOnce the new cache options are configured, click **Create**. It can take a few minutes for the cache to be created. To check the status, you can monitor the progress on the startboard. After the cache has been created, your new cache has a **Running** status and is ready for use with default settings.\n\n![Cache created][CacheCreated]\n\nOnce your cache is created, you can access it from the **Browse** blade. \n\n![Browse blade][BrowseCaches]\n\nClick **Redis Caches** to view your caches.\n\n![Caches][Caches]\n\n<a name=\"NuGet\"></a>\n## Configure the cache clients\n\nA cache created using Azure Redis Cache is accessible from any Azure application. .NET applications developed in Visual Studio can use the **StackExchange.Redis** cache client, which can be configured using a NuGet package that simplifies the configuration of cache client applications. \n\n>[AZURE.NOTE] For more information, see the [StackExchange.Redis][] github page and  the [StackExchange.Redis cache client documentation][].\n\nTo configure a client application in Visual Studio using the StackExchange.Redis NuGet package, right-click the project in **Solution Explorer** and choose **Manage NuGet Packages**. \n\n![Manage NuGet packages][NuGetMenu]\n\nType **StackExchange.Redis** or **StackExchange.Redis.StrongName** into the **Search Online** text box, select the desired version from the results, and click **Install**.\n\n>[AZURE.NOTE] If you prefer to use a strong-named version of the **StackExchange.Redis** client library, choose **StackExchange.Redis.StrongName**; otherwise choose **StackExchange.Redis**.\n\n![StackExchange.Redis NuGet package][StackExchangeNuget]\n\nThe NuGet package downloads and adds the required assembly references for your client application to access Azure Redis Cache with the StackExchange.Redis cache client.\n\nOnce your client project is configured for caching, you can use the techniques described in the following sections for working with your cache.\n\n<a name=\"working-with-caches\"></a>\n## Working with Caches\n\nThe steps in this section describe how to perform common tasks with Cache.\n\n-   [Connect to the cache][]\n-   [Add and retrieve objects from the cache][]\n-   [Store ASP.NET session state in the cache][]\n\n<a name=\"connect-to-cache\"></a>\n## Connect to the cache\n\nIn order to programmatically work with a cache, you need a reference to the cache. Add the following to the top of any file from which you want to use the StackExchange.Redis client to access an Azure Redis Cache:\n\n    using StackExchange.Redis;\n\n>[AZURE.NOTE] The StackExchange.Redis client requires .NET Framework 4 or higher.\n\nThe connection to the Azure Redis Cache is managed by the `ConnectionMultiplexer` class. This class is designed to be shared and reused throughout your client application, and does not need to be created on a per operation basis. \n\nTo connect to an Azure Redis Cache and be returned an instance of a connected `ConnectionMultiplexer`, call the static `Connect` method and pass in the cache endpoint and key like the following example. Use the Azure key generated from the preview portal as the password parameter.\n\n    ConnectionMultiplexer connection = ConnectionMultiplexer.Connect(\"contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...\");\n\n>[AZURE.IMPORTANT] Warning: Never store credentials in source code. To keep this sample simple, I’m showing them in the source code. See [How Application Strings and Connection Strings Work][] for information on how to store credentials.\n\nIf you don't want to use SSL, either set `ssl=false` or omit the `ssl` parameter.\n\n>[AZURE.NOTE] The non-SSL port is disabled by default for new caches. For instructions on enabling the non-SSL port, see the Access Ports section in the [Configure a cache in Azure Redis Cache][] topic.\n\nFor more information on advanced connection configuration options, see [StackExchange.Redis configuration model][].\n\nThe cache endpoint and keys can be obtained from the **Redis Cache** blade for your cache instance.\n\n![Cache properties][CacheProperties]\n\n![Manage keys][ManageKeys]\n\nOnce the connection is established, return a reference to the redis cache database by calling the `ConnectionMultiplexer.GetDatabase` method.\n\n    // connection refers to a previously configured ConnectionMultiplexer\n    IDatabase cache = connection.GetDatabase();\n\n>[AZURE.NOTE] The object returned from the `GetDatabase` method is a lightweight pass-through object and does not need to be stored.\n\n    ConnectionMultiplexer connection = ConnectionMultiplexer.Connect(\"contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...\");\n\n    IDatabase cache = connection.GetDatabase();\n\n    // Perform cache operations using the cache object...\n    // Simple put of integral data types into the cache\n    cache.StringSet(\"key1\", \"value\");\n    cache.StringSet(\"key2\", 25);\n\n    // Simple get of data types from the cache\n    string key1 = cache.StringGet(\"key1\");\n    int key2 = (int)cache.StringGet(\"key2\");\n\nNow that you know how to connect to an Azure Redis Cache instance and return a reference to the cache database, let's take a look at working with the cache.\n\n<a name=\"add-object\"></a>\n## Add and retrieve objects from the cache\n\nItems can be stored in and retrieved from a cache by using the `StringSet` and `StringGet` methods.\n\n    // If key1 exists, it is overwritten.\n    cache.StringSet(\"key1\", \"value1\");\n\n    string value = cache.StringGet(\"key1\");\n\n>[AZURE.NOTE] Redis stores most data as Redis strings, but these strings can contain many types of data, including serialized binary data, which can be used when storing .NET objects in the cache.\n\nWhen calling `StringGet`, if the object exists, it is returned, and if it does not, null is returned. In this case you can retrieve the value from the desired data source and store it in the cache for subsequent use. This is known as the cache-aside pattern.\n\n    string value = cache.StringGet(\"key1\");\n    if (value == null)\n    {\n        // The item keyed by \"key1\" is not in the cache. Obtain\n        // it from the desired data source and add it to the cache.\n        value = GetValueFromDataSource();\n\n        cache.StringSet(\"key1\", value);\n    }\n\n>[AZURE.NOTE] Azure Redis Cache can cache .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized. This is the responsibility of the application developer, and gives the developer flexibility in the choice of the serializer. For more information, see [Work with .NET objects in the cache][].\n\n<a name=\"specify-expiration\"></a>\n## Specify the expiration of an item in the cache\n\nTo specify the expiration of an item in the cache, use the `TimeSpan` parameter of `StringSet`.\n\n    cache.StringSet(\"key1\", \"value1\", TimeSpan.FromMinutes(90));\n\n\n<a name=\"store-session\"></a>\n## Store ASP.NET session state in the cache\n\nAzure Redis Cache provides a session state provider that you can use to store your session state in a cache rather than in-memory or in a SQL Server database. To use the caching session\nstate provider, first configure your cache, and then configure your ASP.NET application for cache using the Redis Cache Session State NuGet package.\n\nTo configure a client application in Visual Studio using the Redis Cache Session State NuGet package, right-click the project in **Solution Explorer** and choose **Manage NuGet Packages**. \n\n![Manage NuGet packages][NuGetMenu]\n\nType **RedisSessionStateProvider** into the **Search Online** text box, select it from the results, and click **Install**.\n\n![Redis Cache Session State NuGet Package][SessionStateNuGet]\n\nThe NuGet package downloads and adds the required assembly references and adds the following adds the following section into your web.config file that contains the required configuration for your ASP.NET application to use the Redis Cache Session State Provider.\n\n    <sessionState mode=\"Custom\" customProvider=\"MySessionStateStore\">\n      <providers>\n        <!--\n          <add name=\"MySessionStateStore\" \n            host = \"127.0.0.1\" [String]\n            port = \"\" [number]\n            accessKey = \"\" [String]\n            ssl = \"false\" [true|false]\n            throwOnError = \"true\" [true|false]\n            retryTimeoutInMilliseconds = \"0\" [number]\n            databaseId = \"0\" [number]\n            applicationName = \"\" [String]\n            connectionTimeoutInMilliseconds = \"5000\" [number]\n            operationTimeoutInMilliseconds = \"5000\" [number]\n          />\n        -->\n        <add name=\"MySessionStateStore\" type=\"Microsoft.Web.Redis.RedisSessionStateProvider\" host=\"127.0.0.1\" accessKey=\"\" ssl=\"false\" />\n      </providers>\n    </sessionState>\n\nThe commented section provides an example of the attributes and sample settings for them.\n\nConfigure the attributes with the values from your cache blade on the preview portal, and configure the other values as desired.\n\n    <sessionState mode=\"Custom\" customProvider=\"MySessionStateStore\">\n      <providers>\n        <!--\n          <add name=\"MySessionStateStore\" \n            host = \"127.0.0.1\" [String]\n            port = \"\" [number]\n            accessKey = \"\" [String]\n            ssl = \"false\" [true|false]\n            throwOnError = \"true\" [true|false]\n            retryTimeoutInMilliseconds = \"0\" [number]\n            databaseId = \"0\" [number]\n            applicationName = \"\" [String]\n            connectionTimeoutInMilliseconds = \"5000\" [number]\n            operationTimeoutInMilliseconds = \"5000\" [number]\n          />\n        -->\n        <add name=\"MySessionStateStore\" type=\"Microsoft.Web.Redis.RedisSessionStateProvider\" host=\"contoso5.redis.cache.windows.net\" \n        accessKey=\"...\" ssl=\"true\" />\n      </providers>\n    </sessionState>\n\nBe sure to comment out the standard **InProc** session state provider.\n\n    <!-- <sessionState mode=\"InProc\" customProvider=\"DefaultSessionProvider\">\n      <providers>\n        <add name=\"DefaultSessionProvider\" type=\"System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35\" connectionStringName=\"DefaultConnection\" />\n      </providers>\n    </sessionState> -->\n\nFor more information about configuring these settings and using the Azure Redis Session State Provider, see [Azure Redis Session State Provider][].\n\n<a name=\"next-steps\"></a>\n## Next Steps\n\nNow that you've learned the basics of Azure Redis Cache,\nfollow these links to learn how to do more complex caching tasks.\n\n-   [Enable cache diagnostics](cache-how-to-monitor.md#enable-cache-diagnostics) so you can [cache-how-to-monitor.md) the health of your cache. You can view the metrics in the preview portal and you can also [download and review](https://github.com/rustd/RedisSamples/tree/master/CustomMonitoring) them using the tools of your choice.\n-   Check out the [StackExchange.Redis cache client documentation][].\n    -   Azure Redis Cache can be accessed from many Redis clients and development languages. For more information, see [http://redis.io/clients][] and [Develop in other languages for Azure Redis Cache][].\n    -   Azure Redis Cache can also be used with services such as Redsmin. For more information, see  [How to retrieve an Azure Redis connection string and use it with Redsmin][].\n-   See the [redis][] documentation and read about [redis data types][] and [a fifteen minute introduction to Redis data types][].\n-   See the MSDN Reference for [Azure Redis Cache][]. \n\n\n<!-- INTRA-TOPIC LINKS -->\n[Next Steps]: #next-steps\n[Introduction to Azure Redis Cache (Video)]: #video\n[What is Azure Redis Cache?]: #what-is\n[Create an Azure Cache]: #create-cache\n[Which type of caching is right for me?]: #choosing-cache\n[Prepare Your Visual Studio Project to Use Azure Caching]: #prepare-vs\n[Configure Your Application to Use Caching]: #configure-app\n[Get Started with Azure Redis Cache]: #getting-started-cache-service\n[Create the cache]: #create-cache\n[Configure the cache]: #enable-caching\n[Configure the cache clients]: #NuGet\n[Working with Caches]: #working-with-caches\n[Connect to the cache]: #connect-to-cache\n[Add and retrieve objects from the cache]: #add-object\n[Specify the expiration of an object in the cache]: #specify-expiration\n[Store ASP.NET session state in the cache]: #store-session\n\n  \n<!-- IMAGES -->\n[NewCacheMenu]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-new-cache-menu.png\n\n[CacheCreate]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-cache-create.png\n\n[StackExchangeNuget]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-stackexchange-redis.png\n\n[NuGetMenu]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-manage-nuget-menu.png\n\n[CacheProperties]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-properties.png\n\n[ManageKeys]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-manage-keys.png\n\n[SessionStateNuGet]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-session-state-provider.png\n\n[BrowseCaches]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-browse-caches.png\n\n[Caches]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-caches.png\n\n[CacheCreated]: ./media/cache-dotnet-how-to-use-azure-redis-cache/redis-cache-cache-created.png\n\n\n\n\n   \n<!-- LINKS -->\n[http://redis.io/clients]: http://redis.io/clients\n[Develop in other languages for Azure Redis Cache]: http://msdn.microsoft.com/library/azure/dn690470.aspx\n[How to retrieve an Azure Redis connection string and use it with Redsmin]: https://redsmin.uservoice.com/knowledgebase/articles/485711-how-to-connect-redsmin-to-azure-redis-cache\n[Azure Redis Session State Provider]: http://go.microsoft.com/fwlink/?LinkId=398249\n[How to: Configure a Cache Client Programmatically]: http://msdn.microsoft.com/library/windowsazure/gg618003.aspx\n[Session State Provider for Azure Cache]: http://go.microsoft.com/fwlink/?LinkId=320835\n[Azure AppFabric Cache: Caching Session State]: http://www.microsoft.com/showcase/details.aspx?uuid=87c833e9-97a9-42b2-8bb1-7601f9b5ca20\n[Output Cache Provider for Azure Cache]: http://go.microsoft.com/fwlink/?LinkId=320837\n[Azure Shared Caching]: http://msdn.microsoft.com/library/windowsazure/gg278356.aspx\n[Team Blog]: http://blogs.msdn.com/b/windowsazure/\n[Azure Caching]: http://www.microsoft.com/showcase/Search.aspx?phrase=azure+caching\n[How to Configure Virtual Machine Sizes]: http://go.microsoft.com/fwlink/?LinkId=164387\n[Azure Caching Capacity Planning Considerations]: http://go.microsoft.com/fwlink/?LinkId=320167\n[Azure Caching]: http://go.microsoft.com/fwlink/?LinkId=252658\n[How to: Set the Cacheability of an ASP.NET Page Declaratively]: http://msdn.microsoft.com/library/zd1ysf1y.aspx\n[How to: Set a Page's Cacheability Programmatically]: http://msdn.microsoft.com/library/z852zf6b.aspx\n[Configure a cache in Azure Redis Cache]: http://msdn.microsoft.com/library/azure/dn793612.aspx\n\n[StackExchange.Redis configuration model]: http://github.com/StackExchange/StackExchange.Redis/blob/master/Docs/Configuration.md\n\n[Work with .NET objects in the cache]: http://msdn.microsoft.com/library/dn690521.aspx#Objects\n\n\n[NuGet Package Manager Installation]: http://go.microsoft.com/fwlink/?LinkId=240311\n[Cache Pricing Details]: http://www.windowsazure.com/pricing/details/cache/\n[Azure preview portal]: https://portal.azure.com/\n\n[Overview of Azure Redis Cache]: http://go.microsoft.com/fwlink/?LinkId=320830\n[Azure Redis Cache]: http://go.microsoft.com/fwlink/?LinkId=398247\n\n[Migrate to Azure Redis Cache]: http://go.microsoft.com/fwlink/?LinkId=317347\n[Azure Redis Cache Samples]: http://go.microsoft.com/fwlink/?LinkId=320840\n[Using Resource groups to manage your Azure resources]: http://azure.microsoft.com/documentation/articles/resource-group-overview/\n\n[StackExchange.Redis]: http://github.com/StackExchange/StackExchange.Redis\n[StackExchange.Redis cache client documentation]: http://github.com/StackExchange/StackExchange.Redis#documentation\n\n[Redis]: http://redis.io/documentation\n[Redis data types]: http://redis.io/topics/data-types\n[a fifteen minute introduction to Redis data types]: http://redis.io/topics/data-types-intro\n\n[How Application Strings and Connection Strings Work]: http://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/\n\n[Azure Free Trial]: http://azure.microsoft.com/pricing/free-trial/?WT.mc_id=redis_cache_hero\n"
}