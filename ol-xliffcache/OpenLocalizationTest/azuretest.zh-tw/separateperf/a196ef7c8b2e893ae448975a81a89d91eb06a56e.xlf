<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="md" source-language="en-US" target-language="zh-tw">
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve">
          <source>Use Azure Premium Storage with SQL Server on Virtual Machines</source>
          <target state="new">Use Azure Premium Storage with SQL Server on Virtual Machines</target>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>This article provides guidance for how to start using Azure Premium Storage with SQL Server running on Azure Virtual Machines.</source>
          <target state="new">This article provides guidance for how to start using Azure Premium Storage with SQL Server running on Azure Virtual Machines.</target>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>This includes examples of new deployments and migrations of existing deployments of SQL Server on IaaS.</source>
          <target state="new">This includes examples of new deployments and migrations of existing deployments of SQL Server on IaaS.</target>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>Use Azure Premium Storage with SQL Server on Virtual Machines</source>
          <target state="new">Use Azure Premium Storage with SQL Server on Virtual Machines</target>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>Overview</source>
          <target state="new">Overview</target>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source><bpt id="p1">[</bpt>Azure Premium Storage<ept id="p1">](../storage-premium-storage-preview-portal.md)</ept> is the next generation of storage that provides low latency and high throughput IO.</source>
          <target state="new"><bpt id="p1">[</bpt>Azure Premium Storage<ept id="p1">](../storage-premium-storage-preview-portal.md)</ept> is the next generation of storage that provides low latency and high throughput IO.</target>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>It works best for key IO intensive workloads, such as SQL Server on IaaS <bpt id="p1">[</bpt>Virtual Machines<ept id="p1">](http://azure.microsoft.com/services/virtual-machines/)</ept>.</source>
          <target state="new">It works best for key IO intensive workloads, such as SQL Server on IaaS <bpt id="p1">[</bpt>Virtual Machines<ept id="p1">](http://azure.microsoft.com/services/virtual-machines/)</ept>.</target>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>This article provides planning and guidance for migrating a Virtual Machine running SQL Server to use Premium Storage.</source>
          <target state="new">This article provides planning and guidance for migrating a Virtual Machine running SQL Server to use Premium Storage.</target>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>This includes Azure infrastructure (networking, storage) and guest Windows VM steps.</source>
          <target state="new">This includes Azure infrastructure (networking, storage) and guest Windows VM steps.</target>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>The example in the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept> shows a full comphrensive end to end migration of how to move larger VMs to take advantage of improved local SSD storage with PowerShell.</source>
          <target state="new">The example in the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept> shows a full comphrensive end to end migration of how to move larger VMs to take advantage of improved local SSD storage with PowerShell.</target>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>It is important to understand the end-to-end process of utilizing Azure Premium Storage with SQL Server on IAAS VMs.</source>
          <target state="new">It is important to understand the end-to-end process of utilizing Azure Premium Storage with SQL Server on IAAS VMs.</target>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>This includes:</source>
          <target state="new">This includes:</target>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source>Identification of the prerequisites to use Premium Storage.</source>
          <target state="new">Identification of the prerequisites to use Premium Storage.</target>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>Examples of deploying SQL Server on IaaS to Premium Storage for new deployments.</source>
          <target state="new">Examples of deploying SQL Server on IaaS to Premium Storage for new deployments.</target>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>Examples of migrating existing deployments, both stand-alone servers and deployments using SQL AlwaysOn Availability Groups.</source>
          <target state="new">Examples of migrating existing deployments, both stand-alone servers and deployments using SQL AlwaysOn Availability Groups.</target>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>Possible migration approaches.</source>
          <target state="new">Possible migration approaches.</target>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>Full end-to-end example showing Azure, Windows, and SQL Server steps for  the migration of an existing AlwaysOn implementation.</source>
          <target state="new">Full end-to-end example showing Azure, Windows, and SQL Server steps for  the migration of an existing AlwaysOn implementation.</target>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>For more background information on SQL Server in Azure Virtual Machines, see <bpt id="p1">[</bpt>SQL Server in Azure Virtual Machines<ept id="p1">](virtual-machines-sql-server-infrastructure-services.md)</ept>.</source>
          <target state="new">For more background information on SQL Server in Azure Virtual Machines, see <bpt id="p1">[</bpt>SQL Server in Azure Virtual Machines<ept id="p1">](virtual-machines-sql-server-infrastructure-services.md)</ept>.</target>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Author:<ept id="p1">**</ept> Daniel Sol</source>
          <target state="new"><bpt id="p1">**</bpt>Author:<ept id="p1">**</ept> Daniel Sol</target>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Technical Reviewers:<ept id="p1">**</ept> Luis Carlos Vargas Herring, Sanjay Mishra, Pravin Mital, Juergen Thomas, Gonzalo Ruiz.</source>
          <target state="new"><bpt id="p1">**</bpt>Technical Reviewers:<ept id="p1">**</ept> Luis Carlos Vargas Herring, Sanjay Mishra, Pravin Mital, Juergen Thomas, Gonzalo Ruiz.</target>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>Prerequisites for Premium Storage</source>
          <target state="new">Prerequisites for Premium Storage</target>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>There are several prerequisites for using Premium Storage.</source>
          <target state="new">There are several prerequisites for using Premium Storage.</target>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>Machine Size</source>
          <target state="new">Machine Size</target>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>For using Premium Storage you will need to use DS series Virtual Machines (VM).</source>
          <target state="new">For using Premium Storage you will need to use DS series Virtual Machines (VM).</target>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>If you have not used DS Series machines in your cloud service before, you must delete the existing VM, keep the attached disks, and then create a new cloud service before recreating  the VM as DS* role size.</source>
          <target state="new">If you have not used DS Series machines in your cloud service before, you must delete the existing VM, keep the attached disks, and then create a new cloud service before recreating  the VM as DS* role size.</target>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>For more information on Virtual Machine sizes, see <bpt id="p1">[</bpt>Virtual Machine and Cloud Service Sizes for Azure<ept id="p1">](virtual-machines-size-specs.md)</ept>.</source>
          <target state="new">For more information on Virtual Machine sizes, see <bpt id="p1">[</bpt>Virtual Machine and Cloud Service Sizes for Azure<ept id="p1">](virtual-machines-size-specs.md)</ept>.</target>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>Cloud Services</source>
          <target state="new">Cloud Services</target>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source>You can only use DS* VMs with Premium Storage when they are created in a new cloud service.</source>
          <target state="new">You can only use DS* VMs with Premium Storage when they are created in a new cloud service.</target>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>If you are using SQL Server AlwaysOn in Azure, the AlwaysOn Listener will refer to the Azure Internal or External Load Balancer IP address that is associated with a cloud service.</source>
          <target state="new">If you are using SQL Server AlwaysOn in Azure, the AlwaysOn Listener will refer to the Azure Internal or External Load Balancer IP address that is associated with a cloud service.</target>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>This article focuses on how to migrate while maintaining availability in this scenario.</source>
          <target state="new">This article focuses on how to migrate while maintaining availability in this scenario.</target>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> A DS* Series must be the first VM that is deployed to the new Cloud Service.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> A DS* Series must be the first VM that is deployed to the new Cloud Service.</target>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>Regional VNETS</source>
          <target state="new">Regional VNETS</target>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>For  DS* VMs you must configure the Virtual Network (VNET) hosting your VMs to be regional.</source>
          <target state="new">For  DS* VMs you must configure the Virtual Network (VNET) hosting your VMs to be regional.</target>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>This “widens” the VNET is to allow the larger VMs to be provisioned in other clusters and allow communication between them.</source>
          <target state="new">This “widens” the VNET is to allow the larger VMs to be provisioned in other clusters and allow communication between them.</target>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>In the following screenshot, the highlighted Location shows regional VNETs, whereas the first result shows a “narrow” VNET.</source>
          <target state="new">In the following screenshot, the highlighted Location shows regional VNETs, whereas the first result shows a “narrow” VNET.</target>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>![RegionalVNET][1]</source>
          <target state="new">![RegionalVNET][1]</target>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>You can raise a Microsoft support ticket to migrate to a regional VNET, Microsoft will make a change, then to complete the migration to regional VNETs, change the property AffinityGroup in the network configuration.</source>
          <target state="new">You can raise a Microsoft support ticket to migrate to a regional VNET, Microsoft will make a change, then to complete the migration to regional VNETs, change the property AffinityGroup in the network configuration.</target>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>First export the Network Configuration in PowerShell, and then replace the <bpt id="p1">**</bpt>AffinityGroup<ept id="p1">**</ept> property in the <bpt id="p2">**</bpt>VirtualNetworkSite<ept id="p2">**</ept> element with a <bpt id="p3">**</bpt>Location<ept id="p3">**</ept> property.</source>
          <target state="new">First export the Network Configuration in PowerShell, and then replace the <bpt id="p1">**</bpt>AffinityGroup<ept id="p1">**</ept> property in the <bpt id="p2">**</bpt>VirtualNetworkSite<ept id="p2">**</ept> element with a <bpt id="p3">**</bpt>Location<ept id="p3">**</ept> property.</target>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>Specify <ph id="ph1">`Location = XXXX`</ph> where <ph id="ph2">`XXXX`</ph> is an Azure region.</source>
          <target state="new">Specify <ph id="ph1">`Location = XXXX`</ph> where <ph id="ph2">`XXXX`</ph> is an Azure region.</target>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>Then import the new configuration.</source>
          <target state="new">Then import the new configuration.</target>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>For example, considering the following VNET configuration:</source>
          <target state="new">For example, considering the following VNET configuration:</target>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>To move this to a regional VNET in West Europe, change the configuration to the following:</source>
          <target state="new">To move this to a regional VNET in West Europe, change the configuration to the following:</target>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>Storage Accounts</source>
          <target state="new">Storage Accounts</target>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>You will need to create a new storage account that is configured for Premium Storage.</source>
          <target state="new">You will need to create a new storage account that is configured for Premium Storage.</target>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>Note that the use of Premium Storage is set at the storage account, not on individual VHDs, however when using a DS* Series VM you can attach VHD’s from Premium and Standard Storage accounts.</source>
          <target state="new">Note that the use of Premium Storage is set at the storage account, not on individual VHDs, however when using a DS* Series VM you can attach VHD’s from Premium and Standard Storage accounts.</target>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>You may consider this if you do not want to place the OS VHD on to the Premium Storage account.</source>
          <target state="new">You may consider this if you do not want to place the OS VHD on to the Premium Storage account.</target>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>The following <bpt id="p1">**</bpt>New-AzureStorageAccountPowerShell<ept id="p1">**</ept> command with the "Premium_LRS" <bpt id="p2">**</bpt>Type<ept id="p2">**</ept> creates a Premium Storage Account:</source>
          <target state="new">The following <bpt id="p1">**</bpt>New-AzureStorageAccountPowerShell<ept id="p1">**</ept> command with the "Premium_LRS" <bpt id="p2">**</bpt>Type<ept id="p2">**</ept> creates a Premium Storage Account:</target>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>VHDs Cache Settings</source>
          <target state="new">VHDs Cache Settings</target>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>The main difference between creating disks that are part of a Premium Storage account is the disk cache setting.</source>
          <target state="new">The main difference between creating disks that are part of a Premium Storage account is the disk cache setting.</target>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>For SQL Server Data volume disks it is recommended that you use ‘<bpt id="p1">**</bpt>Read Caching<ept id="p1">**</ept>’.</source>
          <target state="new">For SQL Server Data volume disks it is recommended that you use ‘<bpt id="p1">**</bpt>Read Caching<ept id="p1">**</ept>’.</target>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>For Transaction log volumes, the disk cache setting should be set to ‘<bpt id="p1">**</bpt>None<ept id="p1">**</ept>’.</source>
          <target state="new">For Transaction log volumes, the disk cache setting should be set to ‘<bpt id="p1">**</bpt>None<ept id="p1">**</ept>’.</target>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>This is different from the recommendations for Standard Storage accounts.</source>
          <target state="new">This is different from the recommendations for Standard Storage accounts.</target>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>Once the VHDs have been attached, the cache setting cannot be altered.</source>
          <target state="new">Once the VHDs have been attached, the cache setting cannot be altered.</target>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>You would need to detach and reattach the VHD with an updated cahce setting.</source>
          <target state="new">You would need to detach and reattach the VHD with an updated cahce setting.</target>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>Windows Storage Spaces</source>
          <target state="new">Windows Storage Spaces</target>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>You can use <bpt id="p1">[</bpt>Windows Storage Spaces<ept id="p1">](https://technet.microsoft.com/library/hh831739.aspx)</ept> as you did with previous Standard Storage, this will allow you to migrate a VM that is already utilizing Storage Spaces.</source>
          <target state="new">You can use <bpt id="p1">[</bpt>Windows Storage Spaces<ept id="p1">](https://technet.microsoft.com/library/hh831739.aspx)</ept> as you did with previous Standard Storage, this will allow you to migrate a VM that is already utilizing Storage Spaces.</target>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source>The example in <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept> (step 9 and forward) demonstrates the Powershell code to extract and import a VM with multiple attached VHDs.</source>
          <target state="new">The example in <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept> (step 9 and forward) demonstrates the Powershell code to extract and import a VM with multiple attached VHDs.</target>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source>Storage Pools were used with Standard Azure storage account to enhance throughput and reduce latency.</source>
          <target state="new">Storage Pools were used with Standard Azure storage account to enhance throughput and reduce latency.</target>
        </trans-unit>
        <trans-unit id="159" translate="yes" xml:space="preserve">
          <source>You might find value in testing Storage Pools with Premium Storage for new deployments, but they do add additional complexity with storage setup.</source>
          <target state="new">You might find value in testing Storage Pools with Premium Storage for new deployments, but they do add additional complexity with storage setup.</target>
        </trans-unit>
        <trans-unit id="160" translate="yes" xml:space="preserve">
          <source>How to find which Azure Virtual Disks Map to Storage Pools</source>
          <target state="new">How to find which Azure Virtual Disks Map to Storage Pools</target>
        </trans-unit>
        <trans-unit id="161" translate="yes" xml:space="preserve">
          <source>As there are different cache setting recommendations for attached VHDs, you might decide to copy the VHDs to a Premium Storage account.</source>
          <target state="new">As there are different cache setting recommendations for attached VHDs, you might decide to copy the VHDs to a Premium Storage account.</target>
        </trans-unit>
        <trans-unit id="162" translate="yes" xml:space="preserve">
          <source>However, when you reattach them to the new DS series VM, you might need to alter the cache settings.</source>
          <target state="new">However, when you reattach them to the new DS series VM, you might need to alter the cache settings.</target>
        </trans-unit>
        <trans-unit id="163" translate="yes" xml:space="preserve">
          <source>It is simpler to apply the Premium Storage recommended cache settings when you have separate VHDs for the SQL Data files and log files (rather than a single VHD that contains both).</source>
          <target state="new">It is simpler to apply the Premium Storage recommended cache settings when you have separate VHDs for the SQL Data files and log files (rather than a single VHD that contains both).</target>
        </trans-unit>
        <trans-unit id="164" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> If you have SQL Server data and log files on the same volume, the caching option you choose depends on the IO access patterns for your database workloads.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> If you have SQL Server data and log files on the same volume, the caching option you choose depends on the IO access patterns for your database workloads.</target>
        </trans-unit>
        <trans-unit id="165" translate="yes" xml:space="preserve">
          <source>Only testing can demonstrate which caching option is best for this scenario.</source>
          <target state="new">Only testing can demonstrate which caching option is best for this scenario.</target>
        </trans-unit>
        <trans-unit id="166" translate="yes" xml:space="preserve">
          <source>However if you are using Windows Storage Spaces which are made up of multiple VHDs you will need to look at your original scripts to identify which attached VHDs are in what specific pool, so you can then set the cache settings accordingly for each disk.</source>
          <target state="new">However if you are using Windows Storage Spaces which are made up of multiple VHDs you will need to look at your original scripts to identify which attached VHDs are in what specific pool, so you can then set the cache settings accordingly for each disk.</target>
        </trans-unit>
        <trans-unit id="167" translate="yes" xml:space="preserve">
          <source>If you do not have original script available to show you which VHDs map to the storage pool, you can use the following steps to determine the disk/storage pool mapping.</source>
          <target state="new">If you do not have original script available to show you which VHDs map to the storage pool, you can use the following steps to determine the disk/storage pool mapping.</target>
        </trans-unit>
        <trans-unit id="168" translate="yes" xml:space="preserve">
          <source>For each disk, use the following steps:</source>
          <target state="new">For each disk, use the following steps:</target>
        </trans-unit>
        <trans-unit id="169" translate="yes" xml:space="preserve">
          <source>Get list of disks attached to VM with the <bpt id="p1">**</bpt>Get-AzureVM<ept id="p1">**</ept> command:</source>
          <target state="new">Get list of disks attached to VM with the <bpt id="p1">**</bpt>Get-AzureVM<ept id="p1">**</ept> command:</target>
        </trans-unit>
        <trans-unit id="170" translate="yes" xml:space="preserve">
          <source>Get-AzureVM -ServiceName</source>
          <target state="new">Get-AzureVM -ServiceName</target>
        </trans-unit>
        <trans-unit id="171" translate="yes" xml:space="preserve">
          <source>-Name</source>
          <target state="new">-Name</target>
        </trans-unit>
        <trans-unit id="172" translate="yes" xml:space="preserve">
          <source>| Get-AzureDataDisk</source>
          <target state="new">| Get-AzureDataDisk</target>
        </trans-unit>
        <trans-unit id="173" translate="yes" xml:space="preserve">
          <source>Note the Diskname and LUN.</source>
          <target state="new">Note the Diskname and LUN.</target>
        </trans-unit>
        <trans-unit id="174" translate="yes" xml:space="preserve">
          <source>![DisknameAndLUN][2]</source>
          <target state="new">![DisknameAndLUN][2]</target>
        </trans-unit>
        <trans-unit id="175" translate="yes" xml:space="preserve">
          <source>Remote desktop into the VM.</source>
          <target state="new">Remote desktop into the VM.</target>
        </trans-unit>
        <trans-unit id="176" translate="yes" xml:space="preserve">
          <source>Then go to <bpt id="p1">**</bpt>Computer Management<ept id="p1">**</ept> | <bpt id="p2">**</bpt>Device Manager<ept id="p2">**</ept> | <bpt id="p3">**</bpt>Disk Drives<ept id="p3">**</ept>.</source>
          <target state="new">Then go to <bpt id="p1">**</bpt>Computer Management<ept id="p1">**</ept> | <bpt id="p2">**</bpt>Device Manager<ept id="p2">**</ept> | <bpt id="p3">**</bpt>Disk Drives<ept id="p3">**</ept>.</target>
        </trans-unit>
        <trans-unit id="177" translate="yes" xml:space="preserve">
          <source>Look at the  properties of each of the ‘Microsoft Virtual Disks’</source>
          <target state="new">Look at the  properties of each of the ‘Microsoft Virtual Disks’</target>
        </trans-unit>
        <trans-unit id="178" translate="yes" xml:space="preserve">
          <source>![VirtualDiskProperties][3]</source>
          <target state="new">![VirtualDiskProperties][3]</target>
        </trans-unit>
        <trans-unit id="179" translate="yes" xml:space="preserve">
          <source>The LUN number here is a reference to the LUN number you specify when attaching the VHD to the VM.</source>
          <target state="new">The LUN number here is a reference to the LUN number you specify when attaching the VHD to the VM.</target>
        </trans-unit>
        <trans-unit id="180" translate="yes" xml:space="preserve">
          <source>For the ‘Microsoft Virtual Disk’ go to the <bpt id="p1">**</bpt>Details<ept id="p1">**</ept> tab, then in the <bpt id="p2">**</bpt>Property<ept id="p2">**</ept> list, go to <bpt id="p3">**</bpt>Driver Key<ept id="p3">**</ept>.</source>
          <target state="new">For the ‘Microsoft Virtual Disk’ go to the <bpt id="p1">**</bpt>Details<ept id="p1">**</ept> tab, then in the <bpt id="p2">**</bpt>Property<ept id="p2">**</ept> list, go to <bpt id="p3">**</bpt>Driver Key<ept id="p3">**</ept>.</target>
        </trans-unit>
        <trans-unit id="181" translate="yes" xml:space="preserve">
          <source>In the <bpt id="p1">**</bpt>Value<ept id="p1">**</ept>, note the <bpt id="p2">**</bpt>Offset<ept id="p2">**</ept>, which is 0002 in the following screenshot.</source>
          <target state="new">In the <bpt id="p1">**</bpt>Value<ept id="p1">**</ept>, note the <bpt id="p2">**</bpt>Offset<ept id="p2">**</ept>, which is 0002 in the following screenshot.</target>
        </trans-unit>
        <trans-unit id="182" translate="yes" xml:space="preserve">
          <source>The 0002 denotes the PhysicalDisk2 that the storage pool references.</source>
          <target state="new">The 0002 denotes the PhysicalDisk2 that the storage pool references.</target>
        </trans-unit>
        <trans-unit id="183" translate="yes" xml:space="preserve">
          <source>![VirtualDiskPropertyDetails][4]</source>
          <target state="new">![VirtualDiskPropertyDetails][4]</target>
        </trans-unit>
        <trans-unit id="184" translate="yes" xml:space="preserve">
          <source>For each storage pool dump out the associated disks:</source>
          <target state="new">For each storage pool dump out the associated disks:</target>
        </trans-unit>
        <trans-unit id="185" translate="yes" xml:space="preserve">
          <source>Get-StoragePool -FriendlyName AMS1pooldata | Get-PhysicalDisk</source>
          <target state="new">Get-StoragePool -FriendlyName AMS1pooldata | Get-PhysicalDisk</target>
        </trans-unit>
        <trans-unit id="186" translate="yes" xml:space="preserve">
          <source>![GetStoragePool][5]</source>
          <target state="new">![GetStoragePool][5]</target>
        </trans-unit>
        <trans-unit id="187" translate="yes" xml:space="preserve">
          <source>Now you can use this information to associate attached VHDs to Physical Disks in Storage Pools.</source>
          <target state="new">Now you can use this information to associate attached VHDs to Physical Disks in Storage Pools.</target>
        </trans-unit>
        <trans-unit id="188" translate="yes" xml:space="preserve">
          <source>Once you have mapped VHDs to Physical Disks in Storage Pools you can then detach and copy them over to a Premium Storage account, then attach them with the correct cache setting.</source>
          <target state="new">Once you have mapped VHDs to Physical Disks in Storage Pools you can then detach and copy them over to a Premium Storage account, then attach them with the correct cache setting.</target>
        </trans-unit>
        <trans-unit id="189" translate="yes" xml:space="preserve">
          <source>Please see the example in the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>, steps 8 through 12.</source>
          <target state="new">Please see the example in the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>, steps 8 through 12.</target>
        </trans-unit>
        <trans-unit id="190" translate="yes" xml:space="preserve">
          <source>These steps show how to extract a VM-attached VHD disk configuration to a CSV file, copy the VHDs, alter the disk configuration cache settings, and finally redeploy the VM as a DS series VM with all the attached disks.</source>
          <target state="new">These steps show how to extract a VM-attached VHD disk configuration to a CSV file, copy the VHDs, alter the disk configuration cache settings, and finally redeploy the VM as a DS series VM with all the attached disks.</target>
        </trans-unit>
        <trans-unit id="191" translate="yes" xml:space="preserve">
          <source>VM Storage Bandwidth and VHD Storage Throughput</source>
          <target state="new">VM Storage Bandwidth and VHD Storage Throughput</target>
        </trans-unit>
        <trans-unit id="192" translate="yes" xml:space="preserve">
          <source>The amount of storage performance depends on the DS* VM size specified and the VHD sizes.</source>
          <target state="new">The amount of storage performance depends on the DS* VM size specified and the VHD sizes.</target>
        </trans-unit>
        <trans-unit id="193" translate="yes" xml:space="preserve">
          <source>The VMs have different allowances for the number of VHDs that can be attached and the maximum bandwidth they will support (MB/s).</source>
          <target state="new">The VMs have different allowances for the number of VHDs that can be attached and the maximum bandwidth they will support (MB/s).</target>
        </trans-unit>
        <trans-unit id="194" translate="yes" xml:space="preserve">
          <source>For the specific bandwidth numbers, see <bpt id="p1">[</bpt>Virtual Machine and Cloud Service Sizes for Azure<ept id="p1">](virtual-machines-size-specs.md)</ept>.</source>
          <target state="new">For the specific bandwidth numbers, see <bpt id="p1">[</bpt>Virtual Machine and Cloud Service Sizes for Azure<ept id="p1">](virtual-machines-size-specs.md)</ept>.</target>
        </trans-unit>
        <trans-unit id="195" translate="yes" xml:space="preserve">
          <source>Increased IOPS are achieved with larger disk sizes.</source>
          <target state="new">Increased IOPS are achieved with larger disk sizes.</target>
        </trans-unit>
        <trans-unit id="196" translate="yes" xml:space="preserve">
          <source>You should consider this when you think about your migration path.</source>
          <target state="new">You should consider this when you think about your migration path.</target>
        </trans-unit>
        <trans-unit id="197" translate="yes" xml:space="preserve">
          <source>For details, <bpt id="p1">[</bpt>see the table for IOPS and Disk Types<ept id="p1">](../storage-premium-storage-preview-portal.md#scalability-and-performance-targets-when-using-premium-storage)</ept>.</source>
          <target state="new">For details, <bpt id="p1">[</bpt>see the table for IOPS and Disk Types<ept id="p1">](../storage-premium-storage-preview-portal.md#scalability-and-performance-targets-when-using-premium-storage)</ept>.</target>
        </trans-unit>
        <trans-unit id="198" translate="yes" xml:space="preserve">
          <source>Finally, consider that VMs have different maximum disk bandwidths they will support for all disks attached.</source>
          <target state="new">Finally, consider that VMs have different maximum disk bandwidths they will support for all disks attached.</target>
        </trans-unit>
        <trans-unit id="199" translate="yes" xml:space="preserve">
          <source>Under high load, you could saturate the maximum disk bandwidth available for that VM role size.</source>
          <target state="new">Under high load, you could saturate the maximum disk bandwidth available for that VM role size.</target>
        </trans-unit>
        <trans-unit id="200" translate="yes" xml:space="preserve">
          <source>For example a Standard_DS14 will support up to 512MB/s; therefore, with three P30 disks you could saturate the disk bandwidth of the VM.</source>
          <target state="new">For example a Standard_DS14 will support up to 512MB/s; therefore, with three P30 disks you could saturate the disk bandwidth of the VM.</target>
        </trans-unit>
        <trans-unit id="201" translate="yes" xml:space="preserve">
          <source>But in this example, the throughput limit could be exceeded depending on the mix of read and write IOs.</source>
          <target state="new">But in this example, the throughput limit could be exceeded depending on the mix of read and write IOs.</target>
        </trans-unit>
        <trans-unit id="202" translate="yes" xml:space="preserve">
          <source>New Deployments</source>
          <target state="new">New Deployments</target>
        </trans-unit>
        <trans-unit id="203" translate="yes" xml:space="preserve">
          <source>The next two sections demonstrate how you can deploy SQL Server VMs to Premium Storage.</source>
          <target state="new">The next two sections demonstrate how you can deploy SQL Server VMs to Premium Storage.</target>
        </trans-unit>
        <trans-unit id="204" translate="yes" xml:space="preserve">
          <source>As mentioned before, you do not necessarily need to place the OS disk onto Premium storage.</source>
          <target state="new">As mentioned before, you do not necessarily need to place the OS disk onto Premium storage.</target>
        </trans-unit>
        <trans-unit id="205" translate="yes" xml:space="preserve">
          <source>You might choose to do this if you are intending to place any intensive IO workloads on the OS VHD.</source>
          <target state="new">You might choose to do this if you are intending to place any intensive IO workloads on the OS VHD.</target>
        </trans-unit>
        <trans-unit id="206" translate="yes" xml:space="preserve">
          <source>The first example demonstrates utilizing existing Azure Gallery Images.</source>
          <target state="new">The first example demonstrates utilizing existing Azure Gallery Images.</target>
        </trans-unit>
        <trans-unit id="207" translate="yes" xml:space="preserve">
          <source>The second example shows how to use a custom VM image that you have in an existing Standard storage account.</source>
          <target state="new">The second example shows how to use a custom VM image that you have in an existing Standard storage account.</target>
        </trans-unit>
        <trans-unit id="208" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> These examples assume that you have already created a Regional VNET.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> These examples assume that you have already created a Regional VNET.</target>
        </trans-unit>
        <trans-unit id="209" translate="yes" xml:space="preserve">
          <source>Create a new VM with Premium Storage with Gallery Image</source>
          <target state="new">Create a new VM with Premium Storage with Gallery Image</target>
        </trans-unit>
        <trans-unit id="210" translate="yes" xml:space="preserve">
          <source>The example below shows how to place the OS VHD onto premium storage and attach Premium Storage VHDs.</source>
          <target state="new">The example below shows how to place the OS VHD onto premium storage and attach Premium Storage VHDs.</target>
        </trans-unit>
        <trans-unit id="211" translate="yes" xml:space="preserve">
          <source>However, you can also place the OS disk in a Standard Storage account and then attach VHDs that reside in a Premium Storage account.</source>
          <target state="new">However, you can also place the OS disk in a Standard Storage account and then attach VHDs that reside in a Premium Storage account.</target>
        </trans-unit>
        <trans-unit id="212" translate="yes" xml:space="preserve">
          <source>Both scenarios are demonstrated.</source>
          <target state="new">Both scenarios are demonstrated.</target>
        </trans-unit>
        <trans-unit id="213" translate="yes" xml:space="preserve">
          <source>Step 1: Create a Premium Storage Account</source>
          <target state="new">Step 1: Create a Premium Storage Account</target>
        </trans-unit>
        <trans-unit id="214" translate="yes" xml:space="preserve">
          <source>Step 2: Create a New Cloud Service</source>
          <target state="new">Step 2: Create a New Cloud Service</target>
        </trans-unit>
        <trans-unit id="215" translate="yes" xml:space="preserve">
          <source>Step 3: Reserve a Cloud Service VIP (Optional)</source>
          <target state="new">Step 3: Reserve a Cloud Service VIP (Optional)</target>
        </trans-unit>
        <trans-unit id="216" translate="yes" xml:space="preserve">
          <source>Step 4: Create a VM Container</source>
          <target state="new">Step 4: Create a VM Container</target>
        </trans-unit>
        <trans-unit id="217" translate="yes" xml:space="preserve">
          <source>Step 5: Placing OS VHD on Standard or Premium Storage</source>
          <target state="new">Step 5: Placing OS VHD on Standard or Premium Storage</target>
        </trans-unit>
        <trans-unit id="218" translate="yes" xml:space="preserve">
          <source>Step 6: Create VM</source>
          <target state="new">Step 6: Create VM</target>
        </trans-unit>
        <trans-unit id="219" translate="yes" xml:space="preserve">
          <source>Create a new VM to Use Premium Storage with a Custom Image</source>
          <target state="new">Create a new VM to Use Premium Storage with a Custom Image</target>
        </trans-unit>
        <trans-unit id="220" translate="yes" xml:space="preserve">
          <source>This scenario demonstrates where you have existing customized images that reside in a Standard Storage account.</source>
          <target state="new">This scenario demonstrates where you have existing customized images that reside in a Standard Storage account.</target>
        </trans-unit>
        <trans-unit id="221" translate="yes" xml:space="preserve">
          <source>As mentioned if you want to place the OS VHD on Premium Storage you will need to copy the image that exists in the Standard Storage account and transfer them to a Premium Storage before it can be used.</source>
          <target state="new">As mentioned if you want to place the OS VHD on Premium Storage you will need to copy the image that exists in the Standard Storage account and transfer them to a Premium Storage before it can be used.</target>
        </trans-unit>
        <trans-unit id="222" translate="yes" xml:space="preserve">
          <source>If you have an image on premise, you can also use this method to copy that directly to the Premium Storage account.</source>
          <target state="new">If you have an image on premise, you can also use this method to copy that directly to the Premium Storage account.</target>
        </trans-unit>
        <trans-unit id="223" translate="yes" xml:space="preserve">
          <source>Step 1: Create Storage Account</source>
          <target state="new">Step 1: Create Storage Account</target>
        </trans-unit>
        <trans-unit id="224" translate="yes" xml:space="preserve">
          <source>Step 2 Create Cloud Service</source>
          <target state="new">Step 2 Create Cloud Service</target>
        </trans-unit>
        <trans-unit id="225" translate="yes" xml:space="preserve">
          <source>Step 3: Use Existing Image</source>
          <target state="new">Step 3: Use Existing Image</target>
        </trans-unit>
        <trans-unit id="226" translate="yes" xml:space="preserve">
          <source>You can use an existing image.</source>
          <target state="new">You can use an existing image.</target>
        </trans-unit>
        <trans-unit id="227" translate="yes" xml:space="preserve">
          <source>Or, you can <bpt id="p1">[</bpt>take an image of an existing machine<ept id="p1">](virtual-machines-capture-image-windows-server.md)</ept>.</source>
          <target state="new">Or, you can <bpt id="p1">[</bpt>take an image of an existing machine<ept id="p1">](virtual-machines-capture-image-windows-server.md)</ept>.</target>
        </trans-unit>
        <trans-unit id="228" translate="yes" xml:space="preserve">
          <source>Note the machine you image does not have to be DS* machine.</source>
          <target state="new">Note the machine you image does not have to be DS* machine.</target>
        </trans-unit>
        <trans-unit id="229" translate="yes" xml:space="preserve">
          <source>Once you have the image, the following steps show how to copy it to the Premium Storage account with the <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> PowerShell commandlet.</source>
          <target state="new">Once you have the image, the following steps show how to copy it to the Premium Storage account with the <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> PowerShell commandlet.</target>
        </trans-unit>
        <trans-unit id="230" translate="yes" xml:space="preserve">
          <source>Step 4: Copy Blob between Storage Accounts</source>
          <target state="new">Step 4: Copy Blob between Storage Accounts</target>
        </trans-unit>
        <trans-unit id="231" translate="yes" xml:space="preserve">
          <source>Step 5: Regularly check copy status:</source>
          <target state="new">Step 5: Regularly check copy status:</target>
        </trans-unit>
        <trans-unit id="232" translate="yes" xml:space="preserve">
          <source>Step 6: Add Image disk to Azure disk Repository in Subscription</source>
          <target state="new">Step 6: Add Image disk to Azure disk Repository in Subscription</target>
        </trans-unit>
        <trans-unit id="233" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> You may find that even though the status reports as success, you could still get a disk lease error.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> You may find that even though the status reports as success, you could still get a disk lease error.</target>
        </trans-unit>
        <trans-unit id="234" translate="yes" xml:space="preserve">
          <source>In this case, wait about 10 minutes.</source>
          <target state="new">In this case, wait about 10 minutes.</target>
        </trans-unit>
        <trans-unit id="235" translate="yes" xml:space="preserve">
          <source>Step 7:  Build the VM</source>
          <target state="new">Step 7:  Build the VM</target>
        </trans-unit>
        <trans-unit id="236" translate="yes" xml:space="preserve">
          <source>Here you are building the VM from your image and attaching two Premium Storage VHDs:</source>
          <target state="new">Here you are building the VM from your image and attaching two Premium Storage VHDs:</target>
        </trans-unit>
        <trans-unit id="237" translate="yes" xml:space="preserve">
          <source>Existing Deployments that do not use AlwaysOn Availability Groups</source>
          <target state="new">Existing Deployments that do not use AlwaysOn Availability Groups</target>
        </trans-unit>
        <trans-unit id="238" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> For existing deployments, first see the <bpt id="p1">[</bpt>Prerequisites<ept id="p1">](#prerequisites-for-premium-storage)</ept> section of this topic.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> For existing deployments, first see the <bpt id="p1">[</bpt>Prerequisites<ept id="p1">](#prerequisites-for-premium-storage)</ept> section of this topic.</target>
        </trans-unit>
        <trans-unit id="239" translate="yes" xml:space="preserve">
          <source>There are different considerations for SQL Server deployments that do not use AlwaysOn Availbility Groups and those that do.</source>
          <target state="new">There are different considerations for SQL Server deployments that do not use AlwaysOn Availbility Groups and those that do.</target>
        </trans-unit>
        <trans-unit id="240" translate="yes" xml:space="preserve">
          <source>If you are not using AlwaysOn and have an existing standalone SQL Server, you can upgrade to Premium Storage by using a new cloud service and storage account.</source>
          <target state="new">If you are not using AlwaysOn and have an existing standalone SQL Server, you can upgrade to Premium Storage by using a new cloud service and storage account.</target>
        </trans-unit>
        <trans-unit id="241" translate="yes" xml:space="preserve">
          <source>Consider the following options:</source>
          <target state="new">Consider the following options:</target>
        </trans-unit>
        <trans-unit id="242" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Create a new SQL Server VM<ept id="p1">**</ept>.</source>
          <target state="new"><bpt id="p1">**</bpt>Create a new SQL Server VM<ept id="p1">**</ept>.</target>
        </trans-unit>
        <trans-unit id="243" translate="yes" xml:space="preserve">
          <source>You can create a new SQL Server VM that uses a Premium Storage account, as documented in New Deployments.</source>
          <target state="new">You can create a new SQL Server VM that uses a Premium Storage account, as documented in New Deployments.</target>
        </trans-unit>
        <trans-unit id="244" translate="yes" xml:space="preserve">
          <source>Then backup and restore your SQL Server configuration and user databases.</source>
          <target state="new">Then backup and restore your SQL Server configuration and user databases.</target>
        </trans-unit>
        <trans-unit id="245" translate="yes" xml:space="preserve">
          <source>The application will need to be updated to reference the new SQL Server if it is being accessed internally or externally.</source>
          <target state="new">The application will need to be updated to reference the new SQL Server if it is being accessed internally or externally.</target>
        </trans-unit>
        <trans-unit id="246" translate="yes" xml:space="preserve">
          <source>You would need to copy all ‘out of db’ objects as if you were doing a Side by Side (SxS) SQL Server migration.</source>
          <target state="new">You would need to copy all ‘out of db’ objects as if you were doing a Side by Side (SxS) SQL Server migration.</target>
        </trans-unit>
        <trans-unit id="247" translate="yes" xml:space="preserve">
          <source>This includes objects such as logins, certificates, and linked servers.</source>
          <target state="new">This includes objects such as logins, certificates, and linked servers.</target>
        </trans-unit>
        <trans-unit id="248" translate="yes" xml:space="preserve">
          <source><bpt id="p1">**</bpt>Migrate an existing SQL Server VM<ept id="p1">**</ept>.</source>
          <target state="new"><bpt id="p1">**</bpt>Migrate an existing SQL Server VM<ept id="p1">**</ept>.</target>
        </trans-unit>
        <trans-unit id="249" translate="yes" xml:space="preserve">
          <source>This will require taking the SQL Server VM offline, then transferring it to a new cloud service, which includes copying all of its attached VHDs to the Premium Storage account.</source>
          <target state="new">This will require taking the SQL Server VM offline, then transferring it to a new cloud service, which includes copying all of its attached VHDs to the Premium Storage account.</target>
        </trans-unit>
        <trans-unit id="250" translate="yes" xml:space="preserve">
          <source>When the VM comes online, the application will reference the server host name as before.</source>
          <target state="new">When the VM comes online, the application will reference the server host name as before.</target>
        </trans-unit>
        <trans-unit id="251" translate="yes" xml:space="preserve">
          <source>Be aware that the size of the existing disk will affect the performance characteristics.</source>
          <target state="new">Be aware that the size of the existing disk will affect the performance characteristics.</target>
        </trans-unit>
        <trans-unit id="252" translate="yes" xml:space="preserve">
          <source>For example, a 400 GB disk gets rounded up to a P20.</source>
          <target state="new">For example, a 400 GB disk gets rounded up to a P20.</target>
        </trans-unit>
        <trans-unit id="253" translate="yes" xml:space="preserve">
          <source>If you know that you do not require that disk performance, then you could recreate the VM as a DS Series VM, and attach Premium Storage VHDs of the size/performance specification you require.</source>
          <target state="new">If you know that you do not require that disk performance, then you could recreate the VM as a DS Series VM, and attach Premium Storage VHDs of the size/performance specification you require.</target>
        </trans-unit>
        <trans-unit id="254" translate="yes" xml:space="preserve">
          <source>Then you could detach and reattach the SQL DB files.</source>
          <target state="new">Then you could detach and reattach the SQL DB files.</target>
        </trans-unit>
        <trans-unit id="255" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> When copying the VHD disks you should beaware of the size, depending on the size will mean what Premium Storage Disk type they fall into, this determines disk performance specification.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> When copying the VHD disks you should beaware of the size, depending on the size will mean what Premium Storage Disk type they fall into, this determines disk performance specification.</target>
        </trans-unit>
        <trans-unit id="256" translate="yes" xml:space="preserve">
          <source>Azure will round up to the nearest disk size, so if you have a 400GB disk, this will be rounded up to a P20.</source>
          <target state="new">Azure will round up to the nearest disk size, so if you have a 400GB disk, this will be rounded up to a P20.</target>
        </trans-unit>
        <trans-unit id="257" translate="yes" xml:space="preserve">
          <source>Depending on your existing IO requirements of the OS VHD, you might not need to migrate this to a Premium Storage account.</source>
          <target state="new">Depending on your existing IO requirements of the OS VHD, you might not need to migrate this to a Premium Storage account.</target>
        </trans-unit>
        <trans-unit id="258" translate="yes" xml:space="preserve">
          <source>If your SQL Server is accessed externally, then the cloud service VIP will change.</source>
          <target state="new">If your SQL Server is accessed externally, then the cloud service VIP will change.</target>
        </trans-unit>
        <trans-unit id="259" translate="yes" xml:space="preserve">
          <source>You will also have to update endptoints, ACLs, and DNS settings.</source>
          <target state="new">You will also have to update endptoints, ACLs, and DNS settings.</target>
        </trans-unit>
        <trans-unit id="260" translate="yes" xml:space="preserve">
          <source>Existing Deployments that use AlwaysOn Availability Groups</source>
          <target state="new">Existing Deployments that use AlwaysOn Availability Groups</target>
        </trans-unit>
        <trans-unit id="261" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> For existing deployments, first see the <bpt id="p1">[</bpt>Prerequisites<ept id="p1">](#prerequisites-for-premium-storage)</ept> section of this topic.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> For existing deployments, first see the <bpt id="p1">[</bpt>Prerequisites<ept id="p1">](#prerequisites-for-premium-storage)</ept> section of this topic.</target>
        </trans-unit>
        <trans-unit id="262" translate="yes" xml:space="preserve">
          <source>Intially in this section we will look at how AlwaysOn interacts with Azure Networking.</source>
          <target state="new">Intially in this section we will look at how AlwaysOn interacts with Azure Networking.</target>
        </trans-unit>
        <trans-unit id="263" translate="yes" xml:space="preserve">
          <source>We will then break down migrations in to two scenarios: migrations where some downtime can be tolerated and migrations where you must achieve minimal downtime.</source>
          <target state="new">We will then break down migrations in to two scenarios: migrations where some downtime can be tolerated and migrations where you must achieve minimal downtime.</target>
        </trans-unit>
        <trans-unit id="264" translate="yes" xml:space="preserve">
          <source>On-premises SQL Server AlwaysOn Availability Groups use a Listener on-premises that registers a virtual DNS name along with an IP address that is shared between one or more SQL Servers.</source>
          <target state="new">On-premises SQL Server AlwaysOn Availability Groups use a Listener on-premises that registers a virtual DNS name along with an IP address that is shared between one or more SQL Servers.</target>
        </trans-unit>
        <trans-unit id="265" translate="yes" xml:space="preserve">
          <source>When clients connect they are routed through the listener IP to the Primary SQL Server.</source>
          <target state="new">When clients connect they are routed through the listener IP to the Primary SQL Server.</target>
        </trans-unit>
        <trans-unit id="266" translate="yes" xml:space="preserve">
          <source>This is the server that owns the AlwaysOn IP resource at that time.</source>
          <target state="new">This is the server that owns the AlwaysOn IP resource at that time.</target>
        </trans-unit>
        <trans-unit id="267" translate="yes" xml:space="preserve">
          <source>![DeploymentsUseAlwaysOn][6]</source>
          <target state="new">![DeploymentsUseAlwaysOn][6]</target>
        </trans-unit>
        <trans-unit id="268" translate="yes" xml:space="preserve">
          <source>In Microsoft Azure you can have only one IP address assigned to a NIC on the VM, so in order to achieve the same layer of abstraction as on-premises, Azure utilizes the IP address that is assigned to the Internal/External Load Balancers (ILB/ELB).</source>
          <target state="new">In Microsoft Azure you can have only one IP address assigned to a NIC on the VM, so in order to achieve the same layer of abstraction as on-premises, Azure utilizes the IP address that is assigned to the Internal/External Load Balancers (ILB/ELB).</target>
        </trans-unit>
        <trans-unit id="269" translate="yes" xml:space="preserve">
          <source>The IP resource that is shared between the servers is set to the same IP as the ILB/ELB.</source>
          <target state="new">The IP resource that is shared between the servers is set to the same IP as the ILB/ELB.</target>
        </trans-unit>
        <trans-unit id="270" translate="yes" xml:space="preserve">
          <source>This is published in the DNS, and client traffic is passed through the ILB/ELB to the Primary SQL Server replica.</source>
          <target state="new">This is published in the DNS, and client traffic is passed through the ILB/ELB to the Primary SQL Server replica.</target>
        </trans-unit>
        <trans-unit id="271" translate="yes" xml:space="preserve">
          <source>The ILB/ELB knows which SQL Server is primary since it uses probes to probe the AlwaysOn IP resource.</source>
          <target state="new">The ILB/ELB knows which SQL Server is primary since it uses probes to probe the AlwaysOn IP resource.</target>
        </trans-unit>
        <trans-unit id="272" translate="yes" xml:space="preserve">
          <source>In the previous example, it probes each node that has an endpoint referenced by the ELB/ILB, whichever responds is the Primary SQL Server.</source>
          <target state="new">In the previous example, it probes each node that has an endpoint referenced by the ELB/ILB, whichever responds is the Primary SQL Server.</target>
        </trans-unit>
        <trans-unit id="273" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> The ILB and ELB are both assigned to a particular Azure cloud service, therefore any cloud migration in Azure will most likely mean that the Load Balancer IP will change.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> The ILB and ELB are both assigned to a particular Azure cloud service, therefore any cloud migration in Azure will most likely mean that the Load Balancer IP will change.</target>
        </trans-unit>
        <trans-unit id="274" translate="yes" xml:space="preserve">
          <source>Migrating AlwaysOn deployments that can allow some downtime</source>
          <target state="new">Migrating AlwaysOn deployments that can allow some downtime</target>
        </trans-unit>
        <trans-unit id="275" translate="yes" xml:space="preserve">
          <source>There are two strategies to migrate AlwaysOn deployments that allow for some downtime:</source>
          <target state="new">There are two strategies to migrate AlwaysOn deployments that allow for some downtime:</target>
        </trans-unit>
        <trans-unit id="276" translate="yes" xml:space="preserve">
          <source>Add more secondary replicas to an existing AlwaysOn Cluster</source>
          <target state="new">Add more secondary replicas to an existing AlwaysOn Cluster</target>
        </trans-unit>
        <trans-unit id="277" translate="yes" xml:space="preserve">
          <source>Migrate to a new AlwaysOn Cluster</source>
          <target state="new">Migrate to a new AlwaysOn Cluster</target>
        </trans-unit>
        <trans-unit id="278" translate="yes" xml:space="preserve">
          <source>1. Add more Secondary Replicas to an Existing AlwaysOn Cluster</source>
          <target state="new">1. Add more Secondary Replicas to an Existing AlwaysOn Cluster</target>
        </trans-unit>
        <trans-unit id="279" translate="yes" xml:space="preserve">
          <source>One strategy is to add more secondaries to the AlwaysOn Availability Group.</source>
          <target state="new">One strategy is to add more secondaries to the AlwaysOn Availability Group.</target>
        </trans-unit>
        <trans-unit id="280" translate="yes" xml:space="preserve">
          <source>You need to add these into a new cloud service and update the listener with the new load balancer IP.</source>
          <target state="new">You need to add these into a new cloud service and update the listener with the new load balancer IP.</target>
        </trans-unit>
        <trans-unit id="281" translate="yes" xml:space="preserve">
          <source>Points of Downtime:</source>
          <target state="new">Points of Downtime:</target>
        </trans-unit>
        <trans-unit id="282" translate="yes" xml:space="preserve">
          <source>Cluster Validation.</source>
          <target state="new">Cluster Validation.</target>
        </trans-unit>
        <trans-unit id="283" translate="yes" xml:space="preserve">
          <source>Testing AlwaysOn failovers for New Secondaries.</source>
          <target state="new">Testing AlwaysOn failovers for New Secondaries.</target>
        </trans-unit>
        <trans-unit id="284" translate="yes" xml:space="preserve">
          <source>If you are using Windows Storage Pools within the VM for higher IO throughput, then these will be taken offline during a Full Cluster Validation.</source>
          <target state="new">If you are using Windows Storage Pools within the VM for higher IO throughput, then these will be taken offline during a Full Cluster Validation.</target>
        </trans-unit>
        <trans-unit id="285" translate="yes" xml:space="preserve">
          <source>The validation test is required when you add nodes to the cluster.</source>
          <target state="new">The validation test is required when you add nodes to the cluster.</target>
        </trans-unit>
        <trans-unit id="286" translate="yes" xml:space="preserve">
          <source>The time it takes to run the test can vary, so you should test this in your representative test environment to get an approximate time of how long this will take.</source>
          <target state="new">The time it takes to run the test can vary, so you should test this in your representative test environment to get an approximate time of how long this will take.</target>
        </trans-unit>
        <trans-unit id="287" translate="yes" xml:space="preserve">
          <source>You should provision time where you can perform manual failover and chaos testing on the newly added nodes to ensure AlwaysOn High Availability functions as expected.</source>
          <target state="new">You should provision time where you can perform manual failover and chaos testing on the newly added nodes to ensure AlwaysOn High Availability functions as expected.</target>
        </trans-unit>
        <trans-unit id="288" translate="yes" xml:space="preserve">
          <source>![DeploymentUseAlwaysOn2][7]</source>
          <target state="new">![DeploymentUseAlwaysOn2][7]</target>
        </trans-unit>
        <trans-unit id="289" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> You should stop all instances of SQL Server where the Storage Pools are used before the Validaion runs.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> You should stop all instances of SQL Server where the Storage Pools are used before the Validaion runs.</target>
        </trans-unit>
        <trans-unit id="290" translate="yes" xml:space="preserve">
          <source>High Level Steps</source>
          <target state="new">High Level Steps</target>
        </trans-unit>
        <trans-unit id="291" translate="yes" xml:space="preserve">
          <source>Create two new SQL Servers in new cloud service with attached Premium Storage.</source>
          <target state="new">Create two new SQL Servers in new cloud service with attached Premium Storage.</target>
        </trans-unit>
        <trans-unit id="292" translate="yes" xml:space="preserve">
          <source>Copy over FULL backups and restore with <bpt id="p1">**</bpt>NORECOVERY<ept id="p1">**</ept>.</source>
          <target state="new">Copy over FULL backups and restore with <bpt id="p1">**</bpt>NORECOVERY<ept id="p1">**</ept>.</target>
        </trans-unit>
        <trans-unit id="293" translate="yes" xml:space="preserve">
          <source>Copy over ‘out of user DB’ dependent objects, such as logins etc.</source>
          <target state="new">Copy over ‘out of user DB’ dependent objects, such as logins etc.</target>
        </trans-unit>
        <trans-unit id="294" translate="yes" xml:space="preserve">
          <source>Create new a new Internal Load Balancer (ILB) or use an External Load Balancer (ELB), and then set up Load Balanced Endpoints on both new nodes.</source>
          <target state="new">Create new a new Internal Load Balancer (ILB) or use an External Load Balancer (ELB), and then set up Load Balanced Endpoints on both new nodes.</target>
        </trans-unit>
        <trans-unit id="295" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> Check all Nodes have the correct Endpoint configuration before you continue</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> Check all Nodes have the correct Endpoint configuration before you continue</target>
        </trans-unit>
        <trans-unit id="296" translate="yes" xml:space="preserve">
          <source>Stop User/Application Access to the SQL Server (if using Storage Pools).</source>
          <target state="new">Stop User/Application Access to the SQL Server (if using Storage Pools).</target>
        </trans-unit>
        <trans-unit id="297" translate="yes" xml:space="preserve">
          <source>Stop SQL Server Engine Services on All Nodes (if using Storage Pools).</source>
          <target state="new">Stop SQL Server Engine Services on All Nodes (if using Storage Pools).</target>
        </trans-unit>
        <trans-unit id="298" translate="yes" xml:space="preserve">
          <source>Add new Nodes to cluster and run full validation.</source>
          <target state="new">Add new Nodes to cluster and run full validation.</target>
        </trans-unit>
        <trans-unit id="299" translate="yes" xml:space="preserve">
          <source>Once Validation is successful, start all SQL Server Services.</source>
          <target state="new">Once Validation is successful, start all SQL Server Services.</target>
        </trans-unit>
        <trans-unit id="300" translate="yes" xml:space="preserve">
          <source>Backup Transaction logs, and restore user databases.</source>
          <target state="new">Backup Transaction logs, and restore user databases.</target>
        </trans-unit>
        <trans-unit id="301" translate="yes" xml:space="preserve">
          <source>Add new nodes into the AlwaysOn Availability Group and place replication into <bpt id="p1">**</bpt>Syncronous<ept id="p1">**</ept>.</source>
          <target state="new">Add new nodes into the AlwaysOn Availability Group and place replication into <bpt id="p1">**</bpt>Syncronous<ept id="p1">**</ept>.</target>
        </trans-unit>
        <trans-unit id="302" translate="yes" xml:space="preserve">
          <source>Add the IP address resource of the new Cloud Service ILB/ELB through PowerShell for AlwaysOn based on the Multi-site example in the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</source>
          <target state="new">Add the IP address resource of the new Cloud Service ILB/ELB through PowerShell for AlwaysOn based on the Multi-site example in the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</target>
        </trans-unit>
        <trans-unit id="303" translate="yes" xml:space="preserve">
          <source>In Windows clustering, set the <bpt id="p1">**</bpt>Possible owners<ept id="p1">**</ept> of the <bpt id="p2">**</bpt>IP Address<ept id="p2">**</ept> resource to the new nodes old.</source>
          <target state="new">In Windows clustering, set the <bpt id="p1">**</bpt>Possible owners<ept id="p1">**</ept> of the <bpt id="p2">**</bpt>IP Address<ept id="p2">**</ept> resource to the new nodes old.</target>
        </trans-unit>
        <trans-unit id="304" translate="yes" xml:space="preserve">
          <source>See the ‘Adding IP Address Resource on Same Subnet’ section of the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</source>
          <target state="new">See the ‘Adding IP Address Resource on Same Subnet’ section of the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</target>
        </trans-unit>
        <trans-unit id="305" translate="yes" xml:space="preserve">
          <source>Failover to one of the new nodes.</source>
          <target state="new">Failover to one of the new nodes.</target>
        </trans-unit>
        <trans-unit id="306" translate="yes" xml:space="preserve">
          <source>Make the new nodes Auto Failover Partners and test failovers.</source>
          <target state="new">Make the new nodes Auto Failover Partners and test failovers.</target>
        </trans-unit>
        <trans-unit id="307" translate="yes" xml:space="preserve">
          <source>Remove original nodes from Availability Group.</source>
          <target state="new">Remove original nodes from Availability Group.</target>
        </trans-unit>
        <trans-unit id="308" translate="yes" xml:space="preserve">
          <source>Advantages</source>
          <target state="new">Advantages</target>
        </trans-unit>
        <trans-unit id="309" translate="yes" xml:space="preserve">
          <source>New SQL Servers can be tested (SQL Server and Application) before they are added to AlwaysOn.</source>
          <target state="new">New SQL Servers can be tested (SQL Server and Application) before they are added to AlwaysOn.</target>
        </trans-unit>
        <trans-unit id="310" translate="yes" xml:space="preserve">
          <source>You can change the VM size and customize the storage to your exact requirements.</source>
          <target state="new">You can change the VM size and customize the storage to your exact requirements.</target>
        </trans-unit>
        <trans-unit id="311" translate="yes" xml:space="preserve">
          <source>However, it would be beneficial to keep all the SQL file paths the same.</source>
          <target state="new">However, it would be beneficial to keep all the SQL file paths the same.</target>
        </trans-unit>
        <trans-unit id="312" translate="yes" xml:space="preserve">
          <source>You can control when the transfer of the DB backups to the Secondary Replicas are started.</source>
          <target state="new">You can control when the transfer of the DB backups to the Secondary Replicas are started.</target>
        </trans-unit>
        <trans-unit id="313" translate="yes" xml:space="preserve">
          <source>This differs from using Azure <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> commandlet to copy VHDs, because that is an asynchronous copy.</source>
          <target state="new">This differs from using Azure <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> commandlet to copy VHDs, because that is an asynchronous copy.</target>
        </trans-unit>
        <trans-unit id="314" translate="yes" xml:space="preserve">
          <source>Disadvantages</source>
          <target state="new">Disadvantages</target>
        </trans-unit>
        <trans-unit id="315" translate="yes" xml:space="preserve">
          <source>When using Windows Storage Pools, there is Cluster downtime during the Full Cluster Validation for the new additional nodes.</source>
          <target state="new">When using Windows Storage Pools, there is Cluster downtime during the Full Cluster Validation for the new additional nodes.</target>
        </trans-unit>
        <trans-unit id="316" translate="yes" xml:space="preserve">
          <source>Depending on the SQL Server Version and the existing number of secondary replicas, you might not be able to add more secondary replicas without removing existing secondaries.</source>
          <target state="new">Depending on the SQL Server Version and the existing number of secondary replicas, you might not be able to add more secondary replicas without removing existing secondaries.</target>
        </trans-unit>
        <trans-unit id="317" translate="yes" xml:space="preserve">
          <source>There could be long SQL data transfer time while setting up the secondaries.</source>
          <target state="new">There could be long SQL data transfer time while setting up the secondaries.</target>
        </trans-unit>
        <trans-unit id="318" translate="yes" xml:space="preserve">
          <source>There is additional cost during migration while you have new machines running in paralell.</source>
          <target state="new">There is additional cost during migration while you have new machines running in paralell.</target>
        </trans-unit>
        <trans-unit id="319" translate="yes" xml:space="preserve">
          <source>2. Migrate to a New AlwaysOn Cluster</source>
          <target state="new">2. Migrate to a New AlwaysOn Cluster</target>
        </trans-unit>
        <trans-unit id="320" translate="yes" xml:space="preserve">
          <source>Another strategy is to create a brand new AlwaysOn Cluster with brand new nodes in new cloud service and then redirect the clients to use it.</source>
          <target state="new">Another strategy is to create a brand new AlwaysOn Cluster with brand new nodes in new cloud service and then redirect the clients to use it.</target>
        </trans-unit>
        <trans-unit id="321" translate="yes" xml:space="preserve">
          <source>Points of Downtime</source>
          <target state="new">Points of Downtime</target>
        </trans-unit>
        <trans-unit id="322" translate="yes" xml:space="preserve">
          <source>There is downtime when you transfer applications and users to the new AlwaysOn listener.</source>
          <target state="new">There is downtime when you transfer applications and users to the new AlwaysOn listener.</target>
        </trans-unit>
        <trans-unit id="323" translate="yes" xml:space="preserve">
          <source>The downtime depends on:</source>
          <target state="new">The downtime depends on:</target>
        </trans-unit>
        <trans-unit id="324" translate="yes" xml:space="preserve">
          <source>The time taken to restore final transaction log backups to databases on new servers.</source>
          <target state="new">The time taken to restore final transaction log backups to databases on new servers.</target>
        </trans-unit>
        <trans-unit id="325" translate="yes" xml:space="preserve">
          <source>The time taken to update client applications to use new AlwaysOn listener.</source>
          <target state="new">The time taken to update client applications to use new AlwaysOn listener.</target>
        </trans-unit>
        <trans-unit id="326" translate="yes" xml:space="preserve">
          <source>Advantages</source>
          <target state="new">Advantages</target>
        </trans-unit>
        <trans-unit id="327" translate="yes" xml:space="preserve">
          <source>You can test the actual production environment, SQL Server, and OS build changes.</source>
          <target state="new">You can test the actual production environment, SQL Server, and OS build changes.</target>
        </trans-unit>
        <trans-unit id="328" translate="yes" xml:space="preserve">
          <source>You have the option to customize the storage and to potentially reduce size of VM.</source>
          <target state="new">You have the option to customize the storage and to potentially reduce size of VM.</target>
        </trans-unit>
        <trans-unit id="329" translate="yes" xml:space="preserve">
          <source>This could result in cost reduction.</source>
          <target state="new">This could result in cost reduction.</target>
        </trans-unit>
        <trans-unit id="330" translate="yes" xml:space="preserve">
          <source>You can update your SQL Server build or version during this process.</source>
          <target state="new">You can update your SQL Server build or version during this process.</target>
        </trans-unit>
        <trans-unit id="331" translate="yes" xml:space="preserve">
          <source>You can also upgrade the Operating System.</source>
          <target state="new">You can also upgrade the Operating System.</target>
        </trans-unit>
        <trans-unit id="332" translate="yes" xml:space="preserve">
          <source>The previous AlwaysOn Cluster can act as a solid rollback target.</source>
          <target state="new">The previous AlwaysOn Cluster can act as a solid rollback target.</target>
        </trans-unit>
        <trans-unit id="333" translate="yes" xml:space="preserve">
          <source>Disadvantages</source>
          <target state="new">Disadvantages</target>
        </trans-unit>
        <trans-unit id="334" translate="yes" xml:space="preserve">
          <source>You need to change the DNS name of the listener if you want both AlwaysOn clusters running simultaneously.</source>
          <target state="new">You need to change the DNS name of the listener if you want both AlwaysOn clusters running simultaneously.</target>
        </trans-unit>
        <trans-unit id="335" translate="yes" xml:space="preserve">
          <source>This adds administration overhead during the migration as client application strings must reflect the new Listener name.</source>
          <target state="new">This adds administration overhead during the migration as client application strings must reflect the new Listener name.</target>
        </trans-unit>
        <trans-unit id="336" translate="yes" xml:space="preserve">
          <source>You must implement a synchronization mechanism between the two environments to keep them as close as possible to minimize the final synchronization requirements before migration.</source>
          <target state="new">You must implement a synchronization mechanism between the two environments to keep them as close as possible to minimize the final synchronization requirements before migration.</target>
        </trans-unit>
        <trans-unit id="337" translate="yes" xml:space="preserve">
          <source>There is added cost during migration while you have the new environment running.</source>
          <target state="new">There is added cost during migration while you have the new environment running.</target>
        </trans-unit>
        <trans-unit id="338" translate="yes" xml:space="preserve">
          <source>Migrating AlwaysOn Deployments for Minimal Downtime</source>
          <target state="new">Migrating AlwaysOn Deployments for Minimal Downtime</target>
        </trans-unit>
        <trans-unit id="339" translate="yes" xml:space="preserve">
          <source>There are two strategies for migrating AlwaysOn deployments for minimal downtime:</source>
          <target state="new">There are two strategies for migrating AlwaysOn deployments for minimal downtime:</target>
        </trans-unit>
        <trans-unit id="340" translate="yes" xml:space="preserve">
          <source>Utilize an Existing Secondary: Single-Site</source>
          <target state="new">Utilize an Existing Secondary: Single-Site</target>
        </trans-unit>
        <trans-unit id="341" translate="yes" xml:space="preserve">
          <source>Utilize Existing Secondary Replica(s): Multi-Site</source>
          <target state="new">Utilize Existing Secondary Replica(s): Multi-Site</target>
        </trans-unit>
        <trans-unit id="342" translate="yes" xml:space="preserve">
          <source>1. Utilize an Existing Secondary: Single-Site</source>
          <target state="new">1. Utilize an Existing Secondary: Single-Site</target>
        </trans-unit>
        <trans-unit id="343" translate="yes" xml:space="preserve">
          <source>One strategy for minimal downtime is to take an existing cloud secondary and remove it from the current cloud service.</source>
          <target state="new">One strategy for minimal downtime is to take an existing cloud secondary and remove it from the current cloud service.</target>
        </trans-unit>
        <trans-unit id="344" translate="yes" xml:space="preserve">
          <source>Then copy the VHDs to the new Premium Storage account, and create the VM in the new cloud service.</source>
          <target state="new">Then copy the VHDs to the new Premium Storage account, and create the VM in the new cloud service.</target>
        </trans-unit>
        <trans-unit id="345" translate="yes" xml:space="preserve">
          <source>Then update the listener in clustering and failover.</source>
          <target state="new">Then update the listener in clustering and failover.</target>
        </trans-unit>
        <trans-unit id="346" translate="yes" xml:space="preserve">
          <source>Points of Downtime</source>
          <target state="new">Points of Downtime</target>
        </trans-unit>
        <trans-unit id="347" translate="yes" xml:space="preserve">
          <source>There is downtime when you update the final node with the Load Balanaced endpoint.</source>
          <target state="new">There is downtime when you update the final node with the Load Balanaced endpoint.</target>
        </trans-unit>
        <trans-unit id="348" translate="yes" xml:space="preserve">
          <source>Your client reconnection might be delayed depending on your client/DNS configuration.</source>
          <target state="new">Your client reconnection might be delayed depending on your client/DNS configuration.</target>
        </trans-unit>
        <trans-unit id="349" translate="yes" xml:space="preserve">
          <source>There is additional downtime if you choose to take the AlwaysOn Cluster group offline to swap out the IP addresses.</source>
          <target state="new">There is additional downtime if you choose to take the AlwaysOn Cluster group offline to swap out the IP addresses.</target>
        </trans-unit>
        <trans-unit id="350" translate="yes" xml:space="preserve">
          <source>You can avoid this by using an OR dependancy and Possible Owners for the added IP Address resource.</source>
          <target state="new">You can avoid this by using an OR dependancy and Possible Owners for the added IP Address resource.</target>
        </trans-unit>
        <trans-unit id="351" translate="yes" xml:space="preserve">
          <source>See the ‘Adding IP Address Resource on Same Subnet’ section of the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</source>
          <target state="new">See the ‘Adding IP Address Resource on Same Subnet’ section of the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</target>
        </trans-unit>
        <trans-unit id="352" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> When you want the added node to partake in as an AlwaysOn Failover Partner, you need to add an Azure Endpoint with a reference to the Load Balanced Set.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> When you want the added node to partake in as an AlwaysOn Failover Partner, you need to add an Azure Endpoint with a reference to the Load Balanced Set.</target>
        </trans-unit>
        <trans-unit id="353" translate="yes" xml:space="preserve">
          <source>When you run the <bpt id="p1">**</bpt>Add-AzureEndpoint<ept id="p1">**</ept> command to do this, current connections to remain open, but new connections to the listener will not be able to be established until the load balancer has updated.</source>
          <target state="new">When you run the <bpt id="p1">**</bpt>Add-AzureEndpoint<ept id="p1">**</ept> command to do this, current connections to remain open, but new connections to the listener will not be able to be established until the load balancer has updated.</target>
        </trans-unit>
        <trans-unit id="354" translate="yes" xml:space="preserve">
          <source>In testing this was seen to last 90-120seconds, this should be tested.</source>
          <target state="new">In testing this was seen to last 90-120seconds, this should be tested.</target>
        </trans-unit>
        <trans-unit id="355" translate="yes" xml:space="preserve">
          <source>Advantages</source>
          <target state="new">Advantages</target>
        </trans-unit>
        <trans-unit id="356" translate="yes" xml:space="preserve">
          <source>No extra cost incurred during migration.</source>
          <target state="new">No extra cost incurred during migration.</target>
        </trans-unit>
        <trans-unit id="357" translate="yes" xml:space="preserve">
          <source>A one-to-one migration.</source>
          <target state="new">A one-to-one migration.</target>
        </trans-unit>
        <trans-unit id="358" translate="yes" xml:space="preserve">
          <source>Reduced complexity.</source>
          <target state="new">Reduced complexity.</target>
        </trans-unit>
        <trans-unit id="359" translate="yes" xml:space="preserve">
          <source>Allows for increased IOPS from Premium Storage SKUs.</source>
          <target state="new">Allows for increased IOPS from Premium Storage SKUs.</target>
        </trans-unit>
        <trans-unit id="360" translate="yes" xml:space="preserve">
          <source>When the disks are detached from the VM and copied to the new cloud service, a 3rd party tool can be used to increase the VHD size, which provides higher throughputs.</source>
          <target state="new">When the disks are detached from the VM and copied to the new cloud service, a 3rd party tool can be used to increase the VHD size, which provides higher throughputs.</target>
        </trans-unit>
        <trans-unit id="361" translate="yes" xml:space="preserve">
          <source>For increasing VHD sizes, see this <bpt id="p1">[</bpt>forum discussion<ept id="p1">](https://social.msdn.microsoft.com/Forums/azure/4a9bcc9e-e5bf-4125-9994-7c154c9b0d52/resizing-azure-data-disk?forum=WAVirtualMachinesforWindows)</ept>.</source>
          <target state="new">For increasing VHD sizes, see this <bpt id="p1">[</bpt>forum discussion<ept id="p1">](https://social.msdn.microsoft.com/Forums/azure/4a9bcc9e-e5bf-4125-9994-7c154c9b0d52/resizing-azure-data-disk?forum=WAVirtualMachinesforWindows)</ept>.</target>
        </trans-unit>
        <trans-unit id="362" translate="yes" xml:space="preserve">
          <source>Disadvantages</source>
          <target state="new">Disadvantages</target>
        </trans-unit>
        <trans-unit id="363" translate="yes" xml:space="preserve">
          <source>There is a temporary loss of HA and DR during migration.</source>
          <target state="new">There is a temporary loss of HA and DR during migration.</target>
        </trans-unit>
        <trans-unit id="364" translate="yes" xml:space="preserve">
          <source>As this is a 1:1 migration, you will have to use a minimum VM size that will support your number of VHDs, so you might not be able to downsize your VMs.</source>
          <target state="new">As this is a 1:1 migration, you will have to use a minimum VM size that will support your number of VHDs, so you might not be able to downsize your VMs.</target>
        </trans-unit>
        <trans-unit id="365" translate="yes" xml:space="preserve">
          <source>This scenario would use the Azure <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> commandlet, which is asynchronous.</source>
          <target state="new">This scenario would use the Azure <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> commandlet, which is asynchronous.</target>
        </trans-unit>
        <trans-unit id="366" translate="yes" xml:space="preserve">
          <source>There is no SLA on copy completion.</source>
          <target state="new">There is no SLA on copy completion.</target>
        </trans-unit>
        <trans-unit id="367" translate="yes" xml:space="preserve">
          <source>The time of the copies varies, while this depends on wait in queue it will also depend on the amount of data to transfer.</source>
          <target state="new">The time of the copies varies, while this depends on wait in queue it will also depend on the amount of data to transfer.</target>
        </trans-unit>
        <trans-unit id="368" translate="yes" xml:space="preserve">
          <source>The copy time increases if the transfer is going to another Azure data center that supports Premium Storage in another region.</source>
          <target state="new">The copy time increases if the transfer is going to another Azure data center that supports Premium Storage in another region.</target>
        </trans-unit>
        <trans-unit id="369" translate="yes" xml:space="preserve">
          <source>If you just have 2 nodes, consider a possible mitigation in case the copy takes longer than in testing.</source>
          <target state="new">If you just have 2 nodes, consider a possible mitigation in case the copy takes longer than in testing.</target>
        </trans-unit>
        <trans-unit id="370" translate="yes" xml:space="preserve">
          <source>This could include the following ideas.</source>
          <target state="new">This could include the following ideas.</target>
        </trans-unit>
        <trans-unit id="371" translate="yes" xml:space="preserve">
          <source>Add a temporary 3rd SQL Server node for HA before the migration with agreed downtime.</source>
          <target state="new">Add a temporary 3rd SQL Server node for HA before the migration with agreed downtime.</target>
        </trans-unit>
        <trans-unit id="372" translate="yes" xml:space="preserve">
          <source>Run the migration outside of Azure scheduled maintenance.</source>
          <target state="new">Run the migration outside of Azure scheduled maintenance.</target>
        </trans-unit>
        <trans-unit id="373" translate="yes" xml:space="preserve">
          <source>Ensure you have configured your cluster quorum correctly.</source>
          <target state="new">Ensure you have configured your cluster quorum correctly.</target>
        </trans-unit>
        <trans-unit id="374" translate="yes" xml:space="preserve">
          <source>High Level Steps</source>
          <target state="new">High Level Steps</target>
        </trans-unit>
        <trans-unit id="375" translate="yes" xml:space="preserve">
          <source>This document does not demonstrate a complete end to end example, however the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept> provides details that can be leveraged to perform this.</source>
          <target state="new">This document does not demonstrate a complete end to end example, however the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept> provides details that can be leveraged to perform this.</target>
        </trans-unit>
        <trans-unit id="376" translate="yes" xml:space="preserve">
          <source>![MinimalDowntime][8]</source>
          <target state="new">![MinimalDowntime][8]</target>
        </trans-unit>
        <trans-unit id="377" translate="yes" xml:space="preserve">
          <source>Gather disk configuration, and remove the node (do not delete attached VHDs).</source>
          <target state="new">Gather disk configuration, and remove the node (do not delete attached VHDs).</target>
        </trans-unit>
        <trans-unit id="378" translate="yes" xml:space="preserve">
          <source>Create a Premium Storage account and copy VHDs from the Standard Storage account</source>
          <target state="new">Create a Premium Storage account and copy VHDs from the Standard Storage account</target>
        </trans-unit>
        <trans-unit id="379" translate="yes" xml:space="preserve">
          <source>Create new cloud service and redeploy the SQL2 VM in that cloud service.</source>
          <target state="new">Create new cloud service and redeploy the SQL2 VM in that cloud service.</target>
        </trans-unit>
        <trans-unit id="380" translate="yes" xml:space="preserve">
          <source>Create the VM using the copied original OS VHD and attaching the copied VHDs.</source>
          <target state="new">Create the VM using the copied original OS VHD and attaching the copied VHDs.</target>
        </trans-unit>
        <trans-unit id="381" translate="yes" xml:space="preserve">
          <source>Configure ILB / ELB and add Endpoints.</source>
          <target state="new">Configure ILB / ELB and add Endpoints.</target>
        </trans-unit>
        <trans-unit id="382" translate="yes" xml:space="preserve">
          <source>Update Listener by either:</source>
          <target state="new">Update Listener by either:</target>
        </trans-unit>
        <trans-unit id="383" translate="yes" xml:space="preserve">
          <source>Taking the AlwaysOn Group offline and updating the AlwaysOn Listener with new ILB / ELB IP address.</source>
          <target state="new">Taking the AlwaysOn Group offline and updating the AlwaysOn Listener with new ILB / ELB IP address.</target>
        </trans-unit>
        <trans-unit id="384" translate="yes" xml:space="preserve">
          <source>Or adding the IP addess resource of new Cloud Service ILB/ELB through PowerShell into Windows clustering.</source>
          <target state="new">Or adding the IP addess resource of new Cloud Service ILB/ELB through PowerShell into Windows clustering.</target>
        </trans-unit>
        <trans-unit id="385" translate="yes" xml:space="preserve">
          <source>Then set the Possible owners of the IP Address resource to the migrated node, SQL2, and set this as OR dependency in the Network Name.</source>
          <target state="new">Then set the Possible owners of the IP Address resource to the migrated node, SQL2, and set this as OR dependency in the Network Name.</target>
        </trans-unit>
        <trans-unit id="386" translate="yes" xml:space="preserve">
          <source>See the ‘Adding IP Address Resource on Same Subnet’ section of the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</source>
          <target state="new">See the ‘Adding IP Address Resource on Same Subnet’ section of the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>.</target>
        </trans-unit>
        <trans-unit id="387" translate="yes" xml:space="preserve">
          <source>Check DNS configuration/propogation to the clients.</source>
          <target state="new">Check DNS configuration/propogation to the clients.</target>
        </trans-unit>
        <trans-unit id="388" translate="yes" xml:space="preserve">
          <source>Migrate SQL1 VM, and go through steps 2 – 4.</source>
          <target state="new">Migrate SQL1 VM, and go through steps 2 – 4.</target>
        </trans-unit>
        <trans-unit id="389" translate="yes" xml:space="preserve">
          <source>If using steps 5ii, then add SQL1 as a Possible Owner for the added IP Address Resource</source>
          <target state="new">If using steps 5ii, then add SQL1 as a Possible Owner for the added IP Address Resource</target>
        </trans-unit>
        <trans-unit id="390" translate="yes" xml:space="preserve">
          <source>Test failovers.</source>
          <target state="new">Test failovers.</target>
        </trans-unit>
        <trans-unit id="391" translate="yes" xml:space="preserve">
          <source>2. Utilize Existing Secondary Replica(s): Multi-Site</source>
          <target state="new">2. Utilize Existing Secondary Replica(s): Multi-Site</target>
        </trans-unit>
        <trans-unit id="392" translate="yes" xml:space="preserve">
          <source>If you have nodes in more than one Azure datacenter (DC) or if you have a hybrid environment, then you can use an AlwaysOn configuration in this environment to minimize downtime.</source>
          <target state="new">If you have nodes in more than one Azure datacenter (DC) or if you have a hybrid environment, then you can use an AlwaysOn configuration in this environment to minimize downtime.</target>
        </trans-unit>
        <trans-unit id="393" translate="yes" xml:space="preserve">
          <source>The approach is to change the AlwaysOn synchronization to Synchronous for the on-premises or secondary Azure DC, and then failover over to that SQL Server.</source>
          <target state="new">The approach is to change the AlwaysOn synchronization to Synchronous for the on-premises or secondary Azure DC, and then failover over to that SQL Server.</target>
        </trans-unit>
        <trans-unit id="394" translate="yes" xml:space="preserve">
          <source>Then copy the VHDs to a Premium Storage account, and redeploy the machine into a new cloud service.</source>
          <target state="new">Then copy the VHDs to a Premium Storage account, and redeploy the machine into a new cloud service.</target>
        </trans-unit>
        <trans-unit id="395" translate="yes" xml:space="preserve">
          <source>Update the listener, and then fail back.</source>
          <target state="new">Update the listener, and then fail back.</target>
        </trans-unit>
        <trans-unit id="396" translate="yes" xml:space="preserve">
          <source>Points of Downtime</source>
          <target state="new">Points of Downtime</target>
        </trans-unit>
        <trans-unit id="397" translate="yes" xml:space="preserve">
          <source>The downtime consists of the time to failover to the alternative DC and back.</source>
          <target state="new">The downtime consists of the time to failover to the alternative DC and back.</target>
        </trans-unit>
        <trans-unit id="398" translate="yes" xml:space="preserve">
          <source>It also depends on your client/DNS configuration and your client reconnection may be delayed.</source>
          <target state="new">It also depends on your client/DNS configuration and your client reconnection may be delayed.</target>
        </trans-unit>
        <trans-unit id="399" translate="yes" xml:space="preserve">
          <source>Consider the following example of a hybrid AlwaysOn configuration:</source>
          <target state="new">Consider the following example of a hybrid AlwaysOn configuration:</target>
        </trans-unit>
        <trans-unit id="400" translate="yes" xml:space="preserve">
          <source>![MultiSite1][9]</source>
          <target state="new">![MultiSite1][9]</target>
        </trans-unit>
        <trans-unit id="401" translate="yes" xml:space="preserve">
          <source>Advantages</source>
          <target state="new">Advantages</target>
        </trans-unit>
        <trans-unit id="402" translate="yes" xml:space="preserve">
          <source>You can utilize existing infrastructure.</source>
          <target state="new">You can utilize existing infrastructure.</target>
        </trans-unit>
        <trans-unit id="403" translate="yes" xml:space="preserve">
          <source>You have the option to pre-upgrade the Azure storage on the DR Azure DC first.</source>
          <target state="new">You have the option to pre-upgrade the Azure storage on the DR Azure DC first.</target>
        </trans-unit>
        <trans-unit id="404" translate="yes" xml:space="preserve">
          <source>The DR Azure DC storage can be reconfigured.</source>
          <target state="new">The DR Azure DC storage can be reconfigured.</target>
        </trans-unit>
        <trans-unit id="405" translate="yes" xml:space="preserve">
          <source>There is a minimum of two failovers during migration, excluding test failovers.</source>
          <target state="new">There is a minimum of two failovers during migration, excluding test failovers.</target>
        </trans-unit>
        <trans-unit id="406" translate="yes" xml:space="preserve">
          <source>You do not need to move SQL Server data with backup and restore.</source>
          <target state="new">You do not need to move SQL Server data with backup and restore.</target>
        </trans-unit>
        <trans-unit id="407" translate="yes" xml:space="preserve">
          <source>Disadvantages</source>
          <target state="new">Disadvantages</target>
        </trans-unit>
        <trans-unit id="408" translate="yes" xml:space="preserve">
          <source>Depending on client access to SQL Server, there might be increased latency when SQL Server is running in an alternative DC to the application.</source>
          <target state="new">Depending on client access to SQL Server, there might be increased latency when SQL Server is running in an alternative DC to the application.</target>
        </trans-unit>
        <trans-unit id="409" translate="yes" xml:space="preserve">
          <source>The copy time of VHDs to Premium storage could be long.</source>
          <target state="new">The copy time of VHDs to Premium storage could be long.</target>
        </trans-unit>
        <trans-unit id="410" translate="yes" xml:space="preserve">
          <source>This might affect your decision on whether to keep the node in the Availability Group.</source>
          <target state="new">This might affect your decision on whether to keep the node in the Availability Group.</target>
        </trans-unit>
        <trans-unit id="411" translate="yes" xml:space="preserve">
          <source>Consider this for when log intensive work loads are running during the migrationis required, since the Primary node will have to keep the unreplicated transactions in its transaction log.</source>
          <target state="new">Consider this for when log intensive work loads are running during the migrationis required, since the Primary node will have to keep the unreplicated transactions in its transaction log.</target>
        </trans-unit>
        <trans-unit id="412" translate="yes" xml:space="preserve">
          <source>Therefore this could grow significantly.</source>
          <target state="new">Therefore this could grow significantly.</target>
        </trans-unit>
        <trans-unit id="413" translate="yes" xml:space="preserve">
          <source>This scenario would use the Azure <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> commandlet, which is asynchronous.</source>
          <target state="new">This scenario would use the Azure <bpt id="p1">**</bpt>Start-AzureStorageBlobCopy<ept id="p1">**</ept> commandlet, which is asynchronous.</target>
        </trans-unit>
        <trans-unit id="414" translate="yes" xml:space="preserve">
          <source>There is no SLA on completion.</source>
          <target state="new">There is no SLA on completion.</target>
        </trans-unit>
        <trans-unit id="415" translate="yes" xml:space="preserve">
          <source>The time of the copies varies, while this depends on wait in queue, it will also depend on the amount of data to transfer.</source>
          <target state="new">The time of the copies varies, while this depends on wait in queue, it will also depend on the amount of data to transfer.</target>
        </trans-unit>
        <trans-unit id="416" translate="yes" xml:space="preserve">
          <source>Therefore you just have one node in your 2nd data center, you should take mitigation steps in case the copy takes longer than in testing.</source>
          <target state="new">Therefore you just have one node in your 2nd data center, you should take mitigation steps in case the copy takes longer than in testing.</target>
        </trans-unit>
        <trans-unit id="417" translate="yes" xml:space="preserve">
          <source>This could include the following ideas.</source>
          <target state="new">This could include the following ideas.</target>
        </trans-unit>
        <trans-unit id="418" translate="yes" xml:space="preserve">
          <source>Add a temporary 2nd SQL node for HA before the migration with agreed downtime.</source>
          <target state="new">Add a temporary 2nd SQL node for HA before the migration with agreed downtime.</target>
        </trans-unit>
        <trans-unit id="419" translate="yes" xml:space="preserve">
          <source>Run the migration outside of Azure scheduled maintenance.</source>
          <target state="new">Run the migration outside of Azure scheduled maintenance.</target>
        </trans-unit>
        <trans-unit id="420" translate="yes" xml:space="preserve">
          <source>Ensure you have configured your cluster quorum correctly.</source>
          <target state="new">Ensure you have configured your cluster quorum correctly.</target>
        </trans-unit>
        <trans-unit id="421" translate="yes" xml:space="preserve">
          <source>This scenario assumes that you have documented your install and know how the storage is mapped in order to make changes for optimal disk cache settings.</source>
          <target state="new">This scenario assumes that you have documented your install and know how the storage is mapped in order to make changes for optimal disk cache settings.</target>
        </trans-unit>
        <trans-unit id="422" translate="yes" xml:space="preserve">
          <source>High Level Steps</source>
          <target state="new">High Level Steps</target>
        </trans-unit>
        <trans-unit id="423" translate="yes" xml:space="preserve">
          <source>![Multisite2][10]</source>
          <target state="new">![Multisite2][10]</target>
        </trans-unit>
        <trans-unit id="424" translate="yes" xml:space="preserve">
          <source>Make the on-premises / alternate Azure DC the SQL Server Primary, and make it the other Auto Failover Partner (AFP).</source>
          <target state="new">Make the on-premises / alternate Azure DC the SQL Server Primary, and make it the other Auto Failover Partner (AFP).</target>
        </trans-unit>
        <trans-unit id="425" translate="yes" xml:space="preserve">
          <source>Gather disk configuration information from SQL2, and remove the node (do not delete attached VHDs).</source>
          <target state="new">Gather disk configuration information from SQL2, and remove the node (do not delete attached VHDs).</target>
        </trans-unit>
        <trans-unit id="426" translate="yes" xml:space="preserve">
          <source>Create a Premium Storage account and copy VHDs from the Standard Storage account.</source>
          <target state="new">Create a Premium Storage account and copy VHDs from the Standard Storage account.</target>
        </trans-unit>
        <trans-unit id="427" translate="yes" xml:space="preserve">
          <source>Create a new cloud service and create the SQL2 VM with its Premiums Storage disks attached.</source>
          <target state="new">Create a new cloud service and create the SQL2 VM with its Premiums Storage disks attached.</target>
        </trans-unit>
        <trans-unit id="428" translate="yes" xml:space="preserve">
          <source>Configure ILB / ELB and add Endpoints.</source>
          <target state="new">Configure ILB / ELB and add Endpoints.</target>
        </trans-unit>
        <trans-unit id="429" translate="yes" xml:space="preserve">
          <source>Update the AlwaysOn Listener with new ILB / ELB IP address and test failover.</source>
          <target state="new">Update the AlwaysOn Listener with new ILB / ELB IP address and test failover.</target>
        </trans-unit>
        <trans-unit id="430" translate="yes" xml:space="preserve">
          <source>Check the DNS configuration.</source>
          <target state="new">Check the DNS configuration.</target>
        </trans-unit>
        <trans-unit id="431" translate="yes" xml:space="preserve">
          <source>Change the AFP to SQL2, and then migrate SQL1 and go through steps 2 – 5.</source>
          <target state="new">Change the AFP to SQL2, and then migrate SQL1 and go through steps 2 – 5.</target>
        </trans-unit>
        <trans-unit id="432" translate="yes" xml:space="preserve">
          <source>Test failovers.</source>
          <target state="new">Test failovers.</target>
        </trans-unit>
        <trans-unit id="433" translate="yes" xml:space="preserve">
          <source>Switch the AFP back to SQL1 and SQL2</source>
          <target state="new">Switch the AFP back to SQL1 and SQL2</target>
        </trans-unit>
        <trans-unit id="434" translate="yes" xml:space="preserve">
          <source>Appendix: Migrating a Multisite AlwaysOn Cluster to Premium Storage</source>
          <target state="new">Appendix: Migrating a Multisite AlwaysOn Cluster to Premium Storage</target>
        </trans-unit>
        <trans-unit id="435" translate="yes" xml:space="preserve">
          <source>The remainder of this topic provides a detailed example of converting a multi-site AlwaysOn cluster to Premium storage.</source>
          <target state="new">The remainder of this topic provides a detailed example of converting a multi-site AlwaysOn cluster to Premium storage.</target>
        </trans-unit>
        <trans-unit id="436" translate="yes" xml:space="preserve">
          <source>It also converts the Listener from using an external load balancer (ELB) to an internal load balancer (ILB).</source>
          <target state="new">It also converts the Listener from using an external load balancer (ELB) to an internal load balancer (ILB).</target>
        </trans-unit>
        <trans-unit id="437" translate="yes" xml:space="preserve">
          <source>Environment</source>
          <target state="new">Environment</target>
        </trans-unit>
        <trans-unit id="438" translate="yes" xml:space="preserve">
          <source>Windows 2k12 / SQL 2k12</source>
          <target state="new">Windows 2k12 / SQL 2k12</target>
        </trans-unit>
        <trans-unit id="439" translate="yes" xml:space="preserve">
          <source>1 DB Files on SP</source>
          <target state="new">1 DB Files on SP</target>
        </trans-unit>
        <trans-unit id="440" translate="yes" xml:space="preserve">
          <source>2 x Storage Pools per Node</source>
          <target state="new">2 x Storage Pools per Node</target>
        </trans-unit>
        <trans-unit id="441" translate="yes" xml:space="preserve">
          <source>![Appendix1][11]</source>
          <target state="new">![Appendix1][11]</target>
        </trans-unit>
        <trans-unit id="442" translate="yes" xml:space="preserve">
          <source>VM:</source>
          <target state="new">VM:</target>
        </trans-unit>
        <trans-unit id="443" translate="yes" xml:space="preserve">
          <source>In this example we are going to demonstrate moving from an ELB to ILB.</source>
          <target state="new">In this example we are going to demonstrate moving from an ELB to ILB.</target>
        </trans-unit>
        <trans-unit id="444" translate="yes" xml:space="preserve">
          <source>ELB was available before ILB, so this shows how to switch to this during the migration.</source>
          <target state="new">ELB was available before ILB, so this shows how to switch to this during the migration.</target>
        </trans-unit>
        <trans-unit id="445" translate="yes" xml:space="preserve">
          <source>![Appendix2][12]</source>
          <target state="new">![Appendix2][12]</target>
        </trans-unit>
        <trans-unit id="446" translate="yes" xml:space="preserve">
          <source>Pre Steps: Connect to Subscription</source>
          <target state="new">Pre Steps: Connect to Subscription</target>
        </trans-unit>
        <trans-unit id="447" translate="yes" xml:space="preserve">
          <source>Step 1: Create New Storage Account and Cloud Service</source>
          <target state="new">Step 1: Create New Storage Account and Cloud Service</target>
        </trans-unit>
        <trans-unit id="448" translate="yes" xml:space="preserve">
          <source>Step 2: Increase the Permitted Failures on Resources</source>
          <target state="new">Step 2: Increase the Permitted Failures on Resources</target>
        </trans-unit>
        <trans-unit id="449" translate="yes" xml:space="preserve">
          <source>On certain resources that belong to your AlwaysOn Availability Group there are limits on how many failures that can occur in a period, where the cluster service will attempt to restart the resource group.</source>
          <target state="new">On certain resources that belong to your AlwaysOn Availability Group there are limits on how many failures that can occur in a period, where the cluster service will attempt to restart the resource group.</target>
        </trans-unit>
        <trans-unit id="450" translate="yes" xml:space="preserve">
          <source>It is recommended you increase this whilst you are walking through this procedure, since if you don’t manually failover and trigger failovers by shutting down machines you can get close to this limit.</source>
          <target state="new">It is recommended you increase this whilst you are walking through this procedure, since if you don’t manually failover and trigger failovers by shutting down machines you can get close to this limit.</target>
        </trans-unit>
        <trans-unit id="451" translate="yes" xml:space="preserve">
          <source>It would be prudent to double the failure allowance, to do this in Failover Cluster Manager, go to the Properties of the AlwaysOn resource group:</source>
          <target state="new">It would be prudent to double the failure allowance, to do this in Failover Cluster Manager, go to the Properties of the AlwaysOn resource group:</target>
        </trans-unit>
        <trans-unit id="452" translate="yes" xml:space="preserve">
          <source>![Appendix3][13]</source>
          <target state="new">![Appendix3][13]</target>
        </trans-unit>
        <trans-unit id="453" translate="yes" xml:space="preserve">
          <source>Change the Maximum Failures to 6.</source>
          <target state="new">Change the Maximum Failures to 6.</target>
        </trans-unit>
        <trans-unit id="454" translate="yes" xml:space="preserve">
          <source>Step 3: Addition IP Address Resource for Cluster Group</source>
          <target state="new">Step 3: Addition IP Address Resource for Cluster Group</target>
        </trans-unit>
        <trans-unit id="455" translate="yes" xml:space="preserve">
          <source>If you have only one IP address for the Cluster Group and this is aligned to the cloud subnet, beware, if you accidentally take offline all cluster nodes in the cloud on that network then the Cluster IP resource and Cluster Network Name will not be able to come online.</source>
          <target state="new">If you have only one IP address for the Cluster Group and this is aligned to the cloud subnet, beware, if you accidentally take offline all cluster nodes in the cloud on that network then the Cluster IP resource and Cluster Network Name will not be able to come online.</target>
        </trans-unit>
        <trans-unit id="456" translate="yes" xml:space="preserve">
          <source>In the event of this it will prevent updates to other cluster resources.</source>
          <target state="new">In the event of this it will prevent updates to other cluster resources.</target>
        </trans-unit>
        <trans-unit id="457" translate="yes" xml:space="preserve">
          <source>Step 4: DNS Configuration</source>
          <target state="new">Step 4: DNS Configuration</target>
        </trans-unit>
        <trans-unit id="458" translate="yes" xml:space="preserve">
          <source>To implement a smooth transition depends on how DNS is being utilised and updated.</source>
          <target state="new">To implement a smooth transition depends on how DNS is being utilised and updated.</target>
        </trans-unit>
        <trans-unit id="459" translate="yes" xml:space="preserve">
          <source>When AlwaysOn is installed, it creates a Windows Cluster Resource group, if you open Failover Cluster Manager, you will see that at a minimum it will have three resources, the two that the document refers to are:</source>
          <target state="new">When AlwaysOn is installed, it creates a Windows Cluster Resource group, if you open Failover Cluster Manager, you will see that at a minimum it will have three resources, the two that the document refers to are:</target>
        </trans-unit>
        <trans-unit id="460" translate="yes" xml:space="preserve">
          <source>Virtual Network Name (VNN) – This is the DNS name that client connect to when wanting to connect to SQL Servers via AlwaysOn.</source>
          <target state="new">Virtual Network Name (VNN) – This is the DNS name that client connect to when wanting to connect to SQL Servers via AlwaysOn.</target>
        </trans-unit>
        <trans-unit id="461" translate="yes" xml:space="preserve">
          <source>IP Address Resource – This is the IP address that associated with the VNN, you can have more than one, and in a multisite configuration you will have an IP address per site/subnet.</source>
          <target state="new">IP Address Resource – This is the IP address that associated with the VNN, you can have more than one, and in a multisite configuration you will have an IP address per site/subnet.</target>
        </trans-unit>
        <trans-unit id="462" translate="yes" xml:space="preserve">
          <source>When connecting to SQL Sevrer, the SQL Server Client driver will retrieve the DNS records associated with the listener and try to connect to each AlwaysOn associated IP address, below we discuss some factors that can influence this.</source>
          <target state="new">When connecting to SQL Sevrer, the SQL Server Client driver will retrieve the DNS records associated with the listener and try to connect to each AlwaysOn associated IP address, below we discuss some factors that can influence this.</target>
        </trans-unit>
        <trans-unit id="463" translate="yes" xml:space="preserve">
          <source>The number of concurrent DNS records that are associated with the listener name depends not only on the number of IP addresses associated, but the ‘RegisterAllIpProviders’setting in Failover Clustering for the AlwaysON VNN resource.</source>
          <target state="new">The number of concurrent DNS records that are associated with the listener name depends not only on the number of IP addresses associated, but the ‘RegisterAllIpProviders’setting in Failover Clustering for the AlwaysON VNN resource.</target>
        </trans-unit>
        <trans-unit id="464" translate="yes" xml:space="preserve">
          <source>When you deploy AlwaysOn in Azure there are different steps to create the Listener and IP Addresses, you have to manually configure the ‘RegisterAllIpProviders’ to 1, this is different to an on premise AlwaysOn deployment where it is already set to 1.</source>
          <target state="new">When you deploy AlwaysOn in Azure there are different steps to create the Listener and IP Addresses, you have to manually configure the ‘RegisterAllIpProviders’ to 1, this is different to an on premise AlwaysOn deployment where it is already set to 1.</target>
        </trans-unit>
        <trans-unit id="465" translate="yes" xml:space="preserve">
          <source>If ‘RegisterAllIpProviders’ is 0, then you will only see one DNS record in DNS associated with the Listener:</source>
          <target state="new">If ‘RegisterAllIpProviders’ is 0, then you will only see one DNS record in DNS associated with the Listener:</target>
        </trans-unit>
        <trans-unit id="466" translate="yes" xml:space="preserve">
          <source>![Appendix4][14]</source>
          <target state="new">![Appendix4][14]</target>
        </trans-unit>
        <trans-unit id="467" translate="yes" xml:space="preserve">
          <source>If ‘RegisterAllIpProviders’ is 1:</source>
          <target state="new">If ‘RegisterAllIpProviders’ is 1:</target>
        </trans-unit>
        <trans-unit id="468" translate="yes" xml:space="preserve">
          <source>![Appendix5][15]</source>
          <target state="new">![Appendix5][15]</target>
        </trans-unit>
        <trans-unit id="469" translate="yes" xml:space="preserve">
          <source>The code below will dump out the VNN settings and set it for you, please note, for the change to take effect you will need to take the the VNN offline and turn it back online, this taking the Listener offline causing client connectivity disruption.</source>
          <target state="new">The code below will dump out the VNN settings and set it for you, please note, for the change to take effect you will need to take the the VNN offline and turn it back online, this taking the Listener offline causing client connectivity disruption.</target>
        </trans-unit>
        <trans-unit id="470" translate="yes" xml:space="preserve">
          <source>In a later migration step you will need to update the AlwaysOn listener with an updated IP address that will reference a load balancer, this will involve an IP Address resource removal and addition.</source>
          <target state="new">In a later migration step you will need to update the AlwaysOn listener with an updated IP address that will reference a load balancer, this will involve an IP Address resource removal and addition.</target>
        </trans-unit>
        <trans-unit id="471" translate="yes" xml:space="preserve">
          <source>After the IP update, you need to ensure the new IP address has been updated in DNS Zone and that the clients are updating their local DNS cache.</source>
          <target state="new">After the IP update, you need to ensure the new IP address has been updated in DNS Zone and that the clients are updating their local DNS cache.</target>
        </trans-unit>
        <trans-unit id="472" translate="yes" xml:space="preserve">
          <source>If you clients reside in a different network segment and reference a different DNS server, you need to consider what happens about DNS Zone Transfer during the migration, as the application reconnect time will be constrained by at least the Zone Transfer Time of any new IP addresses for the listener.</source>
          <target state="new">If you clients reside in a different network segment and reference a different DNS server, you need to consider what happens about DNS Zone Transfer during the migration, as the application reconnect time will be constrained by at least the Zone Transfer Time of any new IP addresses for the listener.</target>
        </trans-unit>
        <trans-unit id="473" translate="yes" xml:space="preserve">
          <source>If you are under time constraint here, you should discuss and test forcing an incremental zone transfer with your Windows teams, and also put the DNS host record to a lower Time To Live (TTL), so the clients update.</source>
          <target state="new">If you are under time constraint here, you should discuss and test forcing an incremental zone transfer with your Windows teams, and also put the DNS host record to a lower Time To Live (TTL), so the clients update.</target>
        </trans-unit>
        <trans-unit id="474" translate="yes" xml:space="preserve">
          <source>For more information, see <bpt id="p1">[</bpt>Incremental Zone Transfers<ept id="p1">](https://technet.microsoft.com/library/cc958973.aspx)</ept> and <bpt id="p2">[</bpt>Start-DnsServerZoneTransfer<ept id="p2">](https://technet.microsoft.com/library/jj649917.aspx)</ept>.</source>
          <target state="new">For more information, see <bpt id="p1">[</bpt>Incremental Zone Transfers<ept id="p1">](https://technet.microsoft.com/library/cc958973.aspx)</ept> and <bpt id="p2">[</bpt>Start-DnsServerZoneTransfer<ept id="p2">](https://technet.microsoft.com/library/jj649917.aspx)</ept>.</target>
        </trans-unit>
        <trans-unit id="475" translate="yes" xml:space="preserve">
          <source>By default the TTL for DNS Record that is associated with the Listener in AlwaysOn in Azure is 1200 seconds.</source>
          <target state="new">By default the TTL for DNS Record that is associated with the Listener in AlwaysOn in Azure is 1200 seconds.</target>
        </trans-unit>
        <trans-unit id="476" translate="yes" xml:space="preserve">
          <source>You may wish to reduce this if you are under time constraint during your migration to ensure the clients update their DNS with the updated IP address for the listener.</source>
          <target state="new">You may wish to reduce this if you are under time constraint during your migration to ensure the clients update their DNS with the updated IP address for the listener.</target>
        </trans-unit>
        <trans-unit id="477" translate="yes" xml:space="preserve">
          <source>You can see and modify the configuration by dumping out the configuration of the VNN:</source>
          <target state="new">You can see and modify the configuration by dumping out the configuration of the VNN:</target>
        </trans-unit>
        <trans-unit id="478" translate="yes" xml:space="preserve">
          <source>Please note, the lower the ‘HostRecordTTL’, a higher amount of DNS traffic will occur.</source>
          <target state="new">Please note, the lower the ‘HostRecordTTL’, a higher amount of DNS traffic will occur.</target>
        </trans-unit>
        <trans-unit id="479" translate="yes" xml:space="preserve">
          <source>Client Application Settings</source>
          <target state="new">Client Application Settings</target>
        </trans-unit>
        <trans-unit id="480" translate="yes" xml:space="preserve">
          <source>If your SQL client application supports the .Net 4.5 SQLClient, then you can use ‘MULTISUBNETFAILOVER=TRUE’ keyword, this is recommended to be applied as it allows for faster connection to SQL AlwaysOn Availability Group during failover.</source>
          <target state="new">If your SQL client application supports the .Net 4.5 SQLClient, then you can use ‘MULTISUBNETFAILOVER=TRUE’ keyword, this is recommended to be applied as it allows for faster connection to SQL AlwaysOn Availability Group during failover.</target>
        </trans-unit>
        <trans-unit id="481" translate="yes" xml:space="preserve">
          <source>It enumerates through all IP addresses associated with the AlwaysOn listener in parallel, and performs a more aggressive TCP connection retry speed during a failover.</source>
          <target state="new">It enumerates through all IP addresses associated with the AlwaysOn listener in parallel, and performs a more aggressive TCP connection retry speed during a failover.</target>
        </trans-unit>
        <trans-unit id="482" translate="yes" xml:space="preserve">
          <source>For more information regarding the settings above, please see <bpt id="p1">[</bpt>MultiSubnetFailover Keyword and Associated Features<ept id="p1">](https://msdn.microsoft.com/library/hh213080.aspx#MultiSubnetFailover)</ept>.</source>
          <target state="new">For more information regarding the settings above, please see <bpt id="p1">[</bpt>MultiSubnetFailover Keyword and Associated Features<ept id="p1">](https://msdn.microsoft.com/library/hh213080.aspx#MultiSubnetFailover)</ept>.</target>
        </trans-unit>
        <trans-unit id="483" translate="yes" xml:space="preserve">
          <source>Also see <bpt id="p1">[</bpt>SqlClient Support for High Availability, Disaster Recovery<ept id="p1">](https://msdn.microsoft.com/library/hh205662(v=vs.110).aspx)</ept>.</source>
          <target state="new">Also see <bpt id="p1">[</bpt>SqlClient Support for High Availability, Disaster Recovery<ept id="p1">](https://msdn.microsoft.com/library/hh205662(v=vs.110).aspx)</ept>.</target>
        </trans-unit>
        <trans-unit id="484" translate="yes" xml:space="preserve">
          <source>Step 5: Cluster Quorum Settings</source>
          <target state="new">Step 5: Cluster Quorum Settings</target>
        </trans-unit>
        <trans-unit id="485" translate="yes" xml:space="preserve">
          <source>As you are going to be taking out at least one SQL Server down at a time, you should modify the cluster quorum setting, if using File Share Witnes (FSW) with 2 nodes, you should set the quorum to allow node majority and utilise dynamic voting, and this is to allow for a single node to remain standing.</source>
          <target state="new">As you are going to be taking out at least one SQL Server down at a time, you should modify the cluster quorum setting, if using File Share Witnes (FSW) with 2 nodes, you should set the quorum to allow node majority and utilise dynamic voting, and this is to allow for a single node to remain standing.</target>
        </trans-unit>
        <trans-unit id="486" translate="yes" xml:space="preserve">
          <source>For more information on managing and configuring the cluster quorum, please see <bpt id="p1">[</bpt>Configure and Manage the Quorum in a Windows Server 2012 Failover Cluster<ept id="p1">](https://technet.microsoft.com/en-us/library/jj612870.aspx)</ept>.</source>
          <target state="new">For more information on managing and configuring the cluster quorum, please see <bpt id="p1">[</bpt>Configure and Manage the Quorum in a Windows Server 2012 Failover Cluster<ept id="p1">](https://technet.microsoft.com/en-us/library/jj612870.aspx)</ept>.</target>
        </trans-unit>
        <trans-unit id="487" translate="yes" xml:space="preserve">
          <source>Step 6: Extract Existing Endpoints and ACLs</source>
          <target state="new">Step 6: Extract Existing Endpoints and ACLs</target>
        </trans-unit>
        <trans-unit id="488" translate="yes" xml:space="preserve">
          <source>Save these to a text file.</source>
          <target state="new">Save these to a text file.</target>
        </trans-unit>
        <trans-unit id="489" translate="yes" xml:space="preserve">
          <source>Step 7: Change Failover Partners and Replication Modes</source>
          <target state="new">Step 7: Change Failover Partners and Replication Modes</target>
        </trans-unit>
        <trans-unit id="490" translate="yes" xml:space="preserve">
          <source>If you have more than 2 SQL Servers, you should change the failover of another secondary in another DC or on premise to ‘Synchronous’ and make it an Automatic Failover Partner (AFP), this is so you maintain HA whilst you are making changes.</source>
          <target state="new">If you have more than 2 SQL Servers, you should change the failover of another secondary in another DC or on premise to ‘Synchronous’ and make it an Automatic Failover Partner (AFP), this is so you maintain HA whilst you are making changes.</target>
        </trans-unit>
        <trans-unit id="491" translate="yes" xml:space="preserve">
          <source>You can do this through TSQL of modify though SSMS:</source>
          <target state="new">You can do this through TSQL of modify though SSMS:</target>
        </trans-unit>
        <trans-unit id="492" translate="yes" xml:space="preserve">
          <source>![Appendix6][16]</source>
          <target state="new">![Appendix6][16]</target>
        </trans-unit>
        <trans-unit id="493" translate="yes" xml:space="preserve">
          <source>Step 8: Remove Secondary VM from Cloud Service</source>
          <target state="new">Step 8: Remove Secondary VM from Cloud Service</target>
        </trans-unit>
        <trans-unit id="494" translate="yes" xml:space="preserve">
          <source>You should be planning to migrate a cloud secondary node first, if this is currently primary, you should initiate a manual failover.</source>
          <target state="new">You should be planning to migrate a cloud secondary node first, if this is currently primary, you should initiate a manual failover.</target>
        </trans-unit>
        <trans-unit id="495" translate="yes" xml:space="preserve">
          <source>Step 9: Change Disk Caching Settings in CSV file and Save</source>
          <target state="new">Step 9: Change Disk Caching Settings in CSV file and Save</target>
        </trans-unit>
        <trans-unit id="496" translate="yes" xml:space="preserve">
          <source>For data volumes these should be set to READONLY.</source>
          <target state="new">For data volumes these should be set to READONLY.</target>
        </trans-unit>
        <trans-unit id="497" translate="yes" xml:space="preserve">
          <source>For TLOG volumes these should be set to NONE.</source>
          <target state="new">For TLOG volumes these should be set to NONE.</target>
        </trans-unit>
        <trans-unit id="498" translate="yes" xml:space="preserve">
          <source>![Appendix7][17]</source>
          <target state="new">![Appendix7][17]</target>
        </trans-unit>
        <trans-unit id="499" translate="yes" xml:space="preserve">
          <source>Step 10: Copy VHDS</source>
          <target state="new">Step 10: Copy VHDS</target>
        </trans-unit>
        <trans-unit id="500" translate="yes" xml:space="preserve">
          <source>You can check the copy status of the VHDs to the Premium Storage account:</source>
          <target state="new">You can check the copy status of the VHDs to the Premium Storage account:</target>
        </trans-unit>
        <trans-unit id="501" translate="yes" xml:space="preserve">
          <source>![Appendix8][18]</source>
          <target state="new">![Appendix8][18]</target>
        </trans-unit>
        <trans-unit id="502" translate="yes" xml:space="preserve">
          <source>Wait until all these are recorded as success.</source>
          <target state="new">Wait until all these are recorded as success.</target>
        </trans-unit>
        <trans-unit id="503" translate="yes" xml:space="preserve">
          <source>For information for individual blobs:</source>
          <target state="new">For information for individual blobs:</target>
        </trans-unit>
        <trans-unit id="504" translate="yes" xml:space="preserve">
          <source>Step 11: Register OS Disk</source>
          <target state="new">Step 11: Register OS Disk</target>
        </trans-unit>
        <trans-unit id="505" translate="yes" xml:space="preserve">
          <source>Step 12: Import Secondary into New Cloud Service</source>
          <target state="new">Step 12: Import Secondary into New Cloud Service</target>
        </trans-unit>
        <trans-unit id="506" translate="yes" xml:space="preserve">
          <source>The code below also uses the added option here you can import the machine and use the retainable VIP.</source>
          <target state="new">The code below also uses the added option here you can import the machine and use the retainable VIP.</target>
        </trans-unit>
        <trans-unit id="507" translate="yes" xml:space="preserve">
          <source>Step 13: Create ILB on New Cloud Svc, Add Load Balanced Endpoints and ACLs</source>
          <target state="new">Step 13: Create ILB on New Cloud Svc, Add Load Balanced Endpoints and ACLs</target>
        </trans-unit>
        <trans-unit id="508" translate="yes" xml:space="preserve">
          <source>Step 14: Update AlwaysOn</source>
          <target state="new">Step 14: Update AlwaysOn</target>
        </trans-unit>
        <trans-unit id="509" translate="yes" xml:space="preserve">
          <source>Code to be executed on a Cluster Node</source>
          <target state="new">Code to be executed on a Cluster Node</target>
        </trans-unit>
        <trans-unit id="510" translate="yes" xml:space="preserve">
          <source>$ClusterNetworkNameAmsterdam = "Cluster Network 2" # the azure cluster subnet network name</source>
          <target state="new">$ClusterNetworkNameAmsterdam = "Cluster Network 2" # the azure cluster subnet network name</target>
        </trans-unit>
        <trans-unit id="511" translate="yes" xml:space="preserve">
          <source>$newCloudServiceIPAmsterdam = "192.168.0.25" # IP address of your cloud service</source>
          <target state="new">$newCloudServiceIPAmsterdam = "192.168.0.25" # IP address of your cloud service</target>
        </trans-unit>
        <trans-unit id="512" translate="yes" xml:space="preserve">
          <source>![Appendix9][19]</source>
          <target state="new">![Appendix9][19]</target>
        </trans-unit>
        <trans-unit id="513" translate="yes" xml:space="preserve">
          <source>Now remove the old cloud service IP Address.</source>
          <target state="new">Now remove the old cloud service IP Address.</target>
        </trans-unit>
        <trans-unit id="514" translate="yes" xml:space="preserve">
          <source>![Appendix10][20]</source>
          <target state="new">![Appendix10][20]</target>
        </trans-unit>
        <trans-unit id="515" translate="yes" xml:space="preserve">
          <source>Step 15: DNS Update Check</source>
          <target state="new">Step 15: DNS Update Check</target>
        </trans-unit>
        <trans-unit id="516" translate="yes" xml:space="preserve">
          <source>You should now check DNS Servers on your SQL Server client networks and make sure that clustering has added the extra host record for the added IP address.</source>
          <target state="new">You should now check DNS Servers on your SQL Server client networks and make sure that clustering has added the extra host record for the added IP address.</target>
        </trans-unit>
        <trans-unit id="517" translate="yes" xml:space="preserve">
          <source>If those DNS servers have not updated, consider forcing a DNS Zone transfer and ensure that the clients in there subnet are able to resolve to both AlwaysOn IP Addresses, this is so you do not need to wait for automatic DNS replication.</source>
          <target state="new">If those DNS servers have not updated, consider forcing a DNS Zone transfer and ensure that the clients in there subnet are able to resolve to both AlwaysOn IP Addresses, this is so you do not need to wait for automatic DNS replication.</target>
        </trans-unit>
        <trans-unit id="518" translate="yes" xml:space="preserve">
          <source>Step 16: Reconfigure AlwaysOn</source>
          <target state="new">Step 16: Reconfigure AlwaysOn</target>
        </trans-unit>
        <trans-unit id="519" translate="yes" xml:space="preserve">
          <source>At this point you wait for the secondary that node that was migrated to fully resynchronise with the on-premise node and switch to synchronous replication node and make it the AFP.</source>
          <target state="new">At this point you wait for the secondary that node that was migrated to fully resynchronise with the on-premise node and switch to synchronous replication node and make it the AFP.</target>
        </trans-unit>
        <trans-unit id="520" translate="yes" xml:space="preserve">
          <source>Step 17: Migrate Second Node</source>
          <target state="new">Step 17: Migrate Second Node</target>
        </trans-unit>
        <trans-unit id="521" translate="yes" xml:space="preserve">
          <source>Step 18: Change Disk Caching Settings in CSV file and Save</source>
          <target state="new">Step 18: Change Disk Caching Settings in CSV file and Save</target>
        </trans-unit>
        <trans-unit id="522" translate="yes" xml:space="preserve">
          <source>For data volumes these should be set to READONLY.</source>
          <target state="new">For data volumes these should be set to READONLY.</target>
        </trans-unit>
        <trans-unit id="523" translate="yes" xml:space="preserve">
          <source>For TLOG volumes these should be set to NONE.</source>
          <target state="new">For TLOG volumes these should be set to NONE.</target>
        </trans-unit>
        <trans-unit id="524" translate="yes" xml:space="preserve">
          <source>![Appendix11][21]</source>
          <target state="new">![Appendix11][21]</target>
        </trans-unit>
        <trans-unit id="525" translate="yes" xml:space="preserve">
          <source>Step 19: Create New Independent Storage Account for Secondary Node</source>
          <target state="new">Step 19: Create New Independent Storage Account for Secondary Node</target>
        </trans-unit>
        <trans-unit id="526" translate="yes" xml:space="preserve">
          <source>Step 20: Copy VHDS</source>
          <target state="new">Step 20: Copy VHDS</target>
        </trans-unit>
        <trans-unit id="527" translate="yes" xml:space="preserve">
          <source>You can check the VHD copy status for all VHDs:</source>
          <target state="new">You can check the VHD copy status for all VHDs:</target>
        </trans-unit>
        <trans-unit id="528" translate="yes" xml:space="preserve">
          <source>ForEach ($disk in $diskobjects)</source>
          <target state="new">ForEach ($disk in $diskobjects)</target>
        </trans-unit>
        <trans-unit id="529" translate="yes" xml:space="preserve">
          <source>{</source>
          <target state="new">{</target>
        </trans-unit>
        <trans-unit id="530" translate="yes" xml:space="preserve">
          <source>$lun = $disk.Lun</source>
          <target state="new">$lun = $disk.Lun</target>
        </trans-unit>
        <trans-unit id="531" translate="yes" xml:space="preserve">
          <source>$vhdname = $disk.vhdname</source>
          <target state="new">$vhdname = $disk.vhdname</target>
        </trans-unit>
        <trans-unit id="532" translate="yes" xml:space="preserve">
          <source>$cacheoption = $disk.HostCaching</source>
          <target state="new">$cacheoption = $disk.HostCaching</target>
        </trans-unit>
        <trans-unit id="533" translate="yes" xml:space="preserve">
          <source>$disklabel = $disk.DiskLabel</source>
          <target state="new">$disklabel = $disk.DiskLabel</target>
        </trans-unit>
        <trans-unit id="534" translate="yes" xml:space="preserve">
          <source>$diskName = $disk.DiskName</source>
          <target state="new">$diskName = $disk.DiskName</target>
        </trans-unit>
        <trans-unit id="535" translate="yes" xml:space="preserve">
          <source>![Appendix12][22]</source>
          <target state="new">![Appendix12][22]</target>
        </trans-unit>
        <trans-unit id="536" translate="yes" xml:space="preserve">
          <source>Wait until all these are recorded as success.</source>
          <target state="new">Wait until all these are recorded as success.</target>
        </trans-unit>
        <trans-unit id="537" translate="yes" xml:space="preserve">
          <source>For information for individual blobs:</source>
          <target state="new">For information for individual blobs:</target>
        </trans-unit>
        <trans-unit id="538" translate="yes" xml:space="preserve">
          <source>Check induvidual blob status</source>
          <target state="new">Check induvidual blob status</target>
        </trans-unit>
        <trans-unit id="539" translate="yes" xml:space="preserve">
          <source>Get-AzureStorageBlobCopyState -Blob "danRegSvcAms-dansqlams1-2014-07-03.vhd" -Container $containerName -Context $xioContextnode2</source>
          <target state="new">Get-AzureStorageBlobCopyState -Blob "danRegSvcAms-dansqlams1-2014-07-03.vhd" -Container $containerName -Context $xioContextnode2</target>
        </trans-unit>
        <trans-unit id="540" translate="yes" xml:space="preserve">
          <source>Step 21: Register OS Disk</source>
          <target state="new">Step 21: Register OS Disk</target>
        </trans-unit>
        <trans-unit id="541" translate="yes" xml:space="preserve">
          <source>Step 22: Add Load Balanced Endpoints and ACLs</source>
          <target state="new">Step 22: Add Load Balanced Endpoints and ACLs</target>
        </trans-unit>
        <trans-unit id="542" translate="yes" xml:space="preserve">
          <source>Step 23: Test Failover</source>
          <target state="new">Step 23: Test Failover</target>
        </trans-unit>
        <trans-unit id="543" translate="yes" xml:space="preserve">
          <source>You should now let the migrated node synchronise with the on-premise AlwaysOn node, place it in to synchronous replication mode and wait until it is synchronised.</source>
          <target state="new">You should now let the migrated node synchronise with the on-premise AlwaysOn node, place it in to synchronous replication mode and wait until it is synchronised.</target>
        </trans-unit>
        <trans-unit id="544" translate="yes" xml:space="preserve">
          <source>Then failover from on-prem to the first node migrated, which is the AFP.</source>
          <target state="new">Then failover from on-prem to the first node migrated, which is the AFP.</target>
        </trans-unit>
        <trans-unit id="545" translate="yes" xml:space="preserve">
          <source>Once that has worked, change the last migrated node to the AFP.</source>
          <target state="new">Once that has worked, change the last migrated node to the AFP.</target>
        </trans-unit>
        <trans-unit id="546" translate="yes" xml:space="preserve">
          <source>You should test failovers between all nodes and run though chaos tests to ensure failovers work as expected and in a timely manor.</source>
          <target state="new">You should test failovers between all nodes and run though chaos tests to ensure failovers work as expected and in a timely manor.</target>
        </trans-unit>
        <trans-unit id="547" translate="yes" xml:space="preserve">
          <source>Step 24: Put back cluster quorum settings / DNS TTL / Failover Pntrs / Sync Settings</source>
          <target state="new">Step 24: Put back cluster quorum settings / DNS TTL / Failover Pntrs / Sync Settings</target>
        </trans-unit>
        <trans-unit id="548" translate="yes" xml:space="preserve">
          <source>Adding IP Address Resource on Same Subnet</source>
          <target state="new">Adding IP Address Resource on Same Subnet</target>
        </trans-unit>
        <trans-unit id="549" translate="yes" xml:space="preserve">
          <source>If you have only 2 SQL Servers and want to migrate them to a new cloud service, but want to keep them on the same subnet, you can avoid taking the listener offline to delete the original AlwaysOn IP Address and add the New IP Address.</source>
          <target state="new">If you have only 2 SQL Servers and want to migrate them to a new cloud service, but want to keep them on the same subnet, you can avoid taking the listener offline to delete the original AlwaysOn IP Address and add the New IP Address.</target>
        </trans-unit>
        <trans-unit id="550" translate="yes" xml:space="preserve">
          <source>If you are migrating the VMs to another subnet you will not need to do this as there will be an additional cluster network that will reference that subnet.</source>
          <target state="new">If you are migrating the VMs to another subnet you will not need to do this as there will be an additional cluster network that will reference that subnet.</target>
        </trans-unit>
        <trans-unit id="551" translate="yes" xml:space="preserve">
          <source>Once you have brought up the migrated secondary and added in the new IP Address resource for the new cloud service before failover the existing Primary, you should take these steps within the Cluster Failover Manager:</source>
          <target state="new">Once you have brought up the migrated secondary and added in the new IP Address resource for the new cloud service before failover the existing Primary, you should take these steps within the Cluster Failover Manager:</target>
        </trans-unit>
        <trans-unit id="552" translate="yes" xml:space="preserve">
          <source>To add in IP Address, see the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>, step 14.</source>
          <target state="new">To add in IP Address, see the <bpt id="p1">[</bpt>Appendix<ept id="p1">](#appendix-migrating-a-multisite-alwayson-cluster-to-premium-storage)</ept>, step 14.</target>
        </trans-unit>
        <trans-unit id="553" translate="yes" xml:space="preserve">
          <source>For the current IP Address resource change the possible owner to ‘Existing Primary SQL Server’, in the example below, ‘dansqlams4’:</source>
          <target state="new">For the current IP Address resource change the possible owner to ‘Existing Primary SQL Server’, in the example below, ‘dansqlams4’:</target>
        </trans-unit>
        <trans-unit id="554" translate="yes" xml:space="preserve">
          <source>![Appendix13][23]</source>
          <target state="new">![Appendix13][23]</target>
        </trans-unit>
        <trans-unit id="555" translate="yes" xml:space="preserve">
          <source>For the new IP Address resource  change the possible owner to ‘Migrated secondary SQL Server’, in the example below, ‘dansqlams5’:</source>
          <target state="new">For the new IP Address resource  change the possible owner to ‘Migrated secondary SQL Server’, in the example below, ‘dansqlams5’:</target>
        </trans-unit>
        <trans-unit id="556" translate="yes" xml:space="preserve">
          <source>![Appendix14][24]</source>
          <target state="new">![Appendix14][24]</target>
        </trans-unit>
        <trans-unit id="557" translate="yes" xml:space="preserve">
          <source>Once this is set you can failover, and when the last node is migrated the Possible Owners should be edited so that node is added as a Possible Owner:</source>
          <target state="new">Once this is set you can failover, and when the last node is migrated the Possible Owners should be edited so that node is added as a Possible Owner:</target>
        </trans-unit>
        <trans-unit id="558" translate="yes" xml:space="preserve">
          <source>![Appendix15][25]</source>
          <target state="new">![Appendix15][25]</target>
        </trans-unit>
        <trans-unit id="559" translate="yes" xml:space="preserve">
          <source>Additional Resources</source>
          <target state="new">Additional Resources</target>
        </trans-unit>
        <trans-unit id="560" translate="yes" xml:space="preserve">
          <source>Azure Premium Storage</source>
          <target state="new">Azure Premium Storage</target>
        </trans-unit>
        <trans-unit id="561" translate="yes" xml:space="preserve">
          <source>Virtual Machines</source>
          <target state="new">Virtual Machines</target>
        </trans-unit>
        <trans-unit id="562" translate="yes" xml:space="preserve">
          <source>SQL Server in Azure Virtual Machines</source>
          <target state="new">SQL Server in Azure Virtual Machines</target>
        </trans-unit>
      </group>
    </body>
  </file>
  <header xmlns="">
    <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">
    </xliffext:oltranslationpriority>
    <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">a196ef7c8b2e893ae448975a81a89d91eb06a56e</xliffext:olfilehash>
  </header>
</xliff>