{
  "nodes": [
    {
      "content": "The Azure CLI for Mac, Linux, and Windows",
      "pos": [
        27,
        68
      ]
    },
    {
      "content": "Install and configure the Azure CLI for Mac, Linux, and Windows to manage Azure Services",
      "pos": [
        87,
        175
      ]
    },
    {
      "content": "Install and Configure the Azure CLI",
      "pos": [
        487,
        522
      ]
    },
    {
      "content": "[AZURE.SELECTOR]",
      "pos": [
        526,
        542
      ]
    },
    {
      "content": "PowerShell",
      "pos": [
        546,
        556
      ]
    },
    {
      "content": "Azure CLI",
      "pos": [
        594,
        603
      ]
    },
    {
      "content": "The Azure CLI provides a set of open source, cross-platform commands for working with the Azure Platform.",
      "pos": [
        620,
        725
      ]
    },
    {
      "content": "The Azure CLI provides much of the same functionality found in the Azure Management Portal, such as the ability to manage websites, virtual machines, mobile services, SQL Database and other services provided by the Azure platform.",
      "pos": [
        726,
        956
      ]
    },
    {
      "content": "The Azure CLI is written in JavaScript, and requires Node.js.",
      "pos": [
        958,
        1019
      ]
    },
    {
      "content": "It is implemented using the Azure SDK for Node.js, and released under an Apache 2.0 license.",
      "pos": [
        1020,
        1112
      ]
    },
    {
      "content": "The project repository is located at <bpt id=\"p1\">[</bpt>https://github.com/azure/azure-xplat-cli<ept id=\"p1\">](https://github.com/azure/azure-xplat-cli)</ept>.",
      "pos": [
        1113,
        1235
      ]
    },
    {
      "content": "This document describes how to install and configure the Azure CLI for Mac, Linux, and Windows, as well as how to use it to perform basic tasks with the Azure platform.",
      "pos": [
        1237,
        1405
      ]
    },
    {
      "content": "How to install the Azure CLI",
      "pos": [
        1431,
        1459
      ]
    },
    {
      "pos": [
        1461,
        1572
      ],
      "content": "To learn the installation steps for the Azure CLI, read the <bpt id=\"p1\">[</bpt>Install the Azure CLI<ept id=\"p1\">](xplat-cli-install.md)</ept> page."
    },
    {
      "content": "How to connect to your Azure subscription",
      "pos": [
        1601,
        1642
      ]
    },
    {
      "content": "While some commands provided by the Azure CLI will work without an Azure subscription, most commands require a subscription.",
      "pos": [
        1644,
        1768
      ]
    },
    {
      "content": "To learn how to configure the Azure CLI to work with your subscription, visit <bpt id=\"p1\">[</bpt>Connect to an Azure subscription from the Azure CLI<ept id=\"p1\">](xplat-cli-connect.md)</ept>.",
      "pos": [
        1769,
        1923
      ]
    },
    {
      "content": "How to use the Azure CLI",
      "pos": [
        1946,
        1970
      ]
    },
    {
      "content": "The Azure CLI is accessed using the <ph id=\"ph1\">`azure`</ph> command.",
      "pos": [
        1972,
        2024
      ]
    },
    {
      "content": "To see a list of commands available, use the <ph id=\"ph1\">`azure`</ph> command with no parameters.",
      "pos": [
        2025,
        2105
      ]
    },
    {
      "content": "You should see help information similar to the following:",
      "pos": [
        2106,
        2163
      ]
    },
    {
      "content": "The top level commands listed above contain commands for working with a specific area of Azure.",
      "pos": [
        3740,
        3835
      ]
    },
    {
      "content": "For example, the <ph id=\"ph1\">`azure account`</ph> command contains commands that relate to your Azure subscription, such as the <ph id=\"ph2\">`download`</ph> and <ph id=\"ph3\">`import`</ph> settings used previously.",
      "pos": [
        3836,
        3996
      ]
    },
    {
      "content": "See [Using the Azure CLI for Mac, Linux, and Windows] for details on the available commands and options.",
      "pos": [
        3997,
        4101
      ]
    },
    {
      "content": "Most commands are formatted as <ph id=\"ph1\">`azure &lt;command&gt; &lt;operation&gt; [parameters]`</ph> and perform an operation on a service or object such as your account configuration.",
      "pos": [
        4103,
        4260
      ]
    },
    {
      "content": "Other commands provide sub-commands and follow the format <ph id=\"ph1\">`azure &lt;command&gt; &lt;subcommand&gt; &lt;operation&gt; [parameters]`</ph>.",
      "pos": [
        4261,
        4375
      ]
    },
    {
      "content": "The following are example commands that work with your account configuration:",
      "pos": [
        4376,
        4453
      ]
    },
    {
      "content": "To view subscriptions that you have imported, use:",
      "pos": [
        4457,
        4507
      ]
    },
    {
      "content": "If you have imported subscriptions, use the following to set one as default:",
      "pos": [
        4539,
        4615
      ]
    },
    {
      "content": "The <ph id=\"ph1\">`--help`</ph> or <ph id=\"ph2\">`-h`</ph> parameter can be used to view help for specific commands.",
      "pos": [
        4659,
        4737
      ]
    },
    {
      "content": "Alternately, the <ph id=\"ph1\">`azure help [command] [options]`</ph> format can also be used to return the same information.",
      "pos": [
        4738,
        4843
      ]
    },
    {
      "content": "For example, the following commands all return the same information:",
      "pos": [
        4844,
        4912
      ]
    },
    {
      "pos": [
        4998,
        5115
      ],
      "content": "When in doubt about the parameters needed by a command, refer to help using <ph id=\"ph1\">`--help`</ph>, <ph id=\"ph2\">`-h`</ph> or <ph id=\"ph3\">`azure help [command]`</ph>."
    },
    {
      "content": "Setting the configuration mode",
      "pos": [
        5121,
        5151
      ]
    },
    {
      "content": "The Azure CLI allows you to perform management operations on individual <bpt id=\"p1\">_</bpt>resources<ept id=\"p1\">_</ept>, which are user-managed entities such as a database server, database, or website.",
      "pos": [
        5153,
        5318
      ]
    },
    {
      "content": "This is the default mode of operation for the Azure CLI, and is referred to as <bpt id=\"p1\">**</bpt>Azure Service Management<ept id=\"p1\">**</ept>.",
      "pos": [
        5319,
        5427
      ]
    },
    {
      "content": "However, when you have a complex solution that consists of multiple resources, it is useful to be able to manage the entire solution as a single unit.",
      "pos": [
        5428,
        5578
      ]
    },
    {
      "pos": [
        5580,
        5766
      ],
      "content": "To support managing a group of resources as a single logical unit, or <bpt id=\"p1\">_</bpt>resource group<ept id=\"p1\">_</ept>, we have introduced a preview of the <bpt id=\"p2\">**</bpt>Resource Manager<ept id=\"p2\">**</ept> as a new way of managing Azure resources."
    },
    {
      "pos": [
        5769,
        5920
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The Resource Manager is currently in preview, and does not provide the same  level of management capabilities as Azure Service Management."
    },
    {
      "pos": [
        5922,
        6065
      ],
      "content": "To support the new Resource Manager, the Azure CLI allows you to switch between these management 'modes' using the <ph id=\"ph1\">`azure config mode`</ph> command."
    },
    {
      "content": "The Azure CLI defaults to Azure Service Management mode.",
      "pos": [
        6067,
        6123
      ]
    },
    {
      "content": "To switch to Resource Manager mode, use the following to enable command:",
      "pos": [
        6124,
        6196
      ]
    },
    {
      "content": "To change back to Azure service management mode, use the following command:",
      "pos": [
        6225,
        6300
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The Resource Manager mode and Azure Service Management mode are mutually exclusive.",
      "pos": [
        6330,
        6426
      ]
    },
    {
      "content": "That is, resources created in one mode cannot be managed from the other mode.",
      "pos": [
        6427,
        6504
      ]
    },
    {
      "pos": [
        6506,
        6645
      ],
      "content": "For more information on working with the Resource Manager using the Azure CLI, see <bpt id=\"p1\">[</bpt>Using the Azure CLI with the Resource Manager<ept id=\"p1\">][cliarm]</ept>."
    },
    {
      "content": "Working with services in Azure service management mode",
      "pos": [
        6651,
        6705
      ]
    },
    {
      "content": "The Azure CLI allows you to easily manage Azure services.",
      "pos": [
        6707,
        6764
      ]
    },
    {
      "content": "In this example, you will learn how to use the Azure CLI to manage an Azure Website.",
      "pos": [
        6765,
        6849
      ]
    },
    {
      "content": "Use the following command to create a new Azure Website.",
      "pos": [
        6854,
        6910
      ]
    },
    {
      "content": "Replace <bpt id=\"p1\">**</bpt>mywebsite<ept id=\"p1\">**</ept> with a unique name.",
      "pos": [
        6911,
        6952
      ]
    },
    {
      "content": "You will be prompted to specify the region that the website will be created in.",
      "pos": [
        6995,
        7074
      ]
    },
    {
      "content": "Select a region that is geographically near you.",
      "pos": [
        7075,
        7123
      ]
    },
    {
      "content": "After this command completes, the website will be available at http://mywebsite.azurewebsites.net (replace <bpt id=\"p1\">**</bpt>mywebsite<ept id=\"p1\">**</ept> with the name you specified.)",
      "pos": [
        7124,
        7274
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you use Git for project source control, you can specify the <ph id=\"ph2\">`--git`</ph> parameter to create a Git repository on Azure for this website.",
      "pos": [
        7282,
        7429
      ]
    },
    {
      "content": "This will also initialize a Git repository in the directory from which the command was ran if one does not already exist.",
      "pos": [
        7430,
        7551
      ]
    },
    {
      "content": "It will also create a Git remote named <bpt id=\"p1\">__</bpt>azure<ept id=\"p1\">__</ept>, which can be used to push deployments to the Azure Website using the <ph id=\"ph1\">`git push azure master`</ph> command.",
      "pos": [
        7552,
        7703
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you receive an error that 'site' is not an azure command, the Azure CLI is most likely in resource group mode.",
      "pos": [
        7711,
        7837
      ]
    },
    {
      "content": "To change back to resource mode, use the <ph id=\"ph1\">`azure config mode asm`</ph> command.",
      "pos": [
        7838,
        7911
      ]
    },
    {
      "content": "Use the following command to list websites for your subscription:",
      "pos": [
        7916,
        7981
      ]
    },
    {
      "content": "The list should contain the site created in the previous step.",
      "pos": [
        8012,
        8074
      ]
    },
    {
      "content": "Use the following command to stop the website.",
      "pos": [
        8079,
        8125
      ]
    },
    {
      "content": "Replace <bpt id=\"p1\">**</bpt>mywebsite<ept id=\"p1\">**</ept> with the site name.",
      "pos": [
        8126,
        8167
      ]
    },
    {
      "content": "After the command completes, you can refresh the browser to verify that the site has been stopped.",
      "pos": [
        8208,
        8306
      ]
    },
    {
      "content": "Use the following command to start the website.",
      "pos": [
        8311,
        8358
      ]
    },
    {
      "content": "Replace <bpt id=\"p1\">**</bpt>mywebsite<ept id=\"p1\">**</ept> with the site name.",
      "pos": [
        8359,
        8400
      ]
    },
    {
      "content": "After the command completes, you can refresh the browser to verify that the site has been started.",
      "pos": [
        8442,
        8540
      ]
    },
    {
      "content": "Use the following command to delete the website.",
      "pos": [
        8545,
        8593
      ]
    },
    {
      "content": "Replace <bpt id=\"p1\">**</bpt>mywebsite<ept id=\"p1\">**</ept> with the site name.",
      "pos": [
        8594,
        8635
      ]
    },
    {
      "pos": [
        8678,
        8785
      ],
      "content": "After the command completes, use the <ph id=\"ph1\">`azure site list`</ph> command to verify that the website no longer exists."
    },
    {
      "content": "How to script the Azure CLI for Mac, Linux, and Windows",
      "pos": [
        8810,
        8865
      ]
    },
    {
      "content": "While you can use the Azure CLI to manually issue commands, you can also create complex automation workflows by leveraging the capabilities of your command-line interpreter and other command-line utilities available on your system.",
      "pos": [
        8867,
        9098
      ]
    },
    {
      "content": "For example, the following command will stop all running Azure Websites:",
      "pos": [
        9099,
        9171
      ]
    },
    {
      "content": "This example pipes a list of websites to the <ph id=\"ph1\">`grep`</ph> command, which inspects each line for the string 'Running'.",
      "pos": [
        9250,
        9361
      ]
    },
    {
      "content": "Any lines that match are then piped to the <ph id=\"ph1\">`awk`</ph> command, which calls <ph id=\"ph2\">`azure site stop`</ph> and uses the second column passed to it (the running site name) as the site name to stop.",
      "pos": [
        9362,
        9539
      ]
    },
    {
      "content": "While this demonstrates how you can chain commands together, you can also create more elaborate scripts using the scripting features provided by your command-line interpreter.",
      "pos": [
        9541,
        9716
      ]
    },
    {
      "content": "Different command-line interpreters have different scripting features and syntax.",
      "pos": [
        9717,
        9798
      ]
    },
    {
      "content": "Bash is probably the most widely used command-line interpreter for UNIX-based systems, including Linux and OS X.",
      "pos": [
        9799,
        9911
      ]
    },
    {
      "pos": [
        9913,
        10008
      ],
      "content": "For information on scripting with Bash, see the <bpt id=\"p1\">[</bpt>Advanced Bash-Scripting Guide<ept id=\"p1\">][advanced-bash]</ept>."
    },
    {
      "pos": [
        10010,
        10108
      ],
      "content": "For more general information on scripting OS X or Linux-based systems, see <bpt id=\"p1\">[</bpt>Shell script<ept id=\"p1\">][script]</ept>."
    },
    {
      "pos": [
        10110,
        10220
      ],
      "content": "For information on scripting Windows-based systems using batch files, see <bpt id=\"p1\">[</bpt>Command-line reference A-Z<ept id=\"p1\">][batch]</ept>."
    },
    {
      "content": "Understanding results",
      "pos": [
        10226,
        10247
      ]
    },
    {
      "content": "When creating scripts, you often need to capture the output of a command and either pass this to another command or perform an operation on the output such as checking for a specific value.",
      "pos": [
        10249,
        10438
      ]
    },
    {
      "content": "The Azure CLI generates output to STDOUT and STDERR.",
      "pos": [
        10439,
        10491
      ]
    },
    {
      "content": "Each line is prefixed by the strings <ph id=\"ph1\">`info:`</ph> for informational status messages, or <ph id=\"ph2\">`data:`</ph> for data returned about a service; however, you can instruct the Azure CLI to return more verbose information by using the <ph id=\"ph3\">`--verbose`</ph> or <ph id=\"ph4\">`-v`</ph> parameter.",
      "pos": [
        10492,
        10736
      ]
    },
    {
      "content": "This will return additional information prefixed by the string <ph id=\"ph1\">`verbose:`</ph>.",
      "pos": [
        10737,
        10811
      ]
    },
    {
      "pos": [
        10813,
        10894
      ],
      "content": "For example, the following output is returned from the <ph id=\"ph1\">`azure site list`</ph> command:"
    },
    {
      "pos": [
        11200,
        11300
      ],
      "content": "If the <ph id=\"ph1\">`--verbose`</ph> or <ph id=\"ph2\">`-v`</ph> parameter is specified, information similar to the following is returned:"
    },
    {
      "content": "Note that the <ph id=\"ph1\">`verbose:`</ph> information appears to be JSON formatted data.",
      "pos": [
        12790,
        12861
      ]
    },
    {
      "content": "You can use the <ph id=\"ph1\">`--json`</ph> parameter to return the information in JSON format if you are working with utilities that natively understand JSON, such as <bpt id=\"p1\">[</bpt>jsawk<ept id=\"p1\">](https://github.com/micha/jsawk)</ept> or <bpt id=\"p2\">[</bpt>jq<ept id=\"p2\">](http://stedolan.github.io/jq/)</ept>.",
      "pos": [
        12862,
        13090
      ]
    },
    {
      "content": "For example:",
      "pos": [
        13091,
        13103
      ]
    },
    {
      "content": "The command above retrieves a list of websites as JSON, then uses jsawk to retrieve the site names, and finally uses xargs to run a site delete command for each site, passing the site name as a parameter.",
      "pos": [
        13195,
        13399
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The <ph id=\"ph2\">`--json`</ph> parameter blocks the generation of status or data information (strings prefixed by <ph id=\"ph3\">`info:`</ph> and <ph id=\"ph4\">`data:`</ph>).",
      "pos": [
        13402,
        13532
      ]
    },
    {
      "content": "For example, if the <ph id=\"ph1\">`--json`</ph> parameter is used with the <ph id=\"ph2\">`azure site create`</ph>, no output is returned as this command does not return any data other than <ph id=\"ph3\">`info:`</ph>.",
      "pos": [
        13533,
        13692
      ]
    },
    {
      "content": "Working with errors",
      "pos": [
        13698,
        13717
      ]
    },
    {
      "content": "While the Azure CLI does log error information to STDERR, additional information on errors may also be logged to an <bpt id=\"p1\">**</bpt>azure.err<ept id=\"p1\">**</ept> file in the directory that the script was ran from.",
      "pos": [
        13719,
        13900
      ]
    },
    {
      "content": "If information is logged to this file, the following will be written to STDOUT:",
      "pos": [
        13901,
        13980
      ]
    },
    {
      "content": "Exit status",
      "pos": [
        14049,
        14060
      ]
    },
    {
      "content": "Some of the Azure CLI commands do not return a non-zero exit status if required parameters are missing.",
      "pos": [
        14062,
        14165
      ]
    },
    {
      "content": "Instead, they will prompt for user input.",
      "pos": [
        14166,
        14207
      ]
    },
    {
      "content": "For example, when using the <ph id=\"ph1\">`azure site create`</ph> command to create a new website, if no site name or <ph id=\"ph2\">`--location`</ph> parameter are specified you will be prompted to supply these values.",
      "pos": [
        14208,
        14389
      ]
    },
    {
      "content": "If you are writing a script that relies on the exit status, please verify that the Azure CLI commands you are using do not prompt for user input.",
      "pos": [
        14391,
        14536
      ]
    },
    {
      "content": "Additional resources",
      "pos": [
        14576,
        14596
      ]
    },
    {
      "content": "Using the Azure CLI with Service Management",
      "pos": [
        14601,
        14644
      ]
    },
    {
      "content": "Using the Azure CLI with the Resource Manager",
      "pos": [
        14671,
        14716
      ]
    },
    {
      "pos": [
        14729,
        14930
      ],
      "content": "For more information on the Azure CLI, to download source code, report problems, or contribute to the project, visit the <bpt id=\"p1\">[</bpt>GitHub repository for the Azure CLI<ept id=\"p1\">](https://github.com/azure/azure-xplat-cli)</ept>."
    },
    {
      "pos": [
        14934,
        15075
      ],
      "content": "If you encounter problems using the Azure CLI, or Azure, visit the <bpt id=\"p1\">[</bpt>Azure Forums<ept id=\"p1\">](http://social.msdn.microsoft.com/Forums/windowsazure/home)</ept>."
    },
    {
      "pos": [
        15079,
        15172
      ],
      "content": "For more information on Azure, see <bpt id=\"p1\">[</bpt>http://azure.microsoft.com/<ept id=\"p1\">](http://azure.microsoft.com)</ept>."
    },
    {
      "content": "test",
      "pos": [
        16050,
        16054
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"The Azure CLI for Mac, Linux, and Windows\"\n    description=\"Install and configure the Azure CLI for Mac, Linux, and Windows to manage Azure Services\"\n    editor=\"tysonn\"\n    manager=\"timlt\"\n    documentationCenter=\"\"\n    authors=\"squillace\"\n    services=\"\"/>\n\n<tags\n    ms.service=\"multiple\"\n    ms.workload=\"multiple\"\n    ms.tgt_pltfrm=\"command-line-interface\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"03/10/2015\"\n    ms.author=\"rasquill\"/>\n\n# Install and Configure the Azure CLI\n\n> [AZURE.SELECTOR]\n- [PowerShell](powershell-install-configure.md)\n- [Azure CLI](xplat-cli.md)\n\nThe Azure CLI provides a set of open source, cross-platform commands for working with the Azure Platform. The Azure CLI provides much of the same functionality found in the Azure Management Portal, such as the ability to manage websites, virtual machines, mobile services, SQL Database and other services provided by the Azure platform.\n\nThe Azure CLI is written in JavaScript, and requires Node.js. It is implemented using the Azure SDK for Node.js, and released under an Apache 2.0 license. The project repository is located at [https://github.com/azure/azure-xplat-cli](https://github.com/azure/azure-xplat-cli).\n\nThis document describes how to install and configure the Azure CLI for Mac, Linux, and Windows, as well as how to use it to perform basic tasks with the Azure platform.\n\n<a id=\"install\"></a>\n## How to install the Azure CLI\n\nTo learn the installation steps for the Azure CLI, read the [Install the Azure CLI](xplat-cli-install.md) page.\n\n\n<a id=\"configure\"></a>\n## How to connect to your Azure subscription\n\nWhile some commands provided by the Azure CLI will work without an Azure subscription, most commands require a subscription. To learn how to configure the Azure CLI to work with your subscription, visit [Connect to an Azure subscription from the Azure CLI](xplat-cli-connect.md).\n\n\n<a id=\"use\"></a>\n## How to use the Azure CLI\n\nThe Azure CLI is accessed using the `azure` command. To see a list of commands available, use the `azure` command with no parameters. You should see help information similar to the following:\n\n    info:             _    _____   _ ___ ___\n    info:            /_\\  |_  / | | | _ \\ __|\n    info:      _ ___/ _ \\__/ /| |_| |   / _|___ _ _\n    info:    (___  /_/ \\_\\/___|\\___/|_|_\\___| _____)\n    info:       (_______ _ _)         _ ______ _)_ _\n    info:              (______________ _ )   (___ _ _)\n    info:\n    info:    Microsoft Azure: Microsoft's Cloud Platform\n    info:\n    info:    Tool version 0.8.10\n    help:\n    help:    Display help for a given command\n    help:      help [options] [command]\n    help:\n    help:    Opens the portal in a browser\n    help:      portal [options]\n    help:\n    help:    Commands:\n    help:      account        Commands to manage your account information and publish settings\n    help:      config         Commands to manage your local settings\n    help:      hdinsight      Commands to manage your HDInsight accounts\n    help:      mobile         Commands to manage your Mobile Services\n    help:      network        Commands to manage your Networks\n    help:      sb             Commands to manage your Service Bus configuration\n    help:      service        Commands to manage your Cloud Services\n    help:      site           Commands to manage your Web Sites\n    help:      sql            Commands to manage your SQL Server accounts\n    help:      storage        Commands to manage your Storage objects\n    help:      vm             Commands to manage your Virtual Machines\n    help:\n    help:    Options:\n    help:      -h, --help     output usage information\n    help:      -v, --version  output the application version\n\nThe top level commands listed above contain commands for working with a specific area of Azure. For example, the `azure account` command contains commands that relate to your Azure subscription, such as the `download` and `import` settings used previously. See [Using the Azure CLI for Mac, Linux, and Windows] for details on the available commands and options.\n\nMost commands are formatted as `azure <command> <operation> [parameters]` and perform an operation on a service or object such as your account configuration. Other commands provide sub-commands and follow the format `azure <command> <subcommand> <operation> [parameters]`. The following are example commands that work with your account configuration:\n\n* To view subscriptions that you have imported, use:\n\n        azure account list\n\n* If you have imported subscriptions, use the following to set one as default:\n\n        azure account set <subscription>\n\nThe `--help` or `-h` parameter can be used to view help for specific commands. Alternately, the `azure help [command] [options]` format can also be used to return the same information. For example, the following commands all return the same information:\n\n    azure account set --help\n\n    azure account set -h\n\n    azure help account set\n\nWhen in doubt about the parameters needed by a command, refer to help using `--help`, `-h` or `azure help [command]`.\n\n### Setting the configuration mode\n\nThe Azure CLI allows you to perform management operations on individual _resources_, which are user-managed entities such as a database server, database, or website. This is the default mode of operation for the Azure CLI, and is referred to as **Azure Service Management**. However, when you have a complex solution that consists of multiple resources, it is useful to be able to manage the entire solution as a single unit.\n\nTo support managing a group of resources as a single logical unit, or _resource group_, we have introduced a preview of the **Resource Manager** as a new way of managing Azure resources.\n\n>[AZURE.NOTE] The Resource Manager is currently in preview, and does not provide the same  level of management capabilities as Azure Service Management.\n\nTo support the new Resource Manager, the Azure CLI allows you to switch between these management 'modes' using the `azure config mode` command.\n\nThe Azure CLI defaults to Azure Service Management mode. To switch to Resource Manager mode, use the following to enable command:\n\n    azure config mode arm\n\nTo change back to Azure service management mode, use the following command:\n\n    azure config mode asm\n\n>[AZURE.NOTE] The Resource Manager mode and Azure Service Management mode are mutually exclusive. That is, resources created in one mode cannot be managed from the other mode.\n\nFor more information on working with the Resource Manager using the Azure CLI, see [Using the Azure CLI with the Resource Manager][cliarm].\n\n### Working with services in Azure service management mode\n\nThe Azure CLI allows you to easily manage Azure services. In this example, you will learn how to use the Azure CLI to manage an Azure Website.\n\n1. Use the following command to create a new Azure Website. Replace **mywebsite** with a unique name.\n\n        azure site create mywebsite\n\n    You will be prompted to specify the region that the website will be created in. Select a region that is geographically near you. After this command completes, the website will be available at http://mywebsite.azurewebsites.net (replace **mywebsite** with the name you specified.)\n\n    > [AZURE.NOTE] If you use Git for project source control, you can specify the `--git` parameter to create a Git repository on Azure for this website. This will also initialize a Git repository in the directory from which the command was ran if one does not already exist. It will also create a Git remote named __azure__, which can be used to push deployments to the Azure Website using the `git push azure master` command.\n\n    > [AZURE.NOTE] If you receive an error that 'site' is not an azure command, the Azure CLI is most likely in resource group mode. To change back to resource mode, use the `azure config mode asm` command.\n\n2. Use the following command to list websites for your subscription:\n\n        azure site list\n\n    The list should contain the site created in the previous step.\n\n2. Use the following command to stop the website. Replace **mywebsite** with the site name.\n\n        azure site stop mywebsite\n\n    After the command completes, you can refresh the browser to verify that the site has been stopped.\n\n3. Use the following command to start the website. Replace **mywebsite** with the site name.\n\n        azure site start mywebsite\n\n    After the command completes, you can refresh the browser to verify that the site has been started.\n\n4. Use the following command to delete the website. Replace **mywebsite** with the site name.\n\n        azure site delete mywebsite\n\n    After the command completes, use the `azure site list` command to verify that the website no longer exists.\n\n<a id=\"script\"></a>\n## How to script the Azure CLI for Mac, Linux, and Windows\n\nWhile you can use the Azure CLI to manually issue commands, you can also create complex automation workflows by leveraging the capabilities of your command-line interpreter and other command-line utilities available on your system. For example, the following command will stop all running Azure Websites:\n\n    azure site list | grep 'Running' | awk '{system(\"azure site stop \"$2)}'\n\nThis example pipes a list of websites to the `grep` command, which inspects each line for the string 'Running'. Any lines that match are then piped to the `awk` command, which calls `azure site stop` and uses the second column passed to it (the running site name) as the site name to stop.\n\nWhile this demonstrates how you can chain commands together, you can also create more elaborate scripts using the scripting features provided by your command-line interpreter. Different command-line interpreters have different scripting features and syntax. Bash is probably the most widely used command-line interpreter for UNIX-based systems, including Linux and OS X.\n\nFor information on scripting with Bash, see the [Advanced Bash-Scripting Guide][advanced-bash].\n\nFor more general information on scripting OS X or Linux-based systems, see [Shell script][script].\n\nFor information on scripting Windows-based systems using batch files, see [Command-line reference A-Z][batch].\n\n### Understanding results\n\nWhen creating scripts, you often need to capture the output of a command and either pass this to another command or perform an operation on the output such as checking for a specific value. The Azure CLI generates output to STDOUT and STDERR. Each line is prefixed by the strings `info:` for informational status messages, or `data:` for data returned about a service; however, you can instruct the Azure CLI to return more verbose information by using the `--verbose` or `-v` parameter. This will return additional information prefixed by the string `verbose:`.\n\nFor example, the following output is returned from the `azure site list` command:\n\n    info:    Executing command site list\n    + Enumerating sites\n    data:    Name           Status   Mode  Host names\n    data:    -------------  -------  ----  -------------------------------\n    data:    myawesomesite  Running  Free  myawesomesite.azurewebsites.net\n    info:    site list command OK\n\nIf the `--verbose` or `-v` parameter is specified, information similar to the following is returned:\n\n    info:    Executing command site list\n    verbose: Subscription ####################################\n    verbose: Enumerating sites\n    verbose: [\n    verbose:     {\n    verbose:         ComputeMode: 'Shared',\n    verbose:         HostNameSslStates: {\n    verbose:             HostNameSslState: [\n    verbose:                 {\n    verbose:                     IpBasedSslResult: {\n    verbose:                         $: { i:nil: 'true' }\n    verbose:                     },\n    verbose:                     SslState: 'Disabled',\n    verbose:                     ToUpdateIpBasedSsl: {\n    verbose:                         $: { i:nil: 'true' }\n    verbose:                     },\n    verbose:                     VirtualIP: {\n    verbose:                         $: { i:nil: 'true' }\n    verbose:                     },\n    verbose:                     Thumbprint: {\n    verbose:                         $: { i:nil: 'true' }\n    verbose:                     },\n    verbose:                     ToUpdate: {\n    verbose:                         $: { i:nil: 'true' }\n    verbose:                     },\n    verbose:                     Name: 'myawesomesite.azurewebsites.net'\n    verbose:                 },\n    ...\n    verbose:     }\n    verbose: ]\n    data:    Name           Status   Mode  Host names\n    data:    -------------  -------  ----  -------------------------------\n    data:    myawesomesite  Running  Free  myawesomesite.azurewebsites.net\n    info:    site list command OK\n\nNote that the `verbose:` information appears to be JSON formatted data. You can use the `--json` parameter to return the information in JSON format if you are working with utilities that natively understand JSON, such as [jsawk](https://github.com/micha/jsawk) or [jq](http://stedolan.github.io/jq/). For example:\n\n    azure site list --json | jsawk -n 'out(this.Name)' | xargs -L 1 azure site delete -q\n\nThe command above retrieves a list of websites as JSON, then uses jsawk to retrieve the site names, and finally uses xargs to run a site delete command for each site, passing the site name as a parameter.\n\n>[AZURE.NOTE] The `--json` parameter blocks the generation of status or data information (strings prefixed by `info:` and `data:`). For example, if the `--json` parameter is used with the `azure site create`, no output is returned as this command does not return any data other than `info:`.\n\n### Working with errors\n\nWhile the Azure CLI does log error information to STDERR, additional information on errors may also be logged to an **azure.err** file in the directory that the script was ran from. If information is logged to this file, the following will be written to STDOUT:\n\n    info:    Error information has been recorded to azure.err\n\n### Exit status\n\nSome of the Azure CLI commands do not return a non-zero exit status if required parameters are missing. Instead, they will prompt for user input. For example, when using the `azure site create` command to create a new website, if no site name or `--location` parameter are specified you will be prompted to supply these values.\n\nIf you are writing a script that relies on the exit status, please verify that the Azure CLI commands you are using do not prompt for user input.\n\n<a id=\"additional-resources\"></a>\n\n## Additional resources\n\n* [Using the Azure CLI with Service Management][Using the Azure CLI]\n\n* [Using the Azure CLI with the Resource Manager][cliarm]\n\n* For more information on the Azure CLI, to download source code, report problems, or contribute to the project, visit the [GitHub repository for the Azure CLI](https://github.com/azure/azure-xplat-cli).\n\n* If you encounter problems using the Azure CLI, or Azure, visit the [Azure Forums](http://social.msdn.microsoft.com/Forums/windowsazure/home).\n\n* For more information on Azure, see [http://azure.microsoft.com/](http://azure.microsoft.com).\n\n\n\n\n[mac-installer]: http://go.microsoft.com/fwlink/?LinkId=252249\n[windows-installer]: http://go.microsoft.com/?linkid=9828653&clcid=0x409\n[authandsub]: http://msdn.microsoft.com/library/windowsazure/hh531793.aspx#BKMK_AccountVCert\n\n[Azure Web Site]: ../media/freetrial.png\n[select a preview feature]: ../media/antares-iaas-preview-02.png\n[select subscription]: ../media/antares-iaas-preview-03.png\n[free-trial]: http://www.windowsazure.com/pricing/free-trial/?WT.mc_id=A7171371E\n[advanced-bash]: http://tldp.org/LDP/abs/html/\n[script]: http://en.wikipedia.org/wiki/Shell_script\n[batch]: http://technet.microsoft.com/library/bb490890.aspx\n[cliarm]: xplat-cli-azure-resource-manager.md\n[portal]: https://manage.windowsazure.com\n[signuporg]: http://www.windowsazure.com/documentation/articles/sign-up-organization/\n[Using the Azure CLI]: virtual-machines-command-line-tools.md\n\ntest\n"
}