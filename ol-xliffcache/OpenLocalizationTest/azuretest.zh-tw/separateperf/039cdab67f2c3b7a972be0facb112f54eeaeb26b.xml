{
  "nodes": [
    {
      "content": "How to create a VNet using a network config file in the Azure portal",
      "pos": [
        3,
        71
      ]
    },
    {
      "content": "Azure uses an xml file to define all VNets available to a subscription.",
      "pos": [
        73,
        144
      ]
    },
    {
      "content": "You can download this file, and edit it to modify or delete existing VNets, and create new ones.",
      "pos": [
        145,
        241
      ]
    },
    {
      "content": "In this document, you will learn how to download this file, referred to as network configuration (or netcgf) file, and edit it to create a new VNet.",
      "pos": [
        242,
        390
      ]
    },
    {
      "content": "Check the <bpt id=\"p1\">[</bpt>Azure virtual network configuration schema<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/jj157100.aspx)</ept> to learn more about the network configuration file.",
      "pos": [
        391,
        553
      ]
    },
    {
      "content": "To create a VNet using a netcfg file through the Azure portal, follow the steps below.",
      "pos": [
        555,
        641
      ]
    },
    {
      "content": "From a browser, navigate to http://manage.windowsazure.com and, if necessary, sign in with your Azure account.",
      "pos": [
        646,
        756
      ]
    },
    {
      "pos": [
        760,
        837
      ],
      "content": "Scroll down on the list of services, and click on <bpt id=\"p1\">**</bpt>NETWORKS<ept id=\"p1\">**</ept> as seen below."
    },
    {
      "content": "Azure virtual networks",
      "pos": [
        845,
        867
      ]
    },
    {
      "pos": [
        976,
        1047
      ],
      "content": "On the bottom of the page, click the <bpt id=\"p1\">**</bpt>EXPORT<ept id=\"p1\">**</ept> button, as shown below."
    },
    {
      "content": "Export button",
      "pos": [
        1055,
        1068
      ]
    },
    {
      "pos": [
        1177,
        1386
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Export network configuration<ept id=\"p1\">**</ept> page, select the subscription you want to export the virtual network configuration from, and then click the check mark button on the bottom left hand corner of the page."
    },
    {
      "content": "Follow your browser instructions to save the <bpt id=\"p1\">**</bpt>NetworkConfig.xml<ept id=\"p1\">**</ept> file.",
      "pos": [
        1390,
        1462
      ]
    },
    {
      "content": "Make sure you note where you are saving the file.",
      "pos": [
        1463,
        1512
      ]
    },
    {
      "content": "Open the file you saved in step 5 above using any XML or text editor application, and look for the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;VirtualNetworkSites&gt;</ph><ept id=\"p1\">**</ept> element.",
      "pos": [
        1516,
        1649
      ]
    },
    {
      "content": "If you have any networks already created, each network will be displayed as its own <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;VirtualNetworkSite&gt;</ph><ept id=\"p1\">**</ept> element.",
      "pos": [
        1650,
        1767
      ]
    },
    {
      "pos": [
        1771,
        1900
      ],
      "content": "To create the virtual network described in this scenario, add the following XML just under the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;VirtualNetworkSites&gt;</ph><ept id=\"p1\">**</ept> element:"
    },
    {
      "content": "Save the network configuration file.",
      "pos": [
        2391,
        2427
      ]
    },
    {
      "pos": [
        2432,
        2646
      ],
      "content": "In the Azure portal, on the bottom left hand corner of the page, click <bpt id=\"p1\">**</bpt>NEW<ept id=\"p1\">**</ept>, then click <bpt id=\"p2\">**</bpt>NETWORK SERVICES<ept id=\"p2\">**</ept>, then click <bpt id=\"p3\">**</bpt>VIRTUAL NETWORK<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>IMPORT CONFIGURATION<ept id=\"p4\">**</ept> as shown in the figure below."
    },
    {
      "content": "Import configuration",
      "pos": [
        2654,
        2674
      ]
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Import the network configuration file<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>BROWSE FOR FILE...<ept id=\"p2\">**</ept>, then navigate to the folder you saved your file in step 8 above, select the file, and then click <bpt id=\"p3\">**</bpt>Open<ept id=\"p3\">**</ept>.",
      "pos": [
        2785,
        2976
      ]
    },
    {
      "content": "The web page should look similar to the figure below.",
      "pos": [
        2977,
        3030
      ]
    },
    {
      "content": "On the bottom right hand corner of the page, click on the arrow button to move to the next step.",
      "pos": [
        3031,
        3127
      ]
    },
    {
      "pos": [
        3285,
        3389
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Building your network<ept id=\"p1\">**</ept> page, notice the entry for your new VNet, as shown in the figure below."
    },
    {
      "content": "Click on the check mark button on the bottom right hand corner of the page to create the VNet.",
      "pos": [
        3535,
        3629
      ]
    },
    {
      "content": "After a few seconds your VNet will be shown in the list of available VNets, as shown in the figure below.",
      "pos": [
        3630,
        3735
      ]
    }
  ],
  "content": "## How to create a VNet using a network config file in the Azure portal\n\nAzure uses an xml file to define all VNets available to a subscription. You can download this file, and edit it to modify or delete existing VNets, and create new ones. In this document, you will learn how to download this file, referred to as network configuration (or netcgf) file, and edit it to create a new VNet. Check the [Azure virtual network configuration schema](https://msdn.microsoft.com/library/azure/jj157100.aspx) to learn more about the network configuration file.\n\nTo create a VNet using a netcfg file through the Azure portal, follow the steps below.\n\n1. From a browser, navigate to http://manage.windowsazure.com and, if necessary, sign in with your Azure account.\n2. Scroll down on the list of services, and click on **NETWORKS** as seen below.\n\n    ![Azure virtual networks](./media/virtual-networks-create-vnet-classic-portal-xml-include/vnet-create-portal-netcfg-figure1.gif)\n\n3. On the bottom of the page, click the **EXPORT** button, as shown below.\n\n    ![Export button](./media/virtual-networks-create-vnet-classic-portal-xml-include/vnet-create-portal-netcfg-figure2.png)\n\n4. On the **Export network configuration** page, select the subscription you want to export the virtual network configuration from, and then click the check mark button on the bottom left hand corner of the page.\n5. Follow your browser instructions to save the **NetworkConfig.xml** file. Make sure you note where you are saving the file.\n6. Open the file you saved in step 5 above using any XML or text editor application, and look for the **<VirtualNetworkSites>** element. If you have any networks already created, each network will be displayed as its own **<VirtualNetworkSite>** element.\n7. To create the virtual network described in this scenario, add the following XML just under the **<VirtualNetworkSites>** element:\n\n        <VirtualNetworkSite name=\"TestVNet\" Location=\"Central US\">\n          <AddressSpace>\n            <AddressPrefix>192.168.0.0/16</AddressPrefix>\n          </AddressSpace>\n          <Subnets>\n            <Subnet name=\"FrontEnd\">\n              <AddressPrefix>192.168.1.0/24</AddressPrefix>\n            </Subnet>\n            <Subnet name=\"BackEnd\">\n              <AddressPrefix>192.168.2.0/24</AddressPrefix>\n            </Subnet>\n          </Subnets>\n        </VirtualNetworkSite>\n\n8.  Save the network configuration file.\n9.  In the Azure portal, on the bottom left hand corner of the page, click **NEW**, then click **NETWORK SERVICES**, then click **VIRTUAL NETWORK**, and then click **IMPORT CONFIGURATION** as shown in the figure below.\n\n    ![Import configuration](./media/virtual-networks-create-vnet-classic-portal-xml-include/vnet-create-portal-netcfg-figure3.gif)\n\n10.  On the **Import the network configuration file** page, click **BROWSE FOR FILE...**, then navigate to the folder you saved your file in step 8 above, select the file, and then click **Open**. The web page should look similar to the figure below. On the bottom right hand corner of the page, click on the arrow button to move to the next step.\n\n    ![Import network configuration file page](./media/virtual-networks-create-vnet-classic-portal-xml-include/vnet-create-portal-netcfg-figure4.png)\n\n11.   On the **Building your network** page, notice the entry for your new VNet, as shown in the figure below.\n\n    ![Building your network page](./media/virtual-networks-create-vnet-classic-portal-xml-include/vnet-create-portal-netcfg-figure5.png)\n\n12.   Click on the check mark button on the bottom right hand corner of the page to create the VNet. After a few seconds your VNet will be shown in the list of available VNets, as shown in the figure below.\n\n    ![New virtual network](./media/virtual-networks-create-vnet-classic-portal-xml-include/vnet-create-portal-netcfg-figure6.png)"
}