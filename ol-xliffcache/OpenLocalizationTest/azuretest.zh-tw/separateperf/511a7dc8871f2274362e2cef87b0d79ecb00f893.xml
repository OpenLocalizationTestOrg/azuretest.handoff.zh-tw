{
  "nodes": [
    {
      "content": "Diagnose performance issues on a running website | Microsoft Azure",
      "pos": [
        27,
        93
      ]
    },
    {
      "content": "Monitor a website's performance without re-deploying it.",
      "pos": [
        112,
        168
      ]
    },
    {
      "content": "Use standalone or with Application Insights SDK to get dependency telemetry.",
      "pos": [
        169,
        245
      ]
    },
    {
      "content": "Install Application Insights Status Monitor to monitor website performance",
      "pos": [
        571,
        645
      ]
    },
    {
      "content": "Application Insights is in preview.",
      "pos": [
        648,
        683
      ]
    },
    {
      "content": "The Status Monitor of Visual Studio Application Insights lets you diagnose exceptions and performance issues in web applications running in any IIS server.",
      "pos": [
        686,
        841
      ]
    },
    {
      "content": "Just install it on your IIS web server and it will instrument the ASP.NET web apps it finds there, sending data to the Application Insights portal for you to search and analyse.",
      "pos": [
        842,
        1019
      ]
    },
    {
      "content": "You can install it on any physical or virtual server to which you have admin access.",
      "pos": [
        1020,
        1104
      ]
    },
    {
      "content": "sample charts",
      "pos": [
        1108,
        1121
      ]
    },
    {
      "content": "You have a choice of three ways to apply Application Insights to your IIS web applications:",
      "pos": [
        1196,
        1287
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Build time:<ept id=\"p1\">**</ept> [Add the Application Insights SDK][greenbrown] to your web app code.",
      "pos": [
        1291,
        1375
      ]
    },
    {
      "content": "This gives you:",
      "pos": [
        1376,
        1391
      ]
    },
    {
      "content": "A range of standard diagnostic and usage telemetry.",
      "pos": [
        1395,
        1446
      ]
    },
    {
      "content": "And you can use the [Application Insights API][api] if you want to write your own telemetry to track usage or diagnose problems.",
      "pos": [
        1450,
        1578
      ]
    },
    {
      "pos": [
        1581,
        1655
      ],
      "content": "<bpt id=\"p1\">**</bpt>Run time:<ept id=\"p1\">**</ept> Use Status Monitor to instrument your web app on the server."
    },
    {
      "content": "Monitor web apps that are already running: no need to rebuild or republish them.",
      "pos": [
        1659,
        1739
      ]
    },
    {
      "content": "A range of standard diagnostic and usage telemetry.",
      "pos": [
        1743,
        1794
      ]
    },
    {
      "content": "Dependency diagnostics&amp;#151;locate faults or poor performance where your app uses other components such as databases, REST APIs, or other services.",
      "pos": [
        1798,
        1945
      ]
    },
    {
      "content": "Troubleshoot any issues with telemetry.",
      "pos": [
        1949,
        1988
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Both:<ept id=\"p1\">**</ept> Compile the SDK into your web app code, and run Status Monitor on your web server.",
      "pos": [
        1991,
        2083
      ]
    },
    {
      "content": "The best of both worlds:",
      "pos": [
        2085,
        2109
      ]
    },
    {
      "content": "Standard diagnostic and usage telemetry.",
      "pos": [
        2113,
        2153
      ]
    },
    {
      "content": "Dependency diagnostics.",
      "pos": [
        2157,
        2180
      ]
    },
    {
      "content": "Write custom telemetry using the API.",
      "pos": [
        2184,
        2221
      ]
    },
    {
      "content": "Troubleshoot any issues with the SDK and telemetry.",
      "pos": [
        2225,
        2276
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> Is your app an <bpt id=\"p1\">[</bpt>Azure App Service Web App<ept id=\"p1\">](../app-service-web/websites-learning-map.md)</ept>?",
      "pos": [
        2282,
        2382
      ]
    },
    {
      "content": "[Add the Application Insights SDK][greenbrown] and then <bpt id=\"p1\">[</bpt>add the Application Insights extension<ept id=\"p1\">](../insights-perf-analytics.md)</ept> from the app's control panel in Microsoft Azure.",
      "pos": [
        2383,
        2559
      ]
    },
    {
      "content": "Install Application Insights Status Monitor on your IIS web server",
      "pos": [
        2565,
        2631
      ]
    },
    {
      "pos": [
        2636,
        2696
      ],
      "content": "You need a <bpt id=\"p1\">[</bpt>Microsoft Azure<ept id=\"p1\">](http://azure.com)</ept> subscription."
    },
    {
      "content": "On your IIS web server, login with administrator credentials.",
      "pos": [
        2701,
        2762
      ]
    },
    {
      "pos": [
        2766,
        2861
      ],
      "content": "Download and run the <bpt id=\"p1\">[</bpt>Status Monitor installer<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=506648)</ept>."
    },
    {
      "content": "In the installation wizard, sign in to Microsoft Azure.",
      "pos": [
        2866,
        2921
      ]
    },
    {
      "content": "Sign into Azure with your Microsoft account credentials",
      "pos": [
        2929,
        2984
      ]
    },
    {
      "content": "Pick the installed web application or website that you want to monitor, then configure the resource in which you want to see the results in the Application Insights portal.",
      "pos": [
        3076,
        3248
      ]
    },
    {
      "content": "Choose an app and a resource.",
      "pos": [
        3256,
        3285
      ]
    },
    {
      "content": "Normally, you choose to configure a new resource and [resource group][roles].",
      "pos": [
        3381,
        3458
      ]
    },
    {
      "content": "Otherwise, use an existing resource if you already set up [web tests][availability] for your site, or [web client monitoring][client].",
      "pos": [
        3464,
        3598
      ]
    },
    {
      "content": "Restart IIS.",
      "pos": [
        3603,
        3615
      ]
    },
    {
      "content": "Choose Restart at the top of the dialog.",
      "pos": [
        3623,
        3663
      ]
    },
    {
      "content": "Your web service will be interrupted for a short while.",
      "pos": [
        3757,
        3812
      ]
    },
    {
      "content": "Notice that ApplicationInsights.config has been inserted into the web apps that you want to monitor.",
      "pos": [
        3817,
        3917
      ]
    },
    {
      "content": "Find the .config file alongside the code files of the web app.",
      "pos": [
        3925,
        3987
      ]
    },
    {
      "content": "There are also some changes to web.config.",
      "pos": [
        4081,
        4123
      ]
    },
    {
      "content": "Want to (re)configure later?",
      "pos": [
        4129,
        4157
      ]
    },
    {
      "content": "After you complete the wizard, you can re-configure the agent whenever you want.",
      "pos": [
        4159,
        4239
      ]
    },
    {
      "content": "You can also use this if you installed the agent but there was some trouble with the initial setup.",
      "pos": [
        4240,
        4339
      ]
    },
    {
      "content": "Click the Application Insights icon on the task bar",
      "pos": [
        4343,
        4394
      ]
    },
    {
      "content": "View performance telemetry",
      "pos": [
        4490,
        4516
      ]
    },
    {
      "pos": [
        4518,
        4648
      ],
      "content": "Sign into <bpt id=\"p1\">[</bpt>the Azure Preview portal<ept id=\"p1\">](http://portal.azure.com)</ept>, browse Application Insights and open the resource that you created."
    },
    {
      "content": "Choose Browse, Application Insights, then select your app",
      "pos": [
        4652,
        4709
      ]
    },
    {
      "content": "Open the Performance blade to see dependency and other data.",
      "pos": [
        4797,
        4857
      ]
    },
    {
      "content": "Performance",
      "pos": [
        4861,
        4872
      ]
    },
    {
      "content": "Click through any chart to see more details.",
      "pos": [
        4946,
        4990
      ]
    },
    {
      "content": "Dependencies",
      "pos": [
        5095,
        5107
      ]
    },
    {
      "content": "The charts labeled HTTP, SQL, AZUREBLOB show the response times and counts of calls to dependencies: that is, external services that your application uses.",
      "pos": [
        5109,
        5264
      ]
    },
    {
      "content": "Performance counters",
      "pos": [
        5273,
        5293
      ]
    },
    {
      "content": "Click any performance counter chart to change what it shows.",
      "pos": [
        5295,
        5355
      ]
    },
    {
      "content": "Or you can add a new chart.",
      "pos": [
        5356,
        5383
      ]
    },
    {
      "content": "Exceptions",
      "pos": [
        5390,
        5400
      ]
    },
    {
      "content": "Click through the server exceptions chart",
      "pos": [
        5404,
        5445
      ]
    },
    {
      "content": "You can drill down to specific exceptions (from the last seven days) and get stack traces and context data.",
      "pos": [
        5539,
        5646
      ]
    },
    {
      "content": "No telemetry?",
      "pos": [
        5653,
        5666
      ]
    },
    {
      "content": "Use your site, to generate some data.",
      "pos": [
        5672,
        5709
      ]
    },
    {
      "pos": [
        5714,
        5780
      ],
      "content": "Wait a few minutes to let the data arrive, then click <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Open Diagnostic Search (the Search tile) to see individual events.",
      "pos": [
        5785,
        5851
      ]
    },
    {
      "content": "Events are often visible in Diagnostic Search before aggregate data appears in the charts.",
      "pos": [
        5852,
        5942
      ]
    },
    {
      "content": "Open Status Monitor and select your application on left pane.",
      "pos": [
        5947,
        6008
      ]
    },
    {
      "content": "Check if there are any diagnostics messages for this application in the \"Configuration notifications\" section:",
      "pos": [
        6009,
        6119
      ]
    },
    {
      "content": "Make sure your server firewall allows outgoing traffic on port 443 to dc.services.visualstudio.com.",
      "pos": [
        6242,
        6341
      ]
    },
    {
      "content": "On the server, if you see a message about \"insufficient permissions\", try the following:",
      "pos": [
        6346,
        6434
      ]
    },
    {
      "pos": [
        6441,
        6561
      ],
      "content": "In IIS Manager, select your application pool, open <bpt id=\"p1\">**</bpt>Advanced Settings<ept id=\"p1\">**</ept>, and under <bpt id=\"p2\">**</bpt>Process Model<ept id=\"p2\">**</ept> note the identity."
    },
    {
      "content": "In Computer management control panel, add this identity to the Performance Monitor Users group.",
      "pos": [
        6568,
        6663
      ]
    },
    {
      "content": "See [Troubleshooting][qna].",
      "pos": [
        6668,
        6695
      ]
    },
    {
      "content": "System Requirements",
      "pos": [
        6700,
        6719
      ]
    },
    {
      "content": "OS support for Application Insights Status Monitor on Server:",
      "pos": [
        6721,
        6782
      ]
    },
    {
      "content": "Windows Server 2008",
      "pos": [
        6786,
        6805
      ]
    },
    {
      "content": "Windows Server 2008 R2",
      "pos": [
        6808,
        6830
      ]
    },
    {
      "content": "Windows Server 2012",
      "pos": [
        6833,
        6852
      ]
    },
    {
      "content": "Windows server 2012 R2",
      "pos": [
        6855,
        6877
      ]
    },
    {
      "content": "with latest SP and .NET Framework 4.0 and 4.5",
      "pos": [
        6879,
        6924
      ]
    },
    {
      "content": "On the client side Windows 7, 8 and 8.1, again with .NET Framework 4.0 and 4.5",
      "pos": [
        6926,
        7004
      ]
    },
    {
      "content": "IIS support is: IIS 7, 7.5, 8, 8.5",
      "pos": [
        7006,
        7040
      ]
    },
    {
      "content": "(IIS is required)",
      "pos": [
        7041,
        7058
      ]
    },
    {
      "pos": [
        7063,
        7092
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"next\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Next steps"
    },
    {
      "content": "[Create web tests][availability] to make sure your site stays live.",
      "pos": [
        7096,
        7163
      ]
    },
    {
      "content": "[Search events and logs][diagnostic] to help diagnose problems.",
      "pos": [
        7166,
        7229
      ]
    },
    {
      "content": "[Add web client telemetry][usage] to see exceptions from web page code and to let you insert trace calls.",
      "pos": [
        7232,
        7337
      ]
    },
    {
      "content": "[Add Application Insights SDK to your web service code][greenbrown] so that you can insert trace and log calls in the server code.",
      "pos": [
        7340,
        7470
      ]
    },
    {
      "content": "Video",
      "pos": [
        7475,
        7480
      ]
    },
    {
      "content": "Performance monitoring",
      "pos": [
        7487,
        7509
      ]
    },
    {
      "content": "test",
      "pos": [
        7983,
        7987
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Diagnose performance issues on a running website | Microsoft Azure\"\n    description=\"Monitor a website's performance without re-deploying it. Use standalone or with Application Insights SDK to get dependency telemetry.\"\n    services=\"application-insights\"\n    documentationCenter=\".net\"\n    authors=\"alancameronwills\"\n    manager=\"ronmart\"/>\n\n<tags\n    ms.service=\"application-insights\"\n    ms.workload=\"tbd\"\n    ms.tgt_pltfrm=\"ibiza\"\n    ms.devlang=\"na\"\n    ms.topic=\"get-started-article\"\n    ms.date=\"04/27/2015\"\n    ms.author=\"awills\"/>\n\n\n# Install Application Insights Status Monitor to monitor website performance\n\n*Application Insights is in preview.*\n\nThe Status Monitor of Visual Studio Application Insights lets you diagnose exceptions and performance issues in web applications running in any IIS server. Just install it on your IIS web server and it will instrument the ASP.NET web apps it finds there, sending data to the Application Insights portal for you to search and analyse. You can install it on any physical or virtual server to which you have admin access.\n\n![sample charts](./media/app-insights-monitor-performance-live-website-now/10-intro.png)\n\nYou have a choice of three ways to apply Application Insights to your IIS web applications:\n\n* **Build time:** [Add the Application Insights SDK][greenbrown] to your web app code. This gives you:\n * A range of standard diagnostic and usage telemetry.\n * And you can use the [Application Insights API][api] if you want to write your own telemetry to track usage or diagnose problems.\n* **Run time:** Use Status Monitor to instrument your web app on the server.\n * Monitor web apps that are already running: no need to rebuild or republish them.\n * A range of standard diagnostic and usage telemetry.\n * Dependency diagnostics&#151;locate faults or poor performance where your app uses other components such as databases, REST APIs, or other services.\n * Troubleshoot any issues with telemetry.\n* **Both:** Compile the SDK into your web app code, and run Status Monitor on your web server.  The best of both worlds:\n * Standard diagnostic and usage telemetry.\n * Dependency diagnostics.\n * Write custom telemetry using the API.\n * Troubleshoot any issues with the SDK and telemetry.\n\n\n\n> [AZURE.TIP] Is your app an [Azure App Service Web App](../app-service-web/websites-learning-map.md)? [Add the Application Insights SDK][greenbrown] and then [add the Application Insights extension](../insights-perf-analytics.md) from the app's control panel in Microsoft Azure.\n\n\n## Install Application Insights Status Monitor on your IIS web server\n\n1. You need a [Microsoft Azure](http://azure.com) subscription.\n\n1. On your IIS web server, login with administrator credentials.\n2. Download and run the [Status Monitor installer](http://go.microsoft.com/fwlink/?LinkId=506648).\n\n4. In the installation wizard, sign in to Microsoft Azure.\n\n    ![Sign into Azure with your Microsoft account credentials](./media/app-insights-monitor-performance-live-website-now/appinsights-035-signin.png)\n\n5. Pick the installed web application or website that you want to monitor, then configure the resource in which you want to see the results in the Application Insights portal.\n\n    ![Choose an app and a resource.](./media/app-insights-monitor-performance-live-website-now/appinsights-036-configAIC.png)\n\n    Normally, you choose to configure a new resource and [resource group][roles].\n\n    Otherwise, use an existing resource if you already set up [web tests][availability] for your site, or [web client monitoring][client].\n\n6. Restart IIS.\n\n    ![Choose Restart at the top of the dialog.](./media/app-insights-monitor-performance-live-website-now/appinsights-036-restart.png)\n\n    Your web service will be interrupted for a short while.\n\n6. Notice that ApplicationInsights.config has been inserted into the web apps that you want to monitor.\n\n    ![Find the .config file alongside the code files of the web app.](./media/app-insights-monitor-performance-live-website-now/appinsights-034-aiconfig.png)\n\n   There are also some changes to web.config.\n\n### Want to (re)configure later?\n\nAfter you complete the wizard, you can re-configure the agent whenever you want. You can also use this if you installed the agent but there was some trouble with the initial setup.\n\n![Click the Application Insights icon on the task bar](./media/app-insights-monitor-performance-live-website-now/appinsights-033-aicRunning.png)\n\n## View performance telemetry\n\nSign into [the Azure Preview portal](http://portal.azure.com), browse Application Insights and open the resource that you created.\n\n![Choose Browse, Application Insights, then select your app](./media/app-insights-monitor-performance-live-website-now/appinsights-08openApp.png)\n\nOpen the Performance blade to see dependency and other data.\n\n![Performance](./media/app-insights-monitor-performance-live-website-now/21-perf.png)\n\nClick through any chart to see more details.\n\n\n![](./media/app-insights-monitor-performance-live-website-now/appinsights-038-dependencies.png)\n\n#### Dependencies\n\nThe charts labeled HTTP, SQL, AZUREBLOB show the response times and counts of calls to dependencies: that is, external services that your application uses.\n\n\n\n#### Performance counters\n\nClick any performance counter chart to change what it shows. Or you can add a new chart.\n\n#### Exceptions\n\n![Click through the server exceptions chart](./media/app-insights-monitor-performance-live-website-now/appinsights-039-1exceptions.png)\n\nYou can drill down to specific exceptions (from the last seven days) and get stack traces and context data.\n\n\n### No telemetry?\n\n  * Use your site, to generate some data.\n  * Wait a few minutes to let the data arrive, then click **Refresh**.\n  * Open Diagnostic Search (the Search tile) to see individual events. Events are often visible in Diagnostic Search before aggregate data appears in the charts.\n  * Open Status Monitor and select your application on left pane. Check if there are any diagnostics messages for this application in the \"Configuration notifications\" section:\n\n  ![](./media/app-insights-monitor-performance-live-website-now/appinsights-status-monitor-diagnostics-message.png)\n\n  * Make sure your server firewall allows outgoing traffic on port 443 to dc.services.visualstudio.com.\n  * On the server, if you see a message about \"insufficient permissions\", try the following:\n    * In IIS Manager, select your application pool, open **Advanced Settings**, and under **Process Model** note the identity.\n    * In Computer management control panel, add this identity to the Performance Monitor Users group.\n  * See [Troubleshooting][qna].\n\n## System Requirements\n\nOS support for Application Insights Status Monitor on Server:\n\n- Windows Server 2008\n- Windows Server 2008 R2\n- Windows Server 2012\n- Windows server 2012 R2\n\nwith latest SP and .NET Framework 4.0 and 4.5\n\nOn the client side Windows 7, 8 and 8.1, again with .NET Framework 4.0 and 4.5\n\nIIS support is: IIS 7, 7.5, 8, 8.5\n(IIS is required)\n\n## <a name=\"next\"></a>Next steps\n\n* [Create web tests][availability] to make sure your site stays live.\n* [Search events and logs][diagnostic] to help diagnose problems.\n* [Add web client telemetry][usage] to see exceptions from web page code and to let you insert trace calls.\n* [Add Application Insights SDK to your web service code][greenbrown] so that you can insert trace and log calls in the server code.\n\n## Video\n\n#### Performance monitoring\n\n[AZURE.VIDEO app-insights-performance-monitoring]\n\n<!--Link references-->\n\n[api]: app-insights-api-custom-events-metrics.md\n[availability]: app-insights-monitor-web-app-availability.md\n[client]: app-insights-javascript.md\n[diagnostic]: app-insights-diagnostic-search.md\n[greenbrown]: app-insights-start-monitoring-app-health-usage.md\n[qna]: app-insights-troubleshoot-faq.md\n[roles]: app-insights-resources-roles-access-control.md\n[usage]: app-insights-web-track-usage.md\n\ntest\n"
}