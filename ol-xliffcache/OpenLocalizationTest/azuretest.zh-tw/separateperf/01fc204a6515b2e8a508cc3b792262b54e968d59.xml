{
  "nodes": [
    {
      "content": "Get started with Azure Mobile Engagement for Windows Universal Apps",
      "pos": [
        27,
        94
      ]
    },
    {
      "content": "Learn how to use Azure Mobile Engagement with analytics and push notifications for Windows Universal Apps.",
      "pos": [
        113,
        219
      ]
    },
    {
      "content": "Get started with Azure Mobile Engagement for Windows Universal Apps",
      "pos": [
        564,
        631
      ]
    },
    {
      "content": "[AZURE.SELECTOR]",
      "pos": [
        635,
        651
      ]
    },
    {
      "content": "Universal Windows",
      "pos": [
        655,
        672
      ]
    },
    {
      "content": "Windows Phone Silverlight",
      "pos": [
        732,
        757
      ]
    },
    {
      "content": "iOS | Obj C",
      "pos": [
        810,
        821
      ]
    },
    {
      "content": "iOS | Swift",
      "pos": [
        864,
        875
      ]
    },
    {
      "content": "Android",
      "pos": [
        924,
        931
      ]
    },
    {
      "content": "Cordova",
      "pos": [
        978,
        985
      ]
    },
    {
      "content": "This topic shows you how to use Azure Mobile Engagement to understand your app usage and send push notifications to segmented users of a Windows Universal application.",
      "pos": [
        1030,
        1197
      ]
    },
    {
      "content": "This tutorial demonstrates the simple broadcast scenario using Mobile Engagement.",
      "pos": [
        1198,
        1279
      ]
    },
    {
      "content": "You will create a blank Windows Universal App that collects basic app usage data and receives push notifications using Windows Notification Service (WNS).",
      "pos": [
        1280,
        1434
      ]
    },
    {
      "content": "When you have completed this tutorial, you will be able to broadcast push notifications to all the devices or target-specific users based on their devices properties.",
      "pos": [
        1435,
        1601
      ]
    },
    {
      "content": "Be sure to follow along with the next tutorial to see how to use Mobile Engagement to address specific users and groups of devices.",
      "pos": [
        1602,
        1733
      ]
    },
    {
      "content": "This tutorial requires the following:",
      "pos": [
        1735,
        1772
      ]
    },
    {
      "content": "Visual Studio 2013",
      "pos": [
        1776,
        1794
      ]
    },
    {
      "content": "The [Mobile Engagement Windows Universal SDK]",
      "pos": [
        1797,
        1842
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> Completing this tutorial is a prerequisite for all other Mobile Engagement tutorials for Windows Universal Apps.",
      "pos": [
        1846,
        1976
      ]
    },
    {
      "content": "To complete it - you must have an active Azure account.",
      "pos": [
        1977,
        2032
      ]
    },
    {
      "content": "If you don't have an account, you can create a free trial account in just a couple of minutes.",
      "pos": [
        2033,
        2127
      ]
    },
    {
      "content": "For details, see <ph id=\"ph1\">&lt;a href=\"http://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A0E0E5C02&amp;amp;returnurl=http%3A%2F%2Fwww.windowsazure.com%2Fen-us%2Fdevelop%2Fmobile%2Ftutorials%2Fget-started%2F\" target=\"_blank\"&gt;</ph>Azure Free Trial<ph id=\"ph2\">&lt;/a&gt;</ph>.",
      "pos": [
        2128,
        2362
      ]
    },
    {
      "pos": [
        2366,
        2444
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"setup-azme\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Set up Mobile Engagement for your Windows Universal App"
    },
    {
      "pos": [
        2449,
        2530
      ],
      "content": "Sign in to the Azure portal, and then click <bpt id=\"p1\">**</bpt>+NEW<ept id=\"p1\">**</ept> at the bottom of the screen."
    },
    {
      "pos": [
        2535,
        2614
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>App Services<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Mobile Engagement<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Create<ept id=\"p3\">**</ept>."
    },
    {
      "content": "In the pop-up that appears, enter the following information:",
      "pos": [
        2631,
        2691
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Application Name<ept id=\"p1\">**</ept>: Type the name of your application.",
      "pos": [
        2712,
        2768
      ]
    },
    {
      "content": "Feel free to use any character.",
      "pos": [
        2769,
        2800
      ]
    },
    {
      "pos": [
        2808,
        2966
      ],
      "content": "<bpt id=\"p1\">**</bpt>Platform<ept id=\"p1\">**</ept>: Select the target platform (<bpt id=\"p2\">**</bpt>Windows Universal<ept id=\"p2\">**</ept>) for the app (if your app targets multiple platforms, repeat this tutorial for each platform)."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Application Resource Name<ept id=\"p1\">**</ept>: This is the name by which this application will be accessible via APIs and URLs.",
      "pos": [
        2974,
        3085
      ]
    },
    {
      "content": "You must only use conventional URL characters.",
      "pos": [
        3086,
        3132
      ]
    },
    {
      "content": "The auto-generated name should provide you a strong basis.",
      "pos": [
        3133,
        3191
      ]
    },
    {
      "content": "You should also append the platform name to avoid any name clash because this name must be unique.",
      "pos": [
        3192,
        3290
      ]
    },
    {
      "pos": [
        3298,
        3402
      ],
      "content": "<bpt id=\"p1\">**</bpt>Location<ept id=\"p1\">**</ept>: Select the datacenter where this app (and more importantly its Collection) will be hosted."
    },
    {
      "pos": [
        3410,
        3546
      ],
      "content": "<bpt id=\"p1\">**</bpt>Collection<ept id=\"p1\">**</ept>: If you have already created an application, select a previously created Collection, otherwise select <bpt id=\"p2\">**</bpt>New Collection<ept id=\"p2\">**</ept>."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Collection Name<ept id=\"p1\">**</ept>: This represents your group of applications.",
      "pos": [
        3554,
        3618
      ]
    },
    {
      "content": "It also ensures that all your apps are in a group that allows aggregated calculations of metrics.",
      "pos": [
        3619,
        3716
      ]
    },
    {
      "content": "You should use your company name or department here if applicable.",
      "pos": [
        3717,
        3783
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> If your Universal App is going to target both Windows and Windows Phone platforms, you should still create two Mobile Engagement applications, one for each supported platforms.",
      "pos": [
        3791,
        3979
      ]
    },
    {
      "content": "This is to ensure that you are able to create correct segmentation of the audience and are able to send appropriately targeted notifications for each platform.",
      "pos": [
        3980,
        4139
      ]
    },
    {
      "pos": [
        4144,
        4209
      ],
      "content": "Select the app that you just created in the <bpt id=\"p1\">**</bpt>Applications<ept id=\"p1\">**</ept> tab."
    },
    {
      "pos": [
        4214,
        4340
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Connection Info<ept id=\"p1\">**</ept> in order to display the <bpt id=\"p2\">**</bpt>Connection<ept id=\"p2\">**</ept> settings to put into your SDK integration in your mobile app."
    },
    {
      "pos": [
        4358,
        4526
      ],
      "content": "Copy the <bpt id=\"p1\">**</bpt>Connection String<ept id=\"p1\">**</ept> - this is what you will need to identify this app in your application code and to connect with Mobile Engagement from your Universal App."
    },
    {
      "pos": [
        4543,
        4619
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"connecting-app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Connect your app to the Mobile Engagement backend"
    },
    {
      "content": "This tutorial presents a \"basic integration,\" which is the minimal set required to collect data and send a push notification.",
      "pos": [
        4621,
        4746
      ]
    },
    {
      "content": "The complete integration documentation can be found in the Mobile Engagement Windows Universal SDK documentation.",
      "pos": [
        4747,
        4860
      ]
    },
    {
      "content": "We will create a basic app with Visual Studio to demonstrate the integration.",
      "pos": [
        4862,
        4939
      ]
    },
    {
      "content": "Create a new Windows Universal App project",
      "pos": [
        4944,
        4986
      ]
    },
    {
      "content": "You can skip this step if you already have an app and are familiar with Windows Universal development.",
      "pos": [
        4988,
        5090
      ]
    },
    {
      "pos": [
        5095,
        5167
      ],
      "content": "Start Visual Studio, and in the <bpt id=\"p1\">**</bpt>Home<ept id=\"p1\">**</ept> screen, select <bpt id=\"p2\">**</bpt>New Project<ept id=\"p2\">**</ept>."
    },
    {
      "content": "In the pop-up, select <bpt id=\"p1\">**</bpt>Store Apps<ept id=\"p1\">**</ept> -&gt; <bpt id=\"p2\">**</bpt>Universal Apps<ept id=\"p2\">**</ept> -&gt; <bpt id=\"p3\">**</bpt>Blank App (Universal Apps)<ept id=\"p3\">**</ept>.",
      "pos": [
        5172,
        5265
      ]
    },
    {
      "content": "Fill in the app <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Solution name<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.",
      "pos": [
        5266,
        5336
      ]
    },
    {
      "content": "You have now created a new Windows Universal App project into which we will integrate the Azure Mobile Engagement SDK.",
      "pos": [
        5351,
        5469
      ]
    },
    {
      "content": "Connect your app to Mobile Engagement backend",
      "pos": [
        5474,
        5519
      ]
    },
    {
      "content": "Install the [Mobile Engagement Windows Universal SDK] nuget package in your project.",
      "pos": [
        5524,
        5608
      ]
    },
    {
      "content": "If you are targeting both Windows and Windows Phone platforms, you need to do this for both the projects.",
      "pos": [
        5609,
        5714
      ]
    },
    {
      "content": "The same Nuget package places the correct platform-specific binaries in each project.",
      "pos": [
        5715,
        5800
      ]
    },
    {
      "pos": [
        5805,
        5889
      ],
      "content": "Open <bpt id=\"p1\">**</bpt>Package.appxmanifest<ept id=\"p1\">**</ept> and add the following if it isn't automatically added:"
    },
    {
      "pos": [
        5934,
        6150
      ],
      "content": "Now copy the connection string that you copied earlier for your Mobile Engagement App and paste it in the <ph id=\"ph1\">`Resources\\EngagementConfiguration.xml`</ph> file, between the <ph id=\"ph2\">`&lt;connectionString&gt;`</ph> and <ph id=\"ph3\">`&lt;/connectionString&gt;`</ph> tags:"
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.TIP]</ph> If your App is going to target both Windows and Windows Phone platforms, you should still create two Mobile Engagement Applications - one for each supported platforms.",
      "pos": [
        6170,
        6349
      ]
    },
    {
      "content": "This is to ensure that you are able to create correct segmentation of the audience and are able to send appropriately targeted notifications for each platform.",
      "pos": [
        6350,
        6509
      ]
    },
    {
      "pos": [
        6514,
        6540
      ],
      "content": "In the <ph id=\"ph1\">`App.xaml.cs`</ph> file:"
    },
    {
      "content": "a.",
      "pos": [
        6546,
        6548
      ]
    },
    {
      "content": "Add the <ph id=\"ph1\">`using`</ph> statement:",
      "pos": [
        6549,
        6575
      ]
    },
    {
      "content": "b.",
      "pos": [
        6628,
        6630
      ]
    },
    {
      "content": "Initialize the SDK in the <bpt id=\"p1\">**</bpt>OnLaunched<ept id=\"p1\">**</ept> method:",
      "pos": [
        6631,
        6679
      ]
    },
    {
      "content": "c.",
      "pos": [
        6875,
        6877
      ]
    },
    {
      "content": "Insert the following in the <bpt id=\"p1\">**</bpt>OnActivated<ept id=\"p1\">**</ept> method and add the method if it is not already present:",
      "pos": [
        6878,
        6977
      ]
    },
    {
      "pos": [
        7167,
        7214
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"monitor\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Enable real-time monitoring"
    },
    {
      "content": "In order to start sending data and ensuring that the users are active, you must send at least one screen (Activity) to the Mobile Engagement backend.",
      "pos": [
        7216,
        7365
      ]
    },
    {
      "content": "We achieve this by subclassing our <bpt id=\"p1\">**</bpt>MainPage<ept id=\"p1\">**</ept> with the <bpt id=\"p2\">**</bpt>EngagementPage<ept id=\"p2\">**</ept>, which the Mobile Engagement SDK provides.",
      "pos": [
        7366,
        7484
      ]
    },
    {
      "pos": [
        7490,
        7516
      ],
      "content": "Add the <ph id=\"ph1\">`using`</ph> statement:"
    },
    {
      "pos": [
        7567,
        7658
      ],
      "content": "Replace the super class of <bpt id=\"p1\">**</bpt>MainPage<ept id=\"p1\">**</ept>, which is before <bpt id=\"p2\">**</bpt>Page<ept id=\"p2\">**</ept>, with <bpt id=\"p3\">**</bpt>EngagementPage<ept id=\"p3\">**</ept>:"
    },
    {
      "pos": [
        7676,
        7704
      ],
      "content": "In your <ph id=\"ph1\">`MainPage.xml`</ph> file:"
    },
    {
      "content": "a.",
      "pos": [
        7710,
        7712
      ]
    },
    {
      "content": "Add to your namespaces declarations:",
      "pos": [
        7713,
        7749
      ]
    },
    {
      "content": "b.",
      "pos": [
        7820,
        7822
      ]
    },
    {
      "content": "Replace the <bpt id=\"p1\">**</bpt>Page<ept id=\"p1\">**</ept> in the XML tag name with <bpt id=\"p2\">**</bpt>engagement:EngagementPage<ept id=\"p2\">**</ept>.",
      "pos": [
        7823,
        7899
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> If your page overrides the <ph id=\"ph2\">`OnNavigatedTo`</ph> method, be sure to call <ph id=\"ph3\">`base.OnNavigatedTo(e)`</ph>.",
      "pos": [
        7907,
        8016
      ]
    },
    {
      "content": "Otherwise,  the activity will not be reported (the <ph id=\"ph1\">`EngagementPage`</ph> calls <ph id=\"ph2\">`StartActivity`</ph> inside its <ph id=\"ph3\">`OnNavigatedTo`</ph> method).",
      "pos": [
        8017,
        8142
      ]
    },
    {
      "content": "This is especially important in a Windows Phone project where the default template has an <ph id=\"ph1\">`OnNavigatedTo`</ph> method.",
      "pos": [
        8143,
        8256
      ]
    },
    {
      "content": "Ensure your app is connected with real-time monitoring",
      "pos": [
        8262,
        8316
      ]
    },
    {
      "content": "This section shows you how to make sure that your app connects to the Mobile Engagement backend by using the Mobile Engagement's real-time monitoring feature.",
      "pos": [
        8318,
        8476
      ]
    },
    {
      "content": "Navigate to your Mobile Engagement portal.",
      "pos": [
        8481,
        8523
      ]
    },
    {
      "pos": [
        8529,
        8659
      ],
      "content": "From your Azure portal, ensure you're in the app we're using for this project, and then click the <bpt id=\"p1\">**</bpt>Engage<ept id=\"p1\">**</ept> button at the bottom."
    },
    {
      "content": "You will land in the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> page of your Engagement portal for your app.",
      "pos": [
        8677,
        8755
      ]
    },
    {
      "content": "From there, click the <bpt id=\"p1\">**</bpt>Monitor<ept id=\"p1\">**</ept> tab as shown below.",
      "pos": [
        8756,
        8809
      ]
    },
    {
      "content": "The monitor is ready to show you any device, in real time, that will start your app.",
      "pos": [
        8822,
        8906
      ]
    },
    {
      "content": "Back in Visual Studio, start your app either in the emulator or in a connected device.",
      "pos": [
        8911,
        8997
      ]
    },
    {
      "content": "If it worked, you should now see one session in the monitor in real time!",
      "pos": [
        9002,
        9075
      ]
    },
    {
      "pos": [
        9085,
        9256
      ],
      "content": "<bpt id=\"p1\">**</bpt>Congratulations!<ept id=\"p1\">**</ept> You succeeded in completing the first step of this tutorial with an app that connects to the Mobile Engagement backend, which is already sending data."
    },
    {
      "pos": [
        9260,
        9333
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"integrate-push\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Enable push notifications and in-app messaging"
    },
    {
      "content": "Mobile Engagement allows you to interact and reach your users with push notifications and in-app messaging in the context of campaigns.",
      "pos": [
        9335,
        9470
      ]
    },
    {
      "content": "This module is called REACH in the Mobile Engagement portal.",
      "pos": [
        9471,
        9531
      ]
    },
    {
      "content": "The following sections set up your app to receive them.",
      "pos": [
        9532,
        9587
      ]
    },
    {
      "content": "Enable your app to receive WNS Push Notifications",
      "pos": [
        9592,
        9641
      ]
    },
    {
      "pos": [
        9646,
        9773
      ],
      "content": "In the <ph id=\"ph1\">`Package.appxmanifest`</ph> file, in the <bpt id=\"p1\">**</bpt>Application<ept id=\"p1\">**</ept> tab, under <bpt id=\"p2\">**</bpt>Notifications<ept id=\"p2\">**</ept>, select <bpt id=\"p3\">**</bpt>Yes<ept id=\"p3\">**</ept> for <bpt id=\"p4\">**</bpt>Toast capable:<ept id=\"p4\">**</ept>:"
    },
    {
      "content": "Initialize the REACH SDK",
      "pos": [
        9791,
        9815
      ]
    },
    {
      "pos": [
        9820,
        9948
      ],
      "content": "In <ph id=\"ph1\">`App.xaml.cs`</ph>, call <bpt id=\"p1\">**</bpt>EngagementReach.Instance.Init();<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>OnLaunched<ept id=\"p2\">**</ept> function right after the agent initialization:"
    },
    {
      "pos": [
        10135,
        10265
      ],
      "content": "In <ph id=\"ph1\">`App.xaml.cs`</ph>, call <bpt id=\"p1\">**</bpt>EngagementReach.Instance.Init(e);<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>OnActivated<ept id=\"p2\">**</ept> function right after the agent initialization:"
    },
    {
      "content": "You're all set for sending a toast.",
      "pos": [
        10445,
        10480
      ]
    },
    {
      "content": "Now we will verify that you have correctly carried out this basic integration.",
      "pos": [
        10481,
        10559
      ]
    },
    {
      "content": "Grant access to Mobile Engagement to send notifications",
      "pos": [
        10564,
        10619
      ]
    },
    {
      "content": "You'll have to associate your app with a Windows Store App to obtain your <bpt id=\"p1\">**</bpt>Package security identifier (SID)<ept id=\"p1\">**</ept> and your <bpt id=\"p2\">**</bpt>Secret Key<ept id=\"p2\">**</ept> (Client Secret).",
      "pos": [
        10624,
        10776
      ]
    },
    {
      "content": "You can create an app from the [Windows Store Dev Center] and then make sure to use <bpt id=\"p1\">**</bpt>Associate App with Store<ept id=\"p1\">**</ept> from Visual Studio.",
      "pos": [
        10777,
        10909
      ]
    },
    {
      "pos": [
        10914,
        11027
      ],
      "content": "Navigate to the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> of your Mobile Engagement portal, and click the <bpt id=\"p2\">**</bpt>Native Push<ept id=\"p2\">**</ept> section on the left."
    },
    {
      "pos": [
        11032,
        11149
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept> button to enter your <bpt id=\"p2\">**</bpt>Package security identifier (SID)<ept id=\"p2\">**</ept> and your <bpt id=\"p3\">**</bpt>Secret Key<ept id=\"p3\">**</ept> as shown below:"
    },
    {
      "pos": [
        11166,
        11214
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"send\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Send a notification to your app"
    },
    {
      "content": "We will now create a simple push notification campaign that sends a push notification to our app.",
      "pos": [
        11216,
        11313
      ]
    },
    {
      "pos": [
        11318,
        11381
      ],
      "content": "Navigate to the <bpt id=\"p1\">**</bpt>REACH<ept id=\"p1\">**</ept> tab in your Mobile Engagement portal."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>New announcement<ept id=\"p1\">**</ept> to create your push notification campaign.",
      "pos": [
        11386,
        11455
      ]
    },
    {
      "content": "Set up the first field of your campaign through the following steps:",
      "pos": [
        11468,
        11536
      ]
    },
    {
      "content": "a.",
      "pos": [
        11550,
        11552
      ]
    },
    {
      "content": "Name your campaign.",
      "pos": [
        11553,
        11572
      ]
    },
    {
      "content": "b.",
      "pos": [
        11578,
        11580
      ]
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Delivery time<ept id=\"p1\">**</ept> as <bpt id=\"p2\">*</bpt>Any time<ept id=\"p2\">*</ept> to allow the app to receive a notification whether the app is started or not.",
      "pos": [
        11581,
        11697
      ]
    },
    {
      "content": "c.",
      "pos": [
        11703,
        11705
      ]
    },
    {
      "content": "In the notification text - type the <bpt id=\"p1\">**</bpt>Title<ept id=\"p1\">**</ept> which will be in bold in the push.",
      "pos": [
        11706,
        11786
      ]
    },
    {
      "content": "d.",
      "pos": [
        11792,
        11794
      ]
    },
    {
      "content": "Then type your message.",
      "pos": [
        11795,
        11818
      ]
    },
    {
      "content": "Scroll down, and in the <bpt id=\"p1\">**</bpt>Content<ept id=\"p1\">**</ept> section, select <bpt id=\"p2\">**</bpt>Notification only<ept id=\"p2\">**</ept>.",
      "pos": [
        11823,
        11897
      ]
    },
    {
      "content": "You're done setting the most basic campaign possible.",
      "pos": [
        11910,
        11963
      ]
    },
    {
      "content": "Now scroll down again and click the <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept> button to save your campaign.",
      "pos": [
        11964,
        12040
      ]
    },
    {
      "content": "Last step: Click <bpt id=\"p1\">**</bpt>Activate<ept id=\"p1\">**</ept> to activate your campaign and to send push notifications.",
      "pos": [
        12045,
        12132
      ]
    },
    {
      "content": "You should now see a toast notification from your campaign on your device - the app should be closed to see this toast notification.",
      "pos": [
        12142,
        12274
      ]
    },
    {
      "content": "If the app was running, ensure that you have it closed for a couple of minutes before activating the campaign to be able to receive toast notification.",
      "pos": [
        12275,
        12426
      ]
    },
    {
      "content": "If you want to integrate in-app notification so that the notification shows up in the app when it is opened, see [Windows Universal Apps - Overlay integration].",
      "pos": [
        12427,
        12587
      ]
    },
    {
      "content": "test",
      "pos": [
        14777,
        14781
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Get started with Azure Mobile Engagement for Windows Universal Apps\"\n    description=\"Learn how to use Azure Mobile Engagement with analytics and push notifications for Windows Universal Apps.\"\n    services=\"mobile-engagement\"\n    documentationCenter=\"mobile\"\n    authors=\"piyushjo\"\n    manager=\"dwrede\"\n    editor=\"\" />\n\n<tags\n    ms.service=\"mobile-engagement\"\n    ms.workload=\"mobile\"\n    ms.tgt_pltfrm=\"mobile-windows-store\"\n    ms.devlang=\"dotnet\"\n    ms.topic=\"hero-article\"\n    ms.date=\"04/30/2015\"\n    ms.author=\"piyushjo\" />\n\n# Get started with Azure Mobile Engagement for Windows Universal Apps\n\n> [AZURE.SELECTOR]\n- [Universal Windows](mobile-engagement-windows-store-dotnet-get-started.md)\n- [Windows Phone Silverlight](mobile-engagement-windows-phone-get-started.md)\n- [iOS | Obj C](mobile-engagement-ios-get-started.md)\n- [iOS | Swift](mobile-engagement-ios-swift-get-started.md)\n- [Android](mobile-engagement-android-get-started.md)\n- [Cordova](mobile-engagement-cordova-get-started.md)\n\nThis topic shows you how to use Azure Mobile Engagement to understand your app usage and send push notifications to segmented users of a Windows Universal application.\nThis tutorial demonstrates the simple broadcast scenario using Mobile Engagement. You will create a blank Windows Universal App that collects basic app usage data and receives push notifications using Windows Notification Service (WNS). When you have completed this tutorial, you will be able to broadcast push notifications to all the devices or target-specific users based on their devices properties. Be sure to follow along with the next tutorial to see how to use Mobile Engagement to address specific users and groups of devices.\n\nThis tutorial requires the following:\n\n+ Visual Studio 2013\n+ The [Mobile Engagement Windows Universal SDK]\n\n> [AZURE.IMPORTANT] Completing this tutorial is a prerequisite for all other Mobile Engagement tutorials for Windows Universal Apps. To complete it - you must have an active Azure account. If you don't have an account, you can create a free trial account in just a couple of minutes. For details, see <a href=\"http://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A0E0E5C02&amp;returnurl=http%3A%2F%2Fwww.windowsazure.com%2Fen-us%2Fdevelop%2Fmobile%2Ftutorials%2Fget-started%2F\" target=\"_blank\">Azure Free Trial</a>.\n\n##<a id=\"setup-azme\"></a>Set up Mobile Engagement for your Windows Universal App\n\n1. Sign in to the Azure portal, and then click **+NEW** at the bottom of the screen.\n\n2. Click **App Services**, click **Mobile Engagement**, and then click **Create**.\n\n    ![][7]\n\n3. In the pop-up that appears, enter the following information:\n\n    ![][8]\n\n     - **Application Name**: Type the name of your application. Feel free to use any character.\n     - **Platform**: Select the target platform (**Windows Universal**) for the app (if your app targets multiple platforms, repeat this tutorial for each platform).\n     - **Application Resource Name**: This is the name by which this application will be accessible via APIs and URLs. You must only use conventional URL characters. The auto-generated name should provide you a strong basis. You should also append the platform name to avoid any name clash because this name must be unique.\n     - **Location**: Select the datacenter where this app (and more importantly its Collection) will be hosted.\n     - **Collection**: If you have already created an application, select a previously created Collection, otherwise select **New Collection**.\n     - **Collection Name**: This represents your group of applications. It also ensures that all your apps are in a group that allows aggregated calculations of metrics. You should use your company name or department here if applicable.\n\n    > [AZURE.TIP] If your Universal App is going to target both Windows and Windows Phone platforms, you should still create two Mobile Engagement applications, one for each supported platforms. This is to ensure that you are able to create correct segmentation of the audience and are able to send appropriately targeted notifications for each platform.\n\n4. Select the app that you just created in the **Applications** tab.\n\n5. Click **Connection Info** in order to display the **Connection** settings to put into your SDK integration in your mobile app.\n\n    ![][10]\n\n6. Copy the **Connection String** - this is what you will need to identify this app in your application code and to connect with Mobile Engagement from your Universal App.\n\n    ![][11]\n\n##<a id=\"connecting-app\"></a>Connect your app to the Mobile Engagement backend\n\nThis tutorial presents a \"basic integration,\" which is the minimal set required to collect data and send a push notification. The complete integration documentation can be found in the Mobile Engagement Windows Universal SDK documentation.\n\nWe will create a basic app with Visual Studio to demonstrate the integration.\n\n###Create a new Windows Universal App project\n\nYou can skip this step if you already have an app and are familiar with Windows Universal development.\n\n1. Start Visual Studio, and in the **Home** screen, select **New Project**.\n\n2. In the pop-up, select **Store Apps** -> **Universal Apps** -> **Blank App (Universal Apps)**. Fill in the app **Name** and **Solution name**, and then click **OK**.\n\n    ![][13]\n\nYou have now created a new Windows Universal App project into which we will integrate the Azure Mobile Engagement SDK.\n\n###Connect your app to Mobile Engagement backend\n\n1. Install the [Mobile Engagement Windows Universal SDK] nuget package in your project. If you are targeting both Windows and Windows Phone platforms, you need to do this for both the projects. The same Nuget package places the correct platform-specific binaries in each project.\n\n2. Open **Package.appxmanifest** and add the following if it isn't automatically added:\n\n        Internet (Client)\n\n    ![][20]\n\n3. Now copy the connection string that you copied earlier for your Mobile Engagement App and paste it in the `Resources\\EngagementConfiguration.xml` file, between the `<connectionString>` and `</connectionString>` tags:\n\n    ![][22]\n\n    >[AZURE.TIP] If your App is going to target both Windows and Windows Phone platforms, you should still create two Mobile Engagement Applications - one for each supported platforms. This is to ensure that you are able to create correct segmentation of the audience and are able to send appropriately targeted notifications for each platform.\n\n4. In the `App.xaml.cs` file:\n\n    a. Add the `using` statement:\n\n            using Microsoft.Azure.Engagement;\n\n    b. Initialize the SDK in the **OnLaunched** method:\n\n            protected override void OnLaunched(LaunchActivatedEventArgs e)\n            {\n              EngagementAgent.Instance.Init(e);\n\n              //... rest of the code\n            }\n\n    c. Insert the following in the **OnActivated** method and add the method if it is not already present:\n\n            protected override void OnActivated(IActivatedEventArgs e)\n            {\n              EngagementAgent.Instance.Init(e);\n\n              //... rest of the code\n            }\n\n##<a id=\"monitor\"></a>Enable real-time monitoring\n\nIn order to start sending data and ensuring that the users are active, you must send at least one screen (Activity) to the Mobile Engagement backend. We achieve this by subclassing our **MainPage** with the **EngagementPage**, which the Mobile Engagement SDK provides.\n\n1.  Add the `using` statement:\n\n           using Microsoft.Azure.Engagement;\n\n2. Replace the super class of **MainPage**, which is before **Page**, with **EngagementPage**:\n\n    ![][23]\n\n3. In your `MainPage.xml` file:\n\n    a. Add to your namespaces declarations:\n\n            xmlns:engagement=\"using:Microsoft.Azure.Engagement\"\n\n    b. Replace the **Page** in the XML tag name with **engagement:EngagementPage**.\n    \n> [AZURE.IMPORTANT] If your page overrides the `OnNavigatedTo` method, be sure to call `base.OnNavigatedTo(e)`. Otherwise,  the activity will not be reported (the `EngagementPage` calls `StartActivity` inside its `OnNavigatedTo` method). This is especially important in a Windows Phone project where the default template has an `OnNavigatedTo` method. \n\n###Ensure your app is connected with real-time monitoring\n\nThis section shows you how to make sure that your app connects to the Mobile Engagement backend by using the Mobile Engagement's real-time monitoring feature.\n\n1. Navigate to your Mobile Engagement portal.\n\n    From your Azure portal, ensure you're in the app we're using for this project, and then click the **Engage** button at the bottom.\n\n    ![][26]\n\n2. You will land in the **Settings** page of your Engagement portal for your app. From there, click the **Monitor** tab as shown below.\n![][30]\n\n3. The monitor is ready to show you any device, in real time, that will start your app.\n\n4. Back in Visual Studio, start your app either in the emulator or in a connected device.\n\n5. If it worked, you should now see one session in the monitor in real time!\n![][33]\n\n**Congratulations!** You succeeded in completing the first step of this tutorial with an app that connects to the Mobile Engagement backend, which is already sending data.\n\n##<a id=\"integrate-push\"></a>Enable push notifications and in-app messaging\n\nMobile Engagement allows you to interact and reach your users with push notifications and in-app messaging in the context of campaigns. This module is called REACH in the Mobile Engagement portal.\nThe following sections set up your app to receive them.\n\n###Enable your app to receive WNS Push Notifications\n\n1. In the `Package.appxmanifest` file, in the **Application** tab, under **Notifications**, select **Yes** for **Toast capable:**:\n\n    ![][35]\n\n###Initialize the REACH SDK\n\n1. In `App.xaml.cs`, call **EngagementReach.Instance.Init();** in the **OnLaunched** function right after the agent initialization:\n\n        protected override void OnLaunched(LaunchActivatedEventArgs e)\n        {\n           EngagementAgent.Instance.Init(e);\n           EngagementReach.Instance.Init(e);\n        }\n\n2. In `App.xaml.cs`, call **EngagementReach.Instance.Init(e);** in the **OnActivated** function right after the agent initialization:\n\n        protected override void OnActivated(IActivatedEventArgs e)\n        {\n           EngagementAgent.Instance.Init(e);\n           EngagementReach.Instance.Init(e);\n        }\n\nYou're all set for sending a toast. Now we will verify that you have correctly carried out this basic integration.\n\n###Grant access to Mobile Engagement to send notifications\n\n1. You'll have to associate your app with a Windows Store App to obtain your **Package security identifier (SID)** and your **Secret Key** (Client Secret). You can create an app from the [Windows Store Dev Center] and then make sure to use **Associate App with Store** from Visual Studio.\n\n2. Navigate to the **Settings** of your Mobile Engagement portal, and click the **Native Push** section on the left.\n\n3. Click the **Edit** button to enter your **Package security identifier (SID)** and your **Secret Key** as shown below:\n\n    ![][36]\n\n##<a id=\"send\"></a>Send a notification to your app\n\nWe will now create a simple push notification campaign that sends a push notification to our app.\n\n1. Navigate to the **REACH** tab in your Mobile Engagement portal.\n\n2. Click **New announcement** to create your push notification campaign.\n![][37]\n\n3. Set up the first field of your campaign through the following steps:\n![][38]\n\n    a. Name your campaign.\n\n    b. Select **Delivery time** as *Any time* to allow the app to receive a notification whether the app is started or not.\n\n    c. In the notification text - type the **Title** which will be in bold in the push.\n\n    d. Then type your message.\n\n4. Scroll down, and in the **Content** section, select **Notification only**.\n![][39]\n\n5. You're done setting the most basic campaign possible. Now scroll down again and click the **Create** button to save your campaign.\n\n6. Last step: Click **Activate** to activate your campaign and to send push notifications.\n![][41]\n\nYou should now see a toast notification from your campaign on your device - the app should be closed to see this toast notification. If the app was running, ensure that you have it closed for a couple of minutes before activating the campaign to be able to receive toast notification. If you want to integrate in-app notification so that the notification shows up in the app when it is opened, see [Windows Universal Apps - Overlay integration].\n\n<!-- URLs. -->\n[Mobile Engagement Windows Universal SDK documentation]: ../mobile-engagement-windows-store-integrate-engagement/\n[Mobile Engagement Windows Universal SDK]: http://go.microsoft.com/?linkid=9864592\n[Windows Store Dev Center]: http://go.microsoft.com/fwlink/p/?linkid=266582&clcid=0x409\n[Windows Universal Apps - Overlay integration]: ../mobile-engagement-windows-store-integrate-engagement-reach/#overlay-integration\n\n<!-- Images. -->\n[7]: ./media/mobile-engagement-windows-store-dotnet-get-started/create-mobile-engagement-app.png\n[8]: ./media/mobile-engagement-windows-store-dotnet-get-started/create-azme-popup.png\n[10]: ./media/mobile-engagement-windows-store-dotnet-get-started/app-main-page-select-connection-info.png\n[11]: ./media/mobile-engagement-windows-store-dotnet-get-started/app-connection-info-page.png\n[13]: ./media/mobile-engagement-windows-store-dotnet-get-started/UniversalAppCreation.png\n[20]: ./media/mobile-engagement-windows-store-dotnet-get-started/manifest-capabilities.png\n[21]: ./media/mobile-engagement-windows-store-get-started/manifest-declarations.png\n[22]: ./media/mobile-engagement-windows-store-dotnet-get-started/add-connection-info.png\n[23]: ./media/mobile-engagement-windows-store-dotnet-get-started/subclass-page.png\n[26]: ./media/mobile-engagement-windows-store-dotnet-get-started/engage-button.png\n[27]: ./media/mobile-engagement-common/engagement-portal.png\n[30]: ./media/mobile-engagement-windows-store-dotnet-get-started/clic-monitor-tab.png\n[33]: ./media/mobile-engagement-windows-store-dotnet-get-started/monitor.png\n[34]: ./media/mobile-engagement-windows-store-get-started/manifest-declarations-reach.png\n[35]: ./media/mobile-engagement-windows-store-dotnet-get-started/manifest-toast.png\n[36]: ./media/mobile-engagement-windows-store-dotnet-get-started/enter-credentials.png\n[37]: ./media/mobile-engagement-windows-store-dotnet-get-started/new-announcement.png\n[38]: ./media/mobile-engagement-windows-store-dotnet-get-started/campaign-first-params.png\n[39]: ./media/mobile-engagement-windows-store-dotnet-get-started/campaign-content.png\n[41]: ./media/mobile-engagement-windows-store-dotnet-get-started/campaign-activate.png\n\ntest\n"
}