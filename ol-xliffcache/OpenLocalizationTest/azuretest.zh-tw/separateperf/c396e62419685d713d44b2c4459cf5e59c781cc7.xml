{
  "nodes": [
    {
      "content": "Continuous deployment using GIT in Azure App Service",
      "pos": [
        2,
        54
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Azure App Service<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept> supports continuous deployment to Web Apps from source code control and repository tools like BitBucket, CodePlex, Dropbox, Git, GitHub, Mercurial, and TFS.",
      "pos": [
        56,
        279
      ]
    },
    {
      "content": "You can use these tools to maintain the content and code for your application, and then quickly and easily push changes to your Azure web app when you want.",
      "pos": [
        280,
        436
      ]
    },
    {
      "content": "In this article, you will learn how to use Git to publish directly from your local computer to Web Apps (in Azure, this method of publishing is called <bpt id=\"p1\">**</bpt>Local Git<ept id=\"p1\">**</ept>).",
      "pos": [
        438,
        604
      ]
    },
    {
      "content": "You will also learn how to enable continuous deployment from repository sites like BitBucket, CodePlex, Dropbox, GitHub, or Mercurial.",
      "pos": [
        605,
        739
      ]
    },
    {
      "content": "For information about using TFS for continuous deployment, see <bpt id=\"p1\">[</bpt><ept id=\"p1\">Continuous delivery to Azure using Visual Studio Online]</ept>.",
      "pos": [
        740,
        861
      ]
    },
    {
      "pos": [
        865,
        1087
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Many of the Git commands described in this article are performed automatically when creating a web app using the <bpt id=\"p1\">[</bpt>Azure Command-Line Tools for Mac and Linux<ept id=\"p1\">](/develop/nodejs/how-to-guides/command-line-tools/)</ept>."
    },
    {
      "pos": [
        1092,
        1132
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step1\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Step 1: Installing Git"
    },
    {
      "content": "The steps required to install Git vary between operating systems.",
      "pos": [
        1134,
        1199
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt><ept id=\"p1\">Installing Git]</ept> for operating system specific distributions and installation guidance.",
      "pos": [
        1200,
        1291
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> On some operating systems, both a command-line and GUI version of Git are available.",
      "pos": [
        1295,
        1392
      ]
    },
    {
      "content": "The instructions provided in this article use the command-line version.",
      "pos": [
        1393,
        1464
      ]
    },
    {
      "pos": [
        1469,
        1520
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step2\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Step 2: Create a local repository"
    },
    {
      "content": "Perform the following tasks to create a new Git repository.",
      "pos": [
        1522,
        1581
      ]
    },
    {
      "content": "Create a directory named MyGitRepository to contain your Git repository and web app files.",
      "pos": [
        1586,
        1676
      ]
    },
    {
      "content": "Open a command-line tool, such as <bpt id=\"p1\">**</bpt>GitBash<ept id=\"p1\">**</ept> (Windows) or <bpt id=\"p2\">**</bpt>Bash<ept id=\"p2\">**</ept> (Unix Shell).",
      "pos": [
        1681,
        1762
      ]
    },
    {
      "content": "On OS X systems you can access the command-line through the <bpt id=\"p1\">**</bpt>Terminal<ept id=\"p1\">**</ept> application.",
      "pos": [
        1763,
        1848
      ]
    },
    {
      "content": "From the command line, change to the MyGitRepository directory.",
      "pos": [
        1853,
        1916
      ]
    },
    {
      "content": "Use the following command to initialize a new Git repository:",
      "pos": [
        1949,
        2010
      ]
    },
    {
      "pos": [
        2034,
        2118
      ],
      "content": "This should return a message such as <bpt id=\"p1\">**</bpt>Initialized empty Git repository in [path]<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        2123,
        2163
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step3\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Step 3: Add a web page"
    },
    {
      "content": "Web Apps supports applications created in a variety of programming languages.",
      "pos": [
        2165,
        2242
      ]
    },
    {
      "content": "For this example, you will use a static .html file.",
      "pos": [
        2243,
        2294
      ]
    },
    {
      "pos": [
        2299,
        2450
      ],
      "content": "Using a text editor, create a new file named <bpt id=\"p1\">**</bpt>index.html<ept id=\"p1\">**</ept> in the root of the Git repository (the MyGitRepository directory that you created earlier)."
    },
    {
      "content": "Add the following text as the contents for the index.html file and save it.",
      "pos": [
        2455,
        2530
      ]
    },
    {
      "content": "From the command-line, verify that you are in the root of your Git repository.",
      "pos": [
        2555,
        2633
      ]
    },
    {
      "content": "Then use the following command to add the <bpt id=\"p1\">**</bpt>index.html<ept id=\"p1\">**</ept> file to the repository:",
      "pos": [
        2634,
        2714
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> You can find help for any git command by typing -help or --help after the command.",
      "pos": [
        2751,
        2846
      ]
    },
    {
      "content": "For example, for parameter options for the add command, type 'git add -help' for command-line help or 'git add --help' for more detailed help.",
      "pos": [
        2847,
        2989
      ]
    },
    {
      "content": "Next, commit the changes to the repository by using the following command:",
      "pos": [
        2994,
        3068
      ]
    },
    {
      "content": "You should see output similar to the following:",
      "pos": [
        3135,
        3182
      ]
    },
    {
      "pos": [
        3342,
        3389
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step4\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Enable the web app repository"
    },
    {
      "content": "Perform the following steps to enable a Git repository for your web app.",
      "pos": [
        3391,
        3463
      ]
    },
    {
      "pos": [
        3468,
        3505
      ],
      "content": "Log in to the <bpt id=\"p1\">[</bpt><ept id=\"p1\">Azure preview portal]</ept>."
    },
    {
      "content": "In your web app's blade, scroll down to the <bpt id=\"p1\">**</bpt>Deployment<ept id=\"p1\">**</ept> section and click <bpt id=\"p2\">**</bpt>Set up continous deployment<ept id=\"p2\">**</ept>.",
      "pos": [
        3510,
        3619
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Choose Source<ept id=\"p1\">**</ept>, then click <bpt id=\"p2\">**</bpt>Local Git Repository<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.",
      "pos": [
        3620,
        3704
      ]
    },
    {
      "content": "Local Git Repository",
      "pos": [
        3714,
        3734
      ]
    },
    {
      "content": "If this is your first time setting up a repository in Azure, you need to create login credentials for it.",
      "pos": [
        3790,
        3895
      ]
    },
    {
      "content": "You will use them to log into the Azure repository and push changes from your local Git repository.",
      "pos": [
        3896,
        3995
      ]
    },
    {
      "content": "From your web app's blade, click <bpt id=\"p1\">**</bpt>Settings &gt; Deployment credentials<ept id=\"p1\">**</ept>, then configure your deployment username and password.",
      "pos": [
        3996,
        4121
      ]
    },
    {
      "content": "When you're done, click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.",
      "pos": [
        4122,
        4153
      ]
    },
    {
      "pos": [
        4219,
        4256
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step5\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Deploy your project"
    },
    {
      "content": "Pushing local files to Azure (Local Git)",
      "pos": [
        4261,
        4301
      ]
    },
    {
      "content": "Deploy files from a repository web site like BitBucket, CodePlex, Dropbox, GitHub, or  Mercurial",
      "pos": [
        4314,
        4410
      ]
    },
    {
      "content": "Deploy a Visual Studio solution from BitBucket, CodePlex, Dropbox, GitHub, or  Mercurial",
      "pos": [
        4423,
        4511
      ]
    },
    {
      "content": "Use the following steps to publish your web app to Azure using Local Git.",
      "pos": [
        4523,
        4596
      ]
    },
    {
      "pos": [
        4601,
        4683
      ],
      "content": "In your web app's blade, in the Deployment section, click <bpt id=\"p1\">**</bpt>No deployment found<ept id=\"p1\">**</ept>."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Git URL<ept id=\"p1\">**</ept> is the remote reference to deploy to from your local repository.",
      "pos": [
        4751,
        4827
      ]
    },
    {
      "content": "You'll use this URL in the following steps.",
      "pos": [
        4828,
        4871
      ]
    },
    {
      "content": "Using the command-line, verify that you are in the root of your local Git repository that contains the previously created index.html file.",
      "pos": [
        4876,
        5014
      ]
    },
    {
      "content": "Use <ph id=\"ph1\">`git remote`</ph> to add the remote reference listed in <bpt id=\"p1\">**</bpt>Git URL<ept id=\"p1\">**</ept> from step 1.",
      "pos": [
        5019,
        5098
      ]
    },
    {
      "content": "Your command will look similar to the following:",
      "pos": [
        5099,
        5147
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The <bpt id=\"p1\">**</bpt>remote<ept id=\"p1\">**</ept> command adds a named reference to a remote repository.",
      "pos": [
        5258,
        5340
      ]
    },
    {
      "content": "In this example, it creates a reference named 'azure' for your web app's repository.",
      "pos": [
        5341,
        5425
      ]
    },
    {
      "content": "Use the following from the command-line to push the current repository contents from the local repository to the 'azure' remote:",
      "pos": [
        5430,
        5558
      ]
    },
    {
      "content": "You will be prompted for the password you created earlier when you reset your deployment credentials in the portal.",
      "pos": [
        5595,
        5710
      ]
    },
    {
      "content": "Enter the password (note that Gitbash does not echo asterisks to the console as you type your password).",
      "pos": [
        5711,
        5815
      ]
    },
    {
      "content": "You should see output similar to the following:",
      "pos": [
        5816,
        5863
      ]
    },
    {
      "pos": [
        6418,
        6611
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The repository created for your web app expects push requests to target the <ph id=\"ph2\">&lt;strong&gt;</ph>master<ph id=\"ph3\">&lt;/strong&gt;</ph> branch of its repository, which will then be used as the content of the web app."
    },
    {
      "content": "Go back to your web app's blade in the Azure portal.",
      "pos": [
        6616,
        6668
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>No deployment found<ept id=\"p1\">**</ept> should be changed to <bpt id=\"p2\">**</bpt>Active Deployment<ept id=\"p2\">**</ept> with a log entry of your most recent push.",
      "pos": [
        6669,
        6778
      ]
    },
    {
      "content": "Click the link under <bpt id=\"p1\">**</bpt>URL<ept id=\"p1\">**</ept> at the top of the web app blade to verify that the <bpt id=\"p2\">**</bpt>index.html<ept id=\"p2\">**</ept> has been deployed.",
      "pos": [
        6842,
        6955
      ]
    },
    {
      "content": "A page containing 'Hello Git!'",
      "pos": [
        6956,
        6986
      ]
    },
    {
      "content": "will appear.",
      "pos": [
        6987,
        6999
      ]
    },
    {
      "content": "A webpage containing 'Hello Git!'",
      "pos": [
        7007,
        7040
      ]
    },
    {
      "pos": [
        7057,
        7160
      ],
      "content": "Using a text editor, change the <bpt id=\"p1\">**</bpt>index.html<ept id=\"p1\">**</ept> file so that it contains 'Yay!', and then save the file."
    },
    {
      "pos": [
        7165,
        7308
      ],
      "content": "Use the following commands from the command-line to <bpt id=\"p1\">**</bpt>add<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>commit<ept id=\"p2\">**</ept> the changes, and then <bpt id=\"p3\">**</bpt>push<ept id=\"p3\">**</ept> the changes to the remote repository:"
    },
    {
      "pos": [
        7408,
        7613
      ],
      "content": "Once the <bpt id=\"p1\">**</bpt>push<ept id=\"p1\">**</ept> command has completed, refresh the browser (you may have to press Ctrl+F5 for the browser to properly refresh) and note that the content of the page now reflects the latest commit change."
    },
    {
      "pos": [
        7619,
        7728
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step7\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Deploy files from a repository site like BitBucket, CodePlex, Dropbox, GitHub, or Mercurial"
    },
    {
      "content": "Pushing local files to Azure by using Local Git allows you to manually push updates from a local project to your web app in Azure, while deploying from BitBucket, CodePlex, Dropbox, GitHub, or  Mercurial results in a continuous deployment process where Azure will pull in the most recent updates from your project.",
      "pos": [
        7730,
        8044
      ]
    },
    {
      "content": "While both methods result in your project being deployed to Web Apps, continuous deployment is useful when you have multiple people working on a project and want to ensure that the latest version is always published regardless of who made the most recent update.",
      "pos": [
        8046,
        8308
      ]
    },
    {
      "content": "Continuous deployment is also useful if you are using one of the above mentioned tools as the central repository for your application.",
      "pos": [
        8309,
        8443
      ]
    },
    {
      "content": "Deploying files from either GitHub, CodePlex, or BitBucket requires that you have published your local project to one of these services.",
      "pos": [
        8445,
        8581
      ]
    },
    {
      "content": "For more information on publishing your project to these services, see <bpt id=\"p1\">[</bpt><ept id=\"p1\">Create a Repo (GitHub)]</ept>, <bpt id=\"p2\">[</bpt><ept id=\"p2\">Using Git with CodePlex]</ept>, <bpt id=\"p3\">[</bpt><ept id=\"p3\">Create a Repo (BitBucket)]</ept>, <bpt id=\"p4\">[</bpt><ept id=\"p4\">Using Dropbox to Share Git Repositories]</ept>, or <bpt id=\"p5\">[</bpt><ept id=\"p5\">Quick Start - Mercurial]</ept>.",
      "pos": [
        8582,
        8807
      ]
    },
    {
      "content": "First put your web app files into the selected repository that will be used for continuous deployment.",
      "pos": [
        8812,
        8914
      ]
    },
    {
      "content": "In your web app's blade in the portal, scroll down to the <bpt id=\"p1\">**</bpt>Deployment<ept id=\"p1\">**</ept> section and click <bpt id=\"p2\">**</bpt>Set up continous deployment<ept id=\"p2\">**</ept>.",
      "pos": [
        8919,
        9042
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Choose Source<ept id=\"p1\">**</ept>, then click <bpt id=\"p2\">**</bpt>GitHub<ept id=\"p2\">**</ept>, for example.",
      "pos": [
        9043,
        9103
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Continous Deployment<ept id=\"p1\">**</ept> blade, click <bpt id=\"p2\">**</bpt>Authorization<ept id=\"p2\">**</ept>, then click <bpt id=\"p3\">**</bpt>Authorize<ept id=\"p3\">**</ept>.",
      "pos": [
        9176,
        9265
      ]
    },
    {
      "content": "The Azure portal will redirect you to the repository site to complete the authorization process.",
      "pos": [
        9266,
        9362
      ]
    },
    {
      "pos": [
        9368,
        9462
      ],
      "content": "When you're done, go back to the Azure portal and click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> in the <bpt id=\"p2\">**</bpt>Authorization<ept id=\"p2\">**</ept> blade."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Continous Deployment<ept id=\"p1\">**</ept> blade, choose the organization, project, and branch you want to deploy from.",
      "pos": [
        9467,
        9575
      ]
    },
    {
      "content": "When you're done, click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.",
      "pos": [
        9576,
        9607
      ]
    },
    {
      "pos": [
        9689,
        9815
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> When enabling continuous deployment with GitHub or BitBucket, both public and private projects will be displayed."
    },
    {
      "content": "Azure creates an association with the selected repository, and pulls in the files from the specified branch.",
      "pos": [
        9817,
        9925
      ]
    },
    {
      "content": "After this process completes, the <bpt id=\"p1\">**</bpt>Deployment<ept id=\"p1\">**</ept> section of your web app's blade will show an <bpt id=\"p2\">**</bpt>Active Deployment<ept id=\"p2\">**</ept> message that indicates deployment has succeeded.",
      "pos": [
        9926,
        10090
      ]
    },
    {
      "content": "At this point your project has been deployed from your repository of choice to your web app.",
      "pos": [
        10095,
        10187
      ]
    },
    {
      "content": "To verify that the web app is active, Click the <bpt id=\"p1\">**</bpt>URL<ept id=\"p1\">**</ept> at the top of the portal.",
      "pos": [
        10188,
        10269
      ]
    },
    {
      "content": "The browser should navigate to the web app.",
      "pos": [
        10270,
        10313
      ]
    },
    {
      "content": "To verify that continuous deployment is occurring from the repository of your choice, push a change to the repository.",
      "pos": [
        10318,
        10436
      ]
    },
    {
      "content": "Your web app should update to reflect the changes shortly after the push to the repository completes.",
      "pos": [
        10437,
        10538
      ]
    },
    {
      "content": "You can verify that it has pulled in the update in the <bpt id=\"p1\">**</bpt>Deployments<ept id=\"p1\">**</ept> blade of your web app.",
      "pos": [
        10539,
        10632
      ]
    },
    {
      "pos": [
        10638,
        10744
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step75\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Deploy a Visual Studio solution from BitBucket, CodePlex, Dropbox, GitHub, or Mercurial"
    },
    {
      "content": "Pushing a Visual Studio solution to Web Apps in Azure App Service is just as easy as pushing a simple index.html file.",
      "pos": [
        10746,
        10864
      ]
    },
    {
      "content": "The Web Apps deployment process streamlines all the details, including restore NuGet dependencies and building the application binaries.",
      "pos": [
        10865,
        11001
      ]
    },
    {
      "content": "You can follow the source control best practices of maintaining code only in your Git repository, and let Web Apps deployment take care of the rest.",
      "pos": [
        11002,
        11150
      ]
    },
    {
      "pos": [
        11152,
        11332
      ],
      "content": "The steps for pushing your Visual Studio solution to Web Apps is the same as in the <bpt id=\"p1\">[</bpt>previous section<ept id=\"p1\">](#Step7)</ept>, provided that you configure your solution and repository as follows:"
    },
    {
      "content": "In your repository root, add a <ph id=\"ph1\">`.gitignore`</ph> file, then specify all files and folders that you want to exclude from your repository, such as the <ph id=\"ph2\">`Obj`</ph>, <ph id=\"ph3\">`Bin`</ph>, and <ph id=\"ph4\">`packages`</ph> folders (see <bpt id=\"p1\">[</bpt>gitignore documentation<ept id=\"p1\">](http://git-scm.com/docs/gitignore)</ept> for formatting information).",
      "pos": [
        11338,
        11613
      ]
    },
    {
      "content": "For example:",
      "pos": [
        11614,
        11626
      ]
    },
    {
      "pos": [
        11891,
        12146
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you use GitHub, you can optionally generate a Visual Studio specific .gitignore file when you create your repository, which includes all the common temporary files, build results, etc. You can then customize it to suit your specific needs."
    },
    {
      "content": "Add the entire solution's directory tree to your repository, with the .sln file in the repository root.",
      "pos": [
        12152,
        12255
      ]
    },
    {
      "pos": [
        12261,
        12432
      ],
      "content": "In your Visual Studio solution, <bpt id=\"p1\">[</bpt>enable NuGet Package Restore<ept id=\"p1\">](http://docs.nuget.org/Consume/Package-Restore)</ept> to make Visual Studio automatically restore missing packages."
    },
    {
      "content": "Once you have set up your repository as described, and configured your web app in Azure for continuous publishing from one of the online Git repositories, you can develop your ASP.NET application locally in Visual Studio and continuously deploy your code simply by pushing your changes to your online Git repository.",
      "pos": [
        12434,
        12750
      ]
    },
    {
      "content": "Disable continuous deployment",
      "pos": [
        12755,
        12784
      ]
    },
    {
      "content": "Continuous deployment can be disabled from the <bpt id=\"p1\">**</bpt>Deployments<ept id=\"p1\">**</ept> blade.",
      "pos": [
        12786,
        12855
      ]
    },
    {
      "content": "From your web app's blade, in the <bpt id=\"p1\">**</bpt>Deployment<ept id=\"p1\">**</ept> section, click <bpt id=\"p2\">**</bpt>Active Deployment<ept id=\"p2\">**</ept>.",
      "pos": [
        12856,
        12942
      ]
    },
    {
      "content": "Then click <bpt id=\"p1\">**</bpt>Disconnect<ept id=\"p1\">**</ept>.",
      "pos": [
        12943,
        12969
      ]
    },
    {
      "content": "git-DisconnectFromGitHub",
      "pos": [
        12973,
        12997
      ]
    },
    {
      "pos": [
        13053,
        13247
      ],
      "content": "After answering <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept> to the confirmation message, you can return to your web app's blade and click <bpt id=\"p2\">**</bpt>Set up continuous deployment<ept id=\"p2\">**</ept> if you would like to set up publishing from another source."
    },
    {
      "pos": [
        13252,
        13285
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Step8\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Troubleshooting"
    },
    {
      "content": "The following are errors or problems commonly encountered when using Git to publish to a web app in Azure:",
      "pos": [
        13287,
        13393
      ]
    },
    {
      "pos": [
        13401,
        13477
      ],
      "content": "<bpt id=\"p1\">**</bpt>Symptom<ept id=\"p1\">**</ept>: Unable to access '[siteURL]': Failed to connect to [scmAddress]"
    },
    {
      "pos": [
        13479,
        13548
      ],
      "content": "<bpt id=\"p1\">**</bpt>Cause<ept id=\"p1\">**</ept>: This error can occur if the web app is not up and running."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Resolution<ept id=\"p1\">**</ept>: Start the web app in the Azure portal.",
      "pos": [
        13550,
        13604
      ]
    },
    {
      "content": "Git deployment will not work unless the web app is running.",
      "pos": [
        13605,
        13664
      ]
    },
    {
      "pos": [
        13674,
        13719
      ],
      "content": "<bpt id=\"p1\">**</bpt>Symptom<ept id=\"p1\">**</ept>: Couldn't resolve host 'hostname'"
    },
    {
      "pos": [
        13721,
        13835
      ],
      "content": "<bpt id=\"p1\">**</bpt>Cause<ept id=\"p1\">**</ept>: This error can occur if the address information entered when creating the 'azure' remote was incorrect."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Resolution<ept id=\"p1\">**</ept>: Use the <ph id=\"ph1\">`git remote -v`</ph> command to list all remotes, along with the associated URL.",
      "pos": [
        13837,
        13936
      ]
    },
    {
      "content": "Verify that the URL for the 'azure' remote is correct.",
      "pos": [
        13937,
        13991
      ]
    },
    {
      "content": "If needed, remove and recreate this remote using the correct URL.",
      "pos": [
        13992,
        14057
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Symptom<ept id=\"p1\">**</ept>: No refs in common and none specified; doing nothing.",
      "pos": [
        14065,
        14130
      ]
    },
    {
      "content": "Perhaps you should specify a branch such as 'master'.",
      "pos": [
        14131,
        14184
      ]
    },
    {
      "pos": [
        14186,
        14339
      ],
      "content": "<bpt id=\"p1\">**</bpt>Cause<ept id=\"p1\">**</ept>: This error can occur if you do not specify a branch when performing a git push operation, and have not set the push.default value used by Git."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Resolution<ept id=\"p1\">**</ept>: Perform the push operation again, specifying the master branch.",
      "pos": [
        14341,
        14420
      ]
    },
    {
      "content": "For example:",
      "pos": [
        14421,
        14433
      ]
    },
    {
      "pos": [
        14468,
        14525
      ],
      "content": "<bpt id=\"p1\">**</bpt>Symptom<ept id=\"p1\">**</ept>: src refspec [branchname] does not match any."
    },
    {
      "pos": [
        14527,
        14634
      ],
      "content": "<bpt id=\"p1\">**</bpt>Cause<ept id=\"p1\">**</ept>: This error can occur if you attempt to push to a branch other than master on the 'azure' remote."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Resolution<ept id=\"p1\">**</ept>: Perform the push operation again, specifying the master branch.",
      "pos": [
        14636,
        14715
      ]
    },
    {
      "content": "For example:",
      "pos": [
        14716,
        14728
      ]
    },
    {
      "pos": [
        14763,
        14852
      ],
      "content": "<bpt id=\"p1\">**</bpt>Symptom<ept id=\"p1\">**</ept>: Error - Changes committed to remote repository but your web app not updated."
    },
    {
      "pos": [
        14854,
        15003
      ],
      "content": "<bpt id=\"p1\">**</bpt>Cause<ept id=\"p1\">**</ept>: This error can occur if you are deploying a Node.js application containing a package.json file that specifies additional required modules."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Resolution<ept id=\"p1\">**</ept>: Additional messages containing 'npm ERR!'",
      "pos": [
        15005,
        15062
      ]
    },
    {
      "content": "should be logged prior to this error, and can provide additional context on the failure.",
      "pos": [
        15063,
        15151
      ]
    },
    {
      "content": "The following are known causes of this error and the corresponding 'npm ERR!'",
      "pos": [
        15152,
        15229
      ]
    },
    {
      "content": "message:",
      "pos": [
        15230,
        15238
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Malformed package.json file<ept id=\"p1\">**</ept>: npm ERR!",
      "pos": [
        15242,
        15283
      ]
    },
    {
      "content": "Couldn't read dependencies.",
      "pos": [
        15284,
        15311
      ]
    },
    {
      "pos": [
        15315,
        15386
      ],
      "content": "<bpt id=\"p1\">**</bpt>Native module that does not have a binary distribution for Windows<ept id=\"p1\">**</ept>:"
    },
    {
      "content": "npm ERR!",
      "pos": [
        15394,
        15402
      ]
    },
    {
      "content": "\\`cmd \"/c\" \"node-gyp rebuild\"\\` failed with 1",
      "pos": [
        15403,
        15448
      ]
    },
    {
      "content": "OR",
      "pos": [
        15458,
        15460
      ]
    },
    {
      "content": "npm ERR!",
      "pos": [
        15468,
        15476
      ]
    },
    {
      "content": "[modulename@version] preinstall: \\`make || gmake\\`",
      "pos": [
        15477,
        15527
      ]
    },
    {
      "content": "Additional Resources",
      "pos": [
        15533,
        15553
      ]
    },
    {
      "content": "How to use PowerShell for Azure",
      "pos": [
        15558,
        15589
      ]
    },
    {
      "content": "How to use the Azure Command-Line Tools for Mac and Linux",
      "pos": [
        15594,
        15651
      ]
    },
    {
      "content": "Git Documentation",
      "pos": [
        15656,
        15673
      ]
    },
    {
      "content": "Project Kudu",
      "pos": [
        15678,
        15690
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you want to get started with Azure App Service before signing up for an Azure account, go to <bpt id=\"p1\">[</bpt>Try App Service<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=523751)</ept>, where you can immediately create a short-lived starter web app in App Service.",
      "pos": [
        15736,
        15989
      ]
    },
    {
      "content": "No credit cards required; no commitments.",
      "pos": [
        15990,
        16031
      ]
    },
    {
      "content": "What's changed",
      "pos": [
        16036,
        16050
      ]
    },
    {
      "pos": [
        16053,
        16221
      ],
      "content": "For a guide to the change from Websites to App Service see: <bpt id=\"p1\">[</bpt>Azure App Service and Its Impact on Existing Azure Services<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept>"
    },
    {
      "pos": [
        16224,
        16383
      ],
      "content": "For a guide to the change of the old portal to the new portal see: <bpt id=\"p1\">[</bpt>Reference for navigating the preview portal<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529715)</ept>"
    }
  ],
  "content": "# Continuous deployment using GIT in Azure App Service\n\n[Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714) supports continuous deployment to Web Apps from source code control and repository tools like BitBucket, CodePlex, Dropbox, Git, GitHub, Mercurial, and TFS. You can use these tools to maintain the content and code for your application, and then quickly and easily push changes to your Azure web app when you want.\n\nIn this article, you will learn how to use Git to publish directly from your local computer to Web Apps (in Azure, this method of publishing is called **Local Git**). You will also learn how to enable continuous deployment from repository sites like BitBucket, CodePlex, Dropbox, GitHub, or Mercurial. For information about using TFS for continuous deployment, see [Continuous delivery to Azure using Visual Studio Online].\n\n> [AZURE.NOTE] Many of the Git commands described in this article are performed automatically when creating a web app using the [Azure Command-Line Tools for Mac and Linux](/develop/nodejs/how-to-guides/command-line-tools/).\n\n## <a id=\"Step1\"></a>Step 1: Installing Git\n\nThe steps required to install Git vary between operating systems. See [Installing Git] for operating system specific distributions and installation guidance.\n\n> [AZURE.NOTE] On some operating systems, both a command-line and GUI version of Git are available. The instructions provided in this article use the command-line version.\n\n## <a id=\"Step2\"></a>Step 2: Create a local repository\n\nPerform the following tasks to create a new Git repository.\n\n1. Create a directory named MyGitRepository to contain your Git repository and web app files.\n\n2. Open a command-line tool, such as **GitBash** (Windows) or **Bash** (Unix Shell). On OS X systems you can access the command-line through the **Terminal** application.\n\n3. From the command line, change to the MyGitRepository directory.\n\n        cd MyGitRepository\n\n4. Use the following command to initialize a new Git repository:\n\n        git init\n\n    This should return a message such as **Initialized empty Git repository in [path]**.\n\n## <a id=\"Step3\"></a>Step 3: Add a web page\n\nWeb Apps supports applications created in a variety of programming languages. For this example, you will use a static .html file.\n\n1. Using a text editor, create a new file named **index.html** in the root of the Git repository (the MyGitRepository directory that you created earlier).\n\n2. Add the following text as the contents for the index.html file and save it.\n\n        Hello Git!\n\n3. From the command-line, verify that you are in the root of your Git repository. Then use the following command to add the **index.html** file to the repository:\n\n        git add index.html \n\n    > [AZURE.NOTE] You can find help for any git command by typing -help or --help after the command. For example, for parameter options for the add command, type 'git add -help' for command-line help or 'git add --help' for more detailed help.\n\n4. Next, commit the changes to the repository by using the following command:\n\n        git commit -m \"Adding index.html to the repository\"\n\n    You should see output similar to the following:\n\n        [master (root-commit) 369a79c] Adding index.html to the repository\n         1 file changed, 1 insertion(+)\n         create mode 100644 index.html\n\n## <a id=\"Step4\"></a>Enable the web app repository\n\nPerform the following steps to enable a Git repository for your web app.\n\n1. Log in to the [Azure preview portal].\n\n2. In your web app's blade, scroll down to the **Deployment** section and click **Set up continous deployment**. Click **Choose Source**, then click **Local Git Repository**, and then click **OK**.  \n\n    ![Local Git Repository](./media/publishing-with-git/azure1-local-git.png)\n\n4. If this is your first time setting up a repository in Azure, you need to create login credentials for it. You will use them to log into the Azure repository and push changes from your local Git repository. From your web app's blade, click **Settings > Deployment credentials**, then configure your deployment username and password. When you're done, click **OK**.\n\n    ![](./media/publishing-with-git/azure2-credentials.png)\n\n## <a id=\"Step5\"></a>Deploy your project\n\n* [Pushing local files to Azure (Local Git)](#Step6)\n* [Deploy files from a repository web site like BitBucket, CodePlex, Dropbox, GitHub, or  Mercurial](#Step7)\n* [Deploy a Visual Studio solution from BitBucket, CodePlex, Dropbox, GitHub, or  Mercurial](#Step75)\n\nUse the following steps to publish your web app to Azure using Local Git.\n\n1. In your web app's blade, in the Deployment section, click **No deployment found**.\n\n    ![](./media/publishing-with-git/azure3-repo-details.png)\n\n    **Git URL** is the remote reference to deploy to from your local repository. You'll use this URL in the following steps.\n\n1. Using the command-line, verify that you are in the root of your local Git repository that contains the previously created index.html file.\n\n2. Use `git remote` to add the remote reference listed in **Git URL** from step 1. Your command will look similar to the following:\n\n        git remote add azure https://username@needsmoregit.scm.azurewebsites.net:443/NeedsMoreGit.git\n\n    > [AZURE.NOTE] The **remote** command adds a named reference to a remote repository. In this example, it creates a reference named 'azure' for your web app's repository.\n\n1. Use the following from the command-line to push the current repository contents from the local repository to the 'azure' remote:\n\n        git push azure master\n\n    You will be prompted for the password you created earlier when you reset your deployment credentials in the portal. Enter the password (note that Gitbash does not echo asterisks to the console as you type your password). You should see output similar to the following:\n\n        Counting objects: 6, done.\n        Compressing objects: 100% (2/2), done.\n        Writing objects: 100% (6/6), 486 bytes, done.\n        Total 6 (delta 0), reused 0 (delta 0)\n        remote: New deployment received.\n        remote: Updating branch 'master'.\n        remote: Preparing deployment for commit id '369a79c929'.\n        remote: Preparing files for deployment.\n        remote: Deployment successful.\n        To https://username@needsmoregit.scm.azurewebsites.net:443/NeedsMoreGit.git\n        * [new branch]      master -> master\n\n    > [AZURE.NOTE] The repository created for your web app expects push requests to target the <strong>master</strong> branch of its repository, which will then be used as the content of the web app.\n\n2. Go back to your web app's blade in the Azure portal. **No deployment found** should be changed to **Active Deployment** with a log entry of your most recent push. \n\n    ![](./media/publishing-with-git/azure4-deployed.png)\n\n2. Click the link under **URL** at the top of the web app blade to verify that the **index.html** has been deployed. A page containing 'Hello Git!' will appear.\n\n    ![A webpage containing 'Hello Git!'][hello-git]\n\n3. Using a text editor, change the **index.html** file so that it contains 'Yay!', and then save the file.\n\n4. Use the following commands from the command-line to **add** and **commit** the changes, and then **push** the changes to the remote repository:\n\n        git add index.html\n        git commit -m \"Celebration\"\n        git push azure master\n\n    Once the **push** command has completed, refresh the browser (you may have to press Ctrl+F5 for the browser to properly refresh) and note that the content of the page now reflects the latest commit change.\n\n### <a id=\"Step7\"></a>Deploy files from a repository site like BitBucket, CodePlex, Dropbox, GitHub, or Mercurial\n\nPushing local files to Azure by using Local Git allows you to manually push updates from a local project to your web app in Azure, while deploying from BitBucket, CodePlex, Dropbox, GitHub, or  Mercurial results in a continuous deployment process where Azure will pull in the most recent updates from your project.\n\nWhile both methods result in your project being deployed to Web Apps, continuous deployment is useful when you have multiple people working on a project and want to ensure that the latest version is always published regardless of who made the most recent update. Continuous deployment is also useful if you are using one of the above mentioned tools as the central repository for your application.\n\nDeploying files from either GitHub, CodePlex, or BitBucket requires that you have published your local project to one of these services. For more information on publishing your project to these services, see [Create a Repo (GitHub)], [Using Git with CodePlex], [Create a Repo (BitBucket)], [Using Dropbox to Share Git Repositories], or [Quick Start - Mercurial].\n\n1. First put your web app files into the selected repository that will be used for continuous deployment.\n\n2. In your web app's blade in the portal, scroll down to the **Deployment** section and click **Set up continous deployment**. Click **Choose Source**, then click **GitHub**, for example.  \n\n    ![](./media/publishing-with-git/azure6-setup-github.png)\n    \n2. In the **Continous Deployment** blade, click **Authorization**, then click **Authorize**. The Azure portal will redirect you to the repository site to complete the authorization process. \n\n4. When you're done, go back to the Azure portal and click **OK** in the **Authorization** blade.\n\n5. In the **Continous Deployment** blade, choose the organization, project, and branch you want to deploy from. When you're done, click **OK**.\n  \n    ![](./media/publishing-with-git/azure7-setup-github-configure.png)\n\n    > [AZURE.NOTE] When enabling continuous deployment with GitHub or BitBucket, both public and private projects will be displayed.\n\nAzure creates an association with the selected repository, and pulls in the files from the specified branch. After this process completes, the **Deployment** section of your web app's blade will show an **Active Deployment** message that indicates deployment has succeeded.\n\n7. At this point your project has been deployed from your repository of choice to your web app. To verify that the web app is active, Click the **URL** at the top of the portal. The browser should navigate to the web app.\n\n8. To verify that continuous deployment is occurring from the repository of your choice, push a change to the repository. Your web app should update to reflect the changes shortly after the push to the repository completes. You can verify that it has pulled in the update in the **Deployments** blade of your web app.\n\n### <a id=\"Step75\"></a>Deploy a Visual Studio solution from BitBucket, CodePlex, Dropbox, GitHub, or Mercurial\n\nPushing a Visual Studio solution to Web Apps in Azure App Service is just as easy as pushing a simple index.html file. The Web Apps deployment process streamlines all the details, including restore NuGet dependencies and building the application binaries. You can follow the source control best practices of maintaining code only in your Git repository, and let Web Apps deployment take care of the rest.\n\nThe steps for pushing your Visual Studio solution to Web Apps is the same as in the [previous section](#Step7), provided that you configure your solution and repository as follows:\n\n-   In your repository root, add a `.gitignore` file, then specify all files and folders that you want to exclude from your repository, such as the `Obj`, `Bin`, and `packages` folders (see [gitignore documentation](http://git-scm.com/docs/gitignore) for formatting information). For example:\n\n        [Oo]bj/\n        [Bb]in/\n        *.user\n        /TestResults\n        *.vspscc\n        *.vssscc\n        *.suo\n        *.cache\n        *.csproj.user\n        packages/*\n        App_Data/\n        /apps\n        msbuild.log\n        _app/\n        nuget.exe\n\n    >[AZURE.NOTE] If you use GitHub, you can optionally generate a Visual Studio specific .gitignore file when you create your repository, which includes all the common temporary files, build results, etc. You can then customize it to suit your specific needs.\n\n-   Add the entire solution's directory tree to your repository, with the .sln file in the repository root.\n\n-   In your Visual Studio solution, [enable NuGet Package Restore](http://docs.nuget.org/Consume/Package-Restore) to make Visual Studio automatically restore missing packages.\n\nOnce you have set up your repository as described, and configured your web app in Azure for continuous publishing from one of the online Git repositories, you can develop your ASP.NET application locally in Visual Studio and continuously deploy your code simply by pushing your changes to your online Git repository.\n\n## Disable continuous deployment\n\nContinuous deployment can be disabled from the **Deployments** blade. From your web app's blade, in the **Deployment** section, click **Active Deployment**. Then click **Disconnect**.\n\n![git-DisconnectFromGitHub](./media/publishing-with-git/azure5-disconnect.png)  \n\nAfter answering **Yes** to the confirmation message, you can return to your web app's blade and click **Set up continuous deployment** if you would like to set up publishing from another source.\n\n## <a id=\"Step8\"></a>Troubleshooting\n\nThe following are errors or problems commonly encountered when using Git to publish to a web app in Azure:\n\n****\n\n**Symptom**: Unable to access '[siteURL]': Failed to connect to [scmAddress]\n\n**Cause**: This error can occur if the web app is not up and running.\n\n**Resolution**: Start the web app in the Azure portal. Git deployment will not work unless the web app is running. \n\n\n****\n\n**Symptom**: Couldn't resolve host 'hostname'\n\n**Cause**: This error can occur if the address information entered when creating the 'azure' remote was incorrect.\n\n**Resolution**: Use the `git remote -v` command to list all remotes, along with the associated URL. Verify that the URL for the 'azure' remote is correct. If needed, remove and recreate this remote using the correct URL.\n\n****\n\n**Symptom**: No refs in common and none specified; doing nothing. Perhaps you should specify a branch such as 'master'.\n\n**Cause**: This error can occur if you do not specify a branch when performing a git push operation, and have not set the push.default value used by Git.\n\n**Resolution**: Perform the push operation again, specifying the master branch. For example:\n\n    git push azure master\n\n****\n\n**Symptom**: src refspec [branchname] does not match any.\n\n**Cause**: This error can occur if you attempt to push to a branch other than master on the 'azure' remote.\n\n**Resolution**: Perform the push operation again, specifying the master branch. For example:\n\n    git push azure master\n\n****\n\n**Symptom**: Error - Changes committed to remote repository but your web app not updated.\n\n**Cause**: This error can occur if you are deploying a Node.js application containing a package.json file that specifies additional required modules.\n\n**Resolution**: Additional messages containing 'npm ERR!' should be logged prior to this error, and can provide additional context on the failure. The following are known causes of this error and the corresponding 'npm ERR!' message:\n\n* **Malformed package.json file**: npm ERR! Couldn't read dependencies.\n\n* **Native module that does not have a binary distribution for Windows**:\n\n    * npm ERR! \\`cmd \"/c\" \"node-gyp rebuild\"\\` failed with 1\n\n        OR\n\n    * npm ERR! [modulename@version] preinstall: \\`make || gmake\\`\n\n\n## Additional Resources\n\n* [How to use PowerShell for Azure]\n* [How to use the Azure Command-Line Tools for Mac and Linux]\n* [Git Documentation]\n* [Project Kudu](https://github.com/projectkudu/kudu/wiki)\n\n>[AZURE.NOTE] If you want to get started with Azure App Service before signing up for an Azure account, go to [Try App Service](http://go.microsoft.com/fwlink/?LinkId=523751), where you can immediately create a short-lived starter web app in App Service. No credit cards required; no commitments.\n\n## What's changed\n* For a guide to the change from Websites to App Service see: [Azure App Service and Its Impact on Existing Azure Services](http://go.microsoft.com/fwlink/?LinkId=529714)\n* For a guide to the change of the old portal to the new portal see: [Reference for navigating the preview portal](http://go.microsoft.com/fwlink/?LinkId=529715)\n\n[Azure Developer Center]: http://www.windowsazure.com/en-us/develop/overview/\n[Azure preview portal]: https://portal.azure.com\n[Git website]: http://git-scm.com\n[Installing Git]: http://git-scm.com/book/en/Getting-Started-Installing-Git\n[How to use PowerShell for Azure]: ../articles/install-configure-powershell.md\n[How to use the Azure Command-Line Tools for Mac and Linux]: ../articles/xplat-cli.md\n[Git Documentation]: http://git-scm.com/documentation\n\n[portal-select-website]: ./media/publishing-with-git/git-select-website.png\n[git-WhereIsYourSourceCode]: ./media/publishing-with-git/git-WhereIsYourSourceCode.png\n[git-instructions]: ./media/publishing-with-git/git-instructions.png\n[portal-deployment-credentials]: ./media/publishing-with-git/git-deployment-credentials.png\n\n[git-ChooseARepositoryToDeploy]: ./media/publishing-with-git/git-ChooseARepositoryToDeploy.png\n[hello-git]: ./media/publishing-with-git/git-hello-git.png\n[yay]: ./media/publishing-with-git/git-yay.png\n[git-githubdeployed]: ./media/publishing-with-git/git-GitHubDeployed.png\n[git-GitHubDeployed-Updated]: ./media/publishing-with-git/git-GitHubDeployed-Updated.png\n[git-DisconnectFromGitHub]: ./media/publishing-with-git/git-DisconnectFromGitHub.png\n[git-DeploymentTrigger]: ./media/publishing-with-git/git-DeploymentTrigger.png\n[Create a Repo (GitHub)]: https://help.github.com/articles/create-a-repo\n[Using Git with CodePlex]: http://codeplex.codeplex.com/wikipage?title=Using%20Git%20with%20CodePlex&referringTitle=Source%20control%20clients&ProjectName=codeplex\n[Create a Repo (BitBucket)]: https://confluence.atlassian.com/display/BITBUCKET/Create+an+Account+and+a+Git+Repo\n[Quick Start - Mercurial]: http://mercurial.selenic.com/wiki/QuickStart\n[Using Dropbox to Share Git Repositories]: https://gist.github.com/trey/2722927\n[Continuous delivery to Azure using Visual Studio Online]: ../articles/cloud-services/cloud-services-continuous-delivery-use-vso.md\n"
}