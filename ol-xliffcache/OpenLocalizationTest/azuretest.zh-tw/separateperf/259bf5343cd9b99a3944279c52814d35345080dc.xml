{
  "nodes": [
    {
      "content": "Publishing Apps with Azure AD Application Proxy",
      "pos": [
        27,
        74
      ]
    },
    {
      "content": "Covers how to publish on-premises applications using Azure AD Application Proxy.",
      "pos": [
        93,
        173
      ]
    },
    {
      "content": "Publish applications using Azure AD Application Proxy",
      "pos": [
        484,
        537
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Application Proxy is a feature that is available only if you upgraded to the Premium or Basic edition of Azure Active Directory.",
      "pos": [
        541,
        682
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Azure Active Directory editions<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/dn532272.aspx)</ept>.",
      "pos": [
        683,
        799
      ]
    },
    {
      "content": "After you enable Microsoft Azure AD Application Proxy, you can publish applications to make them accessible for your users outside your private network.",
      "pos": [
        801,
        953
      ]
    },
    {
      "content": "This section walks you through the steps necessary to publish applications that are running on your local network for which you want to enable secure remote access from outside your network.",
      "pos": [
        955,
        1145
      ]
    },
    {
      "pos": [
        1149,
        1401
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> To verify that the Connector is running properly, the first application you publish should be any website accessible from within your private network to assure users can access it from the Internet, before publishing an actual application."
    },
    {
      "content": "Publish an app using the wizard",
      "pos": [
        1406,
        1437
      ]
    },
    {
      "content": "Open a browser of your choice and go to the Azure Management Portal.",
      "pos": [
        1442,
        1510
      ]
    },
    {
      "content": "In the left pane of the Azure Management Portal, click the Active Directory tab.",
      "pos": [
        1514,
        1594
      ]
    },
    {
      "content": "Click the directory in which you enabled Application Proxy and for which you want to publish an application (for example, Wingtip Toys).",
      "pos": [
        1598,
        1734
      ]
    },
    {
      "pos": [
        1738,
        1886
      ],
      "content": "Click the **Applications** tab, and then click the **Add** button at the bottom of the screen\n ![Add application](http://i.imgur.com/wEeZ7IR.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Click the <bpt id=\"p1\">**</bpt>Applications<ept id=\"p1\">**</ept> tab, and then click the <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept> button at the bottom of the screen",
          "pos": [
            0,
            93
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add application<ph id=\"ph2\">](http://i.imgur.com/wEeZ7IR.png)</ph>",
          "pos": [
            94,
            145
          ]
        }
      ]
    },
    {
      "pos": [
        1890,
        2117
      ],
      "content": "In the What do you want to do? dialog box, click **Publish an application that will be accessible outside your network**. \n ![New application that will be accessible from outside your network](http://i.imgur.com/Wj3vkyD.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the What do you want to do? dialog box, click **Publish an application that will be accessible outside your network**.",
          "pos": [
            0,
            121
          ],
          "nodes": [
            {
              "content": "In the What do you want to do?",
              "pos": [
                0,
                30
              ]
            },
            {
              "content": "dialog box, click <bpt id=\"p1\">**</bpt>Publish an application that will be accessible outside your network<ept id=\"p1\">**</ept>.",
              "pos": [
                31,
                121
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>New application that will be accessible from outside your network<ph id=\"ph2\">](http://i.imgur.com/Wj3vkyD.png)</ph>",
          "pos": [
            123,
            224
          ]
        }
      ]
    },
    {
      "pos": [
        2122,
        2282
      ],
      "content": "Follow the instructions on the screen to provide the following information about your application:\n ![Application properties](http://i.imgur.com/MkPNc93.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Follow the instructions on the screen to provide the following information about your application:",
          "pos": [
            0,
            98
          ]
        },
        {
          "content": "Application properties",
          "pos": [
            102,
            124
          ]
        }
      ]
    },
    {
      "content": "Setting",
      "pos": [
        2286,
        2293
      ]
    },
    {
      "content": "Details",
      "pos": [
        2300,
        2307
      ]
    },
    {
      "content": "External URL",
      "pos": [
        2318,
        2330
      ]
    },
    {
      "content": "This is the URL of the cloud service that is used to access the application from outside your private network.",
      "pos": [
        2333,
        2443
      ]
    },
    {
      "content": "The URL is automatically generated based on the name you provided, with the suffix msappproxy.net.",
      "pos": [
        2444,
        2542
      ]
    },
    {
      "content": "Preauthentication Method",
      "pos": [
        2543,
        2567
      ]
    },
    {
      "content": "Set the type of preauthentication method you want the application to use:",
      "pos": [
        2573,
        2646
      ]
    },
    {
      "content": "a.",
      "pos": [
        2653,
        2655
      ]
    },
    {
      "content": "Microsoft Azure Active Directory (Microsoft Azure AD) – sets the preauthentication method to Microsoft Azure Active Directory (Microsoft Azure AD).",
      "pos": [
        2656,
        2803
      ]
    },
    {
      "content": "When a user tries to access an application, Application Proxy will redirect the user to log in with Azure AD which will authenticate the user, ensuring that the user has the necessary permissions for the directory and the application.",
      "pos": [
        2804,
        3038
      ]
    },
    {
      "content": "b.",
      "pos": [
        3046,
        3048
      ]
    },
    {
      "content": "Pass through –preauthentication is not performed.",
      "pos": [
        3049,
        3098
      ]
    },
    {
      "content": "External URL Protocol",
      "pos": [
        3103,
        3124
      ]
    },
    {
      "content": "By default, applications are published by using the HTTPS protocol.",
      "pos": [
        3130,
        3197
      ]
    },
    {
      "content": "To enable HTTP for an internal application, you have to set Preauthentication to Passthrough and then you are able to change the External URL protocol from HTTPS to HTTP.",
      "pos": [
        3205,
        3375
      ]
    },
    {
      "content": "Note that publishing applications by using HTTP may create security issues for your application and your users.",
      "pos": [
        3383,
        3494
      ]
    },
    {
      "content": "You can insert a custom domain rather than using the default of msappproxy.net.",
      "pos": [
        3502,
        3581
      ]
    },
    {
      "content": "For more information, see below.",
      "pos": [
        3582,
        3614
      ]
    },
    {
      "content": "Internal URL",
      "pos": [
        3619,
        3631
      ]
    },
    {
      "content": "This is the internal URL that the Application Proxy connector uses to access the application internally.",
      "pos": [
        3634,
        3738
      ]
    },
    {
      "content": "This should be the URL of the published application that is used to access the application from inside your private network.",
      "pos": [
        3739,
        3863
      ]
    },
    {
      "content": "This is a valid URL with no path and no spaces or symbols.",
      "pos": [
        3864,
        3922
      ]
    },
    {
      "content": "To finish the wizard, click the check mark at the bottom of the screen.",
      "pos": [
        3924,
        3995
      ]
    },
    {
      "content": "The application is now defined in Azure AD.",
      "pos": [
        3996,
        4039
      ]
    },
    {
      "content": "Assign users and groups to the application",
      "pos": [
        4046,
        4088
      ]
    },
    {
      "content": "For apps that are preauthenticated, you must assign users and groups that will have access to the app.",
      "pos": [
        4093,
        4195
      ]
    },
    {
      "content": "For apps that are passthrough, access is available for all users.",
      "pos": [
        4199,
        4264
      ]
    },
    {
      "content": "However, in order for a user to see the app in their application list, you must assign the app to that user.",
      "pos": [
        4265,
        4373
      ]
    },
    {
      "pos": [
        4377,
        4574
      ],
      "content": "After finishing the Add App wizard, the App Proxy Quick Start page is displayed. To assign users, click **Assign users**.\n ![Application Proxy quick start screen](http://i.imgur.com/OmuWElV.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "After finishing the Add App wizard, the App Proxy Quick Start page is displayed. To assign users, click **Assign users**.",
          "pos": [
            0,
            121
          ],
          "nodes": [
            {
              "content": "After finishing the Add App wizard, the App Proxy Quick Start page is displayed.",
              "pos": [
                0,
                80
              ]
            },
            {
              "content": "To assign users, click <bpt id=\"p1\">**</bpt>Assign users<ept id=\"p1\">**</ept>.",
              "pos": [
                81,
                121
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Application Proxy quick start screen<ph id=\"ph2\">](http://i.imgur.com/OmuWElV.png)</ph>",
          "pos": [
            122,
            194
          ]
        }
      ]
    },
    {
      "pos": [
        4578,
        4656
      ],
      "content": "Select each user or group you want to assign to this app and click <bpt id=\"p1\">**</bpt>Assign<ept id=\"p1\">**</ept>."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> For Integrated Windows Authentication apps, you can assign only users and groups that are synced from your on-prem Active Directory.",
      "pos": [
        4661,
        4806
      ]
    },
    {
      "content": "Users logging in using a Microsoft account and guests cannot be assigned for apps published with Azure Active Directory Application Proxy.",
      "pos": [
        4807,
        4945
      ]
    },
    {
      "content": "Make sure the users you assign log in with their credentials that are part of the same domain as the app you are publishing.",
      "pos": [
        4946,
        5070
      ]
    },
    {
      "content": "Advanced configuration",
      "pos": [
        5075,
        5097
      ]
    },
    {
      "pos": [
        5102,
        5290
      ],
      "content": "You can modify published apps or configure advanced options, such as SSO to on-prem applications, from the **Configure** page.\n ![Advanced configuration](http://i.imgur.com/FhbRvoq.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "You can modify published apps or configure advanced options, such as SSO to on-prem applications, from the <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> page.",
          "pos": [
            0,
            126
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Advanced configuration<ph id=\"ph2\">](http://i.imgur.com/FhbRvoq.png)</ph>",
          "pos": [
            127,
            185
          ]
        }
      ]
    },
    {
      "content": "Select the app and click <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept>.",
      "pos": [
        5295,
        5334
      ]
    },
    {
      "content": "The following options are available:",
      "pos": [
        5335,
        5371
      ]
    },
    {
      "content": "Setting",
      "pos": [
        5375,
        5382
      ]
    },
    {
      "content": "Details",
      "pos": [
        5389,
        5396
      ]
    },
    {
      "content": "Name",
      "pos": [
        5407,
        5411
      ]
    },
    {
      "content": "Provide a descriptive name for your application",
      "pos": [
        5414,
        5461
      ]
    },
    {
      "content": "External URL",
      "pos": [
        5462,
        5474
      ]
    },
    {
      "content": "This is the URL of the cloud service that is used to access the application from outside your private network.",
      "pos": [
        5477,
        5587
      ]
    },
    {
      "content": "The URL is automatically generated based on the name you provided, with the suffix <bpt id=\"p1\">**</bpt>msappproxy.net.<ept id=\"p1\">**</ept>",
      "pos": [
        5588,
        5690
      ]
    },
    {
      "content": "Preauthentication Method",
      "pos": [
        5691,
        5715
      ]
    },
    {
      "content": "Set the type of preauthentication method you want the application to use:",
      "pos": [
        5718,
        5791
      ]
    },
    {
      "content": "Active directory – sets the preauthentication method to Active Directory.",
      "pos": [
        5794,
        5867
      ]
    },
    {
      "content": "When a user tries to access an application, Application Proxy will redirect the user to log in with Application Proxy which will authenticate the user, ensuring that the user has the necessary permissions for the directory and the application.",
      "pos": [
        5868,
        6111
      ]
    },
    {
      "content": "Pass through –preauthentication is not performed.",
      "pos": [
        6119,
        6168
      ]
    },
    {
      "content": "External URL",
      "pos": [
        6173,
        6185
      ]
    },
    {
      "content": "By default, applications are published by using the HTTPS protocol.",
      "pos": [
        6188,
        6255
      ]
    },
    {
      "content": "To enable HTTP for an internal application, you have to set Preauthentication to Passthrough and then you are able to change the External URL protocol from HTTPS to HTTP.",
      "pos": [
        6256,
        6426
      ]
    },
    {
      "content": "Note that publishing applications by using HTTP may create security issues for your application and your users.",
      "pos": [
        6427,
        6538
      ]
    },
    {
      "content": "You can set a custom domain rather than using the default domain provided (msappproxy.net).",
      "pos": [
        6539,
        6630
      ]
    },
    {
      "content": "For more information, see Working with Custom Domains.",
      "pos": [
        6631,
        6685
      ]
    },
    {
      "content": "Internal URL",
      "pos": [
        6686,
        6698
      ]
    },
    {
      "content": "This is the internal URL that the Application Proxy Connector uses to access the application internally.",
      "pos": [
        6701,
        6805
      ]
    },
    {
      "content": "This should be the URL of the published application that is used to access the application from inside your private network.",
      "pos": [
        6806,
        6930
      ]
    },
    {
      "content": "This is a valid URL with no path and no spaces or symbols.",
      "pos": [
        6931,
        6989
      ]
    },
    {
      "content": "Translate URL in Headers",
      "pos": [
        6990,
        7014
      ]
    },
    {
      "content": "For applications (such as some SharePoint configurations) that necessitate that the HTTP host headers are not translated, set this to No.",
      "pos": [
        7017,
        7154
      ]
    },
    {
      "content": "This will disable header translation for both request and response headers.",
      "pos": [
        7155,
        7230
      ]
    },
    {
      "content": "Internal Authentication Method",
      "pos": [
        7231,
        7261
      ]
    },
    {
      "content": "If you use Application Proxy for preauthentication, you can set an internal authentication method to enable your users to benefit from single-sign on (SSO) to this application.",
      "pos": [
        7264,
        7440
      ]
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Integrated Windows Authentication (IWA)<ept id=\"p1\">**</ept> if your application uses IWA and you can configure Kerberos Constrained Delegation (KCD) to enable SSO for this application.",
      "pos": [
        7445,
        7620
      ]
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>None<ept id=\"p1\">**</ept> if your application does not use IWA.",
      "pos": [
        7625,
        7678
      ]
    },
    {
      "content": "Applications that use IWA must be configured using KCD, otherwise Application Proxy will not be able to publish these applications.",
      "pos": [
        7683,
        7814
      ]
    },
    {
      "content": "For more information, see SSO for On Prem IWA Apps Using KCD with App Proxy",
      "pos": [
        7819,
        7894
      ]
    },
    {
      "content": "Internal Application SPN",
      "pos": [
        7895,
        7919
      ]
    },
    {
      "content": "This is the Service-Principal-Name (SPN) of the internal application as configured in the on-prem Application Proxy.",
      "pos": [
        7922,
        8038
      ]
    },
    {
      "content": "The SPN is used by the Application Proxy Connector to fetch Kerberos tokens for the application using Kerberos Constrained Delegation (KCD).",
      "pos": [
        8039,
        8179
      ]
    },
    {
      "content": "For more information, see SSO for On Prem IWA Apps Using KCD with App Proxy",
      "pos": [
        8184,
        8259
      ]
    },
    {
      "content": "After you publish applications using Azure Active Directory Application Proxy, they appear in the Applications list in Azure AD, and you can manage them there.",
      "pos": [
        8261,
        8420
      ]
    },
    {
      "content": "If you disable Application Proxy services after you have published applications, the applications are not deleted, but will no longer be accessible from outside your private network.",
      "pos": [
        8421,
        8603
      ]
    },
    {
      "content": "To view an application and make sure it is accessible, double-click the name of the application.",
      "pos": [
        8604,
        8700
      ]
    },
    {
      "content": "If the Application Proxy service is disabled and the application is not available, a warning message appears at the top of the screen.",
      "pos": [
        8701,
        8835
      ]
    },
    {
      "content": "To delete an application, select an application in the list, and then click <bpt id=\"p1\">**</bpt>Delete<ept id=\"p1\">**</ept>.",
      "pos": [
        8836,
        8923
      ]
    },
    {
      "content": "Additional resources",
      "pos": [
        8928,
        8948
      ]
    },
    {
      "content": "About Kerberos constrained delegation",
      "pos": [
        8953,
        8990
      ]
    },
    {
      "content": "test",
      "pos": [
        9045,
        9049
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Publishing Apps with Azure AD Application Proxy\"\n    description=\"Covers how to publish on-premises applications using Azure AD Application Proxy.\"\n    services=\"active-directory\"\n    documentationCenter=\"\"\n    authors=\"rkarlin\"\n    manager=\"terrylan\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"active-directory\"\n    ms.workload=\"identity\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"06/02/2015\"\n    ms.author=\"rkarlin\"/>\n\n\n# Publish applications using Azure AD Application Proxy\n\n> [AZURE.NOTE] Application Proxy is a feature that is available only if you upgraded to the Premium or Basic edition of Azure Active Directory. For more information, see [Azure Active Directory editions](https://msdn.microsoft.com/library/azure/dn532272.aspx).\n\nAfter you enable Microsoft Azure AD Application Proxy, you can publish applications to make them accessible for your users outside your private network.\n\nThis section walks you through the steps necessary to publish applications that are running on your local network for which you want to enable secure remote access from outside your network.\n\n> [AZURE.NOTE] To verify that the Connector is running properly, the first application you publish should be any website accessible from within your private network to assure users can access it from the Internet, before publishing an actual application.\n\n## Publish an app using the wizard\n\n1. Open a browser of your choice and go to the Azure Management Portal.\n2. In the left pane of the Azure Management Portal, click the Active Directory tab.\n3. Click the directory in which you enabled Application Proxy and for which you want to publish an application (for example, Wingtip Toys).\n4. Click the **Applications** tab, and then click the **Add** button at the bottom of the screen\n    ![Add application](http://i.imgur.com/wEeZ7IR.png)\n5. In the What do you want to do? dialog box, click **Publish an application that will be accessible outside your network**. \n    ![New application that will be accessible from outside your network](http://i.imgur.com/Wj3vkyD.png)\n\n6. Follow the instructions on the screen to provide the following information about your application:\n    ![Application properties](http://i.imgur.com/MkPNc93.png)\n\n**Setting** | **Details**\n---|---\nExternal URL | This is the URL of the cloud service that is used to access the application from outside your private network. The URL is automatically generated based on the name you provided, with the suffix msappproxy.net.\nPreauthentication Method | <p>Set the type of preauthentication method you want the application to use:</p><p>a. Microsoft Azure Active Directory (Microsoft Azure AD) – sets the preauthentication method to Microsoft Azure Active Directory (Microsoft Azure AD). When a user tries to access an application, Application Proxy will redirect the user to log in with Azure AD which will authenticate the user, ensuring that the user has the necessary permissions for the directory and the application.</p> <p>b. Pass through –preauthentication is not performed.</p>\nExternal URL Protocol | <p>By default, applications are published by using the HTTPS protocol.</p> <p>To enable HTTP for an internal application, you have to set Preauthentication to Passthrough and then you are able to change the External URL protocol from HTTPS to HTTP.</p> <p>Note that publishing applications by using HTTP may create security issues for your application and your users.</p> <p>You can insert a custom domain rather than using the default of msappproxy.net. For more information, see below.</p>\nInternal URL | This is the internal URL that the Application Proxy connector uses to access the application internally. This should be the URL of the published application that is used to access the application from inside your private network. This is a valid URL with no path and no spaces or symbols.\n\nTo finish the wizard, click the check mark at the bottom of the screen. The application is now defined in Azure AD.\n\n\n\n## Assign users and groups to the application\n\n1. For apps that are preauthenticated, you must assign users and groups that will have access to the app. <p>For apps that are passthrough, access is available for all users. However, in order for a user to see the app in their application list, you must assign the app to that user.\n2. After finishing the Add App wizard, the App Proxy Quick Start page is displayed. To assign users, click **Assign users**.\n    ![Application Proxy quick start screen](http://i.imgur.com/OmuWElV.png)\n3. Select each user or group you want to assign to this app and click **Assign**. \n\n> [AZURE.NOTE] For Integrated Windows Authentication apps, you can assign only users and groups that are synced from your on-prem Active Directory. Users logging in using a Microsoft account and guests cannot be assigned for apps published with Azure Active Directory Application Proxy. Make sure the users you assign log in with their credentials that are part of the same domain as the app you are publishing.\n\n## Advanced configuration\n\n1. You can modify published apps or configure advanced options, such as SSO to on-prem applications, from the **Configure** page.\n    ![Advanced configuration](http://i.imgur.com/FhbRvoq.png)\n\n2. Select the app and click **Configure**. The following options are available:\n\n**Setting** | **Details**\n---|---\nName | Provide a descriptive name for your application\nExternal URL | This is the URL of the cloud service that is used to access the application from outside your private network. The URL is automatically generated based on the name you provided, with the suffix **msappproxy.net.**\nPreauthentication Method | Set the type of preauthentication method you want the application to use:<p>Active directory – sets the preauthentication method to Active Directory. When a user tries to access an application, Application Proxy will redirect the user to log in with Application Proxy which will authenticate the user, ensuring that the user has the necessary permissions for the directory and the application.</p><p> Pass through –preauthentication is not performed.</p>\nExternal URL | By default, applications are published by using the HTTPS protocol. To enable HTTP for an internal application, you have to set Preauthentication to Passthrough and then you are able to change the External URL protocol from HTTPS to HTTP. Note that publishing applications by using HTTP may create security issues for your application and your users. You can set a custom domain rather than using the default domain provided (msappproxy.net). For more information, see Working with Custom Domains.\nInternal URL | This is the internal URL that the Application Proxy Connector uses to access the application internally. This should be the URL of the published application that is used to access the application from inside your private network. This is a valid URL with no path and no spaces or symbols.\nTranslate URL in Headers | For applications (such as some SharePoint configurations) that necessitate that the HTTP host headers are not translated, set this to No. This will disable header translation for both request and response headers.\nInternal Authentication Method | If you use Application Proxy for preauthentication, you can set an internal authentication method to enable your users to benefit from single-sign on (SSO) to this application. <p> Select **Integrated Windows Authentication (IWA)** if your application uses IWA and you can configure Kerberos Constrained Delegation (KCD) to enable SSO for this application. <p> Select **None** if your application does not use IWA. <p> Applications that use IWA must be configured using KCD, otherwise Application Proxy will not be able to publish these applications. <p> For more information, see SSO for On Prem IWA Apps Using KCD with App Proxy\nInternal Application SPN | This is the Service-Principal-Name (SPN) of the internal application as configured in the on-prem Application Proxy. The SPN is used by the Application Proxy Connector to fetch Kerberos tokens for the application using Kerberos Constrained Delegation (KCD). <p> For more information, see SSO for On Prem IWA Apps Using KCD with App Proxy\n\nAfter you publish applications using Azure Active Directory Application Proxy, they appear in the Applications list in Azure AD, and you can manage them there.\nIf you disable Application Proxy services after you have published applications, the applications are not deleted, but will no longer be accessible from outside your private network.\nTo view an application and make sure it is accessible, double-click the name of the application. If the Application Proxy service is disabled and the application is not available, a warning message appears at the top of the screen.\nTo delete an application, select an application in the list, and then click **Delete**.\n\n## Additional resources\n\n* [About Kerberos constrained delegation](http://technet.microsoft.com/library/cc995228.aspx)\n\ntest\n"
}