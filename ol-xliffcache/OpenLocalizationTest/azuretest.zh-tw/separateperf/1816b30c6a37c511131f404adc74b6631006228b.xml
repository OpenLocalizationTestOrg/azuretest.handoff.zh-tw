{
  "nodes": [
    {
      "content": "CDN - Restrict access to your content by country",
      "pos": [
        28,
        76
      ]
    },
    {
      "content": "When a user requests your content, by default, the content is served regardless of where the user made this request from.",
      "pos": [
        96,
        217
      ]
    },
    {
      "content": "In some cases, you may want to restrict access to your content by country.",
      "pos": [
        218,
        292
      ]
    },
    {
      "content": "This topic explains how to use the <bpt id=\"p1\">**</bpt>Country Filtering<ept id=\"p1\">**</ept> feature in order to configure the service to allow or block access by country.",
      "pos": [
        293,
        428
      ]
    },
    {
      "content": "Restrict access to your content by country",
      "pos": [
        720,
        762
      ]
    },
    {
      "content": "When a user requests your content, by default, the content is served regardless of where the user made this request from.",
      "pos": [
        764,
        885
      ]
    },
    {
      "content": "In some cases, you may want to restrict access to your content by country.",
      "pos": [
        886,
        960
      ]
    },
    {
      "content": "This topic explains how to use the <bpt id=\"p1\">**</bpt>Country Filtering<ept id=\"p1\">**</ept> feature in order to configure the service to allow or block access by country.",
      "pos": [
        961,
        1096
      ]
    },
    {
      "pos": [
        1099,
        1201
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>Once the configuration is set up, it will apply to all CDN endpoints in your subscription."
    },
    {
      "pos": [
        1203,
        1400
      ],
      "content": "For information about considerations that apply to configuring this type of restrictions, see the <bpt id=\"p1\">[</bpt>Considerations<ept id=\"p1\">](cdn-restrict-access-by-country.md#considerations)</ept> section at the end of the topic."
    },
    {
      "content": "Country filtering",
      "pos": [
        1406,
        1423
      ]
    },
    {
      "content": "Step 1: Define the directory path",
      "pos": [
        1478,
        1511
      ]
    },
    {
      "content": "When configuring a country filter, you must specify the relative path to the location to which users will be allowed or denied access.",
      "pos": [
        1513,
        1647
      ]
    },
    {
      "content": "You can apply country filtering for all your files with \"/\" or selected folders by specifying directory paths.",
      "pos": [
        1648,
        1758
      ]
    },
    {
      "content": "Example directory path filter:",
      "pos": [
        1760,
        1790
      ]
    },
    {
      "content": "Step 2: Define the action: block or allow",
      "pos": [
        1870,
        1911
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Block:<ept id=\"p1\">**</ept> Users from the specified countries will be denied access to assets requested from that recursive path.",
      "pos": [
        1913,
        2026
      ]
    },
    {
      "content": "If no other country filtering options have been configured for that location, then all other users will be allowed access.",
      "pos": [
        2027,
        2149
      ]
    },
    {
      "pos": [
        2151,
        2270
      ],
      "content": "<bpt id=\"p1\">**</bpt>Allow:<ept id=\"p1\">**</ept> Only users from the specified countries will be allowed access to assets requested from that recursive path."
    },
    {
      "content": "Step 3: Define the countries",
      "pos": [
        2274,
        2302
      ]
    },
    {
      "content": "Select the countries that you want to block or allow for the path.",
      "pos": [
        2304,
        2370
      ]
    },
    {
      "content": "For more information, see the <bpt id=\"p1\">[</bpt>Country codes<ept id=\"p1\">](cdn-country-codes.md)</ept> topic.",
      "pos": [
        2371,
        2445
      ]
    },
    {
      "content": "For example, the rule of blocking /Photos/Strasbourg/ will filter files including:",
      "pos": [
        2447,
        2529
      ]
    },
    {
      "content": "Country codes",
      "pos": [
        2671,
        2684
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Country Filtering<ept id=\"p1\">**</ept> feature uses country codes to define the countries from which a request will be allowed or blocked for a secured directory.",
      "pos": [
        2686,
        2835
      ]
    },
    {
      "content": "You will find the country codes in <bpt id=\"p1\">[</bpt>this<ept id=\"p1\">](cdn-country-codes.md)</ept> topic.",
      "pos": [
        2836,
        2906
      ]
    },
    {
      "content": "If you specify “EU” (Europe) or \"AP\" (Asia/Pacific), a subset of IP addresses that originate from any country in that regions will be blocked or allowed.",
      "pos": [
        2907,
        3060
      ]
    },
    {
      "pos": [
        3066,
        3107
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"considerations\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Considerations"
    },
    {
      "content": "It may take up to an hour for changes to your country filtering configuration to take effect.",
      "pos": [
        3111,
        3204
      ]
    },
    {
      "content": "This feature does not support wildcard characters (for example, ‘*’).",
      "pos": [
        3207,
        3276
      ]
    },
    {
      "content": "The country filtering configuration associated with the relative path will be applied recursively to that path.",
      "pos": [
        3279,
        3390
      ]
    },
    {
      "content": "Only one rule can be applied to the same relative path (you cannot create multiple country filters that point to the same relative path.",
      "pos": [
        3393,
        3529
      ]
    },
    {
      "content": "However, a folder may have multiple country filters.",
      "pos": [
        3530,
        3582
      ]
    },
    {
      "content": "This is due to the recursive nature of country filters.",
      "pos": [
        3583,
        3638
      ]
    },
    {
      "content": "In other words, a subfolder of a previously configured folder can be assigned a different country filter.",
      "pos": [
        3639,
        3744
      ]
    },
    {
      "content": "test",
      "pos": [
        3745,
        3749
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"CDN - Restrict access to your content by country\" \n    description=\"When a user requests your content, by default, the content is served regardless of where the user made this request from. In some cases, you may want to restrict access to your content by country. This topic explains how to use the **Country Filtering** feature in order to configure the service to allow or block access by country.\" \n    services=\"cdn\" \n    documentationCenter=\".NET\" \n    authors=\"juliako\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"cdn\" \n    ms.workload=\"tbd\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"09/01/2015\" \n    ms.author=\"juliako\"/>\n\n#Restrict access to your content by country\n\nWhen a user requests your content, by default, the content is served regardless of where the user made this request from. In some cases, you may want to restrict access to your content by country. This topic explains how to use the **Country Filtering** feature in order to configure the service to allow or block access by country.\n\n>[AZURE.NOTE]Once the configuration is set up, it will apply to all CDN endpoints in your subscription.\n\nFor information about considerations that apply to configuring this type of restrictions, see the [Considerations](cdn-restrict-access-by-country.md#considerations) section at the end of the topic.  \n\n![Country filtering](./media/cdn-filtering/cdn-country-filtering.png)\n\n\n##Step 1: Define the directory path\n\nWhen configuring a country filter, you must specify the relative path to the location to which users will be allowed or denied access. You can apply country filtering for all your files with \"/\" or selected folders by specifying directory paths.\n\nExample directory path filter:\n\n    /                                 \n    /Photos/\n    /Photos/Strasbourg\n\n##Step 2: Define the action: block or allow\n\n**Block:** Users from the specified countries will be denied access to assets requested from that recursive path. If no other country filtering options have been configured for that location, then all other users will be allowed access.\n\n**Allow:** Only users from the specified countries will be allowed access to assets requested from that recursive path.\n\n##Step 3: Define the countries\n\nSelect the countries that you want to block or allow for the path. For more information, see the [Country codes](cdn-country-codes.md) topic.\n\nFor example, the rule of blocking /Photos/Strasbourg/ will filter files including:\n\n    http://az123456.vo.msecnd.net/Photos/Strasbourg/1000.jpg. \n    http://az123456.vo.msecnd.net/Photos/Strasbourg/Cathedral/1000.jpg. \n\n\n##Country codes\n\nThe **Country Filtering** feature uses country codes to define the countries from which a request will be allowed or blocked for a secured directory. You will find the country codes in [this](cdn-country-codes.md) topic. If you specify “EU” (Europe) or \"AP\" (Asia/Pacific), a subset of IP addresses that originate from any country in that regions will be blocked or allowed. \n\n\n##<a id=\"considerations\"></a>Considerations\n\n- It may take up to an hour for changes to your country filtering configuration to take effect.\n- This feature does not support wildcard characters (for example, ‘*’).\n- The country filtering configuration associated with the relative path will be applied recursively to that path.\n- Only one rule can be applied to the same relative path (you cannot create multiple country filters that point to the same relative path. However, a folder may have multiple country filters. This is due to the recursive nature of country filters. In other words, a subfolder of a previously configured folder can be assigned a different country filter.\ntest\n"
}