{
  "nodes": [
    {
      "content": "Monitor Web Apps in Azure App Service",
      "pos": [
        27,
        64
      ]
    },
    {
      "content": "Learn how to monitor Web Apps in Azure App Service by using the Management Portal.",
      "pos": [
        83,
        165
      ]
    },
    {
      "pos": [
        477,
        541
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtomonitor\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Monitor Web Apps in Azure App Service"
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>App Service Web Apps<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept> provide monitoring functionality for Standard and Premium App Service plans via the Monitor management page.",
      "pos": [
        543,
        721
      ]
    },
    {
      "content": "The Monitor management page provides performance statistics for a web app as described below.",
      "pos": [
        722,
        815
      ]
    },
    {
      "pos": [
        819,
        875
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"websitemetrics\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Add web app metrics"
    },
    {
      "content": "In the <bpt id=\"p1\">[</bpt>Azure portal<ept id=\"p1\">](https://manage.windowsazure.com)</ept>, from the web app's page, click the <bpt id=\"p2\">**</bpt>Monitor<ept id=\"p2\">**</ept> tab to display the <bpt id=\"p3\">**</bpt>Monitor<ept id=\"p3\">**</ept> management page.",
      "pos": [
        880,
        1030
      ]
    },
    {
      "content": "By default the chart on the <bpt id=\"p1\">**</bpt>Monitor<ept id=\"p1\">**</ept> page displays the same metrics as the chart on the <bpt id=\"p2\">**</bpt>Dashboard<ept id=\"p2\">**</ept> page.",
      "pos": [
        1031,
        1141
      ]
    },
    {
      "pos": [
        1146,
        1283
      ],
      "content": "To view additional metrics for the web app, click <bpt id=\"p1\">**</bpt>Add Metrics<ept id=\"p1\">**</ept> at the bottom of the page to display the <bpt id=\"p2\">**</bpt>Choose Metrics<ept id=\"p2\">**</ept> dialog box."
    },
    {
      "pos": [
        1288,
        1359
      ],
      "content": "Click to select additional metrics for display on the <bpt id=\"p1\">**</bpt>Monitor<ept id=\"p1\">**</ept> page."
    },
    {
      "pos": [
        1364,
        1473
      ],
      "content": "After selecting the metrics that you want to add to the <bpt id=\"p1\">**</bpt>Monitor<ept id=\"p1\">**</ept> page, click the check mark at the bottom."
    },
    {
      "pos": [
        1478,
        1654
      ],
      "content": "After adding metrics to the <bpt id=\"p1\">**</bpt>Monitor<ept id=\"p1\">**</ept> page, click to enable / disable the round checkbox next to each metric to add / remove the metric from the chart at the top of the page."
    },
    {
      "pos": [
        1659,
        1814
      ],
      "content": "To remove metrics from the <bpt id=\"p1\">**</bpt>Monitor<ept id=\"p1\">**</ept> page, select the metric that you want to remove and then click the <bpt id=\"p2\">**</bpt>Delete Metric<ept id=\"p2\">**</ept> icon at the bottom of the page."
    },
    {
      "pos": [
        1818,
        1894
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtoreceivealerts\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Receive alerts from web app metrics"
    },
    {
      "content": "In <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> web app mode, you can receive alerts based on your web app monitoring metrics.",
      "pos": [
        1896,
        1990
      ]
    },
    {
      "content": "The alert feature requires that you first configure a web endpoint for monitoring, which you can do in the <bpt id=\"p1\">**</bpt>Monitoring<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Configure<ept id=\"p2\">**</ept> page.",
      "pos": [
        1991,
        2147
      ]
    },
    {
      "content": "You can also choose to have email sent when a metric you choose reaches a value that you specify.",
      "pos": [
        2148,
        2245
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>How to: Receive Alert Notifications and Manage Alert Rules in Azure<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=309356)</ept>.",
      "pos": [
        2246,
        2389
      ]
    },
    {
      "pos": [
        2395,
        2463
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtoviewusage\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: View usage quotas for a web app"
    },
    {
      "content": "Web apps can be configured to run in either <bpt id=\"p1\">**</bpt>Shared<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Standard<ept id=\"p2\">**</ept> mode from the web app's <bpt id=\"p3\">**</bpt>Scale<ept id=\"p3\">**</ept> management page in the <bpt id=\"p4\">[</bpt>Azure portal<ept id=\"p4\">](https://manage.windowsazure.com)</ept>.",
      "pos": [
        2465,
        2641
      ]
    },
    {
      "content": "Each Azure subscription has access to a pool of resources provided for the purpose of running up to 100 web apps per region in <bpt id=\"p1\">**</bpt>Shared<ept id=\"p1\">**</ept> mode.",
      "pos": [
        2642,
        2785
      ]
    },
    {
      "content": "The pool of resources available to each web app subscription for this purpose is shared by other web app in the same geo-region that are configured to run in <bpt id=\"p1\">**</bpt>Shared<ept id=\"p1\">**</ept> mode.",
      "pos": [
        2786,
        2960
      ]
    },
    {
      "content": "Because these resources are shared for use by other web apps, all subscriptions are limited in their use of these resources.",
      "pos": [
        2961,
        3085
      ]
    },
    {
      "content": "Limits applied to a subscription's use of these resources are expressed as usage quotas listed under the usage overview section of each web app's <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> management page.",
      "pos": [
        3086,
        3262
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> When a web app is configured to run in <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> mode, it is allocated dedicated resources equivalent to the <bpt id=\"p2\">**</bpt>Small<ept id=\"p2\">**</ept> (default), <bpt id=\"p3\">**</bpt>Medium<ept id=\"p3\">**</ept> or <bpt id=\"p4\">**</bpt>Large<ept id=\"p4\">**</ept> virtual machine sizes in the table at <bpt id=\"p5\">[</bpt>Virtual Machine and Cloud Service Sizes for Azure<ept id=\"p5\">][vmsizes]</ept>.",
      "pos": [
        3265,
        3534
      ]
    },
    {
      "content": "There are no limits to the resources a subscription can use for running web apps in <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> mode.",
      "pos": [
        3535,
        3637
      ]
    },
    {
      "content": "However, the number of <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> mode web apps that can be created per region is 500.",
      "pos": [
        3638,
        3726
      ]
    },
    {
      "content": "How to: View usage quotas for web apps configured for Shared mode",
      "pos": [
        3732,
        3797
      ]
    },
    {
      "content": "To determine the extent that a web app is impacting resource usage quotas, follow these steps:",
      "pos": [
        3802,
        3896
      ]
    },
    {
      "pos": [
        3901,
        4005
      ],
      "content": "Open the web app's <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> management page in the <bpt id=\"p2\">[</bpt>Azure portal<ept id=\"p2\">](https://manage.windowsazure.com)</ept>."
    },
    {
      "pos": [
        4009,
        4199
      ],
      "content": "Under the <bpt id=\"p1\">**</bpt>usage overview<ept id=\"p1\">**</ept> section the usage quotas for your respective <bpt id=\"p2\">[</bpt>App Service<ept id=\"p2\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept> plan are displayed, which is a subset of the following:"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Data Out<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>CPU Time<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Memory<ept id=\"p3\">**</ept> - when the quota is exceeded, Azure stops the web app for the remainder of the current quota interval.",
      "pos": [
        4208,
        4353
      ]
    },
    {
      "content": "Azure will start the web app at the beginning of the next quota interval.",
      "pos": [
        4354,
        4427
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>File System Storage<ept id=\"p1\">**</ept> - when this quota is reached, file system storage remains accessible for read operations, but all write operations, including those required for normal web app activity, are blocked.",
      "pos": [
        4436,
        4642
      ]
    },
    {
      "content": "Write operations will resume when you reduce file usage or move the web app to an App Service plan with a higher quota.",
      "pos": [
        4643,
        4762
      ]
    },
    {
      "pos": [
        4771,
        4898
      ],
      "content": "<bpt id=\"p1\">**</bpt>Linked Resources<ept id=\"p1\">**</ept> - quotas for any linked resources of the web app, such as database or storage, are displayed here as well."
    },
    {
      "content": "Some quotas can be applied per web hosting plan, while others can be applied per site.",
      "pos": [
        4904,
        4990
      ]
    },
    {
      "content": "For detailed information on usage quotas for each Web hosting plan, see <bpt id=\"p1\">[</bpt>Websites Limits<ept id=\"p1\">](azure-subscription-service-limits.md#websiteslimits)</ept>.",
      "pos": [
        4991,
        5134
      ]
    },
    {
      "pos": [
        5138,
        5202
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"resourceusage\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> How to: Avoid exceeding your quotas"
    },
    {
      "content": "Quotas are not a matter of performance or cost, but it's the way Azure governs resource usage in a multitenant environment by preventing tenants from overusing shared resources.",
      "pos": [
        5204,
        5381
      ]
    },
    {
      "content": "Since exceeding your quotas means downtime or reduced functionality for your web app, consider the following if you want to keep your site running when quotas are about to be reached:",
      "pos": [
        5382,
        5565
      ]
    },
    {
      "content": "Move your web app(s) to a higher-tier App Service plan to take advantage of a larger quota.",
      "pos": [
        5569,
        5660
      ]
    },
    {
      "content": "For example, the only quota for <bpt id=\"p1\">**</bpt>Basic<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Standard<ept id=\"p2\">**</ept> plans is File System Storage.",
      "pos": [
        5661,
        5749
      ]
    },
    {
      "content": "As the number of instances of a web app is increased, so is the likelihood of exceeding shared resource quotas.",
      "pos": [
        5752,
        5863
      ]
    },
    {
      "content": "If appropriate, consider scaling back additional instances of a web app when shared resource quotas are being exceeded.",
      "pos": [
        5864,
        5983
      ]
    },
    {
      "pos": [
        5987,
        6085
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"howtoconfigdiagnostics\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Configure diagnostics and download logs for a web app"
    },
    {
      "content": "Diagnostics are enabled on the <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> tab for the web app in the <bpt id=\"p2\">[</bpt>Azure portal<ept id=\"p2\">](https://manage.windowsazure.com)</ept>.",
      "pos": [
        6087,
        6207
      ]
    },
    {
      "content": "There are two types of diagnostics: <bpt id=\"p1\">**</bpt>application diagnostics<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>site diagnostics<ept id=\"p2\">**</ept>.",
      "pos": [
        6208,
        6297
      ]
    },
    {
      "content": "Application Diagnostics",
      "pos": [
        6304,
        6327
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>application diagnostics<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Configure<ept id=\"p2\">**</ept> management page controls the logging of information produced by the application, which is useful when logging events that occur within an application.",
      "pos": [
        6334,
        6545
      ]
    },
    {
      "content": "For example, when an error occurs in your application, you may wish to present the user with a friendly error while writing more detailed error information to the log for later analysis.",
      "pos": [
        6546,
        6732
      ]
    },
    {
      "content": "You can enable or disable the following application diagnostics:",
      "pos": [
        6734,
        6798
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Application Logging (File System)<ept id=\"p1\">**</ept> - Turns on logging of information produced by the application.",
      "pos": [
        6802,
        6902
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Logging Level<ept id=\"p1\">**</ept> field determines whether Error, Warning, or Information level information is logged.",
      "pos": [
        6903,
        7009
      ]
    },
    {
      "content": "You may also select Verbose, which will log all information produced by the application.",
      "pos": [
        7010,
        7098
      ]
    },
    {
      "pos": [
        7104,
        7280
      ],
      "content": "Logs produced by this setting are stored on the file system of your web app, and can be downloaded using the steps in the <bpt id=\"p1\">**</bpt>Downloading log files for a web app<ept id=\"p1\">**</ept> section below."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Application Logging (Table Storage)<ept id=\"p1\">**</ept> - Turns on the logging of information produced by the application, similar to the Application Logging (File System) option.",
      "pos": [
        7284,
        7447
      ]
    },
    {
      "content": "However, the log information is stored in an Azure Storage Account in a table.",
      "pos": [
        7448,
        7526
      ]
    },
    {
      "content": "To specify the Azure Storage Account and table, choose <bpt id=\"p1\">**</bpt>On<ept id=\"p1\">**</ept>, select the <bpt id=\"p2\">**</bpt>Logging Level<ept id=\"p2\">**</ept>, and then choose <bpt id=\"p3\">**</bpt>Manage Table Storage<ept id=\"p3\">**</ept>.",
      "pos": [
        7532,
        7666
      ]
    },
    {
      "content": "Specify the storage account and table to use, or create a new table.",
      "pos": [
        7667,
        7735
      ]
    },
    {
      "content": "The log information stored in the table can be accessed using an Azure Storage client.",
      "pos": [
        7741,
        7827
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Application Logging (Blob storage)<ept id=\"p1\">**</ept> - Turns on the logging of information produced by the application, similar to the Application Logging (Table Storage) option.",
      "pos": [
        7831,
        7995
      ]
    },
    {
      "content": "However, the log information is stored in a blob in an Azure Storage Account.",
      "pos": [
        7996,
        8073
      ]
    },
    {
      "content": "To specify the Azure Storage Account and blob, choose <bpt id=\"p1\">**</bpt>On<ept id=\"p1\">**</ept>, select the <bpt id=\"p2\">**</bpt>Logging Level<ept id=\"p2\">**</ept>, and then choose <bpt id=\"p3\">**</bpt>Manage Blob Storage<ept id=\"p3\">**</ept>.",
      "pos": [
        8079,
        8211
      ]
    },
    {
      "content": "Specify the storage account, blob container, and blob name to use, or create a new container and blob.",
      "pos": [
        8212,
        8314
      ]
    },
    {
      "pos": [
        8316,
        8463
      ],
      "content": "For more information about Azure Storage Accounts, see <bpt id=\"p1\">[</bpt>How to Manage Storage Accounts<ept id=\"p1\">](/manage/services/storage/how-to-manage-a-storage-account/)</ept>."
    },
    {
      "pos": [
        8467,
        8565
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Application logging to table or blob storage is only supported for .NET applications."
    },
    {
      "content": "Since application logging to storage requires using a storage client to view the log data, it is most useful when you plan on using a service or application that understands how to read and process the data directly from Azure Table or Blob Storage.",
      "pos": [
        8567,
        8816
      ]
    },
    {
      "content": "Logging to the file system produces files that can be downloaded to your local computer using FTP or other utilities as described later in this section.",
      "pos": [
        8817,
        8969
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Application diagnostics (file system)<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Application diagnostics (table storage)<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Application diagnostics (blob storage)<ept id=\"p3\">**</ept> can be enabled at the same time, and have individual log level configurations.",
      "pos": [
        8971,
        9184
      ]
    },
    {
      "content": "For example, you may wish to log errors and warnings to storage as a long-term logging solution, while enabling file system logging with a level of verbose after instrumenting the application code in order to troubleshoot a problem.",
      "pos": [
        9185,
        9417
      ]
    },
    {
      "content": "Diagnostics can also be enabled from Azure PowerShell using the <bpt id=\"p1\">**</bpt>Set-AzureWebsite<ept id=\"p1\">**</ept> cmdlet.",
      "pos": [
        9419,
        9511
      ]
    },
    {
      "content": "If you have not installed Azure PowerShell, or have not configured it to use your Azure Subscription, see <bpt id=\"p1\">[</bpt>How to Use Azure PowerShell<ept id=\"p1\">](/develop/nodejs/how-to-guides/powershell-cmdlets/)</ept>.",
      "pos": [
        9512,
        9699
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Application logging relies on log information generated by your application.",
      "pos": [
        9703,
        9792
      ]
    },
    {
      "content": "The method used to generate log information, as well as the format of the information is specific to the language your application is written in.",
      "pos": [
        9793,
        9938
      ]
    },
    {
      "content": "For language-specific information on using application logging, see the following articles:",
      "pos": [
        9939,
        10030
      ]
    },
    {
      "pos": [
        10037,
        10161
      ],
      "content": "<bpt id=\"p1\">**</bpt>.NET<ept id=\"p1\">**</ept> - <bpt id=\"p2\">[</bpt>Troubleshoot a web app in Azure App Service using Visual Studio<ept id=\"p2\">](web-sites-dotnet-troubleshoot-visual-studio.md)</ept>"
    },
    {
      "pos": [
        10166,
        10261
      ],
      "content": "<bpt id=\"p1\">**</bpt>Node.js<ept id=\"p1\">**</ept> - <bpt id=\"p2\">[</bpt>How to debug a Node.js application in Azure Websites<ept id=\"p2\">](web-sites-nodejs-debug.md)</ept>"
    },
    {
      "content": "Application logging to table or blob storage is only supported for .NET applications.",
      "pos": [
        10266,
        10351
      ]
    },
    {
      "content": "Site Diagnostics",
      "pos": [
        10358,
        10374
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>site diagnostics<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Configure<ept id=\"p2\">**</ept> management page controls the logging performed by the web server, such as the logging of web requests, failure to serve pages, or how long it took to serve a page.",
      "pos": [
        10381,
        10598
      ]
    },
    {
      "content": "You can enable or disable the following options:",
      "pos": [
        10599,
        10647
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Web Server Logging<ept id=\"p1\">**</ept> - Turn on Web Server logging to save web app logs using the W3C extended log file format.",
      "pos": [
        10651,
        10763
      ]
    },
    {
      "content": "Web server logging produces a record of all incoming requests to your web app, which contains information such as the client IP address, requested URI, HTTP status code of the response, and the user agent string of the client.",
      "pos": [
        10764,
        10990
      ]
    },
    {
      "content": "You can save the logs to an Azure Storage Account or to the File System.",
      "pos": [
        10991,
        11063
      ]
    },
    {
      "content": "To save web server logs to an Azure Storage Account, choose <bpt id=\"p1\">**</bpt>Storage<ept id=\"p1\">**</ept>, and then choose <bpt id=\"p2\">**</bpt>manage storage<ept id=\"p2\">**</ept> to specify a storage account and an Azure Blob Container where the logs will be kept.",
      "pos": [
        11066,
        11259
      ]
    },
    {
      "content": "For more information about Azure Storage Accounts, see <bpt id=\"p1\">[</bpt>How to Manage Storage Accounts<ept id=\"p1\">](/manage/services/storage/how-to-manage-a-storage-account/)</ept>.",
      "pos": [
        11260,
        11407
      ]
    },
    {
      "content": "To save web server logs to the file system, choose <bpt id=\"p1\">**</bpt>File System<ept id=\"p1\">**</ept>.",
      "pos": [
        11412,
        11479
      ]
    },
    {
      "content": "This enables the <bpt id=\"p1\">**</bpt>Quota<ept id=\"p1\">**</ept> box where you can set the maximum amount of disk space for the log files.",
      "pos": [
        11480,
        11580
      ]
    },
    {
      "content": "The minimum size is 25MB and the maximum is 100MB.",
      "pos": [
        11581,
        11631
      ]
    },
    {
      "content": "The default size is 35MB.",
      "pos": [
        11632,
        11657
      ]
    },
    {
      "content": "By default, web server logs are never deleted.",
      "pos": [
        11660,
        11706
      ]
    },
    {
      "content": "To specify a period of time after which the logs will be automatically deleted, select <bpt id=\"p1\">**</bpt>Set Retention<ept id=\"p1\">**</ept> and enter the number of days to keep the logs in the <bpt id=\"p2\">**</bpt>Retention Period<ept id=\"p2\">**</ept> box.",
      "pos": [
        11707,
        11890
      ]
    },
    {
      "content": "This setting is available for both the Azure Storage and File System options.",
      "pos": [
        11891,
        11968
      ]
    },
    {
      "pos": [
        11972,
        12113
      ],
      "content": "<bpt id=\"p1\">**</bpt>Detailed Error Messages<ept id=\"p1\">**</ept> - Turn on detailed error logging to log additional information about HTTP errors (status codes greater than 400)."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Failed Request Tracing<ept id=\"p1\">**</ept> - Turn on failed request tracing to capture information for failed client requests, such as a 400 series HTTP status code.",
      "pos": [
        12117,
        12266
      ]
    },
    {
      "content": "Failed request tracing produces an XML document that contains a trace of which modules the request passed through in IIS, details returned by the module, and the time the module was invoked.",
      "pos": [
        12268,
        12458
      ]
    },
    {
      "content": "This information can be used to isolate which component the failure occurred in.",
      "pos": [
        12459,
        12539
      ]
    },
    {
      "pos": [
        12542,
        12698
      ],
      "content": "After enabling diagnostics for a web app, click the <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept> icon at the bottom of the <bpt id=\"p2\">**</bpt>Configure<ept id=\"p2\">**</ept> management page to apply the options that you have set."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> Detailed Error Messages and Failed Request Tracing place significant demands on a web app.",
      "pos": [
        12702,
        12810
      ]
    },
    {
      "content": "We recommend turning off these features once you have reproduced the problem(s) that you are troubleshooting.",
      "pos": [
        12811,
        12920
      ]
    },
    {
      "content": "Advanced configuration",
      "pos": [
        12926,
        12948
      ]
    },
    {
      "content": "Diagnostics can be further modified by adding key/value pairs to the <bpt id=\"p1\">**</bpt>app settings<ept id=\"p1\">**</ept> section of the <bpt id=\"p2\">**</bpt>Configure<ept id=\"p2\">**</ept> management page.",
      "pos": [
        12954,
        13085
      ]
    },
    {
      "content": "The following settings can be configured from <bpt id=\"p1\">**</bpt>app settings<ept id=\"p1\">**</ept>:",
      "pos": [
        13086,
        13149
      ]
    },
    {
      "content": "DIAGNOSTICS_TEXTTRACELOGDIRECTORY",
      "pos": [
        13153,
        13186
      ]
    },
    {
      "content": "The location in which application logs will be saved, relative to the web root.",
      "pos": [
        13192,
        13271
      ]
    },
    {
      "content": "Default value: ..\\\\..\\\\LogFiles\\\\Application",
      "pos": [
        13275,
        13319
      ]
    },
    {
      "content": "DIAGNOSTICS_TEXTTRACEMAXBUFFERSIZEBYTES",
      "pos": [
        13323,
        13362
      ]
    },
    {
      "content": "The maximum buffer size to use when capturing application logs.",
      "pos": [
        13368,
        13431
      ]
    },
    {
      "content": "Information is initially written to the buffer before being flushed to file or storage.",
      "pos": [
        13432,
        13519
      ]
    },
    {
      "content": "If new information is written to the buffer before it can be flushed, you may lose previously logged information.",
      "pos": [
        13520,
        13633
      ]
    },
    {
      "content": "If your application produces large bursts of log information, consider increasing the size of the buffer.",
      "pos": [
        13634,
        13739
      ]
    },
    {
      "content": "Default value: 10MB",
      "pos": [
        13743,
        13762
      ]
    },
    {
      "content": "DIAGNOSTICS_TEXTTRACEMAXLOGFOLDERSIZEBYTES",
      "pos": [
        13766,
        13808
      ]
    },
    {
      "pos": [
        13814,
        13921
      ],
      "content": "The maximum size of the <bpt id=\"p1\">**</bpt>Application<ept id=\"p1\">**</ept> folder in which application diagnostics written to file are stored."
    },
    {
      "content": "Default value: 1MB",
      "pos": [
        13925,
        13943
      ]
    },
    {
      "content": "Downloading log files for a web app",
      "pos": [
        13948,
        13983
      ]
    },
    {
      "content": "Log files can be downloaded using either FTP, Azure PowerShell, or the Azure CLI.",
      "pos": [
        13985,
        14066
      ]
    },
    {
      "content": "FTP",
      "pos": [
        14070,
        14073
      ]
    },
    {
      "content": "Open the web app's <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> management page in the <bpt id=\"p2\">[</bpt>Azure portal<ept id=\"p2\">](https://manage.windowsazure.com)</ept> and make note of the FTP site listed under <bpt id=\"p3\">**</bpt>Diagnostics Logs<ept id=\"p3\">**</ept> and the account listed under <bpt id=\"p4\">**</bpt>Deployment User<ept id=\"p4\">**</ept>.",
      "pos": [
        14080,
        14297
      ]
    },
    {
      "content": "The FTP site is where the log files are located and the account listed under Deployment User is used to authenticate to the FTP site.",
      "pos": [
        14298,
        14431
      ]
    },
    {
      "content": "If you have not yet created deployment credentials, the account listed under <bpt id=\"p1\">**</bpt>Deployment User<ept id=\"p1\">**</ept> is listed as <bpt id=\"p2\">**</bpt>Not set<ept id=\"p2\">**</ept>.",
      "pos": [
        14435,
        14557
      ]
    },
    {
      "content": "In this case you must create deployment credentials as described in the Reset Deployment Credentials section of the Dashboard because these credentials must be used to authenticate to the FTP site where the log files are stored.",
      "pos": [
        14558,
        14786
      ]
    },
    {
      "content": "Azure does not support authenticating to this FTP site using Live ID credentials.",
      "pos": [
        14787,
        14868
      ]
    },
    {
      "content": "Consider using an FTP client such as <bpt id=\"p1\">[</bpt>FileZilla<ept id=\"p1\">][fzilla]</ept> to connect to the FTP site.",
      "pos": [
        14872,
        14956
      ]
    },
    {
      "content": "An FTP client provides greater ease of use for specifying credentials and viewing folders on an FTP site than is typically possible with a browser.",
      "pos": [
        14957,
        15104
      ]
    },
    {
      "content": "Copy the log files from the FTP site to your local computer.",
      "pos": [
        15108,
        15168
      ]
    },
    {
      "content": "Azure PowerShell",
      "pos": [
        15172,
        15188
      ]
    },
    {
      "content": "From the <bpt id=\"p1\">**</bpt>Start Screen<ept id=\"p1\">**</ept> or the <bpt id=\"p2\">**</bpt>Start Menu<ept id=\"p2\">**</ept>, search for <bpt id=\"p3\">**</bpt>Azure PowerShell<ept id=\"p3\">**</ept>.",
      "pos": [
        15195,
        15276
      ]
    },
    {
      "content": "Right-click the <bpt id=\"p1\">**</bpt>Azure PowerShell<ept id=\"p1\">**</ept> entry and select <bpt id=\"p2\">**</bpt>Run as Administrator<ept id=\"p2\">**</ept>.",
      "pos": [
        15277,
        15356
      ]
    },
    {
      "pos": [
        15364,
        15580
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If <bpt id=\"p1\">**</bpt>Azure PowerShell<ept id=\"p1\">**</ept> is not installed, see <bpt id=\"p2\">[</bpt>Getting Started with Azure PowerShell Cmdlets<ept id=\"p2\">](http://msdn.microsoft.com/library/windowsazure/jj554332.aspx)</ept> for installation and configuration information."
    },
    {
      "content": "From the Azure PowerShell prompt, use the following command to download the log files:",
      "pos": [
        15585,
        15671
      ]
    },
    {
      "pos": [
        15724,
        15862
      ],
      "content": "This will download the log files for the web app specified by <bpt id=\"p1\">**</bpt>webappname<ept id=\"p1\">**</ept> and save them to a <bpt id=\"p2\">**</bpt>log.zip<ept id=\"p2\">**</ept> file in the current directory."
    },
    {
      "content": "You may also view a live stream of log events by using the following command:",
      "pos": [
        15868,
        15945
      ]
    },
    {
      "content": "This will display log information to the Azure PowerShell prompt as they occur.",
      "pos": [
        16003,
        16082
      ]
    },
    {
      "content": "Azure CLI",
      "pos": [
        16086,
        16095
      ]
    },
    {
      "content": "Open a new command prompt, PowerShell, bash, or terminal session, and use the following command to download the log files:",
      "pos": [
        16099,
        16221
      ]
    },
    {
      "pos": [
        16263,
        16401
      ],
      "content": "This will download the log files for the web app specified by <bpt id=\"p1\">**</bpt>webappname<ept id=\"p1\">**</ept> and save them to a <bpt id=\"p2\">**</bpt>log.zip<ept id=\"p2\">**</ept> file in the current directory."
    },
    {
      "content": "You may also view a lie stream of log events by using the following command:",
      "pos": [
        16403,
        16479
      ]
    },
    {
      "content": "This will display log information to the command prompt, PowerShell, bash or terminal session that the command is ran from.",
      "pos": [
        16517,
        16640
      ]
    },
    {
      "pos": [
        16644,
        16821
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If the <bpt id=\"p1\">**</bpt>azure<ept id=\"p1\">**</ept> command is not installed, see <bpt id=\"p2\">[</bpt>How to use the Azure CLI<ept id=\"p2\">](../virtual-machines-command-line-tools.md)</ept> for installation and configuration information."
    },
    {
      "content": "Reading log files",
      "pos": [
        16827,
        16844
      ]
    },
    {
      "content": "The log files that are generated after you have enabled logging and / or tracing for a web app vary depending on the level of logging / tracing that is set on the Configure management page for the web app.",
      "pos": [
        16850,
        17055
      ]
    },
    {
      "content": "Following are the location of the log files and how the log files may be analyzed:",
      "pos": [
        17056,
        17138
      ]
    },
    {
      "content": "Log File Type: Application Logging",
      "pos": [
        17142,
        17176
      ]
    },
    {
      "content": "Location /LogFiles/Application/.",
      "pos": [
        17182,
        17214
      ]
    },
    {
      "content": "This folder contains one or more text files containing information produced by application logging.",
      "pos": [
        17215,
        17314
      ]
    },
    {
      "content": "The information logged includes the date and time, the Process ID (PID) of the application, and the value produced by the application instrumentation.",
      "pos": [
        17315,
        17465
      ]
    },
    {
      "content": "Read Files with: A text editor or parser that understands the values produced by your application",
      "pos": [
        17469,
        17566
      ]
    },
    {
      "content": "Log File Type: Failed Request Tracing",
      "pos": [
        17570,
        17607
      ]
    },
    {
      "content": "Location: /LogFiles/W3SVC#########/.",
      "pos": [
        17613,
        17649
      ]
    },
    {
      "content": "This folder contains an XSL file and one or more XML files.",
      "pos": [
        17650,
        17709
      ]
    },
    {
      "content": "Ensure that you download the XSL file into the same directory as the XML file(s) because the XSL file provides functionality for formatting and filtering the contents of the XML file(s) when viewed in Internet Explorer.",
      "pos": [
        17710,
        17929
      ]
    },
    {
      "content": "Read Files with: Internet Explorer",
      "pos": [
        17933,
        17967
      ]
    },
    {
      "content": "Log File Type: Detailed Error Logging",
      "pos": [
        17971,
        18008
      ]
    },
    {
      "content": "Location: /LogFiles/DetailedErrors/.",
      "pos": [
        18014,
        18050
      ]
    },
    {
      "content": "The /LogFiles/DetailedErrors/ folder contains one or more .htm files that provide extensive information for any HTTP errors that have occurred.",
      "pos": [
        18051,
        18194
      ]
    },
    {
      "content": "Read Files with: Web browser",
      "pos": [
        18198,
        18226
      ]
    },
    {
      "content": "The .htm files include the following sections:",
      "pos": [
        18228,
        18274
      ]
    },
    {
      "pos": [
        18278,
        18438
      ],
      "content": "<bpt id=\"p1\">**</bpt>Detailed Error Information:<ept id=\"p1\">**</ept> Includes information about the error such as <ph id=\"ph1\">&lt;em&gt;</ph>Module<ph id=\"ph2\">&lt;/em&gt;</ph>, <ph id=\"ph3\">&lt;em&gt;</ph>Handler<ph id=\"ph4\">&lt;/em&gt;</ph>, <ph id=\"ph5\">&lt;em&gt;</ph>Error Code<ph id=\"ph6\">&lt;/em&gt;</ph>, and <ph id=\"ph7\">&lt;em&gt;</ph>Requested URL<ph id=\"ph8\">&lt;/em&gt;</ph>."
    },
    {
      "pos": [
        18442,
        18509
      ],
      "content": "<bpt id=\"p1\">**</bpt>Most likely causes:<ept id=\"p1\">**</ept> Lists several possible causes of the error."
    },
    {
      "pos": [
        18513,
        18610
      ],
      "content": "<bpt id=\"p1\">**</bpt>Things you can try:<ept id=\"p1\">**</ept> Lists possible solutions for resolving the problem reported by the error."
    },
    {
      "pos": [
        18614,
        18790
      ],
      "content": "<bpt id=\"p1\">**</bpt>Links and More Information<ept id=\"p1\">**</ept>: Provides additional summary information about the error and may also include links to other resources such as Microsoft Knowledge Base articles."
    },
    {
      "content": "Log File Type: Web Server Logging",
      "pos": [
        18794,
        18827
      ]
    },
    {
      "content": "Location: /LogFiles/http/RawLogs.",
      "pos": [
        18833,
        18866
      ]
    },
    {
      "content": "The information stored in the files is formatted using the <bpt id=\"p1\">[</bpt>W3C extended log format<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkID=90561)</ept>.",
      "pos": [
        18867,
        18998
      ]
    },
    {
      "content": "The s-computername, s-ip and cs-version fields are not used by Azure web apps.",
      "pos": [
        18999,
        19077
      ]
    },
    {
      "content": "Read Files with: Log Parser.",
      "pos": [
        19081,
        19109
      ]
    },
    {
      "content": "Used to parse and query IIS log files.",
      "pos": [
        19110,
        19148
      ]
    },
    {
      "content": "Log Parser 2.2 is available on the Microsoft Download Center at <ph id=\"ph1\">&lt;a href=\"http://go.microsoft.com/fwlink/?LinkId=246619\"&gt;</ph>http://go.microsoft.com/fwlink/?LinkId=246619<ph id=\"ph2\">&lt;/a&gt;</ph>.",
      "pos": [
        19149,
        19319
      ]
    },
    {
      "pos": [
        19324,
        19392
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"webendpointstatus\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> How to: Monitor web endpoint status"
    },
    {
      "pos": [
        19394,
        19509
      ],
      "content": "This feature, available in <bpt id=\"p1\">**</bpt>Standard<ept id=\"p1\">**</ept> mode, lets you monitor up to 2 endpoints from up to 3 geographic locations."
    },
    {
      "content": "Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.",
      "pos": [
        19511,
        19630
      ]
    },
    {
      "content": "The test performs an HTTP get operation on the web URL to determine the response time and uptime from each location.",
      "pos": [
        19631,
        19747
      ]
    },
    {
      "content": "Each configured location runs a test every five minutes.",
      "pos": [
        19748,
        19804
      ]
    },
    {
      "content": "Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.",
      "pos": [
        19806,
        19899
      ]
    },
    {
      "content": "Uptime is considered 100% when the response time is less than 30 seconds and the HTTP status code is lower than 400.",
      "pos": [
        19900,
        20016
      ]
    },
    {
      "content": "Uptime is 0% when the response time is greater than 30 seconds or the HTTP status code is greater than 400.",
      "pos": [
        20017,
        20124
      ]
    },
    {
      "content": "After you configure endpoint monitoring, you can drill down into the individual endpoints to view details response time and uptime status over the monitoring interval from each of the test locations.",
      "pos": [
        20126,
        20325
      ]
    },
    {
      "content": "You can also set up an alert rule when the endpoint takes too long to respond, for example.",
      "pos": [
        20326,
        20417
      ]
    },
    {
      "content": "To configure endpoint monitoring:",
      "pos": [
        20421,
        20454
      ]
    },
    {
      "content": "Open <bpt id=\"p1\">**</bpt>Web Apps<ept id=\"p1\">**</ept>.",
      "pos": [
        20462,
        20480
      ]
    },
    {
      "content": "Click the name of the web app you want to configure.",
      "pos": [
        20481,
        20533
      ]
    },
    {
      "pos": [
        20538,
        20566
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> tab."
    },
    {
      "pos": [
        20574,
        20639
      ],
      "content": "Go to the <bpt id=\"p1\">**</bpt>Monitoring<ept id=\"p1\">**</ept> section to enter your endpoint settings."
    },
    {
      "content": "Enter a name for the endpoint.",
      "pos": [
        20644,
        20674
      ]
    },
    {
      "content": "Enter the URL for a part of your web app that you want to monitor.",
      "pos": [
        20679,
        20745
      ]
    },
    {
      "content": "For example, <bpt id=\"p1\">[</bpt>http://contoso.azurewebsites.net/archive<ept id=\"p1\">](http://contoso.azurewebsites.net/archive)</ept>.",
      "pos": [
        20746,
        20844
      ]
    },
    {
      "content": "Select one or more geographic locations from the list.",
      "pos": [
        20849,
        20903
      ]
    },
    {
      "content": "Optionally, repeat the previous steps to create a second endpoint.",
      "pos": [
        20908,
        20974
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Save<ept id=\"p1\">**</ept>.",
      "pos": [
        20979,
        20994
      ]
    },
    {
      "content": "It may take some time for the web endpoint monitoring data to be available on the <bpt id=\"p1\">**</bpt>Dashboard<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Monitor<ept id=\"p2\">**</ept> tabs.",
      "pos": [
        20995,
        21112
      ]
    },
    {
      "content": "To create an email rule, do the following:",
      "pos": [
        21118,
        21160
      ]
    },
    {
      "pos": [
        21166,
        21232
      ],
      "content": "In the service bar at the far left, click <bpt id=\"p1\">**</bpt>Management Services<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        21237,
        21270
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Add Rule<ept id=\"p1\">**</ept> at the bottom."
    },
    {
      "content": "In <bpt id=\"p1\">**</bpt>Service Type<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Web App<ept id=\"p2\">**</ept>, then select the web app for which you configured endpoint monitoring earlier.",
      "pos": [
        21275,
        21393
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>.",
      "pos": [
        21394,
        21409
      ]
    },
    {
      "content": "In <bpt id=\"p1\">**</bpt>Metric<ept id=\"p1\">**</ept>, you can now select additional metrics for the endpoint you configured.",
      "pos": [
        21414,
        21499
      ]
    },
    {
      "content": "For example: <bpt id=\"p1\">**</bpt>Response Time (homepage/US: IL-Chicago)<ept id=\"p1\">**</ept>.",
      "pos": [
        21500,
        21557
      ]
    },
    {
      "content": "Select the Response Time metric and type 3 in <bpt id=\"p1\">**</bpt>Threshold Value<ept id=\"p1\">**</ept> to specify a 3-second threshold.",
      "pos": [
        21558,
        21656
      ]
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Send an email to the service administrator and co-administrators<ept id=\"p1\">**</ept>.",
      "pos": [
        21661,
        21737
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Complete<ept id=\"p1\">**</ept>.",
      "pos": [
        21738,
        21757
      ]
    },
    {
      "content": "Azure will now actively monitor the endpoint and send an email alert when it takes more than 3 seconds to reply.",
      "pos": [
        21763,
        21875
      ]
    },
    {
      "content": "For more on web app endpoint monitoring, see the following videos:",
      "pos": [
        21877,
        21943
      ]
    },
    {
      "content": "Scott Guthrie introduces Azure Web Sites and sets up Endpoint Monitoring",
      "pos": [
        21948,
        22020
      ]
    },
    {
      "content": "Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow",
      "pos": [
        22091,
        22165
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you want to get started with Azure App Service before signing up for an Azure account, go to <bpt id=\"p1\">[</bpt>Try App Service<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=523751)</ept>, where you can immediately create a short-lived starter web app in App Service.",
      "pos": [
        22244,
        22497
      ]
    },
    {
      "content": "No credit cards required; no commitments.",
      "pos": [
        22498,
        22539
      ]
    },
    {
      "content": "What's changed",
      "pos": [
        22544,
        22558
      ]
    },
    {
      "pos": [
        22561,
        22729
      ],
      "content": "For a guide to the change from Websites to App Service see: <bpt id=\"p1\">[</bpt>Azure App Service and Its Impact on Existing Azure Services<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept>"
    },
    {
      "pos": [
        22732,
        22903
      ],
      "content": "For a guide to the change of the Azure portal to the Azure preview portal see: <bpt id=\"p1\">[</bpt>Reference for navigating the preview portal<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529715)</ept>"
    },
    {
      "content": "test",
      "pos": [
        23019,
        23023
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Monitor Web Apps in Azure App Service\"\n    description=\"Learn how to monitor Web Apps in Azure App Service by using the Management Portal.\"\n    services=\"app-service\\web\"\n    documentationCenter=\"\"\n    authors=\"cephalin\"\n    manager=\"wpickett\"\n    editor=\"mollybos\"/>\n\n<tags\n    ms.service=\"app-service-web\"\n    ms.workload=\"web\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"07/02/2015\"\n    ms.author=\"cephalin\"/>\n\n#<a name=\"howtomonitor\"></a>Monitor Web Apps in Azure App Service\n\n[App Service Web Apps](http://go.microsoft.com/fwlink/?LinkId=529714) provide monitoring functionality for Standard and Premium App Service plans via the Monitor management page. The Monitor management page provides performance statistics for a web app as described below.\n\n##<a name=\"websitemetrics\"></a>How to: Add web app metrics\n\n1. In the [Azure portal](https://manage.windowsazure.com), from the web app's page, click the **Monitor** tab to display the **Monitor** management page. By default the chart on the **Monitor** page displays the same metrics as the chart on the **Dashboard** page.\n\n2. To view additional metrics for the web app, click **Add Metrics** at the bottom of the page to display the **Choose Metrics** dialog box.\n\n3. Click to select additional metrics for display on the **Monitor** page.\n\n4. After selecting the metrics that you want to add to the **Monitor** page, click the check mark at the bottom.\n\n5. After adding metrics to the **Monitor** page, click to enable / disable the round checkbox next to each metric to add / remove the metric from the chart at the top of the page.\n\n6. To remove metrics from the **Monitor** page, select the metric that you want to remove and then click the **Delete Metric** icon at the bottom of the page.\n\n##<a name=\"howtoreceivealerts\"></a>How to: Receive alerts from web app metrics\n\nIn **Standard** web app mode, you can receive alerts based on your web app monitoring metrics. The alert feature requires that you first configure a web endpoint for monitoring, which you can do in the **Monitoring** section of the **Configure** page. You can also choose to have email sent when a metric you choose reaches a value that you specify. For more information, see [How to: Receive Alert Notifications and Manage Alert Rules in Azure](http://go.microsoft.com/fwlink/?LinkId=309356).  \n\n##<a name=\"howtoviewusage\"></a>How to: View usage quotas for a web app\n\nWeb apps can be configured to run in either **Shared** or **Standard** mode from the web app's **Scale** management page in the [Azure portal](https://manage.windowsazure.com). Each Azure subscription has access to a pool of resources provided for the purpose of running up to 100 web apps per region in **Shared** mode. The pool of resources available to each web app subscription for this purpose is shared by other web app in the same geo-region that are configured to run in **Shared** mode. Because these resources are shared for use by other web apps, all subscriptions are limited in their use of these resources. Limits applied to a subscription's use of these resources are expressed as usage quotas listed under the usage overview section of each web app's **Dashboard** management page.\n\n>[AZURE.NOTE] When a web app is configured to run in **Standard** mode, it is allocated dedicated resources equivalent to the **Small** (default), **Medium** or **Large** virtual machine sizes in the table at [Virtual Machine and Cloud Service Sizes for Azure][vmsizes]. There are no limits to the resources a subscription can use for running web apps in **Standard** mode. However, the number of **Standard** mode web apps that can be created per region is 500.\n\n### How to: View usage quotas for web apps configured for Shared mode ###\nTo determine the extent that a web app is impacting resource usage quotas, follow these steps:\n\n1. Open the web app's **Dashboard** management page in the [Azure portal](https://manage.windowsazure.com).\n2. Under the **usage overview** section the usage quotas for your respective [App Service](http://go.microsoft.com/fwlink/?LinkId=529714) plan are displayed, which is a subset of the following:\n    -   **Data Out**, **CPU Time**, and **Memory** - when the quota is exceeded, Azure stops the web app for the remainder of the current quota interval. Azure will start the web app at the beginning of the next quota interval.\n    -   **File System Storage** - when this quota is reached, file system storage remains accessible for read operations, but all write operations, including those required for normal web app activity, are blocked. Write operations will resume when you reduce file usage or move the web app to an App Service plan with a higher quota.\n    -   **Linked Resources** - quotas for any linked resources of the web app, such as database or storage, are displayed here as well.\n\n    Some quotas can be applied per web hosting plan, while others can be applied per site. For detailed information on usage quotas for each Web hosting plan, see [Websites Limits](azure-subscription-service-limits.md#websiteslimits).\n\n##<a name=\"resourceusage\"></a> How to: Avoid exceeding your quotas\n\nQuotas are not a matter of performance or cost, but it's the way Azure governs resource usage in a multitenant environment by preventing tenants from overusing shared resources. Since exceeding your quotas means downtime or reduced functionality for your web app, consider the following if you want to keep your site running when quotas are about to be reached:\n\n- Move your web app(s) to a higher-tier App Service plan to take advantage of a larger quota. For example, the only quota for **Basic** and **Standard** plans is File System Storage.\n- As the number of instances of a web app is increased, so is the likelihood of exceeding shared resource quotas. If appropriate, consider scaling back additional instances of a web app when shared resource quotas are being exceeded.\n\n##<a name=\"howtoconfigdiagnostics\"></a>How to: Configure diagnostics and download logs for a web app\n\nDiagnostics are enabled on the **Configure** tab for the web app in the [Azure portal](https://manage.windowsazure.com). There are two types of diagnostics: **application diagnostics** and **site diagnostics**.\n\n#### Application Diagnostics ####\n\nThe **application diagnostics** section of the **Configure** management page controls the logging of information produced by the application, which is useful when logging events that occur within an application. For example, when an error occurs in your application, you may wish to present the user with a friendly error while writing more detailed error information to the log for later analysis.\n\nYou can enable or disable the following application diagnostics:\n\n- **Application Logging (File System)** - Turns on logging of information produced by the application. The **Logging Level** field determines whether Error, Warning, or Information level information is logged. You may also select Verbose, which will log all information produced by the application.\n\n    Logs produced by this setting are stored on the file system of your web app, and can be downloaded using the steps in the **Downloading log files for a web app** section below.\n\n- **Application Logging (Table Storage)** - Turns on the logging of information produced by the application, similar to the Application Logging (File System) option. However, the log information is stored in an Azure Storage Account in a table.\n\n    To specify the Azure Storage Account and table, choose **On**, select the **Logging Level**, and then choose **Manage Table Storage**. Specify the storage account and table to use, or create a new table.\n\n    The log information stored in the table can be accessed using an Azure Storage client.\n\n- **Application Logging (Blob storage)** - Turns on the logging of information produced by the application, similar to the Application Logging (Table Storage) option. However, the log information is stored in a blob in an Azure Storage Account.\n\n    To specify the Azure Storage Account and blob, choose **On**, select the **Logging Level**, and then choose **Manage Blob Storage**. Specify the storage account, blob container, and blob name to use, or create a new container and blob.\n\nFor more information about Azure Storage Accounts, see [How to Manage Storage Accounts](/manage/services/storage/how-to-manage-a-storage-account/).\n\n> [AZURE.NOTE] Application logging to table or blob storage is only supported for .NET applications.\n\nSince application logging to storage requires using a storage client to view the log data, it is most useful when you plan on using a service or application that understands how to read and process the data directly from Azure Table or Blob Storage. Logging to the file system produces files that can be downloaded to your local computer using FTP or other utilities as described later in this section.\n\n**Application diagnostics (file system)**, **Application diagnostics (table storage)**, and **Application diagnostics (blob storage)** can be enabled at the same time, and have individual log level configurations. For example, you may wish to log errors and warnings to storage as a long-term logging solution, while enabling file system logging with a level of verbose after instrumenting the application code in order to troubleshoot a problem.\n\nDiagnostics can also be enabled from Azure PowerShell using the **Set-AzureWebsite** cmdlet. If you have not installed Azure PowerShell, or have not configured it to use your Azure Subscription, see [How to Use Azure PowerShell](/develop/nodejs/how-to-guides/powershell-cmdlets/).\n\n> [AZURE.NOTE] Application logging relies on log information generated by your application. The method used to generate log information, as well as the format of the information is specific to the language your application is written in. For language-specific information on using application logging, see the following articles:\n>\n> - **.NET** - [Troubleshoot a web app in Azure App Service using Visual Studio](web-sites-dotnet-troubleshoot-visual-studio.md)\n> - **Node.js** - [How to debug a Node.js application in Azure Websites](web-sites-nodejs-debug.md)\n>\n> Application logging to table or blob storage is only supported for .NET applications.\n\n#### Site Diagnostics ####\n\nThe **site diagnostics** section of the **Configure** management page controls the logging performed by the web server, such as the logging of web requests, failure to serve pages, or how long it took to serve a page. You can enable or disable the following options:\n\n- **Web Server Logging** - Turn on Web Server logging to save web app logs using the W3C extended log file format. Web server logging produces a record of all incoming requests to your web app, which contains information such as the client IP address, requested URI, HTTP status code of the response, and the user agent string of the client. You can save the logs to an Azure Storage Account or to the File System.\n\n To save web server logs to an Azure Storage Account, choose **Storage**, and then choose **manage storage** to specify a storage account and an Azure Blob Container where the logs will be kept. For more information about Azure Storage Accounts, see [How to Manage Storage Accounts](/manage/services/storage/how-to-manage-a-storage-account/).\n\n   To save web server logs to the file system, choose **File System**. This enables the **Quota** box where you can set the maximum amount of disk space for the log files. The minimum size is 25MB and the maximum is 100MB. The default size is 35MB.\n\n By default, web server logs are never deleted. To specify a period of time after which the logs will be automatically deleted, select **Set Retention** and enter the number of days to keep the logs in the **Retention Period** box. This setting is available for both the Azure Storage and File System options.\n\n- **Detailed Error Messages** - Turn on detailed error logging to log additional information about HTTP errors (status codes greater than 400).\n\n- **Failed Request Tracing** - Turn on failed request tracing to capture information for failed client requests, such as a 400 series HTTP status code.  Failed request tracing produces an XML document that contains a trace of which modules the request passed through in IIS, details returned by the module, and the time the module was invoked. This information can be used to isolate which component the failure occurred in.\n\n\nAfter enabling diagnostics for a web app, click the **Save** icon at the bottom of the **Configure** management page to apply the options that you have set.\n\n> [AZURE.IMPORTANT] Detailed Error Messages and Failed Request Tracing place significant demands on a web app. We recommend turning off these features once you have reproduced the problem(s) that you are troubleshooting.\n\n### Advanced configuration ###\n\nDiagnostics can be further modified by adding key/value pairs to the **app settings** section of the **Configure** management page. The following settings can be configured from **app settings**:\n\n**DIAGNOSTICS_TEXTTRACELOGDIRECTORY**\n\n- The location in which application logs will be saved, relative to the web root.\n\n- Default value: ..\\\\..\\\\LogFiles\\\\Application\n\n**DIAGNOSTICS_TEXTTRACEMAXBUFFERSIZEBYTES**\n\n- The maximum buffer size to use when capturing application logs. Information is initially written to the buffer before being flushed to file or storage. If new information is written to the buffer before it can be flushed, you may lose previously logged information. If your application produces large bursts of log information, consider increasing the size of the buffer.\n\n- Default value: 10MB\n\n**DIAGNOSTICS_TEXTTRACEMAXLOGFOLDERSIZEBYTES**\n\n- The maximum size of the **Application** folder in which application diagnostics written to file are stored.\n\n- Default value: 1MB\n\n###Downloading log files for a web app\n\nLog files can be downloaded using either FTP, Azure PowerShell, or the Azure CLI.\n\n**FTP**\n\n1. Open the web app's **Dashboard** management page in the [Azure portal](https://manage.windowsazure.com) and make note of the FTP site listed under **Diagnostics Logs** and the account listed under **Deployment User**. The FTP site is where the log files are located and the account listed under Deployment User is used to authenticate to the FTP site.\n2. If you have not yet created deployment credentials, the account listed under **Deployment User** is listed as **Not set**. In this case you must create deployment credentials as described in the Reset Deployment Credentials section of the Dashboard because these credentials must be used to authenticate to the FTP site where the log files are stored. Azure does not support authenticating to this FTP site using Live ID credentials.\n3. Consider using an FTP client such as [FileZilla][fzilla] to connect to the FTP site. An FTP client provides greater ease of use for specifying credentials and viewing folders on an FTP site than is typically possible with a browser.\n4. Copy the log files from the FTP site to your local computer.\n\n**Azure PowerShell**\n\n1. From the **Start Screen** or the **Start Menu**, search for **Azure PowerShell**. Right-click the **Azure PowerShell** entry and select **Run as Administrator**.\n\n    > [AZURE.NOTE] If **Azure PowerShell** is not installed, see [Getting Started with Azure PowerShell Cmdlets](http://msdn.microsoft.com/library/windowsazure/jj554332.aspx) for installation and configuration information.\n\n2. From the Azure PowerShell prompt, use the following command to download the log files:\n\n        Save-AzureWebSiteLog -Name webappname\n\n    This will download the log files for the web app specified by **webappname** and save them to a **log.zip** file in the current directory.\n\n    You may also view a live stream of log events by using the following command:\n\n        Get-AzureWebSiteLog -Name webappname -Tail\n\n    This will display log information to the Azure PowerShell prompt as they occur.\n\n**Azure CLI**\n\nOpen a new command prompt, PowerShell, bash, or terminal session, and use the following command to download the log files:\n\n    azure site log download webappname\n\nThis will download the log files for the web app specified by **webappname** and save them to a **log.zip** file in the current directory.\n\nYou may also view a lie stream of log events by using the following command:\n\n    azure site log tail webappname\n\nThis will display log information to the command prompt, PowerShell, bash or terminal session that the command is ran from.\n\n> [AZURE.NOTE] If the **azure** command is not installed, see [How to use the Azure CLI](../virtual-machines-command-line-tools.md) for installation and configuration information.\n\n### Reading log files ###\n\nThe log files that are generated after you have enabled logging and / or tracing for a web app vary depending on the level of logging / tracing that is set on the Configure management page for the web app. Following are the location of the log files and how the log files may be analyzed:\n\n**Log File Type: Application Logging**\n\n- Location /LogFiles/Application/. This folder contains one or more text files containing information produced by application logging. The information logged includes the date and time, the Process ID (PID) of the application, and the value produced by the application instrumentation.\n\n- Read Files with: A text editor or parser that understands the values produced by your application\n\n**Log File Type: Failed Request Tracing**\n\n- Location: /LogFiles/W3SVC#########/. This folder contains an XSL file and one or more XML files. Ensure that you download the XSL file into the same directory as the XML file(s) because the XSL file provides functionality for formatting and filtering the contents of the XML file(s) when viewed in Internet Explorer.\n\n- Read Files with: Internet Explorer\n\n**Log File Type: Detailed Error Logging**\n\n- Location: /LogFiles/DetailedErrors/. The /LogFiles/DetailedErrors/ folder contains one or more .htm files that provide extensive information for any HTTP errors that have occurred.\n\n- Read Files with: Web browser\n\nThe .htm files include the following sections:\n\n- **Detailed Error Information:** Includes information about the error such as <em>Module</em>, <em>Handler</em>, <em>Error Code</em>, and <em>Requested URL</em>.\n\n- **Most likely causes:** Lists several possible causes of the error.\n\n- **Things you can try:** Lists possible solutions for resolving the problem reported by the error.\n\n- **Links and More Information**: Provides additional summary information about the error and may also include links to other resources such as Microsoft Knowledge Base articles.\n\n**Log File Type: Web Server Logging**\n\n- Location: /LogFiles/http/RawLogs. The information stored in the files is formatted using the [W3C extended log format](http://go.microsoft.com/fwlink/?LinkID=90561). The s-computername, s-ip and cs-version fields are not used by Azure web apps.\n\n- Read Files with: Log Parser. Used to parse and query IIS log files. Log Parser 2.2 is available on the Microsoft Download Center at <a href=\"http://go.microsoft.com/fwlink/?LinkId=246619\">http://go.microsoft.com/fwlink/?LinkId=246619</a>.\n\n\n##<a name=\"webendpointstatus\"></a> How to: Monitor web endpoint status\n\nThis feature, available in **Standard** mode, lets you monitor up to 2 endpoints from up to 3 geographic locations.\n\nEndpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs. The test performs an HTTP get operation on the web URL to determine the response time and uptime from each location. Each configured location runs a test every five minutes.\n\nUptime is monitored using HTTP response codes, and response time is measured in milliseconds. Uptime is considered 100% when the response time is less than 30 seconds and the HTTP status code is lower than 400. Uptime is 0% when the response time is greater than 30 seconds or the HTTP status code is greater than 400.\n\nAfter you configure endpoint monitoring, you can drill down into the individual endpoints to view details response time and uptime status over the monitoring interval from each of the test locations. You can also set up an alert rule when the endpoint takes too long to respond, for example.\n\n**To configure endpoint monitoring:**\n\n1.  Open **Web Apps**. Click the name of the web app you want to configure.\n2.  Click the **Configure** tab.\n3.     Go to the **Monitoring** section to enter your endpoint settings.\n4.  Enter a name for the endpoint.\n5.  Enter the URL for a part of your web app that you want to monitor. For example, [http://contoso.azurewebsites.net/archive](http://contoso.azurewebsites.net/archive).\n6.  Select one or more geographic locations from the list.\n7.  Optionally, repeat the previous steps to create a second endpoint.\n8.  Click **Save**. It may take some time for the web endpoint monitoring data to be available on the **Dashboard** and **Monitor** tabs.\n\n    To create an email rule, do the following:\n\n9.  In the service bar at the far left, click **Management Services**.\n10. Click **Add Rule** at the bottom.\n11. In **Service Type**, select **Web App**, then select the web app for which you configured endpoint monitoring earlier. Click **Next**.\n12. In **Metric**, you can now select additional metrics for the endpoint you configured. For example: **Response Time (homepage/US: IL-Chicago)**. Select the Response Time metric and type 3 in **Threshold Value** to specify a 3-second threshold.\n13. Select **Send an email to the service administrator and co-administrators**. Click **Complete**.\n\n    Azure will now actively monitor the endpoint and send an email alert when it takes more than 3 seconds to reply.\n\nFor more on web app endpoint monitoring, see the following videos:\n\n- [Scott Guthrie introduces Azure Web Sites and sets up Endpoint Monitoring](/documentation/videos/websites-and-endpoint-monitoring-scottgu/)\n\n- [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](/documentation/videos/azure-web-sites-endpoint-monitoring-and-staying-up/)\n\n>[AZURE.NOTE] If you want to get started with Azure App Service before signing up for an Azure account, go to [Try App Service](http://go.microsoft.com/fwlink/?LinkId=523751), where you can immediately create a short-lived starter web app in App Service. No credit cards required; no commitments.\n\n## What's changed\n* For a guide to the change from Websites to App Service see: [Azure App Service and Its Impact on Existing Azure Services](http://go.microsoft.com/fwlink/?LinkId=529714)\n* For a guide to the change of the Azure portal to the Azure preview portal see: [Reference for navigating the preview portal](http://go.microsoft.com/fwlink/?LinkId=529715)\n\n[fzilla]:http://go.microsoft.com/fwlink/?LinkId=247914\n[vmsizes]:http://go.microsoft.com/fwlink/?LinkID=309169\n \n\ntest\n"
}