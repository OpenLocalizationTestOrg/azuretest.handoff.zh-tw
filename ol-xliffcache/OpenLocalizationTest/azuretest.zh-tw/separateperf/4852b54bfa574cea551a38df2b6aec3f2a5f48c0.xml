{
  "nodes": [
    {
      "pos": [
        1,
        123
      ],
      "content": "For more details about disks, see <bpt id=\"p1\">[</bpt>About Disks and VHDs for Virtual Machines<ept id=\"p1\">](../articles/virtual-machines-disks-vhds.md)</ept>."
    },
    {
      "content": "How to: Attach an empty disk",
      "pos": [
        153,
        181
      ]
    },
    {
      "content": "Attaching an empty disk is the simpler way to add a data disk, because Azure creates the .vhd file for you and stores it in the storage account.",
      "pos": [
        182,
        326
      ]
    },
    {
      "pos": [
        332,
        508
      ],
      "content": "Open Azure CLI for Mac, Linux, and Windows and connect to your Azure subscription. See [Connect\nto Azure from Azure CLI](../articles/xplat-cli-connect.md) for more details.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Open Azure CLI for Mac, Linux, and Windows and connect to your Azure subscription.",
          "pos": [
            0,
            82
          ]
        },
        {
          "content": "See <bpt id=\"p1\">[</bpt>Connect\nto Azure from Azure CLI<ept id=\"p1\">](../articles/xplat-cli-connect.md)</ept> for more details.",
          "pos": [
            83,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        514,
        625
      ],
      "content": "Make sure you are in Azure Service Management mode, which is the default by typing <ph id=\"ph1\">`azure config\nmode asm`</ph>.",
      "leadings": [
        "",
        "    "
      ]
    },
    {
      "pos": [
        631,
        916
      ],
      "content": "Use the command `azure vm disk attach-new` to create and attach a new disk as shown below. Note that the\n_ubuntuVMasm_ will be replaced by the name of the Linux Virtual Machine that you have created in your subscription. The number 30 is the size of the disk in GB in this example.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the command `azure vm disk attach-new` to create and attach a new disk as shown below. Note that the",
          "pos": [
            0,
            104
          ],
          "nodes": [
            {
              "content": "Use the command <ph id=\"ph1\">`azure vm disk attach-new`</ph> to create and attach a new disk as shown below.",
              "pos": [
                0,
                90
              ]
            },
            {
              "content": "Note that the",
              "pos": [
                91,
                104
              ]
            }
          ]
        },
        {
          "content": "_ubuntuVMasm_ will be replaced by the name of the Linux Virtual Machine that you have created in your subscription. The number 30 is the size of the disk in GB in this example.",
          "pos": [
            105,
            281
          ],
          "nodes": [
            {
              "content": "<bpt id=\"p1\">_</bpt>ubuntuVMasm<ept id=\"p1\">_</ept> will be replaced by the name of the Linux Virtual Machine that you have created in your subscription.",
              "pos": [
                0,
                115
              ]
            },
            {
              "content": "The number 30 is the size of the disk in GB in this example.",
              "pos": [
                116,
                176
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        971,
        1103
      ],
      "content": "After the data disk is created and attached, it's listed in the output of <ph id=\"ph1\">`azure vm disk list\n&lt;virtual-machine-name&gt;`</ph> like this:",
      "leadings": [
        "",
        "    "
      ]
    },
    {
      "content": "How to: Attach an existing disk",
      "pos": [
        1638,
        1669
      ]
    },
    {
      "content": "Attaching an existing disk requires that you have a .vhd available in a storage account.",
      "pos": [
        1671,
        1759
      ]
    },
    {
      "pos": [
        1765,
        1941
      ],
      "content": "Open Azure CLI for Mac, Linux, and Windows and connect to your Azure subscription. See [Connect\nto Azure from Azure CLI](../articles/xplat-cli-connect.md) for more details.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Open Azure CLI for Mac, Linux, and Windows and connect to your Azure subscription.",
          "pos": [
            0,
            82
          ]
        },
        {
          "content": "See <bpt id=\"p1\">[</bpt>Connect\nto Azure from Azure CLI<ept id=\"p1\">](../articles/xplat-cli-connect.md)</ept> for more details.",
          "pos": [
            83,
            172
          ]
        }
      ]
    },
    {
      "pos": [
        1947,
        2122
      ],
      "content": "Make sure you are in Azure Service Management mode, which is the default. If you have changed\nmode to Resource Management, simply revert by typing `azure config mode asm`.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Make sure you are in Azure Service Management mode, which is the default. If you have changed",
          "pos": [
            0,
            93
          ],
          "nodes": [
            {
              "content": "Make sure you are in Azure Service Management mode, which is the default.",
              "pos": [
                0,
                73
              ]
            },
            {
              "content": "If you have changed",
              "pos": [
                74,
                93
              ]
            }
          ]
        },
        {
          "content": "mode to Resource Management, simply revert by typing <ph id=\"ph1\">`azure config mode asm`</ph>.",
          "pos": [
            94,
            171
          ]
        }
      ]
    },
    {
      "content": "Find out if the VHD you want to attach is already uploaded to your Azure subscription by using:",
      "pos": [
        2128,
        2223
      ]
    },
    {
      "pos": [
        2713,
        2898
      ],
      "content": "If you don't find the disk that you want to use, you may upload a local VHD to your subscription by using\n`azure vm disk create` or `azure vm disk upload`. An example would be this:",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "If you don't find the disk that you want to use, you may upload a local VHD to your subscription by using",
          "pos": [
            0,
            105
          ]
        },
        {
          "content": "`azure vm disk create` or `azure vm disk upload`. An example would be this:",
          "pos": [
            106,
            181
          ],
          "nodes": [
            {
              "content": "<ph id=\"ph1\">`azure vm disk create`</ph> or <ph id=\"ph2\">`azure vm disk upload`</ph>.",
              "pos": [
                0,
                49
              ]
            },
            {
              "content": "An example would be this:",
              "pos": [
                50,
                75
              ]
            }
          ]
        }
      ]
    },
    {
      "content": "You may also use the <ph id=\"ph1\">`azure vm disk upload`</ph> command to upload a VHD to a specific storage account.",
      "pos": [
        3463,
        3561
      ]
    },
    {
      "content": "Read more about the commands to manage your Azure virtual machine data disks <bpt id=\"p1\">[</bpt>over here<ept id=\"p1\">](../virtual-machines-command-line-tools.md#commands-to-manage-your-azure-virtual-machine-data-disks)</ept>.",
      "pos": [
        3562,
        3751
      ]
    },
    {
      "content": "Type the following command to attach the desired uploaded VHD to your virtual machine:",
      "pos": [
        3757,
        3843
      ]
    },
    {
      "pos": [
        4057,
        4169
      ],
      "content": "Make sure to replace <bpt id=\"p1\">_</bpt>ubuntuVMasm<ept id=\"p1\">_</ept> with the name of your virtual machine, and <bpt id=\"p2\">_</bpt>myTestVhd<ept id=\"p2\">_</ept> with your desired VHD."
    },
    {
      "pos": [
        4175,
        4305
      ],
      "content": "You can verify if the disk is attached to the virtual machine with the command <ph id=\"ph1\">`azure vm disk list\n&lt;virtual-machine-name&gt;`</ph> as:",
      "leadings": [
        "",
        "    "
      ]
    },
    {
      "pos": [
        4852,
        5015
      ],
      "content": "[AZURE.NOTE]\nAfter you add a data disk, you'll need to log on to the virtual machine and initialize the disk so the virtual machine can use the disk for storage.",
      "leadings": [
        "",
        "> "
      ],
      "nodes": [
        {
          "content": "After you add a data disk, you'll need to log on to the virtual machine and initialize the disk so the virtual machine can use the disk for storage.",
          "pos": [
            13,
            161
          ]
        }
      ]
    }
  ],
  "content": "\nFor more details about disks, see [About Disks and VHDs for Virtual Machines](../articles/virtual-machines-disks-vhds.md).\n\n<a id=\"attachempty\"></a>\n## How to: Attach an empty disk\nAttaching an empty disk is the simpler way to add a data disk, because Azure creates the .vhd file for you and stores it in the storage account.\n\n1.  Open Azure CLI for Mac, Linux, and Windows and connect to your Azure subscription. See [Connect\n    to Azure from Azure CLI](../articles/xplat-cli-connect.md) for more details.\n\n2.  Make sure you are in Azure Service Management mode, which is the default by typing `azure config\n    mode asm`.\n\n3.  Use the command `azure vm disk attach-new` to create and attach a new disk as shown below. Note that the\n    _ubuntuVMasm_ will be replaced by the name of the Linux Virtual Machine that you have created in your subscription. The number 30 is the size of the disk in GB in this example.\n\n        azure vm disk attach-new ubuntuVMasm 30\n\n4.  After the data disk is created and attached, it's listed in the output of `azure vm disk list\n    <virtual-machine-name>` like this:\n\n        $ azure vm disk list ubuntuVMasm\n        info:    Executing command vm disk list\n        + Fetching disk images\n        + Getting virtual machines\n        + Getting VM disks\n        data:    Lun  Size(GB)  Blob-Name                         OS\n        data:    ---  --------  --------------------------------  -----\n        data:         30        ubuntuVMasm-2645b8030676c8f8.vhd  Linux\n        data:    0    30        ubuntuVMasm-76f7ee1ef0f6dddc.vhd\n        info:    vm disk list command OK\n\n<a id=\"attachexisting\"></a>\n## How to: Attach an existing disk\n\nAttaching an existing disk requires that you have a .vhd available in a storage account.\n\n1.  Open Azure CLI for Mac, Linux, and Windows and connect to your Azure subscription. See [Connect\n    to Azure from Azure CLI](../articles/xplat-cli-connect.md) for more details.\n\n2.  Make sure you are in Azure Service Management mode, which is the default. If you have changed\n    mode to Resource Management, simply revert by typing `azure config mode asm`.\n\n3.  Find out if the VHD you want to attach is already uploaded to your Azure subscription by using:\n\n        $azure vm disk list\n        info:    Executing command vm disk list\n        + Fetching disk images\n        data:    Name                                          OS\n        data:    --------------------------------------------  -----\n        data:    myTestVhd                                     Linux\n        data:    ubuntuVMasm-ubuntuVMasm-0-201508060029150744  Linux\n        data:    ubuntuVMasm-ubuntuVMasm-0-201508060040530369\n        info:    vm disk list command OK\n\n4.  If you don't find the disk that you want to use, you may upload a local VHD to your subscription by using\n    `azure vm disk create` or `azure vm disk upload`. An example would be this:\n\n        $azure vm disk create myTestVhd2 .\\TempDisk\\test.VHD -l \"East US\" -o Linux\n        info:    Executing command vm disk create\n        + Retrieving storage accounts\n        info:    VHD size : 10 GB\n        info:    Uploading 10485760.5 KB\n        Requested:100.0% Completed:100.0% Running:   0 Time:   25s Speed:    82 KB/s\n        info:    Finishing computing MD5 hash, 16% is complete.\n        info:    https://portalvhdsq1s6mc7mqf4gn.blob.core.windows.net/disks/test.VHD was\n        uploaded successfully\n        info:    vm disk create command OK\n\n    You may also use the `azure vm disk upload` command to upload a VHD to a specific storage account. Read more about the commands to manage your Azure virtual machine data disks [over here](../virtual-machines-command-line-tools.md#commands-to-manage-your-azure-virtual-machine-data-disks).\n\n5.  Type the following command to attach the desired uploaded VHD to your virtual machine:\n\n        $azure vm disk attach ubuntuVMasm myTestVhd\n        info:    Executing command vm disk attach\n        + Getting virtual machines\n        + Adding Data-Disk\n        info:    vm disk attach command OK\n\n    Make sure to replace _ubuntuVMasm_ with the name of your virtual machine, and _myTestVhd_ with your desired VHD.\n\n6.  You can verify if the disk is attached to the virtual machine with the command `azure vm disk list\n    <virtual-machine-name>` as:\n\n        $azure vm disk list ubuntuVMasm\n        info:    Executing command vm disk list\n        + Fetching disk images\n        + Getting virtual machines\n        + Getting VM disks\n        data:    Lun  Size(GB)  Blob-Name                         OS\n        data:    ---  --------  --------------------------------  -----\n        data:         30        ubuntuVMasm-2645b8030676c8f8.vhd  Linux\n        data:    1    10        test.VHD\n        data:    0    30        ubuntuVMasm-76f7ee1ef0f6dddc.vhd\n        info:    vm disk list command OK\n\n\n> [AZURE.NOTE]\n> After you add a data disk, you'll need to log on to the virtual machine and initialize the disk so the virtual machine can use the disk for storage.\n"
}