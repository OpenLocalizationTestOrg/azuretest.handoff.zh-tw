{
  "nodes": [
    {
      "content": "Create and deploy a secure ASP.NET Web Forms app with Membership, OAuth, and SQL Database to Azure App Service",
      "pos": [
        28,
        138
      ]
    },
    {
      "content": "This tutorial shows you how to build a secure ASP.NET 4.5 Web Forms web app that incorporates a SQL Database and deploy the application to Azure.",
      "pos": [
        158,
        303
      ]
    },
    {
      "content": "Create and deploy a secure ASP.NET Web Forms app with Membership, OAuth, and SQL Database to Azure App Service",
      "pos": [
        630,
        740
      ]
    },
    {
      "content": "Overview",
      "pos": [
        744,
        752
      ]
    },
    {
      "content": "This tutorial shows you how to build a secure ASP.NET 4.5 Web Forms web app that incorporates a SQL Database and deploy the application to Azure.",
      "pos": [
        753,
        898
      ]
    },
    {
      "content": "For an MVC version of this tutorial, see <bpt id=\"p1\">[</bpt>Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service<ept id=\"p1\">](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md)</ept>.",
      "pos": [
        916,
        1111
      ]
    },
    {
      "content": "You can open an Azure account for free, and if you don't already have Visual Studio 2013, the SDK automatically installs Visual Studio 2013 for Web Express.",
      "pos": [
        1113,
        1269
      ]
    },
    {
      "content": "You can start developing for Azure for free.",
      "pos": [
        1270,
        1314
      ]
    },
    {
      "content": "This tutorial assumes that you have no prior experience using Microsoft Azure.",
      "pos": [
        1316,
        1394
      ]
    },
    {
      "content": "Once completing this tutorial, you'll have a web application up and running in the cloud that uses a cloud database.",
      "pos": [
        1395,
        1511
      ]
    },
    {
      "content": "You'll learn:",
      "pos": [
        1513,
        1526
      ]
    },
    {
      "content": "How to create an ASP.NET 4.5 Web Forms project and publish it to Azure App Service.",
      "pos": [
        1530,
        1613
      ]
    },
    {
      "content": "How to use OAuth and the ASP.NET membership to secure your application.",
      "pos": [
        1616,
        1687
      ]
    },
    {
      "content": "How to use a single database for both membership and application data.",
      "pos": [
        1690,
        1760
      ]
    },
    {
      "content": "How to use Web Forms Scaffolding to create web pages that allow you to modify data.",
      "pos": [
        1763,
        1846
      ]
    },
    {
      "content": "How to use the new membership API to add users and roles.",
      "pos": [
        1849,
        1906
      ]
    },
    {
      "content": "How to use a SQL database to store data in Azure.",
      "pos": [
        1909,
        1958
      ]
    },
    {
      "content": "You'll build a simple contact list web application that is built on ASP.NET 4.5 Web Forms and uses the Entity Framework for database access.",
      "pos": [
        1960,
        2100
      ]
    },
    {
      "content": "The following image shows the Web Forms page that allows read and write access to the database:",
      "pos": [
        2101,
        2196
      ]
    },
    {
      "content": "Contacts - Edit Page",
      "pos": [
        2200,
        2220
      ]
    },
    {
      "content": "To complete this tutorial, you need an Azure account.",
      "pos": [
        2342,
        2395
      ]
    },
    {
      "content": "If you don't have an account, you can <ph id=\"ph1\">&lt;a href=\"/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F\" target=\"_blank\"&gt;</ph>activate your MSDN subscriber benefits<ph id=\"ph2\">&lt;/a&gt;</ph> or <ph id=\"ph3\">&lt;a href=\"/pricing/free-trial/?WT.mc_id=A261C142F\" target=\"_blank\"&gt;</ph>sign up for a free trial<ph id=\"ph4\">&lt;/a&gt;</ph>.",
      "pos": [
        2396,
        2666
      ]
    },
    {
      "content": "If you want to get started with Azure before signing up for an account, go to <bpt id=\"p1\">[</bpt>Try App Service<ept id=\"p1\">](https://tryappservice.azure.com/)</ept>, where you can immediately create a short-lived ASP.NET starter site in Azure for free.",
      "pos": [
        2667,
        2884
      ]
    },
    {
      "content": "No credit card required, no commitments.",
      "pos": [
        2885,
        2925
      ]
    },
    {
      "content": "Set up the Development Environment",
      "pos": [
        2929,
        2963
      ]
    },
    {
      "content": "To start, set up your development environment by installing the Visual Studio 2013 and the Azure SDK for .NET.",
      "pos": [
        2965,
        3075
      ]
    },
    {
      "pos": [
        3080,
        3196
      ],
      "content": "Install <bpt id=\"p1\">[</bpt>Visual Studio 2013<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=306566)</ept>, if you don't already have it installed."
    },
    {
      "content": "Install <bpt id=\"p1\">[</bpt>Azure SDK for Visual Studio 2013<ept id=\"p1\">](http://go.microsoft.com/fwlink/?linkid=324322&amp;clcid=0x409)</ept>.",
      "pos": [
        3202,
        3304
      ]
    },
    {
      "content": "This tutorial requires Visual Studio 2013 before installing the Azure SDK for Visual Studio 2013.",
      "pos": [
        3305,
        3402
      ]
    },
    {
      "content": "Depending on how many of the SDK dependencies you already have on your machine, installing the SDK could take a long time, from several minutes to a half hour or more.",
      "pos": [
        3403,
        3570
      ]
    },
    {
      "pos": [
        3577,
        3655
      ],
      "content": "If you are prompted to run or save the installation executable, click <bpt id=\"p1\">**</bpt>Run<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        3659,
        3896
      ],
      "content": "In the **Web Platform Installer** window, click **Install** and proceed with the installation.  \n ![Web Platform Installer](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-01.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Web Platform Installer<ept id=\"p1\">**</ept> window, click <bpt id=\"p2\">**</bpt>Install<ept id=\"p2\">**</ept> and proceed with the installation.",
          "pos": [
            0,
            94
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Web Platform Installer<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-01.png)</ph>",
          "pos": [
            97,
            234
          ]
        }
      ]
    },
    {
      "content": "If you already have the SDK installed, there will be 0 items to be installed.",
      "pos": [
        3906,
        3983
      ]
    },
    {
      "content": "The number of items to install will be noted at the lower left of the <bpt id=\"p1\">**</bpt>Web Platform Installer<ept id=\"p1\">**</ept> window.",
      "pos": [
        3984,
        4088
      ]
    },
    {
      "pos": [
        4095,
        4271
      ],
      "content": "If you don't already have <bpt id=\"p1\">**</bpt>Visual Studio Update 2<ept id=\"p1\">**</ept>, download and install <bpt id=\"p2\">**</bpt><bpt id=\"p3\">[</bpt>Visual Studio 2013 Update 2<ept id=\"p3\">](http://www.microsoft.com/download/details.aspx?id=42666)</ept><ept id=\"p2\">**</ept> or higher."
    },
    {
      "content": "You must install Visual Studio 2013 Update 2 or higher to use Goggle OAuth 2.0 and to use SSL locally without warnings.",
      "pos": [
        4299,
        4418
      ]
    },
    {
      "content": "Also, you need Update 2 to use Web Forms Scaffolding.",
      "pos": [
        4419,
        4472
      ]
    },
    {
      "content": "When the installation is complete, you have everything necessary to start developing.",
      "pos": [
        4476,
        4561
      ]
    },
    {
      "content": "Set up the Azure Environment",
      "pos": [
        4565,
        4593
      ]
    },
    {
      "content": "In this section you'll set up the Azure environment by creating an Azure and a SQL database in Azure.",
      "pos": [
        4594,
        4695
      ]
    },
    {
      "content": "Create a Web App and a SQL Database in Azure",
      "pos": [
        4700,
        4744
      ]
    },
    {
      "content": "In this tutorial your web app will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other web apps in Azure App Service.",
      "pos": [
        4746,
        4921
      ]
    },
    {
      "content": "A shared hosting environment is a low-cost way to get started in the cloud.",
      "pos": [
        4922,
        4997
      ]
    },
    {
      "content": "Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.",
      "pos": [
        4998,
        5107
      ]
    },
    {
      "content": "If you need a more complex architecture, you can migrate to an Azure Cloud Service.",
      "pos": [
        5108,
        5191
      ]
    },
    {
      "content": "Cloud services run on dedicated VMs that you can configure according to your needs.",
      "pos": [
        5192,
        5275
      ]
    },
    {
      "content": "Azure SQL Database is a cloud-based relational database service that is built on SQL Server technologies.",
      "pos": [
        5278,
        5383
      ]
    },
    {
      "content": "The tools and applications that work with SQL Server also work with SQL Database.",
      "pos": [
        5384,
        5465
      ]
    },
    {
      "pos": [
        5470,
        5740
      ],
      "content": "In the [Azure Management Portal](https://manage.windowsazure.com/), click **Web Apps** in the left tab, and then click **New**.  \n ![Web Platform Installer](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-02.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">[</bpt>Azure Management Portal<ept id=\"p1\">](https://manage.windowsazure.com/)</ept>, click <bpt id=\"p2\">**</bpt>Web Apps<ept id=\"p2\">**</ept> in the left tab, and then click <bpt id=\"p3\">**</bpt>New<ept id=\"p3\">**</ept>.",
          "pos": [
            0,
            127
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Web Platform Installer<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-02.png)</ph>",
          "pos": [
            130,
            267
          ]
        }
      ]
    },
    {
      "pos": [
        5744,
        5986
      ],
      "content": "Click **Web App**, and then click **Custom Create**.  \n ![Custom Create](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-03.png)  \n The **New Web App - Custom Create** wizard opens.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Click <bpt id=\"p1\">**</bpt>Web App<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Custom Create<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            52
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Custom Create<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-03.png)</ph>",
          "pos": [
            55,
            183
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>New Web App - Custom Create<ept id=\"p1\">**</ept> wizard opens.",
          "pos": [
            187,
            236
          ]
        }
      ]
    },
    {
      "pos": [
        5993,
        6466
      ],
      "content": "In the **Create Web App** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application. The complete URL will consist of what you enter here plus the suffix that you see next to the text box. The illustration shows a URL that is probably taken so **you must choose a different URL**.  \n ![Contacts - Create New Web Site](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-04.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the **Create Web App** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application. The complete URL will consist of what you enter here plus the suffix that you see next to the text box. The illustration shows a URL that is probably taken so **you must choose a different URL**.",
          "pos": [
            0,
            322
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>Create Web App<ept id=\"p1\">**</ept> step of the wizard, enter a string in the <bpt id=\"p2\">**</bpt>URL<ept id=\"p2\">**</ept> box to use as the unique URL for your application.",
              "pos": [
                0,
                126
              ]
            },
            {
              "content": "The complete URL will consist of what you enter here plus the suffix that you see next to the text box.",
              "pos": [
                127,
                230
              ]
            },
            {
              "content": "The illustration shows a URL that is probably taken so <bpt id=\"p1\">**</bpt>you must choose a different URL<ept id=\"p1\">**</ept>.",
              "pos": [
                231,
                322
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Contacts - Create New Web Site<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-04.png)</ph>",
          "pos": [
            325,
            470
          ]
        }
      ]
    },
    {
      "content": "In the Web Hosting Plan drop-down list, choose a region that is closest to your location.",
      "pos": [
        6472,
        6561
      ]
    },
    {
      "content": "This setting specifies which data center where your VM will run.",
      "pos": [
        6562,
        6626
      ]
    },
    {
      "pos": [
        6630,
        6710
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Database<ept id=\"p1\">**</ept> drop-down list, choose <bpt id=\"p2\">**</bpt>Create a free 20 MB SQL database<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        6714,
        6803
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>DB Connection String Name<ept id=\"p1\">**</ept> box, leave the default value of <bpt id=\"p2\">*</bpt>DefaultConnection<ept id=\"p2\">*</ept>."
    },
    {
      "content": "Click the arrow at the bottom of the box.",
      "pos": [
        6807,
        6848
      ]
    },
    {
      "content": "The wizard advances to the <bpt id=\"p1\">**</bpt>Specify database settings<ept id=\"p1\">**</ept> step.",
      "pos": [
        6850,
        6912
      ]
    },
    {
      "pos": [
        6916,
        7095
      ],
      "content": "In the **Name** box, enter *`ContactDB`*.  \n ![Database Settings](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-05.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> box, enter <bpt id=\"p2\">*</bpt><ph id=\"ph1\">`ContactDB`</ph><ept id=\"p2\">*</ept>.",
          "pos": [
            0,
            41
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Database Settings<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-05.png)</ph>",
          "pos": [
            44,
            176
          ]
        }
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Server<ept id=\"p1\">**</ept> box, select <bpt id=\"p2\">**</bpt>New SQL Database<ept id=\"p2\">**</ept> server.",
      "pos": [
        7101,
        7159
      ]
    },
    {
      "content": "Alternatively, if you previously created a SQL Server database, you can select that SQL Server from the dropdown control.",
      "pos": [
        7160,
        7281
      ]
    },
    {
      "pos": [
        7286,
        7346
      ],
      "content": "Set the <bpt id=\"p1\">**</bpt>Region<ept id=\"p1\">**</ept> to the same area you created the web app."
    },
    {
      "content": "Enter an administrator <bpt id=\"p1\">**</bpt>Login Name<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Password<ept id=\"p2\">**</ept>.",
      "pos": [
        7351,
        7406
      ]
    },
    {
      "content": "If you selected <bpt id=\"p1\">**</bpt>New SQL Database server<ept id=\"p1\">**</ept> you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database.",
      "pos": [
        7408,
        7615
      ]
    },
    {
      "content": "If you selected a SQL Server you've created previously, you'll be prompted for the password to the previous SQL Server account name you created.",
      "pos": [
        7616,
        7760
      ]
    },
    {
      "content": "For this tutorial, you won't check the <bpt id=\"p1\">**</bpt>Advanced<ept id=\"p1\">**</ept> box.",
      "pos": [
        7761,
        7817
      ]
    },
    {
      "content": "Click the check mark at the bottom right of the box to indicate you're finished.",
      "pos": [
        7822,
        7902
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Azure Management Portal<ept id=\"p1\">**</ept> returns to the <bpt id=\"p2\">**</bpt>Web Apps<ept id=\"p2\">**</ept> page, and the <bpt id=\"p3\">**</bpt>Status<ept id=\"p3\">**</ept> column shows that the site is being created.",
      "pos": [
        7904,
        8033
      ]
    },
    {
      "content": "Shortly after (typically less than a minute), the <bpt id=\"p1\">**</bpt>Status<ept id=\"p1\">**</ept> column shows that the site was successfully created.",
      "pos": [
        8034,
        8147
      ]
    },
    {
      "content": "In the navigation bar at the left, the number of sites you have in your account appears next to the <bpt id=\"p1\">**</bpt>Web App<ept id=\"p1\">**</ept> icon, and the number of databases appears next to the <bpt id=\"p2\">**</bpt>SQL Databases<ept id=\"p2\">**</ept> icon.",
      "pos": [
        8148,
        8337
      ]
    },
    {
      "content": "Create an ASP.NET Web Forms Application",
      "pos": [
        8340,
        8379
      ]
    },
    {
      "content": "You have created a web app, but there is no content in it yet.",
      "pos": [
        8381,
        8443
      ]
    },
    {
      "content": "Your next step is to create the Visual Studio web app that you'll publish to Azure.",
      "pos": [
        8444,
        8527
      ]
    },
    {
      "content": "Create the Project",
      "pos": [
        8531,
        8549
      ]
    },
    {
      "pos": [
        8554,
        8754
      ],
      "content": "Select **New Project** from the **File** menu in Visual Studio.  \n ![File Menu - New Project](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms01.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Select <bpt id=\"p1\">**</bpt>New Project<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>File<ept id=\"p2\">**</ept> menu in Visual Studio.",
          "pos": [
            0,
            63
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>File Menu - New Project<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms01.png)</ph>",
          "pos": [
            66,
            197
          ]
        }
      ]
    },
    {
      "pos": [
        8760,
        8841
      ],
      "content": "Select the <bpt id=\"p1\">**</bpt>Templates<ept id=\"p1\">**</ept> -&gt; <bpt id=\"p2\">**</bpt>Visual C#<ept id=\"p2\">**</ept> -&gt; <bpt id=\"p3\">**</bpt>Web<ept id=\"p3\">**</ept> templates group on the left."
    },
    {
      "pos": [
        8846,
        8915
      ],
      "content": "Choose the <bpt id=\"p1\">**</bpt>ASP.NET Web Application<ept id=\"p1\">**</ept> template in the center column."
    },
    {
      "pos": [
        8919,
        9103
      ],
      "content": "Name your project *ContactManager* and click **OK**.  \n ![New Project Dialog](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms02.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Name your project <bpt id=\"p1\">*</bpt>ContactManager<ept id=\"p1\">*</ept> and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            52
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>New Project Dialog<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms02.png)</ph>",
          "pos": [
            55,
            181
          ]
        }
      ]
    },
    {
      "content": "The name of the project in this tutorial series is <bpt id=\"p1\">**</bpt>ContactManager<ept id=\"p1\">**</ept>.",
      "pos": [
        9113,
        9183
      ]
    },
    {
      "content": "It is recommended that you use this exact project name so that the code provided throughout the tutorial series functions as expected.",
      "pos": [
        9184,
        9318
      ]
    },
    {
      "pos": [
        9325,
        9675
      ],
      "content": "In the **New ASP.NET Project** dialog box, select the **Web Forms** template. Uncheck the **Host in the cloud** check box if it is selected and click **OK**.  \n ![New ASP.NET Project dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms03.png)  \n The Web Forms application will be created.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "In the **New ASP.NET Project** dialog box, select the **Web Forms** template. Uncheck the **Host in the cloud** check box if it is selected and click **OK**.",
          "pos": [
            0,
            157
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>New ASP.NET Project<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Web Forms<ept id=\"p2\">**</ept> template.",
              "pos": [
                0,
                77
              ]
            },
            {
              "content": "Uncheck the <bpt id=\"p1\">**</bpt>Host in the cloud<ept id=\"p1\">**</ept> check box if it is selected and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.",
              "pos": [
                78,
                157
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>New ASP.NET Project dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms03.png)</ph>",
          "pos": [
            160,
            298
          ]
        },
        {
          "content": "The Web Forms application will be created.",
          "pos": [
            302,
            344
          ]
        }
      ]
    },
    {
      "content": "Update the Master Page",
      "pos": [
        9680,
        9702
      ]
    },
    {
      "content": "In ASP.NET Web Forms, master pages allow you to create a consistent layout for the pages in your application.",
      "pos": [
        9703,
        9812
      ]
    },
    {
      "content": "A single master page defines the look and feel and standard behavior that you want for all of the pages (or a group of pages) in your application.",
      "pos": [
        9813,
        9959
      ]
    },
    {
      "content": "You can then create individual content pages that contain the content you want to display.",
      "pos": [
        9960,
        10050
      ]
    },
    {
      "content": "When users request the content pages, ASP.NET merges them with the master page to produce output that combines the layout of the master page with the content from the content page.",
      "pos": [
        10051,
        10231
      ]
    },
    {
      "content": "The new site needs the application name and a link updated.",
      "pos": [
        10232,
        10291
      ]
    },
    {
      "content": "The link will point to a page that will display contact details.",
      "pos": [
        10292,
        10356
      ]
    },
    {
      "content": "To make these changes you will modify the HTML on the master page.",
      "pos": [
        10357,
        10423
      ]
    },
    {
      "pos": [
        10429,
        10492
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, find and open the <bpt id=\"p2\">*</bpt>Site.Master<ept id=\"p2\">*</ept> page."
    },
    {
      "pos": [
        10497,
        10558
      ],
      "content": "If the page is in <bpt id=\"p1\">**</bpt>Design<ept id=\"p1\">**</ept> view, switch to <bpt id=\"p2\">**</bpt>Source<ept id=\"p2\">**</ept> view."
    },
    {
      "content": "Update the master page by modifying or adding markup so that the markup for the page appears as follows:",
      "pos": [
        10562,
        10666
      ]
    },
    {
      "content": "Later in this tutorial you will add Web Forms scaffolding.",
      "pos": [
        16028,
        16086
      ]
    },
    {
      "content": "Scaffolding will create the page that the above “Contact Demo” link references.",
      "pos": [
        16087,
        16166
      ]
    },
    {
      "content": "Run the Application Locally",
      "pos": [
        16172,
        16199
      ]
    },
    {
      "pos": [
        16206,
        16301
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the <bpt id=\"p2\">*</bpt>Default.aspx<ept id=\"p2\">*</ept> page and select <bpt id=\"p3\">**</bpt>Set As Start Page<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        16306,
        16569
      ],
      "content": "Next, press **CTRL+F5** to run the application.  \n The application default page appears in the default browser window.\n ![Contacts - Create New Web Site](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms04.png)",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Next, press <bpt id=\"p1\">**</bpt>CTRL+F5<ept id=\"p1\">**</ept> to run the application.",
          "pos": [
            0,
            47
          ]
        },
        {
          "content": "The application default page appears in the default browser window.",
          "pos": [
            51,
            118
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Contacts - Create New Web Site<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms04.png)</ph>",
          "pos": [
            119,
            257
          ]
        }
      ]
    },
    {
      "content": "This is all you need to do for now to create the application that you'll deploy to Azure.",
      "pos": [
        16573,
        16662
      ]
    },
    {
      "content": "Later, you'll add database functionality, as well as the necessary pages to display and edit contact data.",
      "pos": [
        16663,
        16769
      ]
    },
    {
      "content": "Deploy the Application to Azure",
      "pos": [
        16773,
        16804
      ]
    },
    {
      "content": "Now that you have created and ran your application locally, it is time to deploy the application to Azure.",
      "pos": [
        16805,
        16911
      ]
    },
    {
      "pos": [
        16916,
        17207
      ],
      "content": "In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.  \n ![Select Publish](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms05.png)  \n The **Publish Web** dialog box is displayed.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "In Visual Studio, right-click the project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Publish<ept id=\"p2\">**</ept> from the context menu.",
          "pos": [
            0,
            112
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Select Publish<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms05.png)</ph>",
          "pos": [
            115,
            237
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Publish Web<ept id=\"p1\">**</ept> dialog box is displayed.",
          "pos": [
            241,
            285
          ]
        }
      ]
    },
    {
      "pos": [
        17214,
        17296
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Profile<ept id=\"p1\">**</ept> tab of the <bpt id=\"p2\">**</bpt>Publish Web<ept id=\"p2\">**</ept> dialog box, click <bpt id=\"p3\">**</bpt>Azure Web App<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        17309,
        17749
      ],
      "content": "If you are not already signed in, click the **Sign In** button in the **Select Existing Web App** dialog box. Once you've finished signing in, select the web app you created in the first part of this tutorial. Click **OK** to continue.  \n ![Select Existing Web Site dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms07.png)  \nVisual Studio will download your publishing settings.",
      "leadings": [
        "",
        "   ",
        ""
      ],
      "nodes": [
        {
          "content": "If you are not already signed in, click the **Sign In** button in the **Select Existing Web App** dialog box. Once you've finished signing in, select the web app you created in the first part of this tutorial. Click **OK** to continue.",
          "pos": [
            0,
            235
          ],
          "nodes": [
            {
              "content": "If you are not already signed in, click the <bpt id=\"p1\">**</bpt>Sign In<ept id=\"p1\">**</ept> button in the <bpt id=\"p2\">**</bpt>Select Existing Web App<ept id=\"p2\">**</ept> dialog box.",
              "pos": [
                0,
                109
              ]
            },
            {
              "content": "Once you've finished signing in, select the web app you created in the first part of this tutorial.",
              "pos": [
                110,
                209
              ]
            },
            {
              "content": "Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to continue.",
              "pos": [
                210,
                235
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Select Existing Web Site dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms07.png)</ph>",
          "pos": [
            238,
            381
          ]
        },
        {
          "content": "Visual Studio will download your publishing settings.",
          "pos": [
            384,
            437
          ]
        }
      ]
    },
    {
      "pos": [
        17753,
        18185
      ],
      "content": "In the **Publish Web** dialog box, click **Publish**.  \n ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms08.png)  \nYou will see the overall publishing status in the **Web Publish Activity** window within Visual Studio:  \n ![Web Publishing Activity](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms09.png)",
      "leadings": [
        "",
        "   ",
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Publish Web<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>Publish<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            53
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Publish Web dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms08.png)</ph>",
          "pos": [
            56,
            186
          ]
        },
        {
          "content": "You will see the overall publishing status in the <bpt id=\"p1\">**</bpt>Web Publish Activity<ept id=\"p1\">**</ept> window within Visual Studio:",
          "pos": [
            189,
            292
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Web Publishing Activity<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms09.png)</ph>",
          "pos": [
            295,
            426
          ]
        }
      ]
    },
    {
      "content": "The application you created is now running in the cloud.",
      "pos": [
        18189,
        18245
      ]
    },
    {
      "content": "The next time you deploy the application from Visual Studio, only the changed (or new) files will be deployed.",
      "pos": [
        18246,
        18356
      ]
    },
    {
      "content": "App in Browser",
      "pos": [
        18365,
        18379
      ]
    },
    {
      "content": "If you run into an error while publishing to an already established web app, you can clear the location before adding your new files.",
      "pos": [
        18503,
        18636
      ]
    },
    {
      "content": "Publish your application again, however in the <bpt id=\"p1\">**</bpt>Publish Web<ept id=\"p1\">**</ept> dialog box, select the <bpt id=\"p2\">**</bpt>Settings<ept id=\"p2\">**</ept> tab.",
      "pos": [
        18639,
        18742
      ]
    },
    {
      "content": "Then, set the configuration to <bpt id=\"p1\">**</bpt>Debug<ept id=\"p1\">**</ept> and select the option to <bpt id=\"p2\">**</bpt>Remove additional files at destination<ept id=\"p2\">**</ept>.",
      "pos": [
        18743,
        18852
      ]
    },
    {
      "content": "Select <bpt id=\"p1\">**</bpt>Publish<ept id=\"p1\">**</ept> to deploy your application again.",
      "pos": [
        18853,
        18905
      ]
    },
    {
      "content": "<ph id=\"ph1\">    ![</ph>Publish Web dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms11.png)</ph>",
      "pos": [
        18908,
        19041
      ]
    },
    {
      "content": "Add a Database to the Application",
      "pos": [
        19047,
        19080
      ]
    },
    {
      "content": "Next, you'll update the Web Forms application to add the capability to display and update contacts, as well as store the data in the default database.",
      "pos": [
        19082,
        19232
      ]
    },
    {
      "content": "When you created the Web Forms project, the database was also created by default.",
      "pos": [
        19233,
        19314
      ]
    },
    {
      "content": "The application will use Entity Framework to access the database and to read and update data in the database.",
      "pos": [
        19315,
        19424
      ]
    },
    {
      "content": "Add a Data Model Class",
      "pos": [
        19428,
        19450
      ]
    },
    {
      "content": "You begin by creating a simple data model using code.",
      "pos": [
        19452,
        19505
      ]
    },
    {
      "content": "This data model will be contained in a class called <ph id=\"ph1\">`Contacts`</ph>.",
      "pos": [
        19506,
        19569
      ]
    },
    {
      "content": "The <ph id=\"ph1\">`Contacts`</ph> class name was chosen to avoid a class name conflict with the <ph id=\"ph2\">`Contact`</ph> class contained in the Contact.aspx.cs file created by the Web Forms template.",
      "pos": [
        19570,
        19735
      ]
    },
    {
      "pos": [
        19742,
        20015
      ],
      "content": "In **Solution Explorer**, right-click the *Models* folder and then select **Add** -> **Class**.  \n ![Select Class](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms12.png)  \n The **Add New Item** dialog box is displayed.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the <bpt id=\"p2\">*</bpt>Models<ept id=\"p2\">*</ept> folder and then select <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept> -&gt; <bpt id=\"p4\">**</bpt>Class<ept id=\"p4\">**</ept>.",
          "pos": [
            0,
            95
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Select Class<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms12.png)</ph>",
          "pos": [
            98,
            218
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Add New Item<ept id=\"p1\">**</ept> dialog box is displayed.",
          "pos": [
            222,
            267
          ]
        }
      ]
    },
    {
      "pos": [
        20022,
        20193
      ],
      "content": "Name this new class *Contacts.cs*.  \n ![Add New Item dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Name this new class <bpt id=\"p1\">*</bpt>Contacts.cs<ept id=\"p1\">*</ept>.",
          "pos": [
            0,
            34
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add New Item dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13.png)</ph>",
          "pos": [
            37,
            168
          ]
        }
      ]
    },
    {
      "content": "Replace the default code with the following code:",
      "pos": [
        20199,
        20248
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Contacts<ept id=\"p1\">**</ept> class defines the data that you will store for each contact, plus a primary key (<ph id=\"ph1\">`ContactID`</ph>) that is needed by the database.",
      "pos": [
        20934,
        21076
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Contacts<ept id=\"p1\">**</ept> class represents the contact data that will be displayed.",
      "pos": [
        21077,
        21151
      ]
    },
    {
      "content": "Each instance of a Contacts object will correspond to a row within a relational database table, and each property of the Contacts class will map to a column in the relational database table.",
      "pos": [
        21152,
        21342
      ]
    },
    {
      "content": "Later in this tutorial, you'll review the contact data contained in the database.",
      "pos": [
        21343,
        21424
      ]
    },
    {
      "content": "Web Forms Scaffolding",
      "pos": [
        21429,
        21450
      ]
    },
    {
      "content": "You've created the <bpt id=\"p1\">**</bpt>Contacts<ept id=\"p1\">**</ept> model class above.",
      "pos": [
        21452,
        21502
      ]
    },
    {
      "content": "Now, you can use the Web Forms Scaffolder to generate <bpt id=\"p1\">*</bpt>List<ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt>Insert<ept id=\"p2\">*</ept>, <bpt id=\"p3\">*</bpt>Edit<ept id=\"p3\">*</ept> and <bpt id=\"p4\">*</bpt>Delete<ept id=\"p4\">*</ept> pages that are used when working with this data.",
      "pos": [
        21503,
        21643
      ]
    },
    {
      "content": "The Web Forms Scaffolder uses Entity Framework, Bootstrap, and Dynamic Data.",
      "pos": [
        21644,
        21720
      ]
    },
    {
      "content": "By default, the Web Forms Scaffolder is installed as an extension to your project as part of the project template when using Visual Studio 2013.",
      "pos": [
        21721,
        21865
      ]
    },
    {
      "content": "The following steps will allow you to use the Web Forms Scaffolder.",
      "pos": [
        21867,
        21934
      ]
    },
    {
      "pos": [
        21939,
        22084
      ],
      "content": "In Visual Studio, from the menu bar select **Tools** -> **Extensions and Updates**.  \n The **Extensions and Updates** dialog box is displayed.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In Visual Studio, from the menu bar select <bpt id=\"p1\">**</bpt>Tools<ept id=\"p1\">**</ept> -&gt; <bpt id=\"p2\">**</bpt>Extensions and Updates<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            83
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Extensions and Updates<ept id=\"p1\">**</ept> dialog box is displayed.",
          "pos": [
            87,
            142
          ]
        }
      ]
    },
    {
      "pos": [
        22088,
        22205
      ],
      "content": "From the left pane of the dialog box, select <bpt id=\"p1\">**</bpt>Online<ept id=\"p1\">**</ept> -&gt; <bpt id=\"p2\">**</bpt>Visual Studio Gallery<ept id=\"p2\">**</ept> -&gt; <bpt id=\"p3\">**</bpt>Tools<ept id=\"p3\">**</ept> -&gt; <bpt id=\"p4\">**</bpt>Scaffolding<ept id=\"p4\">**</ept>."
    },
    {
      "content": "If you don't see 'Web Forms Scaffolding' in the list, enter 'Web Forms Scaffolding' in the search box on the right of the dialog box.",
      "pos": [
        22209,
        22342
      ]
    },
    {
      "pos": [
        22348,
        22716
      ],
      "content": "If the Web Forms Scaffolder is not already installed, select **Download** to download and install 'Web Forms Scaffolding'. Restart Visual Studio if needed. Be sure to save your changes to the project when requested.  \n ![Extensions and Updates dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/ExtensionsAndUpdatesDB.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "If the Web Forms Scaffolder is not already installed, select **Download** to download and install 'Web Forms Scaffolding'. Restart Visual Studio if needed. Be sure to save your changes to the project when requested.",
          "pos": [
            0,
            215
          ],
          "nodes": [
            {
              "content": "If the Web Forms Scaffolder is not already installed, select <bpt id=\"p1\">**</bpt>Download<ept id=\"p1\">**</ept> to download and install 'Web Forms Scaffolding'.",
              "pos": [
                0,
                122
              ]
            },
            {
              "content": "Restart Visual Studio if needed.",
              "pos": [
                123,
                155
              ]
            },
            {
              "content": "Be sure to save your changes to the project when requested.",
              "pos": [
                156,
                215
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Extensions and Updates dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/ExtensionsAndUpdatesDB.png)</ph>",
          "pos": [
            218,
            365
          ]
        }
      ]
    },
    {
      "pos": [
        22722,
        22832
      ],
      "content": "Build the project (**Ctrl+Shift+B**).  \n You must build the project before using the scaffolding mechanism.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Build the project (<bpt id=\"p1\">**</bpt>Ctrl+Shift+B<ept id=\"p1\">**</ept>).",
          "pos": [
            0,
            37
          ]
        },
        {
          "content": "You must build the project before using the scaffolding mechanism.",
          "pos": [
            41,
            107
          ]
        }
      ]
    },
    {
      "pos": [
        22838,
        22993
      ],
      "content": "In **Solution Explorer**, right-click the *project* and then select **Add** -> **New Scaffolded Item**.  \n The **Add Scaffold** dialog box is displayed.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right-click the <bpt id=\"p2\">*</bpt>project<ept id=\"p2\">*</ept> and then select <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept> -&gt; <bpt id=\"p4\">**</bpt>New Scaffolded Item<ept id=\"p4\">**</ept>.",
          "pos": [
            0,
            103
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Add Scaffold<ept id=\"p1\">**</ept> dialog box is displayed.",
          "pos": [
            107,
            152
          ]
        }
      ]
    },
    {
      "pos": [
        22997,
        23329
      ],
      "content": "Select **Web Forms** from the left pane and select **Web Forms Pages using Entity Framework** from the center pane. Then click **Add**.  \n ![Add Scaffold dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13a.png)  \n The **Add Web Forms Pages** dialog box is displayed.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Select **Web Forms** from the left pane and select **Web Forms Pages using Entity Framework** from the center pane. Then click **Add**.",
          "pos": [
            0,
            135
          ],
          "nodes": [
            {
              "content": "Select <bpt id=\"p1\">**</bpt>Web Forms<ept id=\"p1\">**</ept> from the left pane and select <bpt id=\"p2\">**</bpt>Web Forms Pages using Entity Framework<ept id=\"p2\">**</ept> from the center pane.",
              "pos": [
                0,
                115
              ]
            },
            {
              "content": "Then click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.",
              "pos": [
                116,
                135
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add Scaffold dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13a.png)</ph>",
          "pos": [
            138,
            270
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Add Web Forms Pages<ept id=\"p1\">**</ept> dialog box is displayed.",
          "pos": [
            274,
            326
          ]
        }
      ]
    },
    {
      "pos": [
        23336,
        23687
      ],
      "content": "In the **Add Web Forms Pages** dialog box, set the **Model class** to `Contacts (ContactManager.Models)`. Set the **Data context class** to `ApplicationDbContext (ContactManager.Models)`. Then click **Add**. \n ![Add Web Forms Pages dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13b.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the **Add Web Forms Pages** dialog box, set the **Model class** to `Contacts (ContactManager.Models)`. Set the **Data context class** to `ApplicationDbContext (ContactManager.Models)`. Then click **Add**.",
          "pos": [
            0,
            207
          ],
          "nodes": [
            {
              "content": "In the <bpt id=\"p1\">**</bpt>Add Web Forms Pages<ept id=\"p1\">**</ept> dialog box, set the <bpt id=\"p2\">**</bpt>Model class<ept id=\"p2\">**</ept> to <ph id=\"ph1\">`Contacts (ContactManager.Models)`</ph>.",
              "pos": [
                0,
                105
              ]
            },
            {
              "content": "Set the <bpt id=\"p1\">**</bpt>Data context class<ept id=\"p1\">**</ept> to <ph id=\"ph1\">`ApplicationDbContext (ContactManager.Models)`</ph>.",
              "pos": [
                106,
                187
              ]
            },
            {
              "content": "Then click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>.",
              "pos": [
                188,
                207
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add Web Forms Pages dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13b.png)</ph>",
          "pos": [
            209,
            348
          ]
        }
      ]
    },
    {
      "content": "The Web Forms Scaffolder adds a new folder that contains <bpt id=\"p1\">*</bpt>Default.aspx<ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt>Delete.aspx<ept id=\"p2\">*</ept>, <bpt id=\"p3\">*</bpt>Edit.aspx<ept id=\"p3\">*</ept>, and <bpt id=\"p4\">*</bpt>Insert.aspx<ept id=\"p4\">*</ept> pages.",
      "pos": [
        23691,
        23816
      ]
    },
    {
      "content": "The Web Forms Scaffolder also creates a <bpt id=\"p1\">*</bpt>DynamicData<ept id=\"p1\">*</ept> folder that contains an <bpt id=\"p2\">*</bpt>EntityTemplates<ept id=\"p2\">*</ept> folder and a <bpt id=\"p3\">*</bpt>FieldTemplates<ept id=\"p3\">*</ept> folder.",
      "pos": [
        23817,
        23950
      ]
    },
    {
      "content": "The <ph id=\"ph1\">`ApplicationDbContext`</ph> will be used for both the membership database and the contact data.",
      "pos": [
        23951,
        24045
      ]
    },
    {
      "content": "Configure the Application to use the Data Model",
      "pos": [
        24050,
        24097
      ]
    },
    {
      "content": "The next task is to enable the Code First Migrations feature in order to create the database based on the data model you created.",
      "pos": [
        24099,
        24228
      ]
    },
    {
      "content": "Also, you will add sample data and a data initializer.",
      "pos": [
        24229,
        24283
      ]
    },
    {
      "pos": [
        24290,
        24528
      ],
      "content": "In the **Tools** menu, select **NuGet Package Manager** and then **Package Manager Console**.  \n ![Add Web Forms Pages dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13c.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Tools<ept id=\"p1\">**</ept> menu, select <bpt id=\"p2\">**</bpt>NuGet Package Manager<ept id=\"p2\">**</ept> and then <bpt id=\"p3\">**</bpt>Package Manager Console<ept id=\"p3\">**</ept>.",
          "pos": [
            0,
            93
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add Web Forms Pages dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13c.png)</ph>",
          "pos": [
            96,
            235
          ]
        }
      ]
    },
    {
      "content": "In the Package Manager Console window, enter the following command:",
      "pos": [
        24534,
        24601
      ]
    },
    {
      "pos": [
        24637,
        24820
      ],
      "content": "The enable-migrations command creates a <bpt id=\"p1\">*</bpt>Migrations<ept id=\"p1\">*</ept> folder, and it puts in that folder a <bpt id=\"p2\">*</bpt>Configuration.cs<ept id=\"p2\">*</ept> file that you can edit to seed the database and configure data migrations."
    },
    {
      "pos": [
        24826,
        24897
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Package Manager Console<ept id=\"p1\">**</ept> window, enter the following command:"
    },
    {
      "content": "The <ph id=\"ph1\">`add-migration Initial`</ph> command generates a file named &lt;date_stamp&gt;Initial in the <bpt id=\"p1\">*</bpt>Migrations<ept id=\"p1\">*</ept> folder that creates the database.",
      "pos": [
        24936,
        25068
      ]
    },
    {
      "content": "The first parameter ( Initial ) is arbitrary and is used to create the name of the file.",
      "pos": [
        25069,
        25157
      ]
    },
    {
      "content": "You can see the new class files in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>.",
      "pos": [
        25158,
        25215
      ]
    },
    {
      "content": "In the <ph id=\"ph1\">`Initial`</ph> class, the <ph id=\"ph2\">`Up`</ph> method creates the <ph id=\"ph3\">`Contact`</ph> table, and the <ph id=\"ph4\">`Down`</ph> method (used when you want to return to the previous state) drops it.",
      "pos": [
        25216,
        25369
      ]
    },
    {
      "pos": [
        25375,
        25419
      ],
      "content": "Open the <bpt id=\"p1\">*</bpt>Migrations\\Configuration.cs<ept id=\"p1\">*</ept> file."
    },
    {
      "content": "Add the following namespace:",
      "pos": [
        25425,
        25453
      ]
    },
    {
      "pos": [
        25498,
        25548
      ],
      "content": "Replace the <ph id=\"ph1\">`Seed`</ph> method with the following code:"
    },
    {
      "content": "This code initializes (seeds) the database with the contact information.",
      "pos": [
        27522,
        27594
      ]
    },
    {
      "content": "For more information on seeding the database, see <bpt id=\"p1\">[</bpt>Seeding and Debugging Entity Framework (EF) DBs<ept id=\"p1\">](http://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx)</ept>.",
      "pos": [
        27595,
        27799
      ]
    },
    {
      "pos": [
        27805,
        27858
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Package Manager Console<ept id=\"p1\">**</ept> enter the command:"
    },
    {
      "content": "The <ph id=\"ph1\">`update-database`</ph> runs the first migration which creates the database.",
      "pos": [
        27887,
        27961
      ]
    },
    {
      "content": "By default, the database is created as a SQL Server Express LocalDB database.",
      "pos": [
        27962,
        28039
      ]
    },
    {
      "content": "<ph id=\"ph1\">    ![</ph>Package Manager Console<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13d.png)</ph>",
      "pos": [
        28042,
        28177
      ]
    },
    {
      "content": "Run the Application Locally and Display the Data",
      "pos": [
        28184,
        28232
      ]
    },
    {
      "content": "Run the application now to see how you can view the contacts.",
      "pos": [
        28234,
        28295
      ]
    },
    {
      "pos": [
        28300,
        28344
      ],
      "content": "First, build the project (<bpt id=\"p1\">**</bpt>Ctrl+Shift+B<ept id=\"p1\">**</ept>)."
    },
    {
      "pos": [
        28350,
        28453
      ],
      "content": "Press **Ctrl+F5** to run the application.  \n The browser will open and show the *Default.aspx* page.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Press <bpt id=\"p1\">**</bpt>Ctrl+F5<ept id=\"p1\">**</ept> to run the application.",
          "pos": [
            0,
            41
          ]
        },
        {
          "content": "The browser will open and show the <bpt id=\"p1\">*</bpt>Default.aspx<ept id=\"p1\">*</ept> page.",
          "pos": [
            45,
            100
          ]
        }
      ]
    },
    {
      "pos": [
        28457,
        28680
      ],
      "content": "Select the **Contact Demo** link at the top of the page to display the *Contact List* page.  \n ![Contacts List Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms17.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Select the <bpt id=\"p1\">**</bpt>Contact Demo<ept id=\"p1\">**</ept> link at the top of the page to display the <bpt id=\"p2\">*</bpt>Contact List<ept id=\"p2\">*</ept> page.",
          "pos": [
            0,
            91
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Contacts List Page<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms17.png)</ph>",
          "pos": [
            94,
            220
          ]
        }
      ]
    },
    {
      "content": "Enable SSL for the Project",
      "pos": [
        28686,
        28712
      ]
    },
    {
      "content": "Secure Sockets Layer (SSL) is a protocol defined to allow Web servers and Web clients to communicate more securely through the use of encryption.",
      "pos": [
        28714,
        28859
      ]
    },
    {
      "content": "When SSL is not used, data sent between the client and server is open to packet sniffing by anyone with physical access to the network.",
      "pos": [
        28860,
        28995
      ]
    },
    {
      "content": "Additionally, several common authentication schemes are not secure over plain HTTP.",
      "pos": [
        28996,
        29079
      ]
    },
    {
      "content": "In particular, Basic authentication and forms authentication send unencrypted credentials.",
      "pos": [
        29080,
        29170
      ]
    },
    {
      "content": "To be secure, these authentication schemes must use SSL.",
      "pos": [
        29171,
        29227
      ]
    },
    {
      "pos": [
        29232,
        29351
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, click the <bpt id=\"p2\">**</bpt>ContactManager<ept id=\"p2\">**</ept> project, then press <bpt id=\"p3\">**</bpt>F4<ept id=\"p3\">**</ept> to display the <bpt id=\"p4\">**</bpt>Properties<ept id=\"p4\">**</ept> window."
    },
    {
      "pos": [
        29356,
        29389
      ],
      "content": "Change <bpt id=\"p1\">**</bpt>SSL Enabled<ept id=\"p1\">**</ept> to <ph id=\"ph1\">`true`</ph>."
    },
    {
      "pos": [
        29394,
        29685
      ],
      "content": "Copy the **SSL URL** so you can use it later.  \n The SSL URL will be `https://localhost:44300/` unless you've previously created SSL web app (as shown below).\n ![Project Properties](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms18.png)",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Copy the <bpt id=\"p1\">**</bpt>SSL URL<ept id=\"p1\">**</ept> so you can use it later.",
          "pos": [
            0,
            45
          ]
        },
        {
          "content": "The SSL URL will be <ph id=\"ph1\">`https://localhost:44300/`</ph> unless you've previously created SSL web app (as shown below).",
          "pos": [
            49,
            158
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Project Properties<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms18.png)</ph>",
          "pos": [
            159,
            285
          ]
        }
      ]
    },
    {
      "pos": [
        29691,
        29786
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, right click the <bpt id=\"p2\">**</bpt>Contact Manager<ept id=\"p2\">**</ept> project and click <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        29790,
        29821
      ],
      "content": "In the left tab, click <bpt id=\"p1\">**</bpt>Web<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        29825,
        30034
      ],
      "content": "Change the **Project Url** to use the **SSL URL** that you saved earlier.  \n ![Project Web Properties](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms19.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Change the <bpt id=\"p1\">**</bpt>Project Url<ept id=\"p1\">**</ept> to use the <bpt id=\"p2\">**</bpt>SSL URL<ept id=\"p2\">**</ept> that you saved earlier.",
          "pos": [
            0,
            73
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Project Web Properties<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms19.png)</ph>",
          "pos": [
            76,
            206
          ]
        }
      ]
    },
    {
      "pos": [
        30040,
        30077
      ],
      "content": "Save the page by pressing <bpt id=\"p1\">**</bpt>CTRL+S<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Press <bpt id=\"p1\">**</bpt>Ctrl+F5<ept id=\"p1\">**</ept> to run the application.",
      "pos": [
        30081,
        30122
      ]
    },
    {
      "content": "Visual Studio will display an option to allow you to avoid SSL warnings.",
      "pos": [
        30125,
        30197
      ]
    },
    {
      "pos": [
        30203,
        30459
      ],
      "content": "Click **Yes** to trust the IIS Express SSL certificate and continue.  \n ![IIS Express SSL certificate details](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms20.png)  \n A Security Warning is displayed.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept> to trust the IIS Express SSL certificate and continue.",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>IIS Express SSL certificate details<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms20.png)</ph>",
          "pos": [
            71,
            214
          ]
        },
        {
          "content": "A Security Warning is displayed.",
          "pos": [
            218,
            250
          ]
        }
      ]
    },
    {
      "pos": [
        30467,
        30711
      ],
      "content": "Click **Yes** to install the certificate to your localhost.  \n![Security Warning dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21.png)  \nThe browser window will be displayed.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Click <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept> to install the certificate to your localhost.",
          "pos": [
            0,
            59
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>Security Warning dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21.png)</ph>",
          "pos": [
            62,
            196
          ]
        },
        {
          "content": "The browser window will be displayed.",
          "pos": [
            199,
            236
          ]
        }
      ]
    },
    {
      "content": "You can easily test your Web application locally using SSL.",
      "pos": [
        30715,
        30774
      ]
    },
    {
      "content": "Add an OAuth 2.0 Provider",
      "pos": [
        30780,
        30805
      ]
    },
    {
      "content": "ASP.NET Web Forms provides enhanced options for membership and authentication.",
      "pos": [
        30807,
        30885
      ]
    },
    {
      "content": "These enhancements include OAuth.",
      "pos": [
        30886,
        30919
      ]
    },
    {
      "content": "OAuth is an open protocol that allows secure authorization in a simple and standard method from web, mobile, and desktop applications.",
      "pos": [
        30920,
        31054
      ]
    },
    {
      "content": "The ASP.NET MVC internet template uses OAuth to expose Facebook, Twitter, Google and Microsoft as authentication providers.",
      "pos": [
        31055,
        31178
      ]
    },
    {
      "content": "Although this tutorial uses only Google as the authentication provider, you can easily modify the code to use any of the providers.",
      "pos": [
        31179,
        31310
      ]
    },
    {
      "content": "The steps to implement other providers are very similar to the steps you will see in this tutorial.",
      "pos": [
        31311,
        31410
      ]
    },
    {
      "content": "In addition to authentication, the tutorial will also use roles to implement authorization.",
      "pos": [
        31413,
        31504
      ]
    },
    {
      "content": "Only those users you add to the <ph id=\"ph1\">`canEdit`</ph> role will be able to change data (create, edit, or delete contacts).",
      "pos": [
        31505,
        31615
      ]
    },
    {
      "content": "The following steps will allow you to add a Google authentication provider.",
      "pos": [
        31618,
        31693
      ]
    },
    {
      "pos": [
        31698,
        31740
      ],
      "content": "Open the <bpt id=\"p1\">*</bpt>App_Start\\Startup.Auth.cs<ept id=\"p1\">*</ept> file."
    },
    {
      "pos": [
        31745,
        31861
      ],
      "content": "Remove the comment characters from the <ph id=\"ph1\">`app.UseGoogleAuthentication()`</ph> method so that the method appears as follows:"
    },
    {
      "pos": [
        32024,
        32464
      ],
      "content": "Navigate to the [Google Developers Console](https://console.developers.google.com/). You will also need to sign-in with your Google developer email account (gmail.com). If you do not have a Google account, select the **Create an account** link.  \n Next, you'll see the **Google Developers Console**.\n ![Google Developers Console](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21a.png)",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Navigate to the [Google Developers Console](https://console.developers.google.com/). You will also need to sign-in with your Google developer email account (gmail.com). If you do not have a Google account, select the **Create an account** link.",
          "pos": [
            0,
            244
          ],
          "nodes": [
            {
              "content": "Navigate to the <bpt id=\"p1\">[</bpt>Google Developers Console<ept id=\"p1\">](https://console.developers.google.com/)</ept>.",
              "pos": [
                0,
                84
              ]
            },
            {
              "content": "You will also need to sign-in with your Google developer email account (gmail.com).",
              "pos": [
                85,
                168
              ]
            },
            {
              "content": "If you do not have a Google account, select the <bpt id=\"p1\">**</bpt>Create an account<ept id=\"p1\">**</ept> link.",
              "pos": [
                169,
                244
              ]
            }
          ]
        },
        {
          "content": "Next, you'll see the <bpt id=\"p1\">**</bpt>Google Developers Console<ept id=\"p1\">**</ept>.",
          "pos": [
            248,
            299
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Google Developers Console<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21a.png)</ph>",
          "pos": [
            300,
            434
          ]
        }
      ]
    },
    {
      "pos": [
        32471,
        32881
      ],
      "content": "Click the **Create Project** button and enter a project name and ID (you can use the default values). Then, click the **agreement checkbox** and the **Create** button.  \n ![Google - New Project](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21b.png)  \n In a few seconds the new project will be created and your browser will display the new projects page.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Click the **Create Project** button and enter a project name and ID (you can use the default values). Then, click the **agreement checkbox** and the **Create** button.",
          "pos": [
            0,
            167
          ],
          "nodes": [
            {
              "content": "Click the <bpt id=\"p1\">**</bpt>Create Project<ept id=\"p1\">**</ept> button and enter a project name and ID (you can use the default values).",
              "pos": [
                0,
                101
              ]
            },
            {
              "content": "Then, click the <bpt id=\"p1\">**</bpt>agreement checkbox<ept id=\"p1\">**</ept> and the <bpt id=\"p2\">**</bpt>Create<ept id=\"p2\">**</ept> button.",
              "pos": [
                102,
                167
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Google - New Project<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21b.png)</ph>",
          "pos": [
            170,
            299
          ]
        },
        {
          "content": "In a few seconds the new project will be created and your browser will display the new projects page.",
          "pos": [
            303,
            404
          ]
        }
      ]
    },
    {
      "pos": [
        32885,
        32956
      ],
      "content": "In the left tab, click <bpt id=\"p1\">**</bpt>APIs &amp; auth<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Credentials<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        32960,
        33206
      ],
      "content": "Click the **Create New Client ID** under **OAuth**.  \n The **Create Client ID** dialog will be displayed.\n ![Google - Create Client ID](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21c.png)",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Click the <bpt id=\"p1\">**</bpt>Create New Client ID<ept id=\"p1\">**</ept> under <bpt id=\"p2\">**</bpt>OAuth<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            51
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Create Client ID<ept id=\"p1\">**</ept> dialog will be displayed.",
          "pos": [
            55,
            105
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Google - Create Client ID<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21c.png)</ph>",
          "pos": [
            106,
            240
          ]
        }
      ]
    },
    {
      "pos": [
        33212,
        33310
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Create Client ID<ept id=\"p1\">**</ept> dialog, keep the default <bpt id=\"p2\">**</bpt>Web application<ept id=\"p2\">**</ept> for the application type."
    },
    {
      "pos": [
        33316,
        33668
      ],
      "content": "Set the **Authorized JavaScript Origins** to the SSL URL you used earlier in this tutorial (**https://localhost:44300/** unless you've created other SSL projects).  \n This URL is the origin for your application. For this sample, you will only enter the localhost test URL. However, you can enter multiple URL to account for localhost and production.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Set the <bpt id=\"p1\">**</bpt>Authorized JavaScript Origins<ept id=\"p1\">**</ept> to the SSL URL you used earlier in this tutorial (<bpt id=\"p2\">**</bpt>https://localhost:44300/<ept id=\"p2\">**</ept> unless you've created other SSL projects).",
          "pos": [
            0,
            163
          ]
        },
        {
          "content": " This URL is the origin for your application. For this sample, you will only enter the localhost test URL. However, you can enter multiple URL to account for localhost and production.",
          "pos": [
            166,
            349
          ],
          "nodes": [
            {
              "content": "This URL is the origin for your application.",
              "pos": [
                1,
                45
              ]
            },
            {
              "content": "For this sample, you will only enter the localhost test URL.",
              "pos": [
                46,
                106
              ]
            },
            {
              "content": "However, you can enter multiple URL to account for localhost and production.",
              "pos": [
                107,
                183
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        33675,
        33728
      ],
      "content": "Set the <bpt id=\"p1\">**</bpt>Authorized Redirect URI<ept id=\"p1\">**</ept> to the following:"
    },
    {
      "content": "This value is the URI that ASP.NET OAuth users to communicate with the google OAuth server.",
      "pos": [
        33785,
        33876
      ]
    },
    {
      "content": "Remember to the SSL URL you used above (<bpt id=\"p1\">**</bpt>https://localhost:44300/<ept id=\"p1\">**</ept> unless you've created other SSL projects).",
      "pos": [
        33877,
        33988
      ]
    },
    {
      "pos": [
        33996,
        34034
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>Create Client ID<ept id=\"p1\">**</ept> button."
    },
    {
      "content": "In Visual Studio, update the <ph id=\"ph1\">`UseGoogleAuthentication`</ph> method of the <bpt id=\"p1\">*</bpt>Startup.Auth.cs<ept id=\"p1\">*</ept> page by copying and pasting the <bpt id=\"p2\">**</bpt>AppId<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>App Secret<ept id=\"p3\">**</ept> into the method.",
      "pos": [
        34039,
        34203
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>AppId<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>App Secret<ept id=\"p2\">**</ept> values shown below are samples and will not work.",
      "pos": [
        34204,
        34286
      ]
    },
    {
      "content": "Press <bpt id=\"p1\">**</bpt>CTRL+F5<ept id=\"p1\">**</ept> to build and run the application.",
      "pos": [
        37333,
        37384
      ]
    },
    {
      "content": "Click the <bpt id=\"p1\">**</bpt>Log in<ept id=\"p1\">**</ept> link.",
      "pos": [
        37385,
        37411
      ]
    },
    {
      "pos": [
        37416,
        37595
      ],
      "content": "Under **Use another service to log in**, click **Google**.  \n![Log in](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21d.png)",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Under <bpt id=\"p1\">**</bpt>Use another service to log in<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Google<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            58
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>Log in<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21d.png)</ph>",
          "pos": [
            61,
            175
          ]
        }
      ]
    },
    {
      "pos": [
        37602,
        37852
      ],
      "content": "If you need to enter your credentials, you will be redirected to the google site where you will enter your credentials.  \n![Google - Sign in](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21e.png)",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "If you need to enter your credentials, you will be redirected to the google site where you will enter your credentials.",
          "pos": [
            0,
            119
          ]
        },
        {
          "content": "Google - Sign in",
          "pos": [
            124,
            140
          ]
        }
      ]
    },
    {
      "pos": [
        37859,
        38120
      ],
      "content": "After you enter your credentials, you will be prompted to give permissions to the web application you just created:  \n![Project Default Service Account](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21f.png)",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "After you enter your credentials, you will be prompted to give permissions to the web application you just created:",
          "pos": [
            0,
            115
          ]
        },
        {
          "content": "Project Default Service Account",
          "pos": [
            120,
            151
          ]
        }
      ]
    },
    {
      "pos": [
        38127,
        38429
      ],
      "content": "Click **Accept**. You will now be redirected back to the **Register** page of the **ContactManager** application where you can register your Google account.\n![Register with your Google Account](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21g.png)",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Click **Accept**. You will now be redirected back to the **Register** page of the **ContactManager** application where you can register your Google account.",
          "pos": [
            0,
            156
          ],
          "nodes": [
            {
              "content": "Click <bpt id=\"p1\">**</bpt>Accept<ept id=\"p1\">**</ept>.",
              "pos": [
                0,
                17
              ]
            },
            {
              "content": "You will now be redirected back to the <bpt id=\"p1\">**</bpt>Register<ept id=\"p1\">**</ept> page of the <bpt id=\"p2\">**</bpt>ContactManager<ept id=\"p2\">**</ept> application where you can register your Google account.",
              "pos": [
                18,
                156
              ]
            }
          ]
        },
        {
          "content": "<ph id=\"ph1\">![</ph>Register with your Google Account<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21g.png)</ph>",
          "pos": [
            157,
            298
          ]
        }
      ]
    },
    {
      "content": "You have the option of changing the local email registration name used for your Gmail account, but you generally want to keep the default email alias (that is, the one you used for authentication).",
      "pos": [
        38436,
        38633
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Log in<ept id=\"p1\">**</ept>.",
      "pos": [
        38634,
        38651
      ]
    },
    {
      "content": "Use the Membership API to Restrict Access",
      "pos": [
        38655,
        38696
      ]
    },
    {
      "content": "ASP.NET Identity is the membership system used for authentication when building an ASP.NET web application.",
      "pos": [
        38698,
        38805
      ]
    },
    {
      "content": "It makes it easy to integrate user-specific profile data with application data.",
      "pos": [
        38806,
        38885
      ]
    },
    {
      "content": "Also, ASP.NET Identity allows you to choose the persistence model for user profiles in your application.",
      "pos": [
        38886,
        38990
      ]
    },
    {
      "content": "You can store the data in a SQL Server database or another data store, including <bpt id=\"p1\">*</bpt>NoSQL<ept id=\"p1\">*</ept> data stores such as Azure Storage Tables.",
      "pos": [
        38991,
        39121
      ]
    },
    {
      "content": "By using the default ASP.NET Web Forms template, you have built-in membership functionality that you can immediately use when the application runs.",
      "pos": [
        39123,
        39270
      ]
    },
    {
      "content": "You will use ASP.NET Identity to add an administrator role and assign a user to that role.",
      "pos": [
        39271,
        39361
      ]
    },
    {
      "content": "Then, you will learn how to restrict access to the administration folder and the pages in that folder that are used to modify the contact data.",
      "pos": [
        39362,
        39505
      ]
    },
    {
      "content": "Add an Administrator",
      "pos": [
        39510,
        39530
      ]
    },
    {
      "content": "Using ASP.NET Identity, you can add an administrator role and assign a user to that role using code.",
      "pos": [
        39532,
        39632
      ]
    },
    {
      "pos": [
        39638,
        39724
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, open the <bpt id=\"p2\">*</bpt>Configuration.cs<ept id=\"p2\">*</ept> file in the <bpt id=\"p3\">*</bpt>Migrations<ept id=\"p3\">*</ept> folder."
    },
    {
      "pos": [
        39728,
        39813
      ],
      "content": "Add the following <ph id=\"ph1\">`using`</ph> statements within the <ph id=\"ph2\">`ContactManger.Migrations`</ph> namespace:"
    },
    {
      "pos": [
        39919,
        40014
      ],
      "content": "Add the following <ph id=\"ph1\">`AddUserAndRole`</ph> method to the <ph id=\"ph2\">`Configuration`</ph> class after the <ph id=\"ph3\">`Seed`</ph> method:"
    },
    {
      "content": "Add a call to the <ph id=\"ph1\">`AddUserAndRole`</ph> method from within the beginning of the <ph id=\"ph2\">`Seed`</ph> method.",
      "pos": [
        41397,
        41486
      ]
    },
    {
      "content": "Note that only the beginning of the <ph id=\"ph1\">`Seed`</ph> method is being shown.",
      "pos": [
        41487,
        41552
      ]
    },
    {
      "pos": [
        41696,
        41788
      ],
      "content": "After saving all your changes, in the <bpt id=\"p1\">**</bpt>Package Manager Console<ept id=\"p1\">**</ept> run the following command:"
    },
    {
      "content": "This code creates a new role called <ph id=\"ph1\">`canEdit`</ph> and creates a new local user with the email of canEditUser@wideworldimporters.com.",
      "pos": [
        41817,
        41945
      ]
    },
    {
      "content": "Then, the code adds canEditUser@wideworldimporters.com to the <ph id=\"ph1\">`canEdit`</ph> role.",
      "pos": [
        41946,
        42023
      ]
    },
    {
      "content": "For more information, see the <bpt id=\"p1\">[</bpt>ASP.NET Identity<ept id=\"p1\">](http://www.asp.net/identity)</ept> resource page.",
      "pos": [
        42024,
        42116
      ]
    },
    {
      "content": "Restrict Access to the Administration Folder",
      "pos": [
        42123,
        42167
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>ContactManager<ept id=\"p1\">**</ept> sample application allows both anonymous users and logged-in users to view contacts.",
      "pos": [
        42169,
        42276
      ]
    },
    {
      "content": "However, after you complete this section, the logged-in users that are assigned to the \"canEdit\" role will be the only users able to modify the contacts.",
      "pos": [
        42277,
        42430
      ]
    },
    {
      "pos": [
        42432,
        42539
      ],
      "content": "You will create a folder named <bpt id=\"p1\">*</bpt>Admin<ept id=\"p1\">*</ept> where only users that are assigned to the \"canEdit\" role can access."
    },
    {
      "pos": [
        42544,
        42648
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, add a sub-folder to the <bpt id=\"p2\">*</bpt>Contacts<ept id=\"p2\">*</ept> folder and name the new sub-folder <bpt id=\"p3\">*</bpt>Admin<ept id=\"p3\">*</ept>."
    },
    {
      "pos": [
        42652,
        42735
      ],
      "content": "Move the following files from the <bpt id=\"p1\">*</bpt>Contacts<ept id=\"p1\">*</ept> folder to the <bpt id=\"p2\">*</bpt>Contacts/Admin<ept id=\"p2\">*</ept> folder:"
    },
    {
      "pos": [
        42745,
        42777
      ],
      "content": "Delete.aspx <bpt id=\"p1\">*</bpt>and<ept id=\"p1\">*</ept> Delete.aspx.cs"
    },
    {
      "pos": [
        42786,
        42814
      ],
      "content": "Edit.aspx <bpt id=\"p1\">*</bpt>and<ept id=\"p1\">*</ept> Edit.aspx.cs"
    },
    {
      "pos": [
        42823,
        42855
      ],
      "content": "Insert.aspx <bpt id=\"p1\">*</bpt>and<ept id=\"p1\">*</ept> Insert.aspx.cs"
    },
    {
      "pos": [
        42860,
        43035
      ],
      "content": "Update the link references in <bpt id=\"p1\">*</bpt>Contacts/Default.aspx<ept id=\"p1\">*</ept> by adding \"Admin/\" before the pages references that link to <bpt id=\"p2\">*</bpt>Insert.aspx<ept id=\"p2\">*</ept>, <bpt id=\"p3\">*</bpt>Edit.aspx<ept id=\"p3\">*</ept>, and <bpt id=\"p4\">*</bpt>Delete.aspx<ept id=\"p4\">*</ept> as shown below:"
    },
    {
      "pos": [
        46381,
        46535
      ],
      "content": "Update the six references of the <ph id=\"ph1\">`Response.Redirect(\"Default.aspx\")`</ph> code to <ph id=\"ph2\">`Response.Redirect(\"~/Contacts/Default.aspx\")`</ph> for the following three files:"
    },
    {
      "content": "Delete.aspx.cs",
      "pos": [
        46545,
        46559
      ]
    },
    {
      "content": "Edit.aspx.cs",
      "pos": [
        46568,
        46580
      ]
    },
    {
      "content": "Insert.aspx.cs",
      "pos": [
        46589,
        46603
      ]
    },
    {
      "content": "Now the links will all work correctly when you display and update the contact data.",
      "pos": [
        46612,
        46695
      ]
    },
    {
      "pos": [
        46699,
        46831
      ],
      "content": "To restrict access to the <bpt id=\"p1\">*</bpt>Admin<ept id=\"p1\">*</ept> folder, from the <bpt id=\"p2\">**</bpt>Solution Explorer<ept id=\"p2\">**</ept> right-click the <bpt id=\"p3\">*</bpt>Admin<ept id=\"p3\">*</ept> folder and select <bpt id=\"p4\">**</bpt>Add New Item<ept id=\"p4\">**</ept>."
    },
    {
      "pos": [
        46835,
        46998
      ],
      "content": "From the list of Visual C# Web templates, select <bpt id=\"p1\">**</bpt>Web Configuration File<ept id=\"p1\">**</ept> from the middle list, accept the default name of <bpt id=\"p2\">*</bpt>Web.config<ept id=\"p2\">*</ept>, and then select <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        47002,
        47079
      ],
      "content": "Replace the existing XML content in the <bpt id=\"p1\">*</bpt>Web.config<ept id=\"p1\">*</ept> file with the following:"
    },
    {
      "pos": [
        47339,
        47504
      ],
      "content": "Save the *Web.config* file. \n The *Web.config* file specifies that only users assigned to the \"canEdit\" role can access the pages contained in the *Admin* folder.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Save the <bpt id=\"p1\">*</bpt>Web.config<ept id=\"p1\">*</ept> file.",
          "pos": [
            0,
            27
          ]
        },
        {
          "content": "The <bpt id=\"p1\">*</bpt>Web.config<ept id=\"p1\">*</ept> file specifies that only users assigned to the \"canEdit\" role can access the pages contained in the <bpt id=\"p2\">*</bpt>Admin<ept id=\"p2\">*</ept> folder.",
          "pos": [
            30,
            162
          ]
        }
      ]
    },
    {
      "pos": [
        47507,
        47632
      ],
      "content": "When a user that is not part of the \"canEdit\" role attempts to modify the data, they will be redirected to the <bpt id=\"p1\">*</bpt>Log in<ept id=\"p1\">*</ept> page."
    },
    {
      "content": "Deploy the Application with the Database to Azure",
      "pos": [
        47636,
        47685
      ]
    },
    {
      "content": "Now that the web application is complete, you can publish it to Azure.",
      "pos": [
        47687,
        47757
      ]
    },
    {
      "content": "Publish the Application",
      "pos": [
        47762,
        47785
      ]
    },
    {
      "pos": [
        47790,
        47845
      ],
      "content": "In Visual Studio, build the project (<bpt id=\"p1\">**</bpt>Ctrl+Shift+B<ept id=\"p1\">**</ept>)."
    },
    {
      "pos": [
        47849,
        48242
      ],
      "content": "Right-click the project in **Solution Explorer** and select **Publish**.  \n ![Publish menu option](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms22.png)  \n The **Publish Web** dialog box is displayed.  \n ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms22a.png)",
      "leadings": [
        "",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Right-click the project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Publish<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            72
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Publish menu option<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms22.png)</ph>",
          "pos": [
            75,
            202
          ]
        },
        {
          "content": "The <bpt id=\"p1\">**</bpt>Publish Web<ept id=\"p1\">**</ept> dialog box is displayed.",
          "pos": [
            206,
            250
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Publish Web dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms22a.png)</ph>",
          "pos": [
            253,
            384
          ]
        }
      ]
    },
    {
      "pos": [
        48248,
        48487
      ],
      "content": "From the **Profile** tab, select **Azure Web App** as the publish target if it is not already selected.  \n ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms23.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "From the <bpt id=\"p1\">**</bpt>Profile<ept id=\"p1\">**</ept> tab, select <bpt id=\"p2\">**</bpt>Azure Web App<ept id=\"p2\">**</ept> as the publish target if it is not already selected.",
          "pos": [
            0,
            103
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Publish Web dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms23.png)</ph>",
          "pos": [
            106,
            236
          ]
        }
      ]
    },
    {
      "pos": [
        48493,
        48544
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Sign In<ept id=\"p1\">**</ept> if you are not already signed in."
    },
    {
      "pos": [
        48548,
        48915
      ],
      "content": "Select the existing web app that you created earlier in this tutorial from the **Existing Web Apps** dropdown box and click the **OK** button.  \n ![Select Existing Web Site dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms25.png)  \n If you are asked to save changes make to the profile, select **Yes**.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Select the existing web app that you created earlier in this tutorial from the <bpt id=\"p1\">**</bpt>Existing Web Apps<ept id=\"p1\">**</ept> dropdown box and click the <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept> button.",
          "pos": [
            0,
            142
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Select Existing Web Site dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms25.png)</ph>",
          "pos": [
            145,
            288
          ]
        },
        {
          "content": "If you are asked to save changes make to the profile, select <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>.",
          "pos": [
            292,
            361
          ]
        }
      ]
    },
    {
      "pos": [
        48919,
        49095
      ],
      "content": "Click the **Settings** tab.  \n ![Select Existing Web Site dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Click the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> tab.",
          "pos": [
            0,
            27
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Select Existing Web Site dialog box<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26.png)</ph>",
          "pos": [
            30,
            173
          ]
        }
      ]
    },
    {
      "pos": [
        49101,
        49153
      ],
      "content": "Set the <bpt id=\"p1\">**</bpt>Configuration<ept id=\"p1\">**</ept> dropdown box to <bpt id=\"p2\">**</bpt>Debug<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        49157,
        49248
      ],
      "content": "Click the <bpt id=\"p1\">**</bpt>down arrow<ept id=\"p1\">**</ept> icon next to <bpt id=\"p2\">**</bpt>ApplicationDbContext<ept id=\"p2\">**</ept> and set it to <bpt id=\"p3\">**</bpt>ContactDB<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        49252,
        49494
      ],
      "content": "Check the **Execute Code First Migrations** checkbox.  \n In this example, you should select this checkbox only the first time you publish the application. This way, the *Seed* method in the *Configuration.cs* file will only be called once.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Check the <bpt id=\"p1\">**</bpt>Execute Code First Migrations<ept id=\"p1\">**</ept> checkbox.",
          "pos": [
            0,
            53
          ]
        },
        {
          "content": " In this example, you should select this checkbox only the first time you publish the application. This way, the *Seed* method in the *Configuration.cs* file will only be called once.",
          "pos": [
            56,
            239
          ],
          "nodes": [
            {
              "content": "In this example, you should select this checkbox only the first time you publish the application.",
              "pos": [
                1,
                98
              ]
            },
            {
              "content": "This way, the <bpt id=\"p1\">*</bpt>Seed<ept id=\"p1\">*</ept> method in the <bpt id=\"p2\">*</bpt>Configuration.cs<ept id=\"p2\">*</ept> file will only be called once.",
              "pos": [
                99,
                183
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        49502,
        49577
      ],
      "content": "Then, click **Publish**.  \nYour application will be published to Azure.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Then, click <bpt id=\"p1\">**</bpt>Publish<ept id=\"p1\">**</ept>.",
          "pos": [
            0,
            24
          ]
        },
        {
          "content": "Your application will be published to Azure.",
          "pos": [
            27,
            71
          ]
        }
      ]
    },
    {
      "content": "If you closed and re-opened Visual Studio after you created the publish profile, you might not see the connection string in the drop-down list.",
      "pos": [
        49595,
        49738
      ]
    },
    {
      "content": "In that case, instead of editing the publish profile that you created earlier, create a new one the same way you did earlier, and then follow these steps on the <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> tab.)",
      "pos": [
        49739,
        49918
      ]
    },
    {
      "content": "Review the Application in Azure",
      "pos": [
        49925,
        49956
      ]
    },
    {
      "pos": [
        49961,
        50185
      ],
      "content": "In the browser, click the **Contact Demo** link.  \n The Contacts List is displayed.\n ![Contacts listed in Browser](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms27.png)",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "In the browser, click the <bpt id=\"p1\">**</bpt>Contact Demo<ept id=\"p1\">**</ept> link.",
          "pos": [
            0,
            48
          ]
        },
        {
          "content": "The Contacts List is displayed.",
          "pos": [
            52,
            83
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Contacts listed in Browser<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms27.png)</ph>",
          "pos": [
            84,
            218
          ]
        }
      ]
    },
    {
      "pos": [
        50192,
        50504
      ],
      "content": "Select **Create new** on the **Contacts List** page.  \n ![Contacts listed in Browser](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms29.png)  \n You are redirected to the **Login** page because you have not logged in with an account that can modify contacts.",
      "leadings": [
        "",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Select <bpt id=\"p1\">**</bpt>Create new<ept id=\"p1\">**</ept> on the <bpt id=\"p2\">**</bpt>Contacts List<ept id=\"p2\">**</ept> page.",
          "pos": [
            0,
            52
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Contacts listed in Browser<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms29.png)</ph>",
          "pos": [
            55,
            189
          ]
        },
        {
          "content": "You are redirected to the <bpt id=\"p1\">**</bpt>Login<ept id=\"p1\">**</ept> page because you have not logged in with an account that can modify contacts.",
          "pos": [
            193,
            306
          ]
        }
      ]
    },
    {
      "pos": [
        50510,
        50795
      ],
      "content": "After you enter the below email and password, click the **Log in** button.  \n **Email**: `canEditUser@wideworldimporters.com`  \n **Password**: `Pa$$word1`  \n ![Log in Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms28.png)",
      "leadings": [
        "",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "After you enter the below email and password, click the <bpt id=\"p1\">**</bpt>Log in<ept id=\"p1\">**</ept> button.",
          "pos": [
            0,
            74
          ]
        },
        {
          "content": "<bpt id=\"p1\"> **</bpt>Email<ept id=\"p1\">**</ept>: <ph id=\"ph1\">`canEditUser@wideworldimporters.com`</ph>",
          "pos": [
            77,
            125
          ]
        },
        {
          "content": "<bpt id=\"p1\"> **</bpt>Password<ept id=\"p1\">**</ept>: <ph id=\"ph1\">`Pa$$word1`</ph>",
          "pos": [
            128,
            154
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Log in Page<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms28.png)</ph>",
          "pos": [
            157,
            276
          ]
        }
      ]
    },
    {
      "pos": [
        50802,
        51209
      ],
      "content": "Enter new data for each field and then press the **Insert** button.  \n ![Add New Contact Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms30.png)  \n The *EditContactList.aspx* page is displayed with the new record.  \n ![Add New Contact Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms31.png)",
      "leadings": [
        "",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Enter new data for each field and then press the <bpt id=\"p1\">**</bpt>Insert<ept id=\"p1\">**</ept> button.",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add New Contact Page<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms30.png)</ph>",
          "pos": [
            70,
            198
          ]
        },
        {
          "content": "The <bpt id=\"p1\">*</bpt>EditContactList.aspx<ept id=\"p1\">*</ept> page is displayed with the new record.",
          "pos": [
            202,
            267
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add New Contact Page<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms31.png)</ph>",
          "pos": [
            270,
            398
          ]
        }
      ]
    },
    {
      "pos": [
        51216,
        51244
      ],
      "content": "Select the <bpt id=\"p1\">**</bpt>Log off<ept id=\"p1\">**</ept> link."
    },
    {
      "content": "Stop the Application",
      "pos": [
        51249,
        51269
      ]
    },
    {
      "content": "In order to prevent other people from registering and using your sample application, you will stop the web app.",
      "pos": [
        51271,
        51382
      ]
    },
    {
      "pos": [
        51387,
        51455
      ],
      "content": "In Visual Studio from the <bpt id=\"p1\">**</bpt>View Menu<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Server Explorer<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        51460,
        51508
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Server Explorer<ept id=\"p1\">**</ept>, navigate to <bpt id=\"p2\">**</bpt>Web App<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        51512,
        51715
      ],
      "content": "Right click on each web app instance and select **Stop Web App**.  \n ![Stop Web Site menu item](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26a.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Right click on each web app instance and select <bpt id=\"p1\">**</bpt>Stop Web App<ept id=\"p1\">**</ept>.",
          "pos": [
            0,
            65
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Stop Web Site menu item<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26a.png)</ph>",
          "pos": [
            68,
            200
          ]
        }
      ]
    },
    {
      "pos": [
        51723,
        52000
      ],
      "content": "Alternatively, from the Microsoft Azure management portal, you can select the web app, then click the **stop** icon at the bottom of the page.  \n ![Add New Contact Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26b.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Alternatively, from the Microsoft Azure management portal, you can select the web app, then click the <bpt id=\"p1\">**</bpt>stop<ept id=\"p1\">**</ept> icon at the bottom of the page.",
          "pos": [
            0,
            142
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Add New Contact Page<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26b.png)</ph>",
          "pos": [
            145,
            274
          ]
        }
      ]
    },
    {
      "content": "Review the Database",
      "pos": [
        52006,
        52025
      ]
    },
    {
      "content": "It is important to know how to view and modify the database directly.",
      "pos": [
        52027,
        52096
      ]
    },
    {
      "content": "Knowing how to work directly with the database allows you to confirm data in the database and also understand how the data is stored in each table.",
      "pos": [
        52097,
        52244
      ]
    },
    {
      "content": "Examine the SQL Azure DB",
      "pos": [
        52249,
        52273
      ]
    },
    {
      "pos": [
        52278,
        52351
      ],
      "content": "In Visual Studio, open <bpt id=\"p1\">**</bpt>Server Explorer<ept id=\"p1\">**</ept> and navigate to <bpt id=\"p2\">**</bpt>ContactDB<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        52355,
        52592
      ],
      "content": "Right-click on **ContactDB** and select **Open in SQL Server Object Explorer**.  \n ![Open in SQL Server Object Explorer menu item](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms32.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Right-click on <bpt id=\"p1\">**</bpt>ContactDB<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>Open in SQL Server Object Explorer<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            79
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>Open in SQL Server Object Explorer menu item<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms32.png)</ph>",
          "pos": [
            82,
            234
          ]
        }
      ]
    },
    {
      "pos": [
        52598,
        53204
      ],
      "content": "If the **Add Firewall Rule** dialog box is displayed, select **Add Firewall Rule**.  \n   If you can't expand **SQL Databases** and can't see **ContactDB** from Visual Studio, you can follow the instructions to open a firewall port or a range of ports. To do this, follow the instructions under **Set up Azure firewall rules** near the end of the [MVC tutorial](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md). As an alternative, you can also review the data of the local database by building, running, and adding data to the application locally (**CTRL+F5** from Visual Studio).",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "If the <bpt id=\"p1\">**</bpt>Add Firewall Rule<ept id=\"p1\">**</ept> dialog box is displayed, select <bpt id=\"p2\">**</bpt>Add Firewall Rule<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            83
          ]
        },
        {
          "content": "   If you can't expand **SQL Databases** and can't see **ContactDB** from Visual Studio, you can follow the instructions to open a firewall port or a range of ports. To do this, follow the instructions under **Set up Azure firewall rules** near the end of the [MVC tutorial](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md). As an alternative, you can also review the data of the local database by building, running, and adding data to the application locally (**CTRL+F5** from Visual Studio).",
          "pos": [
            86,
            603
          ],
          "nodes": [
            {
              "content": "If you can't expand <bpt id=\"p1\">**</bpt>SQL Databases<ept id=\"p1\">**</ept> and can't see <bpt id=\"p2\">**</bpt>ContactDB<ept id=\"p2\">**</ept> from Visual Studio, you can follow the instructions to open a firewall port or a range of ports.",
              "pos": [
                3,
                165
              ]
            },
            {
              "content": "To do this, follow the instructions under <bpt id=\"p1\">**</bpt>Set up Azure firewall rules<ept id=\"p1\">**</ept> near the end of the <bpt id=\"p2\">[</bpt>MVC tutorial<ept id=\"p2\">](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md)</ept>.",
              "pos": [
                166,
                348
              ]
            },
            {
              "content": "As an alternative, you can also review the data of the local database by building, running, and adding data to the application locally (<bpt id=\"p1\">**</bpt>CTRL+F5<ept id=\"p1\">**</ept> from Visual Studio).",
              "pos": [
                349,
                517
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        53211,
        53678
      ],
      "content": "If the **Connect to Server** dialog box is displayed, enter the **password** you created at the beginning of this tutorial and press the **Connect** button.  \n   If you don't recall the password, you can find it in your local project file. In **Solution Explorer**, expand the *Properties* folder and then expand the *PublishProfiles* folder. Open the *contactmanager.pubxml* file (your file may be named differently). Search the file for your publishing password.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "If the <bpt id=\"p1\">**</bpt>Connect to Server<ept id=\"p1\">**</ept> dialog box is displayed, enter the <bpt id=\"p2\">**</bpt>password<ept id=\"p2\">**</ept> you created at the beginning of this tutorial and press the <bpt id=\"p3\">**</bpt>Connect<ept id=\"p3\">**</ept> button.",
          "pos": [
            0,
            156
          ]
        },
        {
          "content": "   If you don't recall the password, you can find it in your local project file. In **Solution Explorer**, expand the *Properties* folder and then expand the *PublishProfiles* folder. Open the *contactmanager.pubxml* file (your file may be named differently). Search the file for your publishing password.",
          "pos": [
            159,
            464
          ],
          "nodes": [
            {
              "content": "If you don't recall the password, you can find it in your local project file.",
              "pos": [
                3,
                80
              ]
            },
            {
              "content": "In <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept>, expand the <bpt id=\"p2\">*</bpt>Properties<ept id=\"p2\">*</ept> folder and then expand the <bpt id=\"p3\">*</bpt>PublishProfiles<ept id=\"p3\">*</ept> folder.",
              "pos": [
                81,
                183
              ]
            },
            {
              "content": "Open the <bpt id=\"p1\">*</bpt>contactmanager.pubxml<ept id=\"p1\">*</ept> file (your file may be named differently).",
              "pos": [
                184,
                259
              ]
            },
            {
              "content": "Search the file for your publishing password.",
              "pos": [
                260,
                305
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        53683,
        53744
      ],
      "content": "Expand the <bpt id=\"p1\">**</bpt>contactDB<ept id=\"p1\">**</ept> database and then expand <bpt id=\"p2\">**</bpt>Tables<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        53748,
        54161
      ],
      "content": "Right-click the **dbo.AspNetUsers** table and select **View Data**.  \n ![View Data menu item](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms34.png)  \n You can view the data associated with the canEditUser@contoso.com user.  \n ![ContactManager window](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms35.png)",
      "leadings": [
        "",
        "   ",
        "   ",
        "   "
      ],
      "nodes": [
        {
          "content": "Right-click the <bpt id=\"p1\">**</bpt>dbo.AspNetUsers<ept id=\"p1\">**</ept> table and select <bpt id=\"p2\">**</bpt>View Data<ept id=\"p2\">**</ept>.",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>View Data menu item<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms34.png)</ph>",
          "pos": [
            70,
            197
          ]
        },
        {
          "content": "You can view the data associated with the canEditUser@contoso.com user.",
          "pos": [
            201,
            272
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>ContactManager window<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms35.png)</ph>",
          "pos": [
            275,
            404
          ]
        }
      ]
    },
    {
      "content": "Add a User to the Admin Role by Editing the Database",
      "pos": [
        54168,
        54220
      ]
    },
    {
      "content": "Earlier in the tutorial you used code to add users to the canEdit role.",
      "pos": [
        54222,
        54293
      ]
    },
    {
      "content": "An alternative method is to directly manipulate the data in the membership tables.",
      "pos": [
        54294,
        54376
      ]
    },
    {
      "content": "The following steps show how to use this alternate method to add a user to a role.",
      "pos": [
        54377,
        54459
      ]
    },
    {
      "pos": [
        54464,
        54695
      ],
      "content": "In **SQL Server Object Explorer**, right click on **dbo.AspNetUserRoles** and select **View Data**.\n ![AspNetUserRoles data](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms36.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "In <bpt id=\"p1\">**</bpt>SQL Server Object Explorer<ept id=\"p1\">**</ept>, right click on <bpt id=\"p2\">**</bpt>dbo.AspNetUserRoles<ept id=\"p2\">**</ept> and select <bpt id=\"p3\">**</bpt>View Data<ept id=\"p3\">**</ept>.",
          "pos": [
            0,
            99
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>AspNetUserRoles data<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms36.png)</ph>",
          "pos": [
            100,
            228
          ]
        }
      ]
    },
    {
      "pos": [
        54701,
        54891
      ],
      "content": "Copy the *RoleId* and paste it into the empty (new) row.  \n ![AspNetUserRoles data](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms37.png)",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "Copy the <bpt id=\"p1\">*</bpt>RoleId<ept id=\"p1\">*</ept> and paste it into the empty (new) row.",
          "pos": [
            0,
            56
          ]
        },
        {
          "content": "<ph id=\"ph1\"> ![</ph>AspNetUserRoles data<ph id=\"ph2\">](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms37.png)</ph>",
          "pos": [
            59,
            187
          ]
        }
      ]
    },
    {
      "pos": [
        54897,
        54999
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>dbo.AspNetUsers<ept id=\"p1\">**</ept> table, find the user you want to put in the role, and copy the user's <bpt id=\"p2\">*</bpt>Id<ept id=\"p2\">*</ept>."
    },
    {
      "pos": [
        55003,
        55099
      ],
      "content": "Paste the copied <bpt id=\"p1\">*</bpt>Id<ept id=\"p1\">*</ept> into the <bpt id=\"p2\">**</bpt>UserId<ept id=\"p2\">**</ept> field of the new row in the <bpt id=\"p3\">**</bpt>AspNetUserRoles<ept id=\"p3\">**</ept> table."
    },
    {
      "content": "We are working on a tool that will make managing users and roles much easier.",
      "pos": [
        55119,
        55196
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        55202,
        55212
      ]
    },
    {
      "content": "For more information about ASP.NET Web Forms, see <bpt id=\"p1\">[</bpt>Learn About ASP.NET Web Forms<ept id=\"p1\">](http://www.asp.net/web-forms)</ept> on the ASP.NET web app and <bpt id=\"p2\">[</bpt>Microsoft Azure Tutorials and Guides<ept id=\"p2\">](http://azure.microsoft.com/documentation/services/web-sites/#net)</ept>.",
      "pos": [
        55213,
        55457
      ]
    },
    {
      "pos": [
        55459,
        55843
      ],
      "content": "This tutorial was based on the MVC tutorial <bpt id=\"p1\">[</bpt>Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service<ept id=\"p1\">](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md)</ept> written by Rick Anderson (Twitter <bpt id=\"p2\">[</bpt>@RickAndMSFT<ept id=\"p2\">](https://twitter.com/RickAndMSFT)</ept>) with assistance from Tom Dykstra and Barry Dorrans (Twitter <bpt id=\"p3\">[</bpt>@blowdart<ept id=\"p3\">](https://twitter.com/blowdart)</ept>)."
    },
    {
      "content": "Please leave feedback about what you liked and what you would like to see improved, not only about the tutorial itself but also about the products that it demonstrates.",
      "pos": [
        55846,
        56014
      ]
    },
    {
      "content": "Your feedback will help us prioritize improvements.",
      "pos": [
        56015,
        56066
      ]
    },
    {
      "content": "You can also request and vote on new topics at <bpt id=\"p1\">[</bpt>Show Me How With Code<ept id=\"p1\">](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code)</ept>.",
      "pos": [
        56067,
        56203
      ]
    },
    {
      "content": "test",
      "pos": [
        56208,
        56212
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Create and deploy a secure ASP.NET Web Forms app with Membership, OAuth, and SQL Database to Azure App Service\" \n    description=\"This tutorial shows you how to build a secure ASP.NET 4.5 Web Forms web app that incorporates a SQL Database and deploy the application to Azure.\" \n    services=\"app-service\\web\" \n    documentationCenter=\".net\" \n    authors=\"Erikre\" \n    manager=\"wpickett\" \n    editor=\"jimbe\"/>\n\n<tags \n    ms.service=\"app-service-web\" \n    ms.workload=\"web\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"dotnet\" \n    ms.topic=\"article\" \n    ms.date=\"08/06/2015\" \n    ms.author=\"erikre\"/>\n\n\n# Create and deploy a secure ASP.NET Web Forms app with Membership, OAuth, and SQL Database to Azure App Service\n\n##Overview\nThis tutorial shows you how to build a secure ASP.NET 4.5 Web Forms web app that incorporates a SQL Database and deploy the application to Azure. \n\n>[AZURE.NOTE] \nFor an MVC version of this tutorial, see [Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md).\n\nYou can open an Azure account for free, and if you don't already have Visual Studio 2013, the SDK automatically installs Visual Studio 2013 for Web Express. You can start developing for Azure for free.\n\nThis tutorial assumes that you have no prior experience using Microsoft Azure. Once completing this tutorial, you'll have a web application up and running in the cloud that uses a cloud database.\n\nYou'll learn:\n\n- How to create an ASP.NET 4.5 Web Forms project and publish it to Azure App Service.\n- How to use OAuth and the ASP.NET membership to secure your application.\n- How to use a single database for both membership and application data.\n- How to use Web Forms Scaffolding to create web pages that allow you to modify data.\n- How to use the new membership API to add users and roles.\n- How to use a SQL database to store data in Azure.\n\nYou'll build a simple contact list web application that is built on ASP.NET 4.5 Web Forms and uses the Entity Framework for database access. The following image shows the Web Forms page that allows read and write access to the database:\n\n![Contacts - Edit Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms00.png)\n\n>[AZURE.NOTE] \nTo complete this tutorial, you need an Azure account. If you don't have an account, you can <a href=\"/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F\" target=\"_blank\">activate your MSDN subscriber benefits</a> or <a href=\"/pricing/free-trial/?WT.mc_id=A261C142F\" target=\"_blank\">sign up for a free trial</a>. If you want to get started with Azure before signing up for an account, go to [Try App Service](https://tryappservice.azure.com/), where you can immediately create a short-lived ASP.NET starter site in Azure for free. No credit card required, no commitments.\n\n##Set up the Development Environment \nTo start, set up your development environment by installing the Visual Studio 2013 and the Azure SDK for .NET.\n\n1. Install [Visual Studio 2013](http://go.microsoft.com/fwlink/?LinkId=306566), if you don't already have it installed.  \n2. Install [Azure SDK for Visual Studio 2013](http://go.microsoft.com/fwlink/?linkid=324322&clcid=0x409). This tutorial requires Visual Studio 2013 before installing the Azure SDK for Visual Studio 2013. Depending on how many of the SDK dependencies you already have on your machine, installing the SDK could take a long time, from several minutes to a half hour or more.  \n\n3. If you are prompted to run or save the installation executable, click **Run**.\n4. In the **Web Platform Installer** window, click **Install** and proceed with the installation.  \n    ![Web Platform Installer](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-01.png)  \n\n      If you already have the SDK installed, there will be 0 items to be installed. The number of items to install will be noted at the lower left of the **Web Platform Installer** window.  \n\n5. If you don't already have **Visual Studio Update 2**, download and install **[Visual Studio 2013 Update 2](http://www.microsoft.com/download/details.aspx?id=42666)** or higher.  \n\n    >[AZURE.NOTE]  \n    You must install Visual Studio 2013 Update 2 or higher to use Goggle OAuth 2.0 and to use SSL locally without warnings. Also, you need Update 2 to use Web Forms Scaffolding.  \n\nWhen the installation is complete, you have everything necessary to start developing.\n\n##Set up the Azure Environment\nIn this section you'll set up the Azure environment by creating an Azure and a SQL database in Azure.\n\n###Create a Web App and a SQL Database in Azure \nIn this tutorial your web app will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other web apps in Azure App Service. A shared hosting environment is a low-cost way to get started in the cloud. Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs. If you need a more complex architecture, you can migrate to an Azure Cloud Service. Cloud services run on dedicated VMs that you can configure according to your needs. \n\nAzure SQL Database is a cloud-based relational database service that is built on SQL Server technologies. The tools and applications that work with SQL Server also work with SQL Database.\n\n1. In the [Azure Management Portal](https://manage.windowsazure.com/), click **Web Apps** in the left tab, and then click **New**.  \n    ![Web Platform Installer](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-02.png)\n2. Click **Web App**, and then click **Custom Create**.  \n    ![Custom Create](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-03.png)  \n    The **New Web App - Custom Create** wizard opens.  \n\n3. In the **Create Web App** step of the wizard, enter a string in the **URL** box to use as the unique URL for your application. The complete URL will consist of what you enter here plus the suffix that you see next to the text box. The illustration shows a URL that is probably taken so **you must choose a different URL**.  \n    ![Contacts - Create New Web Site](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-04.png)  \n4. In the Web Hosting Plan drop-down list, choose a region that is closest to your location. This setting specifies which data center where your VM will run.\n5. In the **Database** drop-down list, choose **Create a free 20 MB SQL database**.\n6. In the **DB Connection String Name** box, leave the default value of *DefaultConnection*.\n7. Click the arrow at the bottom of the box. \nThe wizard advances to the **Specify database settings** step.\n8. In the **Name** box, enter *`ContactDB`*.  \n    ![Database Settings](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/Intro-SecureWebForms-05.png)  \n9. In the **Server** box, select **New SQL Database** server.\nAlternatively, if you previously created a SQL Server database, you can select that SQL Server from the dropdown control.\n10. Set the **Region** to the same area you created the web app.\n11. Enter an administrator **Login Name** and **Password**. \nIf you selected **New SQL Database server** you aren't entering an existing name and password here, you're entering a new name and password that you're defining now to use later when you access the database. If you selected a SQL Server you've created previously, you'll be prompted for the password to the previous SQL Server account name you created. For this tutorial, you won't check the **Advanced** box.\n12. Click the check mark at the bottom right of the box to indicate you're finished.\n\nThe **Azure Management Portal** returns to the **Web Apps** page, and the **Status** column shows that the site is being created. Shortly after (typically less than a minute), the **Status** column shows that the site was successfully created. In the navigation bar at the left, the number of sites you have in your account appears next to the **Web App** icon, and the number of databases appears next to the **SQL Databases** icon.\n##Create an ASP.NET Web Forms Application \nYou have created a web app, but there is no content in it yet. Your next step is to create the Visual Studio web app that you'll publish to Azure.\n###Create the Project \n1. Select **New Project** from the **File** menu in Visual Studio.  \n    ![File Menu - New Project](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms01.png)  \n2. Select the **Templates** -> **Visual C#** -> **Web** templates group on the left. \n3. Choose the **ASP.NET Web Application** template in the center column.\n4. Name your project *ContactManager* and click **OK**.  \n    ![New Project Dialog](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms02.png)  \n\n      The name of the project in this tutorial series is **ContactManager**. It is recommended that you use this exact project name so that the code provided throughout the tutorial series functions as expected.  \n\n5. In the **New ASP.NET Project** dialog box, select the **Web Forms** template. Uncheck the **Host in the cloud** check box if it is selected and click **OK**.  \n    ![New ASP.NET Project dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms03.png)  \n    The Web Forms application will be created.\n\n###Update the Master Page\nIn ASP.NET Web Forms, master pages allow you to create a consistent layout for the pages in your application. A single master page defines the look and feel and standard behavior that you want for all of the pages (or a group of pages) in your application. You can then create individual content pages that contain the content you want to display. When users request the content pages, ASP.NET merges them with the master page to produce output that combines the layout of the master page with the content from the content page.\nThe new site needs the application name and a link updated. The link will point to a page that will display contact details. To make these changes you will modify the HTML on the master page. \n\n1. In **Solution Explorer**, find and open the *Site.Master* page. \n2. If the page is in **Design** view, switch to **Source** view.\n3. Update the master page by modifying or adding markup so that the markup for the page appears as follows:\n\n        <%@ Master Language=\"C#\" AutoEventWireup=\"true\" CodeBehind=\"Site.master.cs\" Inherits=\"ContactManager.SiteMaster\" %>\n        \n        <!DOCTYPE html>\n        \n        <html lang=\"en\">\n        <head runat=\"server\">\n            <meta charset=\"utf-8\" />\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n            <title><%: Page.Title %> - Contact Manager</title>\n        \n            <asp:PlaceHolder runat=\"server\">\n                <%: Scripts.Render(\"~/bundles/modernizr\") %>\n            </asp:PlaceHolder>\n            <webopt:bundlereference runat=\"server\" path=\"~/Content/css\" />\n            <link href=\"~/favicon.ico\" rel=\"shortcut icon\" type=\"image/x-icon\" />\n        \n        </head>\n        <body>\n            <form runat=\"server\">\n                <asp:ScriptManager runat=\"server\">\n                    <Scripts>\n                        <%--To learn more about bundling scripts in ScriptManager see http://go.microsoft.com/fwlink/?LinkID=301884 --%>\n                        <%--Framework Scripts--%>\n                        <asp:ScriptReference Name=\"MsAjaxBundle\" />\n                        <asp:ScriptReference Name=\"jquery\" />\n                        <asp:ScriptReference Name=\"bootstrap\" />\n                        <asp:ScriptReference Name=\"respond\" />\n                        <asp:ScriptReference Name=\"WebForms.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/WebForms.js\" />\n                        <asp:ScriptReference Name=\"WebUIValidation.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/WebUIValidation.js\" />\n                        <asp:ScriptReference Name=\"MenuStandards.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/MenuStandards.js\" />\n                        <asp:ScriptReference Name=\"GridView.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/GridView.js\" />\n                        <asp:ScriptReference Name=\"DetailsView.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/DetailsView.js\" />\n                        <asp:ScriptReference Name=\"TreeView.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/TreeView.js\" />\n                        <asp:ScriptReference Name=\"WebParts.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/WebParts.js\" />\n                        <asp:ScriptReference Name=\"Focus.js\" Assembly=\"System.Web\" Path=\"~/Scripts/WebForms/Focus.js\" />\n                        <asp:ScriptReference Name=\"WebFormsBundle\" />\n                        <%--Site Scripts--%>\n                    </Scripts>\n                </asp:ScriptManager>\n        \n                <div class=\"navbar navbar-inverse navbar-fixed-top\">\n                    <div class=\"container\">\n                        <div class=\"navbar-header\">\n                            <button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\">\n                                <span class=\"icon-bar\"></span>\n                                <span class=\"icon-bar\"></span>\n                                <span class=\"icon-bar\"></span>\n                            </button>\n                            <a class=\"navbar-brand\" runat=\"server\" id=\"ContactDemoLink\" href=\"~/Contacts/Default.aspx\">Contact Demo</a>\n                        </div>\n                        <div class=\"navbar-collapse collapse\">\n                            <ul class=\"nav navbar-nav\">\n                                <li><a runat=\"server\" href=\"~/\">Home</a></li>\n                                <li><a runat=\"server\" href=\"~/About\">About</a></li>\n                                <li><a runat=\"server\" href=\"~/Contact\">Contact</a></li>\n                            </ul>\n                            <asp:LoginView runat=\"server\" ViewStateMode=\"Disabled\">\n                                <AnonymousTemplate>\n                                    <ul class=\"nav navbar-nav navbar-right\">\n                                        <li><a runat=\"server\" href=\"~/Account/Register\">Register</a></li>\n                                        <li><a runat=\"server\" href=\"~/Account/Login\">Log in</a></li>\n                                    </ul>\n                                </AnonymousTemplate>\n                                <LoggedInTemplate>\n                                    <ul class=\"nav navbar-nav navbar-right\">\n                                        <li><a runat=\"server\" href=\"~/Account/Manage\" title=\"Manage your account\">Hello, <%: Context.User.Identity.GetUserName()  %> !</a></li>\n                                        <li>\n                                            <asp:LoginStatus runat=\"server\" LogoutAction=\"Redirect\" LogoutText=\"Log off\" LogoutPageUrl=\"~/\" OnLoggingOut=\"Unnamed_LoggingOut\" />\n                                        </li>\n                                    </ul>\n                                </LoggedInTemplate>\n                            </asp:LoginView>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"container body-content\">\n                    <asp:ContentPlaceHolder ID=\"MainContent\" runat=\"server\">\n                    </asp:ContentPlaceHolder>\n                    <hr />\n                    <footer>\n                        <p>&copy; <%: DateTime.Now.Year %> - Contact Manager</p>\n                    </footer>\n                </div>\n            </form>\n        </body>\n        </html>\n\n    Later in this tutorial you will add Web Forms scaffolding. Scaffolding will create the page that the above “Contact Demo” link references.\n \n###Run the Application Locally \n \n1. In **Solution Explorer**, right-click the *Default.aspx* page and select **Set As Start Page**. \n2. Next, press **CTRL+F5** to run the application.  \n    The application default page appears in the default browser window.\n    ![Contacts - Create New Web Site](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms04.png)  \n\nThis is all you need to do for now to create the application that you'll deploy to Azure. Later, you'll add database functionality, as well as the necessary pages to display and edit contact data.\n###Deploy the Application to Azure\nNow that you have created and ran your application locally, it is time to deploy the application to Azure.\n\n1. In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.  \n    ![Select Publish](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms05.png)  \n    The **Publish Web** dialog box is displayed.  \n\n2. In the **Profile** tab of the **Publish Web** dialog box, click **Azure Web App**.  \n      \n3. If you are not already signed in, click the **Sign In** button in the **Select Existing Web App** dialog box. Once you've finished signing in, select the web app you created in the first part of this tutorial. Click **OK** to continue.  \n    ![Select Existing Web Site dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms07.png)  \nVisual Studio will download your publishing settings.\n4. In the **Publish Web** dialog box, click **Publish**.  \n    ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms08.png)  \nYou will see the overall publishing status in the **Web Publish Activity** window within Visual Studio:  \n    ![Web Publishing Activity](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms09.png)  \n\nThe application you created is now running in the cloud. The next time you deploy the application from Visual Studio, only the changed (or new) files will be deployed.  \n    ![App in Browser](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms10.png)  \n\n>[AZURE.NOTE] \nIf you run into an error while publishing to an already established web app, you can clear the location before adding your new files.  \nPublish your application again, however in the **Publish Web** dialog box, select the **Settings** tab. Then, set the configuration to **Debug** and select the option to **Remove additional files at destination**. Select **Publish** to deploy your application again.  \n    ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms11.png)  \n\n##Add a Database to the Application \nNext, you'll update the Web Forms application to add the capability to display and update contacts, as well as store the data in the default database. When you created the Web Forms project, the database was also created by default. The application will use Entity Framework to access the database and to read and update data in the database.\n###Add a Data Model Class \nYou begin by creating a simple data model using code. This data model will be contained in a class called `Contacts`. The `Contacts` class name was chosen to avoid a class name conflict with the `Contact` class contained in the Contact.aspx.cs file created by the Web Forms template.  \n\n1. In **Solution Explorer**, right-click the *Models* folder and then select **Add** -> **Class**.  \n    ![Select Class](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms12.png)  \n    The **Add New Item** dialog box is displayed.  \n\n2. Name this new class *Contacts.cs*.  \n    ![Add New Item dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13.png)  \n3. Replace the default code with the following code:  \n\n        using System.ComponentModel.DataAnnotations;\n        using System.Globalization;\n        \n        namespace ContactManager.Models\n        {\n            public class Contacts\n            {\n                [ScaffoldColumn(false)]\n                [Key]\n                public int ContactId { get; set; }\n                public string Name { get; set; }\n                public string Address { get; set; }\n                public string City { get; set; }\n                public string State { get; set; }\n                public string Zip { get; set; }\n                [DataType(DataType.EmailAddress)]\n                public string Email { get; set; }\n            }\n        }\n\nThe **Contacts** class defines the data that you will store for each contact, plus a primary key (`ContactID`) that is needed by the database. The **Contacts** class represents the contact data that will be displayed. Each instance of a Contacts object will correspond to a row within a relational database table, and each property of the Contacts class will map to a column in the relational database table. Later in this tutorial, you'll review the contact data contained in the database.\n\n###Web Forms Scaffolding \nYou've created the **Contacts** model class above. Now, you can use the Web Forms Scaffolder to generate *List*, *Insert*, *Edit* and *Delete* pages that are used when working with this data. The Web Forms Scaffolder uses Entity Framework, Bootstrap, and Dynamic Data. By default, the Web Forms Scaffolder is installed as an extension to your project as part of the project template when using Visual Studio 2013.\n\nThe following steps will allow you to use the Web Forms Scaffolder.\n\n1. In Visual Studio, from the menu bar select **Tools** -> **Extensions and Updates**.  \n    The **Extensions and Updates** dialog box is displayed.\n2. From the left pane of the dialog box, select **Online** -> **Visual Studio Gallery** -> **Tools** -> **Scaffolding**.\n3. If you don't see 'Web Forms Scaffolding' in the list, enter 'Web Forms Scaffolding' in the search box on the right of the dialog box.  \n4. If the Web Forms Scaffolder is not already installed, select **Download** to download and install 'Web Forms Scaffolding'. Restart Visual Studio if needed. Be sure to save your changes to the project when requested.  \n    ![Extensions and Updates dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/ExtensionsAndUpdatesDB.png)  \n5. Build the project (**Ctrl+Shift+B**).  \n    You must build the project before using the scaffolding mechanism.  \n6. In **Solution Explorer**, right-click the *project* and then select **Add** -> **New Scaffolded Item**.  \n    The **Add Scaffold** dialog box is displayed.\n7. Select **Web Forms** from the left pane and select **Web Forms Pages using Entity Framework** from the center pane. Then click **Add**.  \n    ![Add Scaffold dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13a.png)  \n    The **Add Web Forms Pages** dialog box is displayed.  \n\n8. In the **Add Web Forms Pages** dialog box, set the **Model class** to `Contacts (ContactManager.Models)`. Set the **Data context class** to `ApplicationDbContext (ContactManager.Models)`. Then click **Add**. \n    ![Add Web Forms Pages dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13b.png)  \n\nThe Web Forms Scaffolder adds a new folder that contains *Default.aspx*, *Delete.aspx*, *Edit.aspx*, and *Insert.aspx* pages. The Web Forms Scaffolder also creates a *DynamicData* folder that contains an *EntityTemplates* folder and a *FieldTemplates* folder. The `ApplicationDbContext` will be used for both the membership database and the contact data.\n\n###Configure the Application to use the Data Model \nThe next task is to enable the Code First Migrations feature in order to create the database based on the data model you created. Also, you will add sample data and a data initializer.  \n\n1. In the **Tools** menu, select **NuGet Package Manager** and then **Package Manager Console**.  \n    ![Add Web Forms Pages dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13c.png)  \n2. In the Package Manager Console window, enter the following command:  \n\n        enable-migrations\n \n    The enable-migrations command creates a *Migrations* folder, and it puts in that folder a *Configuration.cs* file that you can edit to seed the database and configure data migrations.  \n3. In the **Package Manager Console** window, enter the following command:  \n\n        add-migration Initial\n\n    The `add-migration Initial` command generates a file named <date_stamp>Initial in the *Migrations* folder that creates the database. The first parameter ( Initial ) is arbitrary and is used to create the name of the file. You can see the new class files in **Solution Explorer**. In the `Initial` class, the `Up` method creates the `Contact` table, and the `Down` method (used when you want to return to the previous state) drops it.  \n4. Open the *Migrations\\Configuration.cs* file. \n\n5. Add the following namespace:  \n\n        using ContactManager.Models;\n\n6. Replace the `Seed` method with the following code:  \n\n        protected override void Seed(ContactManager.Models.ApplicationDbContext context)\n        {\n            context.Contacts.AddOrUpdate(p => p.Name,\n               new Contacts\n               {\n                   ContactId = 1,\n                   Name = \"Ivan Irons\",\n                   Address = \"One Microsoft Way\",\n                   City = \"Redmond\",\n                   State = \"WA\",\n                   Zip = \"10999\",\n                   Email = \"ivani@wideworldimporters.com\",\n               },\n               new Contacts\n                {\n                    ContactId = 2,\n                    Name = \"Brent Scholl\",\n                    Address = \"5678 1st Ave W\",\n                    City = \"Redmond\",\n                    State = \"WA\",\n                    Zip = \"10999\",\n                    Email = \"brents@wideworldimporters.com\",\n                },\n                new Contacts\n                {\n                    ContactId = 3,\n                    Name = \"Terrell Bettis\",\n                    Address = \"9012 State St\",\n                    City = \"Redmond\",\n                    State = \"WA\",\n                    Zip = \"10999\",\n                    Email = \"terrellb@wideworldimporters.com\",\n                },\n                new Contacts\n                {\n                    ContactId = 4,\n                    Name = \"Jo Cooper\",\n                    Address = \"3456 Maple St\",\n                    City = \"Redmond\",\n                    State = \"WA\",\n                    Zip = \"10999\",\n                    Email = \"joc@wideworldimporters.com\",\n                },\n                new Contacts\n                {\n                    ContactId = 5,\n                    Name = \"Ines Burnett\",\n                    Address = \"7890 2nd Ave E\",\n                    City = \"Redmond\",\n                    State = \"WA\",\n                    Zip = \"10999\",\n                    Email = \"inesb@wideworldimporters.com\",\n                }\n                );\n        }\n\n    This code initializes (seeds) the database with the contact information. For more information on seeding the database, see [Seeding and Debugging Entity Framework (EF) DBs](http://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx).  \n7. In the **Package Manager Console** enter the command:  \n\n        update-database\n\nThe `update-database` runs the first migration which creates the database. By default, the database is created as a SQL Server Express LocalDB database.  \n    ![Package Manager Console](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms13d.png)  \n\n###Run the Application Locally and Display the Data \nRun the application now to see how you can view the contacts.\n\n1. First, build the project (**Ctrl+Shift+B**).  \n2. Press **Ctrl+F5** to run the application.  \n    The browser will open and show the *Default.aspx* page.\n3. Select the **Contact Demo** link at the top of the page to display the *Contact List* page.  \n    ![Contacts List Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms17.png)  \n\n##Enable SSL for the Project \nSecure Sockets Layer (SSL) is a protocol defined to allow Web servers and Web clients to communicate more securely through the use of encryption. When SSL is not used, data sent between the client and server is open to packet sniffing by anyone with physical access to the network. Additionally, several common authentication schemes are not secure over plain HTTP. In particular, Basic authentication and forms authentication send unencrypted credentials. To be secure, these authentication schemes must use SSL.\n\n1. In **Solution Explorer**, click the **ContactManager** project, then press **F4** to display the **Properties** window. \n2. Change **SSL Enabled** to `true`. \n3. Copy the **SSL URL** so you can use it later.  \n    The SSL URL will be `https://localhost:44300/` unless you've previously created SSL web app (as shown below).\n    ![Project Properties](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms18.png)  \n4. In **Solution Explorer**, right click the **Contact Manager** project and click **Properties**.\n5. In the left tab, click **Web**.\n6. Change the **Project Url** to use the **SSL URL** that you saved earlier.  \n    ![Project Web Properties](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms19.png)  \n7. Save the page by pressing **CTRL+S**.\n8. Press **Ctrl+F5** to run the application.  \nVisual Studio will display an option to allow you to avoid SSL warnings.  \n9. Click **Yes** to trust the IIS Express SSL certificate and continue.  \n    ![IIS Express SSL certificate details](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms20.png)  \n    A Security Warning is displayed.  \n\n10. Click **Yes** to install the certificate to your localhost.  \n    ![Security Warning dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21.png)  \n    The browser window will be displayed.  \n\nYou can easily test your Web application locally using SSL.\n\n\n\n##Add an OAuth 2.0 Provider \nASP.NET Web Forms provides enhanced options for membership and authentication. These enhancements include OAuth. OAuth is an open protocol that allows secure authorization in a simple and standard method from web, mobile, and desktop applications. The ASP.NET MVC internet template uses OAuth to expose Facebook, Twitter, Google and Microsoft as authentication providers. Although this tutorial uses only Google as the authentication provider, you can easily modify the code to use any of the providers. The steps to implement other providers are very similar to the steps you will see in this tutorial. \n\nIn addition to authentication, the tutorial will also use roles to implement authorization. Only those users you add to the `canEdit` role will be able to change data (create, edit, or delete contacts). \n\nThe following steps will allow you to add a Google authentication provider.\n\n1. Open the *App_Start\\Startup.Auth.cs* file. \n2. Remove the comment characters from the `app.UseGoogleAuthentication()` method so that the method appears as follows:  \n\n        app.UseGoogleAuthentication(new GoogleOAuth2AuthenticationOptions()\n        {\n            ClientId = \"\",\n            ClientSecret = \"\"\n        });\n\n3. Navigate to the [Google Developers Console](https://console.developers.google.com/). You will also need to sign-in with your Google developer email account (gmail.com). If you do not have a Google account, select the **Create an account** link.  \n    Next, you'll see the **Google Developers Console**.\n    ![Google Developers Console](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21a.png)  \n\n4. Click the **Create Project** button and enter a project name and ID (you can use the default values). Then, click the **agreement checkbox** and the **Create** button.  \n    ![Google - New Project](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21b.png)  \n    In a few seconds the new project will be created and your browser will display the new projects page.\n5. In the left tab, click **APIs & auth**, and then click **Credentials**.\n6. Click the **Create New Client ID** under **OAuth**.  \n    The **Create Client ID** dialog will be displayed.\n    ![Google - Create Client ID](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21c.png)  \n7. In the **Create Client ID** dialog, keep the default **Web application** for the application type.  \n8. Set the **Authorized JavaScript Origins** to the SSL URL you used earlier in this tutorial (**https://localhost:44300/** unless you've created other SSL projects).  \n    This URL is the origin for your application. For this sample, you will only enter the localhost test URL. However, you can enter multiple URL to account for localhost and production.  \n\n9. Set the **Authorized Redirect URI** to the following:  \n\n        https://localhost:44300/signin-google  \n\n    This value is the URI that ASP.NET OAuth users to communicate with the google OAuth server. Remember to the SSL URL you used above (**https://localhost:44300/** unless you've created other SSL projects). \n \n10. Click the **Create Client ID** button.\n11. In Visual Studio, update the `UseGoogleAuthentication` method of the *Startup.Auth.cs* page by copying and pasting the **AppId** and **App Secret** into the method. The **AppId** and **App Secret** values shown below are samples and will not work.  \n\n        using System;\n        using Microsoft.AspNet.Identity;\n        using Microsoft.AspNet.Identity.EntityFramework;\n        using Microsoft.AspNet.Identity.Owin;\n        using Microsoft.Owin;\n        using Microsoft.Owin.Security.Cookies;\n        using Microsoft.Owin.Security.DataProtection;\n        using Microsoft.Owin.Security.Google;\n        using Owin;\n        using ContactManager.Models;\n        \n        namespace ContactManager\n        {\n            public partial class Startup {\n        \n                // For more information on configuring authentication, please visit http://go.microsoft.com/fwlink/?LinkId=301883\n                public void ConfigureAuth(IAppBuilder app)\n                {\n                    // Configure the db context and user manager to use a single instance per request\n                    app.CreatePerOwinContext(ApplicationDbContext.Create);\n                    app.CreatePerOwinContext(ApplicationUserManager.Create);\n        \n                    // Enable the application to use a cookie to store information for the signed in user\n                    // and to use a cookie to temporarily store information about a user logging in with a third party login provider\n                    // Configure the sign in cookie\n                    app.UseCookieAuthentication(new CookieAuthenticationOptions\n                    {\n                        AuthenticationType = DefaultAuthenticationTypes.ApplicationCookie,\n                        LoginPath = new PathString(\"/Account/Login\"),\n                        Provider = new CookieAuthenticationProvider\n                        {\n                            OnValidateIdentity = SecurityStampValidator.OnValidateIdentity(\n                                validateInterval: TimeSpan.FromMinutes(20),\n                                regenerateIdentity: (manager, user) => user.GenerateUserIdentityAsync(manager))\n                        }\n                    });\n                    // Use a cookie to temporarily store information about a user logging in with a third party login provider\n                    app.UseExternalSignInCookie(DefaultAuthenticationTypes.ExternalCookie);\n        \n                    // Uncomment the following lines to enable logging in with third party login providers\n                    //app.UseMicrosoftAccountAuthentication(\n                    //    clientId: \"\",\n                    //    clientSecret: \"\");\n        \n                    //app.UseTwitterAuthentication(\n                    //   consumerKey: \"\",\n                    //   consumerSecret: \"\");\n        \n                    //app.UseFacebookAuthentication(\n                    //   appId: \"\",\n                    //   appSecret: \"\");\n        \n                    app.UseGoogleAuthentication(new GoogleOAuth2AuthenticationOptions()\n                    {\n                        ClientId = \"000000000000.apps.googleusercontent.com\",\n                        ClientSecret = \"00000000000\"\n                    });\n                }\n            }\n        }\n\n12. Press **CTRL+F5** to build and run the application. Click the **Log in** link.\n13. Under **Use another service to log in**, click **Google**.  \n    ![Log in](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21d.png)  \n14. If you need to enter your credentials, you will be redirected to the google site where you will enter your credentials.  \n    ![Google - Sign in](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21e.png)  \n15. After you enter your credentials, you will be prompted to give permissions to the web application you just created:  \n    ![Project Default Service Account](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21f.png)  \n16. Click **Accept**. You will now be redirected back to the **Register** page of the **ContactManager** application where you can register your Google account.\n    ![Register with your Google Account](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms21g.png)  \n17. You have the option of changing the local email registration name used for your Gmail account, but you generally want to keep the default email alias (that is, the one you used for authentication). Click **Log in**.\n\n##Use the Membership API to Restrict Access \nASP.NET Identity is the membership system used for authentication when building an ASP.NET web application. It makes it easy to integrate user-specific profile data with application data. Also, ASP.NET Identity allows you to choose the persistence model for user profiles in your application. You can store the data in a SQL Server database or another data store, including *NoSQL* data stores such as Azure Storage Tables.\n\nBy using the default ASP.NET Web Forms template, you have built-in membership functionality that you can immediately use when the application runs. You will use ASP.NET Identity to add an administrator role and assign a user to that role. Then, you will learn how to restrict access to the administration folder and the pages in that folder that are used to modify the contact data.\n\n###Add an Administrator \nUsing ASP.NET Identity, you can add an administrator role and assign a user to that role using code. \n\n1. In **Solution Explorer**, open the *Configuration.cs* file in the *Migrations* folder.\n2. Add the following `using` statements within the `ContactManger.Migrations` namespace:  \n\n        using Microsoft.AspNet.Identity;\n        using Microsoft.AspNet.Identity.EntityFramework;\n\n3. Add the following `AddUserAndRole` method to the `Configuration` class after the `Seed` method:  \n\n        public void AddUserAndRole(ContactManager.Models.ApplicationDbContext context)\n        {\n            IdentityResult IdRoleResult;\n            IdentityResult IdUserResult;\n        \n            var roleStore = new RoleStore<IdentityRole>(context);\n            var roleMgr = new RoleManager<IdentityRole>(roleStore);\n        \n            if (!roleMgr.RoleExists(\"canEdit\"))\n            {\n                IdRoleResult = roleMgr.Create(new IdentityRole { Name = \"canEdit\" });\n            }\n        \n            //var userStore = new UserStore<ApplicationUser>(context);\n            //var userMgr = new UserManager<ApplicationUser>(userStore);\n            var userMgr = new UserManager<ApplicationUser>(new UserStore<ApplicationUser>(context));\n        \n            var appUser = new ApplicationUser\n            {\n                UserName = \"canEditUser@wideworldimporters.com\",\n                Email = \"canEditUser@wideworldimporters.com\"\n            };\n            IdUserResult = userMgr.Create(appUser, \"Pa$$word1\");\n        \n            if (!userMgr.IsInRole(userMgr.FindByEmail(\"canEditUser@wideworldimporters.com\").Id, \"canEdit\"))\n            {\n              //  IdUserResult = userMgr.AddToRole(appUser.Id, \"canEdit\");\n                IdUserResult = userMgr.AddToRole(userMgr.FindByEmail(\"canEditUser@wideworldimporters.com\").Id, \"canEdit\");\n            }\n        }\n\n4. Add a call to the `AddUserAndRole` method from within the beginning of the `Seed` method. Note that only the beginning of the `Seed` method is being shown.  \n\n        protected override void Seed(ContactManager.Models.ApplicationDbContext context)\n        {\n            AddUserAndRole(context);\n\n5. After saving all your changes, in the **Package Manager Console** run the following command:  \n\n        Update-Database\n\nThis code creates a new role called `canEdit` and creates a new local user with the email of canEditUser@wideworldimporters.com. Then, the code adds canEditUser@wideworldimporters.com to the `canEdit` role. For more information, see the [ASP.NET Identity](http://www.asp.net/identity) resource page.  \n\n###Restrict Access to the Administration Folder \nThe **ContactManager** sample application allows both anonymous users and logged-in users to view contacts. However, after you complete this section, the logged-in users that are assigned to the \"canEdit\" role will be the only users able to modify the contacts.\n\nYou will create a folder named *Admin* where only users that are assigned to the \"canEdit\" role can access.\n\n1. In **Solution Explorer**, add a sub-folder to the *Contacts* folder and name the new sub-folder *Admin*.\n2. Move the following files from the *Contacts* folder to the *Contacts/Admin* folder:  \n    - *Delete.aspx *and* Delete.aspx.cs*\n    - *Edit.aspx *and* Edit.aspx.cs*\n    - *Insert.aspx *and* Insert.aspx.cs*\n3. Update the link references in *Contacts/Default.aspx* by adding \"Admin/\" before the pages references that link to *Insert.aspx*, *Edit.aspx*, and *Delete.aspx* as shown below:  \n\n        <%@ Page Title=\"ContactsList\" Language=\"C#\" MasterPageFile=\"~/Site.Master\" CodeBehind=\"Default.aspx.cs\" Inherits=\"ContactManager.Contacts.Default\" ViewStateMode=\"Disabled\" %>\n        <%@ Register TagPrefix=\"FriendlyUrls\" Namespace=\"Microsoft.AspNet.FriendlyUrls\" %>\n        \n        <asp:Content runat=\"server\" ContentPlaceHolderID=\"MainContent\">\n            <h2>Contacts List</h2>\n            <p>\n                <asp:HyperLink runat=\"server\" NavigateUrl=\"Admin/Insert.aspx\" Text=\"Create new\" />\n            </p>\n            <div>\n                <asp:ListView runat=\"server\"\n                    DataKeyNames=\"ContactId\" ItemType=\"ContactManager.Models.Contacts\"\n                    AutoGenerateColumns=\"false\"\n                    AllowPaging=\"true\" AllowSorting=\"true\"\n                    SelectMethod=\"GetData\">\n                    <EmptyDataTemplate>\n                        There are no entries found for Contacts\n                    </EmptyDataTemplate>\n                    <LayoutTemplate>\n                        <table class=\"table\">\n                            <thead>\n                                <tr>\n                                    <th>Name</th>\n                                    <th>Address</th>\n                                    <th>City</th>\n                                    <th>State</th>\n                                    <th>Zip</th>\n                                    <th>Email</th>\n                                    <th>&nbsp;</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr runat=\"server\" id=\"itemPlaceholder\" />\n                            </tbody>\n                        </table>\n                    </LayoutTemplate>\n                    <ItemTemplate>\n                        <tr>\n                            <td>\n                                <asp:DynamicControl runat=\"server\" DataField=\"Name\" ID=\"Name\" Mode=\"ReadOnly\" />\n                            </td>\n                            <td>\n                                <asp:DynamicControl runat=\"server\" DataField=\"Address\" ID=\"Address\" Mode=\"ReadOnly\" />\n                            </td>\n                            <td>\n                                <asp:DynamicControl runat=\"server\" DataField=\"City\" ID=\"City\" Mode=\"ReadOnly\" />\n                            </td>\n                            <td>\n                                <asp:DynamicControl runat=\"server\" DataField=\"State\" ID=\"State\" Mode=\"ReadOnly\" />\n                            </td>\n                            <td>\n                                <asp:DynamicControl runat=\"server\" DataField=\"Zip\" ID=\"Zip\" Mode=\"ReadOnly\" />\n                            </td>\n                            <td>\n                                <asp:DynamicControl runat=\"server\" DataField=\"Email\" ID=\"Email\" Mode=\"ReadOnly\" />\n                            </td>\n                            <td>\n                                <a href=\"Admin/Edit.aspx?ContactId=<%#: Item.ContactId%>\">Edit</a> | \n                                <a href=\"Admin/Delete.aspx?ContactId=<%#: Item.ContactId%>\">Delete</a>\n                            </td>\n                        </tr>\n                    </ItemTemplate>\n                </asp:ListView>\n            </div>\n        </asp:Content>\n\n4. Update the six references of the `Response.Redirect(\"Default.aspx\")` code to `Response.Redirect(\"~/Contacts/Default.aspx\")` for the following three files:  \n    - *Delete.aspx.cs*\n    - *Edit.aspx.cs*\n    - *Insert.aspx.cs*  \n\n    Now the links will all work correctly when you display and update the contact data.\n5. To restrict access to the *Admin* folder, from the **Solution Explorer** right-click the *Admin* folder and select **Add New Item**.\n6. From the list of Visual C# Web templates, select **Web Configuration File** from the middle list, accept the default name of *Web.config*, and then select **Add**.\n7. Replace the existing XML content in the *Web.config* file with the following:\n\n        <?xml version=\"1.0\"?>\n        <configuration>\n          <system.web>\n            <authorization>\n              <allow roles=\"canEdit\"/>\n              <deny users=\"*\"/>\n            </authorization>\n          </system.web>\n        </configuration>\n\n8. Save the *Web.config* file. \n    The *Web.config* file specifies that only users assigned to the \"canEdit\" role can access the pages contained in the *Admin* folder. \n\nWhen a user that is not part of the \"canEdit\" role attempts to modify the data, they will be redirected to the *Log in* page.\n\n##Deploy the Application with the Database to Azure \nNow that the web application is complete, you can publish it to Azure.\n\n###Publish the Application \n1. In Visual Studio, build the project (**Ctrl+Shift+B**).\n2. Right-click the project in **Solution Explorer** and select **Publish**.  \n    ![Publish menu option](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms22.png)  \n    The **Publish Web** dialog box is displayed.  \n    ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms22a.png)  \n3. From the **Profile** tab, select **Azure Web App** as the publish target if it is not already selected.  \n    ![Publish Web dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms23.png)  \n4. Click **Sign In** if you are not already signed in.\n5. Select the existing web app that you created earlier in this tutorial from the **Existing Web Apps** dropdown box and click the **OK** button.  \n    ![Select Existing Web Site dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms25.png)  \n    If you are asked to save changes make to the profile, select **Yes**.\n6. Click the **Settings** tab.  \n    ![Select Existing Web Site dialog box](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26.png)  \n7. Set the **Configuration** dropdown box to **Debug**.\n8. Click the **down arrow** icon next to **ApplicationDbContext** and set it to **ContactDB**.\n9. Check the **Execute Code First Migrations** checkbox.  \n    In this example, you should select this checkbox only the first time you publish the application. This way, the *Seed* method in the *Configuration.cs* file will only be called once.  \n\n10. Then, click **Publish**.  \n    Your application will be published to Azure.\n\n>[AZURE.NOTE]  \nIf you closed and re-opened Visual Studio after you created the publish profile, you might not see the connection string in the drop-down list. In that case, instead of editing the publish profile that you created earlier, create a new one the same way you did earlier, and then follow these steps on the **Settings** tab.)  \n\n###Review the Application in Azure \n1. In the browser, click the **Contact Demo** link.  \n    The Contacts List is displayed.\n    ![Contacts listed in Browser](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms27.png)  \n\n2. Select **Create new** on the **Contacts List** page.  \n    ![Contacts listed in Browser](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms29.png)  \n    You are redirected to the **Login** page because you have not logged in with an account that can modify contacts.  \n3. After you enter the below email and password, click the **Log in** button.  \n    **Email**: `canEditUser@wideworldimporters.com`  \n    **Password**: `Pa$$word1`  \n    ![Log in Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms28.png)  \n\n4. Enter new data for each field and then press the **Insert** button.  \n    ![Add New Contact Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms30.png)  \n    The *EditContactList.aspx* page is displayed with the new record.  \n    ![Add New Contact Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms31.png)  \n\n5. Select the **Log off** link.\n\n###Stop the Application \nIn order to prevent other people from registering and using your sample application, you will stop the web app.\n\n1. In Visual Studio from the **View Menu**, select **Server Explorer**. \n2. In **Server Explorer**, navigate to **Web App**.\n3. Right click on each web app instance and select **Stop Web App**.  \n    ![Stop Web Site menu item](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26a.png)  \n\n    Alternatively, from the Microsoft Azure management portal, you can select the web app, then click the **stop** icon at the bottom of the page.  \n    ![Add New Contact Page](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms26b.png)  \n\n##Review the Database \nIt is important to know how to view and modify the database directly. Knowing how to work directly with the database allows you to confirm data in the database and also understand how the data is stored in each table.\n\n###Examine the SQL Azure DB \n1. In Visual Studio, open **Server Explorer** and navigate to **ContactDB**.\n2. Right-click on **ContactDB** and select **Open in SQL Server Object Explorer**.  \n    ![Open in SQL Server Object Explorer menu item](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms32.png)  \n3. If the **Add Firewall Rule** dialog box is displayed, select **Add Firewall Rule**.  \n      If you can't expand **SQL Databases** and can't see **ContactDB** from Visual Studio, you can follow the instructions to open a firewall port or a range of ports. To do this, follow the instructions under **Set up Azure firewall rules** near the end of the [MVC tutorial](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md). As an alternative, you can also review the data of the local database by building, running, and adding data to the application locally (**CTRL+F5** from Visual Studio).  \n\n4. If the **Connect to Server** dialog box is displayed, enter the **password** you created at the beginning of this tutorial and press the **Connect** button.  \n      If you don't recall the password, you can find it in your local project file. In **Solution Explorer**, expand the *Properties* folder and then expand the *PublishProfiles* folder. Open the *contactmanager.pubxml* file (your file may be named differently). Search the file for your publishing password.\n\n5. Expand the **contactDB** database and then expand **Tables**.\n6. Right-click the **dbo.AspNetUsers** table and select **View Data**.  \n    ![View Data menu item](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms34.png)  \n    You can view the data associated with the canEditUser@contoso.com user.  \n    ![ContactManager window](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms35.png)  \n\n###Add a User to the Admin Role by Editing the Database \nEarlier in the tutorial you used code to add users to the canEdit role. An alternative method is to directly manipulate the data in the membership tables. The following steps show how to use this alternate method to add a user to a role.\n\n1. In **SQL Server Object Explorer**, right click on **dbo.AspNetUserRoles** and select **View Data**.\n    ![AspNetUserRoles data](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms36.png)  \n2. Copy the *RoleId* and paste it into the empty (new) row.  \n    ![AspNetUserRoles data](./media/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/SecureWebForms37.png)  \n3. In the **dbo.AspNetUsers** table, find the user you want to put in the role, and copy the user's *Id*.\n4. Paste the copied *Id* into the **UserId** field of the new row in the **AspNetUserRoles** table.  \n\n>[AZURE.NOTE]  \nWe are working on a tool that will make managing users and roles much easier.  \n\n##Next steps\nFor more information about ASP.NET Web Forms, see [Learn About ASP.NET Web Forms](http://www.asp.net/web-forms) on the ASP.NET web app and [Microsoft Azure Tutorials and Guides](http://azure.microsoft.com/documentation/services/web-sites/#net).\n\nThis tutorial was based on the MVC tutorial [Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service](web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database.md) written by Rick Anderson (Twitter [@RickAndMSFT](https://twitter.com/RickAndMSFT)) with assistance from Tom Dykstra and Barry Dorrans (Twitter [@blowdart](https://twitter.com/blowdart)). \n\nPlease leave feedback about what you liked and what you would like to see improved, not only about the tutorial itself but also about the products that it demonstrates. Your feedback will help us prioritize improvements. You can also request and vote on new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).\n\n \n\ntest\n"
}