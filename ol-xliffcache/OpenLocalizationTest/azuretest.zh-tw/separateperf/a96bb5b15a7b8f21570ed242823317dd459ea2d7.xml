{
  "nodes": [
    {
      "content": "How to View Azure Service Fabric entities aggregated health",
      "pos": [
        26,
        85
      ]
    },
    {
      "content": "Describes how to query, view and evaluate the Azure Service Fabric entities aggregated health, through health queries and general queries.",
      "pos": [
        103,
        241
      ]
    },
    {
      "content": "How to view Service Fabric health reports",
      "pos": [
        532,
        573
      ]
    },
    {
      "content": "Service Fabric introduces a <bpt id=\"p1\">[</bpt>Health Model<ept id=\"p1\">](service-fabric-health-introduction.md)</ept> comprised of health entities on which System components and watchdogs can report local conditions they are monitoring.",
      "pos": [
        574,
        774
      ]
    },
    {
      "content": "The <bpt id=\"p1\">[</bpt>Health Store<ept id=\"p1\">](service-fabric-health-introduction.md#health-store)</ept> aggregates all health data to determine whether entities are healthy.",
      "pos": [
        775,
        915
      ]
    },
    {
      "content": "Out of the box, the cluster is populated with health reports sent by the System components.",
      "pos": [
        917,
        1008
      ]
    },
    {
      "content": "Read more at <bpt id=\"p1\">[</bpt>Using System health reports for troubleshooting<ept id=\"p1\">](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)</ept>.",
      "pos": [
        1009,
        1146
      ]
    },
    {
      "content": "Service Fabric provides multiple ways to get the entities aggregated health:",
      "pos": [
        1148,
        1224
      ]
    },
    {
      "pos": [
        1228,
        1326
      ],
      "content": "<bpt id=\"p1\">[</bpt>Service Fabric Explorer<ept id=\"p1\">](service-fabric-visualizing-your-cluster.md)</ept> or other visualization tools"
    },
    {
      "content": "Health queries (through Powerhsell/API/REST)",
      "pos": [
        1330,
        1374
      ]
    },
    {
      "content": "General queries that return a list of entities that have health as one of the properties (through Powershell/API/REST)",
      "pos": [
        1378,
        1496
      ]
    },
    {
      "content": "To demonstrate these options, let's use a local cluster with <bpt id=\"p1\">**</bpt>5 nodes<ept id=\"p1\">**</ept>.",
      "pos": [
        1498,
        1571
      ]
    },
    {
      "content": "Next to <bpt id=\"p1\">**</bpt>fabric:/System<ept id=\"p1\">**</ept> application (which exists out of the box), there are some other applications deployed, one of which is <bpt id=\"p2\">**</bpt>fabric:/WordCount<ept id=\"p2\">**</ept>.",
      "pos": [
        1572,
        1724
      ]
    },
    {
      "content": "This application contains a stateful service configured with 7 replicas.",
      "pos": [
        1725,
        1797
      ]
    },
    {
      "content": "Since there are only 5 nodes, system components will flag that the partition is below target count with an Warning.",
      "pos": [
        1798,
        1913
      ]
    },
    {
      "content": "Health in Service Fabric Explorer",
      "pos": [
        2173,
        2206
      ]
    },
    {
      "content": "Service Fabric Explorer provides a visual view of the cluster.",
      "pos": [
        2207,
        2269
      ]
    },
    {
      "content": "In the picture below, you can see that:",
      "pos": [
        2270,
        2309
      ]
    },
    {
      "pos": [
        2313,
        2446
      ],
      "content": "Application <bpt id=\"p1\">**</bpt>fabric:/WordCount<ept id=\"p1\">**</ept> is \"red\" (at Error) because it has an error event reported by MyWatchdog for property Availability."
    },
    {
      "content": "One of its services, <bpt id=\"p1\">**</bpt>fabric:/WordCount/WordCount.Service<ept id=\"p1\">**</ept> is \"yellow\" (at Warning).",
      "pos": [
        2450,
        2536
      ]
    },
    {
      "content": "As described above, the service is configured with 7 replicas, which can't all be placed (since we only have 5 nodes).",
      "pos": [
        2537,
        2655
      ]
    },
    {
      "content": "Though not shown here, the service partition is \"yellow\" because of the System report.",
      "pos": [
        2656,
        2742
      ]
    },
    {
      "content": "The \"yellow\" partition triggers the \"yellow\" service.",
      "pos": [
        2743,
        2796
      ]
    },
    {
      "pos": [
        2800,
        2858
      ],
      "content": "The <bpt id=\"p1\">**</bpt>cluster<ept id=\"p1\">**</ept> is \"red\" because of the \"red\" application."
    },
    {
      "content": "The evaluation uses default policies from cluster manifest and application manifest, which are the strict policies (do not tolerate any failure).",
      "pos": [
        2860,
        3005
      ]
    },
    {
      "content": "View of the cluster with ServiceFabricExplorer.",
      "pos": [
        3009,
        3056
      ]
    },
    {
      "content": "View of the cluster with ServiceFabricExplorer.",
      "pos": [
        3062,
        3109
      ]
    },
    {
      "pos": [
        3217,
        3316
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Read more about <bpt id=\"p1\">[</bpt>Service Fabric Explorer<ept id=\"p1\">](service-fabric-visualizing-your-cluster.md)</ept>."
    },
    {
      "content": "Health queries",
      "pos": [
        3321,
        3335
      ]
    },
    {
      "content": "Service Fabric exposes health queries for each of the supported <bpt id=\"p1\">[</bpt>entity types<ept id=\"p1\">](service-fabric-health-introduction.md#health-entities-and-hierarchy)</ept>.",
      "pos": [
        3336,
        3484
      ]
    },
    {
      "content": "They can be accessed trough API (methods on FabricClient.HealthManager), Powershell cmdlets and REST.",
      "pos": [
        3485,
        3586
      ]
    },
    {
      "content": "These queries return complete health information about the entity, including aggregated health state, health events reported on the entity, children health states (when applicable) and unhealthy evaluations when the entity is not healthy.",
      "pos": [
        3587,
        3825
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> A health entity is returned to the user when it is completely populated in the Health Store: the entity has a System report, it's active (not deleted) and parent entities on the hierarchy chain have System reports.",
      "pos": [
        3829,
        4056
      ]
    },
    {
      "content": "If any of these conditions is not satisfied, the health queries return an exception showing why the entity is not returned.",
      "pos": [
        4057,
        4180
      ]
    },
    {
      "content": "The health queries require passing in the entity identifier, which depends on the entity type.",
      "pos": [
        4182,
        4276
      ]
    },
    {
      "content": "They accept optional health policy parameters.",
      "pos": [
        4277,
        4323
      ]
    },
    {
      "content": "If not specified, the <bpt id=\"p1\">[</bpt>health policies<ept id=\"p1\">](service-fabric-health-introduction.md#health-policies)</ept> from cluster or application manifest are used for evaluation.",
      "pos": [
        4324,
        4480
      ]
    },
    {
      "content": "They also accept filters for returning only partial children or events, the ones that respect the specified filters.",
      "pos": [
        4481,
        4597
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The output filters are applied on the server side, so the message reply size is reduced.",
      "pos": [
        4601,
        4702
      ]
    },
    {
      "content": "It is recommended to use the filters to limit the data returned rather than apply filters on the client side.",
      "pos": [
        4703,
        4812
      ]
    },
    {
      "content": "An entity health contains the following information:",
      "pos": [
        4814,
        4866
      ]
    },
    {
      "content": "The aggregated health state of the entity.",
      "pos": [
        4870,
        4912
      ]
    },
    {
      "content": "This is computed by the Health Store based on entity health reports, children health states (when applicable) and health policies.",
      "pos": [
        4913,
        5043
      ]
    },
    {
      "content": "Read more about <bpt id=\"p1\">[</bpt>Entity health evaluation<ept id=\"p1\">](service-fabric-health-introduction.md#entity-health-evaluation)</ept>.",
      "pos": [
        5044,
        5151
      ]
    },
    {
      "content": "The health events on the entity.",
      "pos": [
        5157,
        5189
      ]
    },
    {
      "content": "For the entities that can have children, collection of health states for all children.",
      "pos": [
        5193,
        5279
      ]
    },
    {
      "content": "The health states contain the entity identifier and the aggregated health state.",
      "pos": [
        5280,
        5360
      ]
    },
    {
      "content": "To get complete health for a child, call the query health for the child entity type, passing in the child identifier.",
      "pos": [
        5361,
        5478
      ]
    },
    {
      "content": "If the entity is not healthy, the unhealthy evaluations which point to the report that triggered the state of the entity.",
      "pos": [
        5482,
        5603
      ]
    },
    {
      "content": "Get cluster health",
      "pos": [
        5608,
        5626
      ]
    },
    {
      "content": "Returns the health of the cluster entity.",
      "pos": [
        5627,
        5668
      ]
    },
    {
      "content": "Contains the health states of applications and nodes (children of the cluster).",
      "pos": [
        5669,
        5748
      ]
    },
    {
      "content": "Input:",
      "pos": [
        5749,
        5755
      ]
    },
    {
      "content": "[optional] Application health policy map with health policies used to override the application manifest policies.",
      "pos": [
        5759,
        5872
      ]
    },
    {
      "content": "[optional] Filter to return only events, nodes, applications with certain health state (eg.",
      "pos": [
        5876,
        5967
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        5968,
        6013
      ]
    },
    {
      "content": "API",
      "pos": [
        6019,
        6022
      ]
    },
    {
      "content": "To get cluster health, create a FabricClient and call GetClusterHealthAsync method on its HealthManager.",
      "pos": [
        6023,
        6127
      ]
    },
    {
      "content": "The following gets cluster health:",
      "pos": [
        6129,
        6163
      ]
    },
    {
      "content": "The following gets cluster health using custom cluster health policy and filters for nodes and applications.",
      "pos": [
        6269,
        6377
      ]
    },
    {
      "content": "Note that it creates System.Fabric.Description.ClusterHealthQueryDescription that contains all the input data.",
      "pos": [
        6378,
        6488
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        7115,
        7125
      ]
    },
    {
      "content": "The cmdlet to get cluster health is Get-ServiceFabricClusterHealth.",
      "pos": [
        7126,
        7193
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        7194,
        7264
      ]
    },
    {
      "content": "State of the cluster: 5 nodes, System application and fabric:/WordCount configured as above.",
      "pos": [
        7265,
        7357
      ]
    },
    {
      "content": "The following cmdlet gets cluster health with default health policies.",
      "pos": [
        7359,
        7429
      ]
    },
    {
      "content": "The aggregated health state is Warning, because the fabric:/WordCount application is in Warning.",
      "pos": [
        7430,
        7526
      ]
    },
    {
      "content": "Note how the unhealthy evaluations show with details the condition that triggered the aggregated health.",
      "pos": [
        7527,
        7631
      ]
    },
    {
      "content": "The following Powershell cmdlet gets the health of the cluster with custom application policy.",
      "pos": [
        9604,
        9698
      ]
    },
    {
      "content": "It filters results to get only Error or Warning applications and nodes.",
      "pos": [
        9699,
        9770
      ]
    },
    {
      "content": "As a result, no nodes will be returned as they are all healthy.",
      "pos": [
        9771,
        9834
      ]
    },
    {
      "content": "Only fabric:/WordCount application respects the applications filter.",
      "pos": [
        9835,
        9903
      ]
    },
    {
      "content": "Because the custom policy specifies to consider warning as error for the fabric:/WordCount application, the application is evaluated at Error, and so is the cluster.",
      "pos": [
        9904,
        10069
      ]
    },
    {
      "content": "Get node health",
      "pos": [
        11890,
        11905
      ]
    },
    {
      "content": "Returns the health of a node entity.",
      "pos": [
        11906,
        11942
      ]
    },
    {
      "content": "Contains the health events reported on the node.",
      "pos": [
        11943,
        11991
      ]
    },
    {
      "content": "Input:",
      "pos": [
        11992,
        11998
      ]
    },
    {
      "content": "[required] The node name which identifies the node.",
      "pos": [
        12002,
        12053
      ]
    },
    {
      "content": "[optional] Cluster health policy settings used to evaluate health.",
      "pos": [
        12057,
        12123
      ]
    },
    {
      "content": "[optional] Filter to return only events with certain health state (eg.",
      "pos": [
        12127,
        12197
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        12198,
        12243
      ]
    },
    {
      "content": "API",
      "pos": [
        12249,
        12252
      ]
    },
    {
      "content": "To get node health through API, create a FabricClient and call GetNodeHealthAsync method on its HealthManager.",
      "pos": [
        12253,
        12363
      ]
    },
    {
      "content": "The following gets the node health for the specified node name.",
      "pos": [
        12365,
        12428
      ]
    },
    {
      "content": "The following gets the node health for the specified node name, passing in events filter and custom policy through System.Fabric.Description.NodeHealthQueryDescription.",
      "pos": [
        12533,
        12701
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        13070,
        13080
      ]
    },
    {
      "content": "The cmdlet to get node health is Get-ServiceFabricNodeHealth.",
      "pos": [
        13081,
        13142
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        13143,
        13213
      ]
    },
    {
      "content": "The following cmdlet gets node health with default health policies.",
      "pos": [
        13214,
        13281
      ]
    },
    {
      "content": "The following cmdlet gets the health of all nodes in the cluster.",
      "pos": [
        14097,
        14162
      ]
    },
    {
      "content": "Get application health",
      "pos": [
        14520,
        14542
      ]
    },
    {
      "content": "Returns the health of an application entity.",
      "pos": [
        14543,
        14587
      ]
    },
    {
      "content": "Contains the health states of deployed application and service children.",
      "pos": [
        14588,
        14660
      ]
    },
    {
      "content": "Input:",
      "pos": [
        14661,
        14667
      ]
    },
    {
      "content": "[required] Application name (Uri) which identifies the application",
      "pos": [
        14671,
        14737
      ]
    },
    {
      "content": "[optional] Application health policy used to override the application manifest policies.",
      "pos": [
        14741,
        14829
      ]
    },
    {
      "content": "[optional] Filter to return only events, services, deployed applications with certain health state (eg.",
      "pos": [
        14833,
        14936
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        14937,
        14982
      ]
    },
    {
      "content": "API",
      "pos": [
        14988,
        14991
      ]
    },
    {
      "content": "To get application health, create a FabricClient and call GetApplicationHealthAsync method on its HealthManager.",
      "pos": [
        14992,
        15104
      ]
    },
    {
      "content": "The following gets the application health for the specified application name Uri.",
      "pos": [
        15106,
        15187
      ]
    },
    {
      "content": "The following gets the application health for the specified application name Uri, specifying filters and custom policy through System.Fabric.Description.ApplicationHealthQueryDescription.",
      "pos": [
        15320,
        15507
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        16548,
        16558
      ]
    },
    {
      "content": "The cmdlet to get application health is Get-ServiceFabricApplicationHealth.",
      "pos": [
        16559,
        16634
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        16635,
        16705
      ]
    },
    {
      "content": "The following cmdlet returns the health of the fabric:/WordCount application.",
      "pos": [
        16707,
        16784
      ]
    },
    {
      "content": "The following Powershell passes in custom policy and filters children and events.",
      "pos": [
        20020,
        20101
      ]
    },
    {
      "content": "Get service health",
      "pos": [
        21496,
        21514
      ]
    },
    {
      "content": "Returns the health of a service entity.",
      "pos": [
        21515,
        21554
      ]
    },
    {
      "content": "Contains the partition health states.",
      "pos": [
        21555,
        21592
      ]
    },
    {
      "content": "Input:",
      "pos": [
        21593,
        21599
      ]
    },
    {
      "content": "[required] Service name (Uri) which identifies the service",
      "pos": [
        21603,
        21661
      ]
    },
    {
      "content": "[optional] Application health policy used to override the application manifest policy.",
      "pos": [
        21664,
        21750
      ]
    },
    {
      "content": "[optional] Filter to return only events andpartitions with certain health state (eg.",
      "pos": [
        21753,
        21837
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        21838,
        21883
      ]
    },
    {
      "content": "API",
      "pos": [
        21889,
        21892
      ]
    },
    {
      "content": "To get service health through API, create a FabricClient and call GetServiceHealthAsync method on its HealthManager.",
      "pos": [
        21893,
        22009
      ]
    },
    {
      "content": "The following example get the health of a service with specified service name (Uri):",
      "pos": [
        22011,
        22095
      ]
    },
    {
      "content": "The following gets the service health for the specified service name Uri, specifying filters and custom policy through System.Fabric.Description.ServiceHealthQueryDescription.",
      "pos": [
        22211,
        22386
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        22797,
        22807
      ]
    },
    {
      "content": "The cmdlet to get service health is Get-ServiceFabricServiceHealth.",
      "pos": [
        22808,
        22875
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        22876,
        22946
      ]
    },
    {
      "content": "The following cmdlet gets the service health using default health policies.",
      "pos": [
        22948,
        23023
      ]
    },
    {
      "content": "Get partition health",
      "pos": [
        24481,
        24501
      ]
    },
    {
      "content": "Returns the health of a partition entity.",
      "pos": [
        24502,
        24543
      ]
    },
    {
      "content": "Contains the replica health states.",
      "pos": [
        24544,
        24579
      ]
    },
    {
      "content": "Input:",
      "pos": [
        24580,
        24586
      ]
    },
    {
      "content": "[required] Partition id (Guid) which identifies the partition",
      "pos": [
        24590,
        24651
      ]
    },
    {
      "content": "[optional] Application health policy used to override the application manifest policy.",
      "pos": [
        24655,
        24741
      ]
    },
    {
      "content": "[optional] Filter to return only events, replicas with certain health state (eg.",
      "pos": [
        24745,
        24825
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        24826,
        24871
      ]
    },
    {
      "content": "API",
      "pos": [
        24877,
        24880
      ]
    },
    {
      "content": "To get partition health through API, create a FabricClient and call GetPartitionHealthAsync method on its HealthManager.",
      "pos": [
        24881,
        25001
      ]
    },
    {
      "content": "To specify optional parameters, create System.Fabric.Description.PartitionHealthQueryDescription.",
      "pos": [
        25002,
        25099
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        25226,
        25236
      ]
    },
    {
      "content": "The cmdlet to get partition health is Get-ServiceFabricPartitionHealth.",
      "pos": [
        25237,
        25308
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        25309,
        25379
      ]
    },
    {
      "content": "The following cmdlet gets the health for all partitions of the word count service.",
      "pos": [
        25381,
        25463
      ]
    },
    {
      "content": "Get replica health",
      "pos": [
        27198,
        27216
      ]
    },
    {
      "content": "Returns the health of a replica.Input:",
      "pos": [
        27217,
        27255
      ]
    },
    {
      "content": "[required] Partition id (Guid) and replica id which identify the replica",
      "pos": [
        27259,
        27331
      ]
    },
    {
      "content": "[optional] Application health policy parameters used to override the application manifest policies.",
      "pos": [
        27335,
        27434
      ]
    },
    {
      "content": "[optional] Filter to return only events with certain health state (eg.",
      "pos": [
        27438,
        27508
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        27509,
        27554
      ]
    },
    {
      "content": "API",
      "pos": [
        27560,
        27563
      ]
    },
    {
      "content": "To get replica health through API, create a FabricClient and call GetReplicaHealthAsync method on its HealthManager.",
      "pos": [
        27564,
        27680
      ]
    },
    {
      "content": "Specify advanced parameters with System.Fabric.Description.ReplicaHealthQueryDescription.",
      "pos": [
        27681,
        27770
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        27902,
        27912
      ]
    },
    {
      "content": "The cmdlet to get replica health is Get-ServiceFabricReplicaHealth.",
      "pos": [
        27913,
        27980
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        27981,
        28051
      ]
    },
    {
      "content": "The following cmdlet gets the health of the primary replica for all partitions of the service.",
      "pos": [
        28053,
        28147
      ]
    },
    {
      "content": "Get deployed application health",
      "pos": [
        29183,
        29214
      ]
    },
    {
      "content": "Returns the health of an application deployed on a node entity.",
      "pos": [
        29215,
        29278
      ]
    },
    {
      "content": "Contains the deployed service package health states.",
      "pos": [
        29279,
        29331
      ]
    },
    {
      "content": "Input:",
      "pos": [
        29332,
        29338
      ]
    },
    {
      "content": "[required] Application name (Uri) and node name (string) which identify the deployed application",
      "pos": [
        29342,
        29438
      ]
    },
    {
      "content": "[optional] Application health policy used to override the application manifest policies.",
      "pos": [
        29442,
        29530
      ]
    },
    {
      "content": "[optional] Filter to return only events, deployed service packages with certain health state (eg.",
      "pos": [
        29534,
        29631
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        29632,
        29677
      ]
    },
    {
      "content": "API",
      "pos": [
        29683,
        29686
      ]
    },
    {
      "content": "To get the health on an application deployed on a node through API, create a FabricClient and call GetDeployedApplicationHealthAsync method on its HealthManager.",
      "pos": [
        29687,
        29848
      ]
    },
    {
      "content": "To specify optional parameters, use System.Fabric.Description.DeployedApplicationHealthQueryDescription.",
      "pos": [
        29849,
        29953
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        30157,
        30167
      ]
    },
    {
      "content": "The cmdlet to get deployed application health is Get-ServiceFabricDeployedApplicationHealth.",
      "pos": [
        30168,
        30260
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        30261,
        30331
      ]
    },
    {
      "content": "To find out where an application is deployed, run Get-ServiceFabricApplicationHealth and look at the deployed application children.",
      "pos": [
        30332,
        30463
      ]
    },
    {
      "content": "The following cmdlter gets the health of the fabric:/WordCount application deployed on node Node.1.",
      "pos": [
        30465,
        30564
      ]
    },
    {
      "content": "Get deployed service package health",
      "pos": [
        32188,
        32223
      ]
    },
    {
      "content": "Returns the health of a deployed service package entity.",
      "pos": [
        32224,
        32280
      ]
    },
    {
      "content": "Input:",
      "pos": [
        32281,
        32287
      ]
    },
    {
      "content": "[required] Application name (Uri), node name (string) and service manifest name (string) which identify the deployed service package",
      "pos": [
        32291,
        32423
      ]
    },
    {
      "content": "[optional] Application health policy used to override the application manifest policy.",
      "pos": [
        32427,
        32513
      ]
    },
    {
      "content": "[optional] Filter to return only events with certain health state (eg.",
      "pos": [
        32517,
        32587
      ]
    },
    {
      "content": "return only errors or warning or errors etc).",
      "pos": [
        32588,
        32633
      ]
    },
    {
      "content": "API",
      "pos": [
        32639,
        32642
      ]
    },
    {
      "content": "To get the health of a deployed service package through API, create a FabricClient and call GetDeployedServicePackageHealthAsync method on its HealthManager.",
      "pos": [
        32643,
        32800
      ]
    },
    {
      "content": "Powershell",
      "pos": [
        33034,
        33044
      ]
    },
    {
      "content": "The cmdlet to get deployed service package health is Get-ServiceFabricDeployedServicePackageHealth.",
      "pos": [
        33045,
        33144
      ]
    },
    {
      "content": "First connect to the cluster with Connect-ServiceFabricCluster cmdlet.",
      "pos": [
        33145,
        33215
      ]
    },
    {
      "content": "To see where an aplication is deployed, run Get-ServiceFabricApplicationHealth, look at deployed applications.",
      "pos": [
        33216,
        33326
      ]
    },
    {
      "content": "To see what service packages are in an application, look at the deployed service package children in Get-ServiceFabricDeployedApplicationHealth output.",
      "pos": [
        33327,
        33478
      ]
    },
    {
      "content": "The following cmdlet gets the health of the WordCount.Service service package of the fabric:/WordCount application deployed on node Node.1.",
      "pos": [
        33480,
        33619
      ]
    },
    {
      "content": "The entity has System.Hosting reports for successful service package and entry point activation and successful service type registration.",
      "pos": [
        33620,
        33757
      ]
    },
    {
      "content": "General Queries",
      "pos": [
        36338,
        36353
      ]
    },
    {
      "content": "The general queries return the list of Service Fabric entities of the specified type.",
      "pos": [
        36354,
        36439
      ]
    },
    {
      "content": "They are exposed through API (methods on FabricClient.QueryManager), Powershell cmdlets and REST.",
      "pos": [
        36440,
        36537
      ]
    },
    {
      "content": "These queries aggregate sub-queries from multiple components.",
      "pos": [
        36538,
        36599
      ]
    },
    {
      "content": "One of them is the <bpt id=\"p1\">[</bpt>Health Store<ept id=\"p1\">](service-fabric-health-introduction.md#health-store)</ept>, which populates the aggregated health state for each query result.",
      "pos": [
        36600,
        36753
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The general queries return the aggregated health state of the entity and do not contain the rich health data.",
      "pos": [
        36759,
        36881
      ]
    },
    {
      "content": "If an entity is not healthy, you can follow up with health queries to get all health information, like events, children health states and unhealthy evaluations.",
      "pos": [
        36882,
        37042
      ]
    },
    {
      "content": "If the general queries return Unknown health state for an entity, it's possible that the Health Store doesn't have complete data about the entity or the sub-query to the Health Store wasn't successful (eg.",
      "pos": [
        37044,
        37249
      ]
    },
    {
      "content": "communication error, health store was throttled etc).",
      "pos": [
        37250,
        37303
      ]
    },
    {
      "content": "Follow up with a health query for the entity.",
      "pos": [
        37304,
        37349
      ]
    },
    {
      "content": "This may succeed, if the sub-query encountered transient errors (eg.",
      "pos": [
        37350,
        37418
      ]
    },
    {
      "content": "network issues), or will give more details about why the entity is not exposed from Health store.",
      "pos": [
        37419,
        37516
      ]
    },
    {
      "content": "The queries that contains HealthState for entities are:",
      "pos": [
        37518,
        37573
      ]
    },
    {
      "content": "Node list.",
      "pos": [
        37577,
        37587
      ]
    },
    {
      "content": "Returns the list nodes in the cluster.",
      "pos": [
        37588,
        37626
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetNodeListAsync.",
      "pos": [
        37631,
        37679
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricNode.",
      "pos": [
        37684,
        37718
      ]
    },
    {
      "content": "Application list.",
      "pos": [
        37721,
        37738
      ]
    },
    {
      "content": "Returns the list of applications in the cluster.",
      "pos": [
        37739,
        37787
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetApplicationListAsync.",
      "pos": [
        37792,
        37847
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricApplication.",
      "pos": [
        37852,
        37893
      ]
    },
    {
      "content": "Service list.",
      "pos": [
        37896,
        37909
      ]
    },
    {
      "content": "Returns the list of services in an application.",
      "pos": [
        37910,
        37957
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetServiceListAsync.",
      "pos": [
        37962,
        38013
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricService.",
      "pos": [
        38018,
        38055
      ]
    },
    {
      "content": "Partition list.",
      "pos": [
        38058,
        38073
      ]
    },
    {
      "content": "Returns the list of partitions in a service.",
      "pos": [
        38074,
        38118
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetPartitionListAsync.",
      "pos": [
        38123,
        38176
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricPartition.",
      "pos": [
        38181,
        38220
      ]
    },
    {
      "content": "Replica list.",
      "pos": [
        38223,
        38236
      ]
    },
    {
      "content": "Returns the list of replicas in a partition.",
      "pos": [
        38237,
        38281
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetReplicaListAsync.",
      "pos": [
        38286,
        38337
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricReplica.",
      "pos": [
        38342,
        38379
      ]
    },
    {
      "content": "Deployed application list.",
      "pos": [
        38382,
        38408
      ]
    },
    {
      "content": "Returns the list of deployed applications on a node.",
      "pos": [
        38409,
        38461
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetDeployedApplicationListAsync.",
      "pos": [
        38466,
        38529
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricDeployedApplication.",
      "pos": [
        38534,
        38583
      ]
    },
    {
      "content": "Deployed service package list.",
      "pos": [
        38586,
        38616
      ]
    },
    {
      "content": "Returns the list of service packages in a deployed application.",
      "pos": [
        38617,
        38680
      ]
    },
    {
      "content": "Api: FabricClient.QueryManager.GetDeployedServicePackageListAsync.",
      "pos": [
        38685,
        38751
      ]
    },
    {
      "content": "Powershell: Get-ServiceFabricDeployedApplication.",
      "pos": [
        38756,
        38805
      ]
    },
    {
      "content": "Examples",
      "pos": [
        38811,
        38819
      ]
    },
    {
      "content": "The following gets the unhealthy applications in the cluster:",
      "pos": [
        38821,
        38882
      ]
    },
    {
      "content": "The following cmdlet gets application details for fabric:/WordCount application.",
      "pos": [
        39032,
        39112
      ]
    },
    {
      "content": "Notice that health state is Warning.",
      "pos": [
        39113,
        39149
      ]
    },
    {
      "content": "The following cmdlet gets the services with health state Warning.",
      "pos": [
        39567,
        39632
      ]
    },
    {
      "content": "Cluster and application upgrade",
      "pos": [
        40053,
        40084
      ]
    },
    {
      "content": "During cluster and application monitored upgrade, Service Fabric checks health to ensure everything is and remains healthy.",
      "pos": [
        40085,
        40208
      ]
    },
    {
      "content": "If something is unhealthy per configured policy, the upgrade is either paused to allow user interaction or automatically rolled back.",
      "pos": [
        40209,
        40342
      ]
    },
    {
      "content": "During <bpt id=\"p1\">**</bpt>cluster<ept id=\"p1\">**</ept> upgrade, you can get the cluster upgrade status, which will include unhealthy evaluations that point to what is unhealthy in the cluster.",
      "pos": [
        40344,
        40500
      ]
    },
    {
      "content": "If the upgrade is rolled back due to health issues, the upgrade status will keep the last unhealthy reasons so administrators can investigate what went wrong.",
      "pos": [
        40501,
        40659
      ]
    },
    {
      "content": "Similarly, during <bpt id=\"p1\">**</bpt>application<ept id=\"p1\">**</ept> upgrade, the application upgrade status contains the unhealthy evaluations.",
      "pos": [
        40660,
        40769
      ]
    },
    {
      "content": "The following shows the application upgrade status for a modified fabric:/WordCount application.",
      "pos": [
        40771,
        40867
      ]
    },
    {
      "content": "A watchdog reported an Error on one of its replica.",
      "pos": [
        40868,
        40919
      ]
    },
    {
      "content": "The upgrade is rolling back because the health checks are not respected.",
      "pos": [
        40920,
        40992
      ]
    },
    {
      "pos": [
        43440,
        43532
      ],
      "content": "Read more about <bpt id=\"p1\">[</bpt>Service Fabric Application Upgrade<ept id=\"p1\">](service-fabric-application-upgrade.md)</ept>."
    },
    {
      "content": "Troubleshoot with Health",
      "pos": [
        43537,
        43561
      ]
    },
    {
      "content": "Whenever there is an issue in the cluster or an application, look at the cluster or the application health to pinpoint what is wrong.",
      "pos": [
        43562,
        43695
      ]
    },
    {
      "content": "The unhealthy evaluations will show with details what triggered the current unhealthy state.",
      "pos": [
        43696,
        43788
      ]
    },
    {
      "content": "If needed, drill down into unhealthy children entities to figure out issues.",
      "pos": [
        43789,
        43865
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        43870,
        43880
      ]
    },
    {
      "content": "Using System health reports for troubleshooting",
      "pos": [
        43882,
        43929
      ]
    },
    {
      "content": "Adding custom Service Fabric health reports",
      "pos": [
        44007,
        44050
      ]
    },
    {
      "content": "How to Monitor and Diagnose Services locally",
      "pos": [
        44087,
        44131
      ]
    },
    {
      "content": "Service Fabric Application Upgrade",
      "pos": [
        44211,
        44245
      ]
    }
  ],
  "content": "<properties\n   pageTitle=\"How to View Azure Service Fabric entities aggregated health\"\n   description=\"Describes how to query, view and evaluate the Azure Service Fabric entities aggregated health, through health queries and general queries.\"\n   services=\"service-fabric\"\n   documentationCenter=\".net\"\n   authors=\"oanapl\"\n   manager=\"timlt\"\n   editor=\"\"/>\n\n<tags\n   ms.service=\"service-fabric\"\n   ms.devlang=\"dotnet\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"na\"\n   ms.workload=\"na\"\n   ms.date=\"06/16/2015\"\n   ms.author=\"oanapl\"/>\n\n# How to view Service Fabric health reports\nService Fabric introduces a [Health Model](service-fabric-health-introduction.md) comprised of health entities on which System components and watchdogs can report local conditions they are monitoring. The [Health Store](service-fabric-health-introduction.md#health-store) aggregates all health data to determine whether entities are healthy.\n\nOut of the box, the cluster is populated with health reports sent by the System components. Read more at [Using System health reports for troubleshooting](service-fabric-understand-and-troubleshoot-with-system-health-reports.md).\n\nService Fabric provides multiple ways to get the entities aggregated health:\n\n- [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md) or other visualization tools\n\n- Health queries (through Powerhsell/API/REST)\n\n- General queries that return a list of entities that have health as one of the properties (through Powershell/API/REST)\n\nTo demonstrate these options, let's use a local cluster with **5 nodes**. Next to **fabric:/System** application (which exists out of the box), there are some other applications deployed, one of which is **fabric:/WordCount**. This application contains a stateful service configured with 7 replicas. Since there are only 5 nodes, system components will flag that the partition is below target count with an Warning.\n\n```xml\n<Service Name=\"WordCount.Service\">\n  <StatefulService ServiceTypeName=\"WordCount.Service\" MinReplicaSetSize=\"2\" TargetReplicaSetSize=\"7\">\n    <UniformInt64Partition PartitionCount=\"1\" LowKey=\"1\" HighKey=\"26\" />\n  </StatefulService>\n</Service>\n```\n\n## Health in Service Fabric Explorer\nService Fabric Explorer provides a visual view of the cluster. In the picture below, you can see that:\n\n- Application **fabric:/WordCount** is \"red\" (at Error) because it has an error event reported by MyWatchdog for property Availability.\n\n- One of its services, **fabric:/WordCount/WordCount.Service** is \"yellow\" (at Warning). As described above, the service is configured with 7 replicas, which can't all be placed (since we only have 5 nodes). Though not shown here, the service partition is \"yellow\" because of the System report. The \"yellow\" partition triggers the \"yellow\" service.\n\n- The **cluster** is \"red\" because of the \"red\" application.\n\nThe evaluation uses default policies from cluster manifest and application manifest, which are the strict policies (do not tolerate any failure).\n\n![View of the cluster with ServiceFabricExplorer.][1]\n\nView of the cluster with ServiceFabricExplorer.\n\n[1]: ./media/service-fabric-view-entities-aggregated-health/servicefabric-explorer-cluster-health.png\n\n\n> [AZURE.NOTE] Read more about [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md).\n\n## Health queries\nService Fabric exposes health queries for each of the supported [entity types](service-fabric-health-introduction.md#health-entities-and-hierarchy). They can be accessed trough API (methods on FabricClient.HealthManager), Powershell cmdlets and REST. These queries return complete health information about the entity, including aggregated health state, health events reported on the entity, children health states (when applicable) and unhealthy evaluations when the entity is not healthy.\n\n> [AZURE.NOTE] A health entity is returned to the user when it is completely populated in the Health Store: the entity has a System report, it's active (not deleted) and parent entities on the hierarchy chain have System reports. If any of these conditions is not satisfied, the health queries return an exception showing why the entity is not returned.\n\nThe health queries require passing in the entity identifier, which depends on the entity type. They accept optional health policy parameters. If not specified, the [health policies](service-fabric-health-introduction.md#health-policies) from cluster or application manifest are used for evaluation. They also accept filters for returning only partial children or events, the ones that respect the specified filters.\n\n> [AZURE.NOTE] The output filters are applied on the server side, so the message reply size is reduced. It is recommended to use the filters to limit the data returned rather than apply filters on the client side.\n\nAn entity health contains the following information:\n\n- The aggregated health state of the entity. This is computed by the Health Store based on entity health reports, children health states (when applicable) and health policies. Read more about [Entity health evaluation](service-fabric-health-introduction.md#entity-health-evaluation).  \n\n- The health events on the entity.\n\n- For the entities that can have children, collection of health states for all children. The health states contain the entity identifier and the aggregated health state. To get complete health for a child, call the query health for the child entity type, passing in the child identifier.\n\n- If the entity is not healthy, the unhealthy evaluations which point to the report that triggered the state of the entity.\n\n## Get cluster health\nReturns the health of the cluster entity. Contains the health states of applications and nodes (children of the cluster). Input:\n\n- [optional] Application health policy map with health policies used to override the application manifest policies.\n\n- [optional] Filter to return only events, nodes, applications with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get cluster health, create a FabricClient and call GetClusterHealthAsync method on its HealthManager.\n\nThe following gets cluster health:\n\n```csharp\nClusterHealth clusterHealth = fabricClient.HealthManager.GetClusterHealthAsync().Result;\n```\n\nThe following gets cluster health using custom cluster health policy and filters for nodes and applications. Note that it creates System.Fabric.Description.ClusterHealthQueryDescription that contains all the input data.\n\n```csharp\nvar policy = new ClusterHealthPolicy()\n{\n    MaxPercentUnhealthyNodes = 20\n};\nvar nodesFilter = new NodeHealthStatesFilter()\n{\n    HealthStateFilter = (long)(HealthStateFilter.Error | HealthStateFilter.Warning)\n};\nvar applicationsFilter = new ApplicationHealthStatesFilter()\n{\n    HealthStateFilter = (long)HealthStateFilter.Error\n};\nvar queryDescription = new ClusterHealthQueryDescription()\n{\n    HealthPolicy = policy,\n    ApplicationsFilter = applicationsFilter,\n    NodesFilter = nodesFilter,\n};\nClusterHealth clusterHealth = fabricClient.HealthManager.GetClusterHealthAsync(queryDescription).Result;\n```\n\n### Powershell\nThe cmdlet to get cluster health is Get-ServiceFabricClusterHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet.\nState of the cluster: 5 nodes, System application and fabric:/WordCount configured as above.\n\nThe following cmdlet gets cluster health with default health policies. The aggregated health state is Warning, because the fabric:/WordCount application is in Warning. Note how the unhealthy evaluations show with details the condition that triggered the aggregated health.\n\n```xml\nPS C:\\> Get-ServiceFabricClusterHealth\n\nAggregatedHealthState   : Warning\nUnhealthyEvaluations    :\n                          Unhealthy applications: 50% (1/2), MaxPercentUnhealthyApplications=0%.\n\n                          Unhealthy application: ApplicationName='fabric:/WordCount', AggregatedHealthState='Warning'.\n\n                          Unhealthy services: 100% (1/1), ServiceType='WordCount.Service', MaxPercentUnhealthyServices=0%.\n\n                          Unhealthy service: ServiceName='fabric:/WordCount/WordCount.Service', AggregatedHealthState='Warning'.\n\n                          Unhealthy partitions: 100% (1/1), MaxPercentUnhealthyPartitionsPerService=0%.\n\n                          Unhealthy partition: PartitionId='889909a3-04d6-4a01-97c1-3e9851d77d6c', AggregatedHealthState='Warning'.\n\n                          Unhealthy event: SourceId='System.FM', Property='State', HealthState='Warning', ConsiderWarningAsError=false.\n\nNodeHealthStates        :\n                          NodeName              : Node.4\n                          AggregatedHealthState : Ok\n\n                          NodeName              : Node.2\n                          AggregatedHealthState : Ok\n\n                          NodeName              : Node.1\n                          AggregatedHealthState : Ok\n\n                          NodeName              : Node.5\n                          AggregatedHealthState : Ok\n\n                          NodeName              : Node.3\n                          AggregatedHealthState : Ok\n\nApplicationHealthStates :\n                          ApplicationName       : fabric:/CalculatorActor\n                          AggregatedHealthState : Ok\n\n                          ApplicationName       : fabric:/System\n                          AggregatedHealthState : Ok\n\n                          ApplicationName       : fabric:/WordCount\n                          AggregatedHealthState : Warning\n\nHealthEvents            : None\n```\n\nThe following Powershell cmdlet gets the health of the cluster with custom application policy. It filters results to get only Error or Warning applications and nodes. As a result, no nodes will be returned as they are all healthy. Only fabric:/WordCount application respects the applications filter. Because the custom policy specifies to consider warning as error for the fabric:/WordCount application, the application is evaluated at Error, and so is the cluster.\n\n```powershell\nPS c:\\> $appHealthPolicy = New-Object -TypeName System.Fabric.Health.ApplicationHealthPolicy\n$appHealthPolicy.ConsiderWarningAsError = $true\n$appHealthPolicyMap = New-Object -TypeName System.Fabric.Health.ApplicationHealthPolicyMap\n$appUri1 = New-Object -TypeName System.Uri -ArgumentList \"fabric:/WordCount\"\n$appHealthPolicyMap.Add($appUri1, $appHealthPolicy)\n$warningAndErrorFilter = [System.Fabric.Health.HealthStateFilter]::Warning.value__  + [System.Fabric.Health.HealthStateFilter]::Error.value__\nGet-ServiceFabricClusterHealth -ApplicationHealthPolicyMap $appHealthPolicyMap -ApplicationsHealthStateFilter $warningAndErrorFilter -NodesHealthStateFilter $warningAndErrorFilter\n\nAggregatedHealthState   : Error\nUnhealthyEvaluations    :\n                          Unhealthy applications: 50% (1/2), MaxPercentUnhealthyApplications=0%.\n\n                          Unhealthy application: ApplicationName='fabric:/WordCount', AggregatedHealthState='Error'.\n\n                          Unhealthy services: 100% (1/1), ServiceType='WordCount.Service', MaxPercentUnhealthyServices=0%.\n\n                          Unhealthy service: ServiceName='fabric:/WordCount/WordCount.Service', AggregatedHealthState='Error'.\n\n                          Unhealthy partitions: 100% (1/1), MaxPercentUnhealthyPartitionsPerService=0%.\n\n                          Unhealthy partition: PartitionId='889909a3-04d6-4a01-97c1-3e9851d77d6c', AggregatedHealthState='Error'.\n\n                          Unhealthy event: SourceId='System.FM', Property='State', HealthState='Warning', ConsiderWarningAsError=true.\n\n\nNodeHealthStates        : None\nApplicationHealthStates :\n                          ApplicationName       : fabric:/WordCount\n                          AggregatedHealthState : Error\n\nHealthEvents            : None\n\n```\n\n## Get node health\nReturns the health of a node entity. Contains the health events reported on the node. Input:\n\n- [required] The node name which identifies the node.\n\n- [optional] Cluster health policy settings used to evaluate health.\n\n- [optional] Filter to return only events with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get node health through API, create a FabricClient and call GetNodeHealthAsync method on its HealthManager.\n\nThe following gets the node health for the specified node name.\n\n```csharp\nNodeHealth nodeHealth = fabricClient.HealthManager.GetNodeHealthAsync(nodeName).Result;\n```\n\nThe following gets the node health for the specified node name, passing in events filter and custom policy through System.Fabric.Description.NodeHealthQueryDescription.\n\n```csharp\nvar queryDescription = new NodeHealthQueryDescription(nodeName)\n{\n    HealthPolicy = new ClusterHealthPolicy() {  ConsiderWarningAsError = true },\n    EventsFilter = new HealthEventsFilter() { HealthStateFilter = (long)HealthStateFilter.Warning },\n};\n\nNodeHealth nodeHealth = fabricClient.HealthManager.GetNodeHealthAsync(queryDescription).Result;\n```\n\n### Powershell\nThe cmdlet to get node health is Get-ServiceFabricNodeHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet.\nThe following cmdlet gets node health with default health policies.\n\n```powershell\nPS C:\\> Get-ServiceFabricNodeHealth -NodeName Node.1\n\nNodeName              : Node.1\nAggregatedHealthState : Ok\nHealthEvents          :\n                        SourceId              : System.FM\n                        Property              : State\n                        HealthState           : Ok\n                        SequenceNumber        : 5\n                        SentAt                : 4/21/2015 8:01:17 AM\n                        ReceivedAt            : 4/21/2015 8:02:12 AM\n                        TTL                   : Infinite\n                        Description           : Fabric node is up.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : ->Ok = 4/21/2015 8:02:12 AM\n```\n\nThe following cmdlet gets the health of all nodes in the cluster.\n\n```powershell\nPS C:\\> Get-ServiceFabricNode | Get-ServiceFabricNodeHealth | select NodeName, AggregatedHealthState | ft -AutoSize\n\nNodeName AggregatedHealthState\n-------- ---------------------\nNode.4                      Ok\nNode.2                      Ok\nNode.1                      Ok\nNode.5                      Ok\nNode.3                      Ok\n```\n\n## Get application health\nReturns the health of an application entity. Contains the health states of deployed application and service children. Input:\n\n- [required] Application name (Uri) which identifies the application\n\n- [optional] Application health policy used to override the application manifest policies.\n\n- [optional] Filter to return only events, services, deployed applications with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get application health, create a FabricClient and call GetApplicationHealthAsync method on its HealthManager.\n\nThe following gets the application health for the specified application name Uri.\n\n```csharp\nApplicationHealth applicationHealth = fabricClient.HealthManager.GetApplicationHealthAsync(applicationName).Result;\n```\n\nThe following gets the application health for the specified application name Uri, specifying filters and custom policy through System.Fabric.Description.ApplicationHealthQueryDescription.\n\n```csharp\nHealthStateFilter warningAndErrors = HealthStateFilter.Error | HealthStateFilter.Warning;\nvar serviceTypePolicy = new ServiceTypeHealthPolicy()\n{\n    MaxPercentUnhealthyPartitionsPerService = 0,\n    MaxPercentUnhealthyReplicasPerPartition = 5,\n    MaxPercentUnhealthyServices = 0,\n};\nvar policy = new ApplicationHealthPolicy()\n{\n    ConsiderWarningAsError = false,\n    DefaultServiceTypeHealthPolicy = serviceTypePolicy,\n    MaxPercentUnhealthyDeployedApplications = 0,\n};\n\nvar queryDescription = new ApplicationHealthQueryDescription(applicationName)\n{\n    HealthPolicy = policy,\n    EventsFilter = new HealthEventsFilter() { HealthStateFilter = (long)warningAndErrors },\n    ServicesFilter = new ServiceHealthStatesFilter() { HealthStateFilter = (long)warningAndErrors },\n    DeployedApplicationsFilter = new DeployedApplicationHealthStatesFilter() { HealthStateFilter = (long)warningAndErrors },\n};\n\nApplicationHealth applicationHealth = fabricClient.HealthManager.GetApplicationHealthAsync(queryDescription).Result;\n```\n\n### Powershell\nThe cmdlet to get application health is Get-ServiceFabricApplicationHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet.\n\nThe following cmdlet returns the health of the fabric:/WordCount application.\n\n```powershell\nPS c:\\> Get-ServiceFabricApplicationHealth fabric:/WordCount\n\nApplicationName                 : fabric:/WordCount\nAggregatedHealthState           : Warning\nUnhealthyEvaluations            :\n                                  Unhealthy services: 100% (1/1), ServiceType='WordCount.Service',\n                                  MaxPercentUnhealthyServices=0%.\n\n                                  Unhealthy service: ServiceName='fabric:/WordCount/WordCount.Service',\n                                  AggregatedHealthState='Warning'.\n\n                                  Unhealthy partitions: 100% (1/1), MaxPercentUnhealthyPartitionsPerService=0%.\n\n                                  Unhealthy partition: PartitionId='325da69f-16d4-4418-9c30-1feaa40a072c',\n                                  AggregatedHealthState='Warning'.\n\n                                  Unhealthy event: SourceId='System.FM', Property='State', HealthState='Warning',\n                                  ConsiderWarningAsError=false.\n\nServiceHealthStates             :\n                                  ServiceName           : fabric:/WordCount/WordCount.WebService\n                                  AggregatedHealthState : Ok\n\n                                  ServiceName           : fabric:/WordCount/WordCount.Service\n                                  AggregatedHealthState : Warning\n\nDeployedApplicationHealthStates :\n                                  ApplicationName       : fabric:/WordCount\n                                  NodeName              : Node.2\n                                  AggregatedHealthState : Ok\n\n                                  ApplicationName       : fabric:/WordCount\n                                  NodeName              : Node.5\n                                  AggregatedHealthState : Ok\n\n                                  ApplicationName       : fabric:/WordCount\n                                  NodeName              : Node.4\n                                  AggregatedHealthState : Ok\n\n                                  ApplicationName       : fabric:/WordCount\n                                  NodeName              : Node.1\n                                  AggregatedHealthState : Ok\n\n                                  ApplicationName       : fabric:/WordCount\n                                  NodeName              : Node.3\n                                  AggregatedHealthState : Ok\n\nHealthEvents                    :\n                                  SourceId              : System.CM\n                                  Property              : State\n                                  HealthState           : Ok\n                                  SequenceNumber        : 2456\n                                  SentAt                : 4/20/2015 9:57:06 PM\n                                  ReceivedAt            : 4/20/2015 9:57:06 PM\n                                  TTL                   : Infinite\n                                  Description           : Application has been created.\n                                  RemoveWhenExpired     : False\n                                  IsExpired             : False\n                                  Transitions           : ->Ok = 4/20/2015 9:57:06 PM\n```\n\nThe following Powershell passes in custom policy and filters children and events.\n\n```powershell\nPS C:\\> $errorFilter = [System.Fabric.Health.HealthStateFilter]::Error.value__\nGet-ServiceFabricApplicationHealth -ApplicationName fabric:/WordCount -ConsiderWarningAsError $true -ServicesHealthStateFilter $errorFilter -EventsHealthStateFilter $errorFilter -DeployedApplicationsHealthStateFilter $errorFilter\n\nApplicationName                 : fabric:/WordCount\nAggregatedHealthState           : Error\nUnhealthyEvaluations            :\n                                  Unhealthy services: 100% (1/1), ServiceType='WordCount.Service', MaxPercentUnhealthyServices=0%.\n\n                                  Unhealthy service: ServiceName='fabric:/WordCount/WordCount.Service', AggregatedHealthState='Error'.\n\n                                  Unhealthy partitions: 100% (1/1), MaxPercentUnhealthyPartitionsPerService=0%.\n\n                                  Unhealthy partition: PartitionId='8f82daff-eb68-4fd9-b631-7a37629e08c0', AggregatedHealthState='Error'.\n\n                                  Unhealthy event: SourceId='System.FM', Property='State', HealthState='Warning', ConsiderWarningAsError=true.\n\nServiceHealthStates             :\n                                  ServiceName           : fabric:/WordCount/WordCount.Service\n                                  AggregatedHealthState : Error\n\nDeployedApplicationHealthStates : None\nHealthEvents                    : None\n```\n\n## Get service health\nReturns the health of a service entity. Contains the partition health states. Input:\n\n- [required] Service name (Uri) which identifies the service\n- [optional] Application health policy used to override the application manifest policy.\n- [optional] Filter to return only events andpartitions with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get service health through API, create a FabricClient and call GetServiceHealthAsync method on its HealthManager.\n\nThe following example get the health of a service with specified service name (Uri):\n\n```charp\nServiceHealth serviceHealth = fabricClient.HealthManager.GetServiceHealthAsync(serviceName).Result;\n```\n\nThe following gets the service health for the specified service name Uri, specifying filters and custom policy through System.Fabric.Description.ServiceHealthQueryDescription.\n\n```csharp\nvar queryDescription = new ServiceHealthQueryDescription(serviceName)\n{\n    EventsFilter = new HealthEventsFilter() { HealthStateFilter = (long)HealthStateFilter.All },\n    PartitionsFilter = new PartitionHealthStatesFilter() { HealthStateFilter = (long)HealthStateFilter.Error },\n};\n\nServiceHealth serviceHealth = fabricClient.HealthManager.GetServiceHealthAsync(queryDescription).Result;\n```\n\n### Powershell\nThe cmdlet to get service health is Get-ServiceFabricServiceHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet.\n\nThe following cmdlet gets the service health using default health policies.\n\n```powershell\nPS C:\\> Get-ServiceFabricServiceHealth -ServiceName fabric:/WordCount/WordCount.Service\n\n\nServiceName           : fabric:/WordCount/WordCount.Service\nAggregatedHealthState : Warning\nUnhealthyEvaluations  :\n                        Unhealthy partitions: 100% (1/1), MaxPercentUnhealthyPartitionsPerService=0%.\n\n                        Unhealthy partition: PartitionId='8f82daff-eb68-4fd9-b631-7a37629e08c0', AggregatedHealthState='Warning'.\n\n                        Unhealthy event: SourceId='System.FM', Property='State', HealthState='Warning', ConsiderWarningAsError=false.\n\nPartitionHealthStates :\n                        PartitionId           : 8f82daff-eb68-4fd9-b631-7a37629e08c0\n                        AggregatedHealthState : Warning\n\nHealthEvents          :\n                        SourceId              : System.FM\n                        Property              : State\n                        HealthState           : Ok\n                        SequenceNumber        : 3\n                        SentAt                : 4/20/2015 10:12:29 PM\n                        ReceivedAt            : 4/20/2015 10:12:33 PM\n                        TTL                   : Infinite\n                        Description           : Service has been created.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : ->Ok = 4/20/2015 10:12:33 PM\n```\n\n## Get partition health\nReturns the health of a partition entity. Contains the replica health states. Input:\n\n- [required] Partition id (Guid) which identifies the partition\n\n- [optional] Application health policy used to override the application manifest policy.\n\n- [optional] Filter to return only events, replicas with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get partition health through API, create a FabricClient and call GetPartitionHealthAsync method on its HealthManager. To specify optional parameters, create System.Fabric.Description.PartitionHealthQueryDescription.\n\n```csharp\nPartitionHealth partitionHealth = fabricClient.HealthManager.GetPartitionHealthAsync(partitionId).Result;\n```\n\n### Powershell\nThe cmdlet to get partition health is Get-ServiceFabricPartitionHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet.\n\nThe following cmdlet gets the health for all partitions of the word count service.\n\n```powershell\nPS C:\\> Get-ServiceFabricPartition fabric:/WordCount/WordCount.Service | Get-ServiceFabricPartitionHealth\n\nPartitionId           : 8f82daff-eb68-4fd9-b631-7a37629e08c0\nAggregatedHealthState : Warning\nUnhealthyEvaluations  :\n                        Unhealthy event: SourceId='System.FM', Property='State', HealthState='Warning', ConsiderWarningAsError=false.\n\nReplicaHealthStates   :\n                        ReplicaId             : 130740415594605870\n                        AggregatedHealthState : Ok\n\n                        ReplicaId             : 130740415502123433\n                        AggregatedHealthState : Ok\n\n                        ReplicaId             : 130740415594605867\n                        AggregatedHealthState : Ok\n\n                        ReplicaId             : 130740415594605869\n                        AggregatedHealthState : Ok\n\n                        ReplicaId             : 130740415594605868\n                        AggregatedHealthState : Ok\n\nHealthEvents          :\n                        SourceId              : System.FM\n                        Property              : State\n                        HealthState           : Warning\n                        SequenceNumber        : 39\n                        SentAt                : 4/20/2015 10:12:59 PM\n                        ReceivedAt            : 4/20/2015 10:13:03 PM\n                        TTL                   : Infinite\n                        Description           : Partition is below target replica or instance count.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : Ok->Warning = 4/20/2015 10:13:03 PM\n```\n\n## Get replica health\nReturns the health of a replica.Input:\n\n- [required] Partition id (Guid) and replica id which identify the replica\n\n- [optional] Application health policy parameters used to override the application manifest policies.\n\n- [optional] Filter to return only events with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get replica health through API, create a FabricClient and call GetReplicaHealthAsync method on its HealthManager. Specify advanced parameters with System.Fabric.Description.ReplicaHealthQueryDescription.\n\n```csharp\nReplicaHealth replicaHealth = fabricClient.HealthManager.GetReplicaHealthAsync(partitionId, replicaId).Result;\n```\n\n### Powershell\nThe cmdlet to get replica health is Get-ServiceFabricReplicaHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet.\n\nThe following cmdlet gets the health of the primary replica for all partitions of the service.\n\n```powershell\nPS C:\\> Get-ServiceFabricPartition fabric:/WordCount/WordCount.Service | Get-ServiceFabricReplica | where {$_.ReplicaRole -eq \"Primary\"} | Get-ServiceFabricReplicaHealth\n\nPartitionId           : 8f82daff-eb68-4fd9-b631-7a37629e08c0\nReplicaId             : 130740415502123433\nAggregatedHealthState : Ok\nHealthEvents          :\n                        SourceId              : System.RA\n                        Property              : State\n                        HealthState           : Ok\n                        SequenceNumber        : 130740415502802942\n                        SentAt                : 4/20/2015 10:12:30 PM\n                        ReceivedAt            : 4/20/2015 10:12:34 PM\n                        TTL                   : Infinite\n                        Description           : Replica has been created.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : ->Ok = 4/20/2015 10:12:34 PM\n```\n\n## Get deployed application health\nReturns the health of an application deployed on a node entity. Contains the deployed service package health states. Input:\n\n- [required] Application name (Uri) and node name (string) which identify the deployed application\n\n- [optional] Application health policy used to override the application manifest policies.\n\n- [optional] Filter to return only events, deployed service packages with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get the health on an application deployed on a node through API, create a FabricClient and call GetDeployedApplicationHealthAsync method on its HealthManager. To specify optional parameters, use System.Fabric.Description.DeployedApplicationHealthQueryDescription.\n\n```csharp\nDeployedApplicationHealth health = fabricClient.HealthManager.GetDeployedApplicationHealthAsync(\n    new DeployedApplicationHealthQueryDescription(applicationName, nodeName)).Result;\n```\n\n### Powershell\nThe cmdlet to get deployed application health is Get-ServiceFabricDeployedApplicationHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet. To find out where an application is deployed, run Get-ServiceFabricApplicationHealth and look at the deployed application children.\n\nThe following cmdlter gets the health of the fabric:/WordCount application deployed on node Node.1.\n\n```powershell\nPS C:\\> Get-ServiceFabricDeployedApplicationHealth -ApplicationName fabric:/WordCount -NodeName Node.1\nApplicationName                    : fabric:/WordCount\nNodeName                           : Node.1\nAggregatedHealthState              : Ok\nDeployedServicePackageHealthStates :\n                                     ServiceManifestName   : WordCount.WebService\n                                     NodeName              : Node.1\n                                     AggregatedHealthState : Ok\n\n                                     ServiceManifestName   : WordCount.Service\n                                     NodeName              : Node.1\n                                     AggregatedHealthState : Ok\n\nHealthEvents                       :\n                                     SourceId              : System.Hosting\n                                     Property              : Activation\n                                     HealthState           : Ok\n                                     SequenceNumber        : 130740415502842941\n                                     SentAt                : 4/20/2015 10:12:30 PM\n                                     ReceivedAt            : 4/20/2015 10:12:34 PM\n                                     TTL                   : Infinite\n                                     Description           : The application was activated successfully.\n                                     RemoveWhenExpired     : False\n                                     IsExpired             : False\n                                     Transitions           : ->Ok = 4/20/2015 10:12:34 PM\n```\n\n## Get deployed service package health\nReturns the health of a deployed service package entity. Input:\n\n- [required] Application name (Uri), node name (string) and service manifest name (string) which identify the deployed service package\n\n- [optional] Application health policy used to override the application manifest policy.\n\n- [optional] Filter to return only events with certain health state (eg. return only errors or warning or errors etc).\n\n### API\nTo get the health of a deployed service package through API, create a FabricClient and call GetDeployedServicePackageHealthAsync method on its HealthManager.\n\n```csharp\nDeployedServicePackageHealth health = fabricClient.HealthManager.GetDeployedServicePackageHealthAsync(\n    new DeployedServicePackageHealthQueryDescription(applicationName, nodeName, serviceManifestName)).Result;\n```\n\n### Powershell\nThe cmdlet to get deployed service package health is Get-ServiceFabricDeployedServicePackageHealth. First connect to the cluster with Connect-ServiceFabricCluster cmdlet. To see where an aplication is deployed, run Get-ServiceFabricApplicationHealth, look at deployed applications. To see what service packages are in an application, look at the deployed service package children in Get-ServiceFabricDeployedApplicationHealth output.\n\nThe following cmdlet gets the health of the WordCount.Service service package of the fabric:/WordCount application deployed on node Node.1. The entity has System.Hosting reports for successful service package and entry point activation and successful service type registration.\n\n```powershell\nPS C:\\> Get-ServiceFabricDeployedApplication -ApplicationName fabric:/WordCount -NodeName Node.1 | Get-ServiceFabricDeployedServicePackageHealth -ServiceManifestName WordCount.Service\n\nApplicationName       : fabric:/WordCount\nServiceManifestName   : WordCount.Service\nNodeName              : Node.1\nAggregatedHealthState : Ok\nHealthEvents          :\n                        SourceId              : System.Hosting\n                        Property              : Activation\n                        HealthState           : Ok\n                        SequenceNumber        : 130740415506383060\n                        SentAt                : 4/20/2015 10:12:30 PM\n                        ReceivedAt            : 4/20/2015 10:12:34 PM\n                        TTL                   : Infinite\n                        Description           : The ServicePackage was activated successfully.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : ->Ok = 4/20/2015 10:12:34 PM\n\n                        SourceId              : System.Hosting\n                        Property              : CodePackageActivation:Code:EntryPoint\n                        HealthState           : Ok\n                        SequenceNumber        : 130740415506543054\n                        SentAt                : 4/20/2015 10:12:30 PM\n                        ReceivedAt            : 4/20/2015 10:12:34 PM\n                        TTL                   : Infinite\n                        Description           : The CodePackage was activated successfully.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : ->Ok = 4/20/2015 10:12:34 PM\n\n                        SourceId              : System.Hosting\n                        Property              : ServiceTypeRegistration:WordCount.Service\n                        HealthState           : Ok\n                        SequenceNumber        : 130740415520193499\n                        SentAt                : 4/20/2015 10:12:32 PM\n                        ReceivedAt            : 4/20/2015 10:12:34 PM\n                        TTL                   : Infinite\n                        Description           : The ServiceType was registered successfully.\n                        RemoveWhenExpired     : False\n                        IsExpired             : False\n                        Transitions           : ->Ok = 4/20/2015 10:12:34 PM\n```\n\n## General Queries\nThe general queries return the list of Service Fabric entities of the specified type. They are exposed through API (methods on FabricClient.QueryManager), Powershell cmdlets and REST. These queries aggregate sub-queries from multiple components. One of them is the [Health Store](service-fabric-health-introduction.md#health-store), which populates the aggregated health state for each query result.  \n\n> [AZURE.NOTE] The general queries return the aggregated health state of the entity and do not contain the rich health data. If an entity is not healthy, you can follow up with health queries to get all health information, like events, children health states and unhealthy evaluations.\n\nIf the general queries return Unknown health state for an entity, it's possible that the Health Store doesn't have complete data about the entity or the sub-query to the Health Store wasn't successful (eg. communication error, health store was throttled etc). Follow up with a health query for the entity. This may succeed, if the sub-query encountered transient errors (eg. network issues), or will give more details about why the entity is not exposed from Health store.\n\nThe queries that contains HealthState for entities are:\n\n- Node list. Returns the list nodes in the cluster.\n  - Api: FabricClient.QueryManager.GetNodeListAsync.\n  - Powershell: Get-ServiceFabricNode.\n- Application list. Returns the list of applications in the cluster.\n  - Api: FabricClient.QueryManager.GetApplicationListAsync.\n  - Powershell: Get-ServiceFabricApplication.\n- Service list. Returns the list of services in an application.\n  - Api: FabricClient.QueryManager.GetServiceListAsync.\n  - Powershell: Get-ServiceFabricService.\n- Partition list. Returns the list of partitions in a service.\n  - Api: FabricClient.QueryManager.GetPartitionListAsync.\n  - Powershell: Get-ServiceFabricPartition.\n- Replica list. Returns the list of replicas in a partition.\n  - Api: FabricClient.QueryManager.GetReplicaListAsync.\n  - Powershell: Get-ServiceFabricReplica.\n- Deployed application list. Returns the list of deployed applications on a node.\n  - Api: FabricClient.QueryManager.GetDeployedApplicationListAsync.\n  - Powershell: Get-ServiceFabricDeployedApplication.\n- Deployed service package list. Returns the list of service packages in a deployed application.\n  - Api: FabricClient.QueryManager.GetDeployedServicePackageListAsync.\n  - Powershell: Get-ServiceFabricDeployedApplication.\n\n### Examples\n\nThe following gets the unhealthy applications in the cluster:\n\n```csharp\nvar applications = fabricClient.QueryManager.GetApplicationListAsync().Result.Where(\n  app => app.HealthState == HealthState.Error);\n```\n\nThe following cmdlet gets application details for fabric:/WordCount application. Notice that health state is Warning.\n\n```powershell\nPS C:\\> Get-ServiceFabricApplication -ApplicationName fabric:/WordCount\n\nApplicationName        : fabric:/WordCount\nApplicationTypeName    : WordCount\nApplicationTypeVersion : 1.0.0.0\nApplicationStatus      : Ready\nHealthState            : Warning\nApplicationParameters  : { \"_WFDebugParams_\" = \"[{\"ServiceManifestName\":\"WordCount.WebService\",\"CodePackageName\":\"Code\",\"EntryPointType\":\"Main\"}]\" }\n```\n\nThe following cmdlet gets the services with health state Warning.\n\n```powershell\nPS C:\\> Get-ServiceFabricApplication | Get-ServiceFabricService | where {$_.HealthState -eq \"Warning\"}\n\nServiceName            : fabric:/WordCount/WordCount.Service\nServiceKind            : Stateful\nServiceTypeName        : WordCount.Service\nIsServiceGroup         : False\nServiceManifestVersion : 1.0\nHasPersistedState      : True\nServiceStatus          : Active\nHealthState            : Warning\n```\n\n## Cluster and application upgrade\nDuring cluster and application monitored upgrade, Service Fabric checks health to ensure everything is and remains healthy. If something is unhealthy per configured policy, the upgrade is either paused to allow user interaction or automatically rolled back.\n\nDuring **cluster** upgrade, you can get the cluster upgrade status, which will include unhealthy evaluations that point to what is unhealthy in the cluster. If the upgrade is rolled back due to health issues, the upgrade status will keep the last unhealthy reasons so administrators can investigate what went wrong.\nSimilarly, during **application** upgrade, the application upgrade status contains the unhealthy evaluations.\n\nThe following shows the application upgrade status for a modified fabric:/WordCount application. A watchdog reported an Error on one of its replica. The upgrade is rolling back because the health checks are not respected.\n\n```powershell\nPS C:\\> Get-ServiceFabricApplicationUpgrade fabric:/WordCount\n\nApplicationName               : fabric:/WordCount\nApplicationTypeName           : WordCount\nTargetApplicationTypeVersion  : 1.0.0.0\nApplicationParameters         : {}\nStartTimestampUtc             : 4/21/2015 5:23:26 PM\nFailureTimestampUtc           : 4/21/2015 5:23:37 PM\nFailureReason                 : HealthCheck\nUpgradeState                  : RollingBackInProgress\nUpgradeDuration               : 00:00:23\nCurrentUpgradeDomainDuration  : 00:00:00\nCurrentUpgradeDomainProgress  : UD1\n\n                                NodeName            : Node1\n                                UpgradePhase        : Upgrading\n\n                                NodeName            : Node2\n                                UpgradePhase        : Upgrading\n\n                                NodeName            : Node3\n                                UpgradePhase        : PreUpgradeSafetyCheck\n                                PendingSafetyChecks :\n                                EnsurePartitionQuorum - PartitionId: 30db5be6-4e20-4698-8185-4bd7ca744020\nNextUpgradeDomain             : UD2\nUpgradeDomainsStatus          : { \"UD1\" = \"Completed\";\n                                \"UD2\" = \"Pending\";\n                                \"UD3\" = \"Pending\";\n                                \"UD4\" = \"Pending\" }\nUnhealthyEvaluations          :\n                                Unhealthy services: 100% (1/1), ServiceType='WordCount.Service', MaxPercentUnhealthyServices=0%.\n\n                                Unhealthy service: ServiceName='fabric:/WordCount/WordCount.Service', AggregatedHealthState='Error'.\n\n                                Unhealthy partitions: 100% (1/1), MaxPercentUnhealthyPartitionsPerService=0%.\n\n                                Unhealthy partition: PartitionId='30db5be6-4e20-4698-8185-4bd7ca744020', AggregatedHealthState='Error'.\n\n                                Unhealthy replicas: 16% (1/6), MaxPercentUnhealthyReplicasPerPartition=0%.\n\n                                Unhealthy replica: PartitionId='30db5be6-4e20-4698-8185-4bd7ca744020', ReplicaOrInstanceId='130741105362491906', AggregatedHealthState='Error'.\n\n                                Error event: SourceId='DiskWatcher', Property='Disk'.\n\nUpgradeKind                   : Rolling\nRollingUpgradeMode            : UnmonitoredAuto\nForceRestart                  : False\nUpgradeReplicaSetCheckTimeout : 00:15:00\n```\n\nRead more about [Service Fabric Application Upgrade](service-fabric-application-upgrade.md).\n\n## Troubleshoot with Health\nWhenever there is an issue in the cluster or an application, look at the cluster or the application health to pinpoint what is wrong. The unhealthy evaluations will show with details what triggered the current unhealthy state. If needed, drill down into unhealthy children entities to figure out issues.\n\n## Next steps\n[Using System health reports for troubleshooting](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)\n\n[Adding custom Service Fabric health reports](service-fabric-report-health.md)\n\n[How to Monitor and Diagnose Services locally](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)\n\n[Service Fabric Application Upgrade](service-fabric-application-upgrade.md)\n "
}