{
  "nodes": [
    {
      "content": "Troubleshoot StorSimple device deployment issues | Microsoft Azure",
      "pos": [
        27,
        93
      ]
    },
    {
      "content": "Describes how to diagnose and fix errors that occur when you first deploy StorSimple.",
      "pos": [
        111,
        196
      ]
    },
    {
      "content": "Troubleshoot StorSimple device deployment issues",
      "pos": [
        479,
        527
      ]
    },
    {
      "content": "Overview",
      "pos": [
        532,
        540
      ]
    },
    {
      "content": "This article provides helpful troubleshooting guidance for your Microsoft Azure StorSimple deployment.",
      "pos": [
        542,
        644
      ]
    },
    {
      "content": "It describes common issues, possible causes, and recommended steps to help you resolve problems that you might experience when you configure StorSimple.",
      "pos": [
        645,
        797
      ]
    },
    {
      "content": "This information applies to both the StorSimple on-premises physical device and the StorSimple virtual device.",
      "pos": [
        798,
        908
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Device configuration-related issues that you may face can occur when you deploy the device for the first time, or they can occur later, when the device is operational.",
      "pos": [
        912,
        1092
      ]
    },
    {
      "content": "This article focuses on troubleshooting first-time deployment issues.",
      "pos": [
        1093,
        1162
      ]
    },
    {
      "content": "To troubleshoot an operational device, go to <bpt id=\"p1\">[</bpt>Troubleshoot operational device issues<ept id=\"p1\">](storsimple-troubleshoot-operational-device.md)</ept>.",
      "pos": [
        1163,
        1296
      ]
    },
    {
      "content": "This article also describes the tools for troubleshooting StorSimple deployments and provides a step-by-step troubleshooting example.",
      "pos": [
        1298,
        1431
      ]
    },
    {
      "content": "First-time deployment issues",
      "pos": [
        1436,
        1464
      ]
    },
    {
      "content": "If you run into an issue when deploying your device for the first time, consider the following:",
      "pos": [
        1466,
        1561
      ]
    },
    {
      "pos": [
        1565,
        1852
      ],
      "content": "If you are troubleshooting a physical device, make sure that the hardware has been installed and configured as described in <bpt id=\"p1\">[</bpt>Install your StorSimple 8100 device<ept id=\"p1\">](storsimple-8100-hardware-installation.md)</ept> or <bpt id=\"p2\">[</bpt>Install your StorSimple 8600 device<ept id=\"p2\">](storsimple-8600-hardware-installation.md)</ept>."
    },
    {
      "content": "Check prerequisites for deployment.",
      "pos": [
        1855,
        1890
      ]
    },
    {
      "content": "Make sure that you have all the information described in the <bpt id=\"p1\">[</bpt>deployment configuration checklist<ept id=\"p1\">](storsimple-deployment-walkthrough.md#deployment-configuration-checklist)</ept>.",
      "pos": [
        1891,
        2062
      ]
    },
    {
      "content": "Review the StorSimple Release Notes to see if the problem is described.",
      "pos": [
        2065,
        2136
      ]
    },
    {
      "content": "The release notes include workarounds for known installation problems.",
      "pos": [
        2137,
        2207
      ]
    },
    {
      "content": "During device deployment, the most common issues that users face occur when they run the setup wizard and when they register the device via Windows PowerShell for StorSimple.",
      "pos": [
        2210,
        2384
      ]
    },
    {
      "content": "(You use Windows PowerShell for StorSimple to register and configure your StorSimple device.",
      "pos": [
        2385,
        2477
      ]
    },
    {
      "content": "For more information on device registration, see <bpt id=\"p1\">[</bpt>Step 3: Configure and register your device through Windows PowerShell for StorSimple<ept id=\"p1\">](storsimple-deployment-walkthrough.md#step-3-configure-and-register-the-device-through-windows-powershell-for-storsimple)</ept>).",
      "pos": [
        2478,
        2736
      ]
    },
    {
      "content": "The following sections can help you resolve issues that you encounter when you configure the StorSimple device for the first time.",
      "pos": [
        2738,
        2868
      ]
    },
    {
      "content": "First-time setup wizard process",
      "pos": [
        2873,
        2904
      ]
    },
    {
      "content": "The following steps summarize the setup wizard process.",
      "pos": [
        2906,
        2961
      ]
    },
    {
      "content": "For detailed setup information, see <bpt id=\"p1\">[</bpt>Deploy your on-premises StorSimple device<ept id=\"p1\">](storsimple-deployment-walkthrough.md)</ept>.",
      "pos": [
        2962,
        3080
      ]
    },
    {
      "pos": [
        3085,
        3251
      ],
      "content": "Run the <bpt id=\"p1\">[</bpt>Invoke-HcsSetupWizard<ept id=\"p1\">](https://technet.microsoft.com/library/dn688135.aspx)</ept> cmdlet to start the setup wizard that will guide you through the remaining steps."
    },
    {
      "content": "Configure the network: the setup wizard lets you configure network settings for the DATA 0 network interface on your StorSimple device.",
      "pos": [
        3256,
        3391
      ]
    },
    {
      "content": "These settings include the following:",
      "pos": [
        3392,
        3429
      ]
    },
    {
      "content": "Virtual IP (VIP), subnet mask, and gateway – The <bpt id=\"p1\">[</bpt>Set-HcsNetInterface<ept id=\"p1\">](https://technet.microsoft.com/library/dn688161.aspx)</ept> cmdlet is executed in the background.",
      "pos": [
        3434,
        3595
      ]
    },
    {
      "content": "It configures the IP address, subnet mask, and gateway for the DATA 0 network interface on your StorSimple device.",
      "pos": [
        3596,
        3710
      ]
    },
    {
      "content": "Primary DNS server – The <bpt id=\"p1\">[</bpt>Set-HcsDnsClientServerAddress<ept id=\"p1\">](https://technet.microsoft.com/library/dn688172.aspx)</ept> cmdlet is executed in the background.",
      "pos": [
        3715,
        3862
      ]
    },
    {
      "content": "It configures the DNS settings for your StorSimple solution.",
      "pos": [
        3863,
        3923
      ]
    },
    {
      "content": "NTP server – The <bpt id=\"p1\">[</bpt>Set-HcsNtpClientServerAddress<ept id=\"p1\">](https://technet.microsoft.com/library/dn688138.aspx)</ept> cmdlet is executed in the background.",
      "pos": [
        3928,
        4067
      ]
    },
    {
      "content": "It configures the NTP server settings for your StorSimple solution.",
      "pos": [
        4068,
        4135
      ]
    },
    {
      "content": "Optional web proxy – The <bpt id=\"p1\">[</bpt>Set-HcsWebProxy<ept id=\"p1\">](https://technet.microsoft.com/library/dn688154.aspx)</ept> cmdlet is executed in the background.",
      "pos": [
        4140,
        4273
      ]
    },
    {
      "content": "It sets and enables the web proxy configuration for your StorSimple solution.",
      "pos": [
        4274,
        4351
      ]
    },
    {
      "content": "Set up the passwords: the next step is to set up device administrator and StorSimple Snapshot Manager passwords.",
      "pos": [
        4355,
        4467
      ]
    },
    {
      "content": "If you are running Update 1, then you will not be required to set up the StorSimple Snapshot Manager password.",
      "pos": [
        4468,
        4578
      ]
    },
    {
      "content": "The device administrator password is used to log on to your device.",
      "pos": [
        4583,
        4650
      ]
    },
    {
      "content": "The default device password is <bpt id=\"p1\">**</bpt>Password1<ept id=\"p1\">**</ept>.",
      "pos": [
        4651,
        4696
      ]
    },
    {
      "content": "The StorSimple Snapshot Manager password is required when you configure a device to use StorSimple Snapshot Manager.",
      "pos": [
        4701,
        4817
      ]
    },
    {
      "content": "You need to first set the password in the setup wizard, and then you can set and change it from the StorSimple Manager service.",
      "pos": [
        4818,
        4945
      ]
    },
    {
      "content": "This password authenticates the device with StorSimple Snapshot Manager.",
      "pos": [
        4946,
        5018
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> Passwords are collected before registration, but applied only after you successfully register the device.",
      "pos": [
        5027,
        5150
      ]
    },
    {
      "content": "If there is a failure to apply a password, you will be prompted to supply the password again until the required passwords (that meet the complexity requirements) are collected.",
      "pos": [
        5151,
        5327
      ]
    },
    {
      "content": "Register the device: the final step is to register the device with the StorSimple Manager service running in Microsoft Azure.",
      "pos": [
        5332,
        5457
      ]
    },
    {
      "content": "The registration requires you to <bpt id=\"p1\">[</bpt>get the service registration key<ept id=\"p1\">](storsimple-manage-service.md#get-the-service-registration-key)</ept> from the Azure Management Portal, and provide it in the setup wizard.",
      "pos": [
        5458,
        5658
      ]
    },
    {
      "content": "After the device is successfully registered, a service data encryption key is provided to you.",
      "pos": [
        5659,
        5753
      ]
    },
    {
      "content": "Be sure to keep this encryption key in a safe location because it will be required to register all subsequent devices with the service.",
      "pos": [
        5754,
        5889
      ]
    },
    {
      "content": "Common errors during device deployment",
      "pos": [
        5894,
        5932
      ]
    },
    {
      "content": "The following tables list the common errors that you might encounter when you:",
      "pos": [
        5934,
        6012
      ]
    },
    {
      "content": "Configure the required network settings.",
      "pos": [
        6016,
        6056
      ]
    },
    {
      "content": "Configure the optional web proxy settings.",
      "pos": [
        6059,
        6101
      ]
    },
    {
      "content": "Set up the device administrator and StorSimple Snapshot Manager passwords.",
      "pos": [
        6104,
        6178
      ]
    },
    {
      "content": "Register the device.",
      "pos": [
        6182,
        6202
      ]
    },
    {
      "content": "Errors during the required network settings",
      "pos": [
        6208,
        6251
      ]
    },
    {
      "content": "No.",
      "pos": [
        6255,
        6258
      ]
    },
    {
      "content": "Error message",
      "pos": [
        6260,
        6273
      ]
    },
    {
      "content": "Possible causes",
      "pos": [
        6276,
        6291
      ]
    },
    {
      "content": "Recommended action",
      "pos": [
        6294,
        6312
      ]
    },
    {
      "content": "1",
      "pos": [
        6379,
        6380
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: This command can only be run on the active controller.",
      "pos": [
        6384,
        6461
      ]
    },
    {
      "content": "Configuration was being performed on the passive controller.",
      "pos": [
        6464,
        6524
      ]
    },
    {
      "content": "Run this command from the active controller.",
      "pos": [
        6526,
        6570
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Identify an active controller on your device<ept id=\"p1\">](storsimple-controller-replacement.md#identify-the-active-controller-on-your-device)</ept>.",
      "pos": [
        6571,
        6728
      ]
    },
    {
      "content": "2",
      "pos": [
        6732,
        6733
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: Device not ready.",
      "pos": [
        6736,
        6776
      ]
    },
    {
      "content": "There are issues with the network connectivity on DATA 0.",
      "pos": [
        6779,
        6836
      ]
    },
    {
      "content": "Check the physical network connectivity on DATA 0.",
      "pos": [
        6838,
        6888
      ]
    },
    {
      "content": "3",
      "pos": [
        6892,
        6893
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: There is an IP address conflict with another system on the network (Exception from HRESULT: 0x80070263).",
      "pos": [
        6896,
        7023
      ]
    },
    {
      "content": "The IP supplied for DATA 0 was already in use by another system.",
      "pos": [
        7026,
        7090
      ]
    },
    {
      "content": "Provide a new IP that is not in use.",
      "pos": [
        7093,
        7129
      ]
    },
    {
      "content": "4",
      "pos": [
        7133,
        7134
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: A cluster resource failed.",
      "pos": [
        7137,
        7186
      ]
    },
    {
      "content": "(Exception from HRESULT:0x800713AE).",
      "pos": [
        7187,
        7223
      ]
    },
    {
      "content": "Duplicate VIP.",
      "pos": [
        7226,
        7240
      ]
    },
    {
      "content": "The supplied IP is already in use.",
      "pos": [
        7241,
        7275
      ]
    },
    {
      "content": "Provide a new IP that is not in use.",
      "pos": [
        7277,
        7313
      ]
    },
    {
      "content": "5",
      "pos": [
        7317,
        7318
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: Invalid IPv4 address.",
      "pos": [
        7321,
        7365
      ]
    },
    {
      "content": "The IP address is provided in an incorrect format.",
      "pos": [
        7368,
        7418
      ]
    },
    {
      "content": "Check the format and supply your IP address again.",
      "pos": [
        7420,
        7470
      ]
    },
    {
      "content": "For more information, see [Ipv4 Addressing][1].",
      "pos": [
        7471,
        7518
      ]
    },
    {
      "content": "6",
      "pos": [
        7523,
        7524
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: Invalid IPv6 address.",
      "pos": [
        7527,
        7571
      ]
    },
    {
      "content": "The IP address is provided in an incorrect format.",
      "pos": [
        7574,
        7624
      ]
    },
    {
      "content": "Check the format and supply your IP address again.",
      "pos": [
        7626,
        7676
      ]
    },
    {
      "content": "For more information, see [Ipv6 Addressing][2].",
      "pos": [
        7677,
        7724
      ]
    },
    {
      "content": "7",
      "pos": [
        7728,
        7729
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: There are no more endpoints available from the endpoint mapper.",
      "pos": [
        7732,
        7818
      ]
    },
    {
      "content": "(Exception from HRESULT: 0x800706D9)",
      "pos": [
        7819,
        7855
      ]
    },
    {
      "content": "The cluster functionality is not working.",
      "pos": [
        7858,
        7899
      ]
    },
    {
      "pos": [
        7902,
        7986
      ],
      "content": "<bpt id=\"p1\">[</bpt>Contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for next steps."
    },
    {
      "content": "Errors during the optional web proxy settings",
      "pos": [
        7991,
        8036
      ]
    },
    {
      "content": "No.",
      "pos": [
        8040,
        8043
      ]
    },
    {
      "content": "Error message",
      "pos": [
        8045,
        8058
      ]
    },
    {
      "content": "Possible causes",
      "pos": [
        8061,
        8076
      ]
    },
    {
      "content": "Recommended action",
      "pos": [
        8079,
        8097
      ]
    },
    {
      "content": "1",
      "pos": [
        8164,
        8165
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: Invalid parameter (Exception from HRESULT: 0x80070057)",
      "pos": [
        8169,
        8246
      ]
    },
    {
      "content": "One of the parameters provided for the proxy settings is not valid.",
      "pos": [
        8249,
        8316
      ]
    },
    {
      "content": "The URI is not provided in the correct format.",
      "pos": [
        8318,
        8364
      ]
    },
    {
      "content": "Use the following format: http://<bpt id=\"p1\">*</bpt><ph id=\"ph1\">&lt;IP address or FQDN of the web proxy server&gt;</ph><ept id=\"p1\">*</ept>:<bpt id=\"p2\">*</bpt><ph id=\"ph2\">&lt;TCP port number&gt;</ph><ept id=\"p2\">*</ept>",
      "pos": [
        8365,
        8464
      ]
    },
    {
      "content": "2",
      "pos": [
        8469,
        8470
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: RPC server not available (Exception from HRESULT: 0x800706ba)",
      "pos": [
        8473,
        8557
      ]
    },
    {
      "content": "The root cause is one of the following:",
      "pos": [
        8560,
        8599
      ]
    },
    {
      "content": "The cluster is not up.",
      "pos": [
        8607,
        8629
      ]
    },
    {
      "content": "The passive controller cannot communicate with the active controller, and the command is run from passive controller.",
      "pos": [
        8638,
        8755
      ]
    },
    {
      "content": "Depending on the root cause:",
      "pos": [
        8768,
        8796
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> to make sure that the cluster is up.",
      "pos": [
        8804,
        8909
      ]
    },
    {
      "content": "Run the command from the active controller.",
      "pos": [
        8918,
        8961
      ]
    },
    {
      "content": "If you want to run the command from the passive controller, you will need to ensure that the passive controller can communicate with the active controller.",
      "pos": [
        8962,
        9117
      ]
    },
    {
      "content": "You will need to <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> if this connectivity is broken.",
      "pos": [
        9118,
        9235
      ]
    },
    {
      "content": "3",
      "pos": [
        9250,
        9251
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: RPC call failed (Exception from HRESULT: 0x800706be)",
      "pos": [
        9254,
        9329
      ]
    },
    {
      "content": "Cluster is down.",
      "pos": [
        9332,
        9348
      ]
    },
    {
      "pos": [
        9351,
        9456
      ],
      "content": "<bpt id=\"p1\">[</bpt>Contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> to make sure that the cluster is up."
    },
    {
      "content": "4",
      "pos": [
        9460,
        9461
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: Cluster resource not found (Exception from HRESULT: 0x8007138f)",
      "pos": [
        9464,
        9550
      ]
    },
    {
      "content": "The cluster resource is not found.",
      "pos": [
        9553,
        9587
      ]
    },
    {
      "content": "This can happen when the installation was not correct.",
      "pos": [
        9588,
        9642
      ]
    },
    {
      "content": "You may need to reset the device to the factory default settings.",
      "pos": [
        9645,
        9710
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> to create a cluster resource.",
      "pos": [
        9711,
        9809
      ]
    },
    {
      "content": "5",
      "pos": [
        9813,
        9814
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: Cluster resource not online (Exception from HRESULT: 0x8007138c)",
      "pos": [
        9817,
        9904
      ]
    },
    {
      "content": "Cluster resources are not online.",
      "pos": [
        9906,
        9939
      ]
    },
    {
      "pos": [
        9942,
        10026
      ],
      "content": "<bpt id=\"p1\">[</bpt>Contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for next steps."
    },
    {
      "content": "Errors related to device administrator and StorSimple Snapshot Manager passwords",
      "pos": [
        10032,
        10112
      ]
    },
    {
      "content": "The default device administrator password is <bpt id=\"p1\">**</bpt>Password1<ept id=\"p1\">**</ept>.",
      "pos": [
        10114,
        10173
      ]
    },
    {
      "content": "This password expires after the first log on; therefore, you will need to use the setup wizard to change it.",
      "pos": [
        10174,
        10282
      ]
    },
    {
      "content": "You must provide a new device administrator password when you register the device for the first time.",
      "pos": [
        10283,
        10384
      ]
    },
    {
      "content": "If you use the StorSimple Snapshot Manager software running on the Windows Server host to manage the device, then you must also provide a StorSimple Snapshot Manager password during first-time registration.",
      "pos": [
        10387,
        10593
      ]
    },
    {
      "content": "Make sure that your passwords meet the following requirements:",
      "pos": [
        10596,
        10658
      ]
    },
    {
      "content": "Your device administrator password should be between 8 and 15 characters long.",
      "pos": [
        10662,
        10740
      ]
    },
    {
      "content": "Your StorSimple Snapshot Manager password should be 14 or 15 characters long.",
      "pos": [
        10743,
        10820
      ]
    },
    {
      "content": "Passwords should contain 3 of the following 4 character types: lowercase, uppercase, numeric, and special.",
      "pos": [
        10823,
        10929
      ]
    },
    {
      "content": "Your password cannot be the same as the last 24 passwords.",
      "pos": [
        10933,
        10991
      ]
    },
    {
      "content": "In addition, keep in mind that passwords expire every year, and can be changed only after you successfully register the device.",
      "pos": [
        10993,
        11120
      ]
    },
    {
      "content": "If the registration fails for any reason, the passwords will not be changed.",
      "pos": [
        11121,
        11197
      ]
    },
    {
      "content": "For more information on device administrator and StorSimple Snapshot Manager passwords, go to <bpt id=\"p1\">[</bpt>Use the StorSimple Manager service to change your StorSimple passwords<ept id=\"p1\">](storsimple-change-passwords.md)</ept>.",
      "pos": [
        11199,
        11398
      ]
    },
    {
      "content": "You may encounter one or more of the following errors when setting up the device administrator and StorSimple Snapshot Manager passwords.",
      "pos": [
        11400,
        11537
      ]
    },
    {
      "content": "No.",
      "pos": [
        11541,
        11544
      ]
    },
    {
      "content": "Error message",
      "pos": [
        11546,
        11559
      ]
    },
    {
      "content": "Recommended action",
      "pos": [
        11562,
        11580
      ]
    },
    {
      "content": "1",
      "pos": [
        11630,
        11631
      ]
    },
    {
      "content": "The password exceeds the maximum length.",
      "pos": [
        11635,
        11675
      ]
    },
    {
      "content": "Use a password that meets these requirements:",
      "pos": [
        11677,
        11722
      ]
    },
    {
      "content": "Your device administrator password must be between 8 and 15 characters long.",
      "pos": [
        11730,
        11806
      ]
    },
    {
      "content": "Your StorSimple Snapshot Manager password must be 14 or 15 characters long.",
      "pos": [
        11815,
        11890
      ]
    },
    {
      "content": "2",
      "pos": [
        11906,
        11907
      ]
    },
    {
      "content": "The password does not meet the required length.",
      "pos": [
        11910,
        11957
      ]
    },
    {
      "content": "Use a password that meets these requirements:",
      "pos": [
        11960,
        12005
      ]
    },
    {
      "content": "Your device administrator password must be between 8 and 15 characters long.",
      "pos": [
        12013,
        12089
      ]
    },
    {
      "content": "Your StorSimple Snapshot Manager password must be 14 or 15 characters long.",
      "pos": [
        12098,
        12173
      ]
    },
    {
      "content": "3",
      "pos": [
        12188,
        12189
      ]
    },
    {
      "content": "The password must contain lowercase characters.",
      "pos": [
        12192,
        12239
      ]
    },
    {
      "content": "Passwords must contain 3 of the following 4 character types: lowercase, uppercase, numeric, and special.",
      "pos": [
        12242,
        12346
      ]
    },
    {
      "content": "Make sure that your password meets these requirements.",
      "pos": [
        12347,
        12401
      ]
    },
    {
      "content": "4",
      "pos": [
        12406,
        12407
      ]
    },
    {
      "content": "The password must contain numeric characters.",
      "pos": [
        12410,
        12455
      ]
    },
    {
      "content": "Passwords must contain 3  of the following 4 character types: lowercase, uppercase, numeric, and special.",
      "pos": [
        12458,
        12563
      ]
    },
    {
      "content": "Make sure that your password meets these requirements.",
      "pos": [
        12564,
        12618
      ]
    },
    {
      "content": "5",
      "pos": [
        12623,
        12624
      ]
    },
    {
      "content": "The password must contain special characters.",
      "pos": [
        12627,
        12672
      ]
    },
    {
      "content": "Passwords must contain 3 of the following 4 character types: lowercase, uppercase, numeric, and special.",
      "pos": [
        12675,
        12779
      ]
    },
    {
      "content": "Make sure that your password meets these requirements.",
      "pos": [
        12780,
        12834
      ]
    },
    {
      "content": "6",
      "pos": [
        12839,
        12840
      ]
    },
    {
      "content": "The password must contain 3 of the following 4 character types: uppercase, lowercase, numeric, and special.",
      "pos": [
        12843,
        12950
      ]
    },
    {
      "content": "Your password does not contain the required types of characters.",
      "pos": [
        12953,
        13017
      ]
    },
    {
      "content": "Make sure that your password meets these requirements.",
      "pos": [
        13018,
        13072
      ]
    },
    {
      "content": "7",
      "pos": [
        13077,
        13078
      ]
    },
    {
      "content": "Parameter does not match confirmation.",
      "pos": [
        13081,
        13119
      ]
    },
    {
      "content": "Make sure that your password meets all requirements and that you entered it correctly.",
      "pos": [
        13122,
        13208
      ]
    },
    {
      "content": "8",
      "pos": [
        13213,
        13214
      ]
    },
    {
      "content": "Your password cannot match the default.",
      "pos": [
        13217,
        13256
      ]
    },
    {
      "content": "The default password is  <bpt id=\"p1\">*</bpt>Password1<ept id=\"p1\">*</ept>.",
      "pos": [
        13259,
        13296
      ]
    },
    {
      "content": "You need to change this password after you log on for the first time.",
      "pos": [
        13297,
        13366
      ]
    },
    {
      "content": "9",
      "pos": [
        13371,
        13372
      ]
    },
    {
      "content": "The password you have entered does not match the device password.",
      "pos": [
        13375,
        13440
      ]
    },
    {
      "content": "Please retype the password.",
      "pos": [
        13441,
        13468
      ]
    },
    {
      "content": "Check the password and type it again.",
      "pos": [
        13471,
        13508
      ]
    },
    {
      "content": "Passwords are collected before the device is registered, but are applied only after successful registration.",
      "pos": [
        13512,
        13620
      ]
    },
    {
      "content": "The password recovery workflow requires the device to be registered.",
      "pos": [
        13621,
        13689
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> In general, if an attempt to apply a password fails, then the software repeatedly attempts to collect the password until it is successful.",
      "pos": [
        13694,
        13850
      ]
    },
    {
      "content": "In rare instances, the password cannot be applied.",
      "pos": [
        13851,
        13901
      ]
    },
    {
      "content": "In this situation, you can register the device and proceed, however the passwords will not be changed.",
      "pos": [
        13902,
        14004
      ]
    },
    {
      "content": "You will receive no indication as to which password was not changed — the device administrator password or the StorSimple Snapshot Manager password.",
      "pos": [
        14005,
        14153
      ]
    },
    {
      "content": "If this situation occurs, we recommend that you change both passwords.",
      "pos": [
        14154,
        14224
      ]
    },
    {
      "content": "You can reset the passwords from the Management Portal of your StorSimple Manager service.",
      "pos": [
        14226,
        14316
      ]
    },
    {
      "content": "For more information, see:",
      "pos": [
        14317,
        14343
      ]
    },
    {
      "pos": [
        14348,
        14464
      ],
      "content": "<bpt id=\"p1\">[</bpt>Change the device administrator password<ept id=\"p1\">](storsimple-change-passwords.md#change-the-device-administrator-password)</ept>."
    },
    {
      "pos": [
        14467,
        14597
      ],
      "content": "<bpt id=\"p1\">[</bpt>Change the StorSimple Snapshot Manager password<ept id=\"p1\">](storsimple-change-passwords.md#change-the-storsimple-snapshot-manager-password)</ept>."
    },
    {
      "content": "Errors during device registration",
      "pos": [
        14602,
        14635
      ]
    },
    {
      "content": "You use the StorSimple Manager service running in Microsoft Azure to register the device.",
      "pos": [
        14637,
        14726
      ]
    },
    {
      "content": "You could encounter one or more of the following issues during device registration.",
      "pos": [
        14727,
        14810
      ]
    },
    {
      "content": "No.",
      "pos": [
        14814,
        14817
      ]
    },
    {
      "content": "Error message",
      "pos": [
        14819,
        14832
      ]
    },
    {
      "content": "Possible causes",
      "pos": [
        14835,
        14850
      ]
    },
    {
      "content": "Recommended action",
      "pos": [
        14853,
        14871
      ]
    },
    {
      "content": "1",
      "pos": [
        14938,
        14939
      ]
    },
    {
      "content": "Error 350027: Failed to register the device with the StorSimple Manager.",
      "pos": [
        14943,
        15015
      ]
    },
    {
      "content": "Wait for a few minutes and then try the operation again.",
      "pos": [
        15021,
        15077
      ]
    },
    {
      "content": "If the issue persists, <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept>.",
      "pos": [
        15078,
        15170
      ]
    },
    {
      "content": "2",
      "pos": [
        15174,
        15175
      ]
    },
    {
      "content": "Error 350013: An error has occurred in registering the device.",
      "pos": [
        15179,
        15241
      ]
    },
    {
      "content": "This could be due to incorrect service registration key.",
      "pos": [
        15242,
        15298
      ]
    },
    {
      "content": "Please register the device again with the correct service registration key.",
      "pos": [
        15303,
        15378
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Get the service registration key.<ept id=\"p1\">](storsimple-manage-service.md#get-the-service-registration-key)</ept>",
      "pos": [
        15379,
        15503
      ]
    },
    {
      "content": "3",
      "pos": [
        15508,
        15509
      ]
    },
    {
      "content": "Error 350063: Authentication to StorSimple Manager service passed but registration failed.",
      "pos": [
        15512,
        15602
      ]
    },
    {
      "content": "Please retry the operation after some time.",
      "pos": [
        15603,
        15646
      ]
    },
    {
      "content": "This error indicates that authentication with ACS has passed but the register call made to the service has failed.",
      "pos": [
        15649,
        15763
      ]
    },
    {
      "content": "This could be a result of a sporadic network glitch.",
      "pos": [
        15764,
        15816
      ]
    },
    {
      "pos": [
        15819,
        15918
      ],
      "content": "If the issue persists, please <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept>."
    },
    {
      "content": "4",
      "pos": [
        15923,
        15924
      ]
    },
    {
      "content": "Error 350049: The service could not be reached during registration.",
      "pos": [
        15927,
        15994
      ]
    },
    {
      "content": "When the call is made to the service, a web exception is received.",
      "pos": [
        15997,
        16063
      ]
    },
    {
      "content": "In some cases, this may get fixed with retrying the operation later.",
      "pos": [
        16064,
        16132
      ]
    },
    {
      "content": "Please check your IP address and DNS name and then retry the operation.",
      "pos": [
        16135,
        16206
      ]
    },
    {
      "content": "If the problem persists, <bpt id=\"p1\">[</bpt>contact Microsoft Support.<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept>",
      "pos": [
        16207,
        16301
      ]
    },
    {
      "content": "5",
      "pos": [
        16307,
        16308
      ]
    },
    {
      "content": "Error 350031: The device has already been registered.",
      "pos": [
        16311,
        16364
      ]
    },
    {
      "content": "No action necessary.",
      "pos": [
        16369,
        16389
      ]
    },
    {
      "content": "6",
      "pos": [
        16394,
        16395
      ]
    },
    {
      "content": "Error 350016: Device Registration failed.",
      "pos": [
        16398,
        16439
      ]
    },
    {
      "content": "Please make sure the registration key is correct.",
      "pos": [
        16443,
        16492
      ]
    },
    {
      "content": "7",
      "pos": [
        16497,
        16498
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: An error has occurred while registering your device; this could be due to incorrect IP address or DNS name.",
      "pos": [
        16501,
        16631
      ]
    },
    {
      "content": "Please check your network settings and try again.",
      "pos": [
        16632,
        16681
      ]
    },
    {
      "content": "If the problem persists, <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept>.",
      "pos": [
        16682,
        16776
      ]
    },
    {
      "content": "(Error 350050)",
      "pos": [
        16777,
        16791
      ]
    },
    {
      "content": "Ensure that your device can ping the outside network.",
      "pos": [
        16794,
        16847
      ]
    },
    {
      "content": "If you do not have connectivity to outside network, the registration may fail with this error.",
      "pos": [
        16848,
        16942
      ]
    },
    {
      "content": "This error may be a combination of one or more of the following:",
      "pos": [
        16943,
        17007
      ]
    },
    {
      "content": "Incorrect IP",
      "pos": [
        17015,
        17027
      ]
    },
    {
      "content": "Incorrect subnet",
      "pos": [
        17036,
        17052
      ]
    },
    {
      "content": "Incorrect gateway",
      "pos": [
        17061,
        17078
      ]
    },
    {
      "content": "Incorrect DNS settings",
      "pos": [
        17087,
        17109
      ]
    },
    {
      "pos": [
        17122,
        17232
      ],
      "content": "See the steps in the <bpt id=\"p1\">[</bpt>Step-by-step troubleshooting example<ept id=\"p1\">](#step-by-step-storsimple-troubleshooting-example)</ept>."
    },
    {
      "content": "8",
      "pos": [
        17237,
        17238
      ]
    },
    {
      "content": "Invoke-HcsSetupWizard: The current operation failed due to an internal service error [0x1FBE2].",
      "pos": [
        17241,
        17336
      ]
    },
    {
      "content": "Please retry the operation after sometime.",
      "pos": [
        17337,
        17379
      ]
    },
    {
      "content": "If the issue persists, please contact Microsoft Support.",
      "pos": [
        17380,
        17436
      ]
    },
    {
      "content": "This is a generic error thrown for all user invisible errors from service or agent.",
      "pos": [
        17439,
        17522
      ]
    },
    {
      "content": "The most common reason may be that the ACS authentication has failed.",
      "pos": [
        17523,
        17592
      ]
    },
    {
      "content": "A possible cause for the failure is that there are issues with the NTP server configuration and time on the device is not set correctly.",
      "pos": [
        17593,
        17729
      ]
    },
    {
      "content": "Correct the time (if there are issues) and then retry the registration operation.",
      "pos": [
        17732,
        17813
      ]
    },
    {
      "content": "If this issue persists, <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for next steps.",
      "pos": [
        17814,
        17922
      ]
    },
    {
      "content": "9",
      "pos": [
        17927,
        17928
      ]
    },
    {
      "content": "Warning: Could not activate the device.",
      "pos": [
        17931,
        17970
      ]
    },
    {
      "content": "Your device administrator and StorSimple Snapshot Manager passwords have not been changed.",
      "pos": [
        17971,
        18061
      ]
    },
    {
      "content": "If the registration fails, the device administrator and StorSimple Snapshot Manager passwords are not changed.",
      "pos": [
        18064,
        18174
      ]
    },
    {
      "content": "Tools for troubleshooting StorSimple deployments",
      "pos": [
        18181,
        18229
      ]
    },
    {
      "content": "StorSimple includes several tools that you can use to troubleshoot your StorSimple solution.",
      "pos": [
        18231,
        18323
      ]
    },
    {
      "content": "These include:",
      "pos": [
        18324,
        18338
      ]
    },
    {
      "content": "Support packages and device logs",
      "pos": [
        18342,
        18374
      ]
    },
    {
      "content": "Cmdlets specifically designed for troubleshooting",
      "pos": [
        18378,
        18427
      ]
    },
    {
      "content": "Support packages and device logs available for troubleshooting",
      "pos": [
        18433,
        18495
      ]
    },
    {
      "content": "A support package contains all the relevant logs that can assist the Microsoft Support team with troubleshooting device issues.",
      "pos": [
        18497,
        18624
      ]
    },
    {
      "content": "You can use Windows PowerShell for StorSimple to generate an encrypted support package that you can then share with support personnel.",
      "pos": [
        18625,
        18759
      ]
    },
    {
      "content": "To view the logs or the contents of the support package",
      "pos": [
        18765,
        18820
      ]
    },
    {
      "pos": [
        18825,
        18992
      ],
      "content": "Use Windows PowerShell for StorSimple to generate a support package as described in <bpt id=\"p1\">[</bpt>Create and manage a support package<ept id=\"p1\">](storsimple-create-manage-support-package.md)</ept>."
    },
    {
      "pos": [
        18997,
        19143
      ],
      "content": "Download the <bpt id=\"p1\">[</bpt>decryption script<ept id=\"p1\">](https://gallery.technet.microsoft.com/scriptcenter/Script-to-decrypt-a-a8d1ed65)</ept> locally on your client computer."
    },
    {
      "pos": [
        19148,
        19290
      ],
      "content": "Use this <bpt id=\"p1\">[</bpt>step-by-step procedure<ept id=\"p1\">](storsimple-create-manage-support-package.md#edit-a-support-package)</ept> to open and decrypt the support package."
    },
    {
      "content": "The decrypted support package logs are in etw/etvx format.",
      "pos": [
        19295,
        19353
      ]
    },
    {
      "content": "You can perform the following steps to view these files in Windows Event Viewer:",
      "pos": [
        19354,
        19434
      ]
    },
    {
      "content": "Run the <bpt id=\"p1\">**</bpt>eventvwr<ept id=\"p1\">**</ept> command on your Windows client.",
      "pos": [
        19440,
        19492
      ]
    },
    {
      "content": "This will start the Event Viewer.",
      "pos": [
        19493,
        19526
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Actions<ept id=\"p1\">**</ept> pane, click <bpt id=\"p2\">**</bpt>Open Saved Log<ept id=\"p2\">**</ept> and point to the log files in etvx/etw format (the support package).",
      "pos": [
        19532,
        19650
      ]
    },
    {
      "content": "You can now view the file.",
      "pos": [
        19651,
        19677
      ]
    },
    {
      "content": "After you open the file, you can right-click and save the the file as text.",
      "pos": [
        19678,
        19753
      ]
    },
    {
      "content": "When the logs open in Event Viewer, look for the following logs that contain issues related to the device configuration:",
      "pos": [
        20025,
        20145
      ]
    },
    {
      "content": "hcs_pfconfig/Operational Log",
      "pos": [
        20151,
        20179
      ]
    },
    {
      "content": "hcs_pfconfig/Config",
      "pos": [
        20184,
        20203
      ]
    },
    {
      "content": "In the log files, search for strings related to the cmdlets called by the setup wizard.",
      "pos": [
        20208,
        20295
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>First-time setup wizard process<ept id=\"p1\">](#first-time-setup-wizard-process)</ept> for a list of these cmdlets.",
      "pos": [
        20296,
        20396
      ]
    },
    {
      "content": "If you are not able to figure out the cause of the problem, you can <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for next steps.",
      "pos": [
        20402,
        20554
      ]
    },
    {
      "content": "Use the steps in <bpt id=\"p1\">[</bpt>Create a support request<ept id=\"p1\">](storsimple-contact-microsoft-support.md#create-a-support-request)</ept> when you contact Microsoft Support for assistance.",
      "pos": [
        20555,
        20715
      ]
    },
    {
      "content": "Cmdlets available for troubleshooting",
      "pos": [
        20720,
        20757
      ]
    },
    {
      "content": "Use the following Windows PowerShell cmdlets to detect connectivity errors.",
      "pos": [
        20759,
        20834
      ]
    },
    {
      "pos": [
        20838,
        20915
      ],
      "content": "<ph id=\"ph1\">`Get-NetAdapter`</ph>: Use this cmdlet to detect the health of network interfaces."
    },
    {
      "pos": [
        20920,
        21023
      ],
      "content": "<ph id=\"ph1\">`Test-Connection`</ph>: Use this cmdlet to check the network connectivity inside and outside of the network."
    },
    {
      "pos": [
        21027,
        21128
      ],
      "content": "<ph id=\"ph1\">`Test-HcsmConnection`</ph>: Use this cmdlet to check the connectivity of a successfully registered device."
    },
    {
      "content": "If you are running Update 1 on your StorSimple device, the following diagnostic cmdlets are also available.",
      "pos": [
        21130,
        21237
      ]
    },
    {
      "pos": [
        21241,
        21338
      ],
      "content": "<ph id=\"ph1\">`Sync-HcsTime`</ph>: Use this cmdlet to display device time and force a time sync with the NTP server."
    },
    {
      "content": "<ph id=\"ph1\">`Enable-HcsPing`</ph> and <ph id=\"ph2\">`Disable-HcsPing`</ph>: Use these cmdlets to allow the hosts to ping the network interfaces on your StorSimple device.",
      "pos": [
        21342,
        21476
      ]
    },
    {
      "content": "By default, the StorSimple network interfaces do not respond to ping requests.",
      "pos": [
        21477,
        21555
      ]
    },
    {
      "content": "<ph id=\"ph1\">`Trace-HcsRoute`</ph>: Use this cmdlet as a route tracing tool.",
      "pos": [
        21559,
        21617
      ]
    },
    {
      "content": "It sends packets to each router on the way to a final destination over a period of time, and then computes results based on the packets returned from each hop.",
      "pos": [
        21618,
        21777
      ]
    },
    {
      "content": "Since <ph id=\"ph1\">`Trace-HcsRoute`</ph> shows the degree of packet loss at any given router or link, you can pinpoint which routers or links might be causing network problems.",
      "pos": [
        21778,
        21936
      ]
    },
    {
      "pos": [
        21941,
        22018
      ],
      "content": "<ph id=\"ph1\">`Get-HcsRoutingTable`</ph>: Use this cmdlet to display the local IP routing table."
    },
    {
      "content": "Troubleshoot with the Get-NetAdapter cmdlet",
      "pos": [
        22023,
        22066
      ]
    },
    {
      "content": "When you configure network interfaces for a first-time device deployment, the hardware status is not available in the StorSimple Manager service UI because the device is not yet registered with the service.",
      "pos": [
        22068,
        22274
      ]
    },
    {
      "content": "Additionally, the Hardware Status page may not always correctly reflect the state of the device, especially if there are issues that affect service synchronization.",
      "pos": [
        22275,
        22439
      ]
    },
    {
      "content": "In these situations, you can use the <ph id=\"ph1\">`Get-NetAdapter`</ph> cmdlet to determine the health and status of your network interfaces.",
      "pos": [
        22440,
        22563
      ]
    },
    {
      "content": "To see a list of all the network adapters on your device",
      "pos": [
        22569,
        22625
      ]
    },
    {
      "pos": [
        22630,
        22702
      ],
      "content": "Start Windows PowerShell for StorSimple, and then type <ph id=\"ph1\">`Get-NetAdapter`</ph>."
    },
    {
      "pos": [
        22708,
        22834
      ],
      "content": "Use the output of the <ph id=\"ph1\">`Get-NetAdapter`</ph> cmdlet and the following guidelines to understand the status of your network interface."
    },
    {
      "pos": [
        22839,
        22922
      ],
      "content": "If the interface is healthy and enabled, the <bpt id=\"p1\">**</bpt>ifIndex<ept id=\"p1\">**</ept> status is shown as <bpt id=\"p2\">**</bpt>Up<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        22927,
        23050
      ],
      "content": "If the interface is healthy but is not physically connected (by a network cable), the <bpt id=\"p1\">**</bpt>ifIndex<ept id=\"p1\">**</ept> is shown as <bpt id=\"p2\">**</bpt>Disabled<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        23055,
        23150
      ],
      "content": "If the interface is healthy but not enabled, the <bpt id=\"p1\">**</bpt>ifIndex<ept id=\"p1\">**</ept> status is shown as <bpt id=\"p2\">**</bpt>NotPresent<ept id=\"p2\">**</ept>."
    },
    {
      "content": "If the interface does not exist, it does not appear in this list.",
      "pos": [
        23155,
        23220
      ]
    },
    {
      "content": "The StorSimple Manager service UI will still show this interface in a failed state.",
      "pos": [
        23221,
        23304
      ]
    },
    {
      "pos": [
        23306,
        23472
      ],
      "content": "For more information on how to use this cmdlet, go to <bpt id=\"p1\">[</bpt>GetNetAdapter<ept id=\"p1\">](https://technet.microsoft.com/library/jj130867.aspx)</ept> in the Windows PowerShell cmdlet reference."
    },
    {
      "pos": [
        23475,
        23554
      ],
      "content": "The following sections show samples of output from the <ph id=\"ph1\">`Get-NetAdapter`</ph> cmdlet."
    },
    {
      "content": "In these samples, controller 0 was the passive controller, and was configured as follows:",
      "pos": [
        23558,
        23647
      ]
    },
    {
      "content": "DATA 0, DATA 1, DATA 2, and DATA 3 network interfaces existed on the device.",
      "pos": [
        23651,
        23727
      ]
    },
    {
      "content": "DATA 4 and DATA 5 network interface cards were not present; therefore, they are not listed in the output.",
      "pos": [
        23730,
        23835
      ]
    },
    {
      "content": "DATA 0 was enabled.",
      "pos": [
        23838,
        23857
      ]
    },
    {
      "content": "Controller 1 was the active controller, and was configured as follows:",
      "pos": [
        23859,
        23929
      ]
    },
    {
      "content": "DATA 0, DATA 1, DATA 2, DATA 3, DATA 4, and DATA 5 network interfaces existed on the device.",
      "pos": [
        23933,
        24025
      ]
    },
    {
      "content": "DATA 0 was enabled.",
      "pos": [
        24028,
        24047
      ]
    },
    {
      "content": "Sample output – controller 0",
      "pos": [
        24051,
        24079
      ]
    },
    {
      "content": "The following is the output from controller 0 (the passive controller).",
      "pos": [
        24083,
        24154
      ]
    },
    {
      "content": "DATA 1, DATA 2, and DATA 3 are not connected.",
      "pos": [
        24155,
        24200
      ]
    },
    {
      "content": "DATA 4 and DATA 5 are not listed because they are not present on the device.",
      "pos": [
        24201,
        24277
      ]
    },
    {
      "content": "Sample output – controller 1",
      "pos": [
        24926,
        24954
      ]
    },
    {
      "content": "The following is the output from controller 1 (the active controller).",
      "pos": [
        24958,
        25028
      ]
    },
    {
      "content": "Only the DATA 0 network interface on the device is configured and working.",
      "pos": [
        25029,
        25103
      ]
    },
    {
      "content": "Troubleshoot with the Test-Connection cmdlet",
      "pos": [
        25933,
        25977
      ]
    },
    {
      "content": "You can use the <ph id=\"ph1\">`Test-Connection`</ph> cmdlet to determine whether your StorSimple device can connect to the outside network.",
      "pos": [
        25979,
        26099
      ]
    },
    {
      "content": "If all the networking parameters, including the DNS, are configured correctly in the setup wizard, you can use the <ph id=\"ph1\">`Test-Connection`</ph> cmdlet to ping a known address outside of the network, such as outlook.com.",
      "pos": [
        26100,
        26308
      ]
    },
    {
      "pos": [
        26311,
        26381
      ],
      "content": "See the following samples of output from the <ph id=\"ph1\">`Test-Connection`</ph> cmdlet."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> In the first sample, the device is configured with an incorrect DNS.",
      "pos": [
        26386,
        26467
      ]
    },
    {
      "content": "In the second sample, the DNS is correct.",
      "pos": [
        26468,
        26509
      ]
    },
    {
      "content": "Sample output – incorrect DNS",
      "pos": [
        26514,
        26543
      ]
    },
    {
      "content": "In the following sample, there is no output for the IPV4 and IPV6 addresses, which indicates that the DNS is not resolved.",
      "pos": [
        26547,
        26669
      ]
    },
    {
      "content": "This means that there is no connectivity to the outside network and a correct DNS needs to be supplied.",
      "pos": [
        26670,
        26773
      ]
    },
    {
      "content": "Sample output – correct DNS",
      "pos": [
        27031,
        27058
      ]
    },
    {
      "content": "In the following sample, the DNS returns the IPV4 address, indicating that the DNS is configured correctly.",
      "pos": [
        27062,
        27169
      ]
    },
    {
      "content": "This confirms that there is connectivity to the outside network.",
      "pos": [
        27170,
        27234
      ]
    },
    {
      "content": "Troubleshoot with the Test-HcsmConnection cmdlet",
      "pos": [
        27569,
        27617
      ]
    },
    {
      "content": "Use the <ph id=\"ph1\">`Test-HcsmConnection`</ph> cmdlet for a device that is already connected to and registered with your StorSimple Manager service.",
      "pos": [
        27619,
        27750
      ]
    },
    {
      "content": "This cmdlet helps you verify the connectivity between a registered device and the corresponding StorSimple Manager service.",
      "pos": [
        27751,
        27874
      ]
    },
    {
      "content": "You can run this command on Windows PowerShell for StorSimple.",
      "pos": [
        27875,
        27937
      ]
    },
    {
      "content": "To run the Test-HcsmConnection cmdlet",
      "pos": [
        27944,
        27981
      ]
    },
    {
      "content": "Make sure that the device is registered.",
      "pos": [
        27986,
        28026
      ]
    },
    {
      "content": "Check the device status.",
      "pos": [
        28031,
        28055
      ]
    },
    {
      "content": "If the device is deactivated, in maintenance mode, or offline, you might see the following errors:",
      "pos": [
        28056,
        28154
      ]
    },
    {
      "content": "ErrorCode.CiSDeviceDecommissioned – this indicates that the device is deactivated.",
      "pos": [
        28162,
        28244
      ]
    },
    {
      "content": "ErrorCode.DeviceNotReady – this indicates that the device is in maintenance mode.",
      "pos": [
        28250,
        28331
      ]
    },
    {
      "content": "ErrorCode.DeviceNotReady – this indicates that the device is not online.",
      "pos": [
        28337,
        28409
      ]
    },
    {
      "content": "Verify that the StorSimple Manager service is running (use the <bpt id=\"p1\">[</bpt>Get-ClusterResource<ept id=\"p1\">](https://technet.microsoft.com/library/ee461004.aspx)</ept> cmdlet).",
      "pos": [
        28414,
        28560
      ]
    },
    {
      "content": "If the service is not running, you might see the following errors:",
      "pos": [
        28561,
        28627
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceAgentNotOnline",
      "pos": [
        28634,
        28670
      ]
    },
    {
      "content": "ErrorCode.CisPowershellScriptHcsError – this indicates that there was an exception when you ran Get-ClusterResource.",
      "pos": [
        28676,
        28792
      ]
    },
    {
      "content": "Check the Access Control Service (ACS) token.",
      "pos": [
        28797,
        28842
      ]
    },
    {
      "content": "If it throws a web exception, it might be the result of a gateway problem, a missing proxy authentication, an incorrect DNS, or an authentication failure.",
      "pos": [
        28843,
        28997
      ]
    },
    {
      "content": "You might see the following errors:",
      "pos": [
        28998,
        29033
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceGateway – this indicates an HttpStatusCode.BadGateway exception: the name resolver service could not resolve the host name.",
      "pos": [
        29040,
        29185
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceProxy – this indicates an HttpStatusCode.ProxyAuthenticationRequired exception (HTTP status code 407): the client could not authenticate with the proxy server.",
      "pos": [
        29192,
        29373
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceDNSError – this indicates a WebExceptionStatus.NameResolutionFailure exception: the name resolver service could not resolve the host name.",
      "pos": [
        29380,
        29540
      ]
    },
    {
      "content": ".",
      "pos": [
        29541,
        29542
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceACSError – this indicates that the service returned an authentication error, but there is connectivity.",
      "pos": [
        29548,
        29673
      ]
    },
    {
      "content": "If it does not throw a web exception, check for ErrorCode.CiSApplianceFailure.",
      "pos": [
        29682,
        29760
      ]
    },
    {
      "content": "This indicates that the appliance failed.",
      "pos": [
        29761,
        29802
      ]
    },
    {
      "content": "Check the cloud service connectivity.",
      "pos": [
        29807,
        29844
      ]
    },
    {
      "content": "If the service throws a web exception, you might see the following errors:",
      "pos": [
        29845,
        29919
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceGateway – this indicates an HttpStatusCode.BadGateway exception: an intermediate proxy server received a bad request from another proxy or from the original server.",
      "pos": [
        29925,
        30111
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceProxy – this indicates an HttpStatusCode.ProxyAuthenticationRequired exception (HTTP status code 407): the client could not authenticate with the proxy server.",
      "pos": [
        30116,
        30297
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceDNSError – this indicates a WebExceptionStatus.NameResolutionFailure exception: the name resolver service could not resolve the host name.",
      "pos": [
        30303,
        30463
      ]
    },
    {
      "content": ".",
      "pos": [
        30464,
        30465
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceACSError – this indicates that the service returned an authentication error, but there is connectivity.",
      "pos": [
        30470,
        30595
      ]
    },
    {
      "content": "If it does not throw a web exception, check for ErrorCode.CiSApplianceSaasServiceError.",
      "pos": [
        30603,
        30690
      ]
    },
    {
      "content": "This indicates a problem with the StorSimple Manager service.",
      "pos": [
        30691,
        30752
      ]
    },
    {
      "content": "Check Azure Service Bus connectivity.",
      "pos": [
        30758,
        30795
      ]
    },
    {
      "content": "ErrorCode.CiSApplianceServiceBusError indicates that the device cannot connect to the Service Bus.",
      "pos": [
        30796,
        30894
      ]
    },
    {
      "content": "The log files CiSCommandletLog0Curr.errlog and CiSAgentsvc0Curr.errlog will have more information, such as exception details.",
      "pos": [
        30897,
        31022
      ]
    },
    {
      "pos": [
        31025,
        31206
      ],
      "content": "For more information about how to use the cmdlet, go to <bpt id=\"p1\">[</bpt>Test-HcsmConnection<ept id=\"p1\">](https://technet.microsoft.com/library/dn715782.aspx)</ept> in the Windows PowerShell reference documentation."
    },
    {
      "pos": [
        31210,
        31299
      ],
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> You can run this cmdlet for both the active and the passive controller."
    },
    {
      "pos": [
        31303,
        31377
      ],
      "content": "See the following samples of output from the <ph id=\"ph1\">`Test-HcsmConnection`</ph> cmdlet."
    },
    {
      "content": "Sample output – successfully registered device running StorSimple Release (July 2014)",
      "pos": [
        31382,
        31467
      ]
    },
    {
      "content": "The first sample is from a device that is successfully registered with the StorSimple Manager service and has no connectivity issues.",
      "pos": [
        31471,
        31604
      ]
    },
    {
      "content": "Sample output – successfully registered device running StorSimple Update 1",
      "pos": [
        32204,
        32278
      ]
    },
    {
      "content": "If you are running Update 1 on your StorSimple device, you will not need to run it with the verbose switch.",
      "pos": [
        32282,
        32389
      ]
    },
    {
      "content": "Sample output – offline device running StorSimple Release (July 2014)",
      "pos": [
        33409,
        33478
      ]
    },
    {
      "pos": [
        33482,
        33569
      ],
      "content": "This sample is from a device that has a status of <bpt id=\"p1\">**</bpt>Offline<ept id=\"p1\">**</ept> in the Management Portal."
    },
    {
      "content": "The device could not connect using the current web proxy configuration.",
      "pos": [
        33706,
        33777
      ]
    },
    {
      "content": "This could be an issue with the web proxy configuration or a network connectivity problem.",
      "pos": [
        33778,
        33868
      ]
    },
    {
      "content": "In this case, you should make sure that your web proxy settings are correct and your web proxy servers are online and reachable.",
      "pos": [
        33869,
        33997
      ]
    },
    {
      "content": "Troubleshoot with the Sync-HcsTime cmdlet",
      "pos": [
        34003,
        34044
      ]
    },
    {
      "content": "Use this cmdlet to display the device time.",
      "pos": [
        34046,
        34089
      ]
    },
    {
      "content": "If the device time has an offset with the NTP server, you can then use this cmdlet to force-synchronize the time with your NTP server.",
      "pos": [
        34090,
        34224
      ]
    },
    {
      "content": "If the offset between the device and NTP server is greater than 5 minutes, you will see a warning.",
      "pos": [
        34225,
        34323
      ]
    },
    {
      "content": "If the offset exceeds 15 minutes, then the device will go offline.",
      "pos": [
        34324,
        34390
      ]
    },
    {
      "content": "You can still use this cmdlet to force a time sync.",
      "pos": [
        34391,
        34442
      ]
    },
    {
      "content": "However, if the offset exceeds 15 hours, then you will not be able to force-sync the time and an error message will be shown.",
      "pos": [
        34443,
        34568
      ]
    },
    {
      "content": "Sample output – forced time sync using Sync-HcsTime",
      "pos": [
        34572,
        34623
      ]
    },
    {
      "content": "Troubleshoot with the Enable-HcsPing and Disable-HcsPing cmdlets",
      "pos": [
        34901,
        34965
      ]
    },
    {
      "content": "Use these cmdlets to ensure that the network interfaces on your device respond to ICMP ping requests.",
      "pos": [
        34967,
        35068
      ]
    },
    {
      "content": "By default the StorSimple network interfaces do not respond to ping requests.",
      "pos": [
        35069,
        35146
      ]
    },
    {
      "content": "Using this cmdlet is the easiest way to know if your device is online and reachable.",
      "pos": [
        35147,
        35231
      ]
    },
    {
      "content": "Sample output – Enable-HcsPing and Disable-HcsPing",
      "pos": [
        35237,
        35287
      ]
    },
    {
      "content": "Troubleshoot with the Trace-HcsRoute cmdlet",
      "pos": [
        35497,
        35540
      ]
    },
    {
      "content": "Use this cmdlet as a route tracing tool.",
      "pos": [
        35542,
        35582
      ]
    },
    {
      "content": "It sends packets to each router on the way to a final destination over a period of time, and then computes results based on the packets returned from each hop.",
      "pos": [
        35583,
        35742
      ]
    },
    {
      "content": "Because the cmdlet shows the degree of packet loss at any given router or link, you can pinpoint which routers or links might be causing network problems.",
      "pos": [
        35743,
        35897
      ]
    },
    {
      "content": "Sample output showing how to trace the route of a packet with Trace-HcsRoute",
      "pos": [
        35901,
        35977
      ]
    },
    {
      "content": "Troubleshoot with the Get-HcsRoutingTable cmdlet",
      "pos": [
        36602,
        36650
      ]
    },
    {
      "content": "Use this cmdlet to view the routing table for your StorSimple device.",
      "pos": [
        36652,
        36721
      ]
    },
    {
      "content": "A routing table is a set of rules that can help determine where data packets traveling over an Internet Protocol (IP) network will be directed.",
      "pos": [
        36722,
        36865
      ]
    },
    {
      "content": "The routing table shows the interfaces and the gateway that routes the data to the specified networks.",
      "pos": [
        36868,
        36970
      ]
    },
    {
      "content": "It also gives the routing metric which is the decision maker for the path taken to reach a particular destination.",
      "pos": [
        36971,
        37085
      ]
    },
    {
      "content": "The lower the routing metric, the higher the preference.",
      "pos": [
        37086,
        37142
      ]
    },
    {
      "content": "For example, if you have 2 network interfaces, DATA 2 and DATA 3, connected to the Internet.",
      "pos": [
        37145,
        37237
      ]
    },
    {
      "content": "If the routing metrics for DATA 2 and DATA 3 are 15 and 261 respectively, then DATA 2 with the lower routing metric is the preferred interface used to reach the Internet.",
      "pos": [
        37238,
        37408
      ]
    },
    {
      "content": "If you are running Update 1 on your StorSimple device, your DATA 0 network interface has the highest preference for the cloud traffic.",
      "pos": [
        37410,
        37544
      ]
    },
    {
      "content": "This implies that even if there are other cloud-enabled interfaces, the cloud traffic would be routed through DATA 0.",
      "pos": [
        37545,
        37662
      ]
    },
    {
      "content": "If you run the <ph id=\"ph1\">`Get-HcsRoutingTable`</ph> cmdlet without specifying any parameters (as the following example shows), the cmdlet will output both IPv4 and IPv6 routing tables.",
      "pos": [
        37665,
        37834
      ]
    },
    {
      "content": "Alternatively, you can specify <ph id=\"ph1\">`Get-HcsRoutingTable -IPv4`</ph> or <ph id=\"ph2\">`Get-HcsRoutingTable -IPv6`</ph>  to get a relevant routing table.",
      "pos": [
        37835,
        37958
      ]
    },
    {
      "content": "Step-by-step StorSimple troubleshooting example",
      "pos": [
        41565,
        41612
      ]
    },
    {
      "content": "The following example shows step-by-step troubleshooting of a StorSimple deployment.",
      "pos": [
        41614,
        41698
      ]
    },
    {
      "content": "In the example scenario, device registration fails with an error message indicating that the network settings or the DNS name is incorrect.",
      "pos": [
        41699,
        41838
      ]
    },
    {
      "content": "The error message returned is:",
      "pos": [
        41840,
        41870
      ]
    },
    {
      "content": "The error could be caused by any of the following:",
      "pos": [
        42274,
        42324
      ]
    },
    {
      "content": "Incorrect hardware installation",
      "pos": [
        42328,
        42359
      ]
    },
    {
      "content": "Faulty network interface(s)",
      "pos": [
        42362,
        42389
      ]
    },
    {
      "content": "Incorrect IP address, subnet mask, gateway, primary DNS server, or web proxy",
      "pos": [
        42392,
        42468
      ]
    },
    {
      "content": "Incorrect registration key",
      "pos": [
        42471,
        42497
      ]
    },
    {
      "content": "Incorrect firewall settings",
      "pos": [
        42500,
        42527
      ]
    },
    {
      "content": "To locate and fix the device registration problem",
      "pos": [
        42533,
        42582
      ]
    },
    {
      "pos": [
        42587,
        42674
      ],
      "content": "Check your device configuration: on the active controller, run <ph id=\"ph1\">`Invoke-HcsSetupWizard`</ph>."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The setup wizard must run on the active controller.",
      "pos": [
        42683,
        42747
      ]
    },
    {
      "content": "To verify that you are connected to the active controller, look at the banner presented in the serial console.",
      "pos": [
        42748,
        42858
      ]
    },
    {
      "content": "The banner indicates whether you are connected to controller 0 or controller 1, and whether the controller is active or passive.",
      "pos": [
        42859,
        42987
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Identify an active controller on your device<ept id=\"p1\">](storsimple-controller-replacement.md#identify-the-active-controller-on-your-device)</ept>.",
      "pos": [
        42988,
        43147
      ]
    },
    {
      "content": "Make sure that the device is cabled correctly: check the network cabling on the device back plane.",
      "pos": [
        43153,
        43251
      ]
    },
    {
      "content": "The cabling is specific to the device model.",
      "pos": [
        43252,
        43296
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install your StorSimple 8100 device<ept id=\"p1\">](storsimple-8100-hardware-installation.md)</ept> or <bpt id=\"p2\">[</bpt>Install your StorSimple 8600 device<ept id=\"p2\">](storsimple-8600-hardware-installation.md)</ept>.",
      "pos": [
        43297,
        43488
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you are using 10 GbE network ports, you will need to use the provided QSFP-SFP adapters and SFP cables.",
      "pos": [
        43497,
        43616
      ]
    },
    {
      "content": "For more information, see the <bpt id=\"p1\">[</bpt>list of cables, switches, and transceivers recommended by the OEM supplier for Mellanox ports<ept id=\"p1\">](http://www.mellanox.com/page/cables?mtag=cable_overview)</ept>.",
      "pos": [
        43617,
        43800
      ]
    },
    {
      "content": "Verify the health of the network interface:",
      "pos": [
        43806,
        43849
      ]
    },
    {
      "content": "Use the Get-NetAdapter cmdlet to detect the health of the network interfaces for DATA 0.",
      "pos": [
        43856,
        43944
      ]
    },
    {
      "content": "If the link isn't functioning, the <bpt id=\"p1\">**</bpt>ifindex<ept id=\"p1\">**</ept> status will indicate that the interface is down.",
      "pos": [
        43951,
        44046
      ]
    },
    {
      "content": "You will then need to check the network connection of the port to the appliance and to the switch.",
      "pos": [
        44047,
        44145
      ]
    },
    {
      "content": "You will also need to rule out bad cables.",
      "pos": [
        44146,
        44188
      ]
    },
    {
      "pos": [
        44195,
        44700
      ],
      "content": "If you suspect that the DATA 0 port on the active controller has failed, you can confirm this by connecting to the DATA 0 port on controller 1. To confirm this, disconnect the network cable from the back of the device from controller 0, connect the cable to controller 1, and then run the Get-NetAdapter cmdlet again. \nIf the DATA 0 port on a controller fails, [contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps. You might need to replace the controller on your system.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "If you suspect that the DATA 0 port on the active controller has failed, you can confirm this by connecting to the DATA 0 port on controller 1. To confirm this, disconnect the network cable from the back of the device from controller 0, connect the cable to controller 1, and then run the Get-NetAdapter cmdlet again.",
          "pos": [
            0,
            317
          ],
          "nodes": [
            {
              "content": "If you suspect that the DATA 0 port on the active controller has failed, you can confirm this by connecting to the DATA 0 port on controller 1.",
              "pos": [
                0,
                143
              ]
            },
            {
              "content": "To confirm this, disconnect the network cable from the back of the device from controller 0, connect the cable to controller 1, and then run the Get-NetAdapter cmdlet again.",
              "pos": [
                144,
                317
              ]
            }
          ]
        },
        {
          "content": "If the DATA 0 port on a controller fails, [contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps. You might need to replace the controller on your system.",
          "pos": [
            319,
            502
          ],
          "nodes": [
            {
              "content": "If the DATA 0 port on a controller fails, <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for next steps.",
              "pos": [
                0,
                126
              ]
            },
            {
              "content": "You might need to replace the controller on your system.",
              "pos": [
                127,
                183
              ]
            }
          ]
        }
      ]
    },
    {
      "content": "Verify the connectivity to the switch:",
      "pos": [
        44706,
        44744
      ]
    },
    {
      "content": "Make sure that DATA 0 network interfaces on controller 0 and controller 1 in your primary enclosure are on the same subnet.",
      "pos": [
        44750,
        44873
      ]
    },
    {
      "content": "Check the hub or router.",
      "pos": [
        44880,
        44904
      ]
    },
    {
      "content": "Typically, you should connect both controllers to the same hub or router.",
      "pos": [
        44905,
        44978
      ]
    },
    {
      "content": "Make sure that the switches you use for the connection have DATA 0 for both controllers in the same vLAN.",
      "pos": [
        44985,
        45090
      ]
    },
    {
      "content": "Eliminate any user errors:",
      "pos": [
        45098,
        45124
      ]
    },
    {
      "pos": [
        45130,
        45255
      ],
      "content": "Run the setup wizard again (run <bpt id=\"p1\">**</bpt>Invoke-HcsSetupWizard<ept id=\"p1\">**</ept>), and enter the values again to make sure that there are no errors."
    },
    {
      "content": "Verify the registration key used.",
      "pos": [
        45261,
        45294
      ]
    },
    {
      "content": "The same registration key can be used to connect multiple devices to a StorSimple Manager service.",
      "pos": [
        45295,
        45393
      ]
    },
    {
      "content": "Use the procedure in <bpt id=\"p1\">[</bpt>Get the service registration key<ept id=\"p1\">](storsimple-manage-service.md#get-the-service-registration-key)</ept> to ensure that you are using the correct registration key.",
      "pos": [
        45394,
        45571
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> If you have multiple services running, you will need to ensure that the registration key for the appropriate service is used to register the device.",
      "pos": [
        45579,
        45745
      ]
    },
    {
      "content": "If you have registered a device with the wrong StorSimple Manager service, you will need to <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for next steps.",
      "pos": [
        45746,
        45922
      ]
    },
    {
      "content": "You may have to perform a factory reset of the device (which could result in data loss) to then connect it to the intended service.",
      "pos": [
        45923,
        46054
      ]
    },
    {
      "content": "Use the Test-Connection cmdlet to verify that you have connectivity to the outside network.",
      "pos": [
        46059,
        46150
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Troubleshoot with the Test-Connection cmdlet<ept id=\"p1\">](#troubleshoot-with-the-test-connection-cmdlet)</ept>.",
      "pos": [
        46151,
        46273
      ]
    },
    {
      "content": "Check for firewall interference.",
      "pos": [
        46278,
        46310
      ]
    },
    {
      "content": "If you have verified that the virtual IP (VIP), subnet, gateway, and DNS settings are all correct, and you still see connectivity issues, then it is possible that your firewall is blocking communication between your device and the outside network.",
      "pos": [
        46311,
        46558
      ]
    },
    {
      "content": "You need to ensure that ports 80 and 443 are available on your StorSimple device for outbound communication.",
      "pos": [
        46559,
        46667
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Networking requirements for your StorSimple device<ept id=\"p1\">](storsimple-system-requirements.md#networking-requirements-for-your-storsimple-device)</ept>.",
      "pos": [
        46668,
        46833
      ]
    },
    {
      "content": "Look at the logs.",
      "pos": [
        46838,
        46855
      ]
    },
    {
      "content": "Go to <bpt id=\"p1\">[</bpt>Support packages and device logs available for troubleshooting<ept id=\"p1\">](#support-packages-and-device-logs-available-for-troubleshooting)</ept>.",
      "pos": [
        46856,
        46992
      ]
    },
    {
      "pos": [
        46997,
        47130
      ],
      "content": "If the preceding steps do not solve the problem, <bpt id=\"p1\">[</bpt>contact Microsoft Support<ept id=\"p1\">](storsimple-contact-microsoft-support.md)</ept> for assistance."
    },
    {
      "content": "Next steps",
      "pos": [
        47135,
        47145
      ]
    },
    {
      "pos": [
        47146,
        47243
      ],
      "content": "<bpt id=\"p1\">[</bpt>Learn how to troubleshoot an operational device<ept id=\"p1\">](storsimple-troubleshoot-operational-device.md)</ept>."
    }
  ],
  "content": "<properties \n   pageTitle=\"Troubleshoot StorSimple device deployment issues | Microsoft Azure\"\n   description=\"Describes how to diagnose and fix errors that occur when you first deploy StorSimple.\"\n   services=\"storsimple\"\n   documentationCenter=\"NA\"\n   authors=\"alkohli\"\n   manager=\"carolz\"\n   editor=\"\" />\n<tags \n   ms.service=\"storsimple\"\n   ms.devlang=\"NA\"\n   ms.topic=\"article\"\n   ms.tgt_pltfrm=\"NA\"\n   ms.workload=\"TBD\"\n   ms.date=\"08/18/2015\"\n   ms.author=\"alkohli\" />\n\n# Troubleshoot StorSimple device deployment issues\n\n## Overview\n\nThis article provides helpful troubleshooting guidance for your Microsoft Azure StorSimple deployment. It describes common issues, possible causes, and recommended steps to help you resolve problems that you might experience when you configure StorSimple. This information applies to both the StorSimple on-premises physical device and the StorSimple virtual device.\n\n> [AZURE.NOTE] Device configuration-related issues that you may face can occur when you deploy the device for the first time, or they can occur later, when the device is operational. This article focuses on troubleshooting first-time deployment issues. To troubleshoot an operational device, go to [Troubleshoot operational device issues](storsimple-troubleshoot-operational-device.md).\n\nThis article also describes the tools for troubleshooting StorSimple deployments and provides a step-by-step troubleshooting example.\n\n## First-time deployment issues\n\nIf you run into an issue when deploying your device for the first time, consider the following:\n\n- If you are troubleshooting a physical device, make sure that the hardware has been installed and configured as described in [Install your StorSimple 8100 device](storsimple-8100-hardware-installation.md) or [Install your StorSimple 8600 device](storsimple-8600-hardware-installation.md).\n- Check prerequisites for deployment. Make sure that you have all the information described in the [deployment configuration checklist](storsimple-deployment-walkthrough.md#deployment-configuration-checklist).\n- Review the StorSimple Release Notes to see if the problem is described. The release notes include workarounds for known installation problems. \n\nDuring device deployment, the most common issues that users face occur when they run the setup wizard and when they register the device via Windows PowerShell for StorSimple. (You use Windows PowerShell for StorSimple to register and configure your StorSimple device. For more information on device registration, see [Step 3: Configure and register your device through Windows PowerShell for StorSimple](storsimple-deployment-walkthrough.md#step-3-configure-and-register-the-device-through-windows-powershell-for-storsimple)).\n\nThe following sections can help you resolve issues that you encounter when you configure the StorSimple device for the first time.\n\n## First-time setup wizard process\n\nThe following steps summarize the setup wizard process. For detailed setup information, see [Deploy your on-premises StorSimple device](storsimple-deployment-walkthrough.md).\n\n1. Run the [Invoke-HcsSetupWizard](https://technet.microsoft.com/library/dn688135.aspx) cmdlet to start the setup wizard that will guide you through the remaining steps. \n2. Configure the network: the setup wizard lets you configure network settings for the DATA 0 network interface on your StorSimple device. These settings include the following:\n  - Virtual IP (VIP), subnet mask, and gateway – The [Set-HcsNetInterface](https://technet.microsoft.com/library/dn688161.aspx) cmdlet is executed in the background. It configures the IP address, subnet mask, and gateway for the DATA 0 network interface on your StorSimple device.\n  - Primary DNS server – The [Set-HcsDnsClientServerAddress](https://technet.microsoft.com/library/dn688172.aspx) cmdlet is executed in the background. It configures the DNS settings for your StorSimple solution.\n  - NTP server – The [Set-HcsNtpClientServerAddress](https://technet.microsoft.com/library/dn688138.aspx) cmdlet is executed in the background. It configures the NTP server settings for your StorSimple solution.\n  - Optional web proxy – The [Set-HcsWebProxy](https://technet.microsoft.com/library/dn688154.aspx) cmdlet is executed in the background. It sets and enables the web proxy configuration for your StorSimple solution.\n3. Set up the passwords: the next step is to set up device administrator and StorSimple Snapshot Manager passwords. If you are running Update 1, then you will not be required to set up the StorSimple Snapshot Manager password.\n  - The device administrator password is used to log on to your device. The default device password is **Password1**.\n  - The StorSimple Snapshot Manager password is required when you configure a device to use StorSimple Snapshot Manager. You need to first set the password in the setup wizard, and then you can set and change it from the StorSimple Manager service. This password authenticates the device with StorSimple Snapshot Manager.\n \n    > [AZURE.IMPORTANT] Passwords are collected before registration, but applied only after you successfully register the device. If there is a failure to apply a password, you will be prompted to supply the password again until the required passwords (that meet the complexity requirements) are collected.\n\n4. Register the device: the final step is to register the device with the StorSimple Manager service running in Microsoft Azure. The registration requires you to [get the service registration key](storsimple-manage-service.md#get-the-service-registration-key) from the Azure Management Portal, and provide it in the setup wizard. After the device is successfully registered, a service data encryption key is provided to you. Be sure to keep this encryption key in a safe location because it will be required to register all subsequent devices with the service.\n\n## Common errors during device deployment\n\nThe following tables list the common errors that you might encounter when you:\n\n- Configure the required network settings.\n- Configure the optional web proxy settings.\n- Set up the device administrator and StorSimple Snapshot Manager passwords. \n- Register the device. \n\n## Errors during the required network settings\n\n| No.| Error message | Possible causes | Recommended action |\n| ---| ------------- | --------------- | ------------------ |\n| 1  | Invoke-HcsSetupWizard: This command can only be run on the active controller. | Configuration was being performed on the passive controller.| Run this command from the active controller. For more information, see [Identify an active controller on your device](storsimple-controller-replacement.md#identify-the-active-controller-on-your-device).|\n| 2 | Invoke-HcsSetupWizard: Device not ready. | There are issues with the network connectivity on DATA 0.| Check the physical network connectivity on DATA 0.|\n| 3 | Invoke-HcsSetupWizard: There is an IP address conflict with another system on the network (Exception from HRESULT: 0x80070263). | The IP supplied for DATA 0 was already in use by another system. | Provide a new IP that is not in use.|\n| 4 | Invoke-HcsSetupWizard: A cluster resource failed. (Exception from HRESULT:0x800713AE). | Duplicate VIP. The supplied IP is already in use.| Provide a new IP that is not in use.|\n| 5 | Invoke-HcsSetupWizard: Invalid IPv4 address. | The IP address is provided in an incorrect format.| Check the format and supply your IP address again. For more information, see [Ipv4 Addressing][1]. |\n| 6 | Invoke-HcsSetupWizard: Invalid IPv6 address. | The IP address is provided in an incorrect format.| Check the format and supply your IP address again. For more information, see [Ipv6 Addressing][2].|\n| 7 | Invoke-HcsSetupWizard: There are no more endpoints available from the endpoint mapper. (Exception from HRESULT: 0x800706D9) | The cluster functionality is not working. | [Contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps.\n\n## Errors during the optional web proxy settings\n\n| No.| Error message | Possible causes | Recommended action |\n| ---| ------------- | --------------- | ------------------ |\n| 1  | Invoke-HcsSetupWizard: Invalid parameter (Exception from HRESULT: 0x80070057) | One of the parameters provided for the proxy settings is not valid.| The URI is not provided in the correct format. Use the following format: http://*<IP address or FQDN of the web proxy server>*:*<TCP port number>* |\n| 2 | Invoke-HcsSetupWizard: RPC server not available (Exception from HRESULT: 0x800706ba) | The root cause is one of the following:<ol><li>The cluster is not up.</li><li>The passive controller cannot communicate with the active controller, and the command is run from passive controller.</li></ol> | Depending on the root cause:<ol><li>[Contact Microsoft Support](storsimple-contact-microsoft-support.md) to make sure that the cluster is up.</li><li>Run the command from the active controller. If you want to run the command from the passive controller, you will need to ensure that the passive controller can communicate with the active controller. You will need to [contact Microsoft Support](storsimple-contact-microsoft-support.md) if this connectivity is broken.</li></ol> |\n| 3 | Invoke-HcsSetupWizard: RPC call failed (Exception from HRESULT: 0x800706be) | Cluster is down. | [Contact Microsoft Support](storsimple-contact-microsoft-support.md) to make sure that the cluster is up.|\n| 4 | Invoke-HcsSetupWizard: Cluster resource not found (Exception from HRESULT: 0x8007138f) | The cluster resource is not found. This can happen when the installation was not correct. | You may need to reset the device to the factory default settings. [Contact Microsoft Support](storsimple-contact-microsoft-support.md) to create a cluster resource.|\n| 5 | Invoke-HcsSetupWizard: Cluster resource not online (Exception from HRESULT: 0x8007138c)| Cluster resources are not online. | [Contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps.|\n\n## Errors related to device administrator and StorSimple Snapshot Manager passwords\n\nThe default device administrator password is **Password1**. This password expires after the first log on; therefore, you will need to use the setup wizard to change it. You must provide a new device administrator password when you register the device for the first time. \n\nIf you use the StorSimple Snapshot Manager software running on the Windows Server host to manage the device, then you must also provide a StorSimple Snapshot Manager password during first-time registration. \n\nMake sure that your passwords meet the following requirements:\n\n- Your device administrator password should be between 8 and 15 characters long.\n- Your StorSimple Snapshot Manager password should be 14 or 15 characters long.\n- Passwords should contain 3 of the following 4 character types: lowercase, uppercase, numeric, and special. \n- Your password cannot be the same as the last 24 passwords.\n\nIn addition, keep in mind that passwords expire every year, and can be changed only after you successfully register the device. If the registration fails for any reason, the passwords will not be changed. \nFor more information on device administrator and StorSimple Snapshot Manager passwords, go to [Use the StorSimple Manager service to change your StorSimple passwords](storsimple-change-passwords.md).\n\nYou may encounter one or more of the following errors when setting up the device administrator and StorSimple Snapshot Manager passwords.\n\n| No.| Error message | Recommended action |\n| ---| ------------- | ------------------ | \n| 1  | The password exceeds the maximum length. |Use a password that meets these requirements:<ul><li>Your device administrator password must be between 8 and 15 characters long.</li><li>Your StorSimple Snapshot Manager password must be 14 or 15 characters long.</li></ul> | \n| 2 | The password does not meet the required length. | Use a password that meets these requirements:<ul><li>Your device administrator password must be between 8 and 15 characters long.</li><li>Your StorSimple Snapshot Manager password must be 14 or 15 characters long.</lu></ul> |\n| 3 | The password must contain lowercase characters. | Passwords must contain 3 of the following 4 character types: lowercase, uppercase, numeric, and special. Make sure that your password meets these requirements. |\n| 4 | The password must contain numeric characters. | Passwords must contain 3  of the following 4 character types: lowercase, uppercase, numeric, and special. Make sure that your password meets these requirements. |\n| 5 | The password must contain special characters. | Passwords must contain 3 of the following 4 character types: lowercase, uppercase, numeric, and special. Make sure that your password meets these requirements. |\n| 6 | The password must contain 3 of the following 4 character types: uppercase, lowercase, numeric, and special. | Your password does not contain the required types of characters. Make sure that your password meets these requirements. |\n| 7 | Parameter does not match confirmation. | Make sure that your password meets all requirements and that you entered it correctly. |\n| 8 | Your password cannot match the default. | The default password is  *Password1*. You need to change this password after you log on for the first time. |\n| 9 | The password you have entered does not match the device password. Please retype the password. | Check the password and type it again. |\n\nPasswords are collected before the device is registered, but are applied only after successful registration. The password recovery workflow requires the device to be registered. \n\n> [AZURE.IMPORTANT] In general, if an attempt to apply a password fails, then the software repeatedly attempts to collect the password until it is successful. In rare instances, the password cannot be applied. In this situation, you can register the device and proceed, however the passwords will not be changed. You will receive no indication as to which password was not changed — the device administrator password or the StorSimple Snapshot Manager password. If this situation occurs, we recommend that you change both passwords.\n\nYou can reset the passwords from the Management Portal of your StorSimple Manager service. For more information, see: \n\n- [Change the device administrator password](storsimple-change-passwords.md#change-the-device-administrator-password).\n- [Change the StorSimple Snapshot Manager password](storsimple-change-passwords.md#change-the-storsimple-snapshot-manager-password).\n\n## Errors during device registration\n\nYou use the StorSimple Manager service running in Microsoft Azure to register the device. You could encounter one or more of the following issues during device registration.\n\n| No.| Error message | Possible causes | Recommended action |\n| ---| ------------- | --------------- | ------------------ |\n| 1  | Error 350027: Failed to register the device with the StorSimple Manager. |  | Wait for a few minutes and then try the operation again. If the issue persists, [contact Microsoft Support](storsimple-contact-microsoft-support.md).|\n| 2  | Error 350013: An error has occurred in registering the device. This could be due to incorrect service registration key. | | Please register the device again with the correct service registration key. For more information, see [Get the service registration key.](storsimple-manage-service.md#get-the-service-registration-key) |\n| 3 | Error 350063: Authentication to StorSimple Manager service passed but registration failed. Please retry the operation after some time. | This error indicates that authentication with ACS has passed but the register call made to the service has failed. This could be a result of a sporadic network glitch. | If the issue persists, please [contact Microsoft Support](storsimple-contact-microsoft-support.md). |\n| 4 | Error 350049: The service could not be reached during registration. | When the call is made to the service, a web exception is received. In some cases, this may get fixed with retrying the operation later. | Please check your IP address and DNS name and then retry the operation. If the problem persists, [contact Microsoft Support.](storsimple-contact-microsoft-support.md) | \n| 5 | Error 350031: The device has already been registered. | | No action necessary. |\n| 6 | Error 350016: Device Registration failed. | |Please make sure the registration key is correct. |\n| 7 | Invoke-HcsSetupWizard: An error has occurred while registering your device; this could be due to incorrect IP address or DNS name. Please check your network settings and try again. If the problem persists, [contact Microsoft Support](storsimple-contact-microsoft-support.md). (Error 350050) | Ensure that your device can ping the outside network. If you do not have connectivity to outside network, the registration may fail with this error. This error may be a combination of one or more of the following:<ul><li>Incorrect IP</li><li>Incorrect subnet</li><li>Incorrect gateway</li><li>Incorrect DNS settings</li></ul> | See the steps in the [Step-by-step troubleshooting example](#step-by-step-storsimple-troubleshooting-example). |\n| 8 | Invoke-HcsSetupWizard: The current operation failed due to an internal service error [0x1FBE2]. Please retry the operation after sometime. If the issue persists, please contact Microsoft Support. | This is a generic error thrown for all user invisible errors from service or agent. The most common reason may be that the ACS authentication has failed. A possible cause for the failure is that there are issues with the NTP server configuration and time on the device is not set correctly. | Correct the time (if there are issues) and then retry the registration operation. If this issue persists, [contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps. |\n| 9 | Warning: Could not activate the device. Your device administrator and StorSimple Snapshot Manager passwords have not been changed. | If the registration fails, the device administrator and StorSimple Snapshot Manager passwords are not changed. |\n\n## Tools for troubleshooting StorSimple deployments\n\nStorSimple includes several tools that you can use to troubleshoot your StorSimple solution. These include:\n\n- Support packages and device logs \n- Cmdlets specifically designed for troubleshooting \n\n## Support packages and device logs available for troubleshooting\n\nA support package contains all the relevant logs that can assist the Microsoft Support team with troubleshooting device issues. You can use Windows PowerShell for StorSimple to generate an encrypted support package that you can then share with support personnel.\n\n### To view the logs or the contents of the support package\n\n1. Use Windows PowerShell for StorSimple to generate a support package as described in [Create and manage a support package](storsimple-create-manage-support-package.md).\n\n2. Download the [decryption script](https://gallery.technet.microsoft.com/scriptcenter/Script-to-decrypt-a-a8d1ed65) locally on your client computer.\n\n3. Use this [step-by-step procedure](storsimple-create-manage-support-package.md#edit-a-support-package) to open and decrypt the support package.\n\n4. The decrypted support package logs are in etw/etvx format. You can perform the following steps to view these files in Windows Event Viewer:\n  1. Run the **eventvwr** command on your Windows client. This will start the Event Viewer.\n  2. In the **Actions** pane, click **Open Saved Log** and point to the log files in etvx/etw format (the support package). You can now view the file. After you open the file, you can right-click and save the the file as text.\n   \n    > [AZURE.IMPORTANT] You can also use the **Get-WinEvent** cmdlet to open these file in Windows PowerShell. For more information, see [Get-WinEvent](https://technet.microsoft.com/library/hh849682.aspx) in the Windows PowerShell cmdlet reference documentation.\n\n5. When the logs open in Event Viewer, look for the following logs that contain issues related to the device configuration:\n\n  - hcs_pfconfig/Operational Log\n  - hcs_pfconfig/Config\n\n6. In the log files, search for strings related to the cmdlets called by the setup wizard. See [First-time setup wizard process](#first-time-setup-wizard-process) for a list of these cmdlets. \n\n7. If you are not able to figure out the cause of the problem, you can [contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps. Use the steps in [Create a support request](storsimple-contact-microsoft-support.md#create-a-support-request) when you contact Microsoft Support for assistance.\n\n## Cmdlets available for troubleshooting\n\nUse the following Windows PowerShell cmdlets to detect connectivity errors.\n\n- `Get-NetAdapter`: Use this cmdlet to detect the health of network interfaces. \n\n- `Test-Connection`: Use this cmdlet to check the network connectivity inside and outside of the network.\n\n- `Test-HcsmConnection`: Use this cmdlet to check the connectivity of a successfully registered device.\n\nIf you are running Update 1 on your StorSimple device, the following diagnostic cmdlets are also available.\n\n- `Sync-HcsTime`: Use this cmdlet to display device time and force a time sync with the NTP server.\n\n- `Enable-HcsPing` and `Disable-HcsPing`: Use these cmdlets to allow the hosts to ping the network interfaces on your StorSimple device. By default, the StorSimple network interfaces do not respond to ping requests.\n\n- `Trace-HcsRoute`: Use this cmdlet as a route tracing tool. It sends packets to each router on the way to a final destination over a period of time, and then computes results based on the packets returned from each hop. Since `Trace-HcsRoute` shows the degree of packet loss at any given router or link, you can pinpoint which routers or links might be causing network problems. \n\n- `Get-HcsRoutingTable`: Use this cmdlet to display the local IP routing table.\n\n## Troubleshoot with the Get-NetAdapter cmdlet\n\nWhen you configure network interfaces for a first-time device deployment, the hardware status is not available in the StorSimple Manager service UI because the device is not yet registered with the service. Additionally, the Hardware Status page may not always correctly reflect the state of the device, especially if there are issues that affect service synchronization. In these situations, you can use the `Get-NetAdapter` cmdlet to determine the health and status of your network interfaces.\n\n### To see a list of all the network adapters on your device\n\n1. Start Windows PowerShell for StorSimple, and then type `Get-NetAdapter`. \n\n2. Use the output of the `Get-NetAdapter` cmdlet and the following guidelines to understand the status of your network interface.\n  - If the interface is healthy and enabled, the **ifIndex** status is shown as **Up**.\n  - If the interface is healthy but is not physically connected (by a network cable), the **ifIndex** is shown as **Disabled**.\n  - If the interface is healthy but not enabled, the **ifIndex** status is shown as **NotPresent**.\n  - If the interface does not exist, it does not appear in this list. The StorSimple Manager service UI will still show this interface in a failed state.\n\nFor more information on how to use this cmdlet, go to [GetNetAdapter](https://technet.microsoft.com/library/jj130867.aspx) in the Windows PowerShell cmdlet reference. \n\nThe following sections show samples of output from the `Get-NetAdapter` cmdlet. \n\n In these samples, controller 0 was the passive controller, and was configured as follows:\n\n- DATA 0, DATA 1, DATA 2, and DATA 3 network interfaces existed on the device.\n- DATA 4 and DATA 5 network interface cards were not present; therefore, they are not listed in the output.\n- DATA 0 was enabled.\n\nController 1 was the active controller, and was configured as follows:\n\n- DATA 0, DATA 1, DATA 2, DATA 3, DATA 4, and DATA 5 network interfaces existed on the device.\n- DATA 0 was enabled.\n\n**Sample output – controller 0**\n\nThe following is the output from controller 0 (the passive controller). DATA 1, DATA 2, and DATA 3 are not connected. DATA 4 and DATA 5 are not listed because they are not present on the device. \n\n     Controller0>Get-NetAdapter\n     Name                 InterfaceDescription                        ifIndex  Status\n     ------               --------------------                        -------  ----------\n     DATA3                Mellanox ConnectX-3 Ethernet Adapter #2     17       NotPresent\n     DATA2                Mellanox ConnectX-3 Ethernet Adapter        14       NotPresent\n     Ethernet 2           HCS VNIC                                    13       Up\n     DATA1                Intel(R) 82574L Gigabit Network Co...#2     16       NotPresent\n     DATA0                Intel(R) 82574L Gigabit Network Conn...     15       Up\n\n\n**Sample output – controller 1**\n\nThe following is the output from controller 1 (the active controller). Only the DATA 0 network interface on the device is configured and working.\n\n     Controller1>Get-NetAdapter\n     Name                 InterfaceDescription                        ifIndex  Status\n     ------               --------------------                        -------  ----------\n     DATA3                Mellanox ConnectX-3 Ethernet Adapter        18       NotPresent\n     DATA2                Mellanox ConnectX-3 Ethernet Adapter #2     19       NotPresent\n     DATA1                Intel(R) 82574L Gigabit Network Co...#2     16       NotPresent\n     DATA0                Intel(R) 82574L Gigabit Network Conn...     15       Up\n     Ethernet 2           HCS VNIC                                    13       Up\n     DATA5                Intel(R) Gigabit ET Dual Port Server...     14       NotPresent\n     DATA4                Intel(R) Gigabit ET Dual Port Serv...#2     17       NotPresent\n\n \n## Troubleshoot with the Test-Connection cmdlet\n\nYou can use the `Test-Connection` cmdlet to determine whether your StorSimple device can connect to the outside network. If all the networking parameters, including the DNS, are configured correctly in the setup wizard, you can use the `Test-Connection` cmdlet to ping a known address outside of the network, such as outlook.com. \n\nSee the following samples of output from the `Test-Connection` cmdlet. \n\n> [AZURE.NOTE] In the first sample, the device is configured with an incorrect DNS. In the second sample, the DNS is correct.\n \n**Sample output – incorrect DNS**\n\nIn the following sample, there is no output for the IPV4 and IPV6 addresses, which indicates that the DNS is not resolved. This means that there is no connectivity to the outside network and a correct DNS needs to be supplied. \n\n     Source        Destination     IPV4Address      IPV6Address\n     ------        -----------     -----------      -----------\n     HCSNODE0      outlook.com\n     HCSNODE0      outlook.com\n     HCSNODE0      outlook.com\n     HCSNODE0      outlook.com\n\n**Sample output – correct DNS**\n\nIn the following sample, the DNS returns the IPV4 address, indicating that the DNS is configured correctly. This confirms that there is connectivity to the outside network. \n\n     Source        Destination     IPV4Address      IPV6Address\n     ------        -----------     -----------      -----------\n     HCSNODE0      outlook.com     132.245.92.194\n     HCSNODE0      outlook.com     132.245.92.194\n     HCSNODE0      outlook.com     132.245.92.194\n     HCSNODE0      outlook.com     132.245.92.194\n\n## Troubleshoot with the Test-HcsmConnection cmdlet\n\nUse the `Test-HcsmConnection` cmdlet for a device that is already connected to and registered with your StorSimple Manager service. This cmdlet helps you verify the connectivity between a registered device and the corresponding StorSimple Manager service. You can run this command on Windows PowerShell for StorSimple. \n\n### To run the Test-HcsmConnection cmdlet\n\n1. Make sure that the device is registered.\n\n2. Check the device status. If the device is deactivated, in maintenance mode, or offline, you might see the following errors: \n\n   - ErrorCode.CiSDeviceDecommissioned – this indicates that the device is deactivated.\n   - ErrorCode.DeviceNotReady – this indicates that the device is in maintenance mode.\n   - ErrorCode.DeviceNotReady – this indicates that the device is not online.\n\n3. Verify that the StorSimple Manager service is running (use the [Get-ClusterResource](https://technet.microsoft.com/library/ee461004.aspx) cmdlet). If the service is not running, you might see the following errors:\n\n   - ErrorCode.CiSApplianceAgentNotOnline\n   - ErrorCode.CisPowershellScriptHcsError – this indicates that there was an exception when you ran Get-ClusterResource.\n\n4. Check the Access Control Service (ACS) token. If it throws a web exception, it might be the result of a gateway problem, a missing proxy authentication, an incorrect DNS, or an authentication failure. You might see the following errors:\n\n   - ErrorCode.CiSApplianceGateway – this indicates an HttpStatusCode.BadGateway exception: the name resolver service could not resolve the host name. \n   - ErrorCode.CiSApplianceProxy – this indicates an HttpStatusCode.ProxyAuthenticationRequired exception (HTTP status code 407): the client could not authenticate with the proxy server. \n   - ErrorCode.CiSApplianceDNSError – this indicates a WebExceptionStatus.NameResolutionFailure exception: the name resolver service could not resolve the host name. .\n   - ErrorCode.CiSApplianceACSError – this indicates that the service returned an authentication error, but there is connectivity.\n   \n    If it does not throw a web exception, check for ErrorCode.CiSApplianceFailure. This indicates that the appliance failed.\n\n5. Check the cloud service connectivity. If the service throws a web exception, you might see the following errors:\n\n  - ErrorCode.CiSApplianceGateway – this indicates an HttpStatusCode.BadGateway exception: an intermediate proxy server received a bad request from another proxy or from the original server.\n  - ErrorCode.CiSApplianceProxy – this indicates an HttpStatusCode.ProxyAuthenticationRequired exception (HTTP status code 407): the client could not authenticate with the proxy server. \n  - ErrorCode.CiSApplianceDNSError – this indicates a WebExceptionStatus.NameResolutionFailure exception: the name resolver service could not resolve the host name. .\n  - ErrorCode.CiSApplianceACSError – this indicates that the service returned an authentication error, but there is connectivity.\n  \n    If it does not throw a web exception, check for ErrorCode.CiSApplianceSaasServiceError. This indicates a problem with the StorSimple Manager service.\n \n6. Check Azure Service Bus connectivity. ErrorCode.CiSApplianceServiceBusError indicates that the device cannot connect to the Service Bus.\n \nThe log files CiSCommandletLog0Curr.errlog and CiSAgentsvc0Curr.errlog will have more information, such as exception details. \n\nFor more information about how to use the cmdlet, go to [Test-HcsmConnection](https://technet.microsoft.com/library/dn715782.aspx) in the Windows PowerShell reference documentation.\n\n> [AZURE.IMPORTANT] You can run this cmdlet for both the active and the passive controller. \n \nSee the following samples of output from the `Test-HcsmConnection` cmdlet. \n\n**Sample output – successfully registered device running StorSimple Release (July 2014)**\n\nThe first sample is from a device that is successfully registered with the StorSimple Manager service and has no connectivity issues. \n\n     Controller1>Test-HcsmConnection -verbose\n     Checking device state  ... Success.\n     Device registered successfully\n     Checking device authentication.  ... This operation will take few minutes to complete....\n     Checking device authentication.  ... Success.\n     Checking connectivity from device to StorSimple Manager service.  ... This operation will take few minutes to complete....\n     Checking connectivity from device to StorSimple Manager service.  ... Success.\n     Checking connectivity from StorSimple Manager service to StorSimple device. .... Success.\n     Controller1>\n\n**Sample output – successfully registered device running StorSimple Update 1**\n\nIf you are running Update 1 on your StorSimple device, you will not need to run it with the verbose switch.\n\n      Controller1>Test-HcsmConnection\n       \n      Checking device registration state  ... Success\n      Device registered successfully\n       \n      Checking primary NTP server [time.windows.com] ... Success\n       \n      Checking web proxy  ... NOT SET\n       \n      Checking primary IPv4 DNS server [10.222.118.154] ... Success\n      Checking primary IPv6 DNS server  ... NOT SET\n      Checking secondary IPv4 DNS server [10.222.120.24] ... Success\n      Checking secondary IPv6 DNS server  ... NOT SET\n       \n      Checking device online  ... Success\n \n      Checking device authentication  ... This will take a few minutes.\n      Checking device authentication  ... Success\n       \n      Checking connectivity from device to service  ... This will take a few minutes.\n       \n      Checking connectivity from device to service  ... Success\n       \n      Checking connectivity from service to device  ... Success\n       \n      Checking connectivity to Microsoft Update servers  ... Success\n      Controller1>\n\n**Sample output – offline device running StorSimple Release (July 2014)**\n\nThis sample is from a device that has a status of **Offline** in the Management Portal.\n\n     Checking device state: Success \n     Device is registered successfully \n     Checking connectivity from device to SaaS.. Failure\n\nThe device could not connect using the current web proxy configuration. This could be an issue with the web proxy configuration or a network connectivity problem. In this case, you should make sure that your web proxy settings are correct and your web proxy servers are online and reachable. \n\n## Troubleshoot with the Sync-HcsTime cmdlet\n\nUse this cmdlet to display the device time. If the device time has an offset with the NTP server, you can then use this cmdlet to force-synchronize the time with your NTP server. If the offset between the device and NTP server is greater than 5 minutes, you will see a warning. If the offset exceeds 15 minutes, then the device will go offline. You can still use this cmdlet to force a time sync. However, if the offset exceeds 15 hours, then you will not be able to force-sync the time and an error message will be shown.\n\n**Sample output – forced time sync using Sync-HcsTime**\n \n     Controller0>Sync-HcsTime\n     The current device time is 4/24/2015 4:05:40 PM UTC.\n \n     Time difference between NTP server and appliance is 00.0824069 seconds. Do you want to resync time with NTP server?\n     [Y] Yes [N] No (Default is \"Y\"): Y\n     Controller0>\n\n## Troubleshoot with the Enable-HcsPing and Disable-HcsPing cmdlets\n\nUse these cmdlets to ensure that the network interfaces on your device respond to ICMP ping requests. By default the StorSimple network interfaces do not respond to ping requests. Using this cmdlet is the easiest way to know if your device is online and reachable.  \n\n**Sample output – Enable-HcsPing and Disable-HcsPing**\n\n     Controller0>\n     Controller0>Enable-HcsPing\n     Successfully enabled ping.\n     Controller0>\n     Controller0>\n     Controller0>Disable-HcsPing\n     Successfully disabled ping.\n     Controller0>\n\n## Troubleshoot with the Trace-HcsRoute cmdlet\n\nUse this cmdlet as a route tracing tool. It sends packets to each router on the way to a final destination over a period of time, and then computes results based on the packets returned from each hop. Because the cmdlet shows the degree of packet loss at any given router or link, you can pinpoint which routers or links might be causing network problems.\n\n**Sample output showing how to trace the route of a packet with Trace-HcsRoute**\n\n     Controller0>Trace-HcsRoute -Target 10.126.174.25\n     \n     Tracing route to contoso.com [10.126.174.25]\n     over a maximum of 30 hops:\n       0  HCSNode0 [10.126.173.90]\n       1  contoso.com [10.126.174.25]\n      \n     Computing statistics for 25 seconds...\n                 Source to Here   This Node/Link\n     Hop  RTT    Lost/Sent = Pct  Lost/Sent = Pct  Address\n       0                                           HCSNode0 [10.126.173.90]\n                                     0/ 100 =  0%   |\n       1    0ms     0/ 100 =  0%     0/ 100 =  0%  contoso.com\n      [10.126.174.25]\n      \n     Trace complete.\n\n## Troubleshoot with the Get-HcsRoutingTable cmdlet\n\nUse this cmdlet to view the routing table for your StorSimple device. A routing table is a set of rules that can help determine where data packets traveling over an Internet Protocol (IP) network will be directed. \n\nThe routing table shows the interfaces and the gateway that routes the data to the specified networks. It also gives the routing metric which is the decision maker for the path taken to reach a particular destination. The lower the routing metric, the higher the preference. \n\nFor example, if you have 2 network interfaces, DATA 2 and DATA 3, connected to the Internet. If the routing metrics for DATA 2 and DATA 3 are 15 and 261 respectively, then DATA 2 with the lower routing metric is the preferred interface used to reach the Internet.\n\nIf you are running Update 1 on your StorSimple device, your DATA 0 network interface has the highest preference for the cloud traffic. This implies that even if there are other cloud-enabled interfaces, the cloud traffic would be routed through DATA 0. \n\nIf you run the `Get-HcsRoutingTable` cmdlet without specifying any parameters (as the following example shows), the cmdlet will output both IPv4 and IPv6 routing tables. Alternatively, you can specify `Get-HcsRoutingTable -IPv4` or `Get-HcsRoutingTable -IPv6`  to get a relevant routing table.\n\n      Controller0>\n      Controller0>Get-HcsRoutingTable\n      ===========================================================================\n      Interface List\n       14...00 50 cc 79 63 40 ......Intel(R) 82574L Gigabit Network Connection\n       12...02 9a 0a 5b 98 1f ......Microsoft Failover Cluster Virtual Adapter\n       13...28 18 78 bc 4b 85 ......HCS VNIC\n        1...........................Software Loopback Interface 1\n       21...00 00 00 00 00 00 00 e0 Microsoft ISATAP Adapter #2\n       22...00 00 00 00 00 00 00 e0 Microsoft ISATAP Adapter #3\n      ===========================================================================\n       \n      IPv4 Route Table\n      ===========================================================================\n      Active Routes:\n      Network Destination        Netmask          Gateway       Interface  Metric\n                0.0.0.0          0.0.0.0  192.168.111.100  192.168.111.101     15\n              127.0.0.0        255.0.0.0         On-link         127.0.0.1    306\n              127.0.0.1  255.255.255.255         On-link         127.0.0.1    306\n        127.255.255.255  255.255.255.255         On-link         127.0.0.1    306\n            169.254.0.0      255.255.0.0         On-link     169.254.1.235    261\n          169.254.1.235  255.255.255.255         On-link     169.254.1.235    261\n        169.254.255.255  255.255.255.255         On-link     169.254.1.235    261\n          192.168.111.0    255.255.255.0         On-link   192.168.111.101    266\n        192.168.111.101  255.255.255.255         On-link   192.168.111.101    266\n        192.168.111.255  255.255.255.255         On-link   192.168.111.101    266\n              224.0.0.0        240.0.0.0         On-link         127.0.0.1    306\n              224.0.0.0        240.0.0.0         On-link     169.254.1.235    261\n              224.0.0.0        240.0.0.0         On-link   192.168.111.101    266\n        255.255.255.255  255.255.255.255         On-link         127.0.0.1    306\n        255.255.255.255  255.255.255.255         On-link     169.254.1.235    261\n        255.255.255.255  255.255.255.255         On-link   192.168.111.101    266\n      ===========================================================================\n      Persistent Routes:\n        Network Address          Netmask  Gateway Address  Metric\n                0.0.0.0          0.0.0.0  192.168.111.100       5\n      ===========================================================================\n       \n      IPv6 Route Table\n      ===========================================================================\n      Active Routes:\n       If Metric Network Destination      Gateway\n        1    306 ::1/128                  On-link\n       13    276 fd99:4c5b:5525:d80b::/64 On-link\n       13    276 fd99:4c5b:5525:d80b::1/128\n                                          On-link\n       13    276 fd99:4c5b:5525:d80b::3/128\n                                          On-link\n       13    276 fe80::/64                On-link\n       12    261 fe80::/64                On-link\n       13    276 fe80::17a:4eba:7c80:727f/128\n                                          On-link\n       12    261 fe80::fc97:1a53:e81a:3454/128\n                                          On-link\n        1    306 ff00::/8                 On-link\n       13    276 ff00::/8                 On-link\n       12    261 ff00::/8                 On-link\n       14    266 ff00::/8                 On-link\n      ===========================================================================\n      Persistent Routes:\n        None\n       \n      Controller0>\n \n## Step-by-step StorSimple troubleshooting example\n\nThe following example shows step-by-step troubleshooting of a StorSimple deployment. In the example scenario, device registration fails with an error message indicating that the network settings or the DNS name is incorrect.\n\nThe error message returned is:\n\n     Invoke-HcsSetupWizard: An error has occurred while registering the device. This could be due to incorrect IP address or DNS name. Please check your network settings and try again. If the problems persist, contact Microsoft Support.\n     +CategoryInfo: Not specified\n     +FullyQualifiedErrorID: CiSClientCommunicationErros, Microsoft.HCS.Management.PowerShell.Cmdlets.InvokeHcsSetupWizardCommand\n\nThe error could be caused by any of the following:\n\n- Incorrect hardware installation\n- Faulty network interface(s)\n- Incorrect IP address, subnet mask, gateway, primary DNS server, or web proxy\n- Incorrect registration key\n- Incorrect firewall settings\n\n### To locate and fix the device registration problem\n\n1. Check your device configuration: on the active controller, run `Invoke-HcsSetupWizard`.\n\n     > [AZURE.NOTE] The setup wizard must run on the active controller. To verify that you are connected to the active controller, look at the banner presented in the serial console. The banner indicates whether you are connected to controller 0 or controller 1, and whether the controller is active or passive. For more information, go to [Identify an active controller on your device](storsimple-controller-replacement.md#identify-the-active-controller-on-your-device).\n \n2. Make sure that the device is cabled correctly: check the network cabling on the device back plane. The cabling is specific to the device model. For more information, go to [Install your StorSimple 8100 device](storsimple-8100-hardware-installation.md) or [Install your StorSimple 8600 device](storsimple-8600-hardware-installation.md).\n\n     > [AZURE.NOTE] If you are using 10 GbE network ports, you will need to use the provided QSFP-SFP adapters and SFP cables. For more information, see the [list of cables, switches, and transceivers recommended by the OEM supplier for Mellanox ports](http://www.mellanox.com/page/cables?mtag=cable_overview).\n \n3. Verify the health of the network interface:\n\n   - Use the Get-NetAdapter cmdlet to detect the health of the network interfaces for DATA 0. \n   - If the link isn't functioning, the **ifindex** status will indicate that the interface is down. You will then need to check the network connection of the port to the appliance and to the switch. You will also need to rule out bad cables. \n   - If you suspect that the DATA 0 port on the active controller has failed, you can confirm this by connecting to the DATA 0 port on controller 1. To confirm this, disconnect the network cable from the back of the device from controller 0, connect the cable to controller 1, and then run the Get-NetAdapter cmdlet again. \n   If the DATA 0 port on a controller fails, [contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps. You might need to replace the controller on your system.\n \n4. Verify the connectivity to the switch:\n   - Make sure that DATA 0 network interfaces on controller 0 and controller 1 in your primary enclosure are on the same subnet. \n   - Check the hub or router. Typically, you should connect both controllers to the same hub or router. \n   - Make sure that the switches you use for the connection have DATA 0 for both controllers in the same vLAN.\n   \n5. Eliminate any user errors:\n\n  - Run the setup wizard again (run **Invoke-HcsSetupWizard**), and enter the values again to make sure that there are no errors. \n  - Verify the registration key used. The same registration key can be used to connect multiple devices to a StorSimple Manager service. Use the procedure in [Get the service registration key](storsimple-manage-service.md#get-the-service-registration-key) to ensure that you are using the correct registration key.\n\n    > [AZURE.IMPORTANT] If you have multiple services running, you will need to ensure that the registration key for the appropriate service is used to register the device. If you have registered a device with the wrong StorSimple Manager service, you will need to [contact Microsoft Support](storsimple-contact-microsoft-support.md) for next steps. You may have to perform a factory reset of the device (which could result in data loss) to then connect it to the intended service.\n\n6. Use the Test-Connection cmdlet to verify that you have connectivity to the outside network. For more information, go to [Troubleshoot with the Test-Connection cmdlet](#troubleshoot-with-the-test-connection-cmdlet).\n\n7. Check for firewall interference. If you have verified that the virtual IP (VIP), subnet, gateway, and DNS settings are all correct, and you still see connectivity issues, then it is possible that your firewall is blocking communication between your device and the outside network. You need to ensure that ports 80 and 443 are available on your StorSimple device for outbound communication. For more information, see [Networking requirements for your StorSimple device](storsimple-system-requirements.md#networking-requirements-for-your-storsimple-device).\n\n8. Look at the logs. Go to [Support packages and device logs available for troubleshooting](#support-packages-and-device-logs-available-for-troubleshooting).\n\n9. If the preceding steps do not solve the problem, [contact Microsoft Support](storsimple-contact-microsoft-support.md) for assistance.\n\n## Next steps\n[Learn how to troubleshoot an operational device](storsimple-troubleshoot-operational-device.md).\n\n<!--Link references-->\n\n[1]: https://technet.microsoft.com/library/dd379547(v=ws.10).aspx\n[2]: https://technet.microsoft.com/library/dd392266(v=ws.10).aspx \n"
}