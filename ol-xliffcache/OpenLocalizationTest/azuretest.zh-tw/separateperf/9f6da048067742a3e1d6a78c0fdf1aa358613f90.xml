{
  "nodes": [
    {
      "content": "Configure a virtual network using a network configuration file",
      "pos": [
        28,
        90
      ]
    },
    {
      "content": "Instructions to export and import a network configuration file to the Azure Management Portal in order to create or modify virtual networks.",
      "pos": [
        110,
        250
      ]
    },
    {
      "content": "Configure a virtual network using a network configuration file",
      "pos": [
        588,
        650
      ]
    },
    {
      "content": "You can configure a virtual network (VNet) by using the Azure Management portal, or by using a network configuration file.",
      "pos": [
        652,
        774
      ]
    },
    {
      "content": "Creating and modifying a network configuration file",
      "pos": [
        779,
        830
      ]
    },
    {
      "content": "The easiest way to author a network configuration file is to export the network settings from an existing virtual network configuration, then modify the file to contain the settings that you want to configure for your virtual networks.",
      "pos": [
        832,
        1067
      ]
    },
    {
      "content": "To edit the network configuration file, you can simply open the file, make the appropriate changes, then save the file.",
      "pos": [
        1069,
        1188
      ]
    },
    {
      "content": "You can use any <bpt id=\"p1\">*</bpt>xml<ept id=\"p1\">*</ept> editor to make changes to the network configuration file.",
      "pos": [
        1189,
        1268
      ]
    },
    {
      "pos": [
        1271,
        1415
      ],
      "content": "You should closely follow the guidance for <bpt id=\"p1\">[</bpt>network configuration file schema settings<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/jj157100.aspx)</ept>."
    },
    {
      "content": "Azure considers a subnet that has something deployed to it as <bpt id=\"p1\">**</bpt>in use<ept id=\"p1\">**</ept>.",
      "pos": [
        1418,
        1491
      ]
    },
    {
      "content": "When a subnet is in use, it cannot be modified.",
      "pos": [
        1492,
        1539
      ]
    },
    {
      "content": "Before modifying, move anything that you have deployed to the subnet to a different subnet that isn't being modified.",
      "pos": [
        1540,
        1657
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Move a VM or Role Instance to a Different Subnet<ept id=\"p1\">](virtual-networks-move-vm-role-to-subnet.md)</ept>.",
      "pos": [
        1660,
        1759
      ]
    },
    {
      "content": "Export and import virtual network settings using the Management Portal",
      "pos": [
        1764,
        1834
      ]
    },
    {
      "content": "You can import and export network configuration settings contained in your network configuration file by using PowerShell or the Management Portal.",
      "pos": [
        1837,
        1984
      ]
    },
    {
      "content": "The instructions below will help you export and import using the Management Portal.",
      "pos": [
        1985,
        2068
      ]
    },
    {
      "content": "To export your network settings",
      "pos": [
        2075,
        2106
      ]
    },
    {
      "content": "When you export, all of the settings for the virtual networks in your subscription will be written to an .xml file.",
      "pos": [
        2107,
        2222
      ]
    },
    {
      "pos": [
        2228,
        2263
      ],
      "content": "Log into the <bpt id=\"p1\">**</bpt>Management Portal<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        2267,
        2350
      ],
      "content": "In the Management Portal, on the bottom of the <bpt id=\"p1\">**</bpt>networks<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Export<ept id=\"p2\">**</ept>."
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Export network configuration<ept id=\"p1\">**</ept> window, verify that you have selected the subscription for which you want to export your network settings.",
      "pos": [
        2355,
        2501
      ]
    },
    {
      "content": "Then, click the checkmark on the lower right.",
      "pos": [
        2502,
        2547
      ]
    },
    {
      "pos": [
        2552,
        2640
      ],
      "content": "When you are prompted, save the <bpt id=\"p1\">*</bpt>NetworkConfig.xml<ept id=\"p1\">*</ept> file to the location of your choice."
    },
    {
      "content": "To import your network settings",
      "pos": [
        2647,
        2678
      ]
    },
    {
      "pos": [
        2683,
        2770
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Management Portal<ept id=\"p1\">**</ept>, in the navigation pane on the bottom left, click <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        2774,
        2852
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Network Services<ept id=\"p1\">**</ept> -&gt; <bpt id=\"p2\">**</bpt>Virtual Network<ept id=\"p2\">**</ept> -&gt; <bpt id=\"p3\">**</bpt>Import Configuration<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        2856,
        2988
      ],
      "content": "On the <bpt id=\"p1\">**</bpt>Import the network configuration file<ept id=\"p1\">**</ept> page, browse to your network configuration file, and then click the <bpt id=\"p2\">**</bpt>next<ept id=\"p2\">**</ept> arrow."
    },
    {
      "content": "On the <bpt id=\"p1\">**</bpt>Building your network<ept id=\"p1\">**</ept> page, you'll see information on the screen showing which sections of your network configuration will be changed or created.",
      "pos": [
        2992,
        3148
      ]
    },
    {
      "content": "If the changes look correct to you, click the checkmark to proceed to update or create your virtual network.",
      "pos": [
        3149,
        3257
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Configure a virtual network using a network configuration file\" \n    description=\"Instructions to export and import a network configuration file to the Azure Management Portal in order to create or modify virtual networks. \" \n    services=\"virtual-network\" \n    documentationCenter=\"\" \n    authors=\"telmosampaio\" \n    manager=\"carolz\" \n    editor=\"tysonn\"/>\n\n<tags\n    ms.service=\"virtual-network\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.tgt_pltfrm=\"na\"\n    ms.workload=\"infrastructure-services\" \n    ms.date=\"08/10/2015\"\n    ms.author=\"telmos\"/>\n\n# Configure a virtual network using a network configuration file\n\nYou can configure a virtual network (VNet) by using the Azure Management portal, or by using a network configuration file.\n\n## Creating and modifying a network configuration file \nThe easiest way to author a network configuration file is to export the network settings from an existing virtual network configuration, then modify the file to contain the settings that you want to configure for your virtual networks.\n\nTo edit the network configuration file, you can simply open the file, make the appropriate changes, then save the file. You can use any *xml* editor to make changes to the network configuration file. \n\nYou should closely follow the guidance for [network configuration file schema settings](https://msdn.microsoft.com/library/azure/jj157100.aspx). \n\nAzure considers a subnet that has something deployed to it as **in use**. When a subnet is in use, it cannot be modified. Before modifying, move anything that you have deployed to the subnet to a different subnet that isn't being modified.   See [Move a VM or Role Instance to a Different Subnet](virtual-networks-move-vm-role-to-subnet.md).\n\n## Export and import virtual network settings using the Management Portal  \nYou can import and export network configuration settings contained in your network configuration file by using PowerShell or the Management Portal. The instructions below will help you export and import using the Management Portal. \n\n### To export your network settings\nWhen you export, all of the settings for the virtual networks in your subscription will be written to an .xml file. \n\n1. Log into the **Management Portal**.\n2. In the Management Portal, on the bottom of the **networks** page, click **Export**. \n3. On the **Export network configuration** window, verify that you have selected the subscription for which you want to export your network settings. Then, click the checkmark on the lower right. \n4. When you are prompted, save the *NetworkConfig.xml* file to the location of your choice.\n\n\n### To import your network settings\n\n1. In the **Management Portal**, in the navigation pane on the bottom left, click **New**.\n2. Click **Network Services** -> **Virtual Network** -> **Import Configuration**.\n3. On the **Import the network configuration file** page, browse to your network configuration file, and then click the **next** arrow.\n4. On the **Building your network** page, you'll see information on the screen showing which sections of your network configuration will be changed or created. If the changes look correct to you, click the checkmark to proceed to update or create your virtual network. "
}