{
  "nodes": [
    {
      "content": "Using the SFTP Connector in Logic Apps | Microsoft Azure App Service",
      "pos": [
        27,
        95
      ]
    },
    {
      "content": "How to create and configure the SFTP Connector or API app and use it in a logic app in Azure App Service",
      "pos": [
        114,
        218
      ]
    },
    {
      "content": "Get started with the SFTP Connector and add it to your Logic App",
      "pos": [
        537,
        601
      ]
    },
    {
      "content": "Use the SFTP Connector to move data to and from an SFTP server.",
      "pos": [
        602,
        665
      ]
    },
    {
      "content": "You can download files from or upload files or list files to and from an SFTP server.",
      "pos": [
        666,
        751
      ]
    },
    {
      "content": "Logic apps can trigger based on a variety of data sources and offer connectors to get and process data as a part of the flow.",
      "pos": [
        753,
        878
      ]
    },
    {
      "content": "You can add the SFTP Connector to your business workflow and process data as part of this workflow within a Logic App.",
      "pos": [
        879,
        997
      ]
    },
    {
      "content": "Creating an SFTP connector for your Logic App",
      "pos": [
        1003,
        1048
      ]
    },
    {
      "content": "A connector can be created within a logic app or be created directly from the Azure Marketplace.",
      "pos": [
        1052,
        1148
      ]
    },
    {
      "content": "To create a connector from the Marketplace:",
      "pos": [
        1149,
        1192
      ]
    },
    {
      "pos": [
        1199,
        1247
      ],
      "content": "In the Azure startboard, select <bpt id=\"p1\">**</bpt>Marketplace<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        1251,
        1313
      ],
      "content": "Search for “SFTP Connector”, select it, and select <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Configure the SFTP connector as follows:",
      "pos": [
        1317,
        1357
      ]
    },
    {
      "content": "![][1]",
      "pos": [
        1360,
        1366
      ]
    },
    {
      "pos": [
        1373,
        1468
      ],
      "content": "<bpt id=\"p1\">**</bpt>Location<ept id=\"p1\">**</ept> - choose the geographic location where you would like the connector to be deployed"
    },
    {
      "pos": [
        1475,
        1556
      ],
      "content": "<bpt id=\"p1\">**</bpt>Subscription<ept id=\"p1\">**</ept> - choose a subscription you want this connector to be created in"
    },
    {
      "pos": [
        1563,
        1651
      ],
      "content": "<bpt id=\"p1\">**</bpt>Resource group<ept id=\"p1\">**</ept> - select or create a resource group where the connector should reside"
    },
    {
      "pos": [
        1658,
        1716
      ],
      "content": "<bpt id=\"p1\">**</bpt>Web hosting plan<ept id=\"p1\">**</ept> - select or create a web hosting plan"
    },
    {
      "pos": [
        1723,
        1781
      ],
      "content": "<bpt id=\"p1\">**</bpt>Pricing tier<ept id=\"p1\">**</ept> - choose a pricing tier for the connector"
    },
    {
      "pos": [
        1788,
        1834
      ],
      "content": "<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> - give a name for your SFTP Connector"
    },
    {
      "content": "Package settings",
      "pos": [
        1843,
        1859
      ]
    },
    {
      "pos": [
        1872,
        1935
      ],
      "content": "<bpt id=\"p1\">**</bpt>Server Address<ept id=\"p1\">**</ept> - Specify the SFTP Server name or IP address"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Accept Any SSH Server HostKey<ept id=\"p1\">**</ept> - Determines if any SSH public host key fingerprint from the Server should be accepted.",
      "pos": [
        1946,
        2067
      ]
    },
    {
      "content": "If set to false, the host key will be matched against the key specified in the “SSH Server Host Key Finger Print” property",
      "pos": [
        2068,
        2190
      ]
    },
    {
      "pos": [
        2201,
        2305
      ],
      "content": "<bpt id=\"p1\">**</bpt>SSH Server HostKey<ept id=\"p1\">**</ept> - Specify the fingerprint of the public host key for the SSH server - <bpt id=\"p2\">*</bpt>optional<ept id=\"p2\">*</ept>."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Root Folder<ept id=\"p1\">**</ept> - Specify a root folder path.",
      "pos": [
        2316,
        2361
      ]
    },
    {
      "content": "If blank will default to root.",
      "pos": [
        2363,
        2393
      ]
    },
    {
      "pos": [
        2404,
        2468
      ],
      "content": "<bpt id=\"p1\">**</bpt>Encrypt Cipher<ept id=\"p1\">**</ept> - Specify the encryption cipher - <bpt id=\"p2\">*</bpt>optional<ept id=\"p2\">*</ept>."
    },
    {
      "pos": [
        2479,
        2532
      ],
      "content": "<bpt id=\"p1\">**</bpt>Server Port<ept id=\"p1\">**</ept> - Specify the SFTP Server port number"
    },
    {
      "content": "Click on Create.",
      "pos": [
        2536,
        2552
      ]
    },
    {
      "content": "A new SFTP Connector is created.",
      "pos": [
        2553,
        2585
      ]
    },
    {
      "content": "Browse to the just created API App via Browse -&gt; API Apps -&gt;",
      "pos": [
        2590,
        2650
      ]
    },
    {
      "content": "and you can see that the \"Security\" component is not configured:",
      "pos": [
        2686,
        2750
      ]
    },
    {
      "content": "![][2]",
      "pos": [
        2753,
        2759
      ]
    },
    {
      "content": "Click on \"Security\" component to configure Security (User Name, Password, Private Key, PPK File password) for SFTP connector.",
      "pos": [
        2763,
        2888
      ]
    },
    {
      "content": "Select \"Password\" or \"Privatekey\" or \"MutliFactor\" authorization tab under Security and provide the required properties:",
      "pos": [
        2889,
        3009
      ]
    },
    {
      "content": "![][3]",
      "pos": [
        3012,
        3018
      ]
    },
    {
      "content": "![][4]",
      "pos": [
        3021,
        3027
      ]
    },
    {
      "content": "![][5]",
      "pos": [
        3030,
        3036
      ]
    },
    {
      "content": "Once the security configuration is saved, you can create a logic App in the same resource group to use the SFTP connector.",
      "pos": [
        3042,
        3164
      ]
    },
    {
      "content": "Using the SFTP Connector in your Logic App",
      "pos": [
        3169,
        3211
      ]
    },
    {
      "content": "Once your API app is created, you can now use the SFTP connector as a trigger/action for your Logic App.",
      "pos": [
        3215,
        3319
      ]
    },
    {
      "content": "To do this, you need to:",
      "pos": [
        3320,
        3344
      ]
    },
    {
      "content": "Create a new Logic App and choose the same resource group which has the SFTP connector:",
      "pos": [
        3350,
        3437
      ]
    },
    {
      "content": "![][6]",
      "pos": [
        3440,
        3446
      ]
    },
    {
      "content": "Open “Triggers and Actions” to open the Logic Apps Designer and configure your flow:",
      "pos": [
        3451,
        3535
      ]
    },
    {
      "content": "![][7]",
      "pos": [
        3538,
        3544
      ]
    },
    {
      "content": "The SFTP connector would appear in the “API Apps in this resource group” section in the gallery on the right hand side:",
      "pos": [
        3549,
        3668
      ]
    },
    {
      "content": "![][8]",
      "pos": [
        3671,
        3677
      ]
    },
    {
      "content": "You can drop the SFTP Connector API app into the editor by clicking on the “SFTP Connector”.",
      "pos": [
        3682,
        3774
      ]
    },
    {
      "content": "You can now use SFTP connector in the flow.",
      "pos": [
        3780,
        3823
      ]
    },
    {
      "content": "You can use the File retrieved from the SFTP trigger (\"TriggerOnFileAvailable\") in other actions in the flow.",
      "pos": [
        3824,
        3933
      ]
    },
    {
      "pos": [
        3941,
        4054
      ],
      "content": "<ph id=\"ph1\">[AZURE.IMPORTANT]</ph> The SFTP trigger \"TriggerOnFileAvailable\" deletes the retrieved file after processing the file."
    },
    {
      "content": "Configure the input properties for SFTP trigger as Follows:",
      "pos": [
        4060,
        4119
      ]
    },
    {
      "pos": [
        4127,
        4214
      ],
      "content": "<bpt id=\"p1\">**</bpt>Folder Path<ept id=\"p1\">**</ept> - Specify the path of the Folder from which Files needs to be retieved."
    },
    {
      "pos": [
        4221,
        4292
      ],
      "content": "<bpt id=\"p1\">**</bpt>The type of the file: text or binary<ept id=\"p1\">**</ept> - Select the type of the file."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>File Mask<ept id=\"p1\">**</ept> - Specify the file mask to be applied for retrieving files.",
      "pos": [
        4299,
        4372
      ]
    },
    {
      "content": "'*' retrieves all the files in the specified folder.",
      "pos": [
        4373,
        4425
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Exclude File Mask<ept id=\"p1\">**</ept> - Specify the file mask to be applied for excluding files.",
      "pos": [
        4432,
        4512
      ]
    },
    {
      "content": "If the \"File Mask\" property is also set, the Exclude File Mask will be applied first.",
      "pos": [
        4513,
        4598
      ]
    },
    {
      "content": "In the similar way you can use the SFTP actions in the flow.",
      "pos": [
        4631,
        4691
      ]
    },
    {
      "content": "You can use the \"upload File\" action to upload a file to SFTP server.",
      "pos": [
        4692,
        4761
      ]
    },
    {
      "content": "Configure the input properties for \"Upload File\" action as follows:",
      "pos": [
        4762,
        4829
      ]
    },
    {
      "pos": [
        4837,
        4899
      ],
      "content": "<bpt id=\"p1\">**</bpt>Content<ept id=\"p1\">**</ept> - Specifies the content of the file to be uploaded"
    },
    {
      "pos": [
        4906,
        4960
      ],
      "content": "<bpt id=\"p1\">**</bpt>Content Transfer Encoding<ept id=\"p1\">**</ept> - Specify none or base64"
    },
    {
      "pos": [
        4967,
        5031
      ],
      "content": "<bpt id=\"p1\">**</bpt>File Path<ept id=\"p1\">**</ept> - Specify the file path of the file to be uploaded"
    },
    {
      "pos": [
        5038,
        5111
      ],
      "content": "<bpt id=\"p1\">**</bpt>Overwrite<ept id=\"p1\">**</ept> - Specify \"true\" to overwrite the file if it already exists"
    },
    {
      "content": "**Append If Exists **- Specify \"true\" or \"false\".",
      "pos": [
        5118,
        5167
      ]
    },
    {
      "content": "When set to \"true\", the data is appended to the file if it exists.",
      "pos": [
        5168,
        5234
      ]
    },
    {
      "content": "When set to \"false\", the file is overwritten if it exists",
      "pos": [
        5235,
        5292
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Temporary Folder<ept id=\"p1\">**</ept> - If provided, the adapter will upload the file to the 'Temporary Folder Path' and once the upload is done the file will be moved to 'Folder Path'.",
      "pos": [
        5299,
        5467
      ]
    },
    {
      "content": "The 'Temporary Folder Path' should be on the same physical disk as the 'Folder Path' to make sure that the move operation is atomic.",
      "pos": [
        5468,
        5600
      ]
    },
    {
      "content": "Temporary folder can be used only when 'Append If Exist' property is disabled.",
      "pos": [
        5601,
        5679
      ]
    },
    {
      "pos": [
        5685,
        5706
      ],
      "content": "![][11]  \n![][12]",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "![][11]",
          "pos": [
            0,
            7
          ]
        },
        {
          "content": "![][12]",
          "pos": [
            10,
            17
          ]
        }
      ]
    },
    {
      "content": "Do more with your Connector",
      "pos": [
        5711,
        5738
      ]
    },
    {
      "content": "Now that the connector is created, you can add it to a business workflow using a Logic App.",
      "pos": [
        5739,
        5830
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>What are Logic Apps?<ept id=\"p1\">](app-service-logic-what-are-logic-apps.md)</ept>.",
      "pos": [
        5831,
        5900
      ]
    },
    {
      "pos": [
        5902,
        6026
      ],
      "content": "View the Swagger REST API reference at <bpt id=\"p1\">[</bpt>Connectors and API Apps Reference<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=529766)</ept>."
    },
    {
      "content": "You can also review performance statistics and control security to the connector.",
      "pos": [
        6028,
        6109
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Manage and Monitor your built-in API Apps and Connectors<ept id=\"p1\">](app-service-logic-monitor-your-connectors.md)</ept>.",
      "pos": [
        6110,
        6219
      ]
    },
    {
      "content": "test",
      "pos": [
        6914,
        6918
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Using the SFTP Connector in Logic Apps | Microsoft Azure App Service\"\n    description=\"How to create and configure the SFTP Connector or API app and use it in a logic app in Azure App Service\"\n    authors=\"anuragdalmia\"\n    manager=\"dwrede\"\n    editor=\"\"\n    services=\"app-service\\logic\"\n    documentationCenter=\"\"/>\n\n<tags\n    ms.service=\"app-service-logic\"\n    ms.workload=\"integration\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"08/23/2015\"\n    ms.author=\"sameerch\"/>\n\n# Get started with the SFTP Connector and add it to your Logic App\nUse the SFTP Connector to move data to and from an SFTP server. You can download files from or upload files or list files to and from an SFTP server.\n\nLogic apps can trigger based on a variety of data sources and offer connectors to get and process data as a part of the flow. You can add the SFTP Connector to your business workflow and process data as part of this workflow within a Logic App. \n\n## Creating an SFTP connector for your Logic App ##\nA connector can be created within a logic app or be created directly from the Azure Marketplace. To create a connector from the Marketplace:  \n\n1. In the Azure startboard, select **Marketplace**.\n2. Search for “SFTP Connector”, select it, and select **Create**.\n3. Configure the SFTP connector as follows:  \n![][1]\n    - **Location** - choose the geographic location where you would like the connector to be deployed\n    - **Subscription** - choose a subscription you want this connector to be created in\n    - **Resource group** - select or create a resource group where the connector should reside\n    - **Web hosting plan** - select or create a web hosting plan\n    - **Pricing tier** - choose a pricing tier for the connector\n    - **Name** - give a name for your SFTP Connector\n    - **Package settings**\n        - **Server Address** - Specify the SFTP Server name or IP address\n        - **Accept Any SSH Server HostKey** - Determines if any SSH public host key fingerprint from the Server should be accepted. If set to false, the host key will be matched against the key specified in the “SSH Server Host Key Finger Print” property\n        - **SSH Server HostKey** - Specify the fingerprint of the public host key for the SSH server - *optional*.\n        - **Root Folder** - Specify a root folder path.  If blank will default to root.\n        - **Encrypt Cipher** - Specify the encryption cipher - *optional*.\n        - **Server Port** - Specify the SFTP Server port number\n4. Click on Create. A new SFTP Connector is created.\n\n5. Browse to the just created API App via Browse -> API Apps -> <Name of the API App just created> and you can see that the \"Security\" component is not configured:  \n![][2]\n6. Click on \"Security\" component to configure Security (User Name, Password, Private Key, PPK File password) for SFTP connector.\nSelect \"Password\" or \"Privatekey\" or \"MutliFactor\" authorization tab under Security and provide the required properties:  \n![][3]  \n![][4]  \n![][5]  \n6. Once the security configuration is saved, you can create a logic App in the same resource group to use the SFTP connector.\n\n## Using the SFTP Connector in your Logic App ##\nOnce your API app is created, you can now use the SFTP connector as a trigger/action for your Logic App. To do this, you need to:\n\n1.  Create a new Logic App and choose the same resource group which has the SFTP connector:  \n![][6]\n2.  Open “Triggers and Actions” to open the Logic Apps Designer and configure your flow:  \n![][7]\n3.  The SFTP connector would appear in the “API Apps in this resource group” section in the gallery on the right hand side:  \n![][8]\n4.  You can drop the SFTP Connector API app into the editor by clicking on the “SFTP Connector”.\n\n5.  You can now use SFTP connector in the flow. You can use the File retrieved from the SFTP trigger (\"TriggerOnFileAvailable\") in other actions in the flow.\n\n    > [AZURE.IMPORTANT] The SFTP trigger \"TriggerOnFileAvailable\" deletes the retrieved file after processing the file.\n\n6.  Configure the input properties for SFTP trigger as Follows:\n\n    - **Folder Path** - Specify the path of the Folder from which Files needs to be retieved.\n    - **The type of the file: text or binary** - Select the type of the file.\n    - **File Mask** - Specify the file mask to be applied for retrieving files. '*' retrieves all the files in the specified folder.\n    - **Exclude File Mask** - Specify the file mask to be applied for excluding files. If the \"File Mask\" property is also set, the Exclude File Mask will be applied first.\n\n\n    ![][9]  \n    ![][10]\n\n7.  In the similar way you can use the SFTP actions in the flow. You can use the \"upload File\" action to upload a file to SFTP server. Configure the input properties for \"Upload File\" action as follows:\n\n    - **Content** - Specifies the content of the file to be uploaded\n    - **Content Transfer Encoding** - Specify none or base64\n    - **File Path** - Specify the file path of the file to be uploaded\n    - **Overwrite** - Specify \"true\" to overwrite the file if it already exists\n    - **Append If Exists **- Specify \"true\" or \"false\". When set to \"true\", the data is appended to the file if it exists. When set to \"false\", the file is overwritten if it exists\n    - **Temporary Folder** - If provided, the adapter will upload the file to the 'Temporary Folder Path' and once the upload is done the file will be moved to 'Folder Path'. The 'Temporary Folder Path' should be on the same physical disk as the 'Folder Path' to make sure that the move operation is atomic. Temporary folder can be used only when 'Append If Exist' property is disabled.\n\n    ![][11]  \n    ![][12]\n\n## Do more with your Connector\nNow that the connector is created, you can add it to a business workflow using a Logic App. See [What are Logic Apps?](app-service-logic-what-are-logic-apps.md).\n\nView the Swagger REST API reference at [Connectors and API Apps Reference](http://go.microsoft.com/fwlink/p/?LinkId=529766).\n\nYou can also review performance statistics and control security to the connector. See [Manage and Monitor your built-in API Apps and Connectors](app-service-logic-monitor-your-connectors.md).\n\n\n<!-- Image reference -->\n[1]: ./media/app-service-logic-connector-sftp/img1.PNG\n[2]: ./media/app-service-logic-connector-sftp/img2.PNG\n[3]: ./media/app-service-logic-connector-sftp/img3.PNG\n[4]: ./media/app-service-logic-connector-sftp/img4.PNG\n[5]: ./media/app-service-logic-connector-sftp/img5.PNG\n[6]: ./media/app-service-logic-connector-sftp/img6.PNG\n[7]: ./media/app-service-logic-connector-sftp/img7.png\n[8]: ./media/app-service-logic-connector-sftp/img8.png\n[9]: ./media/app-service-logic-connector-sftp/img9.PNG\n[10]: ./media/app-service-logic-connector-sftp/img10.PNG\n[11]: ./media/app-service-logic-connector-sftp/img11.PNG\n[12]: ./media/app-service-logic-connector-sftp/img12.PNG\n\ntest\n"
}