{
  "nodes": [
    {
      "content": "Register for Microsoft authentication | Microsoft Azure",
      "pos": [
        28,
        83
      ]
    },
    {
      "content": "Learn how to register for Microsoft authentication in your Azure Mobile Services application.",
      "pos": [
        103,
        196
      ]
    },
    {
      "content": "Register your app to use Microsoft account for authentication",
      "pos": [
        526,
        587
      ]
    },
    {
      "content": "Overview",
      "pos": [
        734,
        742
      ]
    },
    {
      "content": "This topic shows you how to register your mobile app to be able to use Microsoft account as an identity provider with Azure Mobile Services.",
      "pos": [
        745,
        885
      ]
    },
    {
      "content": "The same steps apply for both service-directed authentication and client-directed authentication using the Live SDK.",
      "pos": [
        886,
        1002
      ]
    },
    {
      "content": "Register your Windows Store app at the Windows Dev Center",
      "pos": [
        1006,
        1063
      ]
    },
    {
      "content": "Windows Store apps must first be registered with the Windows Dev Center.",
      "pos": [
        1065,
        1137
      ]
    },
    {
      "pos": [
        1141,
        1244
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows apps can skip this section."
    },
    {
      "pos": [
        1249,
        1437
      ],
      "content": "If you have not already registered your app, navigate to the [Submit an app page] at the Dev Center for Windows Store apps, log on with your Microsoft account, and then click <bpt id=\"p1\">**</bpt>App name<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        1553,
        1724
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>Create a new app by reserving a unique name<ept id=\"p1\">**</ept> and click <bpt id=\"p2\">**</bpt>Continue<ept id=\"p2\">**</ept>, then type a name for your app in <bpt id=\"p3\">**</bpt>App name<ept id=\"p3\">**</ept>, click <bpt id=\"p4\">**</bpt>Reserve app name<ept id=\"p4\">**</ept> and then <bpt id=\"p5\">**</bpt>Save<ept id=\"p5\">**</ept>."
    },
    {
      "content": "This creates a new Windows Store registration for your app.",
      "pos": [
        1839,
        1898
      ]
    },
    {
      "pos": [
        1903,
        2090
      ],
      "content": "In Visual Studio, open the project that you created when you completed the tutorial <bpt id=\"p1\">[</bpt>Get started with Mobile Services<ept id=\"p1\">](mobile-services-dotnet-backend-windows-store-dotnet-get-started.md)</ept>."
    },
    {
      "pos": [
        2095,
        2228
      ],
      "content": "In solution explorer, right-click the Windows Store app project, click <bpt id=\"p1\">**</bpt>Store<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Associate App with the Store...<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        2348,
        2419
      ],
      "content": "This displays the <bpt id=\"p1\">**</bpt>Associate Your App with the Windows Store<ept id=\"p1\">**</ept> Wizard."
    },
    {
      "pos": [
        2424,
        2586
      ],
      "content": "In the wizard, click <bpt id=\"p1\">**</bpt>Sign in<ept id=\"p1\">**</ept> and then login with your Microsoft account, select the app name that you reserved in step 2, then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Associate<ept id=\"p3\">**</ept>."
    },
    {
      "content": "This adds the required Windows Store registration information to the application manifest.",
      "pos": [
        2592,
        2682
      ]
    },
    {
      "content": "(Optional) For a universal Windows app, repeat steps 4 and 5 for the Windows Phone Store project.",
      "pos": [
        2690,
        2787
      ]
    },
    {
      "pos": [
        2793,
        2891
      ],
      "content": "Back in the Windows Dev Center page for your new app, click <bpt id=\"p1\">**</bpt>Services<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Push notifications<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        2897,
        3049
      ],
      "content": "In the <bpt id=\"p1\">**</bpt>Push notifications<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Live Services site<ept id=\"p2\">**</ept> under <bpt id=\"p3\">**</bpt>Windows Push Notification Services (WNS) and Microsoft Azure Mobile Services<ept id=\"p3\">**</ept>."
    },
    {
      "content": "This displays the Microsoft account page for your app.",
      "pos": [
        3051,
        3105
      ]
    },
    {
      "content": "Configure your Microsoft account registration and connect to Mobile Services",
      "pos": [
        3110,
        3186
      ]
    },
    {
      "content": "The first step in this section applies only to Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows Store apps.",
      "pos": [
        3188,
        3310
      ]
    },
    {
      "content": "For these apps, you can also ignore the Package security identifier (SID), which is only available for Windows Store apps.",
      "pos": [
        3311,
        3433
      ]
    },
    {
      "pos": [
        3439,
        3763
      ],
      "content": "For a non-Windows Store app, navigate to the <ph id=\"ph1\">&lt;a href=\"http://go.microsoft.com/fwlink/p/?LinkId=262039\" target=\"_blank\"&gt;</ph>My Applications<ph id=\"ph2\">&lt;/a&gt;</ph> page in the Microsoft account Developer Center, log on with your Microsoft account (if required), click <bpt id=\"p1\">**</bpt>Create application<ept id=\"p1\">**</ept>, then type an <bpt id=\"p2\">**</bpt>Application name<ept id=\"p2\">**</ept> and click <bpt id=\"p3\">**</bpt>I accept<ept id=\"p3\">**</ept>."
    },
    {
      "content": "This reserves you app name with Microsoft account and displays the Microsoft account page for your app.",
      "pos": [
        3769,
        3872
      ]
    },
    {
      "pos": [
        3877,
        4150
      ],
      "content": "In the Microsoft account page for your app, click <bpt id=\"p1\">**</bpt>API Settings<ept id=\"p1\">**</ept>, select enable <bpt id=\"p2\">**</bpt>Mobile or desktop client app<ept id=\"p2\">**</ept>, set the mobile service URL as the <bpt id=\"p3\">**</bpt>Target domain<ept id=\"p3\">**</ept>, supply a value of <ph id=\"ph1\">`https://&lt;mobile_service&gt;.azure-mobile.net/`</ph> in <bpt id=\"p4\">**</bpt>Redirect URL<ept id=\"p4\">**</ept>, then click <bpt id=\"p5\">**</bpt>Save<ept id=\"p5\">**</ept>."
    },
    {
      "pos": [
        4158,
        4440
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>For a .NET backend mobile service published to Azure by using Visual Studio, the redirect URL is the URL of your mobile service appended with the path <bpt id=\"p1\">_</bpt>signin-microsoft<ept id=\"p1\">_</ept> your mobile service as a .NET service, such as <ph id=\"ph2\">`https://todolist.azure-mobile.net/signin-microsoft`</ph>."
    },
    {
      "content": "Microsoft account API settings",
      "pos": [
        4449,
        4479
      ]
    },
    {
      "pos": [
        4593,
        4647
      ],
      "content": "The <bpt id=\"p1\">**</bpt>Root domain<ept id=\"p1\">**</ept> should be filled-in automatically."
    },
    {
      "pos": [
        4652,
        4765
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>App Settings<ept id=\"p1\">**</ept> and make a note of the values of the <bpt id=\"p2\">**</bpt>Client ID<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Client secret<ept id=\"p3\">**</ept> and <bpt id=\"p4\">**</bpt>Package SID<ept id=\"p4\">**</ept>."
    },
    {
      "content": "Microsoft account app settings",
      "pos": [
        4778,
        4808
      ]
    },
    {
      "pos": [
        5145,
        5338
      ],
      "content": "In the [Azure Management Portal], click the <bpt id=\"p1\">**</bpt>Identity<ept id=\"p1\">**</ept> tab for the mobile service, enter the client ID, client secret and package SID obtained from your identity provider, and click <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Mobile Services Identity tab",
      "pos": [
        5347,
        5375
      ]
    },
    {
      "pos": [
        5486,
        5625
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph>You do not need to supply a Package SID value for a Windows Phone 8, Windows Phone Store 8.1 Silverlight, or a non-Windows app."
    },
    {
      "content": "Both your mobile service and your app are now configured to work with Microsoft account.",
      "pos": [
        5631,
        5719
      ]
    },
    {
      "content": "test",
      "pos": [
        5974,
        5978
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Register for Microsoft authentication | Microsoft Azure\" \n    description=\"Learn how to register for Microsoft authentication in your Azure Mobile Services application.\" \n    authors=\"ggailey777\" \n    services=\"mobile-services\" \n    documentationCenter=\"Mobile\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"mobile-services\" \n    ms.workload=\"mobile\" \n    ms.tgt_pltfrm=\"NA\" \n    ms.devlang=\"multiple\" \n    ms.topic=\"article\" \n    ms.date=\"08/08/2015\" \n    ms.author=\"glenga\"/>\n\n# Register your app to use Microsoft account for authentication\n\n[AZURE.INCLUDE [mobile-services-selector-register-identity-provider](../../includes/mobile-services-selector-register-identity-provider.md)]\n\n## Overview \n\nThis topic shows you how to register your mobile app to be able to use Microsoft account as an identity provider with Azure Mobile Services. The same steps apply for both service-directed authentication and client-directed authentication using the Live SDK.\n\n##Register your Windows Store app at the Windows Dev Center\n\nWindows Store apps must first be registered with the Windows Dev Center. \n\n>[AZURE.NOTE]Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows apps can skip this section.\n\n1. If you have not already registered your app, navigate to the [Submit an app page] at the Dev Center for Windows Store apps, log on with your Microsoft account, and then click **App name**.\n\n    ![](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-submit-win8-app.png)\n\n2. Select **Create a new app by reserving a unique name** and click **Continue**, then type a name for your app in **App name**, click **Reserve app name** and then **Save**.\n\n    ![](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-name.png)\n\n    This creates a new Windows Store registration for your app.\n\n3. In Visual Studio, open the project that you created when you completed the tutorial [Get started with Mobile Services](mobile-services-dotnet-backend-windows-store-dotnet-get-started.md).\n\n4. In solution explorer, right-click the Windows Store app project, click **Store**, and then click **Associate App with the Store...**. \n\n    ![](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-store-association.png)\n\n    This displays the **Associate Your App with the Windows Store** Wizard.\n\n5. In the wizard, click **Sign in** and then login with your Microsoft account, select the app name that you reserved in step 2, then click **Next** > **Associate**.\n\n    This adds the required Windows Store registration information to the application manifest.   \n\n6. (Optional) For a universal Windows app, repeat steps 4 and 5 for the Windows Phone Store project. \n\n6. Back in the Windows Dev Center page for your new app, click **Services** > **Push notifications**. \n\n7. In the **Push notifications** page, click **Live Services site** under **Windows Push Notification Services (WNS) and Microsoft Azure Mobile Services**.\n\nThis displays the Microsoft account page for your app.\n\n## Configure your Microsoft account registration and connect to Mobile Services\n\nThe first step in this section applies only to Windows Phone 8, Windows Phone 8.1 Silverlight, and non-Windows Store apps. For these apps, you can also ignore the Package security identifier (SID), which is only available for Windows Store apps. \n\n1. For a non-Windows Store app, navigate to the <a href=\"http://go.microsoft.com/fwlink/p/?LinkId=262039\" target=\"_blank\">My Applications</a> page in the Microsoft account Developer Center, log on with your Microsoft account (if required), click **Create application**, then type an **Application name** and click **I accept**.\n\n    This reserves you app name with Microsoft account and displays the Microsoft account page for your app.\n\n2. In the Microsoft account page for your app, click **API Settings**, select enable **Mobile or desktop client app**, set the mobile service URL as the **Target domain**, supply a value of `https://<mobile_service>.azure-mobile.net/` in **Redirect URL**, then click **Save**.\n\n     >[AZURE.NOTE]For a .NET backend mobile service published to Azure by using Visual Studio, the redirect URL is the URL of your mobile service appended with the path _signin-microsoft_ your mobile service as a .NET service, such as `https://todolist.azure-mobile.net/signin-microsoft`. \n\n    ![Microsoft account API settings](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-push-auth-2.png)\n\n    The **Root domain** should be filled-in automatically.\n\n4. Click **App Settings** and make a note of the values of the **Client ID**, **Client secret** and **Package SID**. \n    \n    ![Microsoft account app settings](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-win8-app-push-auth.png)\n    \n    \n    > [AZURE.NOTE] The client secret is an important security credential. Do not share the client secret with anyone or distribute it with your app. Only Windows Store app registrations will see a Package SID field.\n\n4. In the [Azure Management Portal], click the **Identity** tab for the mobile service, enter the client ID, client secret and package SID obtained from your identity provider, and click **Save**. \n\n    ![Mobile Services Identity tab](./media/mobile-services-how-to-register-microsoft-authentication/mobile-services-identity-tab.png)\n    \n    >[AZURE.NOTE]You do not need to supply a Package SID value for a Windows Phone 8, Windows Phone Store 8.1 Silverlight, or a non-Windows app.\n    \nBoth your mobile service and your app are now configured to work with Microsoft account.\n\n<!-- Anchors. -->\n\n<!-- Images. -->\n\n<!-- URLs. -->\n\n[Submit an app page]: http://go.microsoft.com/fwlink/p/?LinkID=266582\n[My Applications]: http://go.microsoft.com/fwlink/p/?LinkId=262039\n\n[Azure Management Portal]: https://manage.windowsazure.com/\n \ntest\n"
}