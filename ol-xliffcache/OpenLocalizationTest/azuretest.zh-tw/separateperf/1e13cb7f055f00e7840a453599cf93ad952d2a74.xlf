<?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd">
  <file datatype="xml" original="md" source-language="en-US" target-language="zh-tw">
    <body>
      <group id="content" extype="content">
        <trans-unit id="101" translate="yes" xml:space="preserve">
          <source>Running a MariaDB (MySQL) cluster on Azure</source>
          <target state="new">Running a MariaDB (MySQL) cluster on Azure</target>
        </trans-unit>
        <trans-unit id="102" translate="yes" xml:space="preserve">
          <source>Create a MariaDB + Galera MySQL cluster on Azure Virtual Machines</source>
          <target state="new">Create a MariaDB + Galera MySQL cluster on Azure Virtual Machines</target>
        </trans-unit>
        <trans-unit id="103" translate="yes" xml:space="preserve">
          <source>MariaDB (MySQL) cluster - Azure tutorial</source>
          <target state="new">MariaDB (MySQL) cluster - Azure tutorial</target>
        </trans-unit>
        <trans-unit id="104" translate="yes" xml:space="preserve">
          <source>We're creating a multi-Master <bpt id="p1">[</bpt><ept id="p1">Galera](http://galeracluster.com/products/)</ept> cluster of <bpt id="p2">[</bpt><ept id="p2">MariaDBs](https://mariadb.org/en/about/)</ept>, a robust, scalable, and reliable drop-in replacement for MySQL, to work in a highly available environment on Azure Virtual Machines.</source>
          <target state="new">We're creating a multi-Master <bpt id="p1">[</bpt><ept id="p1">Galera](http://galeracluster.com/products/)</ept> cluster of <bpt id="p2">[</bpt><ept id="p2">MariaDBs](https://mariadb.org/en/about/)</ept>, a robust, scalable, and reliable drop-in replacement for MySQL, to work in a highly available environment on Azure Virtual Machines.</target>
        </trans-unit>
        <trans-unit id="105" translate="yes" xml:space="preserve">
          <source>Architecture overview</source>
          <target state="new">Architecture overview</target>
        </trans-unit>
        <trans-unit id="106" translate="yes" xml:space="preserve">
          <source>This topic performs the following steps:</source>
          <target state="new">This topic performs the following steps:</target>
        </trans-unit>
        <trans-unit id="107" translate="yes" xml:space="preserve">
          <source>Create A 3-node cluster</source>
          <target state="new">Create A 3-node cluster</target>
        </trans-unit>
        <trans-unit id="108" translate="yes" xml:space="preserve">
          <source>Separate the Data Disks from the OS Disk</source>
          <target state="new">Separate the Data Disks from the OS Disk</target>
        </trans-unit>
        <trans-unit id="109" translate="yes" xml:space="preserve">
          <source>Create the Data Disks in RAID-0/striped setting to increase IOPS</source>
          <target state="new">Create the Data Disks in RAID-0/striped setting to increase IOPS</target>
        </trans-unit>
        <trans-unit id="110" translate="yes" xml:space="preserve">
          <source>Use the Azure Load Balancer to balance the load for the 3 nodes</source>
          <target state="new">Use the Azure Load Balancer to balance the load for the 3 nodes</target>
        </trans-unit>
        <trans-unit id="111" translate="yes" xml:space="preserve">
          <source>To minimize repetitive work, create a VM image containing MariaDB+Galera and use it to create the other cluster VMs.</source>
          <target state="new">To minimize repetitive work, create a VM image containing MariaDB+Galera and use it to create the other cluster VMs.</target>
        </trans-unit>
        <trans-unit id="112" translate="yes" xml:space="preserve">
          <source>Architecture</source>
          <target state="new">Architecture</target>
        </trans-unit>
        <trans-unit id="113" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph>  This topic uses the <bpt id="p1">[</bpt><ept id="p1">Azure CLI]</ept> tools, so make sure to download them and connect them to your Azure subscription according to the instructions.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph>  This topic uses the <bpt id="p1">[</bpt><ept id="p1">Azure CLI]</ept> tools, so make sure to download them and connect them to your Azure subscription according to the instructions.</target>
        </trans-unit>
        <trans-unit id="114" translate="yes" xml:space="preserve">
          <source>If you need a reference to the commands available in the Azure CLI, check out this link for the <bpt id="p1">[</bpt><ept id="p1">Azure CLI command reference]</ept>.</source>
          <target state="new">If you need a reference to the commands available in the Azure CLI, check out this link for the <bpt id="p1">[</bpt><ept id="p1">Azure CLI command reference]</ept>.</target>
        </trans-unit>
        <trans-unit id="115" translate="yes" xml:space="preserve">
          <source>You will also need to <bpt id="p1">[</bpt><ept id="p1">create an SSH key for authentication]</ept> and make note of the <bpt id="p2">**</bpt>.pem file location<ept id="p2">**</ept>.</source>
          <target state="new">You will also need to <bpt id="p1">[</bpt><ept id="p1">create an SSH key for authentication]</ept> and make note of the <bpt id="p2">**</bpt>.pem file location<ept id="p2">**</ept>.</target>
        </trans-unit>
        <trans-unit id="116" translate="yes" xml:space="preserve">
          <source>Creating the template</source>
          <target state="new">Creating the template</target>
        </trans-unit>
        <trans-unit id="117" translate="yes" xml:space="preserve">
          <source>Infrastructure</source>
          <target state="new">Infrastructure</target>
        </trans-unit>
        <trans-unit id="118" translate="yes" xml:space="preserve">
          <source>Create an Affinity Group to hold the resources together</source>
          <target state="new">Create an Affinity Group to hold the resources together</target>
        </trans-unit>
        <trans-unit id="119" translate="yes" xml:space="preserve">
          <source>Create a Virtual Network</source>
          <target state="new">Create a Virtual Network</target>
        </trans-unit>
        <trans-unit id="120" translate="yes" xml:space="preserve">
          <source>Create a Storage Account to host all our disks.</source>
          <target state="new">Create a Storage Account to host all our disks.</target>
        </trans-unit>
        <trans-unit id="121" translate="yes" xml:space="preserve">
          <source>Note that you shouldn't be placing more than 40 heavily used disks on the same Storage Account to avoid hitting the 20,000 IOPS storage account limit.</source>
          <target state="new">Note that you shouldn't be placing more than 40 heavily used disks on the same Storage Account to avoid hitting the 20,000 IOPS storage account limit.</target>
        </trans-unit>
        <trans-unit id="122" translate="yes" xml:space="preserve">
          <source>In this case, we're far off from this number so we'll store everything on the same account for simplicity</source>
          <target state="new">In this case, we're far off from this number so we'll store everything on the same account for simplicity</target>
        </trans-unit>
        <trans-unit id="123" translate="yes" xml:space="preserve">
          <source>Find the name of the CentOS 7 Virtual Machine image</source>
          <target state="new">Find the name of the CentOS 7 Virtual Machine image</target>
        </trans-unit>
        <trans-unit id="124" translate="yes" xml:space="preserve">
          <source>this will output something like <ph id="ph1">`5112500ae3b842c8b9c604889f8753c3__OpenLogic-CentOS-70-20140926`</ph>.</source>
          <target state="new">this will output something like <ph id="ph1">`5112500ae3b842c8b9c604889f8753c3__OpenLogic-CentOS-70-20140926`</ph>.</target>
        </trans-unit>
        <trans-unit id="125" translate="yes" xml:space="preserve">
          <source>Use the name in the following step.</source>
          <target state="new">Use the name in the following step.</target>
        </trans-unit>
        <trans-unit id="126" translate="yes" xml:space="preserve">
          <source>Create the VM template replacing <bpt id="p1">**</bpt>/path/to/key.pem<ept id="p1">**</ept> with the path where you stored the generated .pem SSH key</source>
          <target state="new">Create the VM template replacing <bpt id="p1">**</bpt>/path/to/key.pem<ept id="p1">**</ept> with the path where you stored the generated .pem SSH key</target>
        </trans-unit>
        <trans-unit id="127" translate="yes" xml:space="preserve">
          <source>Attach 4 x 500GB data disks to the VM for use in the RAID configuration</source>
          <target state="new">Attach 4 x 500GB data disks to the VM for use in the RAID configuration</target>
        </trans-unit>
        <trans-unit id="128" translate="yes" xml:space="preserve">
          <source>SSH into the template VM that you created at <bpt id="p1">**</bpt>mariadbhatemplate.cloudapp.net:22<ept id="p1">**</ept> and connect using your private key.</source>
          <target state="new">SSH into the template VM that you created at <bpt id="p1">**</bpt>mariadbhatemplate.cloudapp.net:22<ept id="p1">**</ept> and connect using your private key.</target>
        </trans-unit>
        <trans-unit id="129" translate="yes" xml:space="preserve">
          <source>Software</source>
          <target state="new">Software</target>
        </trans-unit>
        <trans-unit id="130" translate="yes" xml:space="preserve">
          <source>Obtain root</source>
          <target state="new">Obtain root</target>
        </trans-unit>
        <trans-unit id="131" translate="yes" xml:space="preserve">
          <source>Install RAID support:</source>
          <target state="new">Install RAID support:</target>
        </trans-unit>
        <trans-unit id="132" translate="yes" xml:space="preserve">
          <source>Install mdadm</source>
          <target state="new">Install mdadm</target>
        </trans-unit>
        <trans-unit id="133" translate="yes" xml:space="preserve">
          <source>Create the RAID0/stripe configuration with an EXT4 file system</source>
          <target state="new">Create the RAID0/stripe configuration with an EXT4 file system</target>
        </trans-unit>
        <trans-unit id="134" translate="yes" xml:space="preserve">
          <source>Create the mount point directory</source>
          <target state="new">Create the mount point directory</target>
        </trans-unit>
        <trans-unit id="135" translate="yes" xml:space="preserve">
          <source>Retrieve the UUID of the newly created RAID device</source>
          <target state="new">Retrieve the UUID of the newly created RAID device</target>
        </trans-unit>
        <trans-unit id="136" translate="yes" xml:space="preserve">
          <source>Edit /etc/fstab</source>
          <target state="new">Edit /etc/fstab</target>
        </trans-unit>
        <trans-unit id="137" translate="yes" xml:space="preserve">
          <source>Add the device in there to enable auto mouting on reboot replacing the UUID with the value obtained from the <bpt id="p1">**</bpt>blkid<ept id="p1">**</ept> command before</source>
          <target state="new">Add the device in there to enable auto mouting on reboot replacing the UUID with the value obtained from the <bpt id="p1">**</bpt>blkid<ept id="p1">**</ept> command before</target>
        </trans-unit>
        <trans-unit id="138" translate="yes" xml:space="preserve">
          <source>Mount the new partition</source>
          <target state="new">Mount the new partition</target>
        </trans-unit>
        <trans-unit id="139" translate="yes" xml:space="preserve">
          <source>Install MariaDB:</source>
          <target state="new">Install MariaDB:</target>
        </trans-unit>
        <trans-unit id="140" translate="yes" xml:space="preserve">
          <source>Create the MariaDB.repo file:</source>
          <target state="new">Create the MariaDB.repo file:</target>
        </trans-unit>
        <trans-unit id="141" translate="yes" xml:space="preserve">
          <source>Fill it with the below content</source>
          <target state="new">Fill it with the below content</target>
        </trans-unit>
        <trans-unit id="142" translate="yes" xml:space="preserve">
          <source>Remove existing postfix and mariadb-libs to avoid conflicts</source>
          <target state="new">Remove existing postfix and mariadb-libs to avoid conflicts</target>
        </trans-unit>
        <trans-unit id="143" translate="yes" xml:space="preserve">
          <source>Install MariaDB with Galera</source>
          <target state="new">Install MariaDB with Galera</target>
        </trans-unit>
        <trans-unit id="144" translate="yes" xml:space="preserve">
          <source>Move the MySQL data directory to the RAID block device</source>
          <target state="new">Move the MySQL data directory to the RAID block device</target>
        </trans-unit>
        <trans-unit id="145" translate="yes" xml:space="preserve">
          <source>Copy the current MySQL directory into its new location and remove the old directory</source>
          <target state="new">Copy the current MySQL directory into its new location and remove the old directory</target>
        </trans-unit>
        <trans-unit id="146" translate="yes" xml:space="preserve">
          <source>Set permissions on new directory accordingly</source>
          <target state="new">Set permissions on new directory accordingly</target>
        </trans-unit>
        <trans-unit id="147" translate="yes" xml:space="preserve">
          <source>Create a symlink pointing the old directory to the new location on the RAID partition</source>
          <target state="new">Create a symlink pointing the old directory to the new location on the RAID partition</target>
        </trans-unit>
        <trans-unit id="148" translate="yes" xml:space="preserve">
          <source>Because <bpt id="p1">[</bpt>SELinux will interfere with the cluster operations<ept id="p1">](http://galeracluster.com/documentation-webpages/configuration.html#selinux)</ept>, it is necessary to disable it for the current session (until a compatible version appears).</source>
          <target state="new">Because <bpt id="p1">[</bpt>SELinux will interfere with the cluster operations<ept id="p1">](http://galeracluster.com/documentation-webpages/configuration.html#selinux)</ept>, it is necessary to disable it for the current session (until a compatible version appears).</target>
        </trans-unit>
        <trans-unit id="149" translate="yes" xml:space="preserve">
          <source>Edit <ph id="ph1">`/etc/selinux/config`</ph> to disable it for subsequent restarts:</source>
          <target state="new">Edit <ph id="ph1">`/etc/selinux/config`</ph> to disable it for subsequent restarts:</target>
        </trans-unit>
        <trans-unit id="150" translate="yes" xml:space="preserve">
          <source>Validate MySQL runs</source>
          <target state="new">Validate MySQL runs</target>
        </trans-unit>
        <trans-unit id="151" translate="yes" xml:space="preserve">
          <source>Start MySQL</source>
          <target state="new">Start MySQL</target>
        </trans-unit>
        <trans-unit id="152" translate="yes" xml:space="preserve">
          <source>Secure the MySQL installation, set the root password, remove anonymous users, disabling remote root login and removing the test database</source>
          <target state="new">Secure the MySQL installation, set the root password, remove anonymous users, disabling remote root login and removing the test database</target>
        </trans-unit>
        <trans-unit id="153" translate="yes" xml:space="preserve">
          <source>Create a user on the database for cluster operations and optionally, your applications</source>
          <target state="new">Create a user on the database for cluster operations and optionally, your applications</target>
        </trans-unit>
        <trans-unit id="154" translate="yes" xml:space="preserve">
          <source>Stop MySQL</source>
          <target state="new">Stop MySQL</target>
        </trans-unit>
        <trans-unit id="155" translate="yes" xml:space="preserve">
          <source>Create configuration placeholder</source>
          <target state="new">Create configuration placeholder</target>
        </trans-unit>
        <trans-unit id="156" translate="yes" xml:space="preserve">
          <source>Edit the MySQL configuration to create a placeholder for the cluster settings.</source>
          <target state="new">Edit the MySQL configuration to create a placeholder for the cluster settings.</target>
        </trans-unit>
        <trans-unit id="157" translate="yes" xml:space="preserve">
          <source>Do not replace the <bpt id="p1">**</bpt><ph id="ph1">`&lt;Vairables&gt;`</ph><ept id="p1">**</ept> or uncomment now.</source>
          <target state="new">Do not replace the <bpt id="p1">**</bpt><ph id="ph1">`&lt;Vairables&gt;`</ph><ept id="p1">**</ept> or uncomment now.</target>
        </trans-unit>
        <trans-unit id="158" translate="yes" xml:space="preserve">
          <source>That will happen after we create a VM from this template.</source>
          <target state="new">That will happen after we create a VM from this template.</target>
        </trans-unit>
        <trans-unit id="159" translate="yes" xml:space="preserve">
          <source>Edit the <bpt id="p1">**</bpt><bpt id="p2">[</bpt><ept id="p2">galera]</ept><ept id="p1">**</ept> section and clear it out</source>
          <target state="new">Edit the <bpt id="p1">**</bpt><bpt id="p2">[</bpt><ept id="p2">galera]</ept><ept id="p1">**</ept> section and clear it out</target>
        </trans-unit>
        <trans-unit id="160" translate="yes" xml:space="preserve">
          <source>Edit the <bpt id="p1">**</bpt>[mariadb]<ept id="p1">**</ept> section</source>
          <target state="new">Edit the <bpt id="p1">**</bpt>[mariadb]<ept id="p1">**</ept> section</target>
        </trans-unit>
        <trans-unit id="161" translate="yes" xml:space="preserve">
          <source>Open required ports on the firewall (using FirewallD on CentOS 7)</source>
          <target state="new">Open required ports on the firewall (using FirewallD on CentOS 7)</target>
        </trans-unit>
        <trans-unit id="162" translate="yes" xml:space="preserve">
          <source>MySQL: <ph id="ph1">`firewall-cmd --zone=public --add-port=3306/tcp --permanent`</ph></source>
          <target state="new">MySQL: <ph id="ph1">`firewall-cmd --zone=public --add-port=3306/tcp --permanent`</ph></target>
        </trans-unit>
        <trans-unit id="163" translate="yes" xml:space="preserve">
          <source>GALERA: <ph id="ph1">`firewall-cmd --zone=public --add-port=4567/tcp --permanent`</ph></source>
          <target state="new">GALERA: <ph id="ph1">`firewall-cmd --zone=public --add-port=4567/tcp --permanent`</ph></target>
        </trans-unit>
        <trans-unit id="164" translate="yes" xml:space="preserve">
          <source>GALERA IST: <ph id="ph1">`firewall-cmd --zone=public --add-port=4568/tcp --permanent`</ph></source>
          <target state="new">GALERA IST: <ph id="ph1">`firewall-cmd --zone=public --add-port=4568/tcp --permanent`</ph></target>
        </trans-unit>
        <trans-unit id="165" translate="yes" xml:space="preserve">
          <source>RSYNC: <ph id="ph1">`firewall-cmd --zone=public --add-port=4444/tcp --permanent`</ph></source>
          <target state="new">RSYNC: <ph id="ph1">`firewall-cmd --zone=public --add-port=4444/tcp --permanent`</ph></target>
        </trans-unit>
        <trans-unit id="166" translate="yes" xml:space="preserve">
          <source>Reload the firewall: <ph id="ph1">`firewall-cmd --reload`</ph></source>
          <target state="new">Reload the firewall: <ph id="ph1">`firewall-cmd --reload`</ph></target>
        </trans-unit>
        <trans-unit id="167" translate="yes" xml:space="preserve">
          <source>Optimize the system for performance.</source>
          <target state="new">Optimize the system for performance.</target>
        </trans-unit>
        <trans-unit id="168" translate="yes" xml:space="preserve">
          <source>Refer to this article on <bpt id="p1">[</bpt><ept id="p1">performance tuning strategy]</ept> for more details</source>
          <target state="new">Refer to this article on <bpt id="p1">[</bpt><ept id="p1">performance tuning strategy]</ept> for more details</target>
        </trans-unit>
        <trans-unit id="169" translate="yes" xml:space="preserve">
          <source>Edit the MySQL configuration file again</source>
          <target state="new">Edit the MySQL configuration file again</target>
        </trans-unit>
        <trans-unit id="170" translate="yes" xml:space="preserve">
          <source>Edit the <bpt id="p1">**</bpt>[mariadb]<ept id="p1">**</ept> section and append the below</source>
          <target state="new">Edit the <bpt id="p1">**</bpt>[mariadb]<ept id="p1">**</ept> section and append the below</target>
        </trans-unit>
        <trans-unit id="171" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> It is recommended that <bpt id="p1">**</bpt>innodb\_buffer\_pool_size<ept id="p1">**</ept> be 70% of your VM's memory.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> It is recommended that <bpt id="p1">**</bpt>innodb\_buffer\_pool_size<ept id="p1">**</ept> be 70% of your VM's memory.</target>
        </trans-unit>
        <trans-unit id="172" translate="yes" xml:space="preserve">
          <source>It has been set at 2.45GB here for the Medium Azure VM with 3.5GB of RAM.</source>
          <target state="new">It has been set at 2.45GB here for the Medium Azure VM with 3.5GB of RAM.</target>
        </trans-unit>
        <trans-unit id="173" translate="yes" xml:space="preserve">
          <source>Stop MySQL, disable MySQL service from running on startup to avoid messing up the cluster when adding a new node, and deprovision the machine.</source>
          <target state="new">Stop MySQL, disable MySQL service from running on startup to avoid messing up the cluster when adding a new node, and deprovision the machine.</target>
        </trans-unit>
        <trans-unit id="174" translate="yes" xml:space="preserve">
          <source>Capture the VM through the portal.</source>
          <target state="new">Capture the VM through the portal.</target>
        </trans-unit>
        <trans-unit id="175" translate="yes" xml:space="preserve">
          <source>(Currently, <bpt id="p1">[</bpt><ept id="p1">issue #1268 in the Azure CLI]</ept> tools describes the fact that images captured by the Azure CLI tools do not capture the attached data disks.)</source>
          <target state="new">(Currently, <bpt id="p1">[</bpt><ept id="p1">issue #1268 in the Azure CLI]</ept> tools describes the fact that images captured by the Azure CLI tools do not capture the attached data disks.)</target>
        </trans-unit>
        <trans-unit id="176" translate="yes" xml:space="preserve">
          <source>Shutdown the machine through the portal</source>
          <target state="new">Shutdown the machine through the portal</target>
        </trans-unit>
        <trans-unit id="177" translate="yes" xml:space="preserve">
          <source>Click on Capture and specify the image name as <bpt id="p1">**</bpt>mariadb-galera-image<ept id="p1">**</ept> and provide a  description and check "I have run waagent".</source>
          <target state="new">Click on Capture and specify the image name as <bpt id="p1">**</bpt>mariadb-galera-image<ept id="p1">**</ept> and provide a  description and check "I have run waagent".</target>
        </trans-unit>
        <trans-unit id="178" translate="yes" xml:space="preserve">
          <source><ph id="ph1">![</ph>Capture the Virtual Machine<ph id="ph2">](./media/virtual-machines-mariadb-cluster/Capture.png)</ph></source>
          <target state="new"><ph id="ph1">![</ph>Capture the Virtual Machine<ph id="ph2">](./media/virtual-machines-mariadb-cluster/Capture.png)</ph></target>
        </trans-unit>
        <trans-unit id="179" translate="yes" xml:space="preserve">
          <source><ph id="ph1">![</ph>Capture the Virtual Machine<ph id="ph2">](./media/virtual-machines-mariadb-cluster/Capture2.PNG)</ph></source>
          <target state="new"><ph id="ph1">![</ph>Capture the Virtual Machine<ph id="ph2">](./media/virtual-machines-mariadb-cluster/Capture2.PNG)</ph></target>
        </trans-unit>
        <trans-unit id="180" translate="yes" xml:space="preserve">
          <source>Creating the cluster</source>
          <target state="new">Creating the cluster</target>
        </trans-unit>
        <trans-unit id="181" translate="yes" xml:space="preserve">
          <source>Create 3 VMs out of the template you just created and then configure and start the cluster.</source>
          <target state="new">Create 3 VMs out of the template you just created and then configure and start the cluster.</target>
        </trans-unit>
        <trans-unit id="182" translate="yes" xml:space="preserve">
          <source>Create the first CentOS 7 VM from the <bpt id="p1">**</bpt>mariadb-galera-image<ept id="p1">**</ept> image you created, providing the virtual network name <bpt id="p2">**</bpt>mariadbvnet<ept id="p2">**</ept> and the subnet <bpt id="p3">**</bpt>mariadb<ept id="p3">**</ept>, machine size <bpt id="p4">**</bpt>Medium<ept id="p4">**</ept>, passing in the Cloud Service name to be <bpt id="p5">**</bpt>mariadbha<ept id="p5">**</ept> (or whatever name you want to be accessed through mariadbha.cloudapp.net), setting the name of this machine to be <bpt id="p6">**</bpt>mariadb1<ept id="p6">**</ept>  and the username to be <bpt id="p7">**</bpt>azureuser<ept id="p7">**</ept>,  and enabling SSH access and passing the SSH certificate .pem file and replacing <bpt id="p8">**</bpt>/path/to/key.pem<ept id="p8">**</ept> with the path where you stored the generated .pem SSH key.</source>
          <target state="new">Create the first CentOS 7 VM from the <bpt id="p1">**</bpt>mariadb-galera-image<ept id="p1">**</ept> image you created, providing the virtual network name <bpt id="p2">**</bpt>mariadbvnet<ept id="p2">**</ept> and the subnet <bpt id="p3">**</bpt>mariadb<ept id="p3">**</ept>, machine size <bpt id="p4">**</bpt>Medium<ept id="p4">**</ept>, passing in the Cloud Service name to be <bpt id="p5">**</bpt>mariadbha<ept id="p5">**</ept> (or whatever name you want to be accessed through mariadbha.cloudapp.net), setting the name of this machine to be <bpt id="p6">**</bpt>mariadb1<ept id="p6">**</ept>  and the username to be <bpt id="p7">**</bpt>azureuser<ept id="p7">**</ept>,  and enabling SSH access and passing the SSH certificate .pem file and replacing <bpt id="p8">**</bpt>/path/to/key.pem<ept id="p8">**</ept> with the path where you stored the generated .pem SSH key.</target>
        </trans-unit>
        <trans-unit id="183" translate="yes" xml:space="preserve">
          <source><ph id="ph1">[AZURE.NOTE]</ph> The commands below are split over multiple lines for clarity, but you should enter each as one line.</source>
          <target state="new"><ph id="ph1">[AZURE.NOTE]</ph> The commands below are split over multiple lines for clarity, but you should enter each as one line.</target>
        </trans-unit>
        <trans-unit id="184" translate="yes" xml:space="preserve">
          <source>Create 2 more Virtual Machines by <bpt id="p1">_</bpt>connecting<ept id="p1">_</ept> them to the currently created <bpt id="p2">**</bpt>mariadbha<ept id="p2">**</ept> Cloud Service, changing the <bpt id="p3">**</bpt>VM name<ept id="p3">**</ept> as well as the <bpt id="p4">**</bpt>SSH port<ept id="p4">**</ept> to a unique port not conflicting with other VMs in the same Cloud Service.</source>
          <target state="new">Create 2 more Virtual Machines by <bpt id="p1">_</bpt>connecting<ept id="p1">_</ept> them to the currently created <bpt id="p2">**</bpt>mariadbha<ept id="p2">**</ept> Cloud Service, changing the <bpt id="p3">**</bpt>VM name<ept id="p3">**</ept> as well as the <bpt id="p4">**</bpt>SSH port<ept id="p4">**</ept> to a unique port not conflicting with other VMs in the same Cloud Service.</target>
        </trans-unit>
        <trans-unit id="185" translate="yes" xml:space="preserve">
          <source>and for MariaDB3</source>
          <target state="new">and for MariaDB3</target>
        </trans-unit>
        <trans-unit id="186" translate="yes" xml:space="preserve">
          <source>You will need to get the internal IP address of each of the 3 VMs for the next step:</source>
          <target state="new">You will need to get the internal IP address of each of the 3 VMs for the next step:</target>
        </trans-unit>
        <trans-unit id="187" translate="yes" xml:space="preserve">
          <source>Getting IP address</source>
          <target state="new">Getting IP address</target>
        </trans-unit>
        <trans-unit id="188" translate="yes" xml:space="preserve">
          <source>SSH into the 3 VMs and and edit the configuration file on each</source>
          <target state="new">SSH into the 3 VMs and and edit the configuration file on each</target>
        </trans-unit>
        <trans-unit id="189" translate="yes" xml:space="preserve">
          <source>uncommenting <bpt id="p1">**</bpt><ph id="ph1">`wsrep_cluster_name`</ph><ept id="p1">**</ept> and <bpt id="p2">**</bpt><ph id="ph2">`wsrep_cluster_address`</ph><ept id="p2">**</ept> by removing the <bpt id="p3">**</bpt>#<ept id="p3">**</ept> at the beginning and validation they are indeed what you want.</source>
          <target state="new">uncommenting <bpt id="p1">**</bpt><ph id="ph1">`wsrep_cluster_name`</ph><ept id="p1">**</ept> and <bpt id="p2">**</bpt><ph id="ph2">`wsrep_cluster_address`</ph><ept id="p2">**</ept> by removing the <bpt id="p3">**</bpt>#<ept id="p3">**</ept> at the beginning and validation they are indeed what you want.</target>
        </trans-unit>
        <trans-unit id="190" translate="yes" xml:space="preserve">
          <source>Additionally, replace <bpt id="p1">**</bpt><ph id="ph1">`&lt;ServerIP&gt;`</ph><ept id="p1">**</ept> in <bpt id="p2">**</bpt><ph id="ph2">`wsrep_node_address`</ph><ept id="p2">**</ept> and <bpt id="p3">**</bpt><ph id="ph3">`&lt;NodeName&gt;`</ph><ept id="p3">**</ept> in <bpt id="p4">**</bpt><ph id="ph4">`wsrep_node_name`</ph><ept id="p4">**</ept> with the VM's IP address and name respectively and uncomment those lines as well.</source>
          <target state="new">Additionally, replace <bpt id="p1">**</bpt><ph id="ph1">`&lt;ServerIP&gt;`</ph><ept id="p1">**</ept> in <bpt id="p2">**</bpt><ph id="ph2">`wsrep_node_address`</ph><ept id="p2">**</ept> and <bpt id="p3">**</bpt><ph id="ph3">`&lt;NodeName&gt;`</ph><ept id="p3">**</ept> in <bpt id="p4">**</bpt><ph id="ph4">`wsrep_node_name`</ph><ept id="p4">**</ept> with the VM's IP address and name respectively and uncomment those lines as well.</target>
        </trans-unit>
        <trans-unit id="191" translate="yes" xml:space="preserve">
          <source>Start the cluster on MariaDB1 and let it run at startup</source>
          <target state="new">Start the cluster on MariaDB1 and let it run at startup</target>
        </trans-unit>
        <trans-unit id="192" translate="yes" xml:space="preserve">
          <source>Start MySQL on MariaDB2 and MariaDB3 and let it run at startup</source>
          <target state="new">Start MySQL on MariaDB2 and MariaDB3 and let it run at startup</target>
        </trans-unit>
        <trans-unit id="193" translate="yes" xml:space="preserve">
          <source>Load balancing the cluster</source>
          <target state="new">Load balancing the cluster</target>
        </trans-unit>
        <trans-unit id="194" translate="yes" xml:space="preserve">
          <source>When you created the clustered VMs, you added them into an Availablity Set called <bpt id="p1">**</bpt>clusteravset<ept id="p1">**</ept> to ensure they are put on different fault and update domains and that Azure never does maintenance on all machines at once.</source>
          <target state="new">When you created the clustered VMs, you added them into an Availablity Set called <bpt id="p1">**</bpt>clusteravset<ept id="p1">**</ept> to ensure they are put on different fault and update domains and that Azure never does maintenance on all machines at once.</target>
        </trans-unit>
        <trans-unit id="195" translate="yes" xml:space="preserve">
          <source>This configuration meets the requirements to be supported by that Azure Service Level Agreement (SLA).</source>
          <target state="new">This configuration meets the requirements to be supported by that Azure Service Level Agreement (SLA).</target>
        </trans-unit>
        <trans-unit id="196" translate="yes" xml:space="preserve">
          <source>Now you use the Azure Load Balancer to balance requests between our 3 nodes.</source>
          <target state="new">Now you use the Azure Load Balancer to balance requests between our 3 nodes.</target>
        </trans-unit>
        <trans-unit id="197" translate="yes" xml:space="preserve">
          <source>Run the below commands on your machine using the Azure CLI.</source>
          <target state="new">Run the below commands on your machine using the Azure CLI.</target>
        </trans-unit>
        <trans-unit id="198" translate="yes" xml:space="preserve">
          <source>The command parameters structure is: <ph id="ph1">`azure vm endpoint create-multiple &lt;MachineName&gt; &lt;PublicPort&gt;:&lt;VMPort&gt;:&lt;Protocol&gt;:&lt;EnableDirectServerReturn&gt;:&lt;Load Balanced Set Name&gt;:&lt;ProbeProtocol&gt;:&lt;ProbePort&gt;`</ph></source>
          <target state="new">The command parameters structure is: <ph id="ph1">`azure vm endpoint create-multiple &lt;MachineName&gt; &lt;PublicPort&gt;:&lt;VMPort&gt;:&lt;Protocol&gt;:&lt;EnableDirectServerReturn&gt;:&lt;Load Balanced Set Name&gt;:&lt;ProbeProtocol&gt;:&lt;ProbePort&gt;`</ph></target>
        </trans-unit>
        <trans-unit id="199" translate="yes" xml:space="preserve">
          <source>Finally, since the CLI sets the load-balancer probe interval to 15 seconds (which may be a bit too long), change it in the portal under <bpt id="p1">**</bpt>Endpoints<ept id="p1">**</ept> for any of the VMs</source>
          <target state="new">Finally, since the CLI sets the load-balancer probe interval to 15 seconds (which may be a bit too long), change it in the portal under <bpt id="p1">**</bpt>Endpoints<ept id="p1">**</ept> for any of the VMs</target>
        </trans-unit>
        <trans-unit id="200" translate="yes" xml:space="preserve">
          <source>Edit endpoint</source>
          <target state="new">Edit endpoint</target>
        </trans-unit>
        <trans-unit id="201" translate="yes" xml:space="preserve">
          <source>then click on Reconfigure The Load-Balanced Set and go next</source>
          <target state="new">then click on Reconfigure The Load-Balanced Set and go next</target>
        </trans-unit>
        <trans-unit id="202" translate="yes" xml:space="preserve">
          <source>Reconfigure Load Balanced Set</source>
          <target state="new">Reconfigure Load Balanced Set</target>
        </trans-unit>
        <trans-unit id="203" translate="yes" xml:space="preserve">
          <source>then change the Probe Interval to 5 seconds and save</source>
          <target state="new">then change the Probe Interval to 5 seconds and save</target>
        </trans-unit>
        <trans-unit id="204" translate="yes" xml:space="preserve">
          <source>Change Probe Interval</source>
          <target state="new">Change Probe Interval</target>
        </trans-unit>
        <trans-unit id="205" translate="yes" xml:space="preserve">
          <source>Validating the cluster</source>
          <target state="new">Validating the cluster</target>
        </trans-unit>
        <trans-unit id="206" translate="yes" xml:space="preserve">
          <source>The hard work is done.</source>
          <target state="new">The hard work is done.</target>
        </trans-unit>
        <trans-unit id="207" translate="yes" xml:space="preserve">
          <source>The cluster should be now accessible at <ph id="ph1">`mariadbha.cloudapp.net:3306`</ph> which will hit the load balancer and route requests between the 3 VMs smoothly and efficiently.</source>
          <target state="new">The cluster should be now accessible at <ph id="ph1">`mariadbha.cloudapp.net:3306`</ph> which will hit the load balancer and route requests between the 3 VMs smoothly and efficiently.</target>
        </trans-unit>
        <trans-unit id="208" translate="yes" xml:space="preserve">
          <source>Use your favorite MySQL client to connect or just connect from one of the VMs to verify this cluster is working.</source>
          <target state="new">Use your favorite MySQL client to connect or just connect from one of the VMs to verify this cluster is working.</target>
        </trans-unit>
        <trans-unit id="209" translate="yes" xml:space="preserve">
          <source>Then create a new database and populate it with some data</source>
          <target state="new">Then create a new database and populate it with some data</target>
        </trans-unit>
        <trans-unit id="210" translate="yes" xml:space="preserve">
          <source>Will result in the table below</source>
          <target state="new">Will result in the table below</target>
        </trans-unit>
        <trans-unit id="211" translate="yes" xml:space="preserve">
          <source>Next steps

In this article, you created a 3 node MariaDB + Galera highly-available cluster on Azure Virtual Machines running CentOS 7.</source>
          <target state="new">Next steps

In this article, you created a 3 node MariaDB + Galera highly-available cluster on Azure Virtual Machines running CentOS 7.</target>
        </trans-unit>
        <trans-unit id="212" translate="yes" xml:space="preserve">
          <source>The VMs are load balanced with the Azure Load Balancer.</source>
          <target state="new">The VMs are load balanced with the Azure Load Balancer.</target>
        </trans-unit>
        <trans-unit id="213" translate="yes" xml:space="preserve">
          <source>You may want to take a look at [another way to cluster MySQL on Linux] and ways to [optimize and test MySQL performance on Azure Linux VMs].</source>
          <target state="new">You may want to take a look at [another way to cluster MySQL on Linux] and ways to [optimize and test MySQL performance on Azure Linux VMs].</target>
        </trans-unit>
      </group>
    </body>
  </file>
  <header xmlns="">
    <xliffext:oltranslationpriority xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">
    </xliffext:oltranslationpriority>
    <xliffext:olfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">1e13cb7f055f00e7840a453599cf93ad952d2a74</xliffext:olfilehash>
  </header>
</xliff>