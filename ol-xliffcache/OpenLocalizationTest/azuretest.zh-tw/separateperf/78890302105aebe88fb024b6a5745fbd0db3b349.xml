{
  "nodes": [
    {
      "content": "Manage a SQL Database with SSMS | Microsoft Azure",
      "pos": [
        28,
        77
      ]
    },
    {
      "content": "Learn how to use SQL Server Management Studio to manage SQL Database servers and databases.",
      "pos": [
        97,
        188
      ]
    },
    {
      "content": "Managing Azure SQL Database using SQL Server Management Studio",
      "pos": [
        522,
        584
      ]
    },
    {
      "content": "You can use SQL Server Management Studio (SSMS) to administer Azure SQL Database logical servers and databases.",
      "pos": [
        587,
        698
      ]
    },
    {
      "content": "This topic walks you through common tasks with SSMS.",
      "pos": [
        699,
        751
      ]
    },
    {
      "content": "You should already have a logical server and database created in Azure SQL Database before you begin.",
      "pos": [
        752,
        853
      ]
    },
    {
      "content": "To get started, read <bpt id=\"p1\">[</bpt>Create your first Azure SQL Database<ept id=\"p1\">](sql-database-get-started.md)</ept> and then come back.",
      "pos": [
        854,
        962
      ]
    },
    {
      "content": "It's recommended that you use the latest version of SSMS whenever you work with Azure SQL Database.",
      "pos": [
        964,
        1063
      ]
    },
    {
      "content": "Visit <bpt id=\"p1\">[</bpt>Download SQL Server Management Studio<ept id=\"p1\">](https://msdn.microsoft.com/library/mt238290.aspx)</ept> to get it.",
      "pos": [
        1064,
        1170
      ]
    },
    {
      "content": "Connect to a SQL Database logical server",
      "pos": [
        1177,
        1217
      ]
    },
    {
      "content": "Connecting to SQL Database requires that you know the server name on Azure.",
      "pos": [
        1219,
        1294
      ]
    },
    {
      "content": "You might need to sign in to the portal to get this information.",
      "pos": [
        1295,
        1359
      ]
    },
    {
      "pos": [
        1365,
        1438
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>Azure Management Portal<ept id=\"p1\">](http://manage.windowsazure.com)</ept>."
    },
    {
      "pos": [
        1444,
        1486
      ],
      "content": "In the left pane, click <bpt id=\"p1\">**</bpt>SQL Databases<ept id=\"p1\">**</ept>."
    },
    {
      "content": "On the SQL Databases home page, click <bpt id=\"p1\">**</bpt>SERVERS<ept id=\"p1\">**</ept> at the top of the page to list all of the servers associated with your subscription.",
      "pos": [
        1492,
        1626
      ]
    },
    {
      "content": "Find the name of the server to which you want to connect and copy it to the clipboard.",
      "pos": [
        1627,
        1713
      ]
    },
    {
      "content": "Next, configure your SQL Database firewall to",
      "pos": [
        1719,
        1764
      ]
    },
    {
      "content": "allow connections from your local machine.",
      "pos": [
        1765,
        1807
      ]
    },
    {
      "content": "You do this by adding your local machines IP address to the firewall exception list.",
      "pos": [
        1808,
        1892
      ]
    },
    {
      "pos": [
        1898,
        1999
      ],
      "content": "On SQL Databases home page, click <bpt id=\"p1\">**</bpt>SERVERS<ept id=\"p1\">**</ept> and then click the server to which you want to connect."
    },
    {
      "pos": [
        2005,
        2048
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> at the top of the page."
    },
    {
      "content": "Copy the IP address in CURRENT CLIENT IP ADDRESS.",
      "pos": [
        2054,
        2103
      ]
    },
    {
      "content": "In the Configure page, <bpt id=\"p1\">**</bpt>Allowed IP Addresses<ept id=\"p1\">**</ept> includes three boxes where you can specify a rule name and a range of IP addresses as starting and ending values.",
      "pos": [
        2109,
        2270
      ]
    },
    {
      "content": "For a rule name, you might enter the name of your computer.",
      "pos": [
        2271,
        2330
      ]
    },
    {
      "content": "For the start and end range, paste in the IP address of your computer into both boxes, and then click the checkbox that appears.",
      "pos": [
        2331,
        2459
      ]
    },
    {
      "content": "The rule name must be unique.",
      "pos": [
        2465,
        2494
      ]
    },
    {
      "content": "If this is your development computer, you can enter the IP address in both the IP range start box and the IP range end box.",
      "pos": [
        2495,
        2618
      ]
    },
    {
      "content": "Otherwise, you might need to enter a broader range of IP addresses to accommodate connections from additional computers in your organization.",
      "pos": [
        2619,
        2760
      ]
    },
    {
      "pos": [
        2766,
        2807
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>SAVE<ept id=\"p1\">**</ept> at the bottom of the page."
    },
    {
      "pos": [
        2813,
        2926
      ],
      "content": "**Note:** There can be up as much as a five-minute delay for changes\n to the firewall settings to take effect.",
      "leadings": [
        "",
        "   "
      ],
      "nodes": [
        {
          "content": "<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept> There can be up as much as a five-minute delay for changes",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "to the firewall settings to take effect.",
          "pos": [
            70,
            110
          ]
        }
      ]
    },
    {
      "content": "You are now ready to connect to SQL Database using Management Studio.",
      "pos": [
        2932,
        3001
      ]
    },
    {
      "pos": [
        3007,
        3163
      ],
      "content": "On the taskbar, click **Start**, point to **All Programs**, point to\n**Microsoft SQL Server 2014**, and then click **SQL Server\nManagement Studio**.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "On the taskbar, click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, point to <bpt id=\"p2\">**</bpt>All Programs<ept id=\"p2\">**</ept>, point to",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>Microsoft SQL Server 2014<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>SQL Server\nManagement Studio<ept id=\"p2\">**</ept>.",
          "pos": [
            69,
            148
          ]
        }
      ]
    },
    {
      "pos": [
        3169,
        3367
      ],
      "content": "In **Connect to Server**, specify the fully-qualified\nserver name  as *serverName*.database.windows.net. On Azure, the server name is an autogenerated string composed of alphanumeric characters.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "In <bpt id=\"p1\">**</bpt>Connect to Server<ept id=\"p1\">**</ept>, specify the fully-qualified",
          "pos": [
            0,
            53
          ]
        },
        {
          "content": "server name  as *serverName*.database.windows.net. On Azure, the server name is an autogenerated string composed of alphanumeric characters.",
          "pos": [
            54,
            194
          ],
          "nodes": [
            {
              "content": "server name  as <bpt id=\"p1\">*</bpt>serverName<ept id=\"p1\">*</ept>.database.windows.net.",
              "pos": [
                0,
                50
              ]
            },
            {
              "content": "On Azure, the server name is an autogenerated string composed of alphanumeric characters.",
              "pos": [
                51,
                140
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        3373,
        3410
      ],
      "content": "Select <bpt id=\"p1\">**</bpt>SQL Server Authentication<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        3416,
        3546
      ],
      "content": "In the **Login** box, enter the SQL Server administrator login that you\nspecified in the portal when you created  your server.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Login<ept id=\"p1\">**</ept> box, enter the SQL Server administrator login that you",
          "pos": [
            0,
            71
          ]
        },
        {
          "content": "specified in the portal when you created  your server.",
          "pos": [
            72,
            126
          ]
        }
      ]
    },
    {
      "pos": [
        3552,
        3663
      ],
      "content": "In the **Password** box, enter the password that you specified in\nthe portal when you created  your server.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "In the <bpt id=\"p1\">**</bpt>Password<ept id=\"p1\">**</ept> box, enter the password that you specified in",
          "pos": [
            0,
            65
          ]
        },
        {
          "content": "the portal when you created  your server.",
          "pos": [
            66,
            107
          ]
        }
      ]
    },
    {
      "pos": [
        3669,
        3715
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept> to establish the connection."
    },
    {
      "content": "SQL Server 2014 SSMS with the latest updates offers expanded support for tasks like",
      "pos": [
        3717,
        3800
      ]
    },
    {
      "content": "creating and modifying Azure SQL databases.",
      "pos": [
        3801,
        3844
      ]
    },
    {
      "content": "In addition, you can also use",
      "pos": [
        3845,
        3874
      ]
    },
    {
      "content": "Transact-SQL statements to accomplish these tasks.",
      "pos": [
        3875,
        3925
      ]
    },
    {
      "content": "The steps below",
      "pos": [
        3926,
        3941
      ]
    },
    {
      "content": "provide examples of these statements.",
      "pos": [
        3942,
        3979
      ]
    },
    {
      "content": "For more information about using",
      "pos": [
        3980,
        4012
      ]
    },
    {
      "content": "Transact-SQL with SQL Database, including details about which commands are",
      "pos": [
        4013,
        4087
      ]
    },
    {
      "content": "supported, see <bpt id=\"p1\">[</bpt>Transact-SQL Reference (SQL Database)<ept id=\"p1\">](http://msdn.microsoft.com/library/bb510741.aspx)</ept>.",
      "pos": [
        4088,
        4192
      ]
    },
    {
      "content": "Create and manage Azure SQL databases",
      "pos": [
        4197,
        4234
      ]
    },
    {
      "content": "While connected to the <bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> database, you can create new",
      "pos": [
        4236,
        4298
      ]
    },
    {
      "content": "databases on the server and modify or drop existing databases.",
      "pos": [
        4299,
        4361
      ]
    },
    {
      "content": "The steps",
      "pos": [
        4362,
        4371
      ]
    },
    {
      "content": "below describe how to accomplish several common database management",
      "pos": [
        4372,
        4439
      ]
    },
    {
      "content": "tasks through Management Studio.",
      "pos": [
        4440,
        4472
      ]
    },
    {
      "content": "To perform these tasks, make sure you are connected to the",
      "pos": [
        4473,
        4531
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> database with the server-level principal login that you",
      "pos": [
        4532,
        4598
      ]
    },
    {
      "content": "created when you set up your server.",
      "pos": [
        4599,
        4635
      ]
    },
    {
      "pos": [
        4637,
        4805
      ],
      "content": "To open a query window in Management Studio, open the Databases folder, expand the <bpt id=\"p1\">**</bpt>System Databases<ept id=\"p1\">**</ept> folder, right-click on <bpt id=\"p2\">**</bpt>master<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>New Query<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        4811,
        5144
      ],
      "content": "Use the **CREATE DATABASE** statement to create a new database. For\nmore information, see [CREATE DATABASE (SQL Database)](https://msdn.microsoft.com/library/dn268335.aspx). The statement below creates a new database named **myTestDB** and specifies that it is a Standard S0 Edition database with a default maximum size of 250GB.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the **CREATE DATABASE** statement to create a new database. For",
          "pos": [
            0,
            67
          ],
          "nodes": [
            {
              "content": "Use the <bpt id=\"p1\">**</bpt>CREATE DATABASE<ept id=\"p1\">**</ept> statement to create a new database.",
              "pos": [
                0,
                63
              ]
            },
            {
              "content": "For",
              "pos": [
                64,
                67
              ]
            }
          ]
        },
        {
          "content": "more information, see [CREATE DATABASE (SQL Database)](https://msdn.microsoft.com/library/dn268335.aspx). The statement below creates a new database named **myTestDB** and specifies that it is a Standard S0 Edition database with a default maximum size of 250GB.",
          "pos": [
            68,
            329
          ],
          "nodes": [
            {
              "content": "more information, see <bpt id=\"p1\">[</bpt>CREATE DATABASE (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/dn268335.aspx)</ept>.",
              "pos": [
                0,
                105
              ]
            },
            {
              "content": "The statement below creates a new database named <bpt id=\"p1\">**</bpt>myTestDB<ept id=\"p1\">**</ept> and specifies that it is a Standard S0 Edition database with a default maximum size of 250GB.",
              "pos": [
                106,
                261
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        5243,
        5278
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Execute<ept id=\"p1\">**</ept> to run the query."
    },
    {
      "pos": [
        5284,
        5658
      ],
      "content": "Use the **ALTER DATABASE** statement to modify an existing database,\nfor example if you want to change the name and edition\nof the database. For more information, see [ALTER DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms174269.aspx). The\nstatement below modifies the database you created in the previous\nstep to change edition to Standard S1.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>ALTER DATABASE<ept id=\"p1\">**</ept> statement to modify an existing database,",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "for example if you want to change the name and edition",
          "pos": [
            69,
            123
          ]
        },
        {
          "content": "of the database. For more information, see [ALTER DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms174269.aspx). The",
          "pos": [
            124,
            253
          ],
          "nodes": [
            {
              "content": "of the database.",
              "pos": [
                0,
                16
              ]
            },
            {
              "content": "For more information, see <bpt id=\"p1\">[</bpt>ALTER DATABASE (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/ms174269.aspx)</ept>.",
              "pos": [
                17,
                125
              ]
            },
            {
              "content": "The",
              "pos": [
                126,
                129
              ]
            }
          ]
        },
        {
          "content": "statement below modifies the database you created in the previous",
          "pos": [
            254,
            319
          ]
        },
        {
          "content": "step to change edition to Standard S1.",
          "pos": [
            320,
            358
          ]
        }
      ]
    },
    {
      "pos": [
        5746,
        6058
      ],
      "content": "Use **the DROP DATABASE** Statement to delete an existing database.\nFor more information, see [DROP DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms178613.aspx). The statement below deletes the **myTestDB** database, but don't drop it now because you will use it create logins in the next step.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Use <bpt id=\"p1\">**</bpt>the DROP DATABASE<ept id=\"p1\">**</ept> Statement to delete an existing database.",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "For more information, see [DROP DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms178613.aspx). The statement below deletes the **myTestDB** database, but don't drop it now because you will use it create logins in the next step.",
          "pos": [
            68,
            308
          ],
          "nodes": [
            {
              "content": "For more information, see <bpt id=\"p1\">[</bpt>DROP DATABASE (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/ms178613.aspx)</ept>.",
              "pos": [
                0,
                107
              ]
            },
            {
              "content": "The statement below deletes the <bpt id=\"p1\">**</bpt>myTestDB<ept id=\"p1\">**</ept> database, but don't drop it now because you will use it create logins in the next step.",
              "pos": [
                108,
                240
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        6099,
        6276
      ],
      "content": "The master database has the **sys.databases** view that you can use\nto view details about all databases. To view all existing databases,\nexecute the following statement:",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "The master database has the <bpt id=\"p1\">**</bpt>sys.databases<ept id=\"p1\">**</ept> view that you can use",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "to view details about all databases. To view all existing databases,",
          "pos": [
            68,
            136
          ],
          "nodes": [
            {
              "content": "to view details about all databases.",
              "pos": [
                0,
                36
              ]
            },
            {
              "content": "To view all existing databases,",
              "pos": [
                37,
                68
              ]
            }
          ]
        },
        {
          "content": "execute the following statement:",
          "pos": [
            137,
            169
          ]
        }
      ]
    },
    {
      "pos": [
        6320,
        6493
      ],
      "content": "In SQL Database, the **USE** statement is not supported for switching\nbetween databases. Instead, you need to establish a connection\ndirectly to the target database.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "In SQL Database, the <bpt id=\"p1\">**</bpt>USE<ept id=\"p1\">**</ept> statement is not supported for switching",
          "pos": [
            0,
            69
          ]
        },
        {
          "content": "between databases. Instead, you need to establish a connection",
          "pos": [
            70,
            132
          ],
          "nodes": [
            {
              "content": "between databases.",
              "pos": [
                0,
                18
              ]
            },
            {
              "content": "Instead, you need to establish a connection",
              "pos": [
                19,
                62
              ]
            }
          ]
        },
        {
          "content": "directly to the target database.",
          "pos": [
            133,
            165
          ]
        }
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Many of the Transact-SQL statements that create or modify a database must be run within their own batch and cannot be grouped with other Transact-SQL statements.",
      "pos": [
        6496,
        6670
      ]
    },
    {
      "content": "For more information, see the statement-specific information available from the links listed above.",
      "pos": [
        6671,
        6770
      ]
    },
    {
      "content": "Create and manage logins",
      "pos": [
        6775,
        6799
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> database keeps track of logins and which logins have",
      "pos": [
        6801,
        6868
      ]
    },
    {
      "content": "permission to create databases or other logins.",
      "pos": [
        6869,
        6916
      ]
    },
    {
      "content": "Manage logins by",
      "pos": [
        6917,
        6933
      ]
    },
    {
      "content": "connecting to the <bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> database with the server-level principal",
      "pos": [
        6934,
        7003
      ]
    },
    {
      "content": "login that you created when you set up your server.",
      "pos": [
        7004,
        7055
      ]
    },
    {
      "content": "You can use the",
      "pos": [
        7056,
        7071
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>CREATE LOGIN<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>ALTER LOGIN<ept id=\"p2\">**</ept>, or <bpt id=\"p3\">**</bpt>DROP LOGIN<ept id=\"p3\">**</ept> statements to",
      "pos": [
        7072,
        7138
      ]
    },
    {
      "content": "execute queries against the master database that will manage logins",
      "pos": [
        7139,
        7206
      ]
    },
    {
      "content": "across the entire server.",
      "pos": [
        7207,
        7232
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Managing Databases and Logins in SQL Database<ept id=\"p1\">](http://msdn.microsoft.com/library/azure/ee336235.aspx)</ept>.",
      "pos": [
        7233,
        7362
      ]
    },
    {
      "pos": [
        7370,
        7674
      ],
      "content": "Use the **CREATE LOGIN** statement to create a new server-level\nlogin. For more information, see [CREATE LOGIN (SQL Database)](https://msdn.microsoft.com/library/ms189751.aspx). The statement below creates a new login\ncalled **login1**. Replace **password1** with the password of your\nchoice.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>CREATE LOGIN<ept id=\"p1\">**</ept> statement to create a new server-level",
          "pos": [
            0,
            63
          ]
        },
        {
          "content": "login. For more information, see [CREATE LOGIN (SQL Database)](https://msdn.microsoft.com/library/ms189751.aspx). The statement below creates a new login",
          "pos": [
            64,
            217
          ],
          "nodes": [
            {
              "content": "login.",
              "pos": [
                0,
                6
              ]
            },
            {
              "content": "For more information, see <bpt id=\"p1\">[</bpt>CREATE LOGIN (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/ms189751.aspx)</ept>.",
              "pos": [
                7,
                113
              ]
            },
            {
              "content": "The statement below creates a new login",
              "pos": [
                114,
                153
              ]
            }
          ]
        },
        {
          "content": "called **login1**. Replace **password1** with the password of your",
          "pos": [
            218,
            284
          ],
          "nodes": [
            {
              "content": "called <bpt id=\"p1\">**</bpt>login1<ept id=\"p1\">**</ept>.",
              "pos": [
                0,
                18
              ]
            },
            {
              "content": "Replace <bpt id=\"p1\">**</bpt>password1<ept id=\"p1\">**</ept> with the password of your",
              "pos": [
                19,
                66
              ]
            }
          ]
        },
        {
          "content": "choice.",
          "pos": [
            285,
            292
          ]
        }
      ]
    },
    {
      "pos": [
        7736,
        8134
      ],
      "content": "Use the **CREATE USER** statement to grant database-level\npermissions. All logins must be created in the **master** database,\nbut for a login to connect to a different database, you\nmust grant it database-level permissions using the **CREATE USER**\nstatement on that database. For more information, see [CREATE USER (SQL Database)](https://msdn.microsoft.com/library/ms173463.aspx).",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>CREATE USER<ept id=\"p1\">**</ept> statement to grant database-level",
          "pos": [
            0,
            57
          ]
        },
        {
          "content": "permissions. All logins must be created in the **master** database,",
          "pos": [
            58,
            125
          ],
          "nodes": [
            {
              "content": "permissions.",
              "pos": [
                0,
                12
              ]
            },
            {
              "content": "All logins must be created in the <bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> database,",
              "pos": [
                13,
                67
              ]
            }
          ]
        },
        {
          "content": "but for a login to connect to a different database, you",
          "pos": [
            126,
            181
          ]
        },
        {
          "content": "must grant it database-level permissions using the <bpt id=\"p1\">**</bpt>CREATE USER<ept id=\"p1\">**</ept>",
          "pos": [
            182,
            248
          ]
        },
        {
          "content": "statement on that database. For more information, see [CREATE USER (SQL Database)](https://msdn.microsoft.com/library/ms173463.aspx).",
          "pos": [
            249,
            382
          ],
          "nodes": [
            {
              "content": "statement on that database.",
              "pos": [
                0,
                27
              ]
            },
            {
              "content": "For more information, see <bpt id=\"p1\">[</bpt>CREATE USER (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/ms173463.aspx)</ept>.",
              "pos": [
                28,
                133
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        8141,
        8240
      ],
      "content": "To give login1\npermissions to a database called **myTestDB**, complete the following\nsteps:",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "To give login1",
          "pos": [
            0,
            14
          ]
        },
        {
          "content": "permissions to a database called <bpt id=\"p1\">**</bpt>myTestDB<ept id=\"p1\">**</ept>, complete the following",
          "pos": [
            15,
            84
          ]
        },
        {
          "content": "steps:",
          "pos": [
            85,
            91
          ]
        }
      ]
    },
    {
      "pos": [
        8247,
        8405
      ],
      "content": "To refresh Object Explorer to view the <bpt id=\"p1\">**</bpt>myTestDB<ept id=\"p1\">**</ept> database that you just created, right-click the server name in Object Explorer and then click <bpt id=\"p2\">**</bpt>Refresh<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        8414,
        8520
      ],
      "content": "If you closed the connection, you can reconnect by selecting <bpt id=\"p1\">**</bpt>Connect Object Explorer<ept id=\"p1\">**</ept> on the File menu."
    },
    {
      "pos": [
        8526,
        8585
      ],
      "content": "Right-click <bpt id=\"p1\">**</bpt>myTestDB<ept id=\"p1\">**</ept> database and select <bpt id=\"p2\">**</bpt>New Query<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        8595,
        8774
      ],
      "content": "Execute the following statement against the myTestDB database to\ncreate a database user named **login1User** that corresponds to\nthe server-level login **login1**.",
      "leadings": [
        "",
        "        ",
        "        "
      ],
      "nodes": [
        {
          "content": "Execute the following statement against the myTestDB database to",
          "pos": [
            0,
            64
          ]
        },
        {
          "content": "create a database user named <bpt id=\"p1\">**</bpt>login1User<ept id=\"p1\">**</ept> that corresponds to",
          "pos": [
            65,
            128
          ]
        },
        {
          "content": "the server-level login <bpt id=\"p1\">**</bpt>login1<ept id=\"p1\">**</ept>.",
          "pos": [
            129,
            163
          ]
        }
      ]
    },
    {
      "pos": [
        8835,
        9222
      ],
      "content": "Use the **sp\\_addrolemember** stored procedure to give the user\naccount the appropriate level of permissions on the database. For\nmore information, see [sp_addrolemember (Transact-SQL)](http://msdn.microsoft.com/library/ms187750.aspx). The statement below gives **login1User**\nread-only permissions to the database by adding **login1User** to\nthe **db\\_datareader** role.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>sp\\_addrolemember<ept id=\"p1\">**</ept> stored procedure to give the user",
          "pos": [
            0,
            63
          ]
        },
        {
          "content": "account the appropriate level of permissions on the database. For",
          "pos": [
            64,
            129
          ],
          "nodes": [
            {
              "content": "account the appropriate level of permissions on the database.",
              "pos": [
                0,
                61
              ]
            },
            {
              "content": "For",
              "pos": [
                62,
                65
              ]
            }
          ]
        },
        {
          "content": "more information, see [sp_addrolemember (Transact-SQL)](http://msdn.microsoft.com/library/ms187750.aspx). The statement below gives **login1User**",
          "pos": [
            130,
            276
          ],
          "nodes": [
            {
              "content": "more information, see <bpt id=\"p1\">[</bpt>sp_addrolemember (Transact-SQL)<ept id=\"p1\">](http://msdn.microsoft.com/library/ms187750.aspx)</ept>.",
              "pos": [
                0,
                105
              ]
            },
            {
              "content": "The statement below gives <bpt id=\"p1\">**</bpt>login1User<ept id=\"p1\">**</ept>",
              "pos": [
                106,
                146
              ]
            }
          ]
        },
        {
          "content": "read-only permissions to the database by adding <bpt id=\"p1\">**</bpt>login1User<ept id=\"p1\">**</ept> to",
          "pos": [
            277,
            342
          ]
        },
        {
          "content": "the <bpt id=\"p1\">**</bpt>db\\_datareader<ept id=\"p1\">**</ept> role.",
          "pos": [
            343,
            371
          ]
        }
      ]
    },
    {
      "pos": [
        9294,
        9677
      ],
      "content": "Use the **ALTER LOGIN** statement to modify an existing login, for\nexample if you want to change the password for the login. For\nmore information, see [ALTER LOGIN (SQL Database)](https://msdn.microsoft.com/library/ms189828.aspx). The **ALTER LOGIN** statement should be run against the **master** database. Switch back to the query window that is connected to that database.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>ALTER LOGIN<ept id=\"p1\">**</ept> statement to modify an existing login, for",
          "pos": [
            0,
            66
          ]
        },
        {
          "content": "example if you want to change the password for the login. For",
          "pos": [
            67,
            128
          ],
          "nodes": [
            {
              "content": "example if you want to change the password for the login.",
              "pos": [
                0,
                57
              ]
            },
            {
              "content": "For",
              "pos": [
                58,
                61
              ]
            }
          ]
        },
        {
          "content": "more information, see [ALTER LOGIN (SQL Database)](https://msdn.microsoft.com/library/ms189828.aspx). The **ALTER LOGIN** statement should be run against the **master** database. Switch back to the query window that is connected to that database.",
          "pos": [
            129,
            375
          ],
          "nodes": [
            {
              "content": "more information, see <bpt id=\"p1\">[</bpt>ALTER LOGIN (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/ms189828.aspx)</ept>.",
              "pos": [
                0,
                101
              ]
            },
            {
              "content": "The <bpt id=\"p1\">**</bpt>ALTER LOGIN<ept id=\"p1\">**</ept> statement should be run against the <bpt id=\"p2\">**</bpt>master<ept id=\"p2\">**</ept> database.",
              "pos": [
                102,
                178
              ]
            },
            {
              "content": "Switch back to the query window that is connected to that database.",
              "pos": [
                179,
                246
              ]
            }
          ]
        }
      ]
    },
    {
      "pos": [
        9684,
        9883
      ],
      "content": "The statement below modifies the **login1** login to reset the password.\nReplace **newPassword** with the password of your choice, and\n**oldPassword** with the current password for the login.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "The statement below modifies the <bpt id=\"p1\">**</bpt>login1<ept id=\"p1\">**</ept> login to reset the password.",
          "pos": [
            0,
            72
          ]
        },
        {
          "content": "Replace <bpt id=\"p1\">**</bpt>newPassword<ept id=\"p1\">**</ept> with the password of your choice, and",
          "pos": [
            73,
            134
          ]
        },
        {
          "content": "<bpt id=\"p1\">**</bpt>oldPassword<ept id=\"p1\">**</ept> with the current password for the login.",
          "pos": [
            135,
            191
          ]
        }
      ]
    },
    {
      "pos": [
        9993,
        10397
      ],
      "content": "Use **the DROP LOGIN** statement to delete an existing login.\nDeleting a login at the server level also deletes any associated\ndatabase user accounts. For more information,\nsee [DROP DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms178613.aspx). The **DROP LOGIN**\nstatement should be run against the **master** database. The\nstatement below deletes the **login1** login.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use <bpt id=\"p1\">**</bpt>the DROP LOGIN<ept id=\"p1\">**</ept> statement to delete an existing login.",
          "pos": [
            0,
            61
          ]
        },
        {
          "content": "Deleting a login at the server level also deletes any associated",
          "pos": [
            62,
            126
          ]
        },
        {
          "content": "database user accounts. For more information,",
          "pos": [
            127,
            172
          ],
          "nodes": [
            {
              "content": "database user accounts.",
              "pos": [
                0,
                23
              ]
            },
            {
              "content": "For more information,",
              "pos": [
                24,
                45
              ]
            }
          ]
        },
        {
          "content": "see [DROP DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms178613.aspx). The **DROP LOGIN**",
          "pos": [
            173,
            277
          ],
          "nodes": [
            {
              "content": "see <bpt id=\"p1\">[</bpt>DROP DATABASE (SQL Database)<ept id=\"p1\">](https://msdn.microsoft.com/library/ms178613.aspx)</ept>.",
              "pos": [
                0,
                85
              ]
            },
            {
              "content": "The <bpt id=\"p1\">**</bpt>DROP LOGIN<ept id=\"p1\">**</ept>",
              "pos": [
                86,
                104
              ]
            }
          ]
        },
        {
          "content": "statement should be run against the **master** database. The",
          "pos": [
            278,
            338
          ],
          "nodes": [
            {
              "content": "statement should be run against the <bpt id=\"p1\">**</bpt>master<ept id=\"p1\">**</ept> database.",
              "pos": [
                0,
                56
              ]
            },
            {
              "content": "The",
              "pos": [
                57,
                60
              ]
            }
          ]
        },
        {
          "content": "statement below deletes the <bpt id=\"p1\">**</bpt>login1<ept id=\"p1\">**</ept> login.",
          "pos": [
            339,
            384
          ]
        }
      ]
    },
    {
      "pos": [
        10431,
        10586
      ],
      "content": "The master database has the **sys.sql\\_logins** view that you can\nuse to view logins. To view all existing logins, execute the\nfollowing statement:",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "The master database has the <bpt id=\"p1\">**</bpt>sys.sql\\_logins<ept id=\"p1\">**</ept> view that you can",
          "pos": [
            0,
            65
          ]
        },
        {
          "content": "use to view logins. To view all existing logins, execute the",
          "pos": [
            66,
            126
          ],
          "nodes": [
            {
              "content": "use to view logins.",
              "pos": [
                0,
                19
              ]
            },
            {
              "content": "To view all existing logins, execute the",
              "pos": [
                20,
                60
              ]
            }
          ]
        },
        {
          "content": "following statement:",
          "pos": [
            127,
            147
          ]
        }
      ]
    },
    {
      "content": "Monitor SQL Database using Dynamic Management Views",
      "pos": [
        10630,
        10681
      ]
    },
    {
      "content": "SQL Database supports several dynamic management views that you",
      "pos": [
        10688,
        10751
      ]
    },
    {
      "content": "can use to monitor an individual database.",
      "pos": [
        10752,
        10794
      ]
    },
    {
      "content": "Below are a few examples of",
      "pos": [
        10795,
        10822
      ]
    },
    {
      "content": "the type of monitor data you can retrieve through these views.",
      "pos": [
        10823,
        10885
      ]
    },
    {
      "content": "For",
      "pos": [
        10886,
        10889
      ]
    },
    {
      "content": "complete details and more usage examples, see <bpt id=\"p1\">[</bpt>Monitoring SQL Database using Dynamic Management Views<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/ff394114.aspx)</ept>.",
      "pos": [
        10890,
        11049
      ]
    },
    {
      "pos": [
        11055,
        11368
      ],
      "content": "Querying a dynamic management view requires **VIEW DATABASE STATE**\npermissions. To grant the **VIEW DATABASE STATE** permission to a\nspecific database user, connect to the database you want to manage\nwith your server-level principle login and execute the following\nstatement against the database:",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Querying a dynamic management view requires <bpt id=\"p1\">**</bpt>VIEW DATABASE STATE<ept id=\"p1\">**</ept>",
          "pos": [
            0,
            67
          ]
        },
        {
          "content": "permissions. To grant the **VIEW DATABASE STATE** permission to a",
          "pos": [
            68,
            133
          ],
          "nodes": [
            {
              "content": "permissions.",
              "pos": [
                0,
                12
              ]
            },
            {
              "content": "To grant the <bpt id=\"p1\">**</bpt>VIEW DATABASE STATE<ept id=\"p1\">**</ept> permission to a",
              "pos": [
                13,
                65
              ]
            }
          ]
        },
        {
          "content": "specific database user, connect to the database you want to manage",
          "pos": [
            134,
            200
          ]
        },
        {
          "content": "with your server-level principle login and execute the following",
          "pos": [
            201,
            265
          ]
        },
        {
          "content": "statement against the database:",
          "pos": [
            266,
            297
          ]
        }
      ]
    },
    {
      "pos": [
        11424,
        11748
      ],
      "content": "Calculate database size using the **sys.dm\\_db\\_partition\\_stats**\nview. The **sys.dm\\_db\\_partition\\_stats** view returns page and\nrow-count information for every partition in the database, which you\ncan use to calculate the database size. The following query returns\nthe size of your database in megabytes:",
      "leadings": [
        "",
        "    ",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Calculate database size using the <bpt id=\"p1\">**</bpt>sys.dm\\_db\\_partition\\_stats<ept id=\"p1\">**</ept>",
          "pos": [
            0,
            66
          ]
        },
        {
          "content": "view. The **sys.dm\\_db\\_partition\\_stats** view returns page and",
          "pos": [
            67,
            131
          ],
          "nodes": [
            {
              "content": "view.",
              "pos": [
                0,
                5
              ]
            },
            {
              "content": "The <bpt id=\"p1\">**</bpt>sys.dm\\_db\\_partition\\_stats<ept id=\"p1\">**</ept> view returns page and",
              "pos": [
                6,
                64
              ]
            }
          ]
        },
        {
          "content": "row-count information for every partition in the database, which you",
          "pos": [
            132,
            200
          ]
        },
        {
          "content": "can use to calculate the database size. The following query returns",
          "pos": [
            201,
            268
          ],
          "nodes": [
            {
              "content": "can use to calculate the database size.",
              "pos": [
                0,
                39
              ]
            },
            {
              "content": "The following query returns",
              "pos": [
                40,
                67
              ]
            }
          ]
        },
        {
          "content": "the size of your database in megabytes:",
          "pos": [
            269,
            308
          ]
        }
      ]
    },
    {
      "pos": [
        11847,
        12107
      ],
      "content": "Use the **sys.dm\\_exec\\_connections** and **sys.dm\\_exec\\_sessions**\nviews to retrieve information about current user connections and\ninternal tasks associated with the database. The following query\nreturns information about the current connection:",
      "leadings": [
        "",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>sys.dm\\_exec\\_connections<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>sys.dm\\_exec\\_sessions<ept id=\"p2\">**</ept>",
          "pos": [
            0,
            68
          ]
        },
        {
          "content": "views to retrieve information about current user connections and",
          "pos": [
            69,
            133
          ]
        },
        {
          "content": "internal tasks associated with the database. The following query",
          "pos": [
            134,
            198
          ],
          "nodes": [
            {
              "content": "internal tasks associated with the database.",
              "pos": [
                0,
                44
              ]
            },
            {
              "content": "The following query",
              "pos": [
                45,
                64
              ]
            }
          ]
        },
        {
          "content": "returns information about the current connection:",
          "pos": [
            199,
            248
          ]
        }
      ]
    },
    {
      "pos": [
        12413,
        12632
      ],
      "content": "Use the **sys.dm\\_exec\\_query\\_stats** view to retrieve aggregate\nperformance statistics for cached query plans. The following query\nreturns information about the top five queries ranked by average CPU\ntime.",
      "leadings": [
        "",
        "    ",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Use the <bpt id=\"p1\">**</bpt>sys.dm\\_exec\\_query\\_stats<ept id=\"p1\">**</ept> view to retrieve aggregate",
          "pos": [
            0,
            65
          ]
        },
        {
          "content": "performance statistics for cached query plans. The following query",
          "pos": [
            66,
            132
          ],
          "nodes": [
            {
              "content": "performance statistics for cached query plans.",
              "pos": [
                0,
                46
              ]
            },
            {
              "content": "The following query",
              "pos": [
                47,
                66
              ]
            }
          ]
        },
        {
          "content": "returns information about the top five queries ranked by average CPU",
          "pos": [
            133,
            201
          ]
        },
        {
          "content": "time.",
          "pos": [
            202,
            207
          ]
        }
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Manage a SQL Database with SSMS | Microsoft Azure\" \n    description=\"Learn how to use SQL Server Management Studio to manage SQL Database servers and databases.\" \n    services=\"sql-database\" \n    documentationCenter=\".net\" \n    authors=\"jeffgoll\" \n    manager=\"jeffreyg\" \n    editor=\"tysonn\"/>\n\n<tags \n    ms.service=\"sql-database\" \n    ms.workload=\"data-management\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"07/07/2015\" \n    ms.author=\"jeffreyg\"/>\n\n\n# Managing Azure SQL Database using SQL Server Management Studio \n\nYou can use SQL Server Management Studio (SSMS) to administer Azure SQL Database logical servers and databases. This topic walks you through common tasks with SSMS. You should already have a logical server and database created in Azure SQL Database before you begin. To get started, read [Create your first Azure SQL Database](sql-database-get-started.md) and then come back.\n\nIt's recommended that you use the latest version of SSMS whenever you work with Azure SQL Database. Visit [Download SQL Server Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) to get it. \n\n\n## Connect to a SQL Database logical server\n\nConnecting to SQL Database requires that you know the server name on Azure. You might need to sign in to the portal to get this information.\n\n1.  Sign in to the [Azure Management Portal](http://manage.windowsazure.com).\n\n2.  In the left pane, click **SQL Databases**.\n\n3.  On the SQL Databases home page, click **SERVERS** at the top of the page to list all of the servers associated with your subscription. Find the name of the server to which you want to connect and copy it to the clipboard.\n\n    Next, configure your SQL Database firewall to\nallow connections from your local machine. You do this by adding your local machines IP address to the firewall exception list.\n\n1.  On SQL Databases home page, click **SERVERS** and then click the server to which you want to connect.\n\n2.  Click **Configure** at the top of the page.\n\n3.  Copy the IP address in CURRENT CLIENT IP ADDRESS.\n\n4.  In the Configure page, **Allowed IP Addresses** includes three boxes where you can specify a rule name and a range of IP addresses as starting and ending values. For a rule name, you might enter the name of your computer. For the start and end range, paste in the IP address of your computer into both boxes, and then click the checkbox that appears.\n\n    The rule name must be unique. If this is your development computer, you can enter the IP address in both the IP range start box and the IP range end box. Otherwise, you might need to enter a broader range of IP addresses to accommodate connections from additional computers in your organization.\n \n5. Click **SAVE** at the bottom of the page.\n\n    **Note:** There can be up as much as a five-minute delay for changes\n    to the firewall settings to take effect.\n\n    You are now ready to connect to SQL Database using Management Studio.\n\n1.  On the taskbar, click **Start**, point to **All Programs**, point to\n    **Microsoft SQL Server 2014**, and then click **SQL Server\n    Management Studio**.\n\n2.  In **Connect to Server**, specify the fully-qualified\n    server name  as *serverName*.database.windows.net. On Azure, the server name is an autogenerated string composed of alphanumeric characters.\n\n3.  Select **SQL Server Authentication**.\n\n4.  In the **Login** box, enter the SQL Server administrator login that you\n    specified in the portal when you created  your server.\n\n5.  In the **Password** box, enter the password that you specified in\n    the portal when you created  your server.\n\n8.  Click **Connect** to establish the connection.\n\nSQL Server 2014 SSMS with the latest updates offers expanded support for tasks like\ncreating and modifying Azure SQL databases. In addition, you can also use\nTransact-SQL statements to accomplish these tasks. The steps below\nprovide examples of these statements. For more information about using\nTransact-SQL with SQL Database, including details about which commands are\nsupported, see [Transact-SQL Reference (SQL Database)](http://msdn.microsoft.com/library/bb510741.aspx).\n\n## Create and manage Azure SQL databases\n\nWhile connected to the **master** database, you can create new\ndatabases on the server and modify or drop existing databases. The steps\nbelow describe how to accomplish several common database management\ntasks through Management Studio. To perform these tasks, make sure you are connected to the\n**master** database with the server-level principal login that you\ncreated when you set up your server.\n\nTo open a query window in Management Studio, open the Databases folder, expand the **System Databases** folder, right-click on **master**, and then click **New Query**.\n\n-   Use the **CREATE DATABASE** statement to create a new database. For\n    more information, see [CREATE DATABASE (SQL Database)](https://msdn.microsoft.com/library/dn268335.aspx). The statement below creates a new database named **myTestDB** and specifies that it is a Standard S0 Edition database with a default maximum size of 250GB.\n\n        CREATE DATABASE myTestDB\n        (EDITION='Standard',\n         SERVICE_OBJECTIVE='S0');\n\nClick **Execute** to run the query.\n\n-   Use the **ALTER DATABASE** statement to modify an existing database,\n    for example if you want to change the name and edition\n    of the database. For more information, see [ALTER DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms174269.aspx). The\n    statement below modifies the database you created in the previous\n    step to change edition to Standard S1.\n\n        ALTER DATABASE myTestDB\n        MODIFY\n        (SERVICE_OBJECTIVE='S1');\n\n-   Use **the DROP DATABASE** Statement to delete an existing database.\n    For more information, see [DROP DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms178613.aspx). The statement below deletes the **myTestDB** database, but don't drop it now because you will use it create logins in the next step.\n\n        DROP DATABASE myTestBase;\n\n-   The master database has the **sys.databases** view that you can use\n    to view details about all databases. To view all existing databases,\n    execute the following statement:\n\n        SELECT * FROM sys.databases;\n\n-   In SQL Database, the **USE** statement is not supported for switching\n    between databases. Instead, you need to establish a connection\n    directly to the target database.\n\n>[AZURE.NOTE] Many of the Transact-SQL statements that create or modify a database must be run within their own batch and cannot be grouped with other Transact-SQL statements. For more information, see the statement-specific information available from the links listed above.\n\n## Create and manage logins\n\nThe **master** database keeps track of logins and which logins have\npermission to create databases or other logins. Manage logins by\nconnecting to the **master** database with the server-level principal\nlogin that you created when you set up your server. You can use the\n**CREATE LOGIN**, **ALTER LOGIN**, or **DROP LOGIN** statements to\nexecute queries against the master database that will manage logins\nacross the entire server. For more information, see [Managing Databases and Logins in SQL Database](http://msdn.microsoft.com/library/azure/ee336235.aspx). \n\n\n-   Use the **CREATE LOGIN** statement to create a new server-level\n    login. For more information, see [CREATE LOGIN (SQL Database)](https://msdn.microsoft.com/library/ms189751.aspx). The statement below creates a new login\n    called **login1**. Replace **password1** with the password of your\n    choice.\n\n        CREATE LOGIN login1 WITH password='password1';\n\n-   Use the **CREATE USER** statement to grant database-level\n    permissions. All logins must be created in the **master** database,\n    but for a login to connect to a different database, you\n    must grant it database-level permissions using the **CREATE USER**\n    statement on that database. For more information, see [CREATE USER (SQL Database)](https://msdn.microsoft.com/library/ms173463.aspx). \n\n-   To give login1\n    permissions to a database called **myTestDB**, complete the following\n    steps:\n\n 1.  To refresh Object Explorer to view the **myTestDB** database that you just created, right-click the server name in Object Explorer and then click **Refresh**.  \n\n     If you closed the connection, you can reconnect by selecting **Connect Object Explorer** on the File menu.\n\n 2. Right-click **myTestDB** database and select **New Query**.\n\n    3.  Execute the following statement against the myTestDB database to\n        create a database user named **login1User** that corresponds to\n        the server-level login **login1**.\n\n            CREATE USER login1User FROM LOGIN login1;\n\n-   Use the **sp\\_addrolemember** stored procedure to give the user\n    account the appropriate level of permissions on the database. For\n    more information, see [sp_addrolemember (Transact-SQL)](http://msdn.microsoft.com/library/ms187750.aspx). The statement below gives **login1User**\n    read-only permissions to the database by adding **login1User** to\n    the **db\\_datareader** role.\n\n        exec sp_addrolemember 'db_datareader', 'login1User';    \n\n-   Use the **ALTER LOGIN** statement to modify an existing login, for\n    example if you want to change the password for the login. For\n    more information, see [ALTER LOGIN (SQL Database)](https://msdn.microsoft.com/library/ms189828.aspx). The **ALTER LOGIN** statement should be run against the **master** database. Switch back to the query window that is connected to that database. \n\n    The statement below modifies the **login1** login to reset the password.\n    Replace **newPassword** with the password of your choice, and\n    **oldPassword** with the current password for the login.\n\n        ALTER LOGIN login1\n        WITH PASSWORD = 'newPassword'\n        OLD_PASSWORD = 'oldPassword';\n\n-   Use **the DROP LOGIN** statement to delete an existing login.\n    Deleting a login at the server level also deletes any associated\n    database user accounts. For more information,\n    see [DROP DATABASE (SQL Database)](https://msdn.microsoft.com/library/ms178613.aspx). The **DROP LOGIN**\n    statement should be run against the **master** database. The\n    statement below deletes the **login1** login.\n\n        DROP LOGIN login1;\n\n-   The master database has the **sys.sql\\_logins** view that you can\n    use to view logins. To view all existing logins, execute the\n    following statement:\n\n        SELECT * FROM sys.sql_logins;\n\n## Monitor SQL Database using Dynamic Management Views</h2>\n\nSQL Database supports several dynamic management views that you\ncan use to monitor an individual database. Below are a few examples of\nthe type of monitor data you can retrieve through these views. For\ncomplete details and more usage examples, see [Monitoring SQL Database using Dynamic Management Views](https://msdn.microsoft.com/library/azure/ff394114.aspx).\n\n-   Querying a dynamic management view requires **VIEW DATABASE STATE**\n    permissions. To grant the **VIEW DATABASE STATE** permission to a\n    specific database user, connect to the database you want to manage\n    with your server-level principle login and execute the following\n    statement against the database:\n\n        GRANT VIEW DATABASE STATE TO login1User;\n\n-   Calculate database size using the **sys.dm\\_db\\_partition\\_stats**\n    view. The **sys.dm\\_db\\_partition\\_stats** view returns page and\n    row-count information for every partition in the database, which you\n    can use to calculate the database size. The following query returns\n    the size of your database in megabytes:\n\n        SELECT SUM(reserved_page_count)*8.0/1024\n        FROM sys.dm_db_partition_stats;   \n\n-   Use the **sys.dm\\_exec\\_connections** and **sys.dm\\_exec\\_sessions**\n    views to retrieve information about current user connections and\n    internal tasks associated with the database. The following query\n    returns information about the current connection:\n\n        SELECT\n            e.connection_id,\n            s.session_id,\n            s.login_name,\n            s.last_request_end_time,\n            s.cpu_time\n        FROM\n            sys.dm_exec_sessions s\n            INNER JOIN sys.dm_exec_connections e\n              ON s.session_id = e.session_id;\n\n-   Use the **sys.dm\\_exec\\_query\\_stats** view to retrieve aggregate\n    performance statistics for cached query plans. The following query\n    returns information about the top five queries ranked by average CPU\n    time.\n\n        SELECT TOP 5 query_stats.query_hash AS \"Query Hash\",\n            SUM(query_stats.total_worker_time), SUM(query_stats.execution_count) AS \"Avg CPU Time\",\n            MIN(query_stats.statement_text) AS \"Statement Text\"\n        FROM\n            (SELECT QS.*,\n            SUBSTRING(ST.text, (QS.statement_start_offset/2) + 1,\n            ((CASE statement_end_offset\n                WHEN -1 THEN DATALENGTH(ST.text)\n                ELSE QS.statement_end_offset END\n                    - QS.statement_start_offset)/2) + 1) AS statement_text\n             FROM sys.dm_exec_query_stats AS QS\n             CROSS APPLY sys.dm_exec_sql_text(QS.sql_handle) as ST) as query_stats\n        GROUP BY query_stats.query_hash\n        ORDER BY 2 DESC;\n \n \n"
}