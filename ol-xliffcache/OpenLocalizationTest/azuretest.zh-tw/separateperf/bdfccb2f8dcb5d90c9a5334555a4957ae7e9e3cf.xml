{
  "nodes": [
    {
      "content": "Application Insights for JavaScript web apps | Microsoft Azure",
      "pos": [
        27,
        89
      ]
    },
    {
      "content": "Get page view and session counts, web client data, and track usage patterns.",
      "pos": [
        108,
        184
      ]
    },
    {
      "content": "Detect exceptions and performance issues in JavaScript web pages.",
      "pos": [
        185,
        250
      ]
    },
    {
      "content": "Application Insights for JavaScript web apps",
      "pos": [
        569,
        613
      ]
    },
    {
      "content": "Find out about the performance and usage of your web page.",
      "pos": [
        721,
        779
      ]
    },
    {
      "content": "Add Visual Studio Application Insights to your page, and you'll find out how many users you have, how often they come back, and which pages they use most.",
      "pos": [
        780,
        934
      ]
    },
    {
      "content": "You'll also get reports of load times and any exceptions.",
      "pos": [
        935,
        992
      ]
    },
    {
      "content": "Add a few [custom events and metrics][track], and you can analyze in detail the most popular features, the most common mistakes, and tune your page to success with your users.",
      "pos": [
        993,
        1168
      ]
    },
    {
      "content": "Choose New, Developer Services, Application Insights.",
      "pos": [
        1172,
        1225
      ]
    },
    {
      "content": "If you already set up server telemetry for your [ASP.NET][greenbrown] or [Java][java] web app, you'll get the picture from both client and server angles.",
      "pos": [
        1279,
        1432
      ]
    },
    {
      "content": "The two streams will be integrated in the Application Insights portal.",
      "pos": [
        1433,
        1503
      ]
    },
    {
      "content": "Quick demo",
      "pos": [
        1510,
        1520
      ]
    },
    {
      "pos": [
        1522,
        1677
      ],
      "content": "If you don't have an Azure subscription and would like to try Application Insights on your web page, visit <bpt id=\"p1\">[</bpt>Try Application Insights<ept id=\"p1\">](http://aka.ms/ainow)</ept>."
    },
    {
      "content": "Create an Application Insights resource",
      "pos": [
        1682,
        1721
      ]
    },
    {
      "content": "The Application Insights resource is where data about your page's performance and usage is displayed.",
      "pos": [
        1723,
        1824
      ]
    },
    {
      "content": "(If you already created a resource, maybe to collect data from your web server, skip this step.)",
      "pos": [
        1825,
        1921
      ]
    },
    {
      "pos": [
        1923,
        2014
      ],
      "content": "In the <bpt id=\"p1\">[</bpt>Azure portal<ept id=\"p1\">](http://portal.azure.com)</ept>, create a new Application Insights resource:"
    },
    {
      "content": "Choose New, Developer Services, Application Insights.",
      "pos": [
        2018,
        2071
      ]
    },
    {
      "pos": [
        2121,
        2180
      ],
      "content": "<bpt id=\"p1\">*</bpt>Questions already?<ept id=\"p1\">*</ept> [More about creating a resource][new]."
    },
    {
      "content": "Add the SDK script to your app or web pages",
      "pos": [
        2186,
        2229
      ]
    },
    {
      "content": "In Quick Start, get the script for web pages:",
      "pos": [
        2231,
        2276
      ]
    },
    {
      "content": "On your app overview blade, choose Quick Start, Get code to monitor my web pages.",
      "pos": [
        2280,
        2361
      ]
    },
    {
      "content": "Copy the script.",
      "pos": [
        2362,
        2378
      ]
    },
    {
      "content": "Insert the script just before the &amp;lt;/head&amp;gt; tag of every page you want to track.",
      "pos": [
        2438,
        2522
      ]
    },
    {
      "content": "If your website has a master page, you can put the script there.",
      "pos": [
        2523,
        2587
      ]
    },
    {
      "content": "For example:",
      "pos": [
        2588,
        2600
      ]
    },
    {
      "content": "In an ASP.NET MVC project, you'd put it in View\\Shared\\\\_Layout.cshtml",
      "pos": [
        2604,
        2674
      ]
    },
    {
      "pos": [
        2677,
        2784
      ],
      "content": "In a SharePoint site, on the control panel, open <bpt id=\"p1\">[</bpt>Site Settings / Master Page<ept id=\"p1\">](app-insights-sharepoint.md)</ept>."
    },
    {
      "content": "The script contains the instrumentation key that directs the data to your Application Insights resource.",
      "pos": [
        2786,
        2890
      ]
    },
    {
      "content": "(If you're using a well-known web page framework, look around for Application Insights adaptors.",
      "pos": [
        2893,
        2989
      ]
    },
    {
      "content": "For example, there's <bpt id=\"p1\">[</bpt>an AngularJS module<ept id=\"p1\">](http://ngmodules.org/modules/angular-appinsights)</ept>.)",
      "pos": [
        2990,
        3084
      ]
    },
    {
      "pos": [
        3091,
        3121
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"run\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Run your app"
    },
    {
      "content": "Run your web app, use it a while to generate telemetry, and wait a few seconds.",
      "pos": [
        3123,
        3202
      ]
    },
    {
      "content": "You can either run it using the  <bpt id=\"p1\">**</bpt>F5<ept id=\"p1\">**</ept> key on your development machine, or publish it and let users play with it.",
      "pos": [
        3203,
        3317
      ]
    },
    {
      "content": "If you want to check the telemetry that a web app is sending to Application Insights, use your browser's debugging tools (<bpt id=\"p1\">**</bpt>F12<ept id=\"p1\">**</ept> on many browsers).",
      "pos": [
        3319,
        3467
      ]
    },
    {
      "content": "Data is sent to dc.services.visualstudio.com.",
      "pos": [
        3468,
        3513
      ]
    },
    {
      "content": "Explore your data",
      "pos": [
        3518,
        3535
      ]
    },
    {
      "content": "In the application overview blade, there's a chart near the top that shows average time to load pages into the browser:",
      "pos": [
        3537,
        3656
      ]
    },
    {
      "content": "No data yet?",
      "pos": [
        3724,
        3736
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept> at the top of the page.",
      "pos": [
        3737,
        3778
      ]
    },
    {
      "content": "Still nothing?",
      "pos": [
        3779,
        3793
      ]
    },
    {
      "content": "See [Troubleshooting][qna].",
      "pos": [
        3794,
        3821
      ]
    },
    {
      "content": "Click that chart, and you get a more detailed version:",
      "pos": [
        3824,
        3878
      ]
    },
    {
      "pos": [
        3937,
        4100
      ],
      "content": "This is a stacked chart which breaks the total page load time into the <bpt id=\"p1\">[</bpt>standard timings defined by W3C<ept id=\"p1\">](http://www.w3.org/TR/navigation-timing/#processing-model)</ept>."
    },
    {
      "content": "Note that the <bpt id=\"p1\">*</bpt>network connect<ept id=\"p1\">*</ept> time is usually lower than you might expect, because it's an average over all requests from the browser to the server.",
      "pos": [
        4160,
        4310
      ]
    },
    {
      "content": "Many individual requests have a connect time of 0 because there is already an active connection to the server.",
      "pos": [
        4311,
        4421
      ]
    },
    {
      "content": "Performance by page",
      "pos": [
        4428,
        4447
      ]
    },
    {
      "content": "Further down in the details blade, there's a grid segmented by page URL:",
      "pos": [
        4449,
        4521
      ]
    },
    {
      "content": "If you'd like to see the performance of the pages over time, double-click the grid and change its chart type:",
      "pos": [
        4579,
        4688
      ]
    },
    {
      "content": "Client usage overview",
      "pos": [
        4753,
        4774
      ]
    },
    {
      "pos": [
        4776,
        4820
      ],
      "content": "Back on the overview blade, click <bpt id=\"p1\">**</bpt>Usage<ept id=\"p1\">**</ept>:"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Users:<ept id=\"p1\">**</ept> The count of distinct users over the time range of the chart.",
      "pos": [
        4875,
        4947
      ]
    },
    {
      "content": "(Cookies are used to identify returning users.)",
      "pos": [
        4948,
        4995
      ]
    },
    {
      "pos": [
        4998,
        5086
      ],
      "content": "<bpt id=\"p1\">**</bpt>Sessions:<ept id=\"p1\">**</ept> A session is counted when a user has not made any requests for 30 minutes."
    },
    {
      "pos": [
        5089,
        5190
      ],
      "content": "<bpt id=\"p1\">**</bpt>Page views<ept id=\"p1\">**</ept> Counts the number of calls to trackPageView(), typically called once in each web page."
    },
    {
      "content": "Click through to more detail",
      "pos": [
        5197,
        5225
      ]
    },
    {
      "content": "Click any of the charts to see more detail.",
      "pos": [
        5227,
        5270
      ]
    },
    {
      "content": "Notice that you can change the time range of the charts.",
      "pos": [
        5271,
        5327
      ]
    },
    {
      "content": "Click a chart to see other metrics that you can display, or add a new chart and select the metrics it displays.",
      "pos": [
        5392,
        5503
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Metrics can only be displayed in some combinations.",
      "pos": [
        5575,
        5639
      ]
    },
    {
      "content": "When you select a metric, the incompatible ones are disabled.",
      "pos": [
        5640,
        5701
      ]
    },
    {
      "content": "Custom page counts",
      "pos": [
        5708,
        5726
      ]
    },
    {
      "content": "By default, a page count occurs each time a new page loads into the client browser.",
      "pos": [
        5728,
        5811
      ]
    },
    {
      "content": "But you might want to count additional page views.",
      "pos": [
        5813,
        5863
      ]
    },
    {
      "content": "For example, a page might display its content in tabs and you want to count a page when the user switches tabs.",
      "pos": [
        5864,
        5975
      ]
    },
    {
      "content": "Or JavaScript code in the page might load new content without changing the browser's URL.",
      "pos": [
        5976,
        6065
      ]
    },
    {
      "content": "Insert a JavaScript call like this at the appropriate point in your client code:",
      "pos": [
        6067,
        6147
      ]
    },
    {
      "content": "The page name can contain the same characters as a URL, but anything after \"#\" or \"?\" will be ignored.",
      "pos": [
        6193,
        6295
      ]
    },
    {
      "content": "Inspect individual page view events",
      "pos": [
        6301,
        6336
      ]
    },
    {
      "content": "Usually page view telemetry is analyzed by Application Insights and you see only cumulative reports, averaged over all your users.",
      "pos": [
        6338,
        6468
      ]
    },
    {
      "content": "But for debugging purposes, you can also look at individual page view events.",
      "pos": [
        6469,
        6546
      ]
    },
    {
      "content": "In the Diagnostic Search blade, set Filters to Page View.",
      "pos": [
        6548,
        6605
      ]
    },
    {
      "content": "Select any event to see more detail.",
      "pos": [
        6665,
        6701
      ]
    },
    {
      "content": "In the details page, click \"...\"",
      "pos": [
        6702,
        6734
      ]
    },
    {
      "content": "to see even more detail.",
      "pos": [
        6735,
        6759
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you use [Search][diagnostic], notice that you have to match whole words: \"Abou\" and \"bout\" do not match \"About\", but \"Abou* \" does.",
      "pos": [
        6763,
        6910
      ]
    },
    {
      "content": "And you cannot begin a search term with a wildcard.",
      "pos": [
        6911,
        6962
      ]
    },
    {
      "content": "For example, searching for \"*bou\" would not match \"About\".",
      "pos": [
        6963,
        7021
      ]
    },
    {
      "content": "[Learn more about diagnostic search][diagnostic]",
      "pos": [
        7025,
        7073
      ]
    },
    {
      "content": "Page view properties",
      "pos": [
        7079,
        7099
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Page view duration<ept id=\"p1\">**</ept>&amp;#151;The time it takes to load the page and start running scripts.",
      "pos": [
        7103,
        7192
      ]
    },
    {
      "content": "Specifically, the interval between starting to load the page and execution of the trackPageView.",
      "pos": [
        7193,
        7289
      ]
    },
    {
      "content": "If you moved trackPageView from its usual position after the initialization of the script, it will reflect a different value.",
      "pos": [
        7290,
        7415
      ]
    },
    {
      "content": "Custom usage tracking",
      "pos": [
        7420,
        7441
      ]
    },
    {
      "content": "Want to find out what your users do with your app?",
      "pos": [
        7443,
        7493
      ]
    },
    {
      "content": "By inserting calls in your client and server code, you can send your own telemetry to Application Insights.",
      "pos": [
        7494,
        7601
      ]
    },
    {
      "content": "For example, you can find out the numbers of users who create orders without completing them, or which validation errors are hit most often, or the average score in a game.",
      "pos": [
        7602,
        7774
      ]
    },
    {
      "content": "[Learn about the custom events and metrics API][track].",
      "pos": [
        7778,
        7833
      ]
    },
    {
      "content": "API reference",
      "pos": [
        7837,
        7850
      ]
    },
    {
      "content": "Server telemetry",
      "pos": [
        7938,
        7954
      ]
    },
    {
      "content": "If you haven't done this yet, you can get insights from your server and display the data along with your client-side data, enabling you to assess performance at the server and diagnose any issues.",
      "pos": [
        7956,
        8152
      ]
    },
    {
      "content": "[Add Application Insights to an ASP.NET app][greenbrown]",
      "pos": [
        8156,
        8212
      ]
    },
    {
      "content": "[Add Application Insights to a Java web app][java]",
      "pos": [
        8215,
        8265
      ]
    },
    {
      "pos": [
        8271,
        8313
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"video\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> Video: Tracking Usage"
    },
    {
      "pos": [
        8376,
        8406
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"next\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph> Next steps"
    },
    {
      "content": "[Track usage with custom events and metrics][track]",
      "pos": [
        8408,
        8459
      ]
    },
    {
      "content": "test",
      "pos": [
        8776,
        8780
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Application Insights for JavaScript web apps | Microsoft Azure\"\n    description=\"Get page view and session counts, web client data, and track usage patterns. Detect exceptions and performance issues in JavaScript web pages.\"\n    services=\"application-insights\"\n    documentationCenter=\"\"\n    authors=\"alancameronwills\"\n    manager=\"douge\"/>\n\n<tags\n    ms.service=\"application-insights\"\n    ms.workload=\"tbd\"\n    ms.tgt_pltfrm=\"ibiza\"\n    ms.devlang=\"na\"\n    ms.topic=\"get-started-article\"\n    ms.date=\"07/10/2015\"\n    ms.author=\"awills\"/>\n\n# Application Insights for JavaScript web apps\n\n[AZURE.INCLUDE [app-insights-selector-get-started](../../includes/app-insights-selector-get-started.md)]\n\nFind out about the performance and usage of your web page. Add Visual Studio Application Insights to your page, and you'll find out how many users you have, how often they come back, and which pages they use most. You'll also get reports of load times and any exceptions. Add a few [custom events and metrics][track], and you can analyze in detail the most popular features, the most common mistakes, and tune your page to success with your users.\n\n![Choose New, Developer Services, Application Insights.](./media/app-insights-javascript/16-page-views.png)\n\nIf you already set up server telemetry for your [ASP.NET][greenbrown] or [Java][java] web app, you'll get the picture from both client and server angles. The two streams will be integrated in the Application Insights portal.\n\n#### Quick demo\n\nIf you don't have an Azure subscription and would like to try Application Insights on your web page, visit [Try Application Insights](http://aka.ms/ainow).\n\n## Create an Application Insights resource\n\nThe Application Insights resource is where data about your page's performance and usage is displayed. (If you already created a resource, maybe to collect data from your web server, skip this step.)\n\nIn the [Azure portal](http://portal.azure.com), create a new Application Insights resource:\n\n![Choose New, Developer Services, Application Insights.](./media/app-insights-javascript/01-create.png)\n\n*Questions already?* [More about creating a resource][new].\n\n\n## Add the SDK script to your app or web pages\n\nIn Quick Start, get the script for web pages:\n\n![On your app overview blade, choose Quick Start, Get code to monitor my web pages. Copy the script.](./media/app-insights-javascript/02-monitor-web-page.png)\n\nInsert the script just before the &lt;/head&gt; tag of every page you want to track. If your website has a master page, you can put the script there. For example:\n\n* In an ASP.NET MVC project, you'd put it in View\\Shared\\\\_Layout.cshtml\n* In a SharePoint site, on the control panel, open [Site Settings / Master Page](app-insights-sharepoint.md).\n\nThe script contains the instrumentation key that directs the data to your Application Insights resource.\n\n*(If you're using a well-known web page framework, look around for Application Insights adaptors. For example, there's [an AngularJS module](http://ngmodules.org/modules/angular-appinsights).)*\n\n\n## <a name=\"run\"></a>Run your app\n\nRun your web app, use it a while to generate telemetry, and wait a few seconds. You can either run it using the  **F5** key on your development machine, or publish it and let users play with it.\n\nIf you want to check the telemetry that a web app is sending to Application Insights, use your browser's debugging tools (**F12** on many browsers). Data is sent to dc.services.visualstudio.com.\n\n## Explore your data\n\nIn the application overview blade, there's a chart near the top that shows average time to load pages into the browser:\n\n\n![](./media/app-insights-javascript/05-browser-page-load.png)\n\n\n*No data yet? Click **Refresh** at the top of the page. Still nothing? See [Troubleshooting][qna].*\n\nClick that chart, and you get a more detailed version:\n\n![](./media/app-insights-javascript/07-client-perf.png)\n\nThis is a stacked chart which breaks the total page load time into the [standard timings defined by W3C](http://www.w3.org/TR/navigation-timing/#processing-model).\n\n![](./media/app-insights-javascript/08-client-split.png)\n\nNote that the *network connect* time is usually lower than you might expect, because it's an average over all requests from the browser to the server. Many individual requests have a connect time of 0 because there is already an active connection to the server.\n\n\n### Performance by page\n\nFurther down in the details blade, there's a grid segmented by page URL:\n\n\n![](./media/app-insights-javascript/09-page-perf.png)\n\nIf you'd like to see the performance of the pages over time, double-click the grid and change its chart type:\n\n![](./media/app-insights-javascript/10-page-perf-area.png)\n\n## Client usage overview\n\nBack on the overview blade, click **Usage**:\n\n![](./media/app-insights-javascript/14-usage.png)\n\n* **Users:** The count of distinct users over the time range of the chart. (Cookies are used to identify returning users.)\n* **Sessions:** A session is counted when a user has not made any requests for 30 minutes.\n* **Page views** Counts the number of calls to trackPageView(), typically called once in each web page.\n\n\n### Click through to more detail\n\nClick any of the charts to see more detail. Notice that you can change the time range of the charts.\n\n![](./media/app-insights-javascript/appinsights-49usage.png)\n\n\nClick a chart to see other metrics that you can display, or add a new chart and select the metrics it displays.\n\n![](./media/app-insights-javascript/appinsights-63usermetrics.png)\n\n> [AZURE.NOTE] Metrics can only be displayed in some combinations. When you select a metric, the incompatible ones are disabled.\n\n\n\n## Custom page counts\n\nBy default, a page count occurs each time a new page loads into the client browser.  But you might want to count additional page views. For example, a page might display its content in tabs and you want to count a page when the user switches tabs. Or JavaScript code in the page might load new content without changing the browser's URL.\n\nInsert a JavaScript call like this at the appropriate point in your client code:\n\n    appInsights.trackPageView(myPageName);\n\nThe page name can contain the same characters as a URL, but anything after \"#\" or \"?\" will be ignored.\n\n\n## Inspect individual page view events\n\nUsually page view telemetry is analyzed by Application Insights and you see only cumulative reports, averaged over all your users. But for debugging purposes, you can also look at individual page view events.\n\nIn the Diagnostic Search blade, set Filters to Page View.\n\n![](./media/app-insights-javascript/12-search-pages.png)\n\nSelect any event to see more detail. In the details page, click \"...\" to see even more detail.\n\n> [AZURE.NOTE] If you use [Search][diagnostic], notice that you have to match whole words: \"Abou\" and \"bout\" do not match \"About\", but \"Abou* \" does. And you cannot begin a search term with a wildcard. For example, searching for \"*bou\" would not match \"About\".\n\n> [Learn more about diagnostic search][diagnostic]\n\n### Page view properties\n\n* **Page view duration**&#151;The time it takes to load the page and start running scripts. Specifically, the interval between starting to load the page and execution of the trackPageView. If you moved trackPageView from its usual position after the initialization of the script, it will reflect a different value.\n\n## Custom usage tracking\n\nWant to find out what your users do with your app? By inserting calls in your client and server code, you can send your own telemetry to Application Insights. For example, you can find out the numbers of users who create orders without completing them, or which validation errors are hit most often, or the average score in a game.\n\n* [Learn about the custom events and metrics API][track].\n* [API reference](https://github.com/Microsoft/ApplicationInsights-JS/blob/master/API-reference.md)\n\n## Server telemetry\n\nIf you haven't done this yet, you can get insights from your server and display the data along with your client-side data, enabling you to assess performance at the server and diagnose any issues.\n\n* [Add Application Insights to an ASP.NET app][greenbrown]\n* [Add Application Insights to a Java web app][java]\n\n\n## <a name=\"video\"></a> Video: Tracking Usage\n\n> [AZURE.VIDEO tracking-usage-with-application-insights]\n\n## <a name=\"next\"></a> Next steps\n\n[Track usage with custom events and metrics][track]\n\n\n\n\n<!--Link references-->\n\n[diagnostic]: app-insights-diagnostic-search.md\n[greenbrown]: app-insights-start-monitoring-app-health-usage.md\n[java]: app-insights-java-get-started.md\n[new]: app-insights-create-new-resource.md\n[qna]: app-insights-troubleshoot-faq.md\n[track]: app-insights-api-custom-events-metrics.md\n\ntest\n"
}