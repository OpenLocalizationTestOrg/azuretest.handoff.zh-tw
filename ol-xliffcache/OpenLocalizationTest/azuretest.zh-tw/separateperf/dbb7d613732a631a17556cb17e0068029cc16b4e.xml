{
  "nodes": [
    {
      "content": "Creating web apps with Flask in Azure",
      "pos": [
        28,
        65
      ]
    },
    {
      "content": "A tutorial that introduces you to running a Python web app on Azure.",
      "pos": [
        85,
        153
      ]
    },
    {
      "content": "Creating web apps with Flask in Azure",
      "pos": [
        495,
        532
      ]
    },
    {
      "content": "This tutorial describes how to get started running Python in <bpt id=\"p1\">[</bpt>Azure App Service Web Apps<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept>.",
      "pos": [
        534,
        671
      ]
    },
    {
      "content": "Web Apps provides limited free hosting and rapid deployment, and you can use Python!",
      "pos": [
        673,
        757
      ]
    },
    {
      "content": "As your app grows, you can switch to paid hosting, and you can also integrate with all of the other Azure services.",
      "pos": [
        759,
        874
      ]
    },
    {
      "content": "You will create an application using the Flask web framework (see alternate versions of this tutorial for <bpt id=\"p1\">[</bpt>Django<ept id=\"p1\">](web-sites-python-create-deploy-django-app.md)</ept> and <bpt id=\"p2\">[</bpt>Bottle<ept id=\"p2\">](web-sites-python-create-deploy-bottle-app.md)</ept>).",
      "pos": [
        876,
        1097
      ]
    },
    {
      "content": "You will create the website from the Azure gallery, set up Git deployment, and clone the repository locally.",
      "pos": [
        1099,
        1207
      ]
    },
    {
      "content": "Then you will run the application locally, make changes, commit and push them to Azure.",
      "pos": [
        1209,
        1296
      ]
    },
    {
      "content": "The tutorial shows how to do this from Windows or Mac/Linux.",
      "pos": [
        1298,
        1358
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> If you want to get started with Azure App Service before signing up for an Azure account, go to <bpt id=\"p1\">[</bpt>Try App Service<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=523751)</ept>, where you can immediately create a short-lived starter web app in App Service.",
      "pos": [
        1465,
        1718
      ]
    },
    {
      "content": "No credit cards required; no commitments.",
      "pos": [
        1719,
        1760
      ]
    },
    {
      "content": "Prerequisites",
      "pos": [
        1765,
        1778
      ]
    },
    {
      "content": "Windows, Mac or Linux",
      "pos": [
        1782,
        1803
      ]
    },
    {
      "content": "Python 2.7 or 3.4",
      "pos": [
        1806,
        1823
      ]
    },
    {
      "content": "setuptools, pip, virtualenv (Python 2.7 only)",
      "pos": [
        1826,
        1871
      ]
    },
    {
      "content": "Git",
      "pos": [
        1874,
        1877
      ]
    },
    {
      "pos": [
        1880,
        1946
      ],
      "content": "<bpt id=\"p1\">[</bpt>Python Tools for Visual Studio<ept id=\"p1\">][]</ept> (PTVS) - Note: this is optional"
    },
    {
      "pos": [
        1948,
        2020
      ],
      "content": "<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>: TFS publishing is currently not supported for Python projects."
    },
    {
      "content": "Windows",
      "pos": [
        2026,
        2033
      ]
    },
    {
      "content": "If you don't already have Python 2.7 or 3.4 installed (32-bit), we recommend installing <bpt id=\"p1\">[</bpt><ept id=\"p1\">Azure SDK for Python 2.7]</ept> or <bpt id=\"p2\">[</bpt><ept id=\"p2\">Azure SDK for Python 3.4]</ept> using Web Platform Installer.",
      "pos": [
        2035,
        2209
      ]
    },
    {
      "content": "This installs the 32-bit version of Python, setuptools, pip, virtualenv, etc (32-bit Python is what's installed on the Azure host machines).",
      "pos": [
        2211,
        2351
      ]
    },
    {
      "content": "Alternatively, you can get Python from <bpt id=\"p1\">[</bpt><ept id=\"p1\">python.org]</ept>.",
      "pos": [
        2353,
        2405
      ]
    },
    {
      "content": "For Git, we recommend <bpt id=\"p1\">[</bpt><ept id=\"p1\">Git for Windows]</ept> or <bpt id=\"p2\">[</bpt><ept id=\"p2\">GitHub for Windows]</ept>.",
      "pos": [
        2407,
        2471
      ]
    },
    {
      "content": "If you use Visual Studio, you can use the integrated Git support.",
      "pos": [
        2473,
        2538
      ]
    },
    {
      "content": "We also recommend installing <bpt id=\"p1\">[</bpt><ept id=\"p1\">Python Tools 2.2 for Visual Studio]</ept>.",
      "pos": [
        2540,
        2606
      ]
    },
    {
      "content": "This is optional, but if you have <bpt id=\"p1\">[</bpt><ept id=\"p1\">Visual Studio]</ept>, including the free Visual Studio Community 2013 or Visual Studio Express 2013 for Web, then this will give you a great Python IDE.",
      "pos": [
        2608,
        2789
      ]
    },
    {
      "content": "Mac/Linux",
      "pos": [
        2795,
        2804
      ]
    },
    {
      "content": "You should have Python and Git already installed, but make sure you have either Python 2.7 or 3.4.",
      "pos": [
        2806,
        2904
      ]
    },
    {
      "content": "Web app create on the Azure Portal",
      "pos": [
        2910,
        2944
      ]
    },
    {
      "pos": [
        2946,
        3056
      ],
      "content": "The first step in creating your app is to create the web app via the <bpt id=\"p1\">[</bpt>Azure Portal<ept id=\"p1\">](https://portal.azure.com)</ept>."
    },
    {
      "pos": [
        3062,
        3143
      ],
      "content": "Log into the Azure Portal and click the <bpt id=\"p1\">**</bpt>NEW<ept id=\"p1\">**</ept> button in the bottom left corner."
    },
    {
      "pos": [
        3148,
        3210
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Web + Mobile<ept id=\"p1\">**</ept> &gt; <bpt id=\"p2\">**</bpt>Azure Marketplace<ept id=\"p2\">**</ept> &gt; <bpt id=\"p3\">**</bpt>Web Apps<ept id=\"p3\">**</ept>."
    },
    {
      "content": "In the search box, type \"python\".",
      "pos": [
        3214,
        3247
      ]
    },
    {
      "pos": [
        3251,
        3314
      ],
      "content": "In the search results, select <bpt id=\"p1\">**</bpt>Flask<ept id=\"p1\">**</ept>, then click <bpt id=\"p2\">**</bpt>Create<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Configure the new Flask app, such as creating a new App Service plan and a new resource group for it.",
      "pos": [
        3318,
        3419
      ]
    },
    {
      "content": "Then, click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>.",
      "pos": [
        3420,
        3443
      ]
    },
    {
      "pos": [
        3447,
        3628
      ],
      "content": "Configure Git publishing for your newly created web app by following the instructions at <bpt id=\"p1\">[</bpt>Continuous deployment using GIT in Azure App Service<ept id=\"p1\">](web-sites-publish-source-control.md)</ept>."
    },
    {
      "content": "Application Overview",
      "pos": [
        3634,
        3654
      ]
    },
    {
      "content": "Git repository contents",
      "pos": [
        3660,
        3683
      ]
    },
    {
      "content": "Here's an overview of the files you'll find in the initial Git repository, which we'll clone in the next section.",
      "pos": [
        3685,
        3798
      ]
    },
    {
      "content": "Main sources for the application.",
      "pos": [
        4144,
        4177
      ]
    },
    {
      "content": "Consists of 3 pages (index, about, contact) with a master layout.",
      "pos": [
        4179,
        4244
      ]
    },
    {
      "content": "Static content and scripts include bootstrap, jquery, modernizr and respond.",
      "pos": [
        4246,
        4322
      ]
    },
    {
      "content": "Local development server support.",
      "pos": [
        4343,
        4376
      ]
    },
    {
      "content": "Use this to run the application locally.",
      "pos": [
        4377,
        4417
      ]
    },
    {
      "pos": [
        4473,
        4533
      ],
      "content": "Project files for use with <bpt id=\"p1\">[</bpt><ept id=\"p1\">Python Tools for Visual Studio]</ept>."
    },
    {
      "content": "IIS proxy for virtual environments and PTVS remote debugging support.",
      "pos": [
        4566,
        4635
      ]
    },
    {
      "content": "External packages needed by this application.",
      "pos": [
        4660,
        4705
      ]
    },
    {
      "content": "The deployment script will pip install the packages listed in this file.",
      "pos": [
        4706,
        4778
      ]
    },
    {
      "content": "IIS configuration files.",
      "pos": [
        4822,
        4846
      ]
    },
    {
      "content": "The deployment script will use the appropriate web.x.y.config and copy it as web.config.",
      "pos": [
        4848,
        4936
      ]
    },
    {
      "content": "Optional files - Customizing deployment",
      "pos": [
        4942,
        4981
      ]
    },
    {
      "content": "Optional files - Python runtime",
      "pos": [
        5105,
        5136
      ]
    },
    {
      "content": "Additional files on server",
      "pos": [
        5254,
        5280
      ]
    },
    {
      "content": "Some files exist on the server but are not added to the git repository.",
      "pos": [
        5282,
        5353
      ]
    },
    {
      "content": "These are created by the deployment script.",
      "pos": [
        5355,
        5398
      ]
    },
    {
      "content": "IIS configuration file.",
      "pos": [
        5417,
        5440
      ]
    },
    {
      "content": "Created from web.x.y.config on every deployment.",
      "pos": [
        5442,
        5490
      ]
    },
    {
      "content": "Python virtual environment.",
      "pos": [
        5503,
        5530
      ]
    },
    {
      "content": "Created during deployment if a compatible virtual environment doesn't already exist on the app.",
      "pos": [
        5532,
        5627
      ]
    },
    {
      "content": "Packages listed in requirements.txt are pip installed, but pip will skip installation if the packages are already installed.",
      "pos": [
        5629,
        5753
      ]
    },
    {
      "content": "The next 3 sections describe how to proceed with the web app development under 3 different environments:",
      "pos": [
        5755,
        5859
      ]
    },
    {
      "content": "Windows, with Python Tools for Visual Studio",
      "pos": [
        5863,
        5907
      ]
    },
    {
      "content": "Windows, with command line",
      "pos": [
        5910,
        5936
      ]
    },
    {
      "content": "Mac/Linux, with command line",
      "pos": [
        5939,
        5967
      ]
    },
    {
      "content": "Web app development - Windows - Python Tools for Visual Studio",
      "pos": [
        5973,
        6035
      ]
    },
    {
      "content": "Clone the repository",
      "pos": [
        6041,
        6061
      ]
    },
    {
      "content": "First, clone the repository using the URL provided on the Azure Portal.",
      "pos": [
        6063,
        6134
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Continuous deployment using GIT in Azure App Service<ept id=\"p1\">](web-sites-publish-source-control.md)</ept>.",
      "pos": [
        6135,
        6253
      ]
    },
    {
      "content": "Open the solution file (.sln) that is included in the root of the repository.",
      "pos": [
        6255,
        6332
      ]
    },
    {
      "content": "Create virtual environment",
      "pos": [
        6417,
        6443
      ]
    },
    {
      "content": "Now we'll create a virtual environment for local development.",
      "pos": [
        6445,
        6506
      ]
    },
    {
      "content": "Right-click on <bpt id=\"p1\">**</bpt>Python Environments<ept id=\"p1\">**</ept> select <bpt id=\"p2\">**</bpt>Add Virtual Environment...<ept id=\"p2\">**</ept>.",
      "pos": [
        6508,
        6585
      ]
    },
    {
      "pos": [
        6589,
        6636
      ],
      "content": "Make sure the name of the environment is <ph id=\"ph1\">`env`</ph>."
    },
    {
      "content": "Select the base interpreter.",
      "pos": [
        6640,
        6668
      ]
    },
    {
      "content": "Make sure to use the same version of Python that is selected for your web app (in runtime.txt or the <bpt id=\"p1\">**</bpt>Application Settings<ept id=\"p1\">**</ept> blade of your web app in the Azure Portal).",
      "pos": [
        6670,
        6839
      ]
    },
    {
      "content": "Make sure the option to download and install packages is checked.",
      "pos": [
        6843,
        6908
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept>.",
      "pos": [
        6993,
        7010
      ]
    },
    {
      "content": "This will create the virtual environment, and install dependencies listed in requirements.txt.",
      "pos": [
        7012,
        7106
      ]
    },
    {
      "content": "Run using development server",
      "pos": [
        7112,
        7140
      ]
    },
    {
      "content": "Press F5 to start debugging, and your web browser will open automatically to the page running locally.",
      "pos": [
        7142,
        7244
      ]
    },
    {
      "pos": [
        7327,
        7496
      ],
      "content": "You can set breakpoints in the sources, use the watch windows, etc.  See the <bpt id=\"p1\">[</bpt><ept id=\"p1\">Python Tools for Visual Studio Documentation]</ept> for more information on the various features."
    },
    {
      "content": "Make changes",
      "pos": [
        7502,
        7514
      ]
    },
    {
      "content": "Now you can experiment by making changes to the application sources and/or templates.",
      "pos": [
        7516,
        7601
      ]
    },
    {
      "content": "After you've tested your changes, commit them to the Git repository:",
      "pos": [
        7603,
        7671
      ]
    },
    {
      "content": "Install more packages",
      "pos": [
        7754,
        7775
      ]
    },
    {
      "content": "Your application may have dependencies beyond Python and Flask.",
      "pos": [
        7777,
        7840
      ]
    },
    {
      "content": "You can install additional packages using pip.",
      "pos": [
        7842,
        7888
      ]
    },
    {
      "content": "To install a package, right-click on the virtual environment and select <bpt id=\"p1\">**</bpt>Install Python Package<ept id=\"p1\">**</ept>.",
      "pos": [
        7890,
        7989
      ]
    },
    {
      "pos": [
        7991,
        8134
      ],
      "content": "For example, to install the Azure SDK for Python, which gives you access to Azure storage, service bus and other Azure services, enter <ph id=\"ph1\">`azure`</ph>:"
    },
    {
      "pos": [
        8223,
        8330
      ],
      "content": "Right-click on the virtual environment and select <bpt id=\"p1\">**</bpt>Generate requirements.txt<ept id=\"p1\">**</ept> to update requirements.txt."
    },
    {
      "content": "Then, commit the changes to requirements.txt to the Git repository.",
      "pos": [
        8332,
        8399
      ]
    },
    {
      "content": "Deploy to Azure",
      "pos": [
        8405,
        8420
      ]
    },
    {
      "content": "To trigger a deployment, click on <bpt id=\"p1\">**</bpt>Sync<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Push<ept id=\"p2\">**</ept>.",
      "pos": [
        8422,
        8477
      ]
    },
    {
      "content": "Sync does both a push and a pull.",
      "pos": [
        8479,
        8512
      ]
    },
    {
      "content": "The first deployment will take some time, as it will create a virtual environment, install packages, etc.",
      "pos": [
        8587,
        8692
      ]
    },
    {
      "content": "Visual Studio doesn't show the progress of the deployment.",
      "pos": [
        8694,
        8752
      ]
    },
    {
      "content": "If you'd like to review the output, see the section on <bpt id=\"p1\">[</bpt>Troubleshooting - Deployment<ept id=\"p1\">](#troubleshooting-deployment)</ept>.",
      "pos": [
        8754,
        8869
      ]
    },
    {
      "content": "Browse to the Azure URL to view your changes.",
      "pos": [
        8871,
        8916
      ]
    },
    {
      "content": "Web app development - Windows - command line",
      "pos": [
        8922,
        8966
      ]
    },
    {
      "content": "Clone the repository",
      "pos": [
        8972,
        8992
      ]
    },
    {
      "content": "First, clone the repository using the URL provided on the Azure Portal, and add the Azure repository as a remote.",
      "pos": [
        8994,
        9107
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Continuous deployment using GIT in Azure App Service<ept id=\"p1\">](web-sites-publish-source-control.md)</ept>.",
      "pos": [
        9108,
        9226
      ]
    },
    {
      "content": "Create virtual environment",
      "pos": [
        9316,
        9342
      ]
    },
    {
      "content": "We'll create a new virtual environment for development purposes (do not add it to the repository).",
      "pos": [
        9344,
        9442
      ]
    },
    {
      "content": "Virtual environments in Python are not relocatable, so every developer working on the application will create their own locally.",
      "pos": [
        9444,
        9572
      ]
    },
    {
      "pos": [
        9574,
        9743
      ],
      "content": "Make sure to use the same version of Python that is selected for your web app (in runtime.txt or the <bpt id=\"p1\">**</bpt>Application Settings<ept id=\"p1\">**</ept> blade of your web app in the Azure Portal)."
    },
    {
      "content": "For Python 2.7:",
      "pos": [
        9745,
        9760
      ]
    },
    {
      "content": "For Python 3.4:",
      "pos": [
        9808,
        9823
      ]
    },
    {
      "content": "Install any external packages required by your application.",
      "pos": [
        9865,
        9924
      ]
    },
    {
      "content": "You can use the requirements.txt file at the root of the repository to install the packages in your virtual environment:",
      "pos": [
        9925,
        10045
      ]
    },
    {
      "content": "Run using development server",
      "pos": [
        10100,
        10128
      ]
    },
    {
      "content": "You can launch the application under a development server with the following command:",
      "pos": [
        10130,
        10215
      ]
    },
    {
      "content": "The console will display the URL and port the server listens to:",
      "pos": [
        10254,
        10318
      ]
    },
    {
      "content": "Then, open your web browser to that URL.",
      "pos": [
        10403,
        10443
      ]
    },
    {
      "content": "Make changes",
      "pos": [
        10530,
        10542
      ]
    },
    {
      "content": "Now you can experiment by making changes to the application sources and/or templates.",
      "pos": [
        10544,
        10629
      ]
    },
    {
      "content": "After you've tested your changes, commit them to the Git repository:",
      "pos": [
        10631,
        10699
      ]
    },
    {
      "content": "Install more packages",
      "pos": [
        10771,
        10792
      ]
    },
    {
      "content": "Your application may have dependencies beyond Python and Flask.",
      "pos": [
        10794,
        10857
      ]
    },
    {
      "content": "You can install additional packages using pip.",
      "pos": [
        10859,
        10905
      ]
    },
    {
      "content": "For example, to install the Azure SDK for Python, which gives you access to Azure storage, service bus and other Azure services, type:",
      "pos": [
        10907,
        11041
      ]
    },
    {
      "content": "Make sure to update requirements.txt:",
      "pos": [
        11078,
        11115
      ]
    },
    {
      "content": "Commit the changes:",
      "pos": [
        11164,
        11183
      ]
    },
    {
      "content": "Deploy to Azure",
      "pos": [
        11259,
        11274
      ]
    },
    {
      "content": "To trigger a deployment, push the changes to Azure:",
      "pos": [
        11276,
        11327
      ]
    },
    {
      "content": "You will see the output of the deployment script, including virtual environment creation, installation of packages, creation of web.config.",
      "pos": [
        11356,
        11495
      ]
    },
    {
      "content": "Browse to the Azure URL to view your changes.",
      "pos": [
        11497,
        11542
      ]
    },
    {
      "content": "Web app development - Mac/Linux - command line",
      "pos": [
        11548,
        11594
      ]
    },
    {
      "content": "Clone the repository",
      "pos": [
        11600,
        11620
      ]
    },
    {
      "content": "First, clone the repository using the URL provided on the Azure Portal, and add the Azure repository as a remote.",
      "pos": [
        11622,
        11735
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Continuous deployment using GIT in Azure App Service<ept id=\"p1\">](web-sites-publish-source-control.md)</ept>.",
      "pos": [
        11736,
        11854
      ]
    },
    {
      "content": "Create virtual environment",
      "pos": [
        11944,
        11970
      ]
    },
    {
      "content": "We'll create a new virtual environment for development purposes (do not add it to the repository).",
      "pos": [
        11972,
        12070
      ]
    },
    {
      "content": "Virtual environments in Python are not relocatable, so every developer working on the application will create their own locally.",
      "pos": [
        12072,
        12200
      ]
    },
    {
      "pos": [
        12202,
        12371
      ],
      "content": "Make sure to use the same version of Python that is selected for your web app (in runtime.txt or the <bpt id=\"p1\">**</bpt>Application Settings<ept id=\"p1\">**</ept> blade of your web app in the Azure Portal)."
    },
    {
      "content": "For Python 2.7:",
      "pos": [
        12373,
        12388
      ]
    },
    {
      "content": "For Python 3.4:",
      "pos": [
        12420,
        12435
      ]
    },
    {
      "content": "Install any external packages required by your application.",
      "pos": [
        12461,
        12520
      ]
    },
    {
      "content": "You can use the requirements.txt file at the root of the repository to install the packages in your virtual environment:",
      "pos": [
        12521,
        12641
      ]
    },
    {
      "content": "Run using development server",
      "pos": [
        12692,
        12720
      ]
    },
    {
      "content": "You can launch the application under a development server with the following command:",
      "pos": [
        12722,
        12807
      ]
    },
    {
      "content": "The console will display the URL and port the server listens to:",
      "pos": [
        12842,
        12906
      ]
    },
    {
      "content": "Then, open your web browser to that URL.",
      "pos": [
        12987,
        13027
      ]
    },
    {
      "content": "Make changes",
      "pos": [
        13110,
        13122
      ]
    },
    {
      "content": "Now you can experiment by making changes to the application sources and/or templates.",
      "pos": [
        13124,
        13209
      ]
    },
    {
      "content": "After you've tested your changes, commit them to the Git repository:",
      "pos": [
        13211,
        13279
      ]
    },
    {
      "content": "Install more packages",
      "pos": [
        13351,
        13372
      ]
    },
    {
      "content": "Your application may have dependencies beyond Python and Flask.",
      "pos": [
        13374,
        13437
      ]
    },
    {
      "content": "You can install additional packages using pip.",
      "pos": [
        13439,
        13485
      ]
    },
    {
      "content": "For example, to install the Azure SDK for Python, which gives you access to Azure storage, service bus and other Azure services, type:",
      "pos": [
        13487,
        13621
      ]
    },
    {
      "content": "Make sure to update requirements.txt:",
      "pos": [
        13654,
        13691
      ]
    },
    {
      "content": "Commit the changes:",
      "pos": [
        13736,
        13755
      ]
    },
    {
      "content": "Deploy to Azure",
      "pos": [
        13831,
        13846
      ]
    },
    {
      "content": "To trigger a deployment, push the changes to Azure:",
      "pos": [
        13848,
        13899
      ]
    },
    {
      "content": "You will see the output of the deployment script, including virtual environment creation, installation of packages, creation of web.config.",
      "pos": [
        13928,
        14067
      ]
    },
    {
      "content": "Browse to the Azure URL to view your changes.",
      "pos": [
        14069,
        14114
      ]
    },
    {
      "content": "Troubleshooting - Package Installation",
      "pos": [
        14120,
        14158
      ]
    },
    {
      "content": "Troubleshooting - Virtual Environment",
      "pos": [
        14310,
        14347
      ]
    },
    {
      "content": "Next Steps",
      "pos": [
        14497,
        14507
      ]
    },
    {
      "content": "Follow these links to learn more about Flask and Python Tools for Visual Studio:",
      "pos": [
        14509,
        14589
      ]
    },
    {
      "content": "Flask Documentation",
      "pos": [
        14596,
        14615
      ]
    },
    {
      "content": "Python Tools for Visual Studio Documentation",
      "pos": [
        14620,
        14664
      ]
    },
    {
      "content": "For information on using Azure Table Storage and MongoDB:",
      "pos": [
        14667,
        14724
      ]
    },
    {
      "content": "[Flask and MongoDB on Azure with Python Tools for Visual Studio]",
      "pos": [
        14728,
        14792
      ]
    },
    {
      "content": "[Flask and Azure Table Storage on Azure with Python Tools for Visual Studio]",
      "pos": [
        14795,
        14871
      ]
    },
    {
      "content": "What's changed",
      "pos": [
        14876,
        14890
      ]
    },
    {
      "pos": [
        14893,
        15061
      ],
      "content": "For a guide to the change from Websites to App Service see: <bpt id=\"p1\">[</bpt>Azure App Service and Its Impact on Existing Azure Services<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529714)</ept>"
    },
    {
      "pos": [
        15064,
        15223
      ],
      "content": "For a guide to the change of the old portal to the new portal see: <bpt id=\"p1\">[</bpt>Reference for navigating the preview portal<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529715)</ept>"
    },
    {
      "content": "test",
      "pos": [
        16121,
        16125
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Creating web apps with Flask in Azure\" \n    description=\"A tutorial that introduces you to running a Python web app on Azure.\" \n    services=\"app-service\\web\" \n    documentationCenter=\"python\"\n    tags=\"python\"\n    authors=\"huguesv\" \n    manager=\"wpickett\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"app-service-web\" \n    ms.workload=\"web\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"python\" \n    ms.topic=\"article\" \n    ms.date=\"08/30/2015\"\n    ms.author=\"huguesv\"/>\n\n\n# Creating web apps with Flask in Azure\n\nThis tutorial describes how to get started running Python in [Azure App Service Web Apps](http://go.microsoft.com/fwlink/?LinkId=529714).  Web Apps provides limited free hosting and rapid deployment, and you can use Python!  As your app grows, you can switch to paid hosting, and you can also integrate with all of the other Azure services.\n\nYou will create an application using the Flask web framework (see alternate versions of this tutorial for [Django](web-sites-python-create-deploy-django-app.md) and [Bottle](web-sites-python-create-deploy-bottle-app.md)).  You will create the website from the Azure gallery, set up Git deployment, and clone the repository locally.  Then you will run the application locally, make changes, commit and push them to Azure.  The tutorial shows how to do this from Windows or Mac/Linux.\n\n[AZURE.INCLUDE [create-account-and-websites-note](../../includes/create-account-and-websites-note.md)]\n\n>[AZURE.NOTE] If you want to get started with Azure App Service before signing up for an Azure account, go to [Try App Service](http://go.microsoft.com/fwlink/?LinkId=523751), where you can immediately create a short-lived starter web app in App Service. No credit cards required; no commitments.\n\n## Prerequisites\n\n- Windows, Mac or Linux\n- Python 2.7 or 3.4\n- setuptools, pip, virtualenv (Python 2.7 only)\n- Git\n- [Python Tools for Visual Studio][] (PTVS) - Note: this is optional\n\n**Note**: TFS publishing is currently not supported for Python projects.\n\n### Windows\n\nIf you don't already have Python 2.7 or 3.4 installed (32-bit), we recommend installing [Azure SDK for Python 2.7] or [Azure SDK for Python 3.4] using Web Platform Installer.  This installs the 32-bit version of Python, setuptools, pip, virtualenv, etc (32-bit Python is what's installed on the Azure host machines).  Alternatively, you can get Python from [python.org].\n\nFor Git, we recommend [Git for Windows] or [GitHub for Windows].  If you use Visual Studio, you can use the integrated Git support.\n\nWe also recommend installing [Python Tools 2.2 for Visual Studio].  This is optional, but if you have [Visual Studio], including the free Visual Studio Community 2013 or Visual Studio Express 2013 for Web, then this will give you a great Python IDE.\n\n### Mac/Linux\n\nYou should have Python and Git already installed, but make sure you have either Python 2.7 or 3.4.\n\n\n## Web app create on the Azure Portal\n\nThe first step in creating your app is to create the web app via the [Azure Portal](https://portal.azure.com). \n\n1. Log into the Azure Portal and click the **NEW** button in the bottom left corner. \n2. Click **Web + Mobile** > **Azure Marketplace** > **Web Apps**.\n3. In the search box, type \"python\".\n4. In the search results, select **Flask**, then click **Create**.\n5. Configure the new Flask app, such as creating a new App Service plan and a new resource group for it. Then, click **Create**.\n6. Configure Git publishing for your newly created web app by following the instructions at [Continuous deployment using GIT in Azure App Service](web-sites-publish-source-control.md).\n\n\n## Application Overview\n\n### Git repository contents\n\nHere's an overview of the files you'll find in the initial Git repository, which we'll clone in the next section.\n\n    \\FlaskWebProject\\__init__.py\n    \\FlaskWebProject\\views.py\n    \\FlaskWebProject\\static\\content\\\n    \\FlaskWebProject\\static\\fonts\\\n    \\FlaskWebProject\\static\\scripts\\\n    \\FlaskWebProject\\templates\\about.html\n    \\FlaskWebProject\\templates\\contact.html\n    \\FlaskWebProject\\templates\\index.html\n    \\FlaskWebProject\\templates\\layout.html\n\nMain sources for the application.  Consists of 3 pages (index, about, contact) with a master layout.  Static content and scripts include bootstrap, jquery, modernizr and respond.\n\n    \\runserver.py\n\nLocal development server support. Use this to run the application locally.\n\n    \\FlaskWebProject.pyproj\n    \\FlaskWebProject.sln\n\nProject files for use with [Python Tools for Visual Studio].\n\n    \\ptvs_virtualenv_proxy.py\n\nIIS proxy for virtual environments and PTVS remote debugging support.\n\n    \\requirements.txt\n\nExternal packages needed by this application. The deployment script will pip install the packages listed in this file.\n \n    \\web.2.7.config\n    \\web.3.4.config\n\nIIS configuration files.  The deployment script will use the appropriate web.x.y.config and copy it as web.config.\n\n### Optional files - Customizing deployment\n\n[AZURE.INCLUDE [web-sites-python-customizing-deployment](../../includes/web-sites-python-customizing-deployment.md)]\n\n### Optional files - Python runtime\n\n[AZURE.INCLUDE [web-sites-python-customizing-runtime](../../includes/web-sites-python-customizing-runtime.md)]\n\n### Additional files on server\n\nSome files exist on the server but are not added to the git repository.  These are created by the deployment script.\n\n    \\web.config\n\nIIS configuration file.  Created from web.x.y.config on every deployment.\n\n    \\env\\\n\nPython virtual environment.  Created during deployment if a compatible virtual environment doesn't already exist on the app.  Packages listed in requirements.txt are pip installed, but pip will skip installation if the packages are already installed.\n\nThe next 3 sections describe how to proceed with the web app development under 3 different environments:\n\n- Windows, with Python Tools for Visual Studio\n- Windows, with command line\n- Mac/Linux, with command line\n\n\n## Web app development - Windows - Python Tools for Visual Studio\n\n### Clone the repository\n\nFirst, clone the repository using the URL provided on the Azure Portal. For more information, see [Continuous deployment using GIT in Azure App Service](web-sites-publish-source-control.md).\n\nOpen the solution file (.sln) that is included in the root of the repository.\n\n![](./media/web-sites-python-create-deploy-flask-app/ptvs-solution-flask.png)\n\n### Create virtual environment\n\nNow we'll create a virtual environment for local development.  Right-click on **Python Environments** select **Add Virtual Environment...**.\n\n- Make sure the name of the environment is `env`.\n\n- Select the base interpreter.  Make sure to use the same version of Python that is selected for your web app (in runtime.txt or the **Application Settings** blade of your web app in the Azure Portal).\n\n- Make sure the option to download and install packages is checked.\n\n![](./media/web-sites-python-create-deploy-flask-app/ptvs-add-virtual-env-27.png)\n\nClick **Create**.  This will create the virtual environment, and install dependencies listed in requirements.txt.\n\n### Run using development server\n\nPress F5 to start debugging, and your web browser will open automatically to the page running locally.\n\n![](./media/web-sites-python-create-deploy-flask-app/windows-browser-flask.png)\n\nYou can set breakpoints in the sources, use the watch windows, etc.  See the [Python Tools for Visual Studio Documentation] for more information on the various features.\n\n### Make changes\n\nNow you can experiment by making changes to the application sources and/or templates.\n\nAfter you've tested your changes, commit them to the Git repository:\n\n![](./media/web-sites-python-create-deploy-flask-app/ptvs-commit-flask.png)\n\n### Install more packages\n\nYour application may have dependencies beyond Python and Flask.\n\nYou can install additional packages using pip.  To install a package, right-click on the virtual environment and select **Install Python Package**.\n\nFor example, to install the Azure SDK for Python, which gives you access to Azure storage, service bus and other Azure services, enter `azure`:\n\n![](./media/web-sites-python-create-deploy-flask-app/ptvs-install-package-dialog.png)\n\nRight-click on the virtual environment and select **Generate requirements.txt** to update requirements.txt.\n\nThen, commit the changes to requirements.txt to the Git repository.\n\n### Deploy to Azure\n\nTo trigger a deployment, click on **Sync** or **Push**.  Sync does both a push and a pull.\n\n![](./media/web-sites-python-create-deploy-flask-app/ptvs-git-push.png)\n\nThe first deployment will take some time, as it will create a virtual environment, install packages, etc.\n\nVisual Studio doesn't show the progress of the deployment.  If you'd like to review the output, see the section on [Troubleshooting - Deployment](#troubleshooting-deployment).\n\nBrowse to the Azure URL to view your changes.\n\n\n## Web app development - Windows - command line\n\n### Clone the repository\n\nFirst, clone the repository using the URL provided on the Azure Portal, and add the Azure repository as a remote. For more information, see [Continuous deployment using GIT in Azure App Service](web-sites-publish-source-control.md).\n\n    git clone <repo-url>\n    cd <repo-folder>\n    git remote add azure <repo-url> \n\n### Create virtual environment\n\nWe'll create a new virtual environment for development purposes (do not add it to the repository).  Virtual environments in Python are not relocatable, so every developer working on the application will create their own locally.\n\nMake sure to use the same version of Python that is selected for your web app (in runtime.txt or the **Application Settings** blade of your web app in the Azure Portal).\n\nFor Python 2.7:\n\n    c:\\python27\\python.exe -m virtualenv env\n\nFor Python 3.4:\n\n    c:\\python34\\python.exe -m venv env\n\nInstall any external packages required by your application. You can use the requirements.txt file at the root of the repository to install the packages in your virtual environment:\n\n    env\\scripts\\pip install -r requirements.txt\n\n### Run using development server\n\nYou can launch the application under a development server with the following command:\n\n    env\\scripts\\python runserver.py\n\nThe console will display the URL and port the server listens to:\n\n![](./media/web-sites-python-create-deploy-flask-app/windows-run-local-flask.png)\n\nThen, open your web browser to that URL.\n\n![](./media/web-sites-python-create-deploy-flask-app/windows-browser-flask.png)\n\n### Make changes\n\nNow you can experiment by making changes to the application sources and/or templates.\n\nAfter you've tested your changes, commit them to the Git repository:\n\n    git add <modified-file>\n    git commit -m \"<commit-comment>\"\n\n### Install more packages\n\nYour application may have dependencies beyond Python and Flask.\n\nYou can install additional packages using pip.  For example, to install the Azure SDK for Python, which gives you access to Azure storage, service bus and other Azure services, type:\n\n    env\\scripts\\pip install azure\n\nMake sure to update requirements.txt:\n\n    env\\scripts\\pip freeze > requirements.txt\n\nCommit the changes:\n\n    git add requirements.txt\n    git commit -m \"Added azure package\"\n\n### Deploy to Azure\n\nTo trigger a deployment, push the changes to Azure:\n\n    git push azure master\n\nYou will see the output of the deployment script, including virtual environment creation, installation of packages, creation of web.config.\n\nBrowse to the Azure URL to view your changes.\n\n\n## Web app development - Mac/Linux - command line\n\n### Clone the repository\n\nFirst, clone the repository using the URL provided on the Azure Portal, and add the Azure repository as a remote. For more information, see [Continuous deployment using GIT in Azure App Service](web-sites-publish-source-control.md).\n\n    git clone <repo-url>\n    cd <repo-folder>\n    git remote add azure <repo-url> \n\n### Create virtual environment\n\nWe'll create a new virtual environment for development purposes (do not add it to the repository).  Virtual environments in Python are not relocatable, so every developer working on the application will create their own locally.\n\nMake sure to use the same version of Python that is selected for your web app (in runtime.txt or the **Application Settings** blade of your web app in the Azure Portal).\n\nFor Python 2.7:\n\n    python -m virtualenv env\n\nFor Python 3.4:\n\n    python -m venv env\n\nInstall any external packages required by your application. You can use the requirements.txt file at the root of the repository to install the packages in your virtual environment:\n\n    env/bin/pip install -r requirements.txt\n\n### Run using development server\n\nYou can launch the application under a development server with the following command:\n\n    env/bin/python runserver.py\n\nThe console will display the URL and port the server listens to:\n\n![](./media/web-sites-python-create-deploy-flask-app/mac-run-local-flask.png)\n\nThen, open your web browser to that URL.\n\n![](./media/web-sites-python-create-deploy-flask-app/mac-browser-flask.png)\n\n### Make changes\n\nNow you can experiment by making changes to the application sources and/or templates.\n\nAfter you've tested your changes, commit them to the Git repository:\n\n    git add <modified-file>\n    git commit -m \"<commit-comment>\"\n\n### Install more packages\n\nYour application may have dependencies beyond Python and Flask.\n\nYou can install additional packages using pip.  For example, to install the Azure SDK for Python, which gives you access to Azure storage, service bus and other Azure services, type:\n\n    env/bin/pip install azure\n\nMake sure to update requirements.txt:\n\n    env/bin/pip freeze > requirements.txt\n\nCommit the changes:\n\n    git add requirements.txt\n    git commit -m \"Added azure package\"\n\n### Deploy to Azure\n\nTo trigger a deployment, push the changes to Azure:\n\n    git push azure master\n\nYou will see the output of the deployment script, including virtual environment creation, installation of packages, creation of web.config.\n\nBrowse to the Azure URL to view your changes.\n\n\n## Troubleshooting - Package Installation\n\n[AZURE.INCLUDE [web-sites-python-troubleshooting-package-installation](../../includes/web-sites-python-troubleshooting-package-installation.md)]\n\n\n## Troubleshooting - Virtual Environment\n\n[AZURE.INCLUDE [web-sites-python-troubleshooting-virtual-environment](../../includes/web-sites-python-troubleshooting-virtual-environment.md)]\n\n\n## Next Steps\n\nFollow these links to learn more about Flask and Python Tools for Visual Studio: \n \n- [Flask Documentation]\n- [Python Tools for Visual Studio Documentation]\n\nFor information on using Azure Table Storage and MongoDB:\n\n- [Flask and MongoDB on Azure with Python Tools for Visual Studio]\n- [Flask and Azure Table Storage on Azure with Python Tools for Visual Studio]\n\n## What's changed\n* For a guide to the change from Websites to App Service see: [Azure App Service and Its Impact on Existing Azure Services](http://go.microsoft.com/fwlink/?LinkId=529714)\n* For a guide to the change of the old portal to the new portal see: [Reference for navigating the preview portal](http://go.microsoft.com/fwlink/?LinkId=529715)\n\n\n<!--Link references-->\n[Flask and MongoDB on Azure with Python Tools for Visual Studio]: https://github.com/microsoft/ptvs/wiki/Flask-and-MongoDB-on-Azure\n[Flask and Azure Table Storage on Azure with Python Tools for Visual Studio]: web-sites-python-ptvs-flask-table-storage.md\n\n<!--External Link references-->\n[Azure SDK for Python 2.7]: http://go.microsoft.com/fwlink/?linkid=254281\n[Azure SDK for Python 3.4]: http://go.microsoft.com/fwlink/?linkid=516990\n[python.org]: http://www.python.org/\n[Git for Windows]: http://msysgit.github.io/\n[GitHub for Windows]: https://windows.github.com/\n[Python Tools for Visual Studio]: http://aka.ms/ptvs\n[Python Tools 2.2 for Visual Studio]: http://go.microsoft.com/fwlink/?LinkID=624025\n[Visual Studio]: http://www.visualstudio.com/\n[Python Tools for Visual Studio Documentation]: http://aka.ms/ptvsdocs\n[Flask Documentation]: http://flask.pocoo.org/ \n \ntest\n"
}