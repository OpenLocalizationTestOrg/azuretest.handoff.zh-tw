{
  "nodes": [
    {
      "content": "SharePoint Server 2010 on Azure VMs | Microsoft Azure",
      "pos": [
        27,
        80
      ]
    },
    {
      "content": "Learn the value of SharePoint on Azure virtual machines, the step-by-step process, and the supported scenarios for using SharePoint 2010.",
      "pos": [
        99,
        236
      ]
    },
    {
      "content": "SharePoint 2010 deployment on Azure virtual machines",
      "pos": [
        621,
        673
      ]
    },
    {
      "content": "Microsoft SharePoint Server 2010 provides rich deployment flexibility, which can help organizations determine the appropriate deployment scenarios to align with their business needs and objectives.",
      "pos": [
        675,
        872
      ]
    },
    {
      "content": "Hosted and managed in Microsoft Azure, the Azure Virtual Machines offering provides complete, reliable, and available infrastructure to support various on-demand application and database workloads, such as Microsoft SQL Server and SharePoint deployments.",
      "pos": [
        873,
        1127
      ]
    },
    {
      "content": "While Azure virtual machines support multiple workloads, this article focuses on SharePoint deployments.",
      "pos": [
        1129,
        1233
      ]
    },
    {
      "content": "Azure virtual machines enable organizations to create and manage their SharePoint infrastructure by quickly provisioning and accessing nearly any host universally.",
      "pos": [
        1234,
        1397
      ]
    },
    {
      "content": "It allows full control and management over processors, RAM, CPU ranges, and other resources of SharePoint virtual machines.",
      "pos": [
        1398,
        1521
      ]
    },
    {
      "content": "Azure virtual machines mitigate the need for hardware, so organizations can turn attention from handling high, upfront cost and complexity to building and managing infrastructure at scale.",
      "pos": [
        1523,
        1711
      ]
    },
    {
      "content": "This means that they can innovate, experiment, and iterate in hours, as opposed to days and weeks with traditional deployments.",
      "pos": [
        1712,
        1839
      ]
    },
    {
      "pos": [
        1843,
        2151
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> For information about deploying SharePoint 2013 in Azure, see <bpt id=\"p1\">[</bpt>Planning for SharePoint 2013 on Azure infrastructure services<ept id=\"p1\">](https://msdn.microsoft.com/library/dn275958.aspx)</ept> and <bpt id=\"p2\">[</bpt>SharePoint farms hosted in Azure infrastructure services<ept id=\"p2\">](virtual-machines-sharepoint-infrastructure-services.md)</ept>."
    },
    {
      "content": "SharePoint on Azure virtual machines",
      "pos": [
        2156,
        2192
      ]
    },
    {
      "content": "SharePoint 2010 flexibly supports most of the workloads in an Azure virtual machines deployment.",
      "pos": [
        2194,
        2290
      ]
    },
    {
      "content": "Azure virtual machines are an optimal fit for FIS (SharePoint Server for Internet sites) and development scenarios.",
      "pos": [
        2291,
        2406
      ]
    },
    {
      "content": "Core SharePoint workloads are also supported.",
      "pos": [
        2407,
        2452
      ]
    },
    {
      "content": "If an organization wants to manage and control its own SharePoint 2010 implementation while capitalizing on options for virtualization in a cloud infrastructure, Azure virtual machines are ideal for deployment.",
      "pos": [
        2453,
        2663
      ]
    },
    {
      "content": "The Azure Virtual Machines offering is hosted and managed in the cloud.",
      "pos": [
        2665,
        2736
      ]
    },
    {
      "content": "It provides deployment flexibility and reduces cost by mitigating capital expenditures due to hardware procurement.",
      "pos": [
        2737,
        2852
      ]
    },
    {
      "content": "With increased infrastructure agility, organizations can deploy SharePoint Server in hours, as opposed to days or weeks.",
      "pos": [
        2853,
        2973
      ]
    },
    {
      "content": "Azure virtual machines also enable organizations to deploy SharePoint workloads in the cloud using a \"pay-as-you-go\" model.",
      "pos": [
        2974,
        3097
      ]
    },
    {
      "content": "As SharePoint workloads grow, an organization can rapidly expand the infrastructure.",
      "pos": [
        3098,
        3182
      ]
    },
    {
      "content": "Then, when computing needs decline, it can return the resources that are no longer needed, thereby paying only for what is used.",
      "pos": [
        3183,
        3311
      ]
    },
    {
      "content": "Shift in IT focus",
      "pos": [
        3317,
        3334
      ]
    },
    {
      "content": "Many organizations contract out the common components of their IT infrastructure and management, such as hardware, operating systems, security, data storage, and backup, while maintaining control of mission-critical applications, such as SharePoint Server.",
      "pos": [
        3336,
        3592
      ]
    },
    {
      "content": "By delegating all non-mission-critical service layers of their IT platforms to a virtual provider, organizations can shift their IT focus to core, mission-critical SharePoint services and deliver business value with SharePoint projects, instead of spending more time on setting up infrastructure.",
      "pos": [
        3593,
        3889
      ]
    },
    {
      "content": "Faster deployment",
      "pos": [
        3895,
        3912
      ]
    },
    {
      "content": "Supporting and deploying a large SharePoint infrastructure can hamper IT's ability to move rapidly to support business requirements.",
      "pos": [
        3914,
        4046
      ]
    },
    {
      "content": "The time that is required to build, test, and prepare SharePoint servers and farms and deploy them into a production environment can take weeks or even months, depending on the processes and constraints of the organization.",
      "pos": [
        4047,
        4270
      ]
    },
    {
      "content": "Azure virtual machines allow organizations to quickly deploy their SharePoint workloads without capital expenditures for hardware.",
      "pos": [
        4271,
        4401
      ]
    },
    {
      "content": "In this way, organizations can capitalize on infrastructure agility to deploy in hours instead of days or weeks.",
      "pos": [
        4402,
        4514
      ]
    },
    {
      "content": "Scalability",
      "pos": [
        4520,
        4531
      ]
    },
    {
      "content": "Without the need to deploy, test, and prepare physical SharePoint servers and farms, organizations can expand and contract compute capacity on demand, at a moment's notice.",
      "pos": [
        4533,
        4705
      ]
    },
    {
      "content": "As SharePoint workload requirements grow, an organization can rapidly expand its cloud infrastructure.",
      "pos": [
        4706,
        4808
      ]
    },
    {
      "content": "Likewise, when computing needs decrease, the organization can diminish resources, paying only for what it uses.",
      "pos": [
        4809,
        4920
      ]
    },
    {
      "content": "The Azure virtual machines reduce upfront expenses and long-term commitments, enabling organizations to build and manage SharePoint infrastructures at scale.",
      "pos": [
        4921,
        5078
      ]
    },
    {
      "content": "Again, this means that these organizations can innovate, experiment, and iterate in hours, as opposed to days and weeks using traditional deployments.",
      "pos": [
        5079,
        5229
      ]
    },
    {
      "content": "Metered usage",
      "pos": [
        5235,
        5248
      ]
    },
    {
      "content": "Azure virtual machines provide computing power, memory, and storage for SharePoint scenarios, whose prices are typically based on resource consumption.",
      "pos": [
        5250,
        5401
      ]
    },
    {
      "content": "Organizations pay only for what they use, and the service provides all capacity needed for running the SharePoint infrastructure.",
      "pos": [
        5402,
        5531
      ]
    },
    {
      "content": "For more information about pricing and billing, go to <bpt id=\"p1\">[</bpt>Azure pricing details<ept id=\"p1\">](http://azure.microsoft.com/pricing/)</ept>.",
      "pos": [
        5532,
        5647
      ]
    },
    {
      "content": "Note that there are nominal charges for storage and data transfers from Azure to an on-premises network.",
      "pos": [
        5648,
        5752
      ]
    },
    {
      "content": "However, Azure does not charge for uploading data.",
      "pos": [
        5753,
        5803
      ]
    },
    {
      "content": "Flexibility",
      "pos": [
        5809,
        5820
      ]
    },
    {
      "content": "Azure virtual machines provide developers with the flexibility to pick their desired language or runtime environment, with official support for .NET, Node.js, Java, and PHP.",
      "pos": [
        5822,
        5995
      ]
    },
    {
      "content": "Developers also can choose their tools, with support for Microsoft Visual Studio, WebMatrix, Eclipse, and text editors.",
      "pos": [
        5996,
        6115
      ]
    },
    {
      "content": "Further, Microsoft delivers a low-cost, low-risk path to the cloud and offers cost-effective, easy provisioning and deployment for cloud reporting needs while providing access to business intelligence (BI) across devices and locations.",
      "pos": [
        6116,
        6351
      ]
    },
    {
      "content": "Finally, with the Azure offering, users not only can move VHDs to the cloud, but also can copy a VHD back down and run it locally or through another cloud provider, as long as they have the appropriate license.",
      "pos": [
        6352,
        6562
      ]
    },
    {
      "content": "Provisioning process",
      "pos": [
        6567,
        6587
      ]
    },
    {
      "content": "The image library in Azure provides the list of available preconfigured virtual machines.",
      "pos": [
        6589,
        6678
      ]
    },
    {
      "content": "Users can publish SharePoint Server, SQL Server, Windows Server, and other ISO/VHDs to the image library.",
      "pos": [
        6679,
        6784
      ]
    },
    {
      "content": "To simplify the creation of virtual machines, base images are created and published to the library.",
      "pos": [
        6785,
        6884
      ]
    },
    {
      "content": "Authorized users can use these images to generate the desired virtual machine.",
      "pos": [
        6885,
        6963
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Create a virtual machine running Windows in the Azure preview portal<ept id=\"p1\">](virtual-machines-windows-tutorial.md)</ept>.",
      "pos": [
        6964,
        7101
      ]
    },
    {
      "content": "Figure 1 shows the basic steps for creating a virtual machine using the Azure portal.",
      "pos": [
        7102,
        7187
      ]
    },
    {
      "content": "Figure 1: Overview of steps for creating a virtual machine",
      "pos": [
        7191,
        7249
      ]
    },
    {
      "content": "Users also can upload a sysprepped image on the Azure Management Portal.",
      "pos": [
        7253,
        7325
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Create and upload a Windows Server VHD to Azure<ept id=\"p1\">](virtual-machines-create-upload-vhd-windows-server.md)</ept>.",
      "pos": [
        7326,
        7458
      ]
    },
    {
      "content": "Figure 2 shows the basic steps for uploading an image to create a VM.",
      "pos": [
        7459,
        7528
      ]
    },
    {
      "content": "On the Azure portal, users also can upload an image on which the SysPrep tool has already been run.",
      "pos": [
        7530,
        7629
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Create and upload a Windows Server VHD to Azure<ept id=\"p1\">](virtual-machines-create-upload-vhd-windows-server.md)</ept>.",
      "pos": [
        7630,
        7762
      ]
    },
    {
      "content": "Figure 2 shows the basic steps for uploading an image to create a virtual machine.",
      "pos": [
        7763,
        7845
      ]
    },
    {
      "content": "Figure 2: Overview of steps for uploading an image",
      "pos": [
        7849,
        7899
      ]
    },
    {
      "content": "Deploying SharePoint 2010 on Azure",
      "pos": [
        7906,
        7940
      ]
    },
    {
      "content": "You can deploy SharePoint 2010 on Azure by following these steps:",
      "pos": [
        7943,
        8008
      ]
    },
    {
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>Azure Management Portal<ept id=\"p1\">](http://manage.windowsazure.com/)</ept> through your Azure subscription account.",
      "pos": [
        8013,
        8127
      ]
    },
    {
      "content": "If you do not have an Azure account, <bpt id=\"p1\">[</bpt>sign up for a free trial of Azure<ept id=\"p1\">](http://azure.microsoft.com/pricing/free-trial/)</ept>.",
      "pos": [
        8128,
        8249
      ]
    },
    {
      "pos": [
        8253,
        8391
      ],
      "content": "To create a virtual machine with the base operating system, on the Azure portal, click <bpt id=\"p1\">**</bpt>New &gt; Compute &gt; Virtual Machine &gt; From Gallery<ept id=\"p1\">**</ept>."
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Choose an image<ept id=\"p1\">**</ept> dialog box appears.",
      "pos": [
        8395,
        8438
      ]
    },
    {
      "content": "Click the <bpt id=\"p1\">**</bpt>Windows Server 2008 R2 SP1<ept id=\"p1\">**</ept> platform image, and then click the right arrow.",
      "pos": [
        8439,
        8527
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Virtual machine configuration<ept id=\"p1\">**</ept> dialog box appears.",
      "pos": [
        8531,
        8588
      ]
    },
    {
      "content": "Provide the following information:",
      "pos": [
        8589,
        8623
      ]
    },
    {
      "pos": [
        8630,
        8663
      ],
      "content": "Enter a <bpt id=\"p1\">**</bpt>Virtual Machine Name<ept id=\"p1\">**</ept>."
    },
    {
      "content": "Select the appropriate size.",
      "pos": [
        8670,
        8698
      ]
    },
    {
      "content": "For a production environment (SharePoint application server and database), we recommend to use A3 (4 Core, 7 gigabyte (GB) memory) or larger.",
      "pos": [
        8699,
        8840
      ]
    },
    {
      "pos": [
        8847,
        8909
      ],
      "content": "In <bpt id=\"p1\">**</bpt>New User Name<ept id=\"p1\">**</ept>, type a local administrator account name."
    },
    {
      "pos": [
        8916,
        8960
      ],
      "content": "In <bpt id=\"p1\">**</bpt>New Password<ept id=\"p1\">**</ept>, type a strong password."
    },
    {
      "pos": [
        8967,
        9035
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Confirm<ept id=\"p1\">**</ept>, retype the password, and then click the right arrow."
    },
    {
      "content": "The second <bpt id=\"p1\">**</bpt>Virtual machine configuration<ept id=\"p1\">**</ept> dialog box appears.",
      "pos": [
        9039,
        9103
      ]
    },
    {
      "content": "Provide the following information:",
      "pos": [
        9104,
        9138
      ]
    },
    {
      "pos": [
        9145,
        9304
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Cloud Service<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Create a new cloud service<ept id=\"p2\">**</ept>, in which case you must also provide a cloud service DNS name, or select an existing cloud service."
    },
    {
      "pos": [
        9311,
        9414
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Region/Affinity Group/Virtual Network<ept id=\"p1\">**</ept>, select the region where the virtual image will be hosted."
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Storage account<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Use an automatically generated storage account<ept id=\"p2\">**</ept> or select an existing storage account name.",
      "pos": [
        9421,
        9549
      ]
    },
    {
      "content": "Only one storage account per region is automatically created.",
      "pos": [
        9550,
        9611
      ]
    },
    {
      "content": "All other virtual machines created with this setting are located in this Storage account.",
      "pos": [
        9612,
        9701
      ]
    },
    {
      "content": "You are limited to 20 Storage accounts.",
      "pos": [
        9702,
        9741
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Create a Storage account in Azure<ept id=\"p1\">](virtual-machines-create-upload-vhd-windows-server.md#step-2-create-a-storage-account-in-azure)</ept>.",
      "pos": [
        9742,
        9901
      ]
    },
    {
      "pos": [
        9908,
        9983
      ],
      "content": "In <bpt id=\"p1\">**</bpt>Availability Set<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>(none)<ept id=\"p2\">**</ept>, and then click the right arrow."
    },
    {
      "pos": [
        9987,
        10096
      ],
      "content": "In the third <bpt id=\"p1\">**</bpt>Virtual machine configuration<ept id=\"p1\">**</ept> dialog box, click the checkmark to create the virtual machine."
    },
    {
      "pos": [
        10098,
        10241
      ],
      "content": "To connect to the virtual machine, see <bpt id=\"p1\">[</bpt>How to sign in to a virtual machine running Windows Server<ept id=\"p1\">](virtual-machines-log-on-windows-server.md)</ept>."
    },
    {
      "content": "Build the SQL Server virtual machine using any of the following options:",
      "pos": [
        10243,
        10315
      ]
    },
    {
      "content": "Create a SQL Server 2012 virtual machine by following steps 1 to 7 above, except in step 3, use the SQL Server 2012 image instead of the Windows Server 2008 R2 SP1 image.",
      "pos": [
        10319,
        10489
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Provisioning a SQL Server virtual machine on Azure<ept id=\"p1\">](virtual-machines-provision-sql-server.md)</ept>.",
      "pos": [
        10490,
        10613
      ]
    },
    {
      "content": "When you click this option, the provisioning process keeps a copy of SQL Server 2012 setup files in the C:\\SQLServer_11.0_Full directory path so that you can customize the installation.",
      "pos": [
        10620,
        10805
      ]
    },
    {
      "content": "For example, you can convert the evaluation installation of SQL Server 2012 to a licensed version by using your license key.",
      "pos": [
        10806,
        10930
      ]
    },
    {
      "content": "Use the SQL Server System Preparation (SysPrep) tool to install SQL Server on the virtual machine with the base operating system (as shown above in steps 1 to 7).",
      "pos": [
        10934,
        11096
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SQL Server 2012 using SysPrep<ept id=\"p1\">](http://msdn.microsoft.com/library/ee210664.aspx)</ept>.",
      "pos": [
        11097,
        11214
      ]
    },
    {
      "content": "Use the command prompt to install SQL Server.",
      "pos": [
        11218,
        11263
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SQL Server 2012 from the command prompt<ept id=\"p1\">](http://msdn.microsoft.com/library/ms144259.aspx#SysPrep)</ept>.",
      "pos": [
        11264,
        11399
      ]
    },
    {
      "content": "Use supported SQL Server media and your license key to install SQL Server on the virtual machine with the base operating system (as shown above in steps 1 to 7).",
      "pos": [
        11403,
        11564
      ]
    },
    {
      "content": "Build the SharePoint farm using the following steps:",
      "pos": [
        11566,
        11618
      ]
    },
    {
      "content": "Step 1.",
      "pos": [
        11620,
        11627
      ]
    },
    {
      "content": "Configure the Azure subscription using script files.",
      "pos": [
        11628,
        11680
      ]
    },
    {
      "content": "Step 2.",
      "pos": [
        11682,
        11689
      ]
    },
    {
      "content": "Provision SharePoint servers by creating another virtual machine with base operating system (as shown above in steps 1 to 6).",
      "pos": [
        11690,
        11815
      ]
    },
    {
      "content": "To build a SharePoint server on this virtual machine, choose one of the following options:",
      "pos": [
        11816,
        11906
      ]
    },
    {
      "content": "Provision using the SharePoint GUI:",
      "pos": [
        11910,
        11945
      ]
    },
    {
      "pos": [
        11952,
        12113
      ],
      "content": "To create and provision a SharePoint farm, go to <bpt id=\"p1\">[</bpt>Create a Microsoft SharePoint server farm<ept id=\"p1\">](http://technet.microsoft.com/library/ee805948.aspx#CreateConfigure)</ept>."
    },
    {
      "pos": [
        12120,
        12272
      ],
      "content": "To add a web or application server to the farm, go to <bpt id=\"p1\">[</bpt>Add a web or application server to the farm<ept id=\"p1\">](http://technet.microsoft.com/library/cc261752.aspx)</ept>."
    },
    {
      "pos": [
        12279,
        12422
      ],
      "content": "To add a database server to an existing farm, go to <bpt id=\"p1\">[</bpt>Add a database server to an existing farm<ept id=\"p1\">](http://technet.microsoft.com/library/cc262781)</ept>."
    },
    {
      "content": "To use SQL Server 2012 for your SharePoint farm, you must download and install Service Pack 1 for SharePoint Server 2010 after installing the application and choosing not to configure the server.",
      "pos": [
        12429,
        12624
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Service Pack 1 for SharePoint Server 2010<ept id=\"p1\">](http://www.microsoft.com/download/details.aspx?id=26623)</ept>.",
      "pos": [
        12625,
        12754
      ]
    },
    {
      "content": "To take advantage of SQL Server BI features, we recommend to install SharePoint Server as a server farm instead of a standalone server.",
      "pos": [
        12761,
        12896
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SQL Server 2012 business intelligence features<ept id=\"p1\">](http://technet.microsoft.com/library/hh231681.aspx)</ept>.",
      "pos": [
        12897,
        13034
      ]
    },
    {
      "content": "Provision using Windows PowerShell: You can use the Psconfig command-line tool as an alternative interface to perform several operations that control how SharePoint 2010 products are provisioned.",
      "pos": [
        13038,
        13233
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Psconfig command-line reference<ept id=\"p1\">](http://technet.microsoft.com/library/cc263093.aspx)</ept>.",
      "pos": [
        13234,
        13348
      ]
    },
    {
      "content": "Step 3.",
      "pos": [
        13350,
        13357
      ]
    },
    {
      "content": "Configure SharePoint.",
      "pos": [
        13358,
        13379
      ]
    },
    {
      "content": "After each SharePoint virtual machine is in the ready state, configure SharePoint Server on each server by using one of the following options:",
      "pos": [
        13380,
        13522
      ]
    },
    {
      "content": "Configure SharePoint from the GUI.",
      "pos": [
        13526,
        13560
      ]
    },
    {
      "content": "Configure SharePoint using Windows PowerShell.",
      "pos": [
        13563,
        13609
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SharePoint Server 2010 by using Windows PowerShell<ept id=\"p1\">](http://technet.microsoft.com/library/cc262839.aspx)</ept>.",
      "pos": [
        13610,
        13751
      ]
    },
    {
      "content": "You also can use the CodePlex Project's AutoSPInstaller, which consists of Windows PowerShell scripts, an XML input file, and a standard Microsoft Windows batch file.",
      "pos": [
        13754,
        13920
      ]
    },
    {
      "content": "AutoSPInstaller provides a framework for a SharePoint 2010 installation script based on Windows PowerShell.",
      "pos": [
        13921,
        14028
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>CodePlex: AutoSPInstaller<ept id=\"p1\">](http://autospinstaller.codeplex.com/)</ept>.",
      "pos": [
        14029,
        14123
      ]
    },
    {
      "content": "Step 4.",
      "pos": [
        14125,
        14132
      ]
    },
    {
      "content": "After the script is finished, connect to the virtual machine using the Virtual Machine Dashboard.",
      "pos": [
        14133,
        14230
      ]
    },
    {
      "content": "To verify the SharePoint configuration, sign in to the SharePoint Server, and then use Central Administration.",
      "pos": [
        14232,
        14342
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Be sure to configure security on the Azure portal endpoint and set an inbound port on the virtual machine's Windows Firewall.",
      "pos": [
        14346,
        14484
      ]
    },
    {
      "content": "Then, confirm that you can start a remote Windows PowerShell session to one of the SharePoint application servers by opening a Windows PowerShell session with administrator credentials.",
      "pos": [
        14485,
        14670
      ]
    },
    {
      "content": "Creating and uploading a virtual hard disk",
      "pos": [
        14676,
        14718
      ]
    },
    {
      "content": "You also can create your own images and upload them to Azure as a VHD file.",
      "pos": [
        14720,
        14795
      ]
    },
    {
      "content": "For information, see <bpt id=\"p1\">[</bpt>Create and upload a Windows Server VHD to Azure<ept id=\"p1\">](virtual-machines-create-upload-vhd-windows-server.md)</ept>.",
      "pos": [
        14796,
        14921
      ]
    },
    {
      "content": "Usage scenarios",
      "pos": [
        14926,
        14941
      ]
    },
    {
      "content": "This section discusses some leading customer scenarios for SharePoint deployments using Azure virtual machines.",
      "pos": [
        14943,
        15054
      ]
    },
    {
      "content": "Scenario 1: Simple SharePoint development and test environment",
      "pos": [
        15060,
        15122
      ]
    },
    {
      "content": "Organizations are looking for more agile ways to create SharePoint applications and set up SharePoint environments for onshore/offshore development and testing.",
      "pos": [
        15124,
        15284
      ]
    },
    {
      "content": "Fundamentally, they want to shorten the time required to set up SharePoint application development projects, and decrease cost by increasing the use of their test environments.",
      "pos": [
        15285,
        15461
      ]
    },
    {
      "content": "For example, an organization might want to perform on-demand load testing on SharePoint Server and execute user acceptance testing (UAT) with more concurrent users in different geographic locations.",
      "pos": [
        15462,
        15660
      ]
    },
    {
      "content": "Similarly, integrating onshore/offshore teams is an increasingly important business need for many of today's organizations.",
      "pos": [
        15661,
        15784
      ]
    },
    {
      "content": "This scenario explains how organizations can use preconfigured SharePoint farms for development and test workloads.",
      "pos": [
        15786,
        15901
      ]
    },
    {
      "content": "A SharePoint deployment topology looks and feels exactly as it would in an on-premises virtualized deployment.",
      "pos": [
        15902,
        16012
      ]
    },
    {
      "content": "Existing IT skills translate 1:1 to an Azure virtual machines deployment, with the major benefit being an almost complete cost shift from capital expenditures to operational expenditures.",
      "pos": [
        16013,
        16200
      ]
    },
    {
      "content": "No upfront physical server purchase is required.",
      "pos": [
        16201,
        16249
      ]
    },
    {
      "content": "Organizations can eliminate the capital cost for server hardware and achieve flexibility by greatly reducing the provisioning time required to create, set up, or extend a SharePoint farm for a testing and development environment.",
      "pos": [
        16250,
        16479
      ]
    },
    {
      "content": "IT can dynamically add and remove capacity to support the changing needs of testing and development.",
      "pos": [
        16480,
        16580
      ]
    },
    {
      "content": "Plus, IT can focus more on delivering business value with SharePoint projects and less on managing infrastructure.",
      "pos": [
        16581,
        16695
      ]
    },
    {
      "content": "To fully utilize load-testing computers, organizations can configure SharePoint virtualized development and test computers on Azure with operating system support for Windows Sever 2008 R2.",
      "pos": [
        16697,
        16885
      ]
    },
    {
      "content": "This enables development teams to create and test applications and easily migrate to on-premises or cloud production environments without code changes.",
      "pos": [
        16886,
        17037
      ]
    },
    {
      "content": "The same frameworks and toolsets can be used on-premises and in the cloud, allowing distributed team access to the same environment.",
      "pos": [
        17038,
        17170
      ]
    },
    {
      "content": "Users also can access on-premises data and applications by establishing a direct VPN connection.",
      "pos": [
        17171,
        17267
      ]
    },
    {
      "content": "Figure 3 shows a SharePoint development and testing environment on an Azure virtual machine.",
      "pos": [
        17269,
        17361
      ]
    },
    {
      "content": "To build this deployment, start by using the same on-premises SharePoint development and testing environment used to develop applications.",
      "pos": [
        17362,
        17500
      ]
    },
    {
      "content": "Then, upload and deploy the applications to the Azure virtual machine for testing and development.",
      "pos": [
        17501,
        17599
      ]
    },
    {
      "content": "If your organization decides to move the application back on-premises, it can do so without having to modify the application.",
      "pos": [
        17600,
        17725
      ]
    },
    {
      "content": "Figure 3: SharePoint development and testing environment on Azure virtual machines",
      "pos": [
        17729,
        17811
      ]
    },
    {
      "content": "To implement a SharePoint development and testing environment on Azure, follow these steps:",
      "pos": [
        17815,
        17906
      ]
    },
    {
      "content": "Provision: First, provision a VPN connection between on-premises and Azure using Azure Virtual Network.",
      "pos": [
        17911,
        18014
      ]
    },
    {
      "content": "(Because Active Directory is not used here, a VPN tunnel is needed.) For more information, go to <bpt id=\"p1\">[</bpt>Virtual Network overview<ept id=\"p1\">](../virtual-network/virtual-networks-overview.md)</ept>.",
      "pos": [
        18015,
        18188
      ]
    },
    {
      "content": "Then, use the Azure portal to provision a new virtual machine using a stock image from the image library.",
      "pos": [
        18189,
        18294
      ]
    },
    {
      "content": "You can upload the on-premises SharePoint development and testing virtual machines to your Azure storage account and reference those virtual machines through the image library for building the required environment.",
      "pos": [
        18301,
        18515
      ]
    },
    {
      "content": "You can use the SQL Server 2012 image instead of the Windows Server 2008 R2 SP1 image.",
      "pos": [
        18522,
        18608
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Provision a SQL Server virtual machine on Azure<ept id=\"p1\">](virtual-machines-provision-sql-server.md)</ept>.",
      "pos": [
        18609,
        18729
      ]
    },
    {
      "content": "Install: Install SharePoint Server, Visual Studio, and SQL Server on the virtual machines using a Remote Desktop connection.",
      "pos": [
        18734,
        18858
      ]
    },
    {
      "content": "Use the SharePoint 2010 Easy Setup Script to build a SharePoint developer machine.",
      "pos": [
        18865,
        18947
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>SharePoint 2010 Easy Setup Script<ept id=\"p1\">](http://www.microsoft.com/download/details.aspx?id=23415)</ept>.",
      "pos": [
        18948,
        19069
      ]
    },
    {
      "content": "Use Windows PowerShell.",
      "pos": [
        19070,
        19093
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SharePoint Server 2010 by using Windows PowerShell<ept id=\"p1\">](http://technet.microsoft.com/library/cc262839.aspx)</ept>.",
      "pos": [
        19094,
        19235
      ]
    },
    {
      "content": "Use the CodePlex Project's AutoSPInstaller.",
      "pos": [
        19236,
        19279
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>CodePlex: AutoSPInstaller<ept id=\"p1\">](http://autospinstaller.codeplex.com/)</ept>.",
      "pos": [
        19280,
        19374
      ]
    },
    {
      "content": "Install Visual Studio.",
      "pos": [
        19381,
        19403
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Visual Studio installation<ept id=\"p1\">](http://msdn.microsoft.com/library/e2h7fzkw.aspx)</ept>.",
      "pos": [
        19404,
        19510
      ]
    },
    {
      "content": "Install SQL Server.",
      "pos": [
        19517,
        19536
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SQL Server using SysPrep<ept id=\"p1\">](http://msdn.microsoft.com/library/ee210664.aspx)</ept>.",
      "pos": [
        19537,
        19649
      ]
    },
    {
      "content": "Develop deployment packages and scripts for applications and databases: If you plan to use an available virtual machine from the image library, the desired on-premises applications and databases can be deployed on Azure virtual machines:",
      "pos": [
        19653,
        19890
      ]
    },
    {
      "content": "Create deployment packages for the existing on-premises applications and databases using SQL Server Data Tools and Visual Studio.",
      "pos": [
        19897,
        20026
      ]
    },
    {
      "content": "Use these packages to deploy the applications and databases on Azure virtual machines.",
      "pos": [
        20033,
        20119
      ]
    },
    {
      "content": "Deploy SharePoint applications and databases:",
      "pos": [
        20123,
        20168
      ]
    },
    {
      "content": "Configure security on the Azure portal endpoint and set an inbound port in the virtual machine's Windows Firewall.",
      "pos": [
        20175,
        20289
      ]
    },
    {
      "content": "Deploy SharePoint applications and databases to Azure virtual machines using the deployment packages and scripts created in step 3.",
      "pos": [
        20296,
        20427
      ]
    },
    {
      "content": "Test deployed applications and databases.",
      "pos": [
        20430,
        20471
      ]
    },
    {
      "content": "Manage virtual machines:",
      "pos": [
        20475,
        20499
      ]
    },
    {
      "content": "Monitor the virtual machines using the Azure portal.",
      "pos": [
        20506,
        20558
      ]
    },
    {
      "content": "Monitor the applications using Visual Studio and SQL Server Management Studio.",
      "pos": [
        20565,
        20643
      ]
    },
    {
      "content": "You also can monitor and manage the virtual machines using on-premises management software, like Microsoft System Center Operations Manager.",
      "pos": [
        20650,
        20790
      ]
    },
    {
      "content": "Scenario 2: Public-facing SharePoint farm with customization",
      "pos": [
        20796,
        20856
      ]
    },
    {
      "content": "Organizations want to create an Internet presence that is hosted in the cloud and is easily scalable based on need and demand.",
      "pos": [
        20858,
        20984
      ]
    },
    {
      "content": "They also want to create partner extranet websites for collaboration and implement an easy process for distributed authoring and approval of website content.",
      "pos": [
        20985,
        21142
      ]
    },
    {
      "content": "Finally, to handle increasing loads, these organizations want to provide capacity on demand to their websites.",
      "pos": [
        21143,
        21253
      ]
    },
    {
      "content": "In this scenario, SharePoint Server is used as the basis for hosting a public-facing website.",
      "pos": [
        21255,
        21348
      ]
    },
    {
      "content": "It enables organizations to rapidly deploy, customize, and host their business websites on a secure, scalable cloud infrastructure.",
      "pos": [
        21349,
        21480
      ]
    },
    {
      "content": "With SharePoint public-facing websites on Azure, organizations can scale as traffic grows and pay only for what they use.",
      "pos": [
        21481,
        21602
      ]
    },
    {
      "content": "Common tools, similar to those used on-premises, can be used for content authoring, workflow, and approval with SharePoint on Azure.",
      "pos": [
        21603,
        21735
      ]
    },
    {
      "content": "Further, using Azure Virtual Machines, organizations can easily configure staging and production environments running on virtual machines.",
      "pos": [
        21737,
        21875
      ]
    },
    {
      "content": "SharePoint public-facing virtual machines created in Azure can be backed up to virtual storage.",
      "pos": [
        21876,
        21971
      ]
    },
    {
      "content": "In addition, for disaster recovery purposes, the Continuous Geo-Replication feature allows organizations to automatically back up virtual machines located in one datacenter to another datacenter miles away.",
      "pos": [
        21972,
        22178
      ]
    },
    {
      "content": "Virtual machines in the Azure infrastructure are validated and supported for working with other Microsoft products, such as SQL Server and SharePoint Server.",
      "pos": [
        22180,
        22337
      ]
    },
    {
      "content": "Azure and SharePoint Server are better together: Both are thoroughly integrated, supported, and tested together to provide an optimal experience.",
      "pos": [
        22338,
        22483
      ]
    },
    {
      "content": "They both have a single point of support for the SharePoint application and the Azure infrastructure.",
      "pos": [
        22484,
        22585
      ]
    },
    {
      "content": "In this scenario, more front-end web servers for SharePoint Server must be added to support extra traffic.",
      "pos": [
        22587,
        22693
      ]
    },
    {
      "content": "These servers require enhanced security and Active Directory Domain Services domain controllers to support user authentication and authorization.",
      "pos": [
        22694,
        22839
      ]
    },
    {
      "content": "Figure 4 shows the layout for this scenario.",
      "pos": [
        22840,
        22884
      ]
    },
    {
      "content": "azure-sharepoint-wp-12",
      "pos": [
        22888,
        22910
      ]
    },
    {
      "content": "Figure 4: Public-facing SharePoint farm with customization",
      "pos": [
        22991,
        23049
      ]
    },
    {
      "content": "To implement a public-facing SharePoint farm on Azure, follow these steps:",
      "pos": [
        23053,
        23127
      ]
    },
    {
      "content": "Deploy Active Directory: The fundamental requirements for deploying Active Directory on Azure virtual machines are similar but not identical to deploying it on virtual machines (and, to some extent, physical machines) on-premises.",
      "pos": [
        23132,
        23362
      ]
    },
    {
      "content": "For more information about the differences, guidelines, and other considerations, go to <bpt id=\"p1\">[</bpt>Guidelines for deploying Active Directory on Azure Virtual Machines<ept id=\"p1\">](http://msdn.microsoft.com/library/jj156090)</ept>.",
      "pos": [
        23363,
        23565
      ]
    },
    {
      "content": "To deploy Active Directory in Azure:",
      "pos": [
        23566,
        23602
      ]
    },
    {
      "content": "Define and create a virtual network where the virtual machines can be assigned to specific subnets.",
      "pos": [
        23609,
        23708
      ]
    },
    {
      "content": "Use the Azure portal to create and deploy the domain controller on a new virtual machine on Azure.",
      "pos": [
        23715,
        23813
      ]
    },
    {
      "content": "You also can refer to the Windows PowerShell script to deploy a stand-alone domain in the cloud using Azure Virtual Machines and Azure Virtual Network.",
      "pos": [
        23814,
        23965
      ]
    },
    {
      "content": "For more information about creating a new Active Directory forest on a virtual machine on Azure Virtual Network, go to <bpt id=\"p1\">[</bpt>Install a new Active Directory forest in Azure<ept id=\"p1\">](active-directory-new-forest-virtual-machine.md)</ept>.",
      "pos": [
        23966,
        24182
      ]
    },
    {
      "content": "Provision a virtual machine: Use the Azure portal to provision a new virtual machine from a stock image in the image library.",
      "pos": [
        24186,
        24311
      ]
    },
    {
      "content": "Deploy a SharePoint farm.",
      "pos": [
        24315,
        24340
      ]
    },
    {
      "content": "Use the Azure portal to configure the load balancing.",
      "pos": [
        24347,
        24400
      ]
    },
    {
      "content": "Configure the virtual machine endpoints, select the option to load balance traffic on an existing endpoint, and then specify the name of the load-balanced virtual machine.",
      "pos": [
        24401,
        24572
      ]
    },
    {
      "content": "Add another front-end web virtual machine to the existing SharePoint farm for extra traffic.",
      "pos": [
        24579,
        24671
      ]
    },
    {
      "content": "Manage virtual machines:",
      "pos": [
        24675,
        24699
      ]
    },
    {
      "content": "Monitor the virtual machines using the Azure portal.",
      "pos": [
        24706,
        24758
      ]
    },
    {
      "content": "Monitor the SharePoint farm using Central Administration.",
      "pos": [
        24765,
        24822
      ]
    },
    {
      "content": "Scenario 3: Scaled-out farm for additional BI services",
      "pos": [
        24828,
        24882
      ]
    },
    {
      "content": "Business intelligence (BI) is essential to gaining key insights and making rapid, sound decisions.",
      "pos": [
        24884,
        24982
      ]
    },
    {
      "content": "As organizations transition from an on-premises approach, they do not want to make changes to the BI environment while deploying existing BI applications to the cloud.",
      "pos": [
        24983,
        25150
      ]
    },
    {
      "content": "They want to host reports from SQL Server Analysis Services (SSAS) or SQL Server Reporting Services (SSRS) in a highly durable and available environment, while keeping full control of the BI application - all without spending much time and budget on maintenance.",
      "pos": [
        25151,
        25413
      ]
    },
    {
      "content": "This scenario describes how organizations can use Azure virtual machines to host mission-critical BI applications.",
      "pos": [
        25415,
        25529
      ]
    },
    {
      "content": "Organizations can deploy SharePoint farms in Azure virtual machines and scale out the application server virtual machine's BI components, like SSRS or Excel Services.",
      "pos": [
        25530,
        25696
      ]
    },
    {
      "content": "By scaling resource-intensive components in the cloud, they can better and more easily support specialized workloads.",
      "pos": [
        25697,
        25814
      ]
    },
    {
      "content": "Note that SQL Server in Azure virtual machines performs well, as it is easy to scale SQL Server instances, ranging from small to extra-large installations.",
      "pos": [
        25815,
        25970
      ]
    },
    {
      "content": "This provides elasticity, enabling organizations to dynamically provision (expand) or de-provision (shrink) BI instances based on immediate workload requirements.",
      "pos": [
        25971,
        26133
      ]
    },
    {
      "content": "Migrating existing BI applications to Azure provides better scaling.",
      "pos": [
        26135,
        26203
      ]
    },
    {
      "content": "With the power of SQL Server Analysis Services (SSAS), SQL Server Reporting Service (SSRS), and SharePoint Server, organizations can create powerful BI and reporting applications and dashboards that scale up or down.",
      "pos": [
        26204,
        26420
      ]
    },
    {
      "content": "These applications and dashboards also can be more securely integrated with on-premises data and applications.",
      "pos": [
        26421,
        26531
      ]
    },
    {
      "content": "Azure ensures datacenter compliance with support for ISO 27001.",
      "pos": [
        26532,
        26595
      ]
    },
    {
      "content": "For more information, go to the <bpt id=\"p1\">[</bpt>Azure trust center<ept id=\"p1\">](http://azure.microsoft.com/support/trust-center/compliance/)</ept>.",
      "pos": [
        26596,
        26710
      ]
    },
    {
      "content": "To scale out the deployment of BI components, a new application server with services such as PowerPivot, Power View, Excel Services, or PerformancePoint services must be installed.",
      "pos": [
        26712,
        26892
      ]
    },
    {
      "content": "Or, SQL Server BI instances like SSAS or SSRS must be added to the existing farm to support additional query processing.",
      "pos": [
        26893,
        27013
      ]
    },
    {
      "content": "The server can be added as a new Azure virtual machine with SharePoint 2010 Server or SQL Server installed.",
      "pos": [
        27014,
        27121
      ]
    },
    {
      "content": "Then, the BI components can be installed, deployed, and configured on that server (Figure 5).",
      "pos": [
        27122,
        27215
      ]
    },
    {
      "content": "azure-sharepoint-wp-13",
      "pos": [
        27219,
        27241
      ]
    },
    {
      "content": "Figure 5: Scaled-out SharePoint farm for additional BI services",
      "pos": [
        27322,
        27385
      ]
    },
    {
      "content": "To scale out a BI environment on Azure, follow these steps:",
      "pos": [
        27389,
        27448
      ]
    },
    {
      "content": "Provision:",
      "pos": [
        27453,
        27463
      ]
    },
    {
      "content": "Provision a VPN connection between on-premises and Azure using Azure Virtual Network.",
      "pos": [
        27470,
        27555
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Virtual Network Overview<ept id=\"p1\">](http://msdn.microsoft.com/library/jj156007.aspx)</ept>.",
      "pos": [
        27556,
        27660
      ]
    },
    {
      "content": "Use the Azure portal to provision a new virtual machine from a stock image in the image library.",
      "pos": [
        27667,
        27763
      ]
    },
    {
      "content": "You can upload SharePoint Server or SQL Server BI workload images to the image library and any authorized user can pick those BI component virtual machines to build the scaled-out environment.",
      "pos": [
        27764,
        27956
      ]
    },
    {
      "content": "Install:",
      "pos": [
        27960,
        27968
      ]
    },
    {
      "content": "If your organization does not have prebuilt images of SharePoint Server or SQL Server BI components, install SharePoint Server and SQL Server on the virtual machines using a Remote Desktop connection.",
      "pos": [
        27976,
        28176
      ]
    },
    {
      "pos": [
        28183,
        28421
      ],
      "content": "For more information about installing SharePoint, go to <bpt id=\"p1\">[</bpt>Install SharePoint Server 2010 by using Windows PowerShell<ept id=\"p1\">](http://technet.microsoft.com/library/cc262839.aspx)</ept> or <bpt id=\"p2\">[</bpt>CodePlex: AutoSPInstaller<ept id=\"p2\">](http://autospinstaller.codeplex.com/)</ept>."
    },
    {
      "pos": [
        28428,
        28568
      ],
      "content": "For more information about installing SQL Server, go to <bpt id=\"p1\">[</bpt>Install SQL Server using SysPrep<ept id=\"p1\">](http://msdn.microsoft.com/library/ee210664.aspx)</ept>."
    },
    {
      "content": "Add the BI virtual machine:",
      "pos": [
        28572,
        28599
      ]
    },
    {
      "content": "Configure security on the Azure portal endpoint and set an inbound port in the virtual machine's Windows Firewall.",
      "pos": [
        28606,
        28720
      ]
    },
    {
      "content": "Add the newly created BI virtual machine to the existing SharePoint or SQL Server farm.",
      "pos": [
        28727,
        28814
      ]
    },
    {
      "content": "Manage virtual machines:",
      "pos": [
        28818,
        28842
      ]
    },
    {
      "content": "Monitor the virtual machines using the Azure portal.",
      "pos": [
        28849,
        28901
      ]
    },
    {
      "content": "Monitor the SharePoint farm using Central Administration.",
      "pos": [
        28908,
        28965
      ]
    },
    {
      "content": "Monitor and manage the virtual machines using on-premises management software like Microsoft System Center - Operations Manager.",
      "pos": [
        28972,
        29100
      ]
    },
    {
      "content": "Scenario 4: Completely customized SharePoint-based website",
      "pos": [
        29106,
        29164
      ]
    },
    {
      "content": "Increasingly, organizations want to create fully customized SharePoint websites in the cloud.",
      "pos": [
        29166,
        29259
      ]
    },
    {
      "content": "They need a highly durable and available environment that offers full control to maintain complex applications running in the cloud, but they do not want to spend a large amount of time and budget.",
      "pos": [
        29260,
        29457
      ]
    },
    {
      "content": "In this scenario, an organization can deploy its entire SharePoint farm in the cloud and dynamically scale all components to get additional capacity, or it can extend its on-premises deployment to the cloud to increase capacity and improve performance, when needed.",
      "pos": [
        29459,
        29724
      ]
    },
    {
      "content": "The scenario focuses on organizations that want the full SharePoint experience for application development and enterprise content management.",
      "pos": [
        29725,
        29866
      ]
    },
    {
      "content": "The more complex sites also can include enhanced reporting, Power View, PerformancePoint, PowerPivot, in-depth charts, and most other SharePoint site capabilities for end-to-end, full functionality.",
      "pos": [
        29867,
        30065
      ]
    },
    {
      "content": "Organizations can use Azure virtual machines to host customized applications and associated components on a cost-effective and highly secure cloud infrastructure.",
      "pos": [
        30067,
        30229
      ]
    },
    {
      "content": "They also can use on-premises Microsoft System Center as a common management tool for on-premises and cloud applications.",
      "pos": [
        30230,
        30351
      ]
    },
    {
      "content": "To implement a completely customized SharePoint website on Azure, an organization must deploy an Active Directory domain in the cloud and provision new virtual machines into this domain.",
      "pos": [
        30353,
        30539
      ]
    },
    {
      "content": "Then, a virtual machine running SQL Server 2012 must be created and configured as part of a SharePoint farm.",
      "pos": [
        30540,
        30648
      ]
    },
    {
      "content": "Finally, the SharePoint farm must be created, load balanced, and connected to Active Directory and SQL Server (Figure 6).",
      "pos": [
        30649,
        30770
      ]
    },
    {
      "content": "azure-sharepoint-wp-14",
      "pos": [
        30774,
        30796
      ]
    },
    {
      "content": "Figure 6: Completely customized SharePoint-based website",
      "pos": [
        30877,
        30933
      ]
    },
    {
      "content": "The following steps show how to create a customized SharePoint farm environment from prebuilt images available in the image library.",
      "pos": [
        30937,
        31069
      ]
    },
    {
      "content": "Note, however, that you also can upload SharePoint farm virtual machines to the image library, and authorized users can choose those virtual machines to build the required SharePoint farm on Azure.",
      "pos": [
        31070,
        31267
      ]
    },
    {
      "content": "Deploy Active Directory: The fundamental requirements for deploying Active Directory on Azure virtual machines are similar but not identical to deploying it on virtual machines (and, to some extent, physical machines) on-premises.",
      "pos": [
        31272,
        31502
      ]
    },
    {
      "content": "For more information about the differences, guidelines, and other considerations, go to <bpt id=\"p1\">[</bpt>Guidelines for deploying Active Directory on Azure virtual machines<ept id=\"p1\">](http://msdn.microsoft.com/library/jj156090)</ept>.",
      "pos": [
        31503,
        31705
      ]
    },
    {
      "content": "To deploy Active Directory in Azure:",
      "pos": [
        31706,
        31742
      ]
    },
    {
      "content": "Define and create a virtual network where the virtual machines can be assigned to specific subnets.",
      "pos": [
        31749,
        31848
      ]
    },
    {
      "content": "Use the Azure Portal to create and deploy the domain controller on a new virtual machine on Azure.",
      "pos": [
        31855,
        31953
      ]
    },
    {
      "pos": [
        31960,
        32173
      ],
      "content": "For more information about creating a new Active Directory forest on a virtual machine on Azure Virtual Network, go to <bpt id=\"p1\">[</bpt>Install a new Active Directory forest in Azure<ept id=\"p1\">](active-directory-new-forest-virtual-machine)</ept>."
    },
    {
      "content": "Deploy SQL Server:",
      "pos": [
        32177,
        32195
      ]
    },
    {
      "content": "Use the Azure portal to provision a new virtual machine from a stock image in the image library.",
      "pos": [
        32202,
        32298
      ]
    },
    {
      "content": "Configure SQL Server on the virtual machine.",
      "pos": [
        32305,
        32349
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Install SQL Server using SysPrep<ept id=\"p1\">](http://msdn.microsoft.com/library/ee210664.aspx)</ept>.",
      "pos": [
        32350,
        32462
      ]
    },
    {
      "content": "Join the virtual machine to the newly created Active Directory domain.",
      "pos": [
        32469,
        32539
      ]
    },
    {
      "content": "Deploy a multi-server SharePoint farm:",
      "pos": [
        32543,
        32581
      ]
    },
    {
      "content": "Create a virtual network.",
      "pos": [
        32588,
        32613
      ]
    },
    {
      "content": "For more information, go to <bpt id=\"p1\">[</bpt>Virtual Network overview<ept id=\"p1\">](http://msdn.microsoft.com/library/jj156007.aspx)</ept>.",
      "pos": [
        32614,
        32718
      ]
    },
    {
      "content": "When deploying the SharePoint virtual machines, you need subnets provided for SharePoint Server so that the DNS addresses in the local Active Directory box are available during provisioning.",
      "pos": [
        32725,
        32915
      ]
    },
    {
      "content": "Use the Azure portal to create a virtual machine.",
      "pos": [
        32922,
        32971
      ]
    },
    {
      "content": "Install SharePoint Server on this virtual machine and generate a reusable image.",
      "pos": [
        32978,
        33058
      ]
    },
    {
      "content": "For more information about installing SharePoint Server, go to <bpt id=\"p1\">[</bpt>Install and configure SharePoint Server 2010 by using Windows PowerShell<ept id=\"p1\">](http://technet.microsoft.com/library/cc262839.aspx)</ept> or <bpt id=\"p2\">[</bpt>CodePlex: AutoSPInstaller<ept id=\"p2\">](http://autospinstaller.codeplex.com/)</ept>.",
      "pos": [
        33059,
        33318
      ]
    },
    {
      "pos": [
        33325,
        33503
      ],
      "content": "Configure the SharePoint virtual machine to create and connect to the SharePoint farm using the <bpt id=\"p1\">[</bpt>Join-SharePointFarm<ept id=\"p1\">](http://technet.microsoft.com/library/ff607979.aspx)</ept> command."
    },
    {
      "content": "Use the Azure portal to configure the load balancing: Configure the virtual machine endpoints, select the option to load balance traffic on an existing endpoint, and then specify the name of the load-balanced virtual machine.",
      "pos": [
        33510,
        33735
      ]
    },
    {
      "content": "Manage the SharePoint farm through System Center:",
      "pos": [
        33739,
        33788
      ]
    },
    {
      "content": "Use the Operations Manager agent and new Azure Integration Pack to connect your on-premises System Center to Azure virtual machines.",
      "pos": [
        33795,
        33927
      ]
    },
    {
      "content": "Use on-premises App Controller and Orchestrator for management functions.",
      "pos": [
        33934,
        34007
      ]
    },
    {
      "content": "Summary",
      "pos": [
        34012,
        34019
      ]
    },
    {
      "content": "Azure virtual machines provide a full continuum of SharePoint deployments.",
      "pos": [
        34021,
        34095
      ]
    },
    {
      "content": "It is fully supported and tested to provide an optimal experience with other Microsoft applications.",
      "pos": [
        34096,
        34196
      ]
    },
    {
      "content": "As such, organizations can easily set up and deploy SharePoint Server within Azure, either to provision infrastructure for a new SharePoint deployment or to expand an existing one.",
      "pos": [
        34197,
        34377
      ]
    },
    {
      "content": "As business workloads grow, organizations can rapidly expand their SharePoint infrastructure.",
      "pos": [
        34378,
        34471
      ]
    },
    {
      "content": "Likewise, if workload needs decline, organizations can contract resources on demand, paying only for what they use.",
      "pos": [
        34472,
        34587
      ]
    },
    {
      "content": "Azure virtual machines deliver an exceptional infrastructure for a wide range of business requirements, as shown in the four SharePoint-based scenarios discussed in this article.",
      "pos": [
        34588,
        34766
      ]
    },
    {
      "content": "Successful deployment of SharePoint Server on Azure virtual machines requires solid planning, especially considering the range of critical farm architecture and deployment options.",
      "pos": [
        34768,
        34948
      ]
    },
    {
      "content": "The insights and best practices outlined in this article can help to guide decisions for implementing an informed SharePoint deployment.",
      "pos": [
        34949,
        35085
      ]
    },
    {
      "content": "Additional resources",
      "pos": [
        35090,
        35110
      ]
    },
    {
      "content": "SharePoint on Azure virtual machines",
      "pos": [
        35113,
        35149
      ]
    },
    {
      "content": "SharePoint farms hosted in Azure infrastructure services",
      "pos": [
        35202,
        35258
      ]
    },
    {
      "content": "Azure infrastructure services workload: Intranet SharePoint farm",
      "pos": [
        35318,
        35382
      ]
    },
    {
      "content": "Azure infrastructure services implementation guidelines",
      "pos": [
        35438,
        35493
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"SharePoint Server 2010 on Azure VMs | Microsoft Azure\"\n    description=\"Learn the value of SharePoint on Azure virtual machines, the step-by-step process, and the supported scenarios for using SharePoint 2010.\"\n    services=\"virtual-machines\"\n    documentationCenter=\"\"\n    authors=\"JoeDavies-MSFT\"\n    manager=\"timlt\"\n    editor=\"\"\n    tags=\"azure-service-management\"/>\n\n<tags\n    ms.service=\"virtual-machines\"\n    ms.workload=\"infrastructure-services\"\n    ms.tgt_pltfrm=\"vm-windows-sharepoint\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"07/09/2015\"\n    ms.author=\"josephd\"/>\n\n\n# SharePoint 2010 deployment on Azure virtual machines\n\nMicrosoft SharePoint Server 2010 provides rich deployment flexibility, which can help organizations determine the appropriate deployment scenarios to align with their business needs and objectives. Hosted and managed in Microsoft Azure, the Azure Virtual Machines offering provides complete, reliable, and available infrastructure to support various on-demand application and database workloads, such as Microsoft SQL Server and SharePoint deployments.\n\nWhile Azure virtual machines support multiple workloads, this article focuses on SharePoint deployments. Azure virtual machines enable organizations to create and manage their SharePoint infrastructure by quickly provisioning and accessing nearly any host universally. It allows full control and management over processors, RAM, CPU ranges, and other resources of SharePoint virtual machines.\n\nAzure virtual machines mitigate the need for hardware, so organizations can turn attention from handling high, upfront cost and complexity to building and managing infrastructure at scale. This means that they can innovate, experiment, and iterate in hours, as opposed to days and weeks with traditional deployments.\n\n> [AZURE.NOTE] For information about deploying SharePoint 2013 in Azure, see [Planning for SharePoint 2013 on Azure infrastructure services](https://msdn.microsoft.com/library/dn275958.aspx) and [SharePoint farms hosted in Azure infrastructure services](virtual-machines-sharepoint-infrastructure-services.md).\n\n## SharePoint on Azure virtual machines\n\nSharePoint 2010 flexibly supports most of the workloads in an Azure virtual machines deployment. Azure virtual machines are an optimal fit for FIS (SharePoint Server for Internet sites) and development scenarios. Core SharePoint workloads are also supported. If an organization wants to manage and control its own SharePoint 2010 implementation while capitalizing on options for virtualization in a cloud infrastructure, Azure virtual machines are ideal for deployment.\n\nThe Azure Virtual Machines offering is hosted and managed in the cloud. It provides deployment flexibility and reduces cost by mitigating capital expenditures due to hardware procurement. With increased infrastructure agility, organizations can deploy SharePoint Server in hours, as opposed to days or weeks. Azure virtual machines also enable organizations to deploy SharePoint workloads in the cloud using a \"pay-as-you-go\" model. As SharePoint workloads grow, an organization can rapidly expand the infrastructure. Then, when computing needs decline, it can return the resources that are no longer needed, thereby paying only for what is used.\n\n### Shift in IT focus\n\nMany organizations contract out the common components of their IT infrastructure and management, such as hardware, operating systems, security, data storage, and backup, while maintaining control of mission-critical applications, such as SharePoint Server. By delegating all non-mission-critical service layers of their IT platforms to a virtual provider, organizations can shift their IT focus to core, mission-critical SharePoint services and deliver business value with SharePoint projects, instead of spending more time on setting up infrastructure.\n\n### Faster deployment\n\nSupporting and deploying a large SharePoint infrastructure can hamper IT's ability to move rapidly to support business requirements. The time that is required to build, test, and prepare SharePoint servers and farms and deploy them into a production environment can take weeks or even months, depending on the processes and constraints of the organization. Azure virtual machines allow organizations to quickly deploy their SharePoint workloads without capital expenditures for hardware. In this way, organizations can capitalize on infrastructure agility to deploy in hours instead of days or weeks.\n\n### Scalability\n\nWithout the need to deploy, test, and prepare physical SharePoint servers and farms, organizations can expand and contract compute capacity on demand, at a moment's notice. As SharePoint workload requirements grow, an organization can rapidly expand its cloud infrastructure. Likewise, when computing needs decrease, the organization can diminish resources, paying only for what it uses. The Azure virtual machines reduce upfront expenses and long-term commitments, enabling organizations to build and manage SharePoint infrastructures at scale. Again, this means that these organizations can innovate, experiment, and iterate in hours, as opposed to days and weeks using traditional deployments.\n\n### Metered usage\n\nAzure virtual machines provide computing power, memory, and storage for SharePoint scenarios, whose prices are typically based on resource consumption. Organizations pay only for what they use, and the service provides all capacity needed for running the SharePoint infrastructure. For more information about pricing and billing, go to [Azure pricing details](http://azure.microsoft.com/pricing/). Note that there are nominal charges for storage and data transfers from Azure to an on-premises network. However, Azure does not charge for uploading data.\n\n### Flexibility\n\nAzure virtual machines provide developers with the flexibility to pick their desired language or runtime environment, with official support for .NET, Node.js, Java, and PHP. Developers also can choose their tools, with support for Microsoft Visual Studio, WebMatrix, Eclipse, and text editors. Further, Microsoft delivers a low-cost, low-risk path to the cloud and offers cost-effective, easy provisioning and deployment for cloud reporting needs while providing access to business intelligence (BI) across devices and locations. Finally, with the Azure offering, users not only can move VHDs to the cloud, but also can copy a VHD back down and run it locally or through another cloud provider, as long as they have the appropriate license.\n\n## Provisioning process\n\nThe image library in Azure provides the list of available preconfigured virtual machines. Users can publish SharePoint Server, SQL Server, Windows Server, and other ISO/VHDs to the image library. To simplify the creation of virtual machines, base images are created and published to the library. Authorized users can use these images to generate the desired virtual machine. For more information, go to [Create a virtual machine running Windows in the Azure preview portal](virtual-machines-windows-tutorial.md). Figure 1 shows the basic steps for creating a virtual machine using the Azure portal.\n\n**Figure 1: Overview of steps for creating a virtual machine**\n\nUsers also can upload a sysprepped image on the Azure Management Portal. For more information, go to [Create and upload a Windows Server VHD to Azure](virtual-machines-create-upload-vhd-windows-server.md). Figure 2 shows the basic steps for uploading an image to create a VM.\n\nOn the Azure portal, users also can upload an image on which the SysPrep tool has already been run. For more information, go to [Create and upload a Windows Server VHD to Azure](virtual-machines-create-upload-vhd-windows-server.md). Figure 2 shows the basic steps for uploading an image to create a virtual machine.\n\n**Figure 2: Overview of steps for uploading an image**\n\n## Deploying SharePoint 2010 on Azure \n\nYou can deploy SharePoint 2010 on Azure by following these steps:\n\n1. Sign in to the [Azure Management Portal](http://manage.windowsazure.com/) through your Azure subscription account. If you do not have an Azure account, [sign up for a free trial of Azure](http://azure.microsoft.com/pricing/free-trial/).\n2. To create a virtual machine with the base operating system, on the Azure portal, click **New > Compute > Virtual Machine > From Gallery**.\n3. The **Choose an image** dialog box appears. Click the **Windows Server 2008 R2 SP1** platform image, and then click the right arrow.\n4. The **Virtual machine configuration** dialog box appears. Provide the following information:\n    - Enter a **Virtual Machine Name**.\n    - Select the appropriate size. For a production environment (SharePoint application server and database), we recommend to use A3 (4 Core, 7 gigabyte (GB) memory) or larger.\n    - In **New User Name**, type a local administrator account name.\n    - In **New Password**, type a strong password.\n    - In **Confirm**, retype the password, and then click the right arrow.\n5. The second **Virtual machine configuration** dialog box appears. Provide the following information:\n    - In **Cloud Service**, select **Create a new cloud service**, in which case you must also provide a cloud service DNS name, or select an existing cloud service.\n    - In **Region/Affinity Group/Virtual Network**, select the region where the virtual image will be hosted.\n    - In the **Storage account**, click **Use an automatically generated storage account** or select an existing storage account name. Only one storage account per region is automatically created. All other virtual machines created with this setting are located in this Storage account. You are limited to 20 Storage accounts. For more information, go to [Create a Storage account in Azure](virtual-machines-create-upload-vhd-windows-server.md#step-2-create-a-storage-account-in-azure).\n    - In **Availability Set**, select **(none)**, and then click the right arrow.\n6. In the third **Virtual machine configuration** dialog box, click the checkmark to create the virtual machine.\n\nTo connect to the virtual machine, see [How to sign in to a virtual machine running Windows Server](virtual-machines-log-on-windows-server.md).\n\nBuild the SQL Server virtual machine using any of the following options:\n\n- Create a SQL Server 2012 virtual machine by following steps 1 to 7 above, except in step 3, use the SQL Server 2012 image instead of the Windows Server 2008 R2 SP1 image. For more information, go to [Provisioning a SQL Server virtual machine on Azure](virtual-machines-provision-sql-server.md).\n    - When you click this option, the provisioning process keeps a copy of SQL Server 2012 setup files in the C:\\SQLServer_11.0_Full directory path so that you can customize the installation. For example, you can convert the evaluation installation of SQL Server 2012 to a licensed version by using your license key.\n\n- Use the SQL Server System Preparation (SysPrep) tool to install SQL Server on the virtual machine with the base operating system (as shown above in steps 1 to 7). For more information, go to [Install SQL Server 2012 using SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).\n\n- Use the command prompt to install SQL Server. For more information, go to [Install SQL Server 2012 from the command prompt](http://msdn.microsoft.com/library/ms144259.aspx#SysPrep).\n\n- Use supported SQL Server media and your license key to install SQL Server on the virtual machine with the base operating system (as shown above in steps 1 to 7).\n\nBuild the SharePoint farm using the following steps:\n\nStep 1. Configure the Azure subscription using script files.\n\nStep 2. Provision SharePoint servers by creating another virtual machine with base operating system (as shown above in steps 1 to 6). To build a SharePoint server on this virtual machine, choose one of the following options:\n\n- Provision using the SharePoint GUI:\n    - To create and provision a SharePoint farm, go to [Create a Microsoft SharePoint server farm](http://technet.microsoft.com/library/ee805948.aspx#CreateConfigure).\n    - To add a web or application server to the farm, go to [Add a web or application server to the farm](http://technet.microsoft.com/library/cc261752.aspx).\n    - To add a database server to an existing farm, go to [Add a database server to an existing farm](http://technet.microsoft.com/library/cc262781).\n    - To use SQL Server 2012 for your SharePoint farm, you must download and install Service Pack 1 for SharePoint Server 2010 after installing the application and choosing not to configure the server. For more information, go to [Service Pack 1 for SharePoint Server 2010](http://www.microsoft.com/download/details.aspx?id=26623).\n    - To take advantage of SQL Server BI features, we recommend to install SharePoint Server as a server farm instead of a standalone server. For more information, go to [Install SQL Server 2012 business intelligence features](http://technet.microsoft.com/library/hh231681.aspx).\n\n- Provision using Windows PowerShell: You can use the Psconfig command-line tool as an alternative interface to perform several operations that control how SharePoint 2010 products are provisioned. For more information, go to [Psconfig command-line reference](http://technet.microsoft.com/library/cc263093.aspx).\n\nStep 3. Configure SharePoint. After each SharePoint virtual machine is in the ready state, configure SharePoint Server on each server by using one of the following options:\n\n- Configure SharePoint from the GUI.\n- Configure SharePoint using Windows PowerShell. For more information, go to [Install SharePoint Server 2010 by using Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx).\n- You also can use the CodePlex Project's AutoSPInstaller, which consists of Windows PowerShell scripts, an XML input file, and a standard Microsoft Windows batch file. AutoSPInstaller provides a framework for a SharePoint 2010 installation script based on Windows PowerShell. For more information, go to [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).\n\nStep 4. After the script is finished, connect to the virtual machine using the Virtual Machine Dashboard.\n\nTo verify the SharePoint configuration, sign in to the SharePoint Server, and then use Central Administration.\n\n> [AZURE.NOTE] Be sure to configure security on the Azure portal endpoint and set an inbound port on the virtual machine's Windows Firewall. Then, confirm that you can start a remote Windows PowerShell session to one of the SharePoint application servers by opening a Windows PowerShell session with administrator credentials.\n\n### Creating and uploading a virtual hard disk\n\nYou also can create your own images and upload them to Azure as a VHD file. For information, see [Create and upload a Windows Server VHD to Azure](virtual-machines-create-upload-vhd-windows-server.md).\n\n## Usage scenarios\n\nThis section discusses some leading customer scenarios for SharePoint deployments using Azure virtual machines.\n\n### Scenario 1: Simple SharePoint development and test environment\n\nOrganizations are looking for more agile ways to create SharePoint applications and set up SharePoint environments for onshore/offshore development and testing. Fundamentally, they want to shorten the time required to set up SharePoint application development projects, and decrease cost by increasing the use of their test environments. For example, an organization might want to perform on-demand load testing on SharePoint Server and execute user acceptance testing (UAT) with more concurrent users in different geographic locations. Similarly, integrating onshore/offshore teams is an increasingly important business need for many of today's organizations.\n\nThis scenario explains how organizations can use preconfigured SharePoint farms for development and test workloads. A SharePoint deployment topology looks and feels exactly as it would in an on-premises virtualized deployment. Existing IT skills translate 1:1 to an Azure virtual machines deployment, with the major benefit being an almost complete cost shift from capital expenditures to operational expenditures. No upfront physical server purchase is required. Organizations can eliminate the capital cost for server hardware and achieve flexibility by greatly reducing the provisioning time required to create, set up, or extend a SharePoint farm for a testing and development environment. IT can dynamically add and remove capacity to support the changing needs of testing and development. Plus, IT can focus more on delivering business value with SharePoint projects and less on managing infrastructure.\n\nTo fully utilize load-testing computers, organizations can configure SharePoint virtualized development and test computers on Azure with operating system support for Windows Sever 2008 R2. This enables development teams to create and test applications and easily migrate to on-premises or cloud production environments without code changes. The same frameworks and toolsets can be used on-premises and in the cloud, allowing distributed team access to the same environment. Users also can access on-premises data and applications by establishing a direct VPN connection.\n\nFigure 3 shows a SharePoint development and testing environment on an Azure virtual machine. To build this deployment, start by using the same on-premises SharePoint development and testing environment used to develop applications. Then, upload and deploy the applications to the Azure virtual machine for testing and development. If your organization decides to move the application back on-premises, it can do so without having to modify the application.\n\n**Figure 3: SharePoint development and testing environment on Azure virtual machines**\n\nTo implement a SharePoint development and testing environment on Azure, follow these steps:\n\n1. Provision: First, provision a VPN connection between on-premises and Azure using Azure Virtual Network. (Because Active Directory is not used here, a VPN tunnel is needed.) For more information, go to [Virtual Network overview](../virtual-network/virtual-networks-overview.md). Then, use the Azure portal to provision a new virtual machine using a stock image from the image library.\n    - You can upload the on-premises SharePoint development and testing virtual machines to your Azure storage account and reference those virtual machines through the image library for building the required environment.\n    - You can use the SQL Server 2012 image instead of the Windows Server 2008 R2 SP1 image. For more information, go to [Provision a SQL Server virtual machine on Azure](virtual-machines-provision-sql-server.md).\n\n2. Install: Install SharePoint Server, Visual Studio, and SQL Server on the virtual machines using a Remote Desktop connection.\n    - Use the SharePoint 2010 Easy Setup Script to build a SharePoint developer machine. For more information, go to [SharePoint 2010 Easy Setup Script](http://www.microsoft.com/download/details.aspx?id=23415). Use Windows PowerShell. For more information, go to [Install SharePoint Server 2010 by using Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx). Use the CodePlex Project's AutoSPInstaller. For more information, go to [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).\n    - Install Visual Studio. For more information, go to [Visual Studio installation](http://msdn.microsoft.com/library/e2h7fzkw.aspx).\n    - Install SQL Server. For more information, go to [Install SQL Server using SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).\n3. Develop deployment packages and scripts for applications and databases: If you plan to use an available virtual machine from the image library, the desired on-premises applications and databases can be deployed on Azure virtual machines:\n    - Create deployment packages for the existing on-premises applications and databases using SQL Server Data Tools and Visual Studio.\n    - Use these packages to deploy the applications and databases on Azure virtual machines.\n4. Deploy SharePoint applications and databases:\n    - Configure security on the Azure portal endpoint and set an inbound port in the virtual machine's Windows Firewall.\n    - Deploy SharePoint applications and databases to Azure virtual machines using the deployment packages and scripts created in step 3.\n- Test deployed applications and databases.\n5. Manage virtual machines:\n    - Monitor the virtual machines using the Azure portal.\n    - Monitor the applications using Visual Studio and SQL Server Management Studio.\n    - You also can monitor and manage the virtual machines using on-premises management software, like Microsoft System Center Operations Manager.\n\n### Scenario 2: Public-facing SharePoint farm with customization\n\nOrganizations want to create an Internet presence that is hosted in the cloud and is easily scalable based on need and demand. They also want to create partner extranet websites for collaboration and implement an easy process for distributed authoring and approval of website content. Finally, to handle increasing loads, these organizations want to provide capacity on demand to their websites.\n\nIn this scenario, SharePoint Server is used as the basis for hosting a public-facing website. It enables organizations to rapidly deploy, customize, and host their business websites on a secure, scalable cloud infrastructure. With SharePoint public-facing websites on Azure, organizations can scale as traffic grows and pay only for what they use. Common tools, similar to those used on-premises, can be used for content authoring, workflow, and approval with SharePoint on Azure.\n\nFurther, using Azure Virtual Machines, organizations can easily configure staging and production environments running on virtual machines. SharePoint public-facing virtual machines created in Azure can be backed up to virtual storage. In addition, for disaster recovery purposes, the Continuous Geo-Replication feature allows organizations to automatically back up virtual machines located in one datacenter to another datacenter miles away.\n\nVirtual machines in the Azure infrastructure are validated and supported for working with other Microsoft products, such as SQL Server and SharePoint Server. Azure and SharePoint Server are better together: Both are thoroughly integrated, supported, and tested together to provide an optimal experience. They both have a single point of support for the SharePoint application and the Azure infrastructure.\n\nIn this scenario, more front-end web servers for SharePoint Server must be added to support extra traffic. These servers require enhanced security and Active Directory Domain Services domain controllers to support user authentication and authorization. Figure 4 shows the layout for this scenario.\n\n![azure-sharepoint-wp-12](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-12.png)\n\n**Figure 4: Public-facing SharePoint farm with customization**\n\nTo implement a public-facing SharePoint farm on Azure, follow these steps:\n\n1. Deploy Active Directory: The fundamental requirements for deploying Active Directory on Azure virtual machines are similar but not identical to deploying it on virtual machines (and, to some extent, physical machines) on-premises. For more information about the differences, guidelines, and other considerations, go to [Guidelines for deploying Active Directory on Azure Virtual Machines](http://msdn.microsoft.com/library/jj156090). To deploy Active Directory in Azure:\n    - Define and create a virtual network where the virtual machines can be assigned to specific subnets.\n    - Use the Azure portal to create and deploy the domain controller on a new virtual machine on Azure. You also can refer to the Windows PowerShell script to deploy a stand-alone domain in the cloud using Azure Virtual Machines and Azure Virtual Network. For more information about creating a new Active Directory forest on a virtual machine on Azure Virtual Network, go to [Install a new Active Directory forest in Azure](active-directory-new-forest-virtual-machine.md).\n2. Provision a virtual machine: Use the Azure portal to provision a new virtual machine from a stock image in the image library.\n3. Deploy a SharePoint farm.\n    - Use the Azure portal to configure the load balancing. Configure the virtual machine endpoints, select the option to load balance traffic on an existing endpoint, and then specify the name of the load-balanced virtual machine.\n    - Add another front-end web virtual machine to the existing SharePoint farm for extra traffic.\n3. Manage virtual machines:\n    - Monitor the virtual machines using the Azure portal.\n    - Monitor the SharePoint farm using Central Administration.\n\n### Scenario 3: Scaled-out farm for additional BI services\n\nBusiness intelligence (BI) is essential to gaining key insights and making rapid, sound decisions. As organizations transition from an on-premises approach, they do not want to make changes to the BI environment while deploying existing BI applications to the cloud. They want to host reports from SQL Server Analysis Services (SSAS) or SQL Server Reporting Services (SSRS) in a highly durable and available environment, while keeping full control of the BI application - all without spending much time and budget on maintenance.\n\nThis scenario describes how organizations can use Azure virtual machines to host mission-critical BI applications. Organizations can deploy SharePoint farms in Azure virtual machines and scale out the application server virtual machine's BI components, like SSRS or Excel Services. By scaling resource-intensive components in the cloud, they can better and more easily support specialized workloads. Note that SQL Server in Azure virtual machines performs well, as it is easy to scale SQL Server instances, ranging from small to extra-large installations. This provides elasticity, enabling organizations to dynamically provision (expand) or de-provision (shrink) BI instances based on immediate workload requirements.\n\nMigrating existing BI applications to Azure provides better scaling. With the power of SQL Server Analysis Services (SSAS), SQL Server Reporting Service (SSRS), and SharePoint Server, organizations can create powerful BI and reporting applications and dashboards that scale up or down. These applications and dashboards also can be more securely integrated with on-premises data and applications. Azure ensures datacenter compliance with support for ISO 27001. For more information, go to the [Azure trust center](http://azure.microsoft.com/support/trust-center/compliance/).\n\nTo scale out the deployment of BI components, a new application server with services such as PowerPivot, Power View, Excel Services, or PerformancePoint services must be installed. Or, SQL Server BI instances like SSAS or SSRS must be added to the existing farm to support additional query processing. The server can be added as a new Azure virtual machine with SharePoint 2010 Server or SQL Server installed. Then, the BI components can be installed, deployed, and configured on that server (Figure 5).\n\n![azure-sharepoint-wp-13](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-13.png)\n\n**Figure 5: Scaled-out SharePoint farm for additional BI services**\n\nTo scale out a BI environment on Azure, follow these steps:\n\n1. Provision:\n    - Provision a VPN connection between on-premises and Azure using Azure Virtual Network. For more information, go to [Virtual Network Overview](http://msdn.microsoft.com/library/jj156007.aspx).\n    - Use the Azure portal to provision a new virtual machine from a stock image in the image library. You can upload SharePoint Server or SQL Server BI workload images to the image library and any authorized user can pick those BI component virtual machines to build the scaled-out environment.\n2. Install: \n    - If your organization does not have prebuilt images of SharePoint Server or SQL Server BI components, install SharePoint Server and SQL Server on the virtual machines using a Remote Desktop connection.\n    - For more information about installing SharePoint, go to [Install SharePoint Server 2010 by using Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx) or [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).\n    - For more information about installing SQL Server, go to [Install SQL Server using SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).\n3. Add the BI virtual machine:\n    - Configure security on the Azure portal endpoint and set an inbound port in the virtual machine's Windows Firewall.\n    - Add the newly created BI virtual machine to the existing SharePoint or SQL Server farm.\n4. Manage virtual machines:\n    - Monitor the virtual machines using the Azure portal.\n    - Monitor the SharePoint farm using Central Administration.\n    - Monitor and manage the virtual machines using on-premises management software like Microsoft System Center - Operations Manager.\n\n### Scenario 4: Completely customized SharePoint-based website\n\nIncreasingly, organizations want to create fully customized SharePoint websites in the cloud. They need a highly durable and available environment that offers full control to maintain complex applications running in the cloud, but they do not want to spend a large amount of time and budget.\n\nIn this scenario, an organization can deploy its entire SharePoint farm in the cloud and dynamically scale all components to get additional capacity, or it can extend its on-premises deployment to the cloud to increase capacity and improve performance, when needed. The scenario focuses on organizations that want the full SharePoint experience for application development and enterprise content management. The more complex sites also can include enhanced reporting, Power View, PerformancePoint, PowerPivot, in-depth charts, and most other SharePoint site capabilities for end-to-end, full functionality.\n\nOrganizations can use Azure virtual machines to host customized applications and associated components on a cost-effective and highly secure cloud infrastructure. They also can use on-premises Microsoft System Center as a common management tool for on-premises and cloud applications.\n\nTo implement a completely customized SharePoint website on Azure, an organization must deploy an Active Directory domain in the cloud and provision new virtual machines into this domain. Then, a virtual machine running SQL Server 2012 must be created and configured as part of a SharePoint farm. Finally, the SharePoint farm must be created, load balanced, and connected to Active Directory and SQL Server (Figure 6).\n\n![azure-sharepoint-wp-14](./media/virtual-machines-deploy-sharepoint-2010/azure-sharepoint-wp-14.png)\n\n**Figure 6: Completely customized SharePoint-based website**\n\nThe following steps show how to create a customized SharePoint farm environment from prebuilt images available in the image library. Note, however, that you also can upload SharePoint farm virtual machines to the image library, and authorized users can choose those virtual machines to build the required SharePoint farm on Azure.\n\n1. Deploy Active Directory: The fundamental requirements for deploying Active Directory on Azure virtual machines are similar but not identical to deploying it on virtual machines (and, to some extent, physical machines) on-premises. For more information about the differences, guidelines, and other considerations, go to [Guidelines for deploying Active Directory on Azure virtual machines](http://msdn.microsoft.com/library/jj156090). To deploy Active Directory in Azure:\n    - Define and create a virtual network where the virtual machines can be assigned to specific subnets.\n    - Use the Azure Portal to create and deploy the domain controller on a new virtual machine on Azure.\n    - For more information about creating a new Active Directory forest on a virtual machine on Azure Virtual Network, go to [Install a new Active Directory forest in Azure](active-directory-new-forest-virtual-machine).\n2. Deploy SQL Server:\n    - Use the Azure portal to provision a new virtual machine from a stock image in the image library.\n    - Configure SQL Server on the virtual machine. For more information, go to [Install SQL Server using SysPrep](http://msdn.microsoft.com/library/ee210664.aspx).\n    - Join the virtual machine to the newly created Active Directory domain.\n3. Deploy a multi-server SharePoint farm:\n    - Create a virtual network. For more information, go to [Virtual Network overview](http://msdn.microsoft.com/library/jj156007.aspx).\n    - When deploying the SharePoint virtual machines, you need subnets provided for SharePoint Server so that the DNS addresses in the local Active Directory box are available during provisioning.\n    - Use the Azure portal to create a virtual machine.\n    - Install SharePoint Server on this virtual machine and generate a reusable image. For more information about installing SharePoint Server, go to [Install and configure SharePoint Server 2010 by using Windows PowerShell](http://technet.microsoft.com/library/cc262839.aspx) or [CodePlex: AutoSPInstaller](http://autospinstaller.codeplex.com/).\n    - Configure the SharePoint virtual machine to create and connect to the SharePoint farm using the [Join-SharePointFarm](http://technet.microsoft.com/library/ff607979.aspx) command.\n    - Use the Azure portal to configure the load balancing: Configure the virtual machine endpoints, select the option to load balance traffic on an existing endpoint, and then specify the name of the load-balanced virtual machine.\n4. Manage the SharePoint farm through System Center:\n    - Use the Operations Manager agent and new Azure Integration Pack to connect your on-premises System Center to Azure virtual machines.\n    - Use on-premises App Controller and Orchestrator for management functions.\n\n## Summary\n\nAzure virtual machines provide a full continuum of SharePoint deployments. It is fully supported and tested to provide an optimal experience with other Microsoft applications. As such, organizations can easily set up and deploy SharePoint Server within Azure, either to provision infrastructure for a new SharePoint deployment or to expand an existing one. As business workloads grow, organizations can rapidly expand their SharePoint infrastructure. Likewise, if workload needs decline, organizations can contract resources on demand, paying only for what they use. Azure virtual machines deliver an exceptional infrastructure for a wide range of business requirements, as shown in the four SharePoint-based scenarios discussed in this article.\n\nSuccessful deployment of SharePoint Server on Azure virtual machines requires solid planning, especially considering the range of critical farm architecture and deployment options. The insights and best practices outlined in this article can help to guide decisions for implementing an informed SharePoint deployment.\n\n## Additional resources\n\n[SharePoint on Azure virtual machines](http://msdn.microsoft.com/library/dn275955.aspx)\n\n[SharePoint farms hosted in Azure infrastructure services](virtual-machines-sharepoint-infrastructure-services.md)\n\n[Azure infrastructure services workload: Intranet SharePoint farm](virtual-machines-workload-intranet-sharepoint-farm)\n\n[Azure infrastructure services implementation guidelines](virtual-machines-infrastructure-services-implementation-guidelines.md)\n"
}