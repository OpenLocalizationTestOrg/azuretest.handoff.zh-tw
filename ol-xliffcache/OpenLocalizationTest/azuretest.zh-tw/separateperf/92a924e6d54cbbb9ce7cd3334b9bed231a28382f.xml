{
  "nodes": [
    {
      "content": "Inserting Ads on the Client Side",
      "pos": [
        28,
        60
      ]
    },
    {
      "content": "This topic shows how to insert ads on the client side.",
      "pos": [
        80,
        134
      ]
    },
    {
      "content": "Inserting Ads on the Client Side",
      "pos": [
        448,
        480
      ]
    },
    {
      "content": "This topic contains information on how to insert various types of ads on the client side.",
      "pos": [
        482,
        571
      ]
    },
    {
      "pos": [
        573,
        782
      ],
      "content": "For information about closed captioning and ad support in Live streaming videos, see <bpt id=\"p1\">[</bpt>Supported Closed Captioning and Ad Insertion Standards<ept id=\"p1\">](https://msdn.microsoft.com/library/azure/dn783466.aspx#caption_ad)</ept>."
    },
    {
      "pos": [
        788,
        851
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"insert_ads_into_media\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Inserting Ads into your Media"
    },
    {
      "content": "Azure Media Services provides support for ad insertion through the Windows Media Platform: Player Frameworks.",
      "pos": [
        853,
        962
      ]
    },
    {
      "content": "Player frameworks with ad support are available for Windows 8, Silverlight, Windows Phone 8, and iOS devices.",
      "pos": [
        963,
        1072
      ]
    },
    {
      "content": "Each player framework contains sample code that shows you how to implement a player application.There are three different kinds of ads you can insert into your media:list.",
      "pos": [
        1073,
        1244
      ]
    },
    {
      "pos": [
        1248,
        1302
      ],
      "content": "<bpt id=\"p1\">**</bpt>Linear<ept id=\"p1\">**</ept> – full frame ads that pause the main video."
    },
    {
      "pos": [
        1305,
        1444
      ],
      "content": "<bpt id=\"p1\">**</bpt>Nonlinear<ept id=\"p1\">**</ept> – overlay ads that are displayed as the main video is playing, usually a logo or other static image placed within the player."
    },
    {
      "pos": [
        1447,
        1508
      ],
      "content": "<bpt id=\"p1\">**</bpt>Companion<ept id=\"p1\">**</ept> – ads that are displayed outside of the player."
    },
    {
      "content": "Ads can be placed at any point in the main video’s time line.",
      "pos": [
        1510,
        1571
      ]
    },
    {
      "content": "You must tell the player when to play the ad and which ads to play.",
      "pos": [
        1572,
        1639
      ]
    },
    {
      "content": "This is done using a set of standard XML-based files: Video Ad Service Template (VAST), Digital Video Multiple Ad Playlist (VMAP), Media Abstract Sequencing Template (MAST), and Digital Video Player Ad Interface Definition (VPAID).",
      "pos": [
        1640,
        1871
      ]
    },
    {
      "content": "VAST files specify what ads to display.",
      "pos": [
        1872,
        1911
      ]
    },
    {
      "content": "VMAP files specify when to play various ads and contain VAST XML.",
      "pos": [
        1912,
        1977
      ]
    },
    {
      "content": "MAST files are another way to sequence ads which also can contain VAST XML.",
      "pos": [
        1978,
        2053
      ]
    },
    {
      "content": "VPAID files define an interface between the video player and the ad or ad server.",
      "pos": [
        2054,
        2135
      ]
    },
    {
      "content": "Each player framework works differently and each will be covered in its own topic.",
      "pos": [
        2137,
        2219
      ]
    },
    {
      "content": "This topic will describe the basic mechanisms used to insert ads.Video player applications request ads from an ad server.",
      "pos": [
        2220,
        2341
      ]
    },
    {
      "content": "The ad server can respond in a number of ways:",
      "pos": [
        2342,
        2388
      ]
    },
    {
      "content": "Return a VAST file",
      "pos": [
        2392,
        2410
      ]
    },
    {
      "content": "Return a VMAP file (with embedded VAST)",
      "pos": [
        2413,
        2452
      ]
    },
    {
      "content": "Return a MAST file (with embedded VAST)",
      "pos": [
        2455,
        2494
      ]
    },
    {
      "content": "Return a VAST file with VPAID ads",
      "pos": [
        2497,
        2530
      ]
    },
    {
      "content": "Using a Video Ad Service Template (VAST) File",
      "pos": [
        2537,
        2582
      ]
    },
    {
      "content": "A VAST file specifies what ad or ads to display.",
      "pos": [
        2584,
        2632
      ]
    },
    {
      "content": "The following XML is an example of a VAST file for a linear ad:",
      "pos": [
        2633,
        2696
      ]
    },
    {
      "content": "The linear ad is described by the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;Linear&gt;</ph><ept id=\"p1\">**</ept> element.",
      "pos": [
        5017,
        5072
      ]
    },
    {
      "content": "It specifies the duration of the ad, tracking events, click through, click tracking, and a number of <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;MediaFile&gt;</ph><ept id=\"p1\">**</ept> elements.",
      "pos": [
        5073,
        5199
      ]
    },
    {
      "content": "Tracking events are specified within the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;TrackingEvents&gt;</ph><ept id=\"p1\">**</ept> element and allow an ad server to track various events that occur while viewing the ad.",
      "pos": [
        5200,
        5349
      ]
    },
    {
      "content": "In this case the start, midpoint, complete, and expand events are tracked.",
      "pos": [
        5350,
        5424
      ]
    },
    {
      "content": "The start event occurs when the ad is displayed.",
      "pos": [
        5425,
        5473
      ]
    },
    {
      "content": "The midpoint event occurs when at least 50% of the ad’s timeline has been viewed.",
      "pos": [
        5474,
        5555
      ]
    },
    {
      "content": "The complete event occurs when the ad has run to the end.",
      "pos": [
        5556,
        5613
      ]
    },
    {
      "content": "The Expand event occurs when the user expands the video player to full screen.",
      "pos": [
        5614,
        5692
      ]
    },
    {
      "content": "Clickthroughs are specified with a <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;ClickThrough&gt;</ph><ept id=\"p1\">**</ept> element within a <bpt id=\"p2\">**</bpt><ph id=\"ph2\">&lt;VideoClicks&gt;</ph><ept id=\"p2\">**</ept> element and specifies a URI to a resource to display when the user clicks on the ad.",
      "pos": [
        5693,
        5866
      ]
    },
    {
      "content": "ClickTracking is specified in a <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;ClickTracking&gt;</ph><ept id=\"p1\">**</ept> element, also within the <bpt id=\"p2\">**</bpt><ph id=\"ph2\">&lt;VideoClicks&gt;</ph><ept id=\"p2\">**</ept> element and specifies a tracking resource for the player to request when the user clicks on the ad.The <bpt id=\"p3\">**</bpt><ph id=\"ph3\">&lt;MediaFile&gt;</ph><ept id=\"p3\">**</ept> elements specify information about a specific encoding of an ad.",
      "pos": [
        5867,
        6145
      ]
    },
    {
      "content": "When there is more than one <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;MediaFile&gt;</ph><ept id=\"p1\">**</ept> element, the video player can choose the best encoding for the platform.",
      "pos": [
        6146,
        6262
      ]
    },
    {
      "content": "Linear ads can be displayed in a specified order.",
      "pos": [
        6265,
        6314
      ]
    },
    {
      "content": "To do this, add additional",
      "pos": [
        6315,
        6341
      ]
    },
    {
      "content": "elements to the VAST file and specify the order using the sequence attribute.",
      "pos": [
        6347,
        6424
      ]
    },
    {
      "content": "The following example illustrates this:",
      "pos": [
        6425,
        6464
      ]
    },
    {
      "content": "Nonlinear ads are specified in a",
      "pos": [
        7979,
        8011
      ]
    },
    {
      "content": "element as well.",
      "pos": [
        8023,
        8039
      ]
    },
    {
      "content": "The following example shows a",
      "pos": [
        8040,
        8069
      ]
    },
    {
      "content": "element that describes a nonlinear ad.",
      "pos": [
        8081,
        8119
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;NonLinearAds&gt;</ph><ept id=\"p1\">**</ept> element can contain one or more <bpt id=\"p2\">**</bpt><ph id=\"ph2\">&lt;NonLinear&gt;</ph><ept id=\"p2\">**</ept> elements, each of which can describe a nonlinear ad.",
      "pos": [
        8813,
        8936
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;NonLinear&gt;</ph><ept id=\"p1\">**</ept> element specifies the resource for the nonlinear ad.",
      "pos": [
        8937,
        9009
      ]
    },
    {
      "content": "The resource can be a <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;StaticResouce&gt;</ph><ept id=\"p1\">**</ept>, an <bpt id=\"p2\">**</bpt><ph id=\"ph2\">&lt;IFrameResource&gt;</ph><ept id=\"p2\">**</ept>, or an <bpt id=\"p3\">**</bpt><ph id=\"ph3\">&lt;HTMLResouce&gt;</ph><ept id=\"p3\">**</ept>.<bpt id=\"p4\">**</bpt><ph id=\"ph4\">&lt;StaticResource&gt;</ph><ept id=\"p4\">**</ept> describes a non-HTML resource and defines a creativeType attribute that specifies how the resource is displayed:",
      "pos": [
        9010,
        9235
      ]
    },
    {
      "pos": [
        9237,
        9323
      ],
      "content": "Image/gif, image/jpeg, image/png – the resource is displayed in an HTML <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;img&gt;</ph><ept id=\"p1\">**</ept> tag."
    },
    {
      "pos": [
        9325,
        9406
      ],
      "content": "Application/x-javascript – the resource is displayed in an HTML &lt;<bpt id=\"p1\">**</bpt>script<ept id=\"p1\">**</ept>&gt; tag."
    },
    {
      "content": "Application/x-shockwave-flash – the resource is displayed in a Flash player.",
      "pos": [
        9408,
        9484
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;IFrameResource&gt;</ph><ept id=\"p1\">**</ept> describes an HTML resource that can be displayed in an IFrame.",
      "pos": [
        9486,
        9569
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;HTMLResource&gt;</ph><ept id=\"p1\">**</ept> describes a piece of HTML code that can be inserted into a web page.",
      "pos": [
        9570,
        9657
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;TrackingEvents&gt;</ph><ept id=\"p1\">**</ept> specify tracking events and the URI to request when the event occurs.",
      "pos": [
        9658,
        9748
      ]
    },
    {
      "content": "In this sample the acceptInvitation and collapse events are tracked.",
      "pos": [
        9749,
        9817
      ]
    },
    {
      "content": "For more information on the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;NonLinearAds&gt;</ph><ept id=\"p1\">**</ept> element and its children, see IAB.NET/VAST.",
      "pos": [
        9818,
        9908
      ]
    },
    {
      "content": "Note that the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;TrackingEvents&gt;</ph><ept id=\"p1\">**</ept> element is located within the**",
      "pos": [
        9909,
        9975
      ]
    },
    {
      "content": "** element rather than the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;NonLinear&gt;</ph><ept id=\"p1\">**</ept> element.",
      "pos": [
        9990,
        10041
      ]
    },
    {
      "content": "Companion ads are defined within a",
      "pos": [
        10043,
        10077
      ]
    },
    {
      "content": "element.",
      "pos": [
        10093,
        10101
      ]
    },
    {
      "content": "The",
      "pos": [
        10102,
        10105
      ]
    },
    {
      "content": "element can contain one or more",
      "pos": [
        10121,
        10152
      ]
    },
    {
      "content": "elements.",
      "pos": [
        10165,
        10174
      ]
    },
    {
      "content": "Each",
      "pos": [
        10175,
        10179
      ]
    },
    {
      "content": "element describes a companion ad and can contain a",
      "pos": [
        10192,
        10242
      ]
    },
    {
      "content": ",",
      "pos": [
        10259,
        10260
      ]
    },
    {
      "content": ", or",
      "pos": [
        10277,
        10281
      ]
    },
    {
      "content": "which are specified in the same way as in a nonlinear ad.",
      "pos": [
        10297,
        10354
      ]
    },
    {
      "content": "A VAST file can contain multiple companion ads and the player application can choose the most appropriate ad to display.",
      "pos": [
        10355,
        10475
      ]
    },
    {
      "content": "For more information about VAST, see <bpt id=\"p1\">[</bpt>VAST 3.0<ept id=\"p1\">](http://www.iab.net/media/file/VASTv3.0.pdf)</ept>.",
      "pos": [
        10476,
        10568
      ]
    },
    {
      "content": "Using a Digital Video Multiple Ad Playlist (VMAP) File",
      "pos": [
        10573,
        10627
      ]
    },
    {
      "content": "A VMAP file allows you to specify when ad breaks occur, how long each break is, how many ads can be displayed within a break, and what types of ads may be displayed during a break.",
      "pos": [
        10629,
        10809
      ]
    },
    {
      "content": "The following in an example VMAP file that defines a single ad break:",
      "pos": [
        10810,
        10879
      ]
    },
    {
      "content": "A VMAP file begins with a",
      "pos": [
        13960,
        13985
      ]
    },
    {
      "content": "element that contains one or more",
      "pos": [
        13993,
        14026
      ]
    },
    {
      "content": "elements, each defining an ad break.",
      "pos": [
        14037,
        14073
      ]
    },
    {
      "content": "Each ad break specifies a break type, break ID, and time offset.",
      "pos": [
        14074,
        14138
      ]
    },
    {
      "content": "The breakType attribute specifies the type of ad that can be played during the break: linear, nonlinear, or display.",
      "pos": [
        14139,
        14255
      ]
    },
    {
      "content": "Display ads map to VAST companion ads.",
      "pos": [
        14256,
        14294
      ]
    },
    {
      "content": "More than one ad type can be specified in a comma (no spaces) separated list.",
      "pos": [
        14295,
        14372
      ]
    },
    {
      "content": "The breakID is an optional identifier for the ad.",
      "pos": [
        14373,
        14422
      ]
    },
    {
      "content": "The timeOffset specifies when the ad should be displayed.",
      "pos": [
        14423,
        14480
      ]
    },
    {
      "content": "It can be specified in one of the following ways:",
      "pos": [
        14481,
        14530
      ]
    },
    {
      "content": "Time – in hh:mm:ss or hh:mm:ss.mmm format where .mmm is milliseconds.",
      "pos": [
        14535,
        14604
      ]
    },
    {
      "content": "The value of this attribute specifies the time from the beginning of the video timeline to the beginning of the ad break.",
      "pos": [
        14605,
        14726
      ]
    },
    {
      "content": "Percentage – in n% format where n is the percentage of the video timeline to play before playing the ad",
      "pos": [
        14730,
        14833
      ]
    },
    {
      "content": "Start/End – specifies that an ad should be displayed before or after the video has been displayed",
      "pos": [
        14837,
        14934
      ]
    },
    {
      "content": "Position – specifies the order of ad breaks when the timing of the ad breaks is unknown, such as in live streaming.",
      "pos": [
        14938,
        15053
      ]
    },
    {
      "content": "The order of each ad break is specified in the #n format where n is an integer 1 or greater.",
      "pos": [
        15054,
        15146
      ]
    },
    {
      "content": "1 signifies the ad should be played at the first opportunity, 2 signifies the ad should be played at the second opportunity and so on.",
      "pos": [
        15147,
        15281
      ]
    },
    {
      "content": "Within the &lt;<bpt id=\"p1\">**</bpt>AdBreak<ept id=\"p1\">**</ept>&gt; element there can be one &lt;<bpt id=\"p2\">**</bpt>AdSource<ept id=\"p2\">**</ept>&gt; element.",
      "pos": [
        15283,
        15356
      ]
    },
    {
      "content": "The &lt;<bpt id=\"p1\">**</bpt>AdSource<ept id=\"p1\">**</ept>&gt; element contains the following attributes:",
      "pos": [
        15357,
        15418
      ]
    },
    {
      "content": "Id – specifies an identifier for the ad source",
      "pos": [
        15423,
        15469
      ]
    },
    {
      "content": "allowMultipleAds – a Boolean value that specifies whether multiple ads can be displayed during the ad break",
      "pos": [
        15473,
        15580
      ]
    },
    {
      "content": "followRedirects – an optional Boolean value that specifies if the video player should honor redirects within an ad response",
      "pos": [
        15584,
        15707
      ]
    },
    {
      "content": "The &lt;<bpt id=\"p1\">**</bpt>AdSource<ept id=\"p1\">**</ept>&gt; element provides the player an inline ad response or a reference to an ad response.",
      "pos": [
        15709,
        15811
      ]
    },
    {
      "content": "It can contain one of the following elements:",
      "pos": [
        15812,
        15857
      ]
    },
    {
      "content": "indicates a VAST ad response is embedded within the VMAP file",
      "pos": [
        15874,
        15935
      ]
    },
    {
      "content": "a URI that references an ad response from another system",
      "pos": [
        15949,
        16005
      ]
    },
    {
      "content": "-an arbitrary string that respresents a non-VAST response",
      "pos": [
        16023,
        16080
      ]
    },
    {
      "content": "In this example an in-line ad response is specified with a",
      "pos": [
        16082,
        16140
      ]
    },
    {
      "content": "element that contains a VAST ad response.",
      "pos": [
        16154,
        16195
      ]
    },
    {
      "content": "For more information about the other elements, see <bpt id=\"p1\">[</bpt>VMAP<ept id=\"p1\">](http://www.iab.net/guidelines/508676/digitalvideo/vsuite/vmap)</ept>.",
      "pos": [
        16196,
        16317
      ]
    },
    {
      "content": "The &lt;<bpt id=\"p1\">**</bpt>AdBreak<ept id=\"p1\">**</ept>&gt; element can also contain one &lt;<bpt id=\"p2\">**</bpt>TrackingEvents<ept id=\"p2\">**</ept>&gt; element.",
      "pos": [
        16319,
        16395
      ]
    },
    {
      "content": "The &lt;<bpt id=\"p1\">**</bpt>TrackingEvents<ept id=\"p1\">**</ept>&gt; element allows you to track the start or end of an ad break or whether an error occurred during the ad break.",
      "pos": [
        16396,
        16530
      ]
    },
    {
      "content": "The &lt;<bpt id=\"p1\">**</bpt>TrackingEvents<ept id=\"p1\">**</ept>&gt; element contains one or more &lt;<bpt id=\"p2\">**</bpt>Tracking<ept id=\"p2\">**</ept>&gt; elements, each of which specifies a tracking event and a tracking URI.",
      "pos": [
        16531,
        16670
      ]
    },
    {
      "content": "The possible tracking events are:",
      "pos": [
        16671,
        16704
      ]
    },
    {
      "content": "breakStart – tracks the beginning of an ad break",
      "pos": [
        16709,
        16757
      ]
    },
    {
      "content": "breakEnd – track the completion of an ad break",
      "pos": [
        16761,
        16807
      ]
    },
    {
      "content": "error – tracks an error that occurred during the ad break",
      "pos": [
        16811,
        16868
      ]
    },
    {
      "content": "The following example shows a VMAP file that specifies tracking events",
      "pos": [
        16870,
        16940
      ]
    },
    {
      "pos": [
        17720,
        17822
      ],
      "content": "For more information on the &lt;<bpt id=\"p1\">**</bpt>TrackingEvents<ept id=\"p1\">**</ept>&gt; element and its children, see http://iab.org/VMAP.pdf"
    },
    {
      "content": "Using a Media Abstract Sequencing Template (MAST) File",
      "pos": [
        17827,
        17881
      ]
    },
    {
      "content": "A MAST file allows you to specify triggers that define when an ad is displayed.",
      "pos": [
        17883,
        17962
      ]
    },
    {
      "content": "The following is an example MAST file that contains triggers for a pre roll ad, a mid-roll ad, and a post-roll ad.",
      "pos": [
        17963,
        18077
      ]
    },
    {
      "content": "A MAST file begins with a <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;MAST&gt;</ph><ept id=\"p1\">**</ept> element that contains one <bpt id=\"p2\">**</bpt><ph id=\"ph2\">&lt;triggers&gt;</ph><ept id=\"p2\">**</ept> element.",
      "pos": [
        19729,
        19815
      ]
    },
    {
      "content": "The",
      "pos": [
        19816,
        19819
      ]
    },
    {
      "content": "element contains one or more <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;trigger&gt;</ph><ept id=\"p1\">**</ept> elements that define when an ad should be played.",
      "pos": [
        19831,
        19923
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;trigger&gt;</ph><ept id=\"p1\">**</ept> element contains a <bpt id=\"p2\">**</bpt><ph id=\"ph2\">&lt;startConditions&gt;</ph><ept id=\"p2\">**</ept> element which specify when an ad should begin to play.",
      "pos": [
        19926,
        20039
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;startConditions&gt;</ph><ept id=\"p1\">**</ept> element contains one or more",
      "pos": [
        20040,
        20094
      ]
    },
    {
      "content": "elements.",
      "pos": [
        20107,
        20116
      ]
    },
    {
      "content": "When each",
      "pos": [
        20117,
        20126
      ]
    },
    {
      "content": "evaluates to true a trigger is initiated or revoked depending upon whether the",
      "pos": [
        20139,
        20217
      ]
    },
    {
      "content": "is contained within a <bpt id=\"p1\">**</bpt>&lt;startConditions<ept id=\"p1\">**</ept>&gt; or <bpt id=\"p2\">**</bpt><ph id=\"ph1\">&lt;endConditions&gt;</ph><ept id=\"p2\">**</ept> element respectively.",
      "pos": [
        20230,
        20318
      ]
    },
    {
      "content": "When multiple",
      "pos": [
        20319,
        20332
      ]
    },
    {
      "content": "elements are present, they are treated as an implicit OR, any condition evaluating to true will cause the trigger to initiate.",
      "pos": [
        20345,
        20471
      ]
    },
    {
      "content": "elements can be nested.",
      "pos": [
        20484,
        20507
      ]
    },
    {
      "content": "When child",
      "pos": [
        20508,
        20518
      ]
    },
    {
      "content": "elements are preset, they are treated as an implicit AND, all conditions must evaluate to true for the trigger to initiate.",
      "pos": [
        20531,
        20654
      ]
    },
    {
      "content": "The",
      "pos": [
        20655,
        20658
      ]
    },
    {
      "content": "element contains the following attributes that define the condition:",
      "pos": [
        20671,
        20739
      ]
    },
    {
      "pos": [
        20745,
        20806
      ],
      "content": "<bpt id=\"p1\">**</bpt>type<ept id=\"p1\">**</ept> – specifies the type of condition, event or property"
    },
    {
      "pos": [
        20810,
        20883
      ],
      "content": "<bpt id=\"p1\">**</bpt>name<ept id=\"p1\">**</ept> – the name of the property or event to be used during evaluation"
    },
    {
      "pos": [
        20887,
        20950
      ],
      "content": "<bpt id=\"p1\">**</bpt>value<ept id=\"p1\">**</ept> – the value that a property will be evaluated against"
    },
    {
      "pos": [
        20954,
        21131
      ],
      "content": "<bpt id=\"p1\">**</bpt>operator<ept id=\"p1\">**</ept> – the operation to use during evaluation: EQ (equal), NEQ (not equal), GTR (greater), GEQ (greater or equal), LT (Less than), LEQ (less than or equal), MOD (modulo)"
    },
    {
      "content": "<bpt id=\"p1\">**</bpt><ph id=\"ph1\">&lt;endConditions&gt;</ph><ept id=\"p1\">**</ept> also contain",
      "pos": [
        21133,
        21165
      ]
    },
    {
      "content": "elements.",
      "pos": [
        21178,
        21187
      ]
    },
    {
      "content": "When a condition evaluates to true the trigger is reset.The",
      "pos": [
        21188,
        21247
      ]
    },
    {
      "content": "element also contains a",
      "pos": [
        21258,
        21281
      ]
    },
    {
      "content": "element that contains one or more",
      "pos": [
        21292,
        21325
      ]
    },
    {
      "content": "elements.",
      "pos": [
        21335,
        21344
      ]
    },
    {
      "content": "The",
      "pos": [
        21345,
        21348
      ]
    },
    {
      "content": "elements define the URI to the ad response and the type of ad response.",
      "pos": [
        21358,
        21429
      ]
    },
    {
      "content": "In this example a URI is given to a VAST response.",
      "pos": [
        21430,
        21480
      ]
    },
    {
      "content": "Using Video Player-Ad Interface Definition (VPAID)",
      "pos": [
        21804,
        21854
      ]
    },
    {
      "content": "VPAID is an API for enabling executable ad units to communicate with a video player.",
      "pos": [
        21856,
        21940
      ]
    },
    {
      "content": "This allows highly interactive ad experiences.",
      "pos": [
        21941,
        21987
      ]
    },
    {
      "content": "The user can interact with the ad and the ad can respond to actions taken by the viewer.",
      "pos": [
        21988,
        22076
      ]
    },
    {
      "content": "For example an ad may display buttons that allow the user to view more information or a longer version of the ad.",
      "pos": [
        22077,
        22190
      ]
    },
    {
      "content": "The video player must support the VPAID API and the executable ad must implement the API.",
      "pos": [
        22191,
        22280
      ]
    },
    {
      "content": "When a player requests an ad from an ad server the server may respond with a VAST response that contains a VPAID ad.",
      "pos": [
        22281,
        22397
      ]
    },
    {
      "content": "An executable ad is created in code that must be executed in a runtime environment such as Adobe Flash™ or JavaScript that can be executed in a web browser.",
      "pos": [
        22399,
        22555
      ]
    },
    {
      "content": "When an ad server returns a VAST response containing a VPAID ad, the value of the apiFramework attribute in the",
      "pos": [
        22556,
        22667
      ]
    },
    {
      "content": "element must be “VPAID”.",
      "pos": [
        22680,
        22704
      ]
    },
    {
      "content": "This attribute specifies that the contained ad is a VPAID executable ad.",
      "pos": [
        22705,
        22777
      ]
    },
    {
      "content": "The type attribute must be set to the MIME type of the executable, such as “application/x-shockwave-flash” or “application/x-javascript”.",
      "pos": [
        22778,
        22915
      ]
    },
    {
      "content": "The following XML snippet shows the",
      "pos": [
        22916,
        22951
      ]
    },
    {
      "content": "element from a VAST response containing a VPAID executable ad.",
      "pos": [
        22964,
        23026
      ]
    },
    {
      "content": "An executable ad can be initialized using the",
      "pos": [
        23296,
        23341
      ]
    },
    {
      "content": "element within the",
      "pos": [
        23357,
        23375
      ]
    },
    {
      "content": "or",
      "pos": [
        23385,
        23387
      ]
    },
    {
      "content": "elements in a VAST response.",
      "pos": [
        23400,
        23428
      ]
    },
    {
      "content": "For more information on the",
      "pos": [
        23429,
        23456
      ]
    },
    {
      "content": "element, see <bpt id=\"p1\">[</bpt>VAST 3.0<ept id=\"p1\">](http://www.iab.net/media/file/VASTv3.0.pdf)</ept>.",
      "pos": [
        23472,
        23540
      ]
    },
    {
      "content": "For more information about the VPAID API, see <bpt id=\"p1\">[</bpt>VPAID 2.0<ept id=\"p1\">](http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf)</ept>.",
      "pos": [
        23541,
        23661
      ]
    },
    {
      "content": "Implementing a Windows or Windows Phone 8 Player with Ad Support",
      "pos": [
        23665,
        23729
      ]
    },
    {
      "content": "The Microsoft Media Platform: Player Framework for Windows 8 and Windows Phone 8 contains a collection of sample applications that show you how to implement a video player application using the framework.",
      "pos": [
        23731,
        23935
      ]
    },
    {
      "content": "You can download the Player Framework and the samples from <bpt id=\"p1\">[</bpt>Player Framework for Windows 8 and Windows Phone 8<ept id=\"p1\">](https://playerframework.codeplex.com)</ept>.",
      "pos": [
        23936,
        24086
      ]
    },
    {
      "content": "When you open the Microsoft.PlayerFramework.Xaml.Samples solution you will see a number of folders within the project.",
      "pos": [
        24088,
        24206
      ]
    },
    {
      "content": "The Advertising folder contains the sample code relevant to creating a video player with ad support.",
      "pos": [
        24207,
        24307
      ]
    },
    {
      "content": "Inside the Advertising folder is a number of XAML/cs files each of which show how to insert ads in a different way.",
      "pos": [
        24308,
        24423
      ]
    },
    {
      "content": "The following list describes each:",
      "pos": [
        24424,
        24458
      ]
    },
    {
      "content": "AdPodPage.xaml Shows how to display an ad pod.",
      "pos": [
        24462,
        24508
      ]
    },
    {
      "content": "AdSchedulingPage.xaml Shows how to schedule ads.",
      "pos": [
        24511,
        24559
      ]
    },
    {
      "content": "FreeWheelPage.xaml Shows how to use the FreeWheel plugin to schedule ads.",
      "pos": [
        24562,
        24635
      ]
    },
    {
      "content": "MastPage.xaml Shows how to schedule ads with a MAST file.",
      "pos": [
        24638,
        24695
      ]
    },
    {
      "content": "ProgrammaticAdPage.xaml Shows how to programmatically schedule ads into a video.",
      "pos": [
        24698,
        24778
      ]
    },
    {
      "content": "ScheduleClipPage.xaml Shows how to schedule an ad without a VAST file.",
      "pos": [
        24781,
        24851
      ]
    },
    {
      "content": "VastLinearCompanionPage.xaml Shows how to insert a linear and companion ad.",
      "pos": [
        24854,
        24929
      ]
    },
    {
      "content": "VastNonLinearPage.xaml Shows how to insert a non-linear ad.",
      "pos": [
        24932,
        24991
      ]
    },
    {
      "content": "VmapPage.xaml Shows how to specify ads with a VMAP file.",
      "pos": [
        24994,
        25050
      ]
    },
    {
      "content": "Each of these samples uses the MediaPlayer class defined by the player framework.",
      "pos": [
        25052,
        25133
      ]
    },
    {
      "content": "Most samples use plugins that add support for various ad response formats.",
      "pos": [
        25134,
        25208
      ]
    },
    {
      "content": "The ProgrammaticAdPage sample programmatically interacts with a MediaPlayer instance.",
      "pos": [
        25209,
        25294
      ]
    },
    {
      "content": "AdPodPage Sample",
      "pos": [
        25299,
        25315
      ]
    },
    {
      "content": "This sample uses the AdSchedulerPlugin to define when to display an ad.",
      "pos": [
        25317,
        25388
      ]
    },
    {
      "content": "In this example a mid-roll advertisement is scheduled to be played after 5 seconds.",
      "pos": [
        25389,
        25472
      ]
    },
    {
      "content": "The ad pod (a group of ads to display in order) is specified in a VAST file returned from an ad server.",
      "pos": [
        25473,
        25576
      ]
    },
    {
      "content": "The URI to the VAST file is specified in the",
      "pos": [
        25577,
        25621
      ]
    },
    {
      "content": "element.",
      "pos": [
        25639,
        25647
      ]
    },
    {
      "pos": [
        26452,
        26692
      ],
      "content": "For more information about the AdSchedulerPlugin, see <bpt id=\"p1\">[</bpt>Advertising in the Player Framework on Windows 8 and Windows Phone 8<ept id=\"p1\">](http://playerframework.codeplex.com/wikipage?title=Advertising&amp;referringTitle=Windows%208%20Player%20Documentation)</ept>"
    },
    {
      "content": "AdSchedulingPage",
      "pos": [
        26697,
        26713
      ]
    },
    {
      "content": "This sample also uses the AdSchedulerPlugin.",
      "pos": [
        26715,
        26759
      ]
    },
    {
      "content": "It schedules three ads, a pre-roll ad, a mid-roll ad, and a post-roll ad.",
      "pos": [
        26760,
        26833
      ]
    },
    {
      "content": "The URI to the VAST for each ad is specified in a",
      "pos": [
        26834,
        26883
      ]
    },
    {
      "content": "element.",
      "pos": [
        26901,
        26909
      ]
    },
    {
      "content": "FreeWheelPage",
      "pos": [
        28608,
        28621
      ]
    },
    {
      "content": "This sample uses the FreeWheelPlugin which specifies a Source attribute that specifies a URI that points to a SmartXML file that specifies ad content as well as ad scheduling information.",
      "pos": [
        28623,
        28810
      ]
    },
    {
      "content": "MastPage",
      "pos": [
        29210,
        29218
      ]
    },
    {
      "content": "This sample uses the MastSchedulerPlugin that allows you to use a MAST file.",
      "pos": [
        29220,
        29296
      ]
    },
    {
      "content": "The Source attribute specifies the location of the MAST file.",
      "pos": [
        29297,
        29358
      ]
    },
    {
      "content": "ProgrammaticAdPage",
      "pos": [
        29758,
        29776
      ]
    },
    {
      "content": "This sample programmatically interacts with the MediaPlayer.",
      "pos": [
        29778,
        29838
      ]
    },
    {
      "content": "The ProgrammaticAdPage.xaml file instantiates the MediaPlayer:",
      "pos": [
        29839,
        29901
      ]
    },
    {
      "content": "The ProgrammaticAdPage.xaml.cs file creates an AdHandlerPlugin, adds a TimelineMarker to specify when an ad should be displayed, and then adds a handler for the MarkerReached event which loads a RemoteAdSource specifying a URI to a VAST file, and then plays the ad.",
      "pos": [
        30014,
        30279
      ]
    },
    {
      "content": "ScheduleClipPage",
      "pos": [
        31608,
        31624
      ]
    },
    {
      "content": "This sample uses the AdSchedulerPlugin to schedule a mid-roll ad by specifying a .wmv file that contains the ad.",
      "pos": [
        31626,
        31738
      ]
    },
    {
      "content": "VastLinearCompanionPage",
      "pos": [
        32930,
        32953
      ]
    },
    {
      "content": "This sample illustrates how to use the AdSchedulerPlugin to schedule a mid-roll linear ad with an companion ad.",
      "pos": [
        32955,
        33066
      ]
    },
    {
      "content": "The",
      "pos": [
        33067,
        33070
      ]
    },
    {
      "content": "element specifies the location of the VAST file.",
      "pos": [
        33088,
        33136
      ]
    },
    {
      "content": "VastLinearNonLinearPage",
      "pos": [
        34073,
        34096
      ]
    },
    {
      "content": "This sample uses the AdSchedulerPlugin to schedule a linear and a non-linear ad.",
      "pos": [
        34098,
        34178
      ]
    },
    {
      "content": "The VAST file location is specified with the",
      "pos": [
        34179,
        34223
      ]
    },
    {
      "content": "element.",
      "pos": [
        34241,
        34249
      ]
    },
    {
      "content": "VMAPPage",
      "pos": [
        35195,
        35203
      ]
    },
    {
      "content": "This samples uses the VmapSchedulerPlugin to schedule ads using a VMAP file.",
      "pos": [
        35205,
        35281
      ]
    },
    {
      "content": "The URI to the VMAP file is specified in the Source attribute of the",
      "pos": [
        35282,
        35350
      ]
    },
    {
      "content": "element.",
      "pos": [
        35373,
        35381
      ]
    },
    {
      "content": "Implementing an iOS Video Player with Ad Support",
      "pos": [
        35779,
        35827
      ]
    },
    {
      "content": "The Microsoft Media Platform: Player Framework for iOS contains a collection of sample applications that show you how to implement a video player application using the framework.",
      "pos": [
        35830,
        36008
      ]
    },
    {
      "content": "You can download the Player Framework and the samples from <bpt id=\"p1\">[</bpt>Azure Media Player Framework<ept id=\"p1\">](https://github.com/Azure/azure-media-player-framework)</ept>.",
      "pos": [
        36009,
        36154
      ]
    },
    {
      "content": "The github page has a link to a Wiki that contains additional information on the player framework and an introduction to the player sample: <bpt id=\"p1\">[</bpt>Azure Media Player Wiki<ept id=\"p1\">](https://github.com/Azure/azure-media-player-framework/wiki/How-to-use-Azure-media-player-framework)</ept>.",
      "pos": [
        36155,
        36421
      ]
    },
    {
      "content": "Scheduling Ads with VMAP",
      "pos": [
        36427,
        36451
      ]
    },
    {
      "content": "The following example shows how to schedule ads using a VMAP file.",
      "pos": [
        36453,
        36519
      ]
    },
    {
      "content": "Scheduling Ads with VAST",
      "pos": [
        37132,
        37156
      ]
    },
    {
      "content": "The following sample shows how to schedule a late binding VAST ad.",
      "pos": [
        37158,
        37224
      ]
    },
    {
      "content": "The following sample shows how to schedule an early binding VAST ad.",
      "pos": [
        38271,
        38339
      ]
    },
    {
      "content": "//Example:4 Schedule an early binding VAST ad",
      "pos": [
        38344,
        38389
      ]
    },
    {
      "content": "//Download the VAST file",
      "pos": [
        38394,
        38418
      ]
    },
    {
      "content": "if (![framework.adResolver downloadManifest:&amp;manifest withURL:[NSURL URLWithString:@\"http://portalvhdsq3m25bf47d15c.blob.core.windows.net/vast/PlayerTestVAST.xml\"]])",
      "pos": [
        38423,
        38588
      ]
    },
    {
      "content": "{",
      "pos": [
        38593,
        38594
      ]
    },
    {
      "content": "[self logFrameworkError];",
      "pos": [
        38603,
        38628
      ]
    },
    {
      "content": "}",
      "pos": [
        38633,
        38634
      ]
    },
    {
      "content": "else",
      "pos": [
        38639,
        38643
      ]
    },
    {
      "content": "{",
      "pos": [
        38648,
        38649
      ]
    },
    {
      "content": "adLinearTime.startTime = 7;",
      "pos": [
        38658,
        38685
      ]
    },
    {
      "content": "adLinearTime.duration = 0;",
      "pos": [
        38694,
        38720
      ]
    },
    {
      "content": "The following sample shows how to insert an ad using Rough Cut Editing (RCE)",
      "pos": [
        39276,
        39352
      ]
    },
    {
      "content": "The following example shows how to schedule an ad pod.",
      "pos": [
        39957,
        40011
      ]
    },
    {
      "content": "The following example shows how to schedule a non-sticky mid-roll ad.",
      "pos": [
        41193,
        41262
      ]
    },
    {
      "content": "A non-sticky ad is only played once regardless of any seeking the viewer performs.",
      "pos": [
        41263,
        41345
      ]
    },
    {
      "content": "The following example shows how to schedule a sticky mid-roll ad.",
      "pos": [
        42422,
        42487
      ]
    },
    {
      "content": "A sticky ad will be displayed each time the specified point on the video timeline is reached.",
      "pos": [
        42488,
        42581
      ]
    },
    {
      "content": "The following sample shows how to schedule a post-roll ad.",
      "pos": [
        43589,
        43647
      ]
    },
    {
      "content": "The following sample shows how to schedule a pre-roll ad.",
      "pos": [
        44492,
        44549
      ]
    },
    {
      "content": "The following sample shows how to schedule a mid-roll overlay ad.",
      "pos": [
        45447,
        45512
      ]
    },
    {
      "content": "See Also",
      "pos": [
        46686,
        46694
      ]
    },
    {
      "content": "Develop video player applications",
      "pos": [
        46697,
        46730
      ]
    },
    {
      "content": "test",
      "pos": [
        46774,
        46778
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Inserting Ads on the Client Side\" \n    description=\"This topic shows how to insert ads on the client side.\" \n    services=\"media-services\" \n    documentationCenter=\"\" \n    authors=\"juliako\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"media-services\" \n    ms.workload=\"media\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"08/17/2015\"  \n    ms.author=\"juliako\"/>\n\n\n#Inserting Ads on the Client Side\n\nThis topic contains information on how to insert various types of ads on the client side.\n\nFor information about closed captioning and ad support in Live streaming videos, see [Supported Closed Captioning and Ad Insertion Standards](https://msdn.microsoft.com/library/azure/dn783466.aspx#caption_ad).\n\n \n##<a id=\"insert_ads_into_media\"></a>Inserting Ads into your Media\n\nAzure Media Services provides support for ad insertion through the Windows Media Platform: Player Frameworks. Player frameworks with ad support are available for Windows 8, Silverlight, Windows Phone 8, and iOS devices. Each player framework contains sample code that shows you how to implement a player application.There are three different kinds of ads you can insert into your media:list.\n\n- **Linear** – full frame ads that pause the main video.\n- **Nonlinear** – overlay ads that are displayed as the main video is playing, usually a logo or other static image placed within the player.\n- **Companion** – ads that are displayed outside of the player.\n\nAds can be placed at any point in the main video’s time line. You must tell the player when to play the ad and which ads to play. This is done using a set of standard XML-based files: Video Ad Service Template (VAST), Digital Video Multiple Ad Playlist (VMAP), Media Abstract Sequencing Template (MAST), and Digital Video Player Ad Interface Definition (VPAID). VAST files specify what ads to display. VMAP files specify when to play various ads and contain VAST XML. MAST files are another way to sequence ads which also can contain VAST XML. VPAID files define an interface between the video player and the ad or ad server.\n\nEach player framework works differently and each will be covered in its own topic. This topic will describe the basic mechanisms used to insert ads.Video player applications request ads from an ad server. The ad server can respond in a number of ways:\n\n- Return a VAST file\n- Return a VMAP file (with embedded VAST)\n- Return a MAST file (with embedded VAST)\n- Return a VAST file with VPAID ads\n\n \n###Using a Video Ad Service Template (VAST) File\n\nA VAST file specifies what ad or ads to display. The following XML is an example of a VAST file for a linear ad:\n    \n    <VAST version=\"2.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"oxml.xsd\">\n      <Ad id=\"115571748\">\n        <InLine>\n          <AdSystem version=\"2.0 alpha\">Atlas</AdSystem>\n          <AdTitle>Unknown</AdTitle>\n          <Description>Unknown</Description>\n          <Survey></Survey>\n          <Error></Error>\n          <Impression id=\"Atlas\"><![CDATA[http://www.myserver.com/tracking-resource]]></Impression>\n          <Creatives>\n            <Creative id=\"video\" sequence=\"0\" AdID=\"\">\n              <Linear>\n                <Duration>00:00:32</Duration>\n                <TrackingEvents>\n                  <Tracking event=\"start\"><![CDATA[http://www.myserver.com/start-tracking-resource]]></Tracking>\n                  <Tracking event=\"midpoint\"><![CDATA[http://www.myserver.com/midpoint-tracking-resource]]></Tracking>\n                  <Tracking event=\"complete\"><![CDATA http://www.myserver.com/complete-tracking-resource]]></Tracking>\n                  <Tracking event=\"expand\"><![CDATA[http://www.myserver.com/expand-tracking-resource]]></Tracking>\n                </TrackingEvents>\n                <VideoClicks>\n                  <ClickThrough id=\"Atlas Redirect\"><![CDATA[http://www.myserver.com/click-resource]]></ClickThrough>\n                  <ClickTracking id=\"Spare\"></ClickTracking>\n                </VideoClicks>\n                <MediaFiles>\n                  <MediaFile apiFramework=\"Windows Media\" id=\"windows_progressive_200\" maintainAspectRatio=\"true\" scaleable=\"true\"  delivery=\"progressive\" bitrate=\"200\" width=\"400\" height=\"300\" type=\"video/x-ms-wmv\">\n                    <![CDATA[http://www.myserver.com/media/myad_200_4x3.wmv]]>\n                  </MediaFile>\n                  <MediaFile apiFramework=\"Windows Media\" id=\"windows_progressive_300\" maintainAspectRatio=\"true\" scaleable=\"true\"  delivery=\"progressive\" bitrate=\"300\" width=\"400\" height=\"300\" type=\"video/x-ms-wmv\">\n                    <![CDATA[http://www.myserver.com/media/myad_300_4x3.wmv]]>\n                  </MediaFile>\n                </MediaFiles>\n              </Linear>\n            </Creative>\n          </Creatives>\n          <Extensions>\n            <Extension type=\"Atlas\">\n            </Extension>\n          </Extensions>\n        </InLine>\n      </Ad>\n    </VAST>\n    \nThe linear ad is described by the **<Linear>** element. It specifies the duration of the ad, tracking events, click through, click tracking, and a number of **<MediaFile>** elements. Tracking events are specified within the **<TrackingEvents>** element and allow an ad server to track various events that occur while viewing the ad. In this case the start, midpoint, complete, and expand events are tracked. The start event occurs when the ad is displayed. The midpoint event occurs when at least 50% of the ad’s timeline has been viewed. The complete event occurs when the ad has run to the end. The Expand event occurs when the user expands the video player to full screen. Clickthroughs are specified with a **<ClickThrough>** element within a **<VideoClicks>** element and specifies a URI to a resource to display when the user clicks on the ad. ClickTracking is specified in a **<ClickTracking>** element, also within the **<VideoClicks>** element and specifies a tracking resource for the player to request when the user clicks on the ad.The **<MediaFile>** elements specify information about a specific encoding of an ad. When there is more than one **<MediaFile>** element, the video player can choose the best encoding for the platform. \n\nLinear ads can be displayed in a specified order. To do this, add additional <Ad> elements to the VAST file and specify the order using the sequence attribute. The following example illustrates this:\n    \n    <VAST version=\"2.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"oxml.xsd\">\n      <Ad id=\"1\" sequence=\"0\">\n        <InLine>\n          <AdSystem version=\"2.0 alpha\">Atlas</AdSystem>\n          <AdTitle>Unknown</AdTitle>\n          <Description>Unknown</Description>\n          <Survey></Survey>\n          <Error></Error>\n          <Impression id=\"Atlas\"><![CDATA[http://myserver.com/Impression/Ad1trackingResouce]]></Impression>\n          <Creatives>\n            <Creative id=\"video\" sequence=\"0\" AdID=\"\">\n              <Linear>\n                <Duration>00:00:32</Duration>\n                <MediaFiles>\n                  <!-- ... -->\n                </MediaFiles>\n              </Linear>\n            </Creative>\n          </Creatives>\n        </InLine>\n      </Ad>\n      <Ad id=\"2\" sequence=\"1\">\n        <InLine>\n          <AdSystem version=\"2.0 alpha\">Atlas</AdSystem>\n          <AdTitle>Unknown</AdTitle>\n          <Description>Unknown</Description>\n          <Survey></Survey>\n          <Error></Error>\n          <Impression id=\"Atlas\"><![CDATA[http://myserver.com/Impression/Ad2trackingResouce]]></Impression>\n          <Creatives>\n            <Creative id=\"video\" sequence=\"0\" AdID=\"\">\n              <Linear>\n                <Duration>00:00:30</Duration>\n                <MediaFiles>\n                  <!-- ... -->\n                </MediaFiles>\n              </Linear>\n            </Creative>\n          </Creatives>\n        </InLine>\n      </Ad>\n    </VAST>\n    \nNonlinear ads are specified in a <Creative> element as well. The following example shows a <Creative> element that describes a nonlinear ad.\n\n    <Creative id=\"video\" sequence=\"1\" AdID=\"\">\n      <NonLinearAds>\n        <NonLinear width=\"216\" height=\"121\" minSuggestedDuration=\"00:00:15\">\n          <StaticResource creativeType=\"image/png\"><![CDATA[http://myserver/images/image.png]]></StaticResource>\n          <StaticResource creativeType=\"image/jpg\"><![CDATA[http://myserver/images/image.jpg]]></StaticResource>\n        </NonLinear>\n        <TrackingEvents>\n             <Tracking event=\"acceptInvitation\"><![CDATA[http://myserver/tracking/trackingID]></Tracking>\n             <Tracking event=\"collapse\"><![CDATA[http://myserver/tracking/trackingID2]]></Tracking>\n         </TrackingEvents>\n       </NonLinearAds>\n    </Creative>\n\n \nThe **<NonLinearAds>** element can contain one or more **<NonLinear>** elements, each of which can describe a nonlinear ad. The **<NonLinear>** element specifies the resource for the nonlinear ad. The resource can be a **<StaticResouce>**, an **<IFrameResource>**, or an **<HTMLResouce>**.**<StaticResource>** describes a non-HTML resource and defines a creativeType attribute that specifies how the resource is displayed:\n\nImage/gif, image/jpeg, image/png – the resource is displayed in an HTML **<img>** tag.\n\nApplication/x-javascript – the resource is displayed in an HTML <**script**> tag.\n\nApplication/x-shockwave-flash – the resource is displayed in a Flash player.\n\n**<IFrameResource>** describes an HTML resource that can be displayed in an IFrame. **<HTMLResource>** describes a piece of HTML code that can be inserted into a web page. **<TrackingEvents>** specify tracking events and the URI to request when the event occurs. In this sample the acceptInvitation and collapse events are tracked. For more information on the **<NonLinearAds>** element and its children, see IAB.NET/VAST. Note that the **<TrackingEvents>** element is located within the** <NonLinearAds>** element rather than the **<NonLinear>** element.\n\nCompanion ads are defined within a <CompanionAds> element. The <CompanionAds> element can contain one or more <Companion> elements. Each <Companion> element describes a companion ad and can contain a <StaticResource>, <IFrameResource>, or <HTMLResource> which are specified in the same way as in a nonlinear ad. A VAST file can contain multiple companion ads and the player application can choose the most appropriate ad to display. For more information about VAST, see [VAST 3.0](http://www.iab.net/media/file/VASTv3.0.pdf).\n\n###Using a Digital Video Multiple Ad Playlist (VMAP) File\n\nA VMAP file allows you to specify when ad breaks occur, how long each break is, how many ads can be displayed within a break, and what types of ads may be displayed during a break. The following in an example VMAP file that defines a single ad break:\n    \n    <vmap:VMAP xmlns:vmap=\"http://www.iab.net/vmap-1.0\" version=\"1.0\">\n      <vmap:AdBreak breakType=\"linear\" breakId=\"mypre\" timeOffset=\"start\">\n        <vmap:AdSource allowMultipleAds=\"true\" followRedirects=\"true\" id=\"1\">\n          <vmap:VASTData>\n            <VAST version=\"2.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"oxml.xsd\">\n              <Ad id=\"115571748\">\n                <InLine>\n                  <AdSystem version=\"2.0 alpha\">Atlas</AdSystem>\n                  <AdTitle>Unknown</AdTitle>\n                  <Description>Unknown</Description>\n                  <Survey></Survey>\n                  <Error></Error>\n                  <Impression id=\"Atlas\"><![CDATA[http://view.atdmt.com/000/sview/115571748/direct;ai.201582527;vt.2/01/634364885739970673]]></Impression>\n                  <Creatives>\n                    <Creative id=\"video\" sequence=\"0\" AdID=\"\">\n                      <Linear>\n                        <Duration>00:00:32</Duration>\n                        <MediaFiles>\n                          <MediaFile apiFramework=\"Windows Media\" id=\"windows_progressive_200\" maintainAspectRatio=\"true\" scaleable=\"true\"  delivery=\"progressive\" bitrate=\"200\" width=\"400\" height=\"300\" type=\"video/x-ms-wmv\">\n                            <![CDATA[http://smf.blob.core.windows.net/samples/ads/media/XBOX_HD_DEMO_700_1_000_200_4x3.wmv]]>\n                          </MediaFile>\n                          <MediaFile apiFramework=\"Windows Media\" id=\"windows_progressive_300\" maintainAspectRatio=\"true\" scaleable=\"true\"  delivery=\"progressive\" bitrate=\"300\" width=\"400\" height=\"300\" type=\"video/x-ms-wmv\">\n                            <![CDATA[http://smf.blob.core.windows.net/samples/ads/media/XBOX_HD_DEMO_700_2_000_300_4x3.wmv]]>\n                          </MediaFile>\n                          <MediaFile apiFramework=\"Windows Media\" id=\"windows_progressive_500\" maintainAspectRatio=\"true\" scaleable=\"true\"  delivery=\"progressive\" bitrate=\"500\" width=\"400\" height=\"300\" type=\"video/x-ms-wmv\">\n                            <![CDATA[http://smf.blob.core.windows.net/samples/ads/media/XBOX_HD_DEMO_700_1_000_500_4x3.wmv]]>\n                          </MediaFile>\n                          <MediaFile apiFramework=\"Windows Media\" id=\"windows_progressive_700\" maintainAspectRatio=\"true\" scaleable=\"true\" delivery=\"progressive\" bitrate=\"700\" width=\"400\" height=\"300\" type=\"video/x-ms-wmv\">\n                            <![CDATA[http://smf.blob.core.windows.net/samples/ads/media/XBOX_HD_DEMO_700_2_000_700_4x3.wmv]]>\n                          </MediaFile>\n                        </MediaFiles>\n                      </Linear>\n                    </Creative>\n                  </Creatives>\n                </InLine>\n              </Ad>\n            </VAST>\n          </vmap:VASTData>\n        </vmap:AdSource>\n        <vmap:TrackingEvents>\n          <vmap:Tracking event=\"breakStart\">\n            http://MyServer.com/breakstart.gif\n          </vmap:Tracking>\n        </vmap:TrackingEvents>\n      </vmap:AdBreak>\n    </vmap:VMAP>\n     \nA VMAP file begins with a <VMAP> element that contains one or more <AdBreak> elements, each defining an ad break. Each ad break specifies a break type, break ID, and time offset. The breakType attribute specifies the type of ad that can be played during the break: linear, nonlinear, or display. Display ads map to VAST companion ads. More than one ad type can be specified in a comma (no spaces) separated list. The breakID is an optional identifier for the ad. The timeOffset specifies when the ad should be displayed. It can be specified in one of the following ways:\n\n1. Time – in hh:mm:ss or hh:mm:ss.mmm format where .mmm is milliseconds. The value of this attribute specifies the time from the beginning of the video timeline to the beginning of the ad break.\n1. Percentage – in n% format where n is the percentage of the video timeline to play before playing the ad\n1. Start/End – specifies that an ad should be displayed before or after the video has been displayed\n1. Position – specifies the order of ad breaks when the timing of the ad breaks is unknown, such as in live streaming. The order of each ad break is specified in the #n format where n is an integer 1 or greater. 1 signifies the ad should be played at the first opportunity, 2 signifies the ad should be played at the second opportunity and so on.\n\nWithin the <**AdBreak**> element there can be one <**AdSource**> element. The <**AdSource**> element contains the following attributes:\n\n1. Id – specifies an identifier for the ad source\n1. allowMultipleAds – a Boolean value that specifies whether multiple ads can be displayed during the ad break\n1. followRedirects – an optional Boolean value that specifies if the video player should honor redirects within an ad response\n\nThe <**AdSource**> element provides the player an inline ad response or a reference to an ad response. It can contain one of the following elements:\n\n- <VASTAdData> indicates a VAST ad response is embedded within the VMAP file\n- <AdTagURI> a URI that references an ad response from another system\n- <CustomAdData> -an arbitrary string that respresents a non-VAST response\n\nIn this example an in-line ad response is specified with a <VASTAdData> element that contains a VAST ad response. For more information about the other elements, see [VMAP](http://www.iab.net/guidelines/508676/digitalvideo/vsuite/vmap).\n\nThe <**AdBreak**> element can also contain one <**TrackingEvents**> element. The <**TrackingEvents**> element allows you to track the start or end of an ad break or whether an error occurred during the ad break. The <**TrackingEvents**> element contains one or more <**Tracking**> elements, each of which specifies a tracking event and a tracking URI. The possible tracking events are:\n\n1. breakStart – tracks the beginning of an ad break\n1. breakEnd – track the completion of an ad break\n1. error – tracks an error that occurred during the ad break\n\nThe following example shows a VMAP file that specifies tracking events\n\n    <vmap:VMAP xmlns:vmap=\"http://www.iab.net/vmap-1.0\" version=\"1.0\">\n      <vmap:AdBreak breakType=\"linear\" breakId=\"mypre\" timeOffset=\"start\">\n        <vmap:AdSource allowMultipleAds=\"true\" followRedirects=\"true\" id=\"1\">\n          <vmap:VASTData>\n            <!--Inline VAST -->\n          </vmap:VASTData>\n        </vmap:AdSource>\n        <vmap:TrackingEvents>\n          <vmap:Tracking event=\"breakStart\">\n            http://MyServer.com/breakstart.gif\n          </vmap:Tracking>\n          <vmap:Tracking event=\"breakend\">\n            http://MyServer.com/breakend.gif\n          </vmap:Tracking>\n          <vmap:Tracking event=\"error\">\n            http://MyServer.com/error.gif\n          </vmap:Tracking>\n        </vmap:TrackingEvents>\n      </vmap:AdBreak>\n    </vmap:VMAP>\n\nFor more information on the <**TrackingEvents**> element and its children, see http://iab.org/VMAP.pdf\n\n###Using a Media Abstract Sequencing Template (MAST) File\n\nA MAST file allows you to specify triggers that define when an ad is displayed. The following is an example MAST file that contains triggers for a pre roll ad, a mid-roll ad, and a post-roll ad.\n\n    <MAST xsi:schemaLocation=\"http://openvideoplayer.sf.net/mast http://openvideoplayer.sf.net/mast/mast.xsd\" xmlns=\"http://openvideoplayer.sf.net/mast\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n      <triggers>\n        <trigger id=\"preroll\" description=\"preroll every item\"  >\n          <startConditions>\n            <condition type=\"event\" name=\"OnItemStart\" />\n          </startConditions>\n          <sources>\n            <source uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" format=\"vast\">\n              <sources />\n            </source>\n          </sources>\n        </trigger>\n    \n        <trigger id=\"midroll\" description=\"midroll at 15 sec.\"  >\n          <startConditions>\n            <condition type=\"property\" name=\"Position\" value=\"00:00:15.0\" operator=\"GEQ\" />\n          </startConditions>\n          <endConditions>\n            <condition type=\"event\" name=\"OnItemEnd\"/>\n            <!--This 'resets' the trigger for the next clip-->\n          </endConditions>\n          <sources>\n            <source uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" format=\"vast\">\n              <sources />\n            </source>\n          </sources>\n        </trigger>\n    \n        <trigger id=\"postroll\" description=\"postroll\"  >\n          <startConditions>\n            <condition type=\"event\" name=\"OnItemEnd\"/>\n          </startConditions>\n          <sources>\n            <source uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" format=\"vast\">\n              <sources />\n            </source>\n          </sources>\n        </trigger>\n      </triggers>\n    </MAST>\n\n \n\nA MAST file begins with a **<MAST>** element that contains one **<triggers>** element. The <triggers> element contains one or more **<trigger>** elements that define when an ad should be played. \n\nThe **<trigger>** element contains a **<startConditions>** element which specify when an ad should begin to play. The **<startConditions>** element contains one or more <condition> elements. When each <condition> evaluates to true a trigger is initiated or revoked depending upon whether the <condition> is contained within a **<startConditions**> or **<endConditions>** element respectively. When multiple <condition> elements are present, they are treated as an implicit OR, any condition evaluating to true will cause the trigger to initiate. <condition> elements can be nested. When child <condition> elements are preset, they are treated as an implicit AND, all conditions must evaluate to true for the trigger to initiate. The <condition> element contains the following attributes that define the condition: \n\n1. **type** – specifies the type of condition, event or property\n1. **name** – the name of the property or event to be used during evaluation\n1. **value** – the value that a property will be evaluated against\n1. **operator** – the operation to use during evaluation: EQ (equal), NEQ (not equal), GTR (greater), GEQ (greater or equal), LT (Less than), LEQ (less than or equal), MOD (modulo)\n\n**<endConditions>** also contain <condition> elements. When a condition evaluates to true the trigger is reset.The <trigger> element also contains a <sources> element that contains one or more <source> elements. The <source> elements define the URI to the ad response and the type of ad response. In this example a URI is given to a VAST response. \n\n\n    <trigger id=\"postroll\" description=\"postroll\"  >\n      <startConditions>\n        <condition/>\n      </startConditions>\n      <sources>\n        <source uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" format=\"vast\">\n          <sources />\n        </source>\n      </sources>\n    </trigger>\n \n\n###Using Video Player-Ad Interface Definition (VPAID)\n\nVPAID is an API for enabling executable ad units to communicate with a video player. This allows highly interactive ad experiences. The user can interact with the ad and the ad can respond to actions taken by the viewer. For example an ad may display buttons that allow the user to view more information or a longer version of the ad. The video player must support the VPAID API and the executable ad must implement the API. When a player requests an ad from an ad server the server may respond with a VAST response that contains a VPAID ad.\n\nAn executable ad is created in code that must be executed in a runtime environment such as Adobe Flash™ or JavaScript that can be executed in a web browser. When an ad server returns a VAST response containing a VPAID ad, the value of the apiFramework attribute in the <MediaFile> element must be “VPAID”. This attribute specifies that the contained ad is a VPAID executable ad. The type attribute must be set to the MIME type of the executable, such as “application/x-shockwave-flash” or “application/x-javascript”. The following XML snippet shows the <MediaFile> element from a VAST response containing a VPAID executable ad. \n\n    \n    <MediaFiles>\n       <MediaFile id=\"1\" delivery=\"progressive\" type=”application/x-shockwaveflash”\n                  width=”640” height=”480” apiFramework=”VPAID”>\n           <!-- CDATA wrapped URI to executable ad -->\n       </MediaFile>\n    </MediaFiles>\n \n\nAn executable ad can be initialized using the <AdParameters> element within the <Linear> or <NonLinear> elements in a VAST response. For more information on the <AdParameters> element, see [VAST 3.0](http://www.iab.net/media/file/VASTv3.0.pdf). For more information about the VPAID API, see [VPAID 2.0](http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf).\n\n##Implementing a Windows or Windows Phone 8 Player with Ad Support\n\nThe Microsoft Media Platform: Player Framework for Windows 8 and Windows Phone 8 contains a collection of sample applications that show you how to implement a video player application using the framework. You can download the Player Framework and the samples from [Player Framework for Windows 8 and Windows Phone 8](https://playerframework.codeplex.com).\n\nWhen you open the Microsoft.PlayerFramework.Xaml.Samples solution you will see a number of folders within the project. The Advertising folder contains the sample code relevant to creating a video player with ad support. Inside the Advertising folder is a number of XAML/cs files each of which show how to insert ads in a different way. The following list describes each:\n\n- AdPodPage.xaml Shows how to display an ad pod.\n- AdSchedulingPage.xaml Shows how to schedule ads.\n- FreeWheelPage.xaml Shows how to use the FreeWheel plugin to schedule ads.\n- MastPage.xaml Shows how to schedule ads with a MAST file.\n- ProgrammaticAdPage.xaml Shows how to programmatically schedule ads into a video.\n- ScheduleClipPage.xaml Shows how to schedule an ad without a VAST file.\n- VastLinearCompanionPage.xaml Shows how to insert a linear and companion ad.\n- VastNonLinearPage.xaml Shows how to insert a non-linear ad.\n- VmapPage.xaml Shows how to specify ads with a VMAP file.\n\nEach of these samples uses the MediaPlayer class defined by the player framework. Most samples use plugins that add support for various ad response formats. The ProgrammaticAdPage sample programmatically interacts with a MediaPlayer instance.\n\n###AdPodPage Sample\n\nThis sample uses the AdSchedulerPlugin to define when to display an ad. In this example a mid-roll advertisement is scheduled to be played after 5 seconds. The ad pod (a group of ads to display in order) is specified in a VAST file returned from an ad server. The URI to the VAST file is specified in the <RemoteAdSource> element.\n\n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n    \n        <mmppf:MediaPlayer.Plugins>\n            <ads:AdSchedulerPlugin>\n                <ads:AdSchedulerPlugin.Advertisements>\n    \n                    <ads:MidrollAdvertisement Time=\"00:00:05\">\n                        <ads:MidrollAdvertisement.Source>\n                            <ads:RemoteAdSource Uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_adpod.xml\" Type=\"vast\"/>\n                        </ads:MidrollAdvertisement.Source>\n                    </ads:MidrollAdvertisement>\n    \n                </ads:AdSchedulerPlugin.Advertisements>\n            </ads:AdSchedulerPlugin>\n            <ads:AdHandlerPlugin/>\n        </mmppf:MediaPlayer.Plugins>\n    </mmppf:MediaPlayer>\n\nFor more information about the AdSchedulerPlugin, see [Advertising in the Player Framework on Windows 8 and Windows Phone 8](http://playerframework.codeplex.com/wikipage?title=Advertising&referringTitle=Windows%208%20Player%20Documentation)\n\n###AdSchedulingPage\n\nThis sample also uses the AdSchedulerPlugin. It schedules three ads, a pre-roll ad, a mid-roll ad, and a post-roll ad. The URI to the VAST for each ad is specified in a <RemoteAdSource> element.\n    \n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:AdSchedulerPlugin>\n                        <ads:AdSchedulerPlugin.Advertisements>\n    \n                            <ads:PrerollAdvertisement>\n                                <ads:PrerollAdvertisement.Source>\n                                    <ads:RemoteAdSource Uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" Type=\"vast\"/>\n                                </ads:PrerollAdvertisement.Source>\n                            </ads:PrerollAdvertisement>\n    \n                            <ads:MidrollAdvertisement Time=\"00:00:15\">\n                                <ads:MidrollAdvertisement.Source>\n                                    <ads:RemoteAdSource Uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" Type=\"vast\"/>\n                                </ads:MidrollAdvertisement.Source>\n                            </ads:MidrollAdvertisement>\n    \n                            <ads:PostrollAdvertisement>\n                                <ads:PostrollAdvertisement.Source>\n                                    <ads:RemoteAdSource Uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\" Type=\"vast\"/>\n                                </ads:PostrollAdvertisement.Source>\n                            </ads:PostrollAdvertisement>\n    \n                        </ads:AdSchedulerPlugin.Advertisements>\n                    </ads:AdSchedulerPlugin>\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n\n###FreeWheelPage\n\nThis sample uses the FreeWheelPlugin which specifies a Source attribute that specifies a URI that points to a SmartXML file that specifies ad content as well as ad scheduling information.\n    \n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:FreeWheelPlugin Source=\"http://smf.blob.core.windows.net/samples/win8/ads/freewheel.xml\"/>\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n###MastPage\n\nThis sample uses the MastSchedulerPlugin that allows you to use a MAST file. The Source attribute specifies the location of the MAST file.\n    \n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:MastSchedulerPlugin Source=\"http://smf.blob.core.windows.net/samples/win8/ads/mast.xml\" />\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n###ProgrammaticAdPage\n\nThis sample programmatically interacts with the MediaPlayer. The ProgrammaticAdPage.xaml file instantiates the MediaPlayer:\n\n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\"/>\n\nThe ProgrammaticAdPage.xaml.cs file creates an AdHandlerPlugin, adds a TimelineMarker to specify when an ad should be displayed, and then adds a handler for the MarkerReached event which loads a RemoteAdSource specifying a URI to a VAST file, and then plays the ad.\n    \n    public sealed partial class ProgrammaticAdPage : Microsoft.PlayerFramework.Samples.Common.LayoutAwarePage\n        {\n            AdHandlerPlugin adHandler;\n    \n            public ProgrammaticAdPage()\n            {\n                this.InitializeComponent();\n                adHandler = new AdHandlerPlugin();\n                player.Plugins.Add(new AdHandlerPlugin());\n                player.Markers.Add(new TimelineMarker() { Time = TimeSpan.FromSeconds(5), Type = \"myAd\" });\n                player.MarkerReached += pf_MarkerReached;\n            }\n    \n            async void pf_MarkerReached(object sender, TimelineMarkerRoutedEventArgs e)\n            {\n                if (e.Marker.Type == \"myAd\")\n                {\n                    var adSource = new RemoteAdSource() { Type = VastAdPayloadHandler.AdType, Uri = new Uri(\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear.xml\") };\n                    //var adSource = new AdSource() { Type = DocumentAdPayloadHandler.AdType, Payload = SampleAdDocument };\n                    var progress = new Progress<AdStatus>();\n                    try\n                    {\n                        await player.PlayAd(adSource, progress, CancellationToken.None);\n                    }\n                    catch { /* ignore */ }\n                }\n            }\n\n###ScheduleClipPage\n\nThis sample uses the AdSchedulerPlugin to schedule a mid-roll ad by specifying a .wmv file that contains the ad.\n    \n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.cloudapp.net/html5/media/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:AdSchedulerPlugin>\n                        <ads:AdSchedulerPlugin.Advertisements>\n    \n                            <ads:MidrollAdvertisement Time=\"00:00:05\">\n                                <ads:MidrollAdvertisement.Source>\n                                    <ads:AdSource Type=\"clip\">\n                                        <ads:AdSource.Payload>\n                                            <ads:ClipAdPayload MediaSource=\"http://smf.blob.core.windows.net/samples/ads/media/XBOX_HD_DEMO_700_2_000_700_4x3.wmv\" MimeType=\"video/x-ms-wmv\" />\n                                        </ads:AdSource.Payload>\n                                    </ads:AdSource>\n                                </ads:MidrollAdvertisement.Source>\n                            </ads:MidrollAdvertisement>\n    \n                        </ads:AdSchedulerPlugin.Advertisements>\n                    </ads:AdSchedulerPlugin>\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n###VastLinearCompanionPage\n\nThis sample illustrates how to use the AdSchedulerPlugin to schedule a mid-roll linear ad with an companion ad. The <RemoteAdSource> element specifies the location of the VAST file.\n    \n    <mmppf:MediaPlayer Grid.Row=\"1\"  x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:AdSchedulerPlugin>\n                        <ads:AdSchedulerPlugin.Advertisements>\n    \n                            <ads:MidrollAdvertisement Time=\"00:00:05\">\n                                <ads:MidrollAdvertisement.Source>\n                                    <ads:RemoteAdSource Uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear_companions.xml\" Type=\"vast\"/>\n                                </ads:MidrollAdvertisement.Source>\n                            </ads:MidrollAdvertisement>\n    \n                        </ads:AdSchedulerPlugin.Advertisements>\n                    </ads:AdSchedulerPlugin>\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n###VastLinearNonLinearPage\n\nThis sample uses the AdSchedulerPlugin to schedule a linear and a non-linear ad. The VAST file location is specified with the <RemoteAdSource> element.\n    \n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:AdSchedulerPlugin>\n                        <ads:AdSchedulerPlugin.Advertisements>\n    \n                            <ads:MidrollAdvertisement Time=\"00:00:05\">\n                                <ads:MidrollAdvertisement.Source>\n                                    <ads:RemoteAdSource Uri=\"http://smf.blob.core.windows.net/samples/win8/ads/vast_linear_nonlinear.xml\" Type=\"vast\"/>\n                                </ads:MidrollAdvertisement.Source>\n                            </ads:MidrollAdvertisement>\n                            \n                        </ads:AdSchedulerPlugin.Advertisements>\n                    </ads:AdSchedulerPlugin>\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n###VMAPPage\n\nThis samples uses the VmapSchedulerPlugin to schedule ads using a VMAP file. The URI to the VMAP file is specified in the Source attribute of the <VmapSchedulerPlugin> element.\n    \n    <mmppf:MediaPlayer x:Name=\"player\" Source=\"http://smf.blob.core.windows.net/samples/videos/bigbuck.mp4\">\n                <mmppf:MediaPlayer.Plugins>\n                    <ads:VmapSchedulerPlugin Source=\"http://smf.blob.core.windows.net/samples/win8/ads/vmap.xml\"/>\n                    <ads:AdHandlerPlugin/>\n                </mmppf:MediaPlayer.Plugins>\n            </mmppf:MediaPlayer>\n\n##Implementing an iOS Video Player with Ad Support\n\n\nThe Microsoft Media Platform: Player Framework for iOS contains a collection of sample applications that show you how to implement a video player application using the framework. You can download the Player Framework and the samples from [Azure Media Player Framework](https://github.com/Azure/azure-media-player-framework). The github page has a link to a Wiki that contains additional information on the player framework and an introduction to the player sample: [Azure Media Player Wiki](https://github.com/Azure/azure-media-player-framework/wiki/How-to-use-Azure-media-player-framework).\n\n\n###Scheduling Ads with VMAP\n\nThe following example shows how to schedule ads using a VMAP file.\n\n    // How to schedule an Ad using VMAP.\n    //First download the VMAP manifest\n    \n    if (![framework.adResolver downloadManifest:&manifest withURL:[NSURL URLWithString:@\"http://portalvhdsq3m25bf47d15c.blob.core.windows.net/vast/PlayerTestVMAP.xml\"]])\n            {\n                [self logFrameworkError];\n            }\n            else\n            {\n                // Schedule a list of ads using the downloaded VMAP manifest\n                if (![framework scheduleVMAPWithManifest:manifest])\n                {\n                    [self logFrameworkError];\n                }          \n            }\n\n###Scheduling Ads with VAST\n\nThe following sample shows how to schedule a late binding VAST ad.\n    \n    //Example:3 How to schedule a late binding VAST ad.\n    // set the start time for the ad\n    adLinearTime.startTime = 13;\n    adLinearTime.duration = 0;\n    // Specify the URI of the VAST file\n    NSString *vastAd1=@\"http://portalvhdsq3m25bf47d15c.blob.core.windows.net/vast/PlayerTestVAST.xml\";\n    // Create an AdInfo object\n     AdInfo *vastAdInfo1 = [[[AdInfo alloc] init] autorelease];\n    // set URL to VAST file\n    vastAdInfo1.clipURL = [NSURL URLWithString:vastAd1];\n    // set running time of ad\n    vastAdInfo1.mediaTime = [[[MediaTime alloc] init] autorelease];\n    vastAdInfo1.mediaTime.clipBeginMediaTime = 0;\n    vastAdInfo1.mediaTime.clipEndMediaTime = 10;\n    vastAdInfo1.policy = @\"policy for late binding VAST\";\n    // specify ad type\n    vastAdInfo1.type = AdType_Midroll;\n    vastAdInfo1.appendTo=-1;\n    adIndex = 0;\n    // schedule ad\n    if (![framework scheduleClip:vastAdInfo1 atTime:adLinearTime forType:PlaylistEntryType_VAST andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n         \n   The following sample shows how to schedule an early binding VAST ad.\n    //Example:4 Schedule an early binding VAST ad\n    //Download the VAST file\n    if (![framework.adResolver downloadManifest:&manifest withURL:[NSURL URLWithString:@\"http://portalvhdsq3m25bf47d15c.blob.core.windows.net/vast/PlayerTestVAST.xml\"]])\n    {\n        [self logFrameworkError];\n    }\n    else\n    {\n        adLinearTime.startTime = 7;\n        adLinearTime.duration = 0;\n        \n        // Create AdInfo instance\n        AdInfo *vastAdInfo2 = [[[AdInfo alloc] init] autorelease];\n        vastAdInfo2.mediaTime = [[[MediaTime alloc] init] autorelease];\n        vastAdInfo2.policy = @\"policy for early binding VAST\";\n        // specify ad type\n        vastAdInfo2.type = AdType_Midroll;\n        vastAdInfo2.appendTo=-1;\n        // schedule ad\n        if (![framework scheduleVASTClip:vastAdInfo2 withManifest:manifest atTime:adLinearTime andGetClipId:&adIndex])\n        {\n            [self logFrameworkError];\n        }\n    }\n\nThe following sample shows how to insert an ad using Rough Cut Editing (RCE)\n\n    //Example:1 How to use RCE.\n    // specify manifest for ad content\n    NSString *secondContent=@\"http://wamsblureg001orig-hs.cloudapp.net/6651424c-a9d1-419b-895c-6993f0f48a26/The%20making%20of%20Microsoft%20Surface-m3u8-aapl.ism/Manifest(format=m3u8-aapl)\";\n    \n    // specify ad length\n    mediaTime.currentPlaybackPosition = 0;\n    mediaTime.clipBeginMediaTime = 0;\n    mediaTime.clipEndMediaTime = 80;\n    // append ad content\n    if (![framework appendContentClip:[NSURL URLWithString:secondContent] withMediaTime:mediaTime andGetClipId:&clipId])\n    {\n        [self logFrameworkError];\n    }\n\nThe following example shows how to schedule an ad pod.\n\n    //Example:5 Schedule an ad Pod.\n    // Set start time for ad\n    adLinearTime.startTime = 23;\n    adLinearTime.duration = 0;\n    \n    // Specify URL to content\n    NSString *adpodSt1=@\"https://portalvhdsq3m25bf47d15c.blob.core.windows.net/asset-e47b43fd-05dc-4587-ac87-5916439ad07f/Windows%208_%20Cliffjumpers.mp4?st=2012-11-28T16%3A31%3A57Z&se=2014-11-28T16%3A31%3A57Z&sr=c&si=2a6dbb1e-f906-4187-a3d3-7e517192cbd0&sig=qrXYZBekqlbbYKqwovxzaVZNLv9cgyINgMazSCbdrfU%3D\";\n    // Create an AdInfo instance\n    AdInfo *adpodInfo1 = [[[AdInfo alloc] init] autorelease];\n    // set URI to ad content\n    adpodInfo1.clipURL = [NSURL URLWithString:adpodSt1];\n    // Set ad running time\n    adpodInfo1.mediaTime = [[[MediaTime alloc] init] autorelease];\n    adpodInfo1.mediaTime.clipBeginMediaTime = 0;\n    adpodInfo1.mediaTime.clipEndMediaTime = 17;\n    adpodInfo1.policy = @\"policy for ad pod 1\";\n    // Set ad type\n    adpodInfo1.type = AdType_Midroll;\n    adpodInfo1.appendTo=-1;\n    adIndex = 0;\n    // Schedule ad\n    if (![framework scheduleClip:adpodInfo1 atTime:adLinearTime forType:PlaylistEntryType_Media andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n\nThe following example shows how to schedule a non-sticky mid-roll ad. A non-sticky ad is only played once regardless of any seeking the viewer performs.\n    \n    //Example:6 Schedule a single non sticky mid roll Ad\n    // specify URL to content\n    NSString *oneTimeAd=@\"http://wamsblureg001orig-hs.cloudapp.net/5389c0c5-340f-48d7-90bc-0aab664e5f02/Windows%208_%20You%20and%20Me%20Together-m3u8-aapl.ism/Manifest(format=m3u8-aapl)\";\n    \n    // create an AdInfo instance\n    AdInfo *oneTimeInfo = [[[AdInfo alloc] init] autorelease];\n    // set URL of ad\n    oneTimeInfo.clipURL = [NSURL URLWithString:oneTimeAd];\n    oneTimeInfo.mediaTime = [[[MediaTime alloc] init] autorelease];\n    oneTimeInfo.mediaTime.clipBeginMediaTime = 0;\n    oneTimeInfo.mediaTime.clipEndMediaTime = -1;\n    oneTimeInfo.policy = @\"policy for one-time ad\";\n    // set ad start time\n    adLinearTime.startTime = 43;\n    adLinearTime.duration = 0;\n    // set ad type\n    oneTimeInfo.type = AdType_Midroll;\n    // non sticky ad\n    oneTimeInfo.deleteAfterPlayed = YES;\n    // schedule ad\n    if (![framework scheduleClip:oneTimeInfo atTime:adLinearTime forType:PlaylistEntryType_Media andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n\nThe following example shows how to schedule a sticky mid-roll ad. A sticky ad will be displayed each time the specified point on the video timeline is reached.\n\n    //Example:7 Schedule a single sticky mid roll Ad\n    NSString *stickyAd=@\"http://wamsblureg001orig-hs.cloudapp.net/2e4e7d1f-b72a-4994-a406-810c796fc4fc/The%20Surface%20Movement-m3u8-aapl.ism/Manifest(format=m3u8-aapl)\";\n    // create AdInfo instance\n    AdInfo *stickyAdInfo = [[[AdInfo alloc] init] autorelease];\n    // set URI to ad\n    stickyAdInfo.clipURL = [NSURL URLWithString:stickyAd];\n    stickyAdInfo.mediaTime = [[[MediaTime alloc] init] autorelease];\n    stickyAdInfo.mediaTime.clipBeginMediaTime = 0;\n    stickyAdInfo.mediaTime.clipEndMediaTime = 15;\n    stickyAdInfo.policy = @\"policy for sticky mid-roll ad\";\n    // set ad start time\n    adLinearTime.startTime = 64;\n    adLinearTime.duration = 0;\n    // set ad type\n    stickyAdInfo.type = AdType_Midroll;\n    stickyAdInfo.deleteAfterPlayed = NO;\n    // schedule ad\n    if (![framework scheduleClip:stickyAdInfo atTime:adLinearTime forType:PlaylistEntryType_Media andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n\n\nThe following sample shows how to schedule a post-roll ad.\n\n    //Example:8 Schedule Post Roll Ad\n    NSString *postAdURLString=@\"http://wamsblureg001orig-hs.cloudapp.net/aa152d7f-3c54-487b-ba07-a58e0e33280b/wp-m3u8-aapl.ism/Manifest(format=m3u8-aapl)\";\n    // create AdInfo instance\n    AdInfo *postAdInfo = [[[AdInfo alloc] init] autorelease];\n    postAdInfo.clipURL = [NSURL URLWithString:postAdURLString];\n    postAdInfo.mediaTime = [[[MediaTime alloc] init] autorelease];\n    postAdInfo.mediaTime.clipBeginMediaTime = 0;\n    // set ad length\n    postAdInfo.mediaTime.clipEndMediaTime = 45;\n    postAdInfo.policy = @\"policy for post-roll ad\";\n    // set ad type\n    postAdInfo.type = AdType_Postroll;\n    adLinearTime.duration = 0;\n    if (![framework scheduleClip:postAdInfo atTime:adLinearTime forType:PlaylistEntryType_Media andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n\nThe following sample shows how to schedule a pre-roll ad.\n    \n    //Example:9 Schedule Pre Roll Ad\n    NSString *adURLString = @\"http://wamsblureg001orig-hs.cloudapp.net/2e4e7d1f-b72a-4994-a406-810c796fc4fc/The%20Surface%20Movement-m3u8-aapl.ism/Manifest(format=m3u8-aapl)\";\n    AdInfo *adInfo = [[[AdInfo alloc] init] autorelease];\n    adInfo.clipURL = [NSURL URLWithString:adURLString];\n    adInfo.mediaTime = [[[MediaTime alloc] init] autorelease];\n    adInfo.mediaTime.currentPlaybackPosition = 0;\n    adInfo.mediaTime.clipBeginMediaTime = 40; //You could play a portion of an Ad. Yeh!\n    adInfo.mediaTime.clipEndMediaTime = 59;\n    adInfo.policy = @\"policy for pre-roll ad\";\n    adInfo.appendTo = -1;\n    adInfo.type = AdType_Preroll;\n    adLinearTime.duration = 0;\n    // schedule ad\n    if (![framework scheduleClip:adInfo atTime:adLinearTime forType:PlaylistEntryType_Media andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n\nThe following sample shows how to schedule a mid-roll overlay ad.\n    \n    // Example10: Schedule a Mid Roll overlay Ad\n    NSString *adURLString = @\"https://portalvhdsq3m25bf47d15c.blob.core.windows.net/asset-e47b43fd-05dc-4587-ac87-5916439ad07f/Windows%208_%20Cliffjumpers.mp4?st=2012-11-28T16%3A31%3A57Z&se=2014-11-28T16%3A31%3A57Z&sr=c&si=2a6dbb1e-f906-4187-a3d3-7e517192cbd0&sig=qrXYZBekqlbbYKqwovxzaVZNLv9cgyINgMazSCbdrfU%3D\";\n    //Create AdInfo instance\n    AdInfo *adInfo = [[[AdInfo alloc] init] autorelease];\n    adInfo.clipURL = [NSURL URLWithString:adURLString];\n    adInfo.mediaTime = [[[MediaTime alloc] init] autorelease];\n    adInfo.mediaTime.currentPlaybackPosition = 0;\n    adInfo.mediaTime.clipBeginMediaTime = 0;\n    // specify ad length\n    adInfo.mediaTime.clipEndMediaTime = 20;\n    adInfo.policy = @\"policy for mid-roll overlay ad\";\n    adInfo.appendTo = -1;\n    // specify ad type\n    adInfo.type = AdType_Midroll;\n    // specify ad start time & duration\n    adLinearTime.startTime = 300;\n    adLinearTime.duration = 20;\n    // schedule ad            if (![framework scheduleClip:adInfo atTime:adLinearTime forType:PlaylistEntryType_Media andGetClipId:&adIndex])\n    {\n        [self logFrameworkError];\n    }\n \n##See Also\n\n[Develop video player applications](media-services-develop-video-players.md)\n\ntest\n"
}