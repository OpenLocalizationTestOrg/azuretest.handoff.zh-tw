{
  "nodes": [
    {
      "content": "Normal Distribution Web Service Suite | Microsoft Azure",
      "pos": [
        28,
        83
      ]
    },
    {
      "content": "Normal Distribution Web Service Suite",
      "pos": [
        103,
        140
      ]
    },
    {
      "content": "Normal Distribution Suite",
      "pos": [
        477,
        502
      ]
    },
    {
      "content": "The Normal Distribution Suite is a set of sample web services (<bpt id=\"p1\">[</bpt>Generator<ept id=\"p1\">]( https://datamarket.azure.com/dataset/aml_labs/ndg7)</ept>, <bpt id=\"p2\">[</bpt>Quantile Calculator<ept id=\"p2\">]( https://datamarket.azure.com/dataset/aml_labs/ndq5)</ept>, <bpt id=\"p3\">[</bpt>Probability Calculator<ept id=\"p3\">]( https://datamarket.azure.com/dataset/aml_labs/ndp5)</ept>) that help in generating and handling normal distributions.",
      "pos": [
        506,
        848
      ]
    },
    {
      "content": "The services allow generating a normal distribution sequence of any length, calculating quantiles from a given probability, and calculating probability from a given quantile.",
      "pos": [
        849,
        1023
      ]
    },
    {
      "content": "Each of the services emits different outputs based on the selected service (see description below).",
      "pos": [
        1024,
        1123
      ]
    },
    {
      "content": "The Normal Distribution Suite is based on the R functions qnorm, rnorm, and pnorm, which are included in R stats package.",
      "pos": [
        1124,
        1245
      ]
    },
    {
      "content": "This web service could be consumed by users – potentially through a mobile app, through a website, or even on a local computer, for example.",
      "pos": [
        1343,
        1483
      ]
    },
    {
      "content": "But the purpose of the web service is also to serve as an example of how Azure Machine Learning can be used to create web services on top of R code.",
      "pos": [
        1484,
        1632
      ]
    },
    {
      "content": "With just a few lines of R code and clicks of a button within Azure Machine Learning Studio, an experiment can be created with R code and published as a web service.",
      "pos": [
        1633,
        1798
      ]
    },
    {
      "content": "The web service can then be published to the Azure Marketplace and consumed by users and devices across the world with no infrastructure setup by the author of the web service.",
      "pos": [
        1799,
        1975
      ]
    },
    {
      "content": "Consumption of web service",
      "pos": [
        1983,
        2009
      ]
    },
    {
      "content": "The Normal Distribution Suite includes the following 3 services.",
      "pos": [
        2010,
        2074
      ]
    },
    {
      "content": "Normal Distribution Quantile Calculator",
      "pos": [
        2079,
        2118
      ]
    },
    {
      "content": "This service accepts 4 arguments of a normal distribution and calculates the associated quantile.",
      "pos": [
        2119,
        2216
      ]
    },
    {
      "content": "The input arguments are:",
      "pos": [
        2218,
        2242
      ]
    },
    {
      "content": "p - A single probability of an event with normal distribution.",
      "pos": [
        2246,
        2308
      ]
    },
    {
      "content": "Mean - The normal distribution mean.",
      "pos": [
        2312,
        2348
      ]
    },
    {
      "content": "SD - The normal distribution standard deviation.",
      "pos": [
        2351,
        2399
      ]
    },
    {
      "content": "Side - L for the lower side of the distribution and U for the upper side of the distribution.",
      "pos": [
        2403,
        2496
      ]
    },
    {
      "content": "The output of the service is the calculated quantile that is associated with the given probability.",
      "pos": [
        2498,
        2597
      ]
    },
    {
      "content": "Normal Distribution Probability Calculator",
      "pos": [
        2602,
        2644
      ]
    },
    {
      "content": "This service accepts 4 arguments of a normal distribution and calculates the associated probability.",
      "pos": [
        2645,
        2745
      ]
    },
    {
      "content": "The input arguments are:",
      "pos": [
        2747,
        2771
      ]
    },
    {
      "content": "q - A single quantile of an event with normal distribution.",
      "pos": [
        2775,
        2834
      ]
    },
    {
      "content": "Mean - The normal distribution mean.",
      "pos": [
        2838,
        2874
      ]
    },
    {
      "content": "SD - The normal distribution standard deviation.",
      "pos": [
        2877,
        2925
      ]
    },
    {
      "content": "Side - L for the lower side of the distribution and U for the upper side of the distribution.",
      "pos": [
        2929,
        3022
      ]
    },
    {
      "content": "The output of the service is the calculated probability that is associated with the given quantile.",
      "pos": [
        3024,
        3123
      ]
    },
    {
      "content": "Normal Distribution Generator",
      "pos": [
        3128,
        3157
      ]
    },
    {
      "content": "This service accepts 3 arguments of a normal distribution and generates a random sequence of numbers that are normally distributed.",
      "pos": [
        3158,
        3289
      ]
    },
    {
      "content": "The following arguments should be provided to it within the request:",
      "pos": [
        3291,
        3359
      ]
    },
    {
      "content": "n - The number of observations.",
      "pos": [
        3363,
        3394
      ]
    },
    {
      "content": "mean - The normal distribution mean.",
      "pos": [
        3398,
        3434
      ]
    },
    {
      "content": "sd - The normal distribution standard deviation.",
      "pos": [
        3437,
        3485
      ]
    },
    {
      "content": "The output of the service is a sequence of length n with a normal distribution based on the mean and sd arguments.",
      "pos": [
        3488,
        3602
      ]
    },
    {
      "content": "This service, as hosted on the Azure Marketplace, is an OData service; these may be called through POST or GET methods.",
      "pos": [
        3605,
        3724
      ]
    },
    {
      "content": "There are multiple ways of consuming the service in an automated fashion (example apps are here: <bpt id=\"p1\">[</bpt>Generator<ept id=\"p1\">](http://microsoftazuremachinelearning.azurewebsites.net/NormalDistributionGenerator.aspx)</ept>,",
      "pos": [
        3727,
        3925
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Probability Calculator<ept id=\"p1\">](http://microsoftazuremachinelearning.azurewebsites.net/NormalDistributionProbabilityCalculator.aspx)</ept>,",
      "pos": [
        3926,
        4052
      ]
    },
    {
      "content": "<bpt id=\"p1\">[</bpt>Quantile Calculator<ept id=\"p1\">](http://microsoftazuremachinelearning.azurewebsites.net/NormalDistributionQuantileCalculator.aspx)</ept>).",
      "pos": [
        4053,
        4174
      ]
    },
    {
      "content": "Starting C# code for web service consumption:",
      "pos": [
        4179,
        4224
      ]
    },
    {
      "content": "Normal Distribution Quantile Calculator",
      "pos": [
        4229,
        4268
      ]
    },
    {
      "content": "public class Input",
      "pos": [
        4273,
        4291
      ]
    },
    {
      "content": "{",
      "pos": [
        4296,
        4297
      ]
    },
    {
      "content": "public string p;",
      "pos": [
        4310,
        4326
      ]
    },
    {
      "content": "public string mean;",
      "pos": [
        4339,
        4358
      ]
    },
    {
      "content": "public string sd;",
      "pos": [
        4371,
        4388
      ]
    },
    {
      "content": "public string side;",
      "pos": [
        4401,
        4420
      ]
    },
    {
      "content": "}",
      "pos": [
        4425,
        4426
      ]
    },
    {
      "content": "Normal Distribution Probability Calculator",
      "pos": [
        5531,
        5573
      ]
    },
    {
      "content": "public class Input",
      "pos": [
        5578,
        5596
      ]
    },
    {
      "content": "{",
      "pos": [
        5601,
        5602
      ]
    },
    {
      "content": "public string q;",
      "pos": [
        5615,
        5631
      ]
    },
    {
      "content": "public string mean;",
      "pos": [
        5644,
        5663
      ]
    },
    {
      "content": "public string sd;",
      "pos": [
        5676,
        5693
      ]
    },
    {
      "content": "public string side;",
      "pos": [
        5706,
        5725
      ]
    },
    {
      "content": "}",
      "pos": [
        5730,
        5731
      ]
    },
    {
      "content": "Normal Distribution Generator",
      "pos": [
        6835,
        6864
      ]
    },
    {
      "content": "public class Input",
      "pos": [
        6869,
        6887
      ]
    },
    {
      "content": "{",
      "pos": [
        6892,
        6893
      ]
    },
    {
      "content": "public string n;",
      "pos": [
        6906,
        6922
      ]
    },
    {
      "content": "public string mean;",
      "pos": [
        6935,
        6954
      ]
    },
    {
      "content": "public string sd;",
      "pos": [
        6967,
        6984
      ]
    },
    {
      "content": "}",
      "pos": [
        6989,
        6990
      ]
    },
    {
      "content": "Creation of web service",
      "pos": [
        8072,
        8095
      ]
    },
    {
      "content": "This web service was created using Azure Machine Learning.",
      "pos": [
        8098,
        8156
      ]
    },
    {
      "content": "For a free trial, as well as introductory videos on creating experiments and <bpt id=\"p1\">[</bpt>publishing web services<ept id=\"p1\">](machine-learning-publish-a-machine-learning-web-service.md)</ept>, please see <bpt id=\"p2\">[</bpt>azure.com/ml<ept id=\"p2\">](http://azure.com/ml)</ept>.",
      "pos": [
        8157,
        8368
      ]
    },
    {
      "content": "Below is a screenshot of the experiment that created the web service and example code for each of the modules within the experiment.",
      "pos": [
        8371,
        8503
      ]
    },
    {
      "content": "Normal Distribution Quantile Calculator",
      "pos": [
        8508,
        8547
      ]
    },
    {
      "content": "Experiment flow:",
      "pos": [
        8549,
        8565
      ]
    },
    {
      "content": "Experiment flow",
      "pos": [
        8569,
        8584
      ]
    },
    {
      "content": "Normal Distribution Probability Calculator",
      "pos": [
        9450,
        9492
      ]
    },
    {
      "content": "Experiment flow:",
      "pos": [
        9493,
        9509
      ]
    },
    {
      "content": "Experiment flow",
      "pos": [
        9513,
        9528
      ]
    },
    {
      "content": "Normal Distribution Generator",
      "pos": [
        10283,
        10312
      ]
    },
    {
      "content": "Experiment flow:",
      "pos": [
        10313,
        10329
      ]
    },
    {
      "content": "Experiment flow",
      "pos": [
        10333,
        10348
      ]
    },
    {
      "content": "Limitations",
      "pos": [
        10859,
        10870
      ]
    },
    {
      "content": "These are very simple examples surrounding the normal distribution.",
      "pos": [
        10873,
        10940
      ]
    },
    {
      "content": "As can be seen from the example code above, little error catching is implemented.",
      "pos": [
        10941,
        11022
      ]
    },
    {
      "content": "FAQ",
      "pos": [
        11026,
        11029
      ]
    },
    {
      "content": "For frequently asked questions on consumption of the web service or publishing to the Azure Marketplace, see <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](machine-learning-marketplace-faq.md)</ept>.",
      "pos": [
        11030,
        11183
      ]
    },
    {
      "content": "test",
      "pos": [
        11488,
        11492
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"Normal Distribution Web Service Suite | Microsoft Azure\" \n    description=\"Normal Distribution Web Service Suite\" \n    services=\"machine-learning\" \n    documentationCenter=\"\" \n    authors=\"jaymathe\" \n    manager=\"paulettm\" \n    editor=\"cgronlun\"/>\n\n<tags \n    ms.service=\"machine-learning\" \n    ms.workload=\"data-services\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"na\" \n    ms.topic=\"article\" \n    ms.date=\"09/02/2015\" \n    ms.author=\"jaymathe\"/> \n\n#Normal Distribution Suite\n\n\n\nThe Normal Distribution Suite is a set of sample web services ([Generator]( https://datamarket.azure.com/dataset/aml_labs/ndg7), [Quantile Calculator]( https://datamarket.azure.com/dataset/aml_labs/ndq5), [Probability Calculator]( https://datamarket.azure.com/dataset/aml_labs/ndp5)) that help in generating and handling normal distributions. The services allow generating a normal distribution sequence of any length, calculating quantiles from a given probability, and calculating probability from a given quantile. Each of the services emits different outputs based on the selected service (see description below). The Normal Distribution Suite is based on the R functions qnorm, rnorm, and pnorm, which are included in R stats package.\n\n\n[AZURE.INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]\n\n>This web service could be consumed by users – potentially through a mobile app, through a website, or even on a local computer, for example. But the purpose of the web service is also to serve as an example of how Azure Machine Learning can be used to create web services on top of R code. With just a few lines of R code and clicks of a button within Azure Machine Learning Studio, an experiment can be created with R code and published as a web service. The web service can then be published to the Azure Marketplace and consumed by users and devices across the world with no infrastructure setup by the author of the web service.  \n \n\n##Consumption of web service\nThe Normal Distribution Suite includes the following 3 services.\n\n###Normal Distribution Quantile Calculator\nThis service accepts 4 arguments of a normal distribution and calculates the associated quantile.\n\nThe input arguments are:\n\n* p - A single probability of an event with normal distribution. \n* Mean - The normal distribution mean.\n* SD - The normal distribution standard deviation. \n* Side - L for the lower side of the distribution and U for the upper side of the distribution.\n\nThe output of the service is the calculated quantile that is associated with the given probability.\n\n###Normal Distribution Probability Calculator\nThis service accepts 4 arguments of a normal distribution and calculates the associated probability.\n\nThe input arguments are:\n\n* q - A single quantile of an event with normal distribution. \n* Mean - The normal distribution mean.\n* SD - The normal distribution standard deviation. \n* Side - L for the lower side of the distribution and U for the upper side of the distribution.\n\nThe output of the service is the calculated probability that is associated with the given quantile.\n\n###Normal Distribution Generator\nThis service accepts 3 arguments of a normal distribution and generates a random sequence of numbers that are normally distributed. \nThe following arguments should be provided to it within the request:\n\n* n - The number of observations. \n* mean - The normal distribution mean.\n* sd - The normal distribution standard deviation. \n\nThe output of the service is a sequence of length n with a normal distribution based on the mean and sd arguments.\n\n>This service, as hosted on the Azure Marketplace, is an OData service; these may be called through POST or GET methods. \n\nThere are multiple ways of consuming the service in an automated fashion (example apps are here: [Generator](http://microsoftazuremachinelearning.azurewebsites.net/NormalDistributionGenerator.aspx),\n[Probability Calculator](http://microsoftazuremachinelearning.azurewebsites.net/NormalDistributionProbabilityCalculator.aspx),\n[Quantile Calculator](http://microsoftazuremachinelearning.azurewebsites.net/NormalDistributionQuantileCalculator.aspx)).\n\n###Starting C# code for web service consumption:\n\n###Normal Distribution Quantile Calculator\n    public class Input\n    {\n            public string p;\n            public string mean;\n            public string sd;\n            public string side;\n    }\n    \n    public AuthenticationHeaderValue CreateBasicHeader(string username, string password)\n    {\n            byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(username + \":\" + password);\n            return new AuthenticationHeaderValue(\"Basic\", Convert.ToBase64String(byteArray));\n    }\n    \n    void Main()\n    {\n            var input = new Input() { p = TextBox1.Text, mean = TextBox2.Text, sd = TextBox3.Text, side = TextBox4.Text };\n            var json = JsonConvert.SerializeObject(input);\n            var acitionUri = \"PutAPIURLHere,e.g.https://api.datamarket.azure.com/..../v1/Score\";\n            var httpClient = new HttpClient();\n    \n            httpClient.DefaultRequestHeaders.Authorization = CreateBasicHeader(\"PutEmailAddressHere\", \"ChangeToAPIKey\");\n            httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(\"application/json\"));\n    \n            var response = httpClient.PostAsync(acitionUri, new StringContent(json));\n            var result = response.Result.Content;\n            var scoreResult = result.ReadAsStringAsync().Result;\n    }\n\n\n###Normal Distribution Probability Calculator\n    public class Input\n    {\n            public string q;\n            public string mean;\n            public string sd;\n            public string side;\n    }\n    \n    public AuthenticationHeaderValue CreateBasicHeader(string username, string password)\n    {\n            byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(username + \":\" + password);\n            return new AuthenticationHeaderValue(\"Basic\", Convert.ToBase64String(byteArray));\n    }\n    \n    void Main()\n    {\n            var input = new Input() { q = TextBox1.Text, mean = TextBox2.Text, sd = TextBox3.Text, side = TextBox4.Text };\n            var json = JsonConvert.SerializeObject(input);\n            var acitionUri = \"PutAPIURLHere,e.g.https://api.datamarket.azure.com/..../v1/Score\";\n            var httpClient = new HttpClient();\n    \n            httpClient.DefaultRequestHeaders.Authorization = CreateBasicHeader(\"PutEmailAddressHere\", \"ChangeToAPIKey\");\n            httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(\"application/json\"));\n    \n            var response = httpClient.PostAsync(acitionUri, new StringContent(json));\n            var result = response.Result.Content;\n            var scoreResult = result.ReadAsStringAsync().Result;\n    }\n\n###Normal Distribution Generator\n    public class Input\n    {\n            public string n;\n            public string mean;\n            public string sd;\n    }\n    \n    public AuthenticationHeaderValue CreateBasicHeader(string username, string password)\n    {\n            byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(username + \":\" + password);\n            return new AuthenticationHeaderValue(\"Basic\", Convert.ToBase64String(byteArray));\n    }\n    \n    void Main()\n    {\n            var input = new Input() { n = TextBox1.Text, mean = TextBox2.Text, sd = TextBox3.Text };\n            var json = JsonConvert.SerializeObject(input);\n            var acitionUri = \"PutAPIURLHere,e.g.https://api.datamarket.azure.com/..../v1/Score\";\n            var httpClient = new HttpClient();\n    \n            httpClient.DefaultRequestHeaders.Authorization = CreateBasicHeader(\"PutEmailAddressHere\", \"ChangeToAPIKey\");\n            httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(\"application/json\"));\n    \n            var response = httpClient.PostAsync(acitionUri, new StringContent(json));\n            var result = response.Result.Content;\n            var scoreResult = result.ReadAsStringAsync().Result;\n    }\n\n\n##Creation of web service \n>This web service was created using Azure Machine Learning. For a free trial, as well as introductory videos on creating experiments and [publishing web services](machine-learning-publish-a-machine-learning-web-service.md), please see [azure.com/ml](http://azure.com/ml). \n\nBelow is a screenshot of the experiment that created the web service and example code for each of the modules within the experiment.\n\n###Normal Distribution Quantile Calculator\n\nExperiment flow:\n\n![Experiment flow][2]\n \n    #Data schema with example data (replaced with data from web service)\n    data.set=data.frame(p=0.1,mean=0,sd=1,side='L');\n    maml.mapOutputPort(\"data.set\"); #send data to output port\n    \n    # Map 1-based optional input ports to variables\n    dataset1 <- maml.mapInputPort(1) # class: data.frame\n\n    param = dataset1\n    if (param$p < 0 ) {\n    print('Bad input: p must be between 0 and 1')\n    param$p = 0\n    } else if (param$p > 1) {\n    print('Bad input: p must be between 0 and 1')\n    param$p = 1\n    }\n    q = qnorm(param$p,mean=param$mean,sd=param$sd)\n\n    if (param$side == 'U'){\n    q = 2* param$mean - q\n    } else if (param$side =='L') {\n    q = q\n    } else {\n    print(\"Invalid side choice\")\n    }\n\n    output = as.data.frame(q)\n    \n    # Select data.frame to be sent to the output Dataset port\n    maml.mapOutputPort(\"output\");\n    \n###Normal Distribution Probability Calculator\nExperiment flow:\n\n![Experiment flow][3]\n \n    #Data schema with example data (replaced with data from web service)\n    data.set=data.frame(q=-1,mean=0,sd=1,side='L');\n    maml.mapOutputPort(\"data.set\"); #send data to output port\n    \n    # Map 1-based optional input ports to variables\n    dataset1 <- maml.mapInputPort(1) # class: data.frame\n\n    param = dataset1\n    prob = pnorm(param$q,mean=param$mean,sd=param$sd)\n\n    if (param$side == 'U'){\n    prob = 1 - prob\n    } else if (param$side =='B') {\n    prob = ifelse(prob<=0.5,prob * 2, 1)\n    } else if (param$side =='L') {\n    prob = prob\n    } else {\n    print(\"Invalid side choice\")\n    }\n\n    output = as.data.frame(prob)\n    \n    # Select data.frame to be sent to the output Dataset port\n    maml.mapOutputPort(\"output\");\n    \n###Normal Distribution Generator\nExperiment flow:\n\n![Experiment flow][4]\n\n    #Data schema with example data (replaced with data from web service)\n    data.set=data.frame(n=50,mean=0,sd=1);\n    maml.mapOutputPort(\"data.set\"); #send data to output port\n    \n    # Map 1-based optional input ports to variables\n    dataset1 <- maml.mapInputPort(1) # class: data.frame\n\n    param = dataset1\n    dist = rnorm(param$n,mean=param$mean,sd=param$sd)\n\n    output = as.data.frame(t(dist))\n\n    # Select data.frame to be sent to the output Dataset port\n    maml.mapOutputPort(\"output\");\n\n##Limitations \n\nThese are very simple examples surrounding the normal distribution. As can be seen from the example code above, little error catching is implemented.\n\n##FAQ\nFor frequently asked questions on consumption of the web service or publishing to the Azure Marketplace, see [here](machine-learning-marketplace-faq.md).\n\n[1]: ./media/machine-learning-r-csharp-normal-distribution/normal-img1.png\n[2]: ./media/machine-learning-r-csharp-normal-distribution/normal-img2.png\n[3]: ./media/machine-learning-r-csharp-normal-distribution/normal-img3.png\n[4]: ./media/machine-learning-r-csharp-normal-distribution/normal-img4.png\n \n\ntest\n"
}