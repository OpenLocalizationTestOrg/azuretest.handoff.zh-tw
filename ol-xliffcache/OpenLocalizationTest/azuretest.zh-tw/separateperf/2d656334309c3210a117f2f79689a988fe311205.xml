{
  "nodes": [
    {
      "content": "Manage Hadoop clusters in HDInsight using the Azure preview portal | Microsoft Azure",
      "pos": [
        27,
        111
      ]
    },
    {
      "content": "Learn how to administer HDInsight Service.",
      "pos": [
        130,
        172
      ]
    },
    {
      "content": "Create an HDInsight cluster, open the interactive JavaScript console, and open the Hadoop command console.",
      "pos": [
        173,
        279
      ]
    },
    {
      "content": "Manage Hadoop clusters in HDInsight by using the Azure preview portal",
      "pos": [
        603,
        672
      ]
    },
    {
      "pos": [
        758,
        990
      ],
      "content": "Using the <bpt id=\"p1\">[</bpt>Azure preview portal<ept id=\"p1\">][azure-portal]</ept>, you can provision Hadoop clusters in Azure HDInsight, change Hadoop user password, and enable Remote Desktop Protocol (RDP) so you can access the Hadoop command console on the cluster."
    },
    {
      "content": "Manage Hadoop clusters in HDInsight by using the Azure portal",
      "pos": [
        1095,
        1156
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> The steps in this document are specific to working with Windows-based Hadoop clusters.",
      "pos": [
        1211,
        1310
      ]
    },
    {
      "content": "For information on working with Linux-based clusters, see <bpt id=\"p1\">[</bpt>Manage Hadoop clusters in HDInsight by using the Azure preview portal<ept id=\"p1\">](hdinsight-administer-use-portal-linux.md)</ept>",
      "pos": [
        1311,
        1482
      ]
    },
    {
      "pos": [
        1488,
        1600
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> There are also other tools available for administering HDInsight in addition to the preview portal."
    },
    {
      "content": "Administer HDInsight Using Azure PowerShell",
      "pos": [
        1608,
        1651
      ]
    },
    {
      "content": "Administer HDInsight Using Azure CLI",
      "pos": [
        1698,
        1734
      ]
    },
    {
      "content": "Prerequisites",
      "pos": [
        1781,
        1794
      ]
    },
    {
      "content": "Before you begin this article, you must have the following:",
      "pos": [
        1798,
        1857
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>An Azure subscription<ept id=\"p1\">**</ept>.",
      "pos": [
        1861,
        1887
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Get Azure free trial<ept id=\"p1\">](http://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/)</ept>.",
      "pos": [
        1888,
        2018
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Azure Storage account<ept id=\"p1\">**</ept> - An HDInsight cluster uses an Azure Blob storage container as the default file system.",
      "pos": [
        2021,
        2134
      ]
    },
    {
      "content": "For more information about how Azure Blob storage provides a seamless experience with HDInsight clusters, see <bpt id=\"p1\">[</bpt>Use Azure Blob Storage with HDInsight<ept id=\"p1\">](../hdinsight-use-blob-storage.md)</ept>.",
      "pos": [
        2135,
        2319
      ]
    },
    {
      "content": "For details on creating an Azure Storage account, see <bpt id=\"p1\">[</bpt>How to Create a Storage Account<ept id=\"p1\">](../storage-create-storage-account.md)</ept>.",
      "pos": [
        2320,
        2446
      ]
    },
    {
      "content": "Provision HDInsight clusters",
      "pos": [
        2451,
        2479
      ]
    },
    {
      "pos": [
        2481,
        2613
      ],
      "content": "For the provision instructions using the preview portal, see <bpt id=\"p1\">[</bpt>Provision HDInsight clusters<ept id=\"p1\">](hdinsight-provision-clusters.md#portal)</ept>."
    },
    {
      "content": "Customize HDInsight clusters provision",
      "pos": [
        2617,
        2655
      ]
    },
    {
      "content": "HDInsight works with a wide range of Hadoop components.",
      "pos": [
        2657,
        2712
      ]
    },
    {
      "content": "For the list of the components that have been verified and supported, see <bpt id=\"p1\">[</bpt>What version of Hadoop is in Azure HDInsight<ept id=\"p1\">](hdinsight-component-versioning.md)</ept>.",
      "pos": [
        2713,
        2869
      ]
    },
    {
      "content": "You can customize HDInsight by using one of the following options:",
      "pos": [
        2870,
        2936
      ]
    },
    {
      "content": "Use Script Action to run custom scripts that can customize a cluster to either change cluster configuration or install custom components such as Giraph or Solr.",
      "pos": [
        2940,
        3100
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Customize HDInsight cluster using Script Action<ept id=\"p1\">](hdinsight-hadoop-customize-cluster.md)</ept>.",
      "pos": [
        3101,
        3216
      ]
    },
    {
      "content": "Use the cluster customization parameters in the HDInsight .NET SDK or Azure PowerShell during cluster provisioning.",
      "pos": [
        3219,
        3334
      ]
    },
    {
      "content": "These configuration changes are then preserved through the lifetime of the cluster and are not affected by cluster node reimages that Azure platform periodically performs for maintenance.",
      "pos": [
        3335,
        3522
      ]
    },
    {
      "content": "For more information on using the cluster customization parameters, see <bpt id=\"p1\">[</bpt>Provision HDInsight clusters<ept id=\"p1\">](hdinsight-provision-clusters.md)</ept>.",
      "pos": [
        3523,
        3659
      ]
    },
    {
      "content": "Some native Java components, like Mahout and Cascading, can be run on the cluster as JAR files.",
      "pos": [
        3662,
        3757
      ]
    },
    {
      "content": "These JAR files can be distributed to Azure Blob storage, and submitted to HDInsight clusters through Hadoop job submission mechanisms.",
      "pos": [
        3758,
        3893
      ]
    },
    {
      "content": "For more information, see <bpt id=\"p1\">[</bpt>Submit Hadoop jobs programmatically<ept id=\"p1\">](hdinsight-submit-hadoop-jobs-programmatically.md)</ept>.",
      "pos": [
        3894,
        4008
      ]
    },
    {
      "content": "Installation of custom software on the cluster by using Remote Desktop Connection is not supported.",
      "pos": [
        4436,
        4535
      ]
    },
    {
      "content": "You should avoid storing any files on the drives of the head node, as they will be lost if you need to re-create the clusters.",
      "pos": [
        4536,
        4662
      ]
    },
    {
      "content": "We recommend storing files on Azure Blob storage.",
      "pos": [
        4663,
        4712
      ]
    },
    {
      "content": "Blob storage is persistent.",
      "pos": [
        4713,
        4740
      ]
    },
    {
      "content": "Get familiar with the cluster portal interface",
      "pos": [
        4745,
        4791
      ]
    },
    {
      "content": "To access the cluster",
      "pos": [
        4795,
        4816
      ]
    },
    {
      "pos": [
        4823,
        4869
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>preview portal<ept id=\"p1\">][azure-portal]</ept>."
    },
    {
      "pos": [
        4873,
        4942
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse All<ept id=\"p1\">**</ept> from the left menu to open the <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept> blade."
    },
    {
      "pos": [
        4946,
        5016
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>HDInsight Clusters<ept id=\"p1\">**</ept> to open the <bpt id=\"p2\">**</bpt>HDInsight Clusters<ept id=\"p2\">**</ept> blade."
    },
    {
      "content": "Click one of the clusters from the list to open the cluster blade:",
      "pos": [
        5020,
        5086
      ]
    },
    {
      "content": "HDInsight portal",
      "pos": [
        5094,
        5110
      ]
    },
    {
      "pos": [
        5203,
        5284
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> to see the configuration details and to configure the cluster:"
    },
    {
      "content": "HDInsight portal cluster settings",
      "pos": [
        5292,
        5325
      ]
    },
    {
      "content": "Setting",
      "pos": [
        5423,
        5430
      ]
    },
    {
      "content": "Description",
      "pos": [
        5431,
        5442
      ]
    },
    {
      "content": "Properties",
      "pos": [
        5467,
        5477
      ]
    },
    {
      "content": "Display the cluster properties.",
      "pos": [
        5479,
        5510
      ]
    },
    {
      "content": "Azure Storage Keys",
      "pos": [
        5517,
        5535
      ]
    },
    {
      "content": "Display the default Azure storage account information.",
      "pos": [
        5537,
        5591
      ]
    },
    {
      "content": "Cluster Login",
      "pos": [
        5599,
        5612
      ]
    },
    {
      "content": "Grant/revoke the HTTP web services access, and configure the cluster login information.",
      "pos": [
        5614,
        5701
      ]
    },
    {
      "content": "External Metastores",
      "pos": [
        5709,
        5728
      ]
    },
    {
      "content": "Display the Hive/Oozie metastore information.",
      "pos": [
        5730,
        5775
      ]
    },
    {
      "content": "Scale cluster",
      "pos": [
        5782,
        5795
      ]
    },
    {
      "content": "Increase/decrease the number of workers nodes of the cluster.",
      "pos": [
        5797,
        5858
      ]
    },
    {
      "content": "Remote Desktop",
      "pos": [
        5865,
        5879
      ]
    },
    {
      "content": "Enable/disable the Remote Desktop connectivity, connect to the cluster via Remote Desktop.",
      "pos": [
        5881,
        5971
      ]
    },
    {
      "content": "Grant/revoke HTTP services access",
      "pos": [
        5977,
        6010
      ]
    },
    {
      "content": "HDInsight clusters have the following HTTP web services (all of these services have RESTful endpoints):",
      "pos": [
        6012,
        6115
      ]
    },
    {
      "content": "ODBC",
      "pos": [
        6119,
        6123
      ]
    },
    {
      "content": "JDBC",
      "pos": [
        6126,
        6130
      ]
    },
    {
      "content": "Ambari",
      "pos": [
        6133,
        6139
      ]
    },
    {
      "content": "Oozie",
      "pos": [
        6142,
        6147
      ]
    },
    {
      "content": "Templeton",
      "pos": [
        6150,
        6159
      ]
    },
    {
      "content": "By default, these services are granted for access.",
      "pos": [
        6161,
        6211
      ]
    },
    {
      "content": "You can revoke/grant the access from the Azure portal.",
      "pos": [
        6212,
        6266
      ]
    },
    {
      "pos": [
        6269,
        6365
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> By granting/revoking the access, you will reset the cluster user name and password."
    },
    {
      "content": "To grant/revoke HTTP web services access",
      "pos": [
        6369,
        6409
      ]
    },
    {
      "pos": [
        6416,
        6462
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>preview portal<ept id=\"p1\">][azure-portal]</ept>."
    },
    {
      "pos": [
        6466,
        6561
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse All<ept id=\"p1\">**</ept> from the left menu, click <bpt id=\"p2\">**</bpt>HDInsight Clusters<ept id=\"p2\">**</ept>, click your cluster name."
    },
    {
      "pos": [
        6565,
        6636
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> from the top menu, and then click <bpt id=\"p2\">**</bpt>Cluster Login<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        6640,
        6692
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>ON<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>OFF<ept id=\"p2\">**</ept> on <bpt id=\"p3\">**</bpt>Cluster Login Access<ept id=\"p3\">**</ept>."
    },
    {
      "pos": [
        6698,
        6829
      ],
      "content": "For <bpt id=\"p1\">**</bpt>Cluster Login Username<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Cluster Login Password<ept id=\"p2\">**</ept>, enter the new user name and password (respectively) for the cluster."
    },
    {
      "pos": [
        6833,
        6848
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>SAVE<ept id=\"p1\">**</ept>."
    },
    {
      "content": "hdinsight grand remove http web service access",
      "pos": [
        6856,
        6902
      ]
    },
    {
      "content": "This can also be done through the Azure PowerShell cmdlets:",
      "pos": [
        7004,
        7063
      ]
    },
    {
      "content": "Grant-AzureHDInsightHttpServicesAccess",
      "pos": [
        7067,
        7105
      ]
    },
    {
      "content": "Revoke-AzureHDInsightHttpServicesAccess",
      "pos": [
        7108,
        7147
      ]
    },
    {
      "pos": [
        7149,
        7239
      ],
      "content": "See <bpt id=\"p1\">[</bpt>Administer HDInsight using Azure PowerShell<ept id=\"p1\">](hdinsight-administer-use-powershell.md)</ept>."
    },
    {
      "content": "Change the HDInsight cluster username and password",
      "pos": [
        7243,
        7293
      ]
    },
    {
      "content": "An HDInsight cluster can have two user accounts.",
      "pos": [
        7294,
        7342
      ]
    },
    {
      "content": "The HDInsight cluster user account is created during the provisioning process.",
      "pos": [
        7343,
        7421
      ]
    },
    {
      "content": "You can also create an RDP user account for accessing the cluster via RDP.",
      "pos": [
        7422,
        7496
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Enable remote desktop<ept id=\"p1\">](#connect-to-hdinsight-clusters-by-using-rdp)</ept>.",
      "pos": [
        7497,
        7570
      ]
    },
    {
      "content": "To change the HDInsight cluster user name and password",
      "pos": [
        7574,
        7628
      ]
    },
    {
      "pos": [
        7635,
        7681
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>preview portal<ept id=\"p1\">][azure-portal]</ept>."
    },
    {
      "pos": [
        7685,
        7780
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse All<ept id=\"p1\">**</ept> from the left menu, click <bpt id=\"p2\">**</bpt>HDInsight Clusters<ept id=\"p2\">**</ept>, click your cluster name."
    },
    {
      "pos": [
        7784,
        7855
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> from the top menu, and then click <bpt id=\"p2\">**</bpt>Cluster Login<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        7859,
        7956
      ],
      "content": "Change the <bpt id=\"p1\">**</bpt>Cluster Login Name<ept id=\"p1\">**</ept> and/or the <bpt id=\"p2\">**</bpt>Cluster Login Password<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Save<ept id=\"p3\">**</ept>."
    },
    {
      "content": "hdinsight change cluster user username password http user",
      "pos": [
        7964,
        8021
      ]
    },
    {
      "content": "Scale clusters",
      "pos": [
        8124,
        8138
      ]
    },
    {
      "content": "The cluster scaling feature allows you to change the number of worker nodes used by a cluster that is running in Azure HDInsight without having to re-create the cluster.",
      "pos": [
        8139,
        8308
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Only clusters with HDInsight version 3.1.3 or higher are supported.",
      "pos": [
        8311,
        8391
      ]
    },
    {
      "content": "If you are unsure of the version of your cluster, you can check the Properties page.",
      "pos": [
        8392,
        8476
      ]
    },
    {
      "content": "See <bpt id=\"p1\">[</bpt>Get familiar with the cluster portal interface<ept id=\"p1\">](hdinsight-adminster-use-management-portal/#Get-familiar-with-the-cluster-portal-interface)</ept>.",
      "pos": [
        8478,
        8622
      ]
    },
    {
      "content": "The impact of changing the number of data nodes for each type of cluster supported by HDInsight:",
      "pos": [
        8624,
        8720
      ]
    },
    {
      "content": "Hadoop",
      "pos": [
        8724,
        8730
      ]
    },
    {
      "content": "You can seamlessly increase the number of worker nodes in a Hadoop cluster that is running without impacting any pending or running jobs.",
      "pos": [
        8736,
        8873
      ]
    },
    {
      "content": "New jobs can also be submitted while the operation is in progress.",
      "pos": [
        8874,
        8940
      ]
    },
    {
      "content": "Failures in a scaling operation are gracefully handled so that the cluster is always left in a functional state.",
      "pos": [
        8941,
        9053
      ]
    },
    {
      "content": "When a Hadoop cluster is scaled down by reducing the number of data nodes, some of the services in the cluster are restarted.",
      "pos": [
        9059,
        9184
      ]
    },
    {
      "content": "This causes all running and pending jobs to fail at the completion of the scaling operation.",
      "pos": [
        9185,
        9277
      ]
    },
    {
      "content": "You can, however, resubmit the jobs once the operation is complete.",
      "pos": [
        9278,
        9345
      ]
    },
    {
      "content": "HBase",
      "pos": [
        9349,
        9354
      ]
    },
    {
      "content": "You can seamlessly add or remove nodes to your HBase cluster while it is running.",
      "pos": [
        9360,
        9441
      ]
    },
    {
      "content": "Regional Servers are automatically balanced within a few minutes of completing the scaling operation.",
      "pos": [
        9442,
        9543
      ]
    },
    {
      "content": "However, you can also manually balance the regional servers by logging into the headnode of cluster and running the following commands from a command prompt window:",
      "pos": [
        9544,
        9708
      ]
    },
    {
      "content": "For more information on using the HBase shell, see []",
      "pos": [
        9786,
        9839
      ]
    },
    {
      "content": "Storm",
      "pos": [
        9842,
        9847
      ]
    },
    {
      "content": "You can seamlessly add or remove data nodes to your Storm cluster while it is running.",
      "pos": [
        9853,
        9939
      ]
    },
    {
      "content": "But after a successful completion of the scaling operation, you will need to rebalance the topology.",
      "pos": [
        9940,
        10040
      ]
    },
    {
      "content": "Rebalancing can be accomplished in two ways:",
      "pos": [
        10046,
        10090
      ]
    },
    {
      "content": "Storm web UI",
      "pos": [
        10098,
        10110
      ]
    },
    {
      "content": "Command-line interface (CLI) tool",
      "pos": [
        10117,
        10150
      ]
    },
    {
      "pos": [
        10156,
        10316
      ],
      "content": "Please refer to the <bpt id=\"p1\">[</bpt>Apache Storm documentation<ept id=\"p1\">](http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html)</ept> for more details."
    },
    {
      "content": "The Storm web UI is available on the HDInsight cluster:",
      "pos": [
        10322,
        10377
      ]
    },
    {
      "content": "hdinsight storm scale rebalance",
      "pos": [
        10385,
        10416
      ]
    },
    {
      "content": "Here is an example how to use the CLI command to rebalance the Storm topology:",
      "pos": [
        10526,
        10604
      ]
    },
    {
      "content": "To scale clusters",
      "pos": [
        10875,
        10892
      ]
    },
    {
      "pos": [
        10899,
        10945
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>preview portal<ept id=\"p1\">][azure-portal]</ept>."
    },
    {
      "pos": [
        10949,
        11044
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse All<ept id=\"p1\">**</ept> from the left menu, click <bpt id=\"p2\">**</bpt>HDInsight Clusters<ept id=\"p2\">**</ept>, click your cluster name."
    },
    {
      "pos": [
        11048,
        11119
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> from the top menu, and then click <bpt id=\"p2\">**</bpt>Scale Cluster<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Enter <bpt id=\"p1\">**</bpt>Number of Worker nodes<ept id=\"p1\">**</ept>.",
      "pos": [
        11123,
        11156
      ]
    },
    {
      "content": "The limit on the number of cluster node varies among Azure subscriptions.",
      "pos": [
        11157,
        11230
      ]
    },
    {
      "content": "You can contact billing support to increase the limit.",
      "pos": [
        11231,
        11285
      ]
    },
    {
      "content": "The cost information will reflect the changes you have made to the number of nodes.",
      "pos": [
        11287,
        11370
      ]
    },
    {
      "content": "Connect to HDInsight clusters by using RDP",
      "pos": [
        11513,
        11555
      ]
    },
    {
      "content": "The credentials for the cluster that you provided at its creation give access to the services on the cluster, but not to the cluster itself through Remote Desktop.",
      "pos": [
        11557,
        11720
      ]
    },
    {
      "content": "You can turn on Remote Desktop access when you provision a cluster or after a cluster is provisioned.",
      "pos": [
        11721,
        11822
      ]
    },
    {
      "content": "For the instructions about enabling Remote Desktop at provision, see <bpt id=\"p1\">[</bpt>Provision HDInsight cluster<ept id=\"p1\">](hdinsight-provision-clusters.md)</ept>.",
      "pos": [
        11823,
        11955
      ]
    },
    {
      "content": "To enable Remote Desktop",
      "pos": [
        11959,
        11983
      ]
    },
    {
      "pos": [
        11990,
        12036
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>preview portal<ept id=\"p1\">][azure-portal]</ept>."
    },
    {
      "pos": [
        12040,
        12135
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse All<ept id=\"p1\">**</ept> from the left menu, click <bpt id=\"p2\">**</bpt>HDInsight Clusters<ept id=\"p2\">**</ept>, click your cluster name."
    },
    {
      "pos": [
        12139,
        12211
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> from the top menu, and then click <bpt id=\"p2\">**</bpt>Remote Desktop<ept id=\"p2\">**</ept>."
    },
    {
      "pos": [
        12215,
        12324
      ],
      "content": "Enter <bpt id=\"p1\">**</bpt>Expires On<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Remote Desktop Username<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Remote Desktop Password<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Enable<ept id=\"p4\">**</ept>."
    },
    {
      "content": "hdinsight enable disable configure remote desktop",
      "pos": [
        12332,
        12381
      ]
    },
    {
      "content": "The default valus for Expires On is a week.",
      "pos": [
        12476,
        12519
      ]
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> You can also use the HDInsight .NET SDK to enable Remote Desktop on a cluster.",
      "pos": [
        12522,
        12613
      ]
    },
    {
      "content": "Use the <bpt id=\"p1\">**</bpt>EnableRdp<ept id=\"p1\">**</ept> method on the HDInsight client object in the following manner: <bpt id=\"p2\">**</bpt>client.EnableRdp(clustername, location, \"rdpuser\", \"rdppassword\", DateTime.Now.AddDays(6))<ept id=\"p2\">**</ept>.",
      "pos": [
        12614,
        12794
      ]
    },
    {
      "content": "Similarly, to disable Remote Desktop on the cluster, you can use <bpt id=\"p1\">**</bpt>client.DisableRdp(clustername, location)<ept id=\"p1\">**</ept>.",
      "pos": [
        12795,
        12905
      ]
    },
    {
      "content": "For more information on these methods, see <bpt id=\"p1\">[</bpt>HDInsight .NET SDK Reference<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=529017)</ept>.",
      "pos": [
        12906,
        13027
      ]
    },
    {
      "content": "This is applicable only for HDInsight clusters running on Windows.",
      "pos": [
        13028,
        13094
      ]
    },
    {
      "content": "To connect to a cluster by using RDP",
      "pos": [
        13098,
        13134
      ]
    },
    {
      "pos": [
        13141,
        13187
      ],
      "content": "Sign in to the <bpt id=\"p1\">[</bpt>preview portal<ept id=\"p1\">][azure-portal]</ept>."
    },
    {
      "pos": [
        13191,
        13286
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Browse All<ept id=\"p1\">**</ept> from the left menu, click <bpt id=\"p2\">**</bpt>HDInsight Clusters<ept id=\"p2\">**</ept>, click your cluster name."
    },
    {
      "pos": [
        13290,
        13362
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept> from the top menu, and then click <bpt id=\"p2\">**</bpt>Remote Desktop<ept id=\"p2\">**</ept>."
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Connect<ept id=\"p1\">**</ept> and follow the instructions.",
      "pos": [
        13366,
        13412
      ]
    },
    {
      "content": "If Connect is disable, you must enable it first.",
      "pos": [
        13413,
        13461
      ]
    },
    {
      "content": "Make sure using the Remote Desktop user username and password.",
      "pos": [
        13462,
        13524
      ]
    },
    {
      "content": "You can't use the Cluster user credentials.",
      "pos": [
        13526,
        13569
      ]
    },
    {
      "content": "Open a Hadoop command line",
      "pos": [
        13573,
        13599
      ]
    },
    {
      "content": "To connect to the cluster by using Remote Desktop and use the Hadoop command line, you must first have enabled Remote Desktop access to the cluster as described in the previous section.",
      "pos": [
        13601,
        13786
      ]
    },
    {
      "content": "To open a Hadoop command line",
      "pos": [
        13790,
        13819
      ]
    },
    {
      "content": "Connect to the cluster using Remote Desktop.",
      "pos": [
        13826,
        13870
      ]
    },
    {
      "pos": [
        13874,
        13929
      ],
      "content": "From the desktop, double-click <bpt id=\"p1\">**</bpt>Hadoop Command Line<ept id=\"p1\">**</ept>."
    },
    {
      "content": "HDI.HadoopCommandLine",
      "pos": [
        13937,
        13958
      ]
    },
    {
      "content": "In the previous screenshot, the folder name has the Hadoop version number embedded.",
      "pos": [
        14159,
        14242
      ]
    },
    {
      "content": "The version number can changed based on the version of the Hadoop components installed on the cluster.",
      "pos": [
        14243,
        14345
      ]
    },
    {
      "content": "You can use Hadoop environment variables to refer to those folders.",
      "pos": [
        14346,
        14413
      ]
    },
    {
      "content": "For example:",
      "pos": [
        14414,
        14426
      ]
    },
    {
      "content": "Next steps",
      "pos": [
        14553,
        14563
      ]
    },
    {
      "content": "In this article, you have learned how to create an HDInsight cluster by using the preview portal, and how to open the Hadoop command-line tool.",
      "pos": [
        14564,
        14707
      ]
    },
    {
      "content": "To learn more, see the following articles:",
      "pos": [
        14708,
        14750
      ]
    },
    {
      "content": "Administer HDInsight Using Azure PowerShell",
      "pos": [
        14755,
        14798
      ]
    },
    {
      "content": "Administer HDInsight Using Azure CLI",
      "pos": [
        14843,
        14879
      ]
    },
    {
      "content": "Provision HDInsight clusters",
      "pos": [
        14926,
        14954
      ]
    },
    {
      "content": "Submit Hadoop jobs programmatically",
      "pos": [
        14992,
        15027
      ]
    },
    {
      "content": "Get Started with Azure HDInsight",
      "pos": [
        15082,
        15114
      ]
    },
    {
      "content": "What version of Hadoop is in Azure HDInsight?",
      "pos": [
        15148,
        15193
      ]
    },
    {
      "content": "test",
      "pos": [
        15851,
        15855
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"Manage Hadoop clusters in HDInsight using the Azure preview portal | Microsoft Azure\"\n    description=\"Learn how to administer HDInsight Service. Create an HDInsight cluster, open the interactive JavaScript console, and open the Hadoop command console.\"\n    services=\"hdinsight\"\n    documentationCenter=\"\"\n    tags=\"azure-portal\"\n    authors=\"mumian\"\n    manager=\"paulettm\"\n    editor=\"cgronlun\"/>\n\n<tags\n    ms.service=\"hdinsight\"\n    ms.workload=\"big-data\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"na\"\n    ms.topic=\"article\"\n    ms.date=\"08/11/2015\"\n    ms.author=\"jgao\"/>\n\n# Manage Hadoop clusters in HDInsight by using the Azure preview portal\n\n[AZURE.INCLUDE [selector](../../includes/hdinsight-portal-management-selector.md)]\n\nUsing the [Azure preview portal][azure-portal], you can provision Hadoop clusters in Azure HDInsight, change Hadoop user password, and enable Remote Desktop Protocol (RDP) so you can access the Hadoop command console on the cluster.\n\n[AZURE.INCLUDE [hdinsight-azure-preview-portal](../../includes/hdinsight-azure-preview-portal.md)]\n\n* [Manage Hadoop clusters in HDInsight by using the Azure portal](hdinsight-administer-use-management-portal-v1.md)\n\n> [AZURE.NOTE] The steps in this document are specific to working with Windows-based Hadoop clusters. For information on working with Linux-based clusters, see [Manage Hadoop clusters in HDInsight by using the Azure preview portal](hdinsight-administer-use-portal-linux.md)\n\n\n\n> [AZURE.NOTE] There are also other tools available for administering HDInsight in addition to the preview portal.\n>\n> - [Administer HDInsight Using Azure PowerShell](hdinsight-administer-use-powershell.md)\n> - [Administer HDInsight Using Azure CLI](hdinsight-administer-use-command-line.md)\n\n**Prerequisites**\n\nBefore you begin this article, you must have the following:\n\n- **An Azure subscription**. See [Get Azure free trial](http://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).\n- **Azure Storage account** - An HDInsight cluster uses an Azure Blob storage container as the default file system. For more information about how Azure Blob storage provides a seamless experience with HDInsight clusters, see [Use Azure Blob Storage with HDInsight](../hdinsight-use-blob-storage.md). For details on creating an Azure Storage account, see [How to Create a Storage Account](../storage-create-storage-account.md).\n\n\n##Provision HDInsight clusters\n\nFor the provision instructions using the preview portal, see [Provision HDInsight clusters](hdinsight-provision-clusters.md#portal).\n\n##Customize HDInsight clusters provision\n\nHDInsight works with a wide range of Hadoop components. For the list of the components that have been verified and supported, see [What version of Hadoop is in Azure HDInsight](hdinsight-component-versioning.md). You can customize HDInsight by using one of the following options:\n\n- Use Script Action to run custom scripts that can customize a cluster to either change cluster configuration or install custom components such as Giraph or Solr. For more information, see [Customize HDInsight cluster using Script Action](hdinsight-hadoop-customize-cluster.md).\n- Use the cluster customization parameters in the HDInsight .NET SDK or Azure PowerShell during cluster provisioning. These configuration changes are then preserved through the lifetime of the cluster and are not affected by cluster node reimages that Azure platform periodically performs for maintenance. For more information on using the cluster customization parameters, see [Provision HDInsight clusters](hdinsight-provision-clusters.md).\n- Some native Java components, like Mahout and Cascading, can be run on the cluster as JAR files. These JAR files can be distributed to Azure Blob storage, and submitted to HDInsight clusters through Hadoop job submission mechanisms. For more information, see [Submit Hadoop jobs programmatically](hdinsight-submit-hadoop-jobs-programmatically.md).\n\n\n    >[AZURE.NOTE] If you have issues deploying JAR files to HDInsight clusters or calling JAR files on HDInsight clusters, contact [Microsoft Support](http://azure.microsoft.com/support/options/).\n\n    > Cascading is not supported by HDInsight, and is not eligible for Microsoft Support. For lists of supported components, see [What's new in the cluster versions provided by HDInsight?](hdinsight-component-versioning.md).\n\n\nInstallation of custom software on the cluster by using Remote Desktop Connection is not supported. You should avoid storing any files on the drives of the head node, as they will be lost if you need to re-create the clusters. We recommend storing files on Azure Blob storage. Blob storage is persistent.\n\n## Get familiar with the cluster portal interface\n\n**To access the cluster**\n\n1. Sign in to the [preview portal][azure-portal].\n2. Click **Browse All** from the left menu to open the **Browse** blade.\n3. Click **HDInsight Clusters** to open the **HDInsight Clusters** blade.\n4. Click one of the clusters from the list to open the cluster blade:\n\n    ![HDInsight portal](./media/hdinsight-administer-use-management-portal/hdinsight.portal.cluster.blade.png)\n\n5. Click **Settings** to see the configuration details and to configure the cluster:\n\n    ![HDInsight portal cluster settings](./media/hdinsight-administer-use-management-portal/hdinsight.portal.cluster.settings.png)\n\n    |Setting|Description|\n    |-----|-----|\n    |Properties| Display the cluster properties.|\n    |Azure Storage Keys| Display the default Azure storage account information. |\n    |Cluster Login| Grant/revoke the HTTP web services access, and configure the cluster login information. |\n    |External Metastores| Display the Hive/Oozie metastore information.|\n    |Scale cluster| Increase/decrease the number of workers nodes of the cluster.|\n    |Remote Desktop| Enable/disable the Remote Desktop connectivity, connect to the cluster via Remote Desktop.|\n\n\n##Grant/revoke HTTP services access\n\nHDInsight clusters have the following HTTP web services (all of these services have RESTful endpoints):\n\n- ODBC\n- JDBC\n- Ambari\n- Oozie\n- Templeton\n\nBy default, these services are granted for access. You can revoke/grant the access from the Azure portal.\n\n>[AZURE.NOTE] By granting/revoking the access, you will reset the cluster user name and password.\n\n**To grant/revoke HTTP web services access**\n\n1. Sign in to the [preview portal][azure-portal].\n2. Click **Browse All** from the left menu, click **HDInsight Clusters**, click your cluster name.\n3. Click **Settings** from the top menu, and then click **Cluster Login**.\n5. Click **ON** or **OFF** on **Cluster Login Access**.  \n6. For **Cluster Login Username** and **Cluster Login Password**, enter the new user name and password (respectively) for the cluster.\n7. Click **SAVE**.\n\n    ![hdinsight grand remove http web service access](./media/hdinsight-administer-use-management-portal/hdinsight.portal.change.username.password.png)\n\n\nThis can also be done through the Azure PowerShell cmdlets:\n\n- Grant-AzureHDInsightHttpServicesAccess\n- Revoke-AzureHDInsightHttpServicesAccess\n\nSee [Administer HDInsight using Azure PowerShell](hdinsight-administer-use-powershell.md).\n\n##Change the HDInsight cluster username and password\nAn HDInsight cluster can have two user accounts. The HDInsight cluster user account is created during the provisioning process. You can also create an RDP user account for accessing the cluster via RDP. See [Enable remote desktop](#connect-to-hdinsight-clusters-by-using-rdp).\n\n**To change the HDInsight cluster user name and password**\n\n1. Sign in to the [preview portal][azure-portal].\n2. Click **Browse All** from the left menu, click **HDInsight Clusters**, click your cluster name.\n3. Click **Settings** from the top menu, and then click **Cluster Login**.\n4. Change the **Cluster Login Name** and/or the **Cluster Login Password**, and then click **Save**.\n\n    ![hdinsight change cluster user username password http user](./media/hdinsight-administer-use-management-portal/hdinsight.portal.change.username.password.png)\n\n##Scale clusters\nThe cluster scaling feature allows you to change the number of worker nodes used by a cluster that is running in Azure HDInsight without having to re-create the cluster.\n\n>[AZURE.NOTE] Only clusters with HDInsight version 3.1.3 or higher are supported. If you are unsure of the version of your cluster, you can check the Properties page.  See [Get familiar with the cluster portal interface](hdinsight-adminster-use-management-portal/#Get-familiar-with-the-cluster-portal-interface).\n\nThe impact of changing the number of data nodes for each type of cluster supported by HDInsight:\n\n- Hadoop\n\n    You can seamlessly increase the number of worker nodes in a Hadoop cluster that is running without impacting any pending or running jobs. New jobs can also be submitted while the operation is in progress. Failures in a scaling operation are gracefully handled so that the cluster is always left in a functional state.\n\n    When a Hadoop cluster is scaled down by reducing the number of data nodes, some of the services in the cluster are restarted. This causes all running and pending jobs to fail at the completion of the scaling operation. You can, however, resubmit the jobs once the operation is complete.\n\n- HBase\n\n    You can seamlessly add or remove nodes to your HBase cluster while it is running. Regional Servers are automatically balanced within a few minutes of completing the scaling operation. However, you can also manually balance the regional servers by logging into the headnode of cluster and running the following commands from a command prompt window:\n\n        >pushd %HBASE_HOME%\\bin\n        >hbase shell\n        >balancer\n\n    For more information on using the HBase shell, see []\n- Storm\n\n    You can seamlessly add or remove data nodes to your Storm cluster while it is running. But after a successful completion of the scaling operation, you will need to rebalance the topology.\n\n    Rebalancing can be accomplished in two ways:\n\n    * Storm web UI\n    * Command-line interface (CLI) tool\n\n    Please refer to the [Apache Storm documentation](http://storm.apache.org/documentation/Understanding-the-parallelism-of-a-Storm-topology.html) for more details.\n\n    The Storm web UI is available on the HDInsight cluster:\n\n    ![hdinsight storm scale rebalance](./media/hdinsight-administer-use-management-portal/hdinsight.portal.scale.cluster.storm.rebalance.png)\n\n    Here is an example how to use the CLI command to rebalance the Storm topology:\n\n        ## Reconfigure the topology \"mytopology\" to use 5 worker processes,\n        ## the spout \"blue-spout\" to use 3 executors, and\n        ## the bolt \"yellow-bolt\" to use 10 executors\n\n        $ storm rebalance mytopology -n 5 -e blue-spout=3 -e yellow-bolt=10\n\n\n**To scale clusters**\n\n1. Sign in to the [preview portal][azure-portal].\n2. Click **Browse All** from the left menu, click **HDInsight Clusters**, click your cluster name.\n3. Click **Settings** from the top menu, and then click **Scale Cluster**.\n4. Enter **Number of Worker nodes**. The limit on the number of cluster node varies among Azure subscriptions. You can contact billing support to increase the limit.  The cost information will reflect the changes you have made to the number of nodes.\n\n\n    ![hdinsight hadoop hbase storm spark scale](./media/hdinsight-administer-use-management-portal/hdinsight.portal.scale.cluster.png)\n\n\n\n##Connect to HDInsight clusters by using RDP\n\nThe credentials for the cluster that you provided at its creation give access to the services on the cluster, but not to the cluster itself through Remote Desktop. You can turn on Remote Desktop access when you provision a cluster or after a cluster is provisioned. For the instructions about enabling Remote Desktop at provision, see [Provision HDInsight cluster](hdinsight-provision-clusters.md).\n\n**To enable Remote Desktop**\n\n1. Sign in to the [preview portal][azure-portal].\n2. Click **Browse All** from the left menu, click **HDInsight Clusters**, click your cluster name.\n3. Click **Settings** from the top menu, and then click **Remote Desktop**.\n4. Enter **Expires On**, **Remote Desktop Username** and **Remote Desktop Password**, and then click **Enable**.\n\n    ![hdinsight enable disable configure remote desktop](./media/hdinsight-administer-use-management-portal/hdinsight.portal.remote.desktop.png)\n\n    The default valus for Expires On is a week.\n> [AZURE.NOTE] You can also use the HDInsight .NET SDK to enable Remote Desktop on a cluster. Use the **EnableRdp** method on the HDInsight client object in the following manner: **client.EnableRdp(clustername, location, \"rdpuser\", \"rdppassword\", DateTime.Now.AddDays(6))**. Similarly, to disable Remote Desktop on the cluster, you can use **client.DisableRdp(clustername, location)**. For more information on these methods, see [HDInsight .NET SDK Reference](http://go.microsoft.com/fwlink/?LinkId=529017). This is applicable only for HDInsight clusters running on Windows.\n\n**To connect to a cluster by using RDP**\n\n1. Sign in to the [preview portal][azure-portal].\n2. Click **Browse All** from the left menu, click **HDInsight Clusters**, click your cluster name.\n3. Click **Settings** from the top menu, and then click **Remote Desktop**.\n4. Click **Connect** and follow the instructions. If Connect is disable, you must enable it first. Make sure using the Remote Desktop user username and password.  You can't use the Cluster user credentials.\n\n##Open a Hadoop command line\n\nTo connect to the cluster by using Remote Desktop and use the Hadoop command line, you must first have enabled Remote Desktop access to the cluster as described in the previous section.\n\n**To open a Hadoop command line**\n\n1. Connect to the cluster using Remote Desktop.\n8. From the desktop, double-click **Hadoop Command Line**.\n\n    ![HDI.HadoopCommandLine][image-hadoopcommandline]\n\n\n    For more information on Hadoop commands, see [Hadoop commands reference](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/CommandsManual.html).\n\nIn the previous screenshot, the folder name has the Hadoop version number embedded. The version number can changed based on the version of the Hadoop components installed on the cluster. You can use Hadoop environment variables to refer to those folders. For example:\n\n    cd %hadoop_home%\n    cd %hive_home%\n    cd %hbase_home%\n    cd %pig_home%\n    cd %sqoop_home%\n    cd %hcatalog_home%\n\n\n##Next steps\nIn this article, you have learned how to create an HDInsight cluster by using the preview portal, and how to open the Hadoop command-line tool. To learn more, see the following articles:\n\n* [Administer HDInsight Using Azure PowerShell](hdinsight-administer-use-powershell.md)\n* [Administer HDInsight Using Azure CLI](hdinsight-administer-use-command-line.md)\n* [Provision HDInsight clusters](hdinsight-provision-clusters.md)\n* [Submit Hadoop jobs programmatically](hdinsight-submit-hadoop-jobs-programmatically.md)\n* [Get Started with Azure HDInsight](../hdinsight-get-started.md)\n* [What version of Hadoop is in Azure HDInsight?](hdinsight-component-versioning.md)\n\n[azure-portal]: https://portal.azure.com\n[image-cluster-quickcreate]: ./media/hdinsight-administer-use-management-portal/HDI.QuickCreateCluster.png\n[image-cluster-landing]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterLanding.PNG \"Cluster landing page\"\n[image-hdi-create-rpd-user]: ./media/hdinsight-administer-use-management-portal/HDI.CreateRDPUser.png\n[image-hadoopcommandline]: ./media/hdinsight-administer-use-management-portal/HDI.HadoopCommandLine.PNG \"Hadoop command line\"\n[image-hdiclustercreate-uploadcert]: ./media/hdinsight-administer-use-management-portal/HDI.ClusterCreate.UploadCert.png\n\ntest\n"
}