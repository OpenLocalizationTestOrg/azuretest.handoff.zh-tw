{
  "nodes": [
    {
      "content": "How to Use Twilio for Voice and SMS (PHP) | Microsoft Azure",
      "pos": [
        27,
        86
      ]
    },
    {
      "content": "Learn how to make a phone call and send a SMS message with the Twilio API service on Azure.",
      "pos": [
        105,
        196
      ]
    },
    {
      "content": "Code samples written in PHP.",
      "pos": [
        197,
        225
      ]
    },
    {
      "content": "How to Use Twilio for Voice and SMS Capabilities in PHP",
      "pos": [
        538,
        593
      ]
    },
    {
      "content": "This guide demonstrates how to perform common programming tasks with the Twilio API service on Azure.",
      "pos": [
        594,
        695
      ]
    },
    {
      "content": "The scenarios covered include making a phone call and sending a Short Message Service (SMS) message.",
      "pos": [
        696,
        796
      ]
    },
    {
      "content": "For more information on Twilio and using voice and SMS in your applications, see the <bpt id=\"p1\">[</bpt>Next Steps<ept id=\"p1\">](#NextSteps)</ept> section.",
      "pos": [
        797,
        915
      ]
    },
    {
      "pos": [
        920,
        954
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"WhatIs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>What is Twilio?"
    },
    {
      "content": "Twilio is powering the future of business communications, enabling developers to embed voice, VoIP, and messaging into applications.",
      "pos": [
        955,
        1087
      ]
    },
    {
      "content": "They virtualize all infrastructure needed in a cloud-based, global environment, exposing it through the Twilio communications API platform.",
      "pos": [
        1088,
        1227
      ]
    },
    {
      "content": "Applications are simple to build and scalable.",
      "pos": [
        1228,
        1274
      ]
    },
    {
      "content": "Enjoy flexibility with pay-as-you go pricing, and benefit from cloud reliability.",
      "pos": [
        1275,
        1356
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio Voice<ept id=\"p1\">**</ept> allows your applications to make and receive phone calls.",
      "pos": [
        1358,
        1432
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio SMS<ept id=\"p1\">**</ept> enables your application to send and receive text messages.",
      "pos": [
        1433,
        1507
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Twilio Client<ept id=\"p1\">**</ept> allows you to make VoIP calls from any phone, tablet, or browser and supports WebRTC.",
      "pos": [
        1508,
        1611
      ]
    },
    {
      "pos": [
        1616,
        1669
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Pricing\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Twilio Pricing and Special Offers"
    },
    {
      "content": "Azure customers receive a [special offer] $10 of Twilio Credit when you upgrade your Twilio Account.",
      "pos": [
        1671,
        1771
      ]
    },
    {
      "content": "This Twilio Credit can be applied to any Twilio usage ($10 credit equivalent to sending as many as 1,000 SMS messages or receiving up to 1000 inbound Voice minutes, depending on the location of your phone number and message or call destination).",
      "pos": [
        1772,
        2017
      ]
    },
    {
      "content": "Redeem this Twilio credit and get started at: [ahoy.twilio.com/azure].",
      "pos": [
        2018,
        2088
      ]
    },
    {
      "content": "Twilio is a pay-as-you-go service.",
      "pos": [
        2090,
        2124
      ]
    },
    {
      "content": "There are no set-up fees and you can close your account at any time.",
      "pos": [
        2125,
        2193
      ]
    },
    {
      "content": "You can find more details at <bpt id=\"p1\">[</bpt>Twilio Pricing<ept id=\"p1\">] [twilio_pricing]</ept>.",
      "pos": [
        2194,
        2257
      ]
    },
    {
      "pos": [
        2262,
        2291
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Concepts\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Concepts"
    },
    {
      "content": "The Twilio API is a RESTful API that provides voice and SMS functionality for applications.",
      "pos": [
        2292,
        2383
      ]
    },
    {
      "content": "Client libraries are available in multiple languages; for a list, see <bpt id=\"p1\">[</bpt>Twilio API Libraries<ept id=\"p1\">] [twilio_libraries]</ept>.",
      "pos": [
        2384,
        2496
      ]
    },
    {
      "content": "Key aspects of the Twilio API are Twilio verbs and Twilio Markup Language (TwiML).",
      "pos": [
        2498,
        2580
      ]
    },
    {
      "pos": [
        2586,
        2616
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"Verbs\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Twilio Verbs"
    },
    {
      "pos": [
        2617,
        2746
      ],
      "content": "The API makes use of Twilio verbs; for example, the <bpt id=\"p1\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p1\">**</ept> verb instructs Twilio to audibly deliver a message on a call."
    },
    {
      "content": "The following is a list of Twilio verbs.",
      "pos": [
        2748,
        2788
      ]
    },
    {
      "content": "Learn about the other verbs and capabilities via [Twilio Markup Language documentation] [http://www.twilio.com/docs/api/twiml].",
      "pos": [
        2789,
        2916
      ]
    },
    {
      "pos": [
        2920,
        2975
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Dial&amp;gt;<ept id=\"p1\">**</ept>: Connects the caller to another phone."
    },
    {
      "pos": [
        2978,
        3054
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Gather&amp;gt;<ept id=\"p1\">**</ept>: Collects numeric digits entered on the telephone keypad."
    },
    {
      "pos": [
        3057,
        3089
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Hangup&amp;gt;<ept id=\"p1\">**</ept>: Ends a call."
    },
    {
      "pos": [
        3092,
        3130
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Play&amp;gt;<ept id=\"p1\">**</ept>: Plays an audio file."
    },
    {
      "pos": [
        3133,
        3201
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Pause&amp;gt;<ept id=\"p1\">**</ept>: Waits silently for a specified number of seconds."
    },
    {
      "pos": [
        3204,
        3312
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Record&amp;gt;<ept id=\"p1\">**</ept>: Records the voice of the caller and returns a URL of a file that contains the recording."
    },
    {
      "pos": [
        3315,
        3404
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Redirect&amp;gt;<ept id=\"p1\">**</ept>: Transfers control of a call or SMS to the TwiML at a different URL."
    },
    {
      "pos": [
        3407,
        3493
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Reject&amp;gt;<ept id=\"p1\">**</ept>: Rejects an incoming call to your Twilio number without billing you"
    },
    {
      "pos": [
        3496,
        3560
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Say&amp;gt;<ept id=\"p1\">**</ept>: Converts text to speech that is made on a call."
    },
    {
      "pos": [
        3563,
        3601
      ],
      "content": "<bpt id=\"p1\">**</bpt>&amp;lt;Sms&amp;gt;<ept id=\"p1\">**</ept>: Sends an SMS message."
    },
    {
      "pos": [
        3607,
        3630
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"TwiML\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>TwiML"
    },
    {
      "content": "TwiML is a set of XML-based instructions based on the Twilio verbs that inform Twilio of how to process a call or SMS.",
      "pos": [
        3631,
        3749
      ]
    },
    {
      "pos": [
        3751,
        3835
      ],
      "content": "As an example, the following TwiML would convert the text <bpt id=\"p1\">**</bpt>Hello World<ept id=\"p1\">**</ept> to speech."
    },
    {
      "content": "When your application calls the Twilio API, one of the API parameters is the URL that returns the TwiML response.",
      "pos": [
        3943,
        4056
      ]
    },
    {
      "content": "For development purposes, you can use Twilio-provided URLs to provide the TwiML responses used by your applications.",
      "pos": [
        4057,
        4173
      ]
    },
    {
      "content": "You could also host your own URLs to produce the TwiML responses, and another option is to use the <bpt id=\"p1\">**</bpt>TwiMLResponse<ept id=\"p1\">**</ept> object.",
      "pos": [
        4174,
        4298
      ]
    },
    {
      "content": "For more information about Twilio verbs, their attributes, and TwiML, see <bpt id=\"p1\">[</bpt>TwiML<ept id=\"p1\">] [twiml]</ept>.",
      "pos": [
        4300,
        4390
      ]
    },
    {
      "content": "For additional information about the Twilio API, see <bpt id=\"p1\">[</bpt>Twilio API<ept id=\"p1\">] [twilio_api]</ept>.",
      "pos": [
        4391,
        4470
      ]
    },
    {
      "pos": [
        4475,
        4524
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"CreateAccount\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Create a Twilio Account"
    },
    {
      "content": "When you are ready to get a Twilio account, sign up at <bpt id=\"p1\">[</bpt>Try Twilio<ept id=\"p1\">] [try_twilio]</ept>.",
      "pos": [
        4525,
        4606
      ]
    },
    {
      "content": "You can start with a free account, and upgrade your account later.",
      "pos": [
        4607,
        4673
      ]
    },
    {
      "content": "When you sign up for a Twilio account, you receive an account ID and an authentication token.",
      "pos": [
        4675,
        4768
      ]
    },
    {
      "content": "Both will be needed to make Twilio API calls.",
      "pos": [
        4769,
        4814
      ]
    },
    {
      "content": "To prevent unauthorized access to your account, keep your authentication token secure.",
      "pos": [
        4815,
        4901
      ]
    },
    {
      "content": "Your account ID and authentication token are viewable at the <bpt id=\"p1\">[</bpt>Twilio account page<ept id=\"p1\">] [twilio_account]</ept>, in the fields labeled <bpt id=\"p2\">**</bpt>ACCOUNT SID<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>AUTH TOKEN<ept id=\"p3\">**</ept>, respectively.",
      "pos": [
        4902,
        5074
      ]
    },
    {
      "pos": [
        5079,
        5126
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"create_app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Create a PHP Application"
    },
    {
      "content": "A PHP application that uses the Twilio service and is running in Azure is no different than any other PHP application that uses the Twilio service.",
      "pos": [
        5127,
        5274
      ]
    },
    {
      "content": "While Twilio services are REST-based and can be called from PHP in several ways, this article will focus on how to use Twilio services with <bpt id=\"p1\">[</bpt>Twilio library for PHP from GitHub<ept id=\"p1\">][twilio_php]</ept>.",
      "pos": [
        5275,
        5464
      ]
    },
    {
      "content": "For more information about using the Twilio library for PHP, see <bpt id=\"p1\">[</bpt>http://readthedocs.org/docs/twilio-php/en/latest/index.html<ept id=\"p1\">][twilio_lib_docs]</ept>.",
      "pos": [
        5465,
        5609
      ]
    },
    {
      "pos": [
        5611,
        5802
      ],
      "content": "Detailed instructions for building and deploying a Twilio/PHP application to Azure are available at <bpt id=\"p1\">[</bpt>How to Make a Phone Call Using Twilio in a PHP Application on Azure<ept id=\"p1\">][howto_phonecall_php]</ept>."
    },
    {
      "pos": [
        5807,
        5883
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"configure_app\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Configure Your Application to Use Twilio Libraries"
    },
    {
      "content": "You can configure your application to use the Twilio library for PHP in two ways:",
      "pos": [
        5884,
        5965
      ]
    },
    {
      "pos": [
        5970,
        6126
      ],
      "content": "Download the Twilio library for PHP from GitHub (<bpt id=\"p1\">[</bpt>https://github.com/twilio/twilio-php<ept id=\"p1\">][twilio_php]</ept>) and add the <bpt id=\"p2\">**</bpt>Services<ept id=\"p2\">**</ept> directory to your application."
    },
    {
      "content": "-OR-",
      "pos": [
        6132,
        6136
      ]
    },
    {
      "content": "Install the Twilio library for PHP as a PEAR package.",
      "pos": [
        6141,
        6194
      ]
    },
    {
      "content": "It can be installed with the following commands:",
      "pos": [
        6195,
        6243
      ]
    },
    {
      "pos": [
        6347,
        6499
      ],
      "content": "Once you have installed the Twilio library for PHP, you can then add a <bpt id=\"p1\">**</bpt>require_once<ept id=\"p1\">**</ept> statement at the top of your PHP files to reference the library:"
    },
    {
      "pos": [
        6546,
        6655
      ],
      "content": "For more information, see <bpt id=\"p1\">[</bpt>https://github.com/twilio/twilio-php/blob/master/README.md<ept id=\"p1\">][twilio_github_readme]</ept>."
    },
    {
      "pos": [
        6660,
        6717
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_make_call\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Make an outgoing call"
    },
    {
      "content": "The following shows how to make an outgoing call using the <bpt id=\"p1\">**</bpt>Services_Twilio<ept id=\"p1\">**</ept> class.",
      "pos": [
        6718,
        6803
      ]
    },
    {
      "content": "This code also uses a Twilio-provided site to return the Twilio Markup Language (TwiML) response.",
      "pos": [
        6804,
        6901
      ]
    },
    {
      "content": "Substitute your values for the <bpt id=\"p1\">**</bpt>From<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>To<ept id=\"p2\">**</ept> phone numbers, and ensure that you verify the <bpt id=\"p3\">**</bpt>From<ept id=\"p3\">**</ept> phone number for your Twilio account prior to running the code.",
      "pos": [
        6902,
        7071
      ]
    },
    {
      "content": "As mentioned, this code uses a Twilio-provided site to return the TwiML response.",
      "pos": [
        8108,
        8189
      ]
    },
    {
      "content": "You could instead use your own site to provide the TwiML response; for more information, see <bpt id=\"p1\">[</bpt>How to Provide TwiML Responses from Your Own Web Site<ept id=\"p1\">](#howto_provide_twiml_responses)</ept>.",
      "pos": [
        8190,
        8371
      ]
    },
    {
      "pos": [
        8376,
        8523
      ],
      "content": "<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>: To troubleshoot SSL certificate validation errors, see <bpt id=\"p2\">[</bpt>http://readthedocs.org/docs/twilio-php/en/latest/usage/rest.html<ept id=\"p2\">][ssl_validation]</ept>"
    },
    {
      "pos": [
        8529,
        8583
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_send_sms\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Send an SMS message"
    },
    {
      "content": "The following shows how to send an SMS message using the <bpt id=\"p1\">**</bpt>Services_Twilio<ept id=\"p1\">**</ept> class.",
      "pos": [
        8584,
        8667
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>From<ept id=\"p1\">**</ept> number is provided by Twilio for trial accounts to send SMS messages.",
      "pos": [
        8668,
        8750
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>To<ept id=\"p1\">**</ept> number must be verified for your Twilio account prior to running the code.",
      "pos": [
        8751,
        8836
      ]
    },
    {
      "pos": [
        9591,
        9686
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"howto_provide_twiml_responses\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Provide TwiML Responses from your own Website"
    },
    {
      "content": "When your application initiates a call to the Twilio API, Twilio will send your request to a URL that is expected to return a TwiML response.",
      "pos": [
        9687,
        9828
      ]
    },
    {
      "content": "The example above uses the Twilio-provided URL <bpt id=\"p1\">[</bpt>http://twimlets.com/message<ept id=\"p1\">][twimlet_message_url]</ept>.",
      "pos": [
        9829,
        9927
      ]
    },
    {
      "content": "(While TwiML is designed for use by Twilio, you can view the it in your browser.",
      "pos": [
        9928,
        10008
      ]
    },
    {
      "content": "For example, click <bpt id=\"p1\">[</bpt>http://twimlets.com/message<ept id=\"p1\">][twimlet_message_url]</ept> to see an empty <ph id=\"ph1\">`&lt;Response&gt;`</ph> element; as another example, click <bpt id=\"p2\">[</bpt>http://twimlets.com/message?Message%5B0%5D=Hello%20World<ept id=\"p2\">][twimlet_message_url_hello_world]</ept> to see a <ph id=\"ph2\">`&lt;Response&gt;`</ph> element that contains a <ph id=\"ph3\">`&lt;Say&gt;`</ph> element.)",
      "pos": [
        10009,
        10298
      ]
    },
    {
      "content": "Instead of relying on the Twilio-provided URL, you can create your own site that returns HTTP responses.",
      "pos": [
        10300,
        10404
      ]
    },
    {
      "content": "You can create the site in any language that returns XML responses; this topic assumes you will be using PHP to create the TwiML.",
      "pos": [
        10405,
        10534
      ]
    },
    {
      "pos": [
        10536,
        10625
      ],
      "content": "The following PHP page results in a TwiML response that says <bpt id=\"p1\">**</bpt>Hello World<ept id=\"p1\">**</ept> on the call."
    },
    {
      "content": "As you can see from the example above, the TwiML response is simply an XML document.",
      "pos": [
        10811,
        10895
      ]
    },
    {
      "content": "The Twilio library for PHP contains classes that will generate TwiML for you.",
      "pos": [
        10896,
        10973
      ]
    },
    {
      "content": "The example below produces the equivalent response as shown above, but uses the <bpt id=\"p1\">**</bpt>Services\\_Twilio\\_Twiml<ept id=\"p1\">**</ept> class in the Twilio library for PHP:",
      "pos": [
        10974,
        11118
      ]
    },
    {
      "pos": [
        11265,
        11360
      ],
      "content": "For more information about TwiML, see <bpt id=\"p1\">[</bpt>https://www.twilio.com/docs/api/twiml<ept id=\"p1\">][twiml_reference]</ept>."
    },
    {
      "content": "Once you have your PHP page set up to provide TwiML responses, use the URL of the PHP page as the URL passed into the  <ph id=\"ph1\">`Services_Twilio-&gt;account-&gt;calls-&gt;create`</ph>  method.",
      "pos": [
        11362,
        11531
      ]
    },
    {
      "content": "For example, if you have a Web application named <bpt id=\"p1\">**</bpt>MyTwiML<ept id=\"p1\">**</ept> deployed to an Azure hosted service, and the name of the PHP page is <bpt id=\"p2\">**</bpt>mytwiml.php<ept id=\"p2\">**</ept>, the URL can be passed to  <bpt id=\"p3\">**</bpt>Services_Twilio-&gt;account-&gt;calls-&gt;create<ept id=\"p3\">**</ept>  as shown in the following example:",
      "pos": [
        11532,
        11784
      ]
    },
    {
      "pos": [
        12444,
        12604
      ],
      "content": "For additional information about using Twilio in Azure with PHP, see <bpt id=\"p1\">[</bpt>How to Make a Phone Call Using Twilio in a PHP Application on Azure<ept id=\"p1\">][howto_phonecall_php]</ept>."
    },
    {
      "pos": [
        12609,
        12678
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"AdditionalServices\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>How to: Use Additional Twilio Services"
    },
    {
      "content": "In addition to the examples shown here, Twilio offers web-based APIs that you can use to leverage additional Twilio functionality from your Azure application.",
      "pos": [
        12679,
        12837
      ]
    },
    {
      "content": "For full details, see the <bpt id=\"p1\">[</bpt>Twilio API documentation<ept id=\"p1\">] [twilio_api_documentation]</ept>.",
      "pos": [
        12838,
        12918
      ]
    },
    {
      "pos": [
        12923,
        12955
      ],
      "content": "<ph id=\"ph1\">&lt;a id=\"NextSteps\"&gt;</ph><ph id=\"ph2\">&lt;/a&gt;</ph>Next Steps"
    },
    {
      "content": "Now that you have learned the basics of the Twilio service, follow these links to learn more:",
      "pos": [
        12956,
        13049
      ]
    },
    {
      "content": "Twilio Security Guidelines",
      "pos": [
        13054,
        13080
      ]
    },
    {
      "content": "Twilio HowTo Guides and Example Code",
      "pos": [
        13114,
        13150
      ]
    },
    {
      "content": "Twilio Quickstart Tutorials",
      "pos": [
        13171,
        13198
      ]
    },
    {
      "content": "Twilio on GitHub",
      "pos": [
        13223,
        13239
      ]
    },
    {
      "content": "Talk to Twilio Support",
      "pos": [
        13263,
        13285
      ]
    },
    {
      "content": "test",
      "pos": [
        14609,
        14613
      ]
    }
  ],
  "content": "<properties\n    pageTitle=\"How to Use Twilio for Voice and SMS (PHP) | Microsoft Azure\"\n    description=\"Learn how to make a phone call and send a SMS message with the Twilio API service on Azure. Code samples written in PHP.\"\n    services=\"\"\n    documentationCenter=\"python\"\n    authors=\"devinrader\"\n    manager=\"twilio\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"multiple\"\n    ms.workload=\"na\"\n    ms.tgt_pltfrm=\"na\"\n    ms.devlang=\"python\" \n    ms.topic=\"article\"\n    ms.date=\"02/19/2015\"\n    ms.author=\"MicrosoftHelp@twilio.com\"/>\n\n\n\n\n\n# How to Use Twilio for Voice and SMS Capabilities in PHP\nThis guide demonstrates how to perform common programming tasks with the Twilio API service on Azure. The scenarios covered include making a phone call and sending a Short Message Service (SMS) message. For more information on Twilio and using voice and SMS in your applications, see the [Next Steps](#NextSteps) section.\n\n## <a id=\"WhatIs\"></a>What is Twilio?\nTwilio is powering the future of business communications, enabling developers to embed voice, VoIP, and messaging into applications. They virtualize all infrastructure needed in a cloud-based, global environment, exposing it through the Twilio communications API platform. Applications are simple to build and scalable. Enjoy flexibility with pay-as-you go pricing, and benefit from cloud reliability.\n\n**Twilio Voice** allows your applications to make and receive phone calls. **Twilio SMS** enables your application to send and receive text messages. **Twilio Client** allows you to make VoIP calls from any phone, tablet, or browser and supports WebRTC.\n\n## <a id=\"Pricing\"></a>Twilio Pricing and Special Offers\n\nAzure customers receive a [special offer] $10 of Twilio Credit when you upgrade your Twilio Account. This Twilio Credit can be applied to any Twilio usage ($10 credit equivalent to sending as many as 1,000 SMS messages or receiving up to 1000 inbound Voice minutes, depending on the location of your phone number and message or call destination). Redeem this Twilio credit and get started at: [ahoy.twilio.com/azure].\n\nTwilio is a pay-as-you-go service. There are no set-up fees and you can close your account at any time. You can find more details at [Twilio Pricing] [twilio_pricing].\n\n## <a id=\"Concepts\"></a>Concepts\nThe Twilio API is a RESTful API that provides voice and SMS functionality for applications. Client libraries are available in multiple languages; for a list, see [Twilio API Libraries] [twilio_libraries].\n\nKey aspects of the Twilio API are Twilio verbs and Twilio Markup Language (TwiML).\n\n### <a id=\"Verbs\"></a>Twilio Verbs\nThe API makes use of Twilio verbs; for example, the **&lt;Say&gt;** verb instructs Twilio to audibly deliver a message on a call.\n\nThe following is a list of Twilio verbs. Learn about the other verbs and capabilities via [Twilio Markup Language documentation] [http://www.twilio.com/docs/api/twiml].\n\n* **&lt;Dial&gt;**: Connects the caller to another phone.\n* **&lt;Gather&gt;**: Collects numeric digits entered on the telephone keypad.\n* **&lt;Hangup&gt;**: Ends a call.\n* **&lt;Play&gt;**: Plays an audio file.\n* **&lt;Pause&gt;**: Waits silently for a specified number of seconds.\n* **&lt;Record&gt;**: Records the voice of the caller and returns a URL of a file that contains the recording.\n* **&lt;Redirect&gt;**: Transfers control of a call or SMS to the TwiML at a different URL.\n* **&lt;Reject&gt;**: Rejects an incoming call to your Twilio number without billing you\n* **&lt;Say&gt;**: Converts text to speech that is made on a call.\n* **&lt;Sms&gt;**: Sends an SMS message.\n\n### <a id=\"TwiML\"></a>TwiML\nTwiML is a set of XML-based instructions based on the Twilio verbs that inform Twilio of how to process a call or SMS.\n\nAs an example, the following TwiML would convert the text **Hello World** to speech.\n\n    <?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n    <Response>\n       <Say>Hello World</Say>\n    </Response>\n\nWhen your application calls the Twilio API, one of the API parameters is the URL that returns the TwiML response. For development purposes, you can use Twilio-provided URLs to provide the TwiML responses used by your applications. You could also host your own URLs to produce the TwiML responses, and another option is to use the **TwiMLResponse** object.\n\nFor more information about Twilio verbs, their attributes, and TwiML, see [TwiML] [twiml]. For additional information about the Twilio API, see [Twilio API] [twilio_api].\n\n## <a id=\"CreateAccount\"></a>Create a Twilio Account\nWhen you are ready to get a Twilio account, sign up at [Try Twilio] [try_twilio]. You can start with a free account, and upgrade your account later.\n\nWhen you sign up for a Twilio account, you receive an account ID and an authentication token. Both will be needed to make Twilio API calls. To prevent unauthorized access to your account, keep your authentication token secure. Your account ID and authentication token are viewable at the [Twilio account page] [twilio_account], in the fields labeled **ACCOUNT SID** and **AUTH TOKEN**, respectively.\n\n## <a id=\"create_app\"></a>Create a PHP Application\nA PHP application that uses the Twilio service and is running in Azure is no different than any other PHP application that uses the Twilio service. While Twilio services are REST-based and can be called from PHP in several ways, this article will focus on how to use Twilio services with [Twilio library for PHP from GitHub][twilio_php]. For more information about using the Twilio library for PHP, see [http://readthedocs.org/docs/twilio-php/en/latest/index.html][twilio_lib_docs].\n\nDetailed instructions for building and deploying a Twilio/PHP application to Azure are available at [How to Make a Phone Call Using Twilio in a PHP Application on Azure][howto_phonecall_php].\n\n## <a id=\"configure_app\"></a>Configure Your Application to Use Twilio Libraries\nYou can configure your application to use the Twilio library for PHP in two ways:\n\n1. Download the Twilio library for PHP from GitHub ([https://github.com/twilio/twilio-php][twilio_php]) and add the **Services** directory to your application.\n\n    -OR-\n\n2. Install the Twilio library for PHP as a PEAR package. It can be installed with the following commands:\n\n        $ pear channel-discover twilio.github.com/pear\n        $ pear install twilio/Services_Twilio\n\nOnce you have installed the Twilio library for PHP, you can then add a **require_once** statement at the top of your PHP files to reference the library:\n\n        require_once 'Services/Twilio.php';\n\nFor more information, see [https://github.com/twilio/twilio-php/blob/master/README.md][twilio_github_readme].\n\n## <a id=\"howto_make_call\"></a>How to: Make an outgoing call\nThe following shows how to make an outgoing call using the **Services_Twilio** class. This code also uses a Twilio-provided site to return the Twilio Markup Language (TwiML) response. Substitute your values for the **From** and **To** phone numbers, and ensure that you verify the **From** phone number for your Twilio account prior to running the code.\n\n    // Include the Twilio PHP library.\n    require_once 'Services/Twilio.php';\n\n    // Library version.\n    $version = \"2010-04-01\";\n\n    // Set your account ID and authentication token.\n    $sid = \"your_twilio_account_sid\";\n    $token = \"your_twilio_authentication_token\";\n\n    // The number of the phone initiating the the call.\n    // (Must be previously validated with Twilio.)\n    $from_number = \"NNNNNNNNNNN\";\n\n    // The number of the phone receiving call.\n    $to_number = \"NNNNNNNNNNN\";\n\n    // Use the Twilio-provided site for the TwiML response.\n    $url = \"http://twimlets.com/message\";\n\n    // The phone message text.\n    $message = \"Hello world.\";\n\n    // Create the call client.\n    $client = new Services_Twilio($sid, $token, $version);\n\n    //Make the call.\n    try\n    {\n        $call = $client->account->calls->create(\n            $from_number,\n            $to_number,\n            $url.'?Message='.urlencode($message)\n        );\n    }\n    catch (Exception $e)\n    {\n        echo 'Error: ' . $e->getMessage();\n    }\n\nAs mentioned, this code uses a Twilio-provided site to return the TwiML response. You could instead use your own site to provide the TwiML response; for more information, see [How to Provide TwiML Responses from Your Own Web Site](#howto_provide_twiml_responses).\n\n\n- **Note**: To troubleshoot SSL certificate validation errors, see [http://readthedocs.org/docs/twilio-php/en/latest/usage/rest.html][ssl_validation]\n\n\n## <a id=\"howto_send_sms\"></a>How to: Send an SMS message\nThe following shows how to send an SMS message using the **Services_Twilio** class. The **From** number is provided by Twilio for trial accounts to send SMS messages. The **To** number must be verified for your Twilio account prior to running the code.\n\n    // Include the Twilio PHP library.\n    require_once 'Services/Twilio.php';\n\n    // Library version.\n    $version = \"2010-04-01\";\n\n    // Set your account ID and authentication token.\n    $sid = \"your_twilio_account_sid\";\n    $token = \"your_twilio_authentication_token\";\n\n\n    $from_number = \"NNNNNNNNNNN\"; // With trial account, texts can only be sent from your Twilio number.\n    $to_number = \"NNNNNNNNNNN\";\n    $message = \"Hello world.\";\n\n    // Create the call client.\n    $client = new Services_Twilio($sid, $token, $version);\n\n    // Send the SMS message.\n    try\n    {\n        $client->account->sms_messages->create($from_number, $to_number, $message);\n    }\n    catch (Exception $e)\n    {\n        echo 'Error: ' . $e->getMessage();\n    }\n\n## <a id=\"howto_provide_twiml_responses\"></a>How to: Provide TwiML Responses from your own Website\nWhen your application initiates a call to the Twilio API, Twilio will send your request to a URL that is expected to return a TwiML response. The example above uses the Twilio-provided URL [http://twimlets.com/message][twimlet_message_url]. (While TwiML is designed for use by Twilio, you can view the it in your browser. For example, click [http://twimlets.com/message][twimlet_message_url] to see an empty `<Response>` element; as another example, click [http://twimlets.com/message?Message%5B0%5D=Hello%20World][twimlet_message_url_hello_world] to see a `<Response>` element that contains a `<Say>` element.)\n\nInstead of relying on the Twilio-provided URL, you can create your own site that returns HTTP responses. You can create the site in any language that returns XML responses; this topic assumes you will be using PHP to create the TwiML.\n\nThe following PHP page results in a TwiML response that says **Hello World** on the call.\n\n    <?php\n        header(\"content-type: text/xml\");\n        echo \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\";\n    ?>\n    <Response>\n        <Say>Hello world.</Say>\n    </Response>\n\nAs you can see from the example above, the TwiML response is simply an XML document. The Twilio library for PHP contains classes that will generate TwiML for you. The example below produces the equivalent response as shown above, but uses the **Services\\_Twilio\\_Twiml** class in the Twilio library for PHP:\n\n    require_once('Services/Twilio.php');\n\n    $response = new Services_Twilio_Twiml();\n    $response->say(\"Hello world.\");\n    print $response;\n\nFor more information about TwiML, see [https://www.twilio.com/docs/api/twiml][twiml_reference].\n\nOnce you have your PHP page set up to provide TwiML responses, use the URL of the PHP page as the URL passed into the  `Services_Twilio->account->calls->create`  method. For example, if you have a Web application named **MyTwiML** deployed to an Azure hosted service, and the name of the PHP page is **mytwiml.php**, the URL can be passed to  **Services_Twilio->account->calls->create**  as shown in the following example:\n\n    require_once 'Services/Twilio.php';\n\n    $sid = \"your_twilio_account_sid\";\n    $token = \"your_twilio_authentication_token\";\n    $from_number = \"NNNNNNNNNNN\";\n    $to_number = \"NNNNNNNNNNN\";\n    $url = \"http://<your_hosted_service>.cloudapp.net/MyTwiML/mytwiml.php\";\n\n    // The phone message text.\n    $message = \"Hello world.\";\n\n    $client = new Services_Twilio($sid, $token, \"2010-04-01\");\n\n    try\n    {\n        $call = $client->account->calls->create(\n            $from_number,\n            $to_number,\n            $url.'?Message='.urlencode($message)\n        );\n    }\n    catch (Exception $e)\n    {\n        echo 'Error: ' . $e->getMessage();\n    }\n\nFor additional information about using Twilio in Azure with PHP, see [How to Make a Phone Call Using Twilio in a PHP Application on Azure][howto_phonecall_php].\n\n## <a id=\"AdditionalServices\"></a>How to: Use Additional Twilio Services\nIn addition to the examples shown here, Twilio offers web-based APIs that you can use to leverage additional Twilio functionality from your Azure application. For full details, see the [Twilio API documentation] [twilio_api_documentation].\n\n## <a id=\"NextSteps\"></a>Next Steps\nNow that you have learned the basics of the Twilio service, follow these links to learn more:\n\n* [Twilio Security Guidelines] [twilio_security_guidelines]\n* [Twilio HowTo Guides and Example Code] [twilio_howtos]\n* [Twilio Quickstart Tutorials][twilio_quickstarts]\n* [Twilio on GitHub] [twilio_on_github]\n* [Talk to Twilio Support] [twilio_support]\n\n[twilio_php]: https://github.com/twilio/twilio-php\n[twilio_lib_docs]: http://readthedocs.org/docs/twilio-php/en/latest/index.html\n[twilio_github_readme]: https://github.com/twilio/twilio-php/blob/master/README.md\n[ssl_validation]: http://readthedocs.org/docs/twilio-php/en/latest/usage/rest.html\n\n[howto_phonecall_php]: http://windowsazure.com/documentation/articles/partner-twilio-php-make-phone-call\n[twimlet_message_url]: http://twimlets.com/message\n[twimlet_message_url_hello_world]: http://twimlets.com/message?Message%5B0%5D=Hello%20World\n[twiml_reference]: https://www.twilio.com/docs/api/twiml\n[twilio_pricing]: http://www.twilio.com/pricing\n\n[twilio_libraries]: https://www.twilio.com/docs/libraries\n[twiml]: http://www.twilio.com/docs/api/twiml\n[twilio_api]: http://www.twilio.com/api\n[try_twilio]: https://www.twilio.com/try-twilio\n[twilio_account]:  https://www.twilio.com/user/account\n[verify_phone]: https://www.twilio.com/user/account/phone-numbers/verified#\n[twilio_api_documentation]: http://www.twilio.com/api\n[twilio_security_guidelines]: http://www.twilio.com/docs/security\n[twilio_howtos]: http://www.twilio.com/docs/howto\n[twilio_on_github]: https://github.com/twilio\n[twilio_support]: http://www.twilio.com/help/contact\n[twilio_quickstarts]: http://www.twilio.com/docs/quickstart\n\ntest\n"
}