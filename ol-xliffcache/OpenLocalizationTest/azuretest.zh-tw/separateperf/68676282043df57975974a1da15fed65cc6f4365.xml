{
  "nodes": [
    {
      "content": "Get Started with Azure Mobile Services and Sencha",
      "pos": [
        27,
        76
      ]
    },
    {
      "content": "Follow this tutorial to get started developing with Mobile Services and the Sencha HTML5 mobile app framework.",
      "pos": [
        95,
        205
      ]
    },
    {
      "pos": [
        528,
        608
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"getting-started\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Get started with Mobile Services and Sencha Touch"
    },
    {
      "content": "Overview",
      "pos": [
        724,
        732
      ]
    },
    {
      "content": "This tutorial shows you how to leverage Azure Mobile Services in your Sencha Touch application.",
      "pos": [
        734,
        829
      ]
    },
    {
      "content": "You will create a simple To Do List app using Sencha Touch that utilizes a mobile service you define through the Management Portal.",
      "pos": [
        830,
        961
      ]
    },
    {
      "content": "This tutorial is intended for intermediate to advanced web application developers who have a good understanding of JavaScript and who are familiar with the Sencha Touch framework.",
      "pos": [
        962,
        1141
      ]
    },
    {
      "content": "If you prefer to watch a video, this clip follows the same steps as this tutorial.",
      "pos": [
        1143,
        1225
      ]
    },
    {
      "content": "In the video, Arthur Kay  explains how to build a Sencha Touch application using an Azure Mobile Services backend.",
      "pos": [
        1226,
        1340
      ]
    },
    {
      "content": "A screenshot from the completed app is shown below:",
      "pos": [
        1394,
        1445
      ]
    },
    {
      "content": "![][0]",
      "pos": [
        1447,
        1453
      ]
    },
    {
      "content": "Requirements",
      "pos": [
        1457,
        1469
      ]
    },
    {
      "content": "Download and install [Sencha Touch](http://wwww.sencha.com/products/touch/download\" target=\"_blank\").",
      "pos": [
        1473,
        1574
      ]
    },
    {
      "content": "Download and install [Sencha Cmd Tool](http://www.sencha.com/products/sencha-cmd/download\" target=\"_blank\").",
      "pos": [
        1578,
        1686
      ]
    },
    {
      "content": "Java Runtime Environment (JRE), or Java Development Kit (if you are creating Android apps)",
      "pos": [
        1690,
        1780
      ]
    },
    {
      "pos": [
        1785,
        1846
      ],
      "content": "<ph id=\"ph1\">&lt;a name=\"create-new-service\"&gt;</ph> <ph id=\"ph2\">&lt;/a&gt;</ph>Create a new mobile service"
    },
    {
      "content": "Create a TodoItems Table",
      "pos": [
        1958,
        1982
      ]
    },
    {
      "content": "Once you have created your mobile service, you can follow an easy quickstart in the Management Portal to create",
      "pos": [
        1984,
        2095
      ]
    },
    {
      "content": "a new database table for use in your mobile service.",
      "pos": [
        2096,
        2148
      ]
    },
    {
      "pos": [
        2153,
        2262
      ],
      "content": "In the Management Portal, click <bpt id=\"p1\">**</bpt>Mobile Services<ept id=\"p1\">**</ept>, and then click the mobile service that you just created."
    },
    {
      "pos": [
        2267,
        2368
      ],
      "content": "In the quickstart tab, click <bpt id=\"p1\">**</bpt>HTML<ept id=\"p1\">**</ept> under <bpt id=\"p2\">**</bpt>Choose platform<ept id=\"p2\">**</ept> and expand <bpt id=\"p3\">**</bpt>Create a new HTML app<ept id=\"p3\">**</ept>."
    },
    {
      "content": "Mobile quickstart html",
      "pos": [
        2376,
        2398
      ]
    },
    {
      "content": "This displays the three easy steps to create and host an HTML app connected to your mobile service.",
      "pos": [
        2491,
        2590
      ]
    },
    {
      "content": "Mobile quickstart html",
      "pos": [
        2598,
        2620
      ]
    },
    {
      "pos": [
        2711,
        2780
      ],
      "content": "Click <bpt id=\"p1\">**</bpt>Create TodoItems table<ept id=\"p1\">**</ept> to create a table to store app data."
    },
    {
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> Do NOT download the HTML app from the management portal.",
      "pos": [
        2788,
        2857
      ]
    },
    {
      "content": "Instead, we will manually create a Sencha Touch application in the section below.",
      "pos": [
        2858,
        2939
      ]
    },
    {
      "content": "Take note of the <bpt id=\"p1\">**</bpt>appKey<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>appUrl<ept id=\"p2\">**</ept> in the Management Portal.",
      "pos": [
        2945,
        3013
      ]
    },
    {
      "content": "You will use them in other sections of this tutorial.",
      "pos": [
        3014,
        3067
      ]
    },
    {
      "content": "app key",
      "pos": [
        3075,
        3082
      ]
    },
    {
      "content": "In the <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> tab, verify that <ph id=\"ph1\">`localhost`</ph> is already listed in the <bpt id=\"p2\">**</bpt>Allow requests from host names<ept id=\"p2\">**</ept> list under <bpt id=\"p3\">**</bpt>Cross-Origin Resource Sharing (CORS)<ept id=\"p3\">**</ept>.",
      "pos": [
        3166,
        3328
      ]
    },
    {
      "content": "If it's not, type <ph id=\"ph1\">`localhost`</ph> in the <bpt id=\"p1\">**</bpt>Host name<ept id=\"p1\">**</ept> field and then click <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>.",
      "pos": [
        3329,
        3410
      ]
    },
    {
      "content": "Setup CORS for localhost",
      "pos": [
        3418,
        3442
      ]
    },
    {
      "content": "Generate your Touch application",
      "pos": [
        3538,
        3569
      ]
    },
    {
      "content": "Generating a Sencha Touch template application is a simple task using Sencha Cmd and is a great way to get an application up and running very quickly.",
      "pos": [
        3571,
        3721
      ]
    },
    {
      "content": "From the directory where you installed the Touch framework, issue the following command:",
      "pos": [
        3723,
        3811
      ]
    },
    {
      "content": "This generates a template Touch application with an application name of 'Basic'.",
      "pos": [
        3867,
        3947
      ]
    },
    {
      "content": "To launch your application, simply point your browser to the directory /path/to/application and you should be presented with the standard Touch sample application.",
      "pos": [
        3948,
        4111
      ]
    },
    {
      "content": "Installing the Sencha Touch Extensions for Azure",
      "pos": [
        4115,
        4163
      ]
    },
    {
      "content": "The extension for Azure is installed either manually or as a Sencha Package.",
      "pos": [
        4165,
        4241
      ]
    },
    {
      "content": "The method you use is totally up to you.",
      "pos": [
        4242,
        4282
      ]
    },
    {
      "content": "Manual installation",
      "pos": [
        4287,
        4306
      ]
    },
    {
      "content": "In most Touch applications, if you wish to add an external library of classes, you simply download the package, unpack it in your application directory and configure the Touch loader with the location of the library.",
      "pos": [
        4308,
        4524
      ]
    },
    {
      "content": "You can manually add the Azure extensions to your application using the following steps:",
      "pos": [
        4526,
        4614
      ]
    },
    {
      "content": "Download the Azure extensions package from <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](https://market.sencha.com/extensions/sencha-touch-extensions-for-windows-azure)</ept>.",
      "pos": [
        4619,
        4749
      ]
    },
    {
      "content": "(You may use your Sencha Forums ID to access this area.)",
      "pos": [
        4750,
        4806
      ]
    },
    {
      "content": "Copy the Azure extensions package from the download directory to where you would ultimately want it to reside and unpack it :",
      "pos": [
        4811,
        4936
      ]
    },
    {
      "content": "This creates an <bpt id=\"p1\">**</bpt>azure<ept id=\"p1\">**</ept> directory containing the entire package source, examples and documentation.",
      "pos": [
        5049,
        5150
      ]
    },
    {
      "content": "The source will reside in the <bpt id=\"p1\">**</bpt>azure/src<ept id=\"p1\">**</ept> directory.",
      "pos": [
        5151,
        5205
      ]
    },
    {
      "content": "Installation as a Sencha package",
      "pos": [
        5211,
        5243
      ]
    },
    {
      "pos": [
        5247,
        5381
      ],
      "content": "<ph id=\"ph1\">[AZURE.NOTE]</ph> You can only use this method when you have generated your application using the <ph id=\"ph2\">&lt;code&gt;</ph><ph id=\"ph3\">sencha generate app</ph><ph id=\"ph4\">&lt;/code&gt;</ph> command."
    },
    {
      "content": "All applications generated by Sencha Cmd have a \"packages\" folder at the root.",
      "pos": [
        5383,
        5461
      ]
    },
    {
      "content": "The location of this folder can be configured, but regardless of its location, the role of the \"packages\" folder is to serve as the storage of all packages used by your application (or applications if you have created a Sencha Workspace).",
      "pos": [
        5462,
        5700
      ]
    },
    {
      "content": "As Ext.Azure is a Sencha Cmd \"package\", the source code can be easily installed and included in your application using Sencha Cmd.",
      "pos": [
        5702,
        5832
      ]
    },
    {
      "content": "(See <bpt id=\"p1\">[</bpt>Sencha Cmd Packages<ept id=\"p1\">](http://docs.sencha.com/cmd/3.1.2/#!/guide/command_packages)</ept> for more information).",
      "pos": [
        5833,
        5942
      ]
    },
    {
      "pos": [
        5944,
        6125
      ],
      "content": "To download and install the Azure extensions package from the Sencha Packages repository, you will need to add the package name to your <bpt id=\"p1\">**</bpt>app.json<ept id=\"p1\">**</ept> file and build your application:"
    },
    {
      "content": "Add the Azure package to the requires section of your app.json file:",
      "pos": [
        6130,
        6198
      ]
    },
    {
      "pos": [
        6323,
        6402
      ],
      "content": "Rebuild your application using <bpt id=\"p1\">**</bpt>sencha cmd<ept id=\"p1\">**</ept> to fetch and install the package:"
    },
    {
      "content": "Both <bpt id=\"p1\">**</bpt>sencha app build<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>sencha app refresh<ept id=\"p2\">**</ept> will both now perform the steps needed to integrate the package in to your application.",
      "pos": [
        6432,
        6572
      ]
    },
    {
      "content": "Typically, after changing package requirements, you will need to run <bpt id=\"p1\">**</bpt>sencha app refresh<ept id=\"p1\">**</ept> so that the metadata required to support \"dev mode\" is up to date.",
      "pos": [
        6573,
        6731
      ]
    },
    {
      "content": "Whichever command you run, Sencha Cmd will download and expand the package to your \"packages\" folder.",
      "pos": [
        6733,
        6834
      ]
    },
    {
      "content": "After this you will find a \"packages/touch-azure\" folder in your workspace.",
      "pos": [
        6835,
        6910
      ]
    },
    {
      "content": "Include and configure Azure",
      "pos": [
        6914,
        6941
      ]
    },
    {
      "pos": [
        6943,
        6963
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename<ept id=\"p1\">**</ept>: app.js"
    },
    {
      "content": "Now that the Azure extension has been downloaded and installed in your application directory, the next step is to tell your application where to find the source files, and to require those files:",
      "pos": [
        6965,
        7160
      ]
    },
    {
      "content": "Configure the Sencha Loader with the location of the source code:",
      "pos": [
        7165,
        7230
      ]
    },
    {
      "content": "Require the Azure class files:",
      "pos": [
        7456,
        7486
      ]
    },
    {
      "content": "Configuring Azure",
      "pos": [
        7598,
        7615
      ]
    },
    {
      "content": "The Azure package is initialized by calling the <bpt id=\"p1\">**</bpt>Ext.Azure.init<ept id=\"p1\">**</ept> method in the launch section of your application.",
      "pos": [
        7621,
        7737
      ]
    },
    {
      "content": "This method is passed a configuration object containing mobile service credentials as well as other credentials and features you wish to utilize.",
      "pos": [
        7738,
        7883
      ]
    },
    {
      "content": "While you can pass the configuration object directly to the init method, we suggest creating a Sencha application configuration property called <bpt id=\"p1\">**</bpt>azure<ept id=\"p1\">**</ept> and placing all the appropriate information there.",
      "pos": [
        7889,
        8093
      ]
    },
    {
      "content": "You can then pass this property value to the Ext.Azure.init method.",
      "pos": [
        8094,
        8161
      ]
    },
    {
      "content": "When you create a mobile service in Azure (see <bpt id=\"p1\">[</bpt>Getting Started with Azure<ept id=\"p1\">](http://senchaazuredocs.azurewebsites.net/#!/guide/getting_started)</ept>), an application key and URL are assigned to that service.",
      "pos": [
        8167,
        8368
      ]
    },
    {
      "content": "This information must be provided to your Azure package so it can connect to your service.",
      "pos": [
        8369,
        8459
      ]
    },
    {
      "content": "This example shows a very simple Azure configuration and initialization supplying only the application key and URL:",
      "pos": [
        8465,
        8580
      ]
    },
    {
      "content": "For more information on the Azure configuration options, please consult the Ext.Azure API documentation.",
      "pos": [
        8993,
        9097
      ]
    },
    {
      "content": "Congratulations!",
      "pos": [
        9100,
        9116
      ]
    },
    {
      "content": "Your application should now have access to your mobile service.",
      "pos": [
        9117,
        9180
      ]
    },
    {
      "content": "Build the ToDo app",
      "pos": [
        9184,
        9202
      ]
    },
    {
      "content": "Now that we have configured your application to include the Azure extension, and provided it with your mobile service credentials, we can move on to creating a Touch application which utilizes your mobile service for viewing and editing your ToDo list data stored in the service.",
      "pos": [
        9204,
        9483
      ]
    },
    {
      "content": "Configure the Azure data proxy",
      "pos": [
        9488,
        9518
      ]
    },
    {
      "pos": [
        9520,
        9555
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename:<ept id=\"p1\">**</ept> app/model/TodoItem.js"
    },
    {
      "content": "Your Touch application will be communicating with your mobile service via a data proxy.",
      "pos": [
        9557,
        9644
      ]
    },
    {
      "content": "The proxy does all the work of both sending requests to, and receiving data from, the mobile service.",
      "pos": [
        9645,
        9746
      ]
    },
    {
      "content": "Used in combination with a Touch data model and store, all the hard work of processing remote data and getting it into your application is removed and handled by Touch itself.",
      "pos": [
        9747,
        9922
      ]
    },
    {
      "content": "Sencha Touch models provide the definition of the data records you will be using in your application.",
      "pos": [
        9924,
        10025
      ]
    },
    {
      "content": "They allow you to not only define the data fields but also provide configuration about the proxy that will be handling the communication between the application and the Azure mobile service.",
      "pos": [
        10026,
        10216
      ]
    },
    {
      "content": "In the code below you can see that we define the fields (and their types) for the model, and also provide a proxy configuration.",
      "pos": [
        10218,
        10346
      ]
    },
    {
      "content": "When configuring your proxy, you need to give it a type (in this case 'azure'), the mobile service tablename (ToDoItem) and other optional parameters.",
      "pos": [
        10347,
        10497
      ]
    },
    {
      "content": "In this example, we will be turning on proxy paging so that we can seamlessly page forward and backward through list items.",
      "pos": [
        10498,
        10621
      ]
    },
    {
      "content": "The Azure proxy will automatically set all HTTP headers with the appropriate CRUD operations expected by the Azure API (including authentication credentials, if they exist).",
      "pos": [
        10623,
        10796
      ]
    },
    {
      "content": "Store your ToDo items",
      "pos": [
        11583,
        11604
      ]
    },
    {
      "pos": [
        11606,
        11642
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename<ept id=\"p1\">**</ept>: app/store/TodoItems.js"
    },
    {
      "content": "Sencha Touch stores are used to store collections of data records (models) which can be used as sources for Touch components for displaying the records in a variety of different ways.",
      "pos": [
        11644,
        11827
      ]
    },
    {
      "content": "This can include Grids, Charts, Lists and more.",
      "pos": [
        11828,
        11875
      ]
    },
    {
      "content": "Here we define a store which will be used to hold all your store ToDo list items which are retrieved from your Azure mobile service.",
      "pos": [
        11877,
        12009
      ]
    },
    {
      "content": "Notice that the store configuration contains the name of the model type (Basic.model.TodoItem - defined above).",
      "pos": [
        12010,
        12121
      ]
    },
    {
      "content": "This defines the structure of the records which will be contained in the store.",
      "pos": [
        12122,
        12201
      ]
    },
    {
      "content": "We also have some additional configuration options for the store such as specifying the page size (8 records), and that the sorting of records for this store is done remotely by the Azure mobile service (no sorting is done locally within the store itself).",
      "pos": [
        12203,
        12459
      ]
    },
    {
      "content": "View and edit your ToDo items",
      "pos": [
        12795,
        12824
      ]
    },
    {
      "pos": [
        12826,
        12860
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename<ept id=\"p1\">**</ept>: app/view/DataItem.js"
    },
    {
      "content": "Now that we have defined the structure of each ToDo item, and created a store to place all the records in, we should think about how we wish to display this information to the user of the app.",
      "pos": [
        12862,
        13054
      ]
    },
    {
      "content": "We normally display information to the user through the use of <bpt id=\"p1\">**</bpt>Views<ept id=\"p1\">**</ept>.",
      "pos": [
        13055,
        13128
      ]
    },
    {
      "content": "A view can be one of any number of Touch components, individually or combined with others.",
      "pos": [
        13129,
        13219
      ]
    },
    {
      "content": "The view below is comprised of a ListItem which defines how each record will be displayed along with some buttons which will accommodate actions to delete each item.",
      "pos": [
        13221,
        13386
      ]
    },
    {
      "content": "Create your primary view",
      "pos": [
        15011,
        15035
      ]
    },
    {
      "pos": [
        15037,
        15067
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename<ept id=\"p1\">**</ept>: app/view/Main.js"
    },
    {
      "content": "Now that we have defined the layout of an individual ToDo list item (above) we want to wrap a full user interface around that list which defines the actual list of items, an application title, and a button to add a new task.",
      "pos": [
        15069,
        15293
      ]
    },
    {
      "content": "Make everything work together",
      "pos": [
        17027,
        17056
      ]
    },
    {
      "pos": [
        17058,
        17094
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename<ept id=\"p1\">**</ept>: app/controller/Main.js"
    },
    {
      "content": "The final step in our application is to respond to button presses (delete, save, etc) and provide the logic behind all these requests.",
      "pos": [
        17096,
        17230
      ]
    },
    {
      "content": "Sencha Touch utilizes controllers which listen for these events and responds accordingly.",
      "pos": [
        17231,
        17320
      ]
    },
    {
      "content": "Put it all together",
      "pos": [
        22960,
        22979
      ]
    },
    {
      "pos": [
        22981,
        23001
      ],
      "content": "<bpt id=\"p1\">**</bpt>Filename<ept id=\"p1\">**</ept>: app.js"
    },
    {
      "content": "Our final step is to finish editing the main application file, and provide information about the models, stores, views and controllers that have defined.",
      "pos": [
        23003,
        23156
      ]
    },
    {
      "content": "The source files for these resources are automatically loaded into the application.",
      "pos": [
        23157,
        23240
      ]
    },
    {
      "content": "Finally, the launch method is called which creates and displays the primary application view 'Basic.main.View'.",
      "pos": [
        23241,
        23352
      ]
    },
    {
      "content": "Host and run your Sencha Touch app",
      "pos": [
        25370,
        25404
      ]
    },
    {
      "content": "The final stage of this tutorial is to host and run your new app on your local computer.",
      "pos": [
        25406,
        25494
      ]
    },
    {
      "content": "In your terminal, browse to the location of your unzipped application.",
      "pos": [
        25501,
        25571
      ]
    },
    {
      "content": "Using Sencha Cmd, run the following commands:",
      "pos": [
        25578,
        25623
      ]
    },
    {
      "content": "Open the URL listed in your terminal in a web browser to start the app (e.g. http://localhost:1841).",
      "pos": [
        26079,
        26179
      ]
    },
    {
      "pos": [
        26186,
        26276
      ],
      "content": "In the app, type meaningful text, such as \"Complete the tutorial\", and then click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>."
    },
    {
      "pos": [
        26508,
        26597
      ],
      "content": "Back in the Management Portal, click the <bpt id=\"p1\">**</bpt>Data<ept id=\"p1\">**</ept> tab and then click the TodoItems table."
    },
    {
      "content": "Next Steps",
      "pos": [
        26870,
        26880
      ]
    },
    {
      "content": "Now that you have completed the Getting Started Guide, learn how to perform additional important tasks in Mobile Services with Sencha.",
      "pos": [
        26881,
        27015
      ]
    },
    {
      "pos": [
        27017,
        27183
      ],
      "content": "<bpt id=\"p1\">[</bpt>Download<ept id=\"p1\">](https://github.com/arthurakay/sencha-touch-azure-example)</ept> a completed sample app with additional styling and features to see what else Sencha Touch can do!"
    },
    {
      "content": "Then, dive into more information about the Sencha Touch Extensions for Azure:",
      "pos": [
        27185,
        27262
      ]
    },
    {
      "pos": [
        27268,
        27356
      ],
      "content": "Sample app <bpt id=\"p1\">[</bpt>walkthrough<ept id=\"p1\">](http://docs.sencha.com/touch-azure/1.0.0/#!/guide/data_filters)</ept>"
    },
    {
      "pos": [
        27361,
        27421
      ],
      "content": "Get help in the <bpt id=\"p1\">[</bpt>Sencha Forums<ept id=\"p1\">](http://www.sencha.com/forum)</ept>"
    },
    {
      "pos": [
        27426,
        27484
      ],
      "content": "Browse the <bpt id=\"p1\">[</bpt>Sencha Documentation<ept id=\"p1\">](http://docs.sencha.com/)</ept>"
    },
    {
      "pos": [
        27489,
        27643
      ],
      "content": "Using Sencha With Azure Mobile Services: <bpt id=\"p1\">[</bpt>(Video)<ept id=\"p1\">](http://channel9.msdn.com/Shows/Cloud+Cover/Episode-126-Using-Sencha-With-Windows-Azure-Mobile-Services)</ept>"
    },
    {
      "content": "Additional Resources",
      "pos": [
        27648,
        27668
      ]
    },
    {
      "content": "Download Sencha Touch",
      "pos": [
        27675,
        27696
      ]
    },
    {
      "content": "Sencha Touch Extensions for Azure",
      "pos": [
        27749,
        27782
      ]
    },
    {
      "content": "Summary",
      "pos": [
        27868,
        27875
      ]
    },
    {
      "content": "The example outlined here is provided in the Sencha Touch Extension for Azure package and is located in the examples directory as the Basic Data example.",
      "pos": [
        27877,
        28030
      ]
    },
    {
      "content": "There are a few more examples which are provided which demonstrated other functionality of this extension along with detailed comments and explanations.",
      "pos": [
        28031,
        28183
      ]
    },
    {
      "pos": [
        28185,
        28322
      ],
      "content": "For more information about getting started with Sencha Touch please visit the full set of <bpt id=\"p1\">[</bpt>guides<ept id=\"p1\">](http://docs.sencha.com/touch/#!/guide)</ept>"
    }
  ],
  "content": "<properties\n    pageTitle=\"Get Started with Azure Mobile Services and Sencha\"\n    description=\"Follow this tutorial to get started developing with Mobile Services and the Sencha HTML5 mobile app framework.\"\n    services=\"mobile-services\"\n    documentationCenter=\"\"\n    authors=\"ggailey777\"\n    manager=\"dwrede\"\n    editor=\"\"/>\n\n<tags\n    ms.service=\"mobile-services\"\n    ms.workload=\"mobile\"\n    ms.tgt_pltfrm=\"mobile-sencha\"\n    ms.devlang=\"multiple\"\n    ms.topic=\"article\"\n    ms.date=\"08/18/2015\"\n    ms.author=\"glenga\"/>\n\n# <a name=\"getting-started\"> </a>Get started with Mobile Services and Sencha Touch\n\n[AZURE.INCLUDE [mobile-services-selector-get-started](../../includes/mobile-services-selector-get-started.md)]\n\n##Overview\n\nThis tutorial shows you how to leverage Azure Mobile Services in your Sencha Touch application. You will create a simple To Do List app using Sencha Touch that utilizes a mobile service you define through the Management Portal. This tutorial is intended for intermediate to advanced web application developers who have a good understanding of JavaScript and who are familiar with the Sencha Touch framework.\n\nIf you prefer to watch a video, this clip follows the same steps as this tutorial. In the video, Arthur Kay  explains how to build a Sencha Touch application using an Azure Mobile Services backend.\n\n> [AZURE.VIDEO getting-started-with-sencha-touch]\n\n\nA screenshot from the completed app is shown below:\n\n![][0]\n\n##Requirements\n\n- Download and install [Sencha Touch](http://wwww.sencha.com/products/touch/download\" target=\"_blank\").\n\n- Download and install [Sencha Cmd Tool](http://www.sencha.com/products/sencha-cmd/download\" target=\"_blank\").\n\n- Java Runtime Environment (JRE), or Java Development Kit (if you are creating Android apps)\n\n## <a name=\"create-new-service\"> </a>Create a new mobile service\n\n[AZURE.INCLUDE [mobile-services-create-new-service](../../includes/mobile-services-create-new-service.md)]\n\n##Create a TodoItems Table\n\nOnce you have created your mobile service, you can follow an easy quickstart in the Management Portal to create\na new database table for use in your mobile service.\n\n1. In the Management Portal, click **Mobile Services**, and then click the mobile service that you just created.\n\n2. In the quickstart tab, click **HTML** under **Choose platform** and expand **Create a new HTML app**.\n\n    ![Mobile quickstart html](./media/partner-sencha-mobile-services-get-started/mobile-portal-quickstart-html.png)\n\n    This displays the three easy steps to create and host an HTML app connected to your mobile service.\n\n    ![Mobile quickstart html](./media/partner-sencha-mobile-services-get-started/mobile-quickstart-steps-html.png)\n\n3. Click **Create TodoItems table** to create a table to store app data.\n\n    > [AZURE.NOTE] Do NOT download the HTML app from the management portal. Instead, we will manually create a Sencha Touch application in the section below.\n\n\n1. Take note of the **appKey** and **appUrl** in the Management Portal. You will use them in other sections of this tutorial.\n\n    ![app key](./media/partner-sencha-mobile-services-get-started/mobile-app-key-portal.png)\n\n1. In the **Configure** tab, verify that `localhost` is already listed in the **Allow requests from host names** list under **Cross-Origin Resource Sharing (CORS)**. If it's not, type `localhost` in the **Host name** field and then click **Save**.\n\n    ![Setup CORS for localhost](./media/partner-sencha-mobile-services-get-started/mobile-services-set-cors-localhost.png)\n\n##Generate your Touch application\n\nGenerating a Sencha Touch template application is a simple task using Sencha Cmd and is a great way to get an application up and running very quickly.\n\nFrom the directory where you installed the Touch framework, issue the following command:\n\n    $ sencha generate app Basic /path/to/application\n\nThis generates a template Touch application with an application name of 'Basic'. To launch your application, simply point your browser to the directory /path/to/application and you should be presented with the standard Touch sample application.\n\n##Installing the Sencha Touch Extensions for Azure\n\nThe extension for Azure is installed either manually or as a Sencha Package. The method you use is totally up to you.\n\n###Manual installation\n\nIn most Touch applications, if you wish to add an external library of classes, you simply download the package, unpack it in your application directory and configure the Touch loader with the location of the library.\n\nYou can manually add the Azure extensions to your application using the following steps:\n\n1. Download the Azure extensions package from [here](https://market.sencha.com/extensions/sencha-touch-extensions-for-windows-azure). (You may use your Sencha Forums ID to access this area.)\n\n2. Copy the Azure extensions package from the download directory to where you would ultimately want it to reside and unpack it :\n\n        $ cd /path/to/application\n        $ mv /download-location/azure.zip .\n        $ unzip azure.zip  \n\n    This creates an **azure** directory containing the entire package source, examples and documentation. The source will reside in the **azure/src** directory.\n\n\n###Installation as a Sencha package\n\n> [AZURE.NOTE] You can only use this method when you have generated your application using the <code>sencha generate app</code> command.\n\nAll applications generated by Sencha Cmd have a \"packages\" folder at the root. The location of this folder can be configured, but regardless of its location, the role of the \"packages\" folder is to serve as the storage of all packages used by your application (or applications if you have created a Sencha Workspace).\n\nAs Ext.Azure is a Sencha Cmd \"package\", the source code can be easily installed and included in your application using Sencha Cmd. (See [Sencha Cmd Packages](http://docs.sencha.com/cmd/3.1.2/#!/guide/command_packages) for more information).\n\nTo download and install the Azure extensions package from the Sencha Packages repository, you will need to add the package name to your **app.json** file and build your application:\n\n1. Add the Azure package to the requires section of your app.json file:\n\n        {\n            \"name\": \"Basic\",\n            \"requires\": [\n                \"touch-azure\"\n            ]\n        }\n\n2. Rebuild your application using **sencha cmd** to fetch and install the package:\n\n        $ sencha app build\n\nBoth **sencha app build** and **sencha app refresh** will both now perform the steps needed to integrate the package in to your application. Typically, after changing package requirements, you will need to run **sencha app refresh** so that the metadata required to support \"dev mode\" is up to date.\n\nWhichever command you run, Sencha Cmd will download and expand the package to your \"packages\" folder. After this you will find a \"packages/touch-azure\" folder in your workspace.\n\n##Include and configure Azure\n\n**Filename**: app.js\n\nNow that the Azure extension has been downloaded and installed in your application directory, the next step is to tell your application where to find the source files, and to require those files:\n\n1. Configure the Sencha Loader with the location of the source code:\n\n        Ext.Loader.setConfig({\n            enabled : true,\n            paths   : {\n                'Ext'       : 'touch/src',\n                'Ext.azure' : '/path-to/azure-for-touch/azure/src'\n            }\n        });\n\n\n2. Require the Azure class files:\n\n        Ext.application({\n\n            requires: [ 'Ext.azure.Azure' ],\n\n            // ...\n\n        });\n\n\n3. Configuring Azure\n\n    The Azure package is initialized by calling the **Ext.Azure.init** method in the launch section of your application. This method is passed a configuration object containing mobile service credentials as well as other credentials and features you wish to utilize.\n\n    While you can pass the configuration object directly to the init method, we suggest creating a Sencha application configuration property called **azure** and placing all the appropriate information there. You can then pass this property value to the Ext.Azure.init method.\n\n    When you create a mobile service in Azure (see [Getting Started with Azure](http://senchaazuredocs.azurewebsites.net/#!/guide/getting_started)), an application key and URL are assigned to that service. This information must be provided to your Azure package so it can connect to your service.\n\n    This example shows a very simple Azure configuration and initialization supplying only the application key and URL:\n\n        Ext.application({\n            name: 'Basic',\n\n            requires: [ 'Ext.azure.Azure' ],\n\n            azure: {\n                appKey: 'myazureservice-access-key',\n                appUrl: 'myazure-service.azure-mobile.net'\n            },\n\n            launch: function() {\n\n                // Call Azure initialization\n\n                Ext.Azure.init(this.config.azure);\n\n           }\n        });\n\n    For more information on the Azure configuration options, please consult the Ext.Azure API documentation.\n\n\nCongratulations! Your application should now have access to your mobile service.\n\n##Build the ToDo app\n\nNow that we have configured your application to include the Azure extension, and provided it with your mobile service credentials, we can move on to creating a Touch application which utilizes your mobile service for viewing and editing your ToDo list data stored in the service.\n\n###Configure the Azure data proxy\n\n**Filename:** app/model/TodoItem.js\n\nYour Touch application will be communicating with your mobile service via a data proxy. The proxy does all the work of both sending requests to, and receiving data from, the mobile service. Used in combination with a Touch data model and store, all the hard work of processing remote data and getting it into your application is removed and handled by Touch itself.\n\nSencha Touch models provide the definition of the data records you will be using in your application. They allow you to not only define the data fields but also provide configuration about the proxy that will be handling the communication between the application and the Azure mobile service.\n\nIn the code below you can see that we define the fields (and their types) for the model, and also provide a proxy configuration. When configuring your proxy, you need to give it a type (in this case 'azure'), the mobile service tablename (ToDoItem) and other optional parameters. In this example, we will be turning on proxy paging so that we can seamlessly page forward and backward through list items.\n\nThe Azure proxy will automatically set all HTTP headers with the appropriate CRUD operations expected by the Azure API (including authentication credentials, if they exist).\n\n    Ext.define('Basic.model.TodoItem', {\n        extend : 'Ext.data.Model',\n\n        requires : [\n            'Ext.azure.Proxy'\n        ],\n\n        config : {\n            idProperty : 'id',\n            useCache   : false,\n\n            fields     : [\n                {\n                    name : 'id',\n                    type : 'int'\n                },\n                {\n                    name : 'text',\n                    type : 'string'\n                },\n                {\n                    name : 'complete',\n                    type : 'boolean'\n                }\n            ],\n\n            proxy : {\n                type               : 'azure',\n                tableName          : 'TodoItem',\n                enablePagingParams : true\n            }\n        }\n    });\n\n\n###Store your ToDo items\n\n**Filename**: app/store/TodoItems.js\n\nSencha Touch stores are used to store collections of data records (models) which can be used as sources for Touch components for displaying the records in a variety of different ways. This can include Grids, Charts, Lists and more.\n\nHere we define a store which will be used to hold all your store ToDo list items which are retrieved from your Azure mobile service. Notice that the store configuration contains the name of the model type (Basic.model.TodoItem - defined above). This defines the structure of the records which will be contained in the store.\n\nWe also have some additional configuration options for the store such as specifying the page size (8 records), and that the sorting of records for this store is done remotely by the Azure mobile service (no sorting is done locally within the store itself).\n\n    Ext.define('Basic.store.TodoItems', {\n        extend : 'Ext.data.Store',\n\n        requires : [\n            'Basic.model.TodoItem'\n        ],\n\n        config : {\n            model        : 'Basic.model.TodoItem',\n            pageSize     : 8,\n            remoteSort   : true,\n            remoteFilter : true\n        }\n    });\n\n\n###View and edit your ToDo items\n\n**Filename**: app/view/DataItem.js\n\nNow that we have defined the structure of each ToDo item, and created a store to place all the records in, we should think about how we wish to display this information to the user of the app. We normally display information to the user through the use of **Views**. A view can be one of any number of Touch components, individually or combined with others.\n\nThe view below is comprised of a ListItem which defines how each record will be displayed along with some buttons which will accommodate actions to delete each item.\n\n    Ext.define('Basic.view.DataItem', {\n        extend : 'Ext.dataview.component.ListItem',\n        xtype  : 'basic-dataitem',\n\n        requires : [\n            'Ext.Button',\n            'Ext.layout.HBox',\n            'Ext.field.Checkbox'\n        ],\n\n        config : {\n            checkbox : {\n                docked     : 'left',\n                xtype      : 'checkboxfield',\n                width      : 50,\n                labelWidth : 0\n            },\n\n            text : {\n                flex : 1\n            },\n\n            button : {\n                docked   : 'right',\n                xtype    : 'button',\n                ui       : 'plain',\n                iconMask : true,\n                iconCls  : 'delete',\n                style    : 'color: red;'\n            },\n\n            dataMap : {\n                getText : {\n                    setHtml : 'text'\n                },\n\n                getCheckbox : {\n                    setChecked : 'complete'\n                }\n            },\n\n            layout : {\n                type : 'hbox',\n                align: 'stretch'\n            }\n        },\n\n        applyCheckbox : function(config) {\n            return Ext.factory(config, Ext.field.Checkbox, this.getCheckbox());\n        },\n\n        updateCheckbox : function (cmp) {\n            if (cmp) {\n                this.add(cmp);\n            }\n        },\n\n        applyButton : function(config) {\n            return Ext.factory(config, Ext.Button, this.getButton());\n        },\n\n        updateButton : function (cmp) {\n            if (cmp) {\n                this.add(cmp);\n            }\n        }\n\n    });\n\n\n###Create your primary view\n\n**Filename**: app/view/Main.js\n\nNow that we have defined the layout of an individual ToDo list item (above) we want to wrap a full user interface around that list which defines the actual list of items, an application title, and a button to add a new task.\n\n    Ext.define('Basic.view.Main', {\n        extend : 'Ext.dataview.List',\n        xtype  : 'main',\n\n        requires : [\n            'Ext.TitleBar',\n            'Ext.dataview.List',\n            'Ext.data.Store',\n            'Ext.plugin.PullRefresh',\n            'Ext.plugin.ListPaging',\n            'Basic.view.DataItem'\n        ],\n\n        config : {\n            store : 'TodoItems',\n\n            useSimpleItems : false,\n            defaultType    : 'basic-dataitem',\n\n            plugins : [\n                {\n                    xclass          : 'Ext.plugin.PullRefresh',\n                    pullRefreshText : 'Pull down to refresh!'\n                },\n                {\n                    xclass     : 'Ext.plugin.ListPaging',\n                    autoPaging : true\n                }\n            ],\n\n            scrollable : {\n                direction     : 'vertical',\n                directionLock : true\n            },\n\n            items : [\n                {\n                    docked : 'top',\n                    xtype  : 'titlebar',\n                    title  : 'Azure Mobile - Basic Data Example'\n                },\n                {\n                    xtype  : 'toolbar',\n                    docked : 'bottom',\n                    items  : [\n                        {\n                            xtype       : 'textfield',\n                            placeHolder : 'Enter new task',\n                            flex        : 1\n                        },\n                        {\n                            xtype  : 'button',\n                            action : 'add',\n                            text   : 'Add'\n                        }\n                    ]\n                }\n            ]\n        }\n    });\n\n###Make everything work together\n\n**Filename**: app/controller/Main.js\n\nThe final step in our application is to respond to button presses (delete, save, etc) and provide the logic behind all these requests. Sencha Touch utilizes controllers which listen for these events and responds accordingly.\n\n    Ext.define('Basic.controller.Main', {\n        extend : 'Ext.app.Controller',\n\n        config : {\n            refs : {\n                todoField : 'main toolbar textfield',\n                main      : 'main'\n            },\n\n            control : {\n                'button[action=add]'    : {\n                    tap : 'onAddItem'\n                },\n                'button[action=reload]' : {\n                    tap : 'onReload'\n                },\n\n                main : {\n                    activate      : 'loadInitialData',\n                    itemdoubletap : 'onItemEdit'\n                },\n\n                'basic-dataitem checkboxfield' : {\n                    change : 'onItemCompleteTap'\n                },\n\n                'basic-dataitem button' : {\n                    tap : 'onItemDeleteTap'\n                }\n            }\n        },\n\n        loadInitialData : function () {\n            Ext.getStore('TodoItems').load();\n        },\n\n        onItemDeleteTap : function (button, e, eOpts) {\n            var store    = Ext.getStore('TodoItems'),\n                dataItem = button.up('dataitem'),\n                rec      = dataItem.getRecord();\n\n            rec.erase({\n                success: function (rec, operation) {\n                    store.remove(rec);\n                },\n                failure: function (rec, operation) {\n                    Ext.Msg.alert(\n                        'Error',\n                        Ext.util.Format.format('There was an error deleting this task.<br/><br/>    Status Code: {0}<br/>Status Text: {1}',\n                        operation.error.status,\n                        operation.error.statusText)\n                    );\n                }\n            });\n        },\n\n        onItemCompleteTap : function (checkbox, newVal, oldVal, eOpts) {\n            var dataItem = checkbox.up('dataitem'),\n                rec      = dataItem.getRecord(),\n                recVal   = rec.get('complete');\n\n            // this check is needed to prevent an issue where multiple creates get triggered from one create\n            if (newVal !== recVal) {\n                rec.set('complete', newVal);\n                rec.save({\n                    success: function (rec, operation) {\n                        rec.commit();\n                    },\n                    failure: function (rec, operation) {\n                        // since there was a failure doing the update on the server then silently reject the change\n                        rec.reject(true);\n                        Ext.Msg.alert(\n                            'Error',\n                            Ext.util.Format.format('There was an error updating this task.<br/><br/>Status Code: {0}<br/>Status Text: {1}',\n                            operation.error.status,\n                            operation.error.statusText)\n                        );\n                    }\n                });\n            }\n        },\n\n        onItemEdit : function (list, index, target, record, e, eOpts) {\n            var rec = list.getSelection()[0];\n\n            Ext.Msg.prompt('Edit', 'Rename task',\n                function (buttonId, value) {\n                    if (buttonId === 'ok') {\n                        rec.set('text', value);\n                        rec.save({\n                            success: function (rec, operation) {\n                                rec.commit();\n                            },\n                            failure: function (rec, operation) {\n                                // since there was a failure doing the update on the server then reject the change\n                                rec.reject();\n                                Ext.Msg.alert(\n                                    'Error',\n                                    Ext.util.Format.format('There was an error updating this task.<br/><br/>Status Code: {0}<br/>Status Text: {1}',\n                                    operation.error.status,\n                                    operation.error.statusText)\n                                );\n                            }\n                        });\n                    }\n                },\n                null,\n                false,\n                record.get('text')\n            );\n        },\n\n        onReload : function () {\n            Ext.getStore('TodoItems').load();\n        },\n\n        onAddItem : function () {\n            var me = this,\n                rec,\n                store = Ext.getStore('TodoItems'),\n                field = me.getTodoField(),\n                value = field.getValue();\n\n            if (value === '') {\n                Ext.Msg.alert('Error', 'Please enter Task name', Ext.emptyFn);\n            }\n            else {\n                rec = Ext.create('Basic.model.TodoItem', {\n                    complete : false,\n                    text     : value\n                });\n                //store.insert(0, rec); //insert at the top\n                //store.sync();\n                rec.save({\n                    success: function (rec, operation) {\n                        store.insert(0, rec); //insert at the top\n                        field.setValue('');\n                    },\n                    failure: function (rec, operation) {\n                        Ext.Msg.alert(\n                            'Error',\n                            Ext.util.Format.format('There was an error creating this task.<br/><br/>Status Code: {0}<br/>Status Text: {1}',\n                            operation.error.status,\n                            operation.error.statusText)\n                        );\n                    }\n                });\n            }\n        }\n    });\n\n###Put it all together\n\n**Filename**: app.js\n\nOur final step is to finish editing the main application file, and provide information about the models, stores, views and controllers that have defined. The source files for these resources are automatically loaded into the application. Finally, the launch method is called which creates and displays the primary application view 'Basic.main.View'.\n\n\n    Ext.Loader.setConfig({\n        enabled : true,\n        paths   : {\n            'Ext'       : 'touch/src',\n            'Ext.azure' : 'packages/azure/src'\n        }\n    });\n\n    Ext.application({\n        name : 'Basic',\n\n        requires : [\n            'Ext.MessageBox',\n            'Ext.azure.Azure'\n        ],\n\n        views : [\n            'Main'\n        ],\n\n        controllers : [\n            'Main'\n        ],\n\n        stores : [\n            'TodoItems'\n        ],\n\n        azure : {\n            appUrl : 'YOUR_APP_URL.azure-mobile.net',\n            appKey : 'YOUR_APP_KEY'\n        },\n\n        icon : {\n            '57'  : 'resources/icons/Icon.png',\n            '72'  : 'resources/icons/Icon~ipad.png',\n            '114' : 'resources/icons/Icon@2x.png',\n            '144' : 'resources/icons/Icon~ipad@2x.png'\n        },\n\n        isIconPrecomposed : true,\n\n        startupImage : {\n            '320x460'   : 'resources/startup/320x460.jpg',\n            '640x920'   : 'resources/startup/640x920.png',\n            '768x1004'  : 'resources/startup/768x1004.png',\n            '748x1024'  : 'resources/startup/748x1024.png',\n            '1536x2008' : 'resources/startup/1536x2008.png',\n            '1496x2048' : 'resources/startup/1496x2048.png'\n        },\n\n        launch : function () {\n            // Destroy the #appLoadingIndicator element\n            Ext.fly('appLoadingIndicator').destroy();\n\n            // Initialize Azure\n            Ext.Azure.init(this.config.azure);\n\n            // Initialize the main view\n            Ext.Viewport.add(Ext.create('Basic.view.Main'));\n        },\n\n        onUpdated : function () {\n            Ext.Msg.confirm(\n                \"Application Update\",\n                \"This application has just successfully been updated to the latest version. Reload now?\",\n                function (buttonId) {\n                    if (buttonId === 'yes') {\n                        window.location.reload();\n                    }\n                }\n            );\n        }\n    });\n\n###Host and run your Sencha Touch app\n\nThe final stage of this tutorial is to host and run your new app on your local computer.\n\n  1. In your terminal, browse to the location of your unzipped application.\n\n  2. Using Sencha Cmd, run the following commands:\n\n    * *sencha app refresh* : This will instruct Sencha Cmd to locate all app dependencies,\n      and download any needed packages (for example, [Sencha Touch Extensions for Azure](https://market.sencha.com/extensions/sencha-touch-extensions-for-windows-azure)).\n\n    * *sencha web start* : This will start a local web server to test our application.\n\n    ![sencha web start](./media/partner-sencha-mobile-services-get-started/sencha-web-start.png)\n\n  3. Open the URL listed in your terminal in a web browser to start the app (e.g. http://localhost:1841).\n\n  4. In the app, type meaningful text, such as \"Complete the tutorial\", and then click **Add**.\n\n    ![new todo item](./media/partner-sencha-mobile-services-get-started/new-todo-item.png)\n\n    This sends a POST request to the new mobile service hosted in Azure. Data from the request is inserted into the TodoItem table.\n\n  5. Back in the Management Portal, click the **Data** tab and then click the TodoItems table.\n\n    ![Todo Items table](./media/partner-sencha-mobile-services-get-started/mobile-data-tab.png)\n\n    This lets you browse the data inserted by the app into the table.\n\n    ![browse todo table](./media/partner-sencha-mobile-services-get-started/mobile-data-browse.png)\n\n##Next Steps\nNow that you have completed the Getting Started Guide, learn how to perform additional important tasks in Mobile Services with Sencha.\n\n[Download](https://github.com/arthurakay/sencha-touch-azure-example) a completed sample app with additional styling and features to see what else Sencha Touch can do!\n\nThen, dive into more information about the Sencha Touch Extensions for Azure:\n\n  * Sample app [walkthrough](http://docs.sencha.com/touch-azure/1.0.0/#!/guide/data_filters)\n  * Get help in the [Sencha Forums](http://www.sencha.com/forum)\n  * Browse the [Sencha Documentation](http://docs.sencha.com/)\n  * Using Sencha With Azure Mobile Services: [(Video)](http://channel9.msdn.com/Shows/Cloud+Cover/Episode-126-Using-Sencha-With-Windows-Azure-Mobile-Services)\n\n\n##Additional Resources\n\n  * [Download Sencha Touch](http://pages.sencha.com/touch-for-azure.html)\n  * [Sencha Touch Extensions for Azure](https://market.sencha.com/extensions/sencha-touch-extensions-for-windows-azure)\n\n\n##Summary\n\nThe example outlined here is provided in the Sencha Touch Extension for Azure package and is located in the examples directory as the Basic Data example. There are a few more examples which are provided which demonstrated other functionality of this extension along with detailed comments and explanations.\n\nFor more information about getting started with Sencha Touch please visit the full set of [guides](http://docs.sencha.com/touch/#!/guide)\n\n<!-- images -->\n[0]: ./media/partner-sencha-mobile-services-get-started/finished-app.png\n"
}