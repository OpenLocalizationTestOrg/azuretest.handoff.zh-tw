{
  "nodes": [
    {
      "content": "How to Use Azure Managed Cache Service",
      "pos": [
        28,
        66
      ]
    },
    {
      "content": "Learn how to improve the performance of your Azure applications with Azure Managed Cache Service",
      "pos": [
        86,
        182
      ]
    },
    {
      "content": "How to Use Azure Managed Cache Service",
      "pos": [
        479,
        517
      ]
    },
    {
      "content": "This guide shows you how to get started using",
      "pos": [
        519,
        564
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Azure Managed Cache Service<ept id=\"p1\">**</ept>.",
      "pos": [
        566,
        598
      ]
    },
    {
      "content": "The samples are written in C\\# code and",
      "pos": [
        599,
        638
      ]
    },
    {
      "content": "use the .NET API.",
      "pos": [
        639,
        656
      ]
    },
    {
      "content": "The scenarios covered include <bpt id=\"p1\">**</bpt>creating and configuring a cache<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>configuring cache clients<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>adding and removing\nobjects from the cache, storing ASP.NET session state in the cache<ept id=\"p3\">**</ept>,",
      "pos": [
        657,
        847
      ]
    },
    {
      "content": "and <bpt id=\"p1\">**</bpt>enabling ASP.NET page output caching using the cache<ept id=\"p1\">**</ept>.",
      "pos": [
        848,
        909
      ]
    },
    {
      "content": "For more",
      "pos": [
        910,
        918
      ]
    },
    {
      "content": "information on using Azure Cache, refer to the [Next Steps][] section.",
      "pos": [
        919,
        989
      ]
    },
    {
      "content": "For guidance on choosing the right Azure Cache offering for your application, see [Which Azure Cache offering is right for me?][].",
      "pos": [
        992,
        1122
      ]
    },
    {
      "content": "What is Azure Managed Cache Service?",
      "pos": [
        1150,
        1186
      ]
    },
    {
      "content": "Azure Managed Cache Service is a distributed, in-memory, scalable solution that enables you to build highly scalable and responsive applications by providing super-fast access to data.",
      "pos": [
        1188,
        1372
      ]
    },
    {
      "content": "Azure Managed Cache Service includes the following",
      "pos": [
        1374,
        1424
      ]
    },
    {
      "content": "features:",
      "pos": [
        1425,
        1434
      ]
    },
    {
      "pos": [
        1440,
        1603
      ],
      "content": "Pre-built ASP.NET providers for session state and page output\ncaching, enabling acceleration of web applications without having to\nmodify application code.",
      "leadings": [
        "",
        "    ",
        "    "
      ],
      "nodes": [
        {
          "content": "Pre-built ASP.NET providers for session state and page output",
          "pos": [
            0,
            61
          ]
        },
        {
          "content": "caching, enabling acceleration of web applications without having to",
          "pos": [
            62,
            130
          ]
        },
        {
          "content": "modify application code.",
          "pos": [
            131,
            155
          ]
        }
      ]
    },
    {
      "pos": [
        1608,
        1702
      ],
      "content": "Caches any serializable managed object - for example: CLR objects, rows, XML,\nbinary data.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Caches any serializable managed object - for example: CLR objects, rows, XML,",
          "pos": [
            0,
            77
          ]
        },
        {
          "content": "binary data.",
          "pos": [
            78,
            90
          ]
        }
      ]
    },
    {
      "pos": [
        1707,
        1787
      ],
      "content": "Consistent development model across both Azure and Windows\nServer AppFabric.",
      "leadings": [
        "",
        "    "
      ],
      "nodes": [
        {
          "content": "Consistent development model across both Azure and Windows",
          "pos": [
            0,
            58
          ]
        },
        {
          "content": "Server AppFabric.",
          "pos": [
            59,
            76
          ]
        }
      ]
    },
    {
      "content": "Managed Cache Service gives you access to a secure, dedicated cache that is managed by Microsoft.",
      "pos": [
        1789,
        1886
      ]
    },
    {
      "content": "A cache created using the Managed Cache Service is accessible from applications within Azure running on Azure Websites, Web &amp; Worker Roles and Virtual Machines.",
      "pos": [
        1887,
        2047
      ]
    },
    {
      "content": "Managed Cache Service is available in three tiers:",
      "pos": [
        2049,
        2099
      ]
    },
    {
      "content": "Basic - Cache in sizes from 128MB to 1GB",
      "pos": [
        2105,
        2145
      ]
    },
    {
      "content": "Standard - Cache in sizes from 1GB to 10GB",
      "pos": [
        2150,
        2192
      ]
    },
    {
      "content": "Premium - Cache in sizes from 5GB to 150GB",
      "pos": [
        2197,
        2239
      ]
    },
    {
      "content": "Each tier differs in terms of features and pricing.",
      "pos": [
        2241,
        2292
      ]
    },
    {
      "content": "The features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details][].",
      "pos": [
        2293,
        2406
      ]
    },
    {
      "content": "This guide provides an overview of getting started with Managed Cache Service.",
      "pos": [
        2408,
        2486
      ]
    },
    {
      "content": "For more detailed information on these features that are beyond the scope of this getting started guide, see [Overview of Azure Managed Cache Service][].",
      "pos": [
        2487,
        2640
      ]
    },
    {
      "content": "Getting Started with Cache Service",
      "pos": [
        2690,
        2724
      ]
    },
    {
      "content": "Getting started with Managed Cache Service is easy.",
      "pos": [
        2726,
        2777
      ]
    },
    {
      "content": "To get started, you provision and configure a cache.",
      "pos": [
        2778,
        2830
      ]
    },
    {
      "content": "Next, you configure the cache clients so they can access the cache.",
      "pos": [
        2831,
        2898
      ]
    },
    {
      "content": "Once the cache clients are configured, you can begin working with them.",
      "pos": [
        2899,
        2970
      ]
    },
    {
      "content": "[Create the cache][]",
      "pos": [
        2976,
        2996
      ]
    },
    {
      "content": "[Configure the cache][]",
      "pos": [
        3001,
        3024
      ]
    },
    {
      "content": "[Configure the cache clients][]",
      "pos": [
        3029,
        3060
      ]
    },
    {
      "content": "Create a cache",
      "pos": [
        3093,
        3107
      ]
    },
    {
      "content": "Cache instances in Managed Cache Service are created using PowerShell cmdlets.",
      "pos": [
        3109,
        3187
      ]
    },
    {
      "content": "Once a Managed Cache Service instance is created using the PowerShell cmdlets it can be viewed and configured in the [Azure Management Portal][].",
      "pos": [
        3191,
        3336
      ]
    },
    {
      "content": "To create a Managed Cache Service instance, open an Azure PowerShell command window.",
      "pos": [
        3338,
        3422
      ]
    },
    {
      "content": "For instructions on installing and using Azure PowerShell, see [How to install and configure Azure PowerShell][].",
      "pos": [
        3425,
        3538
      ]
    },
    {
      "content": "Invoke the [Add-AzureAccount][] cmdlet, and enter the email address and password associated with your account.",
      "pos": [
        3540,
        3650
      ]
    },
    {
      "content": "A subscription is chosen by default and is displayed after you invoke the [Add-AzureAccount][] cmdlet.",
      "pos": [
        3651,
        3753
      ]
    },
    {
      "content": "To change the subscription, invoke the [Select-AzureSubscription][] cmdlet.",
      "pos": [
        3754,
        3829
      ]
    },
    {
      "content": "If you have configured Azure PowerShell with a certificate for your account then you can skip this step.",
      "pos": [
        3832,
        3936
      ]
    },
    {
      "content": "For more information about connecting Azure PowerShell with your Azure account, see [How to install and configure Azure PowerShell][].",
      "pos": [
        3937,
        4071
      ]
    },
    {
      "content": "A subscription is chosen by default and is displayed.",
      "pos": [
        4073,
        4126
      ]
    },
    {
      "content": "To change the subscription, invoke the [Select-AzureSubscription][] cmdlet.",
      "pos": [
        4127,
        4202
      ]
    },
    {
      "content": "Invoke the [New-AzureManagedCache][] cmdlet and specify the name, region, cache offering, and size for the cache.",
      "pos": [
        4204,
        4317
      ]
    },
    {
      "content": "For <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>, enter a subdomain name to use for the cache endpoint.",
      "pos": [
        4319,
        4386
      ]
    },
    {
      "content": "The endpoint must be a string between six and twenty characters, contain only lowercase numbers and letters, and must start with a letter.",
      "pos": [
        4387,
        4525
      ]
    },
    {
      "content": "For <bpt id=\"p1\">**</bpt>Location<ept id=\"p1\">**</ept>, specify a region for the cache.",
      "pos": [
        4527,
        4576
      ]
    },
    {
      "content": "For the best performance, create the cache in the same region as the cache client application.",
      "pos": [
        4577,
        4671
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Sku<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Memory<ept id=\"p2\">**</ept> work together to determine the size of the cache.",
      "pos": [
        4673,
        4745
      ]
    },
    {
      "content": "Managed Cache Service is available in the three following tiers.",
      "pos": [
        4746,
        4810
      ]
    },
    {
      "content": "Basic - Cache in sizes from 128MB to 1GB in 128MB increments, with one default named cache",
      "pos": [
        4816,
        4906
      ]
    },
    {
      "content": "Standard - Cache in sizes from 1GB to 10GB in 1GB increments, with support for notifications and up to ten named caches",
      "pos": [
        4911,
        5030
      ]
    },
    {
      "content": "Premium - Cache in sizes from 5GB to 150GB in 5GB increments, with support for notifications, high availability, and up to ten named caches",
      "pos": [
        5035,
        5174
      ]
    },
    {
      "content": "Choose the <bpt id=\"p1\">**</bpt>Sku<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Memory<ept id=\"p2\">**</ept> that meets the needs of your application.",
      "pos": [
        5176,
        5251
      ]
    },
    {
      "content": "Note that some cache features, such as notifications and high availability, are only available with certain cache offerings.",
      "pos": [
        5252,
        5376
      ]
    },
    {
      "content": "For more information on choosing the cache offering and size that's best for your application, see [Cache offerings][].",
      "pos": [
        5377,
        5496
      ]
    },
    {
      "content": "In the following example, a Basic 128MB cache is created with name contosocache, in the South Central US geographic region.",
      "pos": [
        5499,
        5622
      ]
    },
    {
      "content": "For a complete list of parameters and values that can be used when creating a cache, see the [New-AzureManagedCache][] cmdlet documentation.",
      "pos": [
        5725,
        5865
      ]
    },
    {
      "content": "Once the PowerShell cmdlet is invoked, it can take a few minutes for the cache to be created.",
      "pos": [
        5867,
        5960
      ]
    },
    {
      "content": "After the cache has been created, your new cache has a <ph id=\"ph1\">`Running`</ph> status and is ready for use with default settings, and can be viewed and configured in the [Azure Management Portal][].",
      "pos": [
        5961,
        6145
      ]
    },
    {
      "content": "To customize the configuration of your cache, see the following [Configure the cache][] section.",
      "pos": [
        6146,
        6242
      ]
    },
    {
      "content": "You can monitor the creation progress in the Azure PowerShell window.",
      "pos": [
        6244,
        6313
      ]
    },
    {
      "content": "Once the cache is ready for use, the [New-AzureManagedCache][] cmdlet will display the cache information, as shown in the following example.",
      "pos": [
        6314,
        6454
      ]
    },
    {
      "content": "Configure the cache",
      "pos": [
        7298,
        7317
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Configure<ept id=\"p1\">**</ept> tab for Cache in the Management Portal is where you configure the options for your cache.",
      "pos": [
        7319,
        7426
      ]
    },
    {
      "content": "Each cache has a <bpt id=\"p1\">**</bpt>default<ept id=\"p1\">**</ept> named cache, and the Standard and Premium cache offerings support up to nine additional named caches, for a total of ten.",
      "pos": [
        7427,
        7577
      ]
    },
    {
      "content": "Each named cache has its own set of options which allow you to configure your cache in a highly flexible manner.",
      "pos": [
        7578,
        7690
      ]
    },
    {
      "content": "NamedCaches",
      "pos": [
        7694,
        7705
      ]
    },
    {
      "content": "To create a named cache, type the name of the new cache into the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> box, specify the desired options, click <bpt id=\"p2\">**</bpt>Save<ept id=\"p2\">**</ept>, and click <bpt id=\"p3\">**</bpt>Yes<ept id=\"p3\">**</ept> to confirm.",
      "pos": [
        7721,
        7874
      ]
    },
    {
      "content": "To cancel any changes, click <bpt id=\"p1\">**</bpt>Discard<ept id=\"p1\">**</ept>.",
      "pos": [
        7875,
        7916
      ]
    },
    {
      "content": "Expiry Policy and Time (min)",
      "pos": [
        7921,
        7949
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Expiry Policy<ept id=\"p1\">**</ept> works in conjunction with the <bpt id=\"p2\">**</bpt>Time (min)<ept id=\"p2\">**</ept> setting to determine when cached items expire.",
      "pos": [
        7954,
        8067
      ]
    },
    {
      "content": "There are three types of expiration policies: <bpt id=\"p1\">**</bpt>Absolute<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Sliding<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Never<ept id=\"p3\">**</ept>.",
      "pos": [
        8068,
        8155
      ]
    },
    {
      "content": "When <bpt id=\"p1\">**</bpt>Absolute<ept id=\"p1\">**</ept> is specified, the expiration interval specified by <bpt id=\"p2\">**</bpt>Time (min)<ept id=\"p2\">**</ept> begins when an item is added to the cache.",
      "pos": [
        8158,
        8284
      ]
    },
    {
      "content": "After the interval specified by <bpt id=\"p1\">**</bpt>Time (min)<ept id=\"p1\">**</ept> elapses, the item expires.",
      "pos": [
        8285,
        8358
      ]
    },
    {
      "content": "When <bpt id=\"p1\">**</bpt>Sliding<ept id=\"p1\">**</ept> is specified, the expiration interval specified by <bpt id=\"p2\">**</bpt>Time (min)<ept id=\"p2\">**</ept> is reset each time an item is accessed in the cache.",
      "pos": [
        8361,
        8496
      ]
    },
    {
      "content": "The item does not expire until the interval specified by <bpt id=\"p1\">**</bpt>Time (min)<ept id=\"p1\">**</ept> elapses after the last access to the item.",
      "pos": [
        8497,
        8611
      ]
    },
    {
      "pos": [
        8613,
        8703
      ],
      "content": "When <bpt id=\"p1\">**</bpt>Never<ept id=\"p1\">**</ept> is specified, <bpt id=\"p2\">**</bpt>Time (min)<ept id=\"p2\">**</ept> must be set to <bpt id=\"p3\">**</bpt>0<ept id=\"p3\">**</ept>, and items do not expire."
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Absolute<ept id=\"p1\">**</ept> is the default expiration policy and 10 minutes is the default setting for <bpt id=\"p2\">**</bpt>Time (min)<ept id=\"p2\">**</ept>.",
      "pos": [
        8705,
        8808
      ]
    },
    {
      "content": "The expiration policy is fixed for each item in a named cache, but the <bpt id=\"p1\">**</bpt>Time (min)<ept id=\"p1\">**</ept> can be customized for each item by using <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Put<ept id=\"p3\">**</ept> overloads that take a timeout parameter.",
      "pos": [
        8809,
        8996
      ]
    },
    {
      "content": "For more information about eviction and expiration policies, see [Expiration and Eviction][].",
      "pos": [
        8998,
        9091
      ]
    },
    {
      "content": "Notifications",
      "pos": [
        9096,
        9109
      ]
    },
    {
      "content": "Cache notifications that allow your applications to receive asynchronous notifications when a variety of cache operations occur on the cache cluster.",
      "pos": [
        9114,
        9263
      ]
    },
    {
      "content": "Cache notifications also provide automatic invalidation of locally cached objects.",
      "pos": [
        9264,
        9346
      ]
    },
    {
      "content": "For more information, see [Notifications][].",
      "pos": [
        9347,
        9391
      ]
    },
    {
      "content": "Notifications are only available in the Standard and Premium cache offerings, and are not available in the Basic cache offering.",
      "pos": [
        9394,
        9522
      ]
    },
    {
      "content": "For more information, see [Cache offerings][].",
      "pos": [
        9523,
        9569
      ]
    },
    {
      "content": "High Availability",
      "pos": [
        9574,
        9591
      ]
    },
    {
      "content": "When high availability is enabled, a backup copy is made of each item added to the cache.",
      "pos": [
        9596,
        9685
      ]
    },
    {
      "content": "If an unexpected failure occurs to the primary copy of the item, the backup copy is still available.",
      "pos": [
        9686,
        9786
      ]
    },
    {
      "content": "By definition, the use of high availability multiplies the amount of required memory for each cached item by two.",
      "pos": [
        9788,
        9901
      ]
    },
    {
      "content": "Consider this memory impact during capacity planning tasks.",
      "pos": [
        9902,
        9961
      ]
    },
    {
      "content": "For more information, see [High Availability][].",
      "pos": [
        9962,
        10010
      ]
    },
    {
      "content": "High availability is only available in the Premium cache offering, and is not available in the Basic or Standard cache offerings.",
      "pos": [
        10013,
        10142
      ]
    },
    {
      "content": "For more information, see [Cache offerings][].",
      "pos": [
        10143,
        10189
      ]
    },
    {
      "content": "Eviction",
      "pos": [
        10194,
        10202
      ]
    },
    {
      "content": "To maintain the memory capacity available within a cache, least recently used (LRU) eviction is supported.",
      "pos": [
        10207,
        10313
      ]
    },
    {
      "content": "When memory consumption exceeds the memory threshold, objects are evicted from memory, regardless of whether they have expired or not, until the memory pressure is relieved.",
      "pos": [
        10314,
        10487
      ]
    },
    {
      "content": "Eviction is enabled by default.",
      "pos": [
        10488,
        10519
      ]
    },
    {
      "content": "If eviction is disabled, items will not be evicted from the cache when the capacity is reached, and instead Put and Add operations will fail.",
      "pos": [
        10520,
        10661
      ]
    },
    {
      "content": "For more information about eviction and expiration policies, see [Expiration and Eviction][].",
      "pos": [
        10663,
        10756
      ]
    },
    {
      "content": "Once the cache is configured, you can configure the cache clients to allow access to the cache.",
      "pos": [
        10758,
        10853
      ]
    },
    {
      "content": "Configure the cache clients",
      "pos": [
        10879,
        10906
      ]
    },
    {
      "content": "A cache created using the Managed Cache Service is accessible from Azure applications running on Azure Websites, Web &amp; Worker Roles and Virtual Machines.",
      "pos": [
        10908,
        11061
      ]
    },
    {
      "content": "A NuGet package is provided that simplifies the configuration of cache client applications.",
      "pos": [
        11062,
        11153
      ]
    },
    {
      "pos": [
        11156,
        11307
      ],
      "content": "To configure a client application using the Cache NuGet package, right-click the project in <bpt id=\"p1\">**</bpt>Solution Explorer<ept id=\"p1\">**</ept> and choose <bpt id=\"p2\">**</bpt>Manage NuGet Packages<ept id=\"p2\">**</ept>."
    },
    {
      "content": "NuGetPackageMenu",
      "pos": [
        11312,
        11328
      ]
    },
    {
      "content": "Type <bpt id=\"p1\">**</bpt>WindowsAzure.Caching<ept id=\"p1\">**</ept> into the <bpt id=\"p2\">**</bpt>Search Online<ept id=\"p2\">**</ept> text box, and select <bpt id=\"p3\">**</bpt>Windows<ept id=\"p3\">**</ept>",
      "pos": [
        11349,
        11438
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>Azure<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>Cache<ept id=\"p2\">**</ept> from the results.",
      "pos": [
        11441,
        11478
      ]
    },
    {
      "content": "Click <bpt id=\"p1\">**</bpt>Install<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>I Accept<ept id=\"p2\">**</ept>.",
      "pos": [
        11479,
        11526
      ]
    },
    {
      "content": "NuGetPackage",
      "pos": [
        11530,
        11542
      ]
    },
    {
      "content": "The NuGet package does several things: it adds the required configuration to the config file of the application, and it adds the required assembly references.",
      "pos": [
        11559,
        11717
      ]
    },
    {
      "content": "For Cloud Services projects, it also adds a cache client diagnostic level setting to the ServiceConfiguration.cscfg file of the Cloud Service.",
      "pos": [
        11718,
        11860
      ]
    },
    {
      "content": "For ASP.NET web projects, the Cache NuGet package also adds two commented out sections to web.config.",
      "pos": [
        11863,
        11964
      ]
    },
    {
      "content": "The first section enables session state to be stored in the cache, and the second section enables ASP.NET page output caching.",
      "pos": [
        11965,
        12091
      ]
    },
    {
      "content": "For more information, see [How To: Store ASP.NET Session State in the Cache] and [How To: Store ASP.NET Page Output Caching in the Cache][].",
      "pos": [
        12092,
        12232
      ]
    },
    {
      "content": "The NuGet package adds the following configuration elements into your application's web.config or app.config.",
      "pos": [
        12234,
        12343
      ]
    },
    {
      "content": "A <bpt id=\"p1\">**</bpt>dataCacheClients<ept id=\"p1\">**</ept> section and a <bpt id=\"p2\">**</bpt>cacheDiagnostics<ept id=\"p2\">**</ept> section are added under the <bpt id=\"p3\">**</bpt>configSections<ept id=\"p3\">**</ept> element.",
      "pos": [
        12344,
        12457
      ]
    },
    {
      "content": "If there is no <bpt id=\"p1\">**</bpt>configSections<ept id=\"p1\">**</ept> element present, one is created as a child of the <bpt id=\"p2\">**</bpt>configuration<ept id=\"p2\">**</ept> element.",
      "pos": [
        12458,
        12568
      ]
    },
    {
      "pos": [
        13159,
        13285
      ],
      "content": "These new sections include references to a <bpt id=\"p1\">**</bpt>dataCacheClients<ept id=\"p1\">**</ept> element, which is also added to the <bpt id=\"p2\">**</bpt>configuration<ept id=\"p2\">**</ept> element."
    },
    {
      "content": "After the configuration is added, replace the following two items in the newly added configuration.",
      "pos": [
        14224,
        14323
      ]
    },
    {
      "pos": [
        14328,
        14458
      ],
      "content": "Replace <bpt id=\"p1\">**</bpt>[Cache role name or Service Endpoint]<ept id=\"p1\">**</ept> with the endpoint, which is displayed on the Dashboard in the Management Portal."
    },
    {
      "content": "Endpoint",
      "pos": [
        14466,
        14474
      ]
    },
    {
      "pos": [
        14490,
        14695
      ],
      "content": "Uncomment the securityProperties section, and replace <bpt id=\"p1\">**</bpt>[Authentication Key]<ept id=\"p1\">**</ept> with the authentication key, which can be found in the Management Portal by clicking <bpt id=\"p2\">**</bpt>Manage Keys<ept id=\"p2\">**</ept> from the cache dashboard."
    },
    {
      "content": "AccessKeys",
      "pos": [
        14703,
        14713
      ]
    },
    {
      "content": "These settings must be configured properly or clients will not be able to access the cache.",
      "pos": [
        14729,
        14820
      ]
    },
    {
      "content": "For Cloud Services projects, the NuGet package also adds a <bpt id=\"p1\">**</bpt>ClientDiagnosticLevel<ept id=\"p1\">**</ept> setting to the <bpt id=\"p2\">**</bpt>ConfigurationSettings<ept id=\"p2\">**</ept> of the cache client role in ServiceConfiguration.cscfg.",
      "pos": [
        14822,
        15003
      ]
    },
    {
      "content": "The following example is the <bpt id=\"p1\">**</bpt>WebRole1<ept id=\"p1\">**</ept> section from a ServiceConfiguration.cscfg file with a <bpt id=\"p2\">**</bpt>ClientDiagnosticLevel<ept id=\"p2\">**</ept> of 1, which is the default <bpt id=\"p3\">**</bpt>ClientDiagnosticLevel<ept id=\"p3\">**</ept>.",
      "pos": [
        15004,
        15179
      ]
    },
    {
      "content": "The client diagnostic level configures the level of caching diagnostic information collected for cache clients.",
      "pos": [
        15485,
        15596
      ]
    },
    {
      "content": "For more information, see [Troubleshooting and Diagnostics][]",
      "pos": [
        15597,
        15658
      ]
    },
    {
      "content": "The NuGet package also adds references to the following assemblies:",
      "pos": [
        15660,
        15727
      ]
    },
    {
      "content": "Microsoft.ApplicationServer.Caching.Client.dll",
      "pos": [
        15733,
        15779
      ]
    },
    {
      "content": "Microsoft.ApplicationServer.Caching.Core.dll",
      "pos": [
        15784,
        15828
      ]
    },
    {
      "content": "Microsoft.WindowsFabric.Common.dll",
      "pos": [
        15833,
        15867
      ]
    },
    {
      "content": "Microsoft.WindowsFabric.Data.Common.dll",
      "pos": [
        15872,
        15911
      ]
    },
    {
      "content": "Microsoft.ApplicationServer.Caching.AzureCommon.dll",
      "pos": [
        15916,
        15967
      ]
    },
    {
      "content": "Microsoft.ApplicationServer.Caching.AzureClientHelper.dll",
      "pos": [
        15972,
        16029
      ]
    },
    {
      "content": "If your project is a web project, the following assembly reference is also added:",
      "pos": [
        16031,
        16112
      ]
    },
    {
      "content": "Microsoft.Web.DistributedCache.dll.",
      "pos": [
        16118,
        16153
      ]
    },
    {
      "content": "Once your client project is configured for caching, you can use the techniques described in the following sections for working with your cache.",
      "pos": [
        16155,
        16298
      ]
    },
    {
      "content": "Working with Caches",
      "pos": [
        16338,
        16357
      ]
    },
    {
      "content": "The steps in this section describe how to perform common tasks with Cache.",
      "pos": [
        16359,
        16433
      ]
    },
    {
      "content": "[How To: Create a DataCache Object][]",
      "pos": [
        16439,
        16476
      ]
    },
    {
      "content": "[How To: Add and Retrieve an Object from the Cache][]",
      "pos": [
        16481,
        16534
      ]
    },
    {
      "content": "[How To: Specify the Expiration of an Object in the Cache][]",
      "pos": [
        16539,
        16599
      ]
    },
    {
      "content": "[How To: Store ASP.NET Session State in the Cache][]",
      "pos": [
        16604,
        16656
      ]
    },
    {
      "content": "[How To: Store ASP.NET Page Output Caching in the Cache][]",
      "pos": [
        16661,
        16719
      ]
    },
    {
      "content": "How To: Create a DataCache Object",
      "pos": [
        16759,
        16792
      ]
    },
    {
      "content": "In order to programatically work with a cache, you need a reference to the cache.",
      "pos": [
        16794,
        16875
      ]
    },
    {
      "content": "Add the following to the top of any file from which you want to use",
      "pos": [
        16876,
        16943
      ]
    },
    {
      "content": "Azure Cache:",
      "pos": [
        16944,
        16956
      ]
    },
    {
      "content": "If Visual Studio doesn't recognize the types in the using",
      "pos": [
        17007,
        17064
      ]
    },
    {
      "content": "statement even after installing the Cache NuGet package, which adds the necessary references, ensure that the target",
      "pos": [
        17065,
        17181
      ]
    },
    {
      "content": "profile for the project is .NET Framework 4 or higher, and be sure to select one of the profiles that does not specify <bpt id=\"p1\">**</bpt>Client Profile<ept id=\"p1\">**</ept>.",
      "pos": [
        17182,
        17320
      ]
    },
    {
      "content": "For instructions on configuring cache clients, see [Configure the cache clients][].",
      "pos": [
        17321,
        17404
      ]
    },
    {
      "content": "There are two ways to create a <bpt id=\"p1\">**</bpt>DataCache<ept id=\"p1\">**</ept> object.",
      "pos": [
        17406,
        17458
      ]
    },
    {
      "content": "The first way is to simply create a <bpt id=\"p1\">**</bpt>DataCache<ept id=\"p1\">**</ept>, passing in the name of the desired cache.",
      "pos": [
        17459,
        17551
      ]
    },
    {
      "pos": [
        17602,
        17724
      ],
      "content": "Once the <bpt id=\"p1\">**</bpt>DataCache<ept id=\"p1\">**</ept> is instantiated, you can use it to interact with the cache, as described in the following sections."
    },
    {
      "content": "To use the second way, create a new <bpt id=\"p1\">**</bpt>DataCacheFactory<ept id=\"p1\">**</ept> object in your application using the default constructor.",
      "pos": [
        17726,
        17840
      ]
    },
    {
      "content": "This causes the cache client to use the settings in the configuration file.",
      "pos": [
        17841,
        17916
      ]
    },
    {
      "content": "Call either the <bpt id=\"p1\">**</bpt>GetDefaultCache<ept id=\"p1\">**</ept> method of the new <bpt id=\"p2\">**</bpt>DataCacheFactory<ept id=\"p2\">**</ept> instance which returns a <bpt id=\"p3\">**</bpt>DataCache<ept id=\"p3\">**</ept> object, or the <bpt id=\"p4\">**</bpt>GetCache<ept id=\"p4\">**</ept> method and pass in the name of your cache.",
      "pos": [
        17917,
        18101
      ]
    },
    {
      "content": "These methods return a <bpt id=\"p1\">**</bpt>DataCache<ept id=\"p1\">**</ept> object that can then be used to programmatically access the cache.",
      "pos": [
        18102,
        18205
      ]
    },
    {
      "content": "How To: Add and Retrieve an Object from the Cache",
      "pos": [
        18548,
        18597
      ]
    },
    {
      "content": "To add an item to the cache, the <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> method or the <bpt id=\"p2\">**</bpt>Put<ept id=\"p2\">**</ept> method",
      "pos": [
        18599,
        18668
      ]
    },
    {
      "content": "can be used.",
      "pos": [
        18669,
        18681
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> method adds the specified object to the cache,",
      "pos": [
        18682,
        18740
      ]
    },
    {
      "content": "keyed by the value of the key parameter.",
      "pos": [
        18741,
        18781
      ]
    },
    {
      "content": "If an object with the same key is already in the cache, a",
      "pos": [
        18876,
        18933
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>DataCacheException<ept id=\"p1\">**</ept> will be thrown with the following message:",
      "pos": [
        18934,
        18999
      ]
    },
    {
      "pos": [
        19003,
        19173
      ],
      "content": "ErrorCode:SubStatus: An attempt is being made to create an object with\na Key that already exists in the cache. Caching will only accept\nunique Key values for objects.",
      "leadings": [
        "",
        "> ",
        "> "
      ],
      "nodes": [
        {
          "content": "ErrorCode:SubStatus: An attempt is being made to create an object with",
          "pos": [
            0,
            70
          ]
        },
        {
          "content": "a Key that already exists in the cache. Caching will only accept",
          "pos": [
            71,
            135
          ],
          "nodes": [
            {
              "content": "a Key that already exists in the cache.",
              "pos": [
                0,
                39
              ]
            },
            {
              "content": "Caching will only accept",
              "pos": [
                40,
                64
              ]
            }
          ]
        },
        {
          "content": "unique Key values for objects.",
          "pos": [
            136,
            166
          ]
        }
      ]
    },
    {
      "content": "To retrieve an object with a specific key, the <bpt id=\"p1\">**</bpt>Get<ept id=\"p1\">**</ept> method can be used.",
      "pos": [
        19175,
        19249
      ]
    },
    {
      "content": "If the object exists, it is",
      "pos": [
        19250,
        19277
      ]
    },
    {
      "content": "returned, and if it does not, null is returned.",
      "pos": [
        19278,
        19325
      ]
    },
    {
      "content": "The <bpt id=\"p1\">**</bpt>Put<ept id=\"p1\">**</ept> method adds the object with the specified key to the cache",
      "pos": [
        19711,
        19781
      ]
    },
    {
      "content": "if it does not exist, or replaces the object if it does exist.",
      "pos": [
        19782,
        19844
      ]
    },
    {
      "content": "How To: Specify the Expiration of an Object in the Cache",
      "pos": [
        20010,
        20066
      ]
    },
    {
      "content": "By default items in the cache expire 10 minutes after they are placed in the cache.",
      "pos": [
        20068,
        20151
      ]
    },
    {
      "content": "This can be configured in the <bpt id=\"p1\">**</bpt>Time (min)<ept id=\"p1\">**</ept> setting on the Configure tab for Cache in the Management Portal.",
      "pos": [
        20152,
        20261
      ]
    },
    {
      "content": "NamedCaches",
      "pos": [
        20265,
        20276
      ]
    },
    {
      "content": "There are three types of <bpt id=\"p1\">**</bpt>Expiry Policy<ept id=\"p1\">**</ept>: <bpt id=\"p2\">**</bpt>Never<ept id=\"p2\">**</ept>, <bpt id=\"p3\">**</bpt>Absolute<ept id=\"p3\">**</ept>, and <bpt id=\"p4\">**</bpt>Sliding<ept id=\"p4\">**</ept>.",
      "pos": [
        20292,
        20377
      ]
    },
    {
      "content": "These configure how <bpt id=\"p1\">**</bpt>Time (min)<ept id=\"p1\">**</ept> is used to determine expiration.",
      "pos": [
        20378,
        20445
      ]
    },
    {
      "content": "The default <bpt id=\"p1\">**</bpt>Expiration Type<ept id=\"p1\">**</ept> is <bpt id=\"p2\">**</bpt>Absolute<ept id=\"p2\">**</ept>, which means that the countdown timer for an item's expiration begins when the item is placed into the cache.",
      "pos": [
        20446,
        20603
      ]
    },
    {
      "content": "Once the specified amount of time has elapsed for an item, the item expires.",
      "pos": [
        20604,
        20680
      ]
    },
    {
      "content": "If <bpt id=\"p1\">**</bpt>Sliding<ept id=\"p1\">**</ept> is specified, then the expiration countdown for an item is reset each time the item is accessed in the cache, and the item will not expire until the specified amount of time has elapsed since its last access.",
      "pos": [
        20681,
        20904
      ]
    },
    {
      "content": "If <bpt id=\"p1\">**</bpt>Never<ept id=\"p1\">**</ept> is specified, then <bpt id=\"p2\">**</bpt>Time (min)<ept id=\"p2\">**</ept> must be set to <bpt id=\"p3\">**</bpt>0<ept id=\"p3\">**</ept>, and items will not expire, and will remain valid as long as they are in the cache.",
      "pos": [
        20905,
        21056
      ]
    },
    {
      "content": "If a longer or shorter timeout interval than what is configured in the cache properties is desired, a specific duration can be specified when an item is added or updated in the cache by using the",
      "pos": [
        21058,
        21253
      ]
    },
    {
      "content": "overload of <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Put<ept id=\"p2\">**</ept> that take a <bpt id=\"p3\">**</bpt>TimeSpan<ept id=\"p3\">**</ept> parameter.",
      "pos": [
        21254,
        21321
      ]
    },
    {
      "content": "In",
      "pos": [
        21322,
        21324
      ]
    },
    {
      "content": "the following example, the string <bpt id=\"p1\">**</bpt>value<ept id=\"p1\">**</ept> is added to cache, keyed by",
      "pos": [
        21325,
        21396
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>item<ept id=\"p1\">**</ept>, with a timeout of 30 minutes.",
      "pos": [
        21397,
        21436
      ]
    },
    {
      "content": "To view the remaining timeout interval of an item in the cache, the",
      "pos": [
        21557,
        21624
      ]
    },
    {
      "content": "<bpt id=\"p1\">**</bpt>GetCacheItem<ept id=\"p1\">**</ept> method can be used to retrieve a <bpt id=\"p2\">**</bpt>DataCacheItem<ept id=\"p2\">**</ept>",
      "pos": [
        21625,
        21692
      ]
    },
    {
      "content": "object that contains information about the item in the cache, including",
      "pos": [
        21693,
        21764
      ]
    },
    {
      "content": "the remaining timeout interval.",
      "pos": [
        21765,
        21796
      ]
    },
    {
      "content": "How To: Store ASP.NET Session State in the Cache",
      "pos": [
        22085,
        22133
      ]
    },
    {
      "content": "The Session State Provider for Azure Cache is an",
      "pos": [
        22135,
        22183
      ]
    },
    {
      "content": "out-of-process storage mechanism for ASP.NET applications.",
      "pos": [
        22184,
        22242
      ]
    },
    {
      "content": "This provider",
      "pos": [
        22243,
        22256
      ]
    },
    {
      "content": "enables you to store your session state in an Azure cache rather",
      "pos": [
        22257,
        22321
      ]
    },
    {
      "content": "than in-memory or in a SQL Server database.",
      "pos": [
        22322,
        22365
      ]
    },
    {
      "content": "To use the caching session",
      "pos": [
        22366,
        22392
      ]
    },
    {
      "content": "state provider, first configure your cache, and then configure your ASP.NET application for Cache using the Cache NuGet package as described in [Getting Started with Managed Cache Service][].",
      "pos": [
        22393,
        22584
      ]
    },
    {
      "content": "When the Cache NuGet package is installed, it adds a commented out section in web.config that contains the required configuration for your ASP.NET application to use the Session State Provider for Azure Cache.",
      "pos": [
        22585,
        22794
      ]
    },
    {
      "content": "If your web.config does not contain this commented out section after installing the Cache NuGet package, ensure that the latest NuGet Package Manager is installed from [NuGet Package Manager Installation][], and then uninstall and reinstall the package.",
      "pos": [
        23328,
        23581
      ]
    },
    {
      "content": "To enable the Session State Provider for Azure Cache, uncomment the specified section.",
      "pos": [
        23583,
        23669
      ]
    },
    {
      "content": "The default cache is specified in the provided snippet.",
      "pos": [
        23670,
        23725
      ]
    },
    {
      "content": "To use a different cache, specify the desired cache in the <bpt id=\"p1\">**</bpt>cacheName<ept id=\"p1\">**</ept> attribute.",
      "pos": [
        23726,
        23809
      ]
    },
    {
      "content": "For more information about using the Managed Cache service session state",
      "pos": [
        23811,
        23883
      ]
    },
    {
      "content": "provider, see [Session State Provider for Azure Cache][].",
      "pos": [
        23884,
        23941
      ]
    },
    {
      "content": "How To: Store ASP.NET Page Output Caching in the Cache",
      "pos": [
        23972,
        24026
      ]
    },
    {
      "content": "The Output Cache Provider for Azure Cache is an out-of-process storage mechanism for output cache data.",
      "pos": [
        24028,
        24131
      ]
    },
    {
      "content": "This data is specifically for full HTTP",
      "pos": [
        24132,
        24171
      ]
    },
    {
      "content": "responses (page output caching).",
      "pos": [
        24172,
        24204
      ]
    },
    {
      "content": "The provider plugs into the new output",
      "pos": [
        24205,
        24243
      ]
    },
    {
      "content": "cache provider extensibility point that was introduced in ASP.NET 4.",
      "pos": [
        24244,
        24312
      ]
    },
    {
      "content": "To",
      "pos": [
        24313,
        24315
      ]
    },
    {
      "content": "use the output cache provider, first configure your cache cluster, and then configure your ASP.NET application for caching using the Cache NuGet package, as described in [Getting Started with Managed Cache Service][].",
      "pos": [
        24316,
        24533
      ]
    },
    {
      "content": "When the Caching NuGet package is installed, it adds the following commented out section in web.config that contains the required configuration for your ASP.NET application to use the Output Cache Provider for Azure Caching.",
      "pos": [
        24534,
        24758
      ]
    },
    {
      "content": "If your web.config does not contain this commented out section after installing the Cache NuGet package, ensure that the latest NuGet Package Manager is installed from [NuGet Package Manager Installation][], and then uninstall and reinstall the package.",
      "pos": [
        25257,
        25510
      ]
    },
    {
      "content": "To enable the Output Cache Provider for Azure Cache, uncomment the specified section.",
      "pos": [
        25512,
        25597
      ]
    },
    {
      "content": "The default cache is specified in the provided snippet.",
      "pos": [
        25598,
        25653
      ]
    },
    {
      "content": "To use a different cache, specify the desired cache in the <bpt id=\"p1\">**</bpt>cacheName<ept id=\"p1\">**</ept> attribute.",
      "pos": [
        25654,
        25737
      ]
    },
    {
      "pos": [
        25739,
        25824
      ],
      "content": "Add an <bpt id=\"p1\">**</bpt>OutputCache<ept id=\"p1\">**</ept> directive to each page for which you wish to cache the output."
    },
    {
      "content": "In this example the cached page data will remain in the cache for 60 seconds, and a different version of the page will be cached for each parameter combination.",
      "pos": [
        25880,
        26040
      ]
    },
    {
      "content": "For more information on the available options, see [OutputCache Directive][].",
      "pos": [
        26041,
        26118
      ]
    },
    {
      "content": "For more information about using the Output Cache Provider for Azure Cache, see [Output Cache Provider for Azure Cache][].",
      "pos": [
        26120,
        26242
      ]
    },
    {
      "content": "Next Steps",
      "pos": [
        26273,
        26283
      ]
    },
    {
      "content": "Now that you've learned the basics of Managed Cache Service,",
      "pos": [
        26285,
        26345
      ]
    },
    {
      "content": "follow these links to learn how to do more complex caching tasks.",
      "pos": [
        26346,
        26411
      ]
    },
    {
      "content": "See the MSDN Reference: [Managed Cache Service][]",
      "pos": [
        26417,
        26466
      ]
    },
    {
      "content": "Learn how to migrate to Managed Cache Service: [Migrate to Managed Cache Service][]",
      "pos": [
        26471,
        26554
      ]
    },
    {
      "content": "Check out the samples: [Managed Cache Service Samples][]",
      "pos": [
        26559,
        26615
      ]
    },
    {
      "content": "test",
      "pos": [
        30921,
        30925
      ]
    }
  ],
  "content": "<properties \n    pageTitle=\"How to Use Azure Managed Cache Service\" \n    description=\"Learn how to improve the performance of your Azure applications with Azure Managed Cache Service\" \n    services=\"cache\" \n    documentationCenter=\"\" \n    authors=\"steved0x\" \n    manager=\"dwrede\" \n    editor=\"\"/>\n\n<tags \n    ms.service=\"cache\" \n    ms.workload=\"web\" \n    ms.tgt_pltfrm=\"na\" \n    ms.devlang=\"dotnet\" \n    ms.topic=\"article\" \n    ms.date=\"08/18/2015\" \n    ms.author=\"sdanie\"/>\n\n# How to Use Azure Managed Cache Service\n\nThis guide shows you how to get started using \n**Azure Managed Cache Service**. The samples are written in C\\# code and\nuse the .NET API. The scenarios covered include **creating and configuring a cache**, **configuring cache clients**, **adding and removing\nobjects from the cache, storing ASP.NET session state in the cache**,\nand **enabling ASP.NET page output caching using the cache**. For more\ninformation on using Azure Cache, refer to the [Next Steps][] section.\n\n>For guidance on choosing the right Azure Cache offering for your application, see [Which Azure Cache offering is right for me?][].\n\n<a name=\"what-is\"></a>\n## What is Azure Managed Cache Service?\n\nAzure Managed Cache Service is a distributed, in-memory, scalable solution that enables you to build highly scalable and responsive applications by providing super-fast access to data.\n\nAzure Managed Cache Service includes the following\nfeatures:\n\n-   Pre-built ASP.NET providers for session state and page output\n    caching, enabling acceleration of web applications without having to\n    modify application code.\n-   Caches any serializable managed object - for example: CLR objects, rows, XML,\n    binary data.\n-   Consistent development model across both Azure and Windows\n    Server AppFabric.\n\nManaged Cache Service gives you access to a secure, dedicated cache that is managed by Microsoft. A cache created using the Managed Cache Service is accessible from applications within Azure running on Azure Websites, Web & Worker Roles and Virtual Machines.\n\nManaged Cache Service is available in three tiers:\n\n-   Basic - Cache in sizes from 128MB to 1GB\n-   Standard - Cache in sizes from 1GB to 10GB\n-   Premium - Cache in sizes from 5GB to 150GB\n\nEach tier differs in terms of features and pricing. The features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details][].\n\nThis guide provides an overview of getting started with Managed Cache Service. For more detailed information on these features that are beyond the scope of this getting started guide, see [Overview of Azure Managed Cache Service][].\n\n<a name=\"getting-started-cache-service\"></a>\n## Getting Started with Cache Service\n\nGetting started with Managed Cache Service is easy. To get started, you provision and configure a cache. Next, you configure the cache clients so they can access the cache. Once the cache clients are configured, you can begin working with them.\n\n-   [Create the cache][]\n-   [Configure the cache][]\n-   [Configure the cache clients][]\n\n<a name=\"create-cache\"></a>\n## Create a cache\n\nCache instances in Managed Cache Service are created using PowerShell cmdlets. \n\n>Once a Managed Cache Service instance is created using the PowerShell cmdlets it can be viewed and configured in the [Azure Management Portal][].\n\nTo create a Managed Cache Service instance, open an Azure PowerShell command window.\n\n>For instructions on installing and using Azure PowerShell, see [How to install and configure Azure PowerShell][].\n\nInvoke the [Add-AzureAccount][] cmdlet, and enter the email address and password associated with your account. A subscription is chosen by default and is displayed after you invoke the [Add-AzureAccount][] cmdlet. To change the subscription, invoke the [Select-AzureSubscription][] cmdlet.\n\n>If you have configured Azure PowerShell with a certificate for your account then you can skip this step. For more information about connecting Azure PowerShell with your Azure account, see [How to install and configure Azure PowerShell][].\n\nA subscription is chosen by default and is displayed. To change the subscription, invoke the [Select-AzureSubscription][] cmdlet.\n\nInvoke the [New-AzureManagedCache][] cmdlet and specify the name, region, cache offering, and size for the cache.\n\nFor **Name**, enter a subdomain name to use for the cache endpoint. The endpoint must be a string between six and twenty characters, contain only lowercase numbers and letters, and must start with a letter.\n\nFor **Location**, specify a region for the cache. For the best performance, create the cache in the same region as the cache client application.\n\n**Sku** and **Memory** work together to determine the size of the cache. Managed Cache Service is available in the three following tiers.\n\n-   Basic - Cache in sizes from 128MB to 1GB in 128MB increments, with one default named cache\n-   Standard - Cache in sizes from 1GB to 10GB in 1GB increments, with support for notifications and up to ten named caches\n-   Premium - Cache in sizes from 5GB to 150GB in 5GB increments, with support for notifications, high availability, and up to ten named caches\n\nChoose the **Sku** and **Memory** that meets the needs of your application. Note that some cache features, such as notifications and high availability, are only available with certain cache offerings. For more information on choosing the cache offering and size that's best for your application, see [Cache offerings][].\n\n In the following example, a Basic 128MB cache is created with name contosocache, in the South Central US geographic region.\n\n    New-AzureManagedCache -Name contosocache -Location \"South Central US\" -Sku Basic -Memory 128MB\n\n>For a complete list of parameters and values that can be used when creating a cache, see the [New-AzureManagedCache][] cmdlet documentation.\n\nOnce the PowerShell cmdlet is invoked, it can take a few minutes for the cache to be created. After the cache has been created, your new cache has a `Running` status and is ready for use with default settings, and can be viewed and configured in the [Azure Management Portal][]. To customize the configuration of your cache, see the following [Configure the cache][] section.\n\nYou can monitor the creation progress in the Azure PowerShell window. Once the cache is ready for use, the [New-AzureManagedCache][] cmdlet will display the cache information, as shown in the following example.\n\n    PS C:\\> Add-AzureAccount\n    VERBOSE: Account \"user@domain.com\" has been added.\n    VERBOSE: Subscription \"MySubscription\" is selected as the default subscription.\n    VERBOSE: To view all the subscriptions, please use Get-AzureSubscription.\n    VERBOSE: To switch to a different subscription, please use Select-AzureSubscription.\n    PS C:\\> New-AzureManagedCache -Name contosocache -Location \"South Central US\" -Sku Basic -Memory 128MB\n    VERBOSE: Intializing parameters...\n    VERBOSE: Creating prerequisites...\n    VERBOSE: Verify cache service name...\n    VERBOSE: Creating cache service...\n    VERBOSE: Waiting for cache service to be in ready state...\n\n\n    Name     : contosocache\n    Location : South Central US\n    State    : Active\n    Sku      : Basic\n    Memory   : 128MB\n\n\n\n    PS C:\\>\n\n\n\n\n<a name=\"enable-caching\"></a>\n## Configure the cache\n\nThe **Configure** tab for Cache in the Management Portal is where you configure the options for your cache. Each cache has a **default** named cache, and the Standard and Premium cache offerings support up to nine additional named caches, for a total of ten. Each named cache has its own set of options which allow you to configure your cache in a highly flexible manner.\n\n![NamedCaches][NamedCaches]\n\nTo create a named cache, type the name of the new cache into the **Name** box, specify the desired options, click **Save**, and click **Yes** to confirm. To cancel any changes, click **Discard**.\n\n## Expiry Policy and Time (min) ##\n\nThe **Expiry Policy** works in conjunction with the **Time (min)** setting to determine when cached items expire. There are three types of expiration policies: **Absolute**, **Sliding**, and **Never**. \n\nWhen **Absolute** is specified, the expiration interval specified by **Time (min)** begins when an item is added to the cache. After the interval specified by **Time (min)** elapses, the item expires. \n\nWhen **Sliding** is specified, the expiration interval specified by **Time (min)** is reset each time an item is accessed in the cache. The item does not expire until the interval specified by **Time (min)** elapses after the last access to the item.\n\nWhen **Never** is specified, **Time (min)** must be set to **0**, and items do not expire.\n\n**Absolute** is the default expiration policy and 10 minutes is the default setting for **Time (min)**. The expiration policy is fixed for each item in a named cache, but the **Time (min)** can be customized for each item by using **Add** and **Put** overloads that take a timeout parameter.\n\nFor more information about eviction and expiration policies, see [Expiration and Eviction][].\n\n## Notifications ##\n\nCache notifications that allow your applications to receive asynchronous notifications when a variety of cache operations occur on the cache cluster. Cache notifications also provide automatic invalidation of locally cached objects. For more information, see [Notifications][].\n\n>Notifications are only available in the Standard and Premium cache offerings, and are not available in the Basic cache offering. For more information, see [Cache offerings][].\n\n## High Availability ##\n\nWhen high availability is enabled, a backup copy is made of each item added to the cache. If an unexpected failure occurs to the primary copy of the item, the backup copy is still available.\n\nBy definition, the use of high availability multiplies the amount of required memory for each cached item by two. Consider this memory impact during capacity planning tasks. For more information, see [High Availability][].\n\n>High availability is only available in the Premium cache offering, and is not available in the Basic or Standard cache offerings. For more information, see [Cache offerings][].\n\n## Eviction ##\n\nTo maintain the memory capacity available within a cache, least recently used (LRU) eviction is supported. When memory consumption exceeds the memory threshold, objects are evicted from memory, regardless of whether they have expired or not, until the memory pressure is relieved.\nEviction is enabled by default. If eviction is disabled, items will not be evicted from the cache when the capacity is reached, and instead Put and Add operations will fail.\n\nFor more information about eviction and expiration policies, see [Expiration and Eviction][].\n\nOnce the cache is configured, you can configure the cache clients to allow access to the cache.\n\n<a name=\"NuGet\"></a>\n## Configure the cache clients\n\nA cache created using the Managed Cache Service is accessible from Azure applications running on Azure Websites, Web & Worker Roles and Virtual Machines. A NuGet package is provided that simplifies the configuration of cache client applications. \n\nTo configure a client application using the Cache NuGet package, right-click the project in **Solution Explorer** and choose **Manage NuGet Packages**. \n\n![NuGetPackageMenu][NuGetPackageMenu]\n\nType **WindowsAzure.Caching** into the **Search Online** text box, and select **Windows**  \n**Azure** **Cache** from the results. Click **Install**, and then click **I Accept**.\n\n![NuGetPackage][NuGetPackage]\n\nThe NuGet package does several things: it adds the required configuration to the config file of the application, and it adds the required assembly references. For Cloud Services projects, it also adds a cache client diagnostic level setting to the ServiceConfiguration.cscfg file of the Cloud Service.\n\n>For ASP.NET web projects, the Cache NuGet package also adds two commented out sections to web.config. The first section enables session state to be stored in the cache, and the second section enables ASP.NET page output caching. For more information, see [How To: Store ASP.NET Session State in the Cache] and [How To: Store ASP.NET Page Output Caching in the Cache][].\n\nThe NuGet package adds the following configuration elements into your application's web.config or app.config. A **dataCacheClients** section and a **cacheDiagnostics** section are added under the **configSections** element. If there is no **configSections** element present, one is created as a child of the **configuration** element.\n\n    <configSections>\n      <!-- Existing sections omitted for clarity. -->\n      <section name=\"dataCacheClients\" \n        type=\"Microsoft.ApplicationServer.Caching.DataCacheClientsSection,\n              Microsoft.ApplicationServer.Caching.Core\" \n        allowLocation=\"true\" \n        allowDefinition=\"Everywhere\" />\n  \n    <section name=\"cacheDiagnostics\" \n        type=\"Microsoft.ApplicationServer.Caching.AzureCommon.DiagnosticsConfigurationSection,\n              Microsoft.ApplicationServer.Caching.AzureCommon\" \n        allowLocation=\"true\" \n        allowDefinition=\"Everywhere\" />\n\n\nThese new sections include references to a **dataCacheClients** element, which is also added to the **configuration** element.\n\n    <dataCacheClients>\n      <dataCacheClient name=\"default\">\n        <!--To use the in-role flavor of Azure Caching, \n            set identifier to be the cache cluster role name -->\n        <!--To use the Azure Caching Service,\n            set identifier to be the endpoint of the cache cluster -->\n        <autoDiscover isEnabled=\"true\" identifier=\"[Cache role name or Service Endpoint]\" />\n        <!--<localCache isEnabled=\"true\" sync=\"TimeoutBased\" objectCount=\"100000\" ttlValue=\"300\" />-->\n        <!--Use this section to specify security settings for connecting to your cache. \n            This section is not required if your cache is hosted on a role that is a part\n            of your cloud service. -->\n        <!--<securityProperties mode=\"Message\" sslEnabled=\"false\">\n          <messageSecurity authorizationInfo=\"[Authentication Key]\" />\n        </securityProperties>-->\n      </dataCacheClient>\n    </dataCacheClients>\n\n\nAfter the configuration is added, replace the following two items in the newly added configuration.\n\n1. Replace **[Cache role name or Service Endpoint]** with the endpoint, which is displayed on the Dashboard in the Management Portal.\n\n    ![Endpoint][Endpoint]\n\n2. Uncomment the securityProperties section, and replace **[Authentication Key]** with the authentication key, which can be found in the Management Portal by clicking **Manage Keys** from the cache dashboard.\n\n    ![AccessKeys][AccessKeys]\n\n>These settings must be configured properly or clients will not be able to access the cache.\n\nFor Cloud Services projects, the NuGet package also adds a **ClientDiagnosticLevel** setting to the **ConfigurationSettings** of the cache client role in ServiceConfiguration.cscfg. The following example is the **WebRole1** section from a ServiceConfiguration.cscfg file with a **ClientDiagnosticLevel** of 1, which is the default **ClientDiagnosticLevel**.\n\n    <Role name=\"WebRole1\">\n      <Instances count=\"1\" />\n      <ConfigurationSettings>\n        <!-- Existing settings omitted for clarity. -->\n        <Setting name=\"Microsoft.WindowsAzure.Plugins.Caching.ClientDiagnosticLevel\" \n                 value=\"1\" />\n      </ConfigurationSettings>\n    </Role>\n\n>The client diagnostic level configures the level of caching diagnostic information collected for cache clients. For more information, see [Troubleshooting and Diagnostics][]\n\nThe NuGet package also adds references to the following assemblies:\n\n-   Microsoft.ApplicationServer.Caching.Client.dll\n-   Microsoft.ApplicationServer.Caching.Core.dll\n-   Microsoft.WindowsFabric.Common.dll\n-   Microsoft.WindowsFabric.Data.Common.dll\n-   Microsoft.ApplicationServer.Caching.AzureCommon.dll\n-   Microsoft.ApplicationServer.Caching.AzureClientHelper.dll\n\nIf your project is a web project, the following assembly reference is also added:\n\n-   Microsoft.Web.DistributedCache.dll.\n\nOnce your client project is configured for caching, you can use the techniques described in the following sections for working with your cache.\n\n<a name=\"working-with-caches\"></a>\n## Working with Caches\n\nThe steps in this section describe how to perform common tasks with Cache.\n\n-   [How To: Create a DataCache Object][]\n-   [How To: Add and Retrieve an Object from the Cache][]\n-   [How To: Specify the Expiration of an Object in the Cache][]\n-   [How To: Store ASP.NET Session State in the Cache][]\n-   [How To: Store ASP.NET Page Output Caching in the Cache][]\n\n<a name=\"create-cache-object\"></a>\n## How To: Create a DataCache Object\n\nIn order to programatically work with a cache, you need a reference to the cache. Add the following to the top of any file from which you want to use\nAzure Cache:\n\n    using Microsoft.ApplicationServer.Caching;\n\n>If Visual Studio doesn't recognize the types in the using\nstatement even after installing the Cache NuGet package, which adds the necessary references, ensure that the target\nprofile for the project is .NET Framework 4 or higher, and be sure to select one of the profiles that does not specify **Client Profile**. For instructions on configuring cache clients, see [Configure the cache clients][].\n\nThere are two ways to create a **DataCache** object. The first way is to simply create a **DataCache**, passing in the name of the desired cache.\n\n    DataCache cache = new DataCache(\"default\");\n\nOnce the **DataCache** is instantiated, you can use it to interact with the cache, as described in the following sections.\n\nTo use the second way, create a new **DataCacheFactory** object in your application using the default constructor. This causes the cache client to use the settings in the configuration file. Call either the **GetDefaultCache** method of the new **DataCacheFactory** instance which returns a **DataCache** object, or the **GetCache** method and pass in the name of your cache. These methods return a **DataCache** object that can then be used to programmatically access the cache.\n\n    // Cache client configured by settings in application configuration file.\n    DataCacheFactory cacheFactory = new DataCacheFactory();\n    DataCache cache = cacheFactory.GetDefaultCache();\n    // Or DataCache cache = cacheFactory.GetCache(\"MyCache\");\n    // cache can now be used to add and retrieve items. \n\n<a name=\"add-object\"></a>\n## How To: Add and Retrieve an Object from the Cache\n\nTo add an item to the cache, the **Add** method or the **Put** method\ncan be used. The **Add** method adds the specified object to the cache,\nkeyed by the value of the key parameter.\n\n    // Add the string \"value\" to the cache, keyed by \"item\"\n    cache.Add(\"item\", \"value\");\n\nIf an object with the same key is already in the cache, a\n**DataCacheException** will be thrown with the following message:\n\n> ErrorCode:SubStatus: An attempt is being made to create an object with\n> a Key that already exists in the cache. Caching will only accept\n> unique Key values for objects.\n\nTo retrieve an object with a specific key, the **Get** method can be used. If the object exists, it is\nreturned, and if it does not, null is returned.\n\n    // Add the string \"value\" to the cache, keyed by \"key\"\n    object result = cache.Get(\"Item\");\n    if (result == null)\n    {\n        // \"Item\" not in cache. Obtain it from specified data source\n        // and add it.\n        string value = GetItemValue(...);\n        cache.Add(\"item\", value);\n    }\n    else\n    {\n        // \"Item\" is in cache, cast result to correct type.\n    }\n\nThe **Put** method adds the object with the specified key to the cache\nif it does not exist, or replaces the object if it does exist.\n\n    // Add the string \"value\" to the cache, keyed by \"item\". If it exists,\n    // replace it.\n    cache.Put(\"item\", \"value\");\n\n<a name=\"specify-expiration\"></a>\n## How To: Specify the Expiration of an Object in the Cache\n\nBy default items in the cache expire 10 minutes after they are placed in the cache. This can be configured in the **Time (min)** setting on the Configure tab for Cache in the Management Portal.\n\n![NamedCaches][NamedCaches]\n\nThere are three types of **Expiry Policy**: **Never**, **Absolute**, and **Sliding**. These configure how **Time (min)** is used to determine expiration. The default **Expiration Type** is **Absolute**, which means that the countdown timer for an item's expiration begins when the item is placed into the cache. Once the specified amount of time has elapsed for an item, the item expires. If **Sliding** is specified, then the expiration countdown for an item is reset each time the item is accessed in the cache, and the item will not expire until the specified amount of time has elapsed since its last access. If **Never** is specified, then **Time (min)** must be set to **0**, and items will not expire, and will remain valid as long as they are in the cache.\n\nIf a longer or shorter timeout interval than what is configured in the cache properties is desired, a specific duration can be specified when an item is added or updated in the cache by using the\noverload of **Add** and **Put** that take a **TimeSpan** parameter. In\nthe following example, the string **value** is added to cache, keyed by\n**item**, with a timeout of 30 minutes.\n\n    // Add the string \"value\" to the cache, keyed by \"item\"\n    cache.Add(\"item\", \"value\", TimeSpan.FromMinutes(30));\n\nTo view the remaining timeout interval of an item in the cache, the\n**GetCacheItem** method can be used to retrieve a **DataCacheItem**\nobject that contains information about the item in the cache, including\nthe remaining timeout interval.\n\n    // Get a DataCacheItem object that contains information about\n    // \"item\" in the cache. If there is no object keyed by \"item\" null\n    // is returned. \n    DataCacheItem item = cache.GetCacheItem(\"item\");\n    TimeSpan timeRemaining = item.Timeout;\n\n<a name=\"store-session\"></a>\n## How To: Store ASP.NET Session State in the Cache\n\nThe Session State Provider for Azure Cache is an\nout-of-process storage mechanism for ASP.NET applications. This provider\nenables you to store your session state in an Azure cache rather\nthan in-memory or in a SQL Server database. To use the caching session\nstate provider, first configure your cache, and then configure your ASP.NET application for Cache using the Cache NuGet package as described in [Getting Started with Managed Cache Service][]. When the Cache NuGet package is installed, it adds a commented out section in web.config that contains the required configuration for your ASP.NET application to use the Session State Provider for Azure Cache.\n\n    <!--Uncomment this section to use Azure Caching for session state caching\n    <system.web>\n      <sessionState mode=\"Custom\" customProvider=\"AFCacheSessionStateProvider\">\n        <providers>\n          <add name=\"AFCacheSessionStateProvider\" \n            type=\"Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider,\n                  Microsoft.Web.DistributedCache\" \n            cacheName=\"default\" \n            dataCacheClientName=\"default\"/>\n        </providers>\n      </sessionState>\n    </system.web>-->\n\n>If your web.config does not contain this commented out section after installing the Cache NuGet package, ensure that the latest NuGet Package Manager is installed from [NuGet Package Manager Installation][], and then uninstall and reinstall the package.\n\nTo enable the Session State Provider for Azure Cache, uncomment the specified section. The default cache is specified in the provided snippet. To use a different cache, specify the desired cache in the **cacheName** attribute.\n\nFor more information about using the Managed Cache service session state\nprovider, see [Session State Provider for Azure Cache][].\n\n<a name=\"store-page\"></a>\n## How To: Store ASP.NET Page Output Caching in the Cache\n\nThe Output Cache Provider for Azure Cache is an out-of-process storage mechanism for output cache data. This data is specifically for full HTTP\nresponses (page output caching). The provider plugs into the new output\ncache provider extensibility point that was introduced in ASP.NET 4. To\nuse the output cache provider, first configure your cache cluster, and then configure your ASP.NET application for caching using the Cache NuGet package, as described in [Getting Started with Managed Cache Service][]. When the Caching NuGet package is installed, it adds the following commented out section in web.config that contains the required configuration for your ASP.NET application to use the Output Cache Provider for Azure Caching.\n\n    <!--Uncomment this section to use Azure Caching for output caching\n    <caching>\n      <outputCache defaultProvider=\"AFCacheOutputCacheProvider\">\n        <providers>\n          <add name=\"AFCacheOutputCacheProvider\" \n            type=\"Microsoft.Web.DistributedCache.DistributedCacheOutputCacheProvider,\n                  Microsoft.Web.DistributedCache\" \n            cacheName=\"default\" \n            dataCacheClientName=\"default\" />\n        </providers>\n      </outputCache>\n    </caching>-->\n\n>If your web.config does not contain this commented out section after installing the Cache NuGet package, ensure that the latest NuGet Package Manager is installed from [NuGet Package Manager Installation][], and then uninstall and reinstall the package.\n\nTo enable the Output Cache Provider for Azure Cache, uncomment the specified section. The default cache is specified in the provided snippet. To use a different cache, specify the desired cache in the **cacheName** attribute.\n\nAdd an **OutputCache** directive to each page for which you wish to cache the output.\n\n    <%@ OutputCache Duration=\"60\" VaryByParam=\"*\" %>\n\nIn this example the cached page data will remain in the cache for 60 seconds, and a different version of the page will be cached for each parameter combination. For more information on the available options, see [OutputCache Directive][].\n\nFor more information about using the Output Cache Provider for Azure Cache, see [Output Cache Provider for Azure Cache][].\n\n<a name=\"next-steps\"></a>\n## Next Steps\n\nNow that you've learned the basics of Managed Cache Service,\nfollow these links to learn how to do more complex caching tasks.\n\n-   See the MSDN Reference: [Managed Cache Service][]\n-   Learn how to migrate to Managed Cache Service: [Migrate to Managed Cache Service][]\n-   Check out the samples: [Managed Cache Service Samples][]\n\n<!-- INTRA-TOPIC LINKS -->\n[Next Steps]: #next-steps\n[What is Azure Managed Cache Service?]: #what-is\n[Create an Azure Cache]: #create-cache\n[Which type of caching is right for me?]: #choosing-cache\n[Prepare Your Visual Studio Project to Use Azure Caching]: #prepare-vs\n[Configure Your Application to Use Caching]: #configure-app\n[Getting Started with Managed Cache Service]: #getting-started-cache-service\n[Create the cache]: #create-cache\n[Configure the cache]: #enable-caching\n[Configure the cache clients]: #NuGet\n[Working with Caches]: #working-with-caches\n[How To: Create a DataCache Object]: #create-cache-object\n[How To: Add and Retrieve an Object from the Cache]: #add-object\n[How To: Specify the Expiration of an Object in the Cache]: #specify-expiration\n[How To: Store ASP.NET Session State in the Cache]: #store-session\n[How To: Store ASP.NET Page Output Caching in the Cache]: #store-page\n[Target a Supported .NET Framework Profile]: #prepare-vs-target-net\n  \n<!-- IMAGES -->\n[NewCacheMenu]: ./media/cache-dotnet-how-to-use-service/CacheServiceNewCacheMenu.png\n\n[QuickCreate]: ./media/cache-dotnet-how-to-use-service/CacheServiceQuickCreate.png\n\n[Endpoint]: ./media/cache-dotnet-how-to-use-service/CacheServiceEndpoint.png\n\n[AccessKeys]: ./media/cache-dotnet-how-to-use-service/CacheServiceManageAccessKeys.png\n\n[NuGetPackage]: ./media/cache-dotnet-how-to-use-service/CacheServiceManageNuGetPackage.png\n\n[NuGetPackageMenu]: ./media/cache-dotnet-how-to-use-service/CacheServiceManageNuGetPackagesMenu.png\n\n[NamedCaches]: ./media/cache-dotnet-how-to-use-service/CacheServiceNamedCaches.jpg\n  \n   \n<!-- LINKS -->\n[Azure Management Portal]: https://manage.windowsazure.com/\n[How to: Configure a Cache Client Programmatically]: http://msdn.microsoft.com/library/windowsazure/gg618003.aspx\n[Session State Provider for Azure Cache]: http://go.microsoft.com/fwlink/?LinkId=320835\n[Azure AppFabric Cache: Caching Session State]: http://www.microsoft.com/showcase/details.aspx?uuid=87c833e9-97a9-42b2-8bb1-7601f9b5ca20\n[Output Cache Provider for Azure Cache]: http://go.microsoft.com/fwlink/?LinkId=320837\n[Azure Shared Caching]: http://msdn.microsoft.com/library/windowsazure/gg278356.aspx\n[Team Blog]: http://blogs.msdn.com/b/windowsazure/\n[Azure Caching]: http://www.microsoft.com/showcase/Search.aspx?phrase=azure+caching\n[How to Configure Virtual Machine Sizes]: http://go.microsoft.com/fwlink/?LinkId=164387\n[Azure Caching Capacity Planning Considerations]: http://go.microsoft.com/fwlink/?LinkId=320167\n[Azure Caching]: http://go.microsoft.com/fwlink/?LinkId=252658\n[How to: Set the Cacheability of an ASP.NET Page Declaratively]: http://msdn.microsoft.com/library/zd1ysf1y.aspx\n[How to: Set a Page's Cacheability Programmatically]: http://msdn.microsoft.com/library/z852zf6b.aspx\n[Overview of Azure Managed Cache Service]: http://go.microsoft.com/fwlink/?LinkId=320830\n[Managed Cache Service]: http://go.microsoft.com/fwlink/?LinkId=320830\n[OutputCache Directive]: http://go.microsoft.com/fwlink/?LinkId=251979\n[Troubleshooting and Diagnostics]: http://go.microsoft.com/fwlink/?LinkId=320839\n[NuGet Package Manager Installation]: http://go.microsoft.com/fwlink/?LinkId=240311\n[Cache Pricing Details]: http://www.windowsazure.com/pricing/details/cache/\n[Management Portal]: https://manage.windowsazure.com/\n[Cache offerings]: http://go.microsoft.com/fwlink/?LinkId=317277\n[Capacity planning]: http://go.microsoft.com/fwlink/?LinkId=320167\n[Expiration and Eviction]: http://go.microsoft.com/fwlink/?LinkId=317278\n[High Availability]: http://go.microsoft.com/fwlink/?LinkId=317329\n[Notifications]: http://go.microsoft.com/fwlink/?LinkId=317276\n[Migrate to Managed Cache Service]: http://go.microsoft.com/fwlink/?LinkId=317347\n[Managed Cache Service Samples]: http://go.microsoft.com/fwlink/?LinkId=320840\n[New-AzureManagedCache]: http://go.microsoft.com/fwlink/?LinkId=400495\n[Azure Managed Cache Cmdlets]: http://go.microsoft.com/fwlink/?LinkID=398555\n[How to install and configure Azure PowerShell]: http://go.microsoft.com/fwlink/?LinkId=400494\n[Add-AzureAccount]: http://msdn.microsoft.com/library/dn495128.aspx\n[Select-AzureSubscription]: http://msdn.microsoft.com/library/dn495203.aspx\n\n[Which Azure Cache offering is right for me?]: http://msdn.microsoft.com/library/azure/dn766201.aspx\n \ntest\n"
}